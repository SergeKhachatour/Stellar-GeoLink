/*! For license information please see main.c66f56e4.js.LICENSE.txt */
(()=>{var e={43:(e,t,r)=>{"use strict";e.exports=r(202)},45:(e,t,r)=>{var n=r(738).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},121:(e,t,r)=>{var n,o=r(897).default,i=r(693).default,a=r(958).default,s=r(344).default,l=r(513).default,c=r(881).default;self,n=()=>(()=>{var e={3740:function(e){var t;t=()=>(()=>{var e={616:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(287);n.hp.alloc(1).subarray(0,1)instanceof n.hp||(n.hp.prototype.subarray=function(e,t){const r=Uint8Array.prototype.subarray.call(this,e,t);return Object.setPrototypeOf(r,n.hp.prototype),r});const o=n.hp},281:(e,t,r)=>{const n=r(164);e.exports=n},164:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Array:()=>U,Bool:()=>R,Double:()=>O,Enum:()=>H,Float:()=>I,Hyper:()=>C,Int:()=>S,LargeInt:()=>E,Opaque:()=>D,Option:()=>W,Quadruple:()=>M,Reference:()=>G,String:()=>F,Struct:()=>K,Union:()=>Z,UnsignedHyper:()=>P,UnsignedInt:()=>j,VarArray:()=>V,VarOpaque:()=>B,Void:()=>q,XdrReader:()=>c,XdrWriter:()=>h,config:()=>oe});class n extends TypeError{constructor(e){super("XDR Write Error: ".concat(e))}}class o extends TypeError{constructor(e){super("XDR Read Error: ".concat(e))}}class a extends TypeError{constructor(e){super("XDR Type Definition Error: ".concat(e))}}class s extends a{constructor(){super("method not implemented, it should be overloaded in the descendant class.")}}var l=r(616).A;class c{constructor(e){if(i(this,"_buffer",void 0),i(this,"_length",void 0),i(this,"_index",void 0),!l.isBuffer(e)){if(!(e instanceof Array||Array.isArray(e)||ArrayBuffer.isView(e)))throw new o("source invalid: ".concat(e));e=l.from(e)}this._buffer=e,this._length=e.length,this._index=0}get eof(){return this._index===this._length}advance(e){const t=this._index;if(this._index+=e,this._length<this._index)throw new o("attempt to read outside the boundary of the buffer");const r=4-(e%4||4);if(r>0){for(let e=0;e<r;e++)if(0!==this._buffer[this._index+e])throw new o("invalid padding");this._index+=r}return t}rewind(){this._index=0}read(e){const t=this.advance(e);return this._buffer.subarray(t,t+e)}readInt32BE(){return this._buffer.readInt32BE(this.advance(4))}readUInt32BE(){return this._buffer.readUInt32BE(this.advance(4))}readBigInt64BE(){return this._buffer.readBigInt64BE(this.advance(8))}readBigUInt64BE(){return this._buffer.readBigUInt64BE(this.advance(8))}readFloatBE(){return this._buffer.readFloatBE(this.advance(4))}readDoubleBE(){return this._buffer.readDoubleBE(this.advance(8))}ensureInputConsumed(){if(this._index!==this._length)throw new o("invalid XDR contract typecast - source buffer not entirely consumed")}}var u=r(616).A;const d=8192;class h{constructor(e){i(this,"_buffer",void 0),i(this,"_length",void 0),i(this,"_index",0),"number"==typeof e?e=u.allocUnsafe(e):e instanceof u||(e=u.allocUnsafe(d)),this._buffer=e,this._length=e.length}alloc(e){const t=this._index;return this._index+=e,this._length<this._index&&this.resize(this._index),t}resize(e){const t=Math.ceil(e/d)*d,r=u.allocUnsafe(t);this._buffer.copy(r,0,0,this._length),this._buffer=r,this._length=t}finalize(){return this._buffer.subarray(0,this._index)}toArray(){return[...this.finalize()]}write(e,t){if("string"==typeof e){const r=this.alloc(t);this._buffer.write(e,r,"utf8")}else{e instanceof u||(e=u.from(e));const r=this.alloc(t);e.copy(this._buffer,r,0,t)}const r=4-(t%4||4);if(r>0){const e=this.alloc(r);this._buffer.fill(0,e,this._index)}}writeInt32BE(e){const t=this.alloc(4);this._buffer.writeInt32BE(e,t)}writeUInt32BE(e){const t=this.alloc(4);this._buffer.writeUInt32BE(e,t)}writeBigInt64BE(e){const t=this.alloc(8);this._buffer.writeBigInt64BE(e,t)}writeBigUInt64BE(e){const t=this.alloc(8);this._buffer.writeBigUInt64BE(e,t)}writeFloatBE(e){const t=this.alloc(4);this._buffer.writeFloatBE(e,t)}writeDoubleBE(e){const t=this.alloc(8);this._buffer.writeDoubleBE(e,t)}}i(h,"bufferChunkSize",d);var p=r(616).A;class f{toXDR(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"raw";if(!this.write)return this.constructor.toXDR(this,e);const t=new h;return this.write(this,t),v(t.finalize(),e)}fromXDR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"raw";if(!this.read)return this.constructor.fromXDR(e,t);const r=new c(b(e,t)),n=this.read(r);return r.ensureInputConsumed(),n}validateXDR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"raw";try{return this.fromXDR(e,t),!0}catch(e){return!1}}static toXDR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"raw";const r=new h;return this.write(e,r),v(r.finalize(),t)}static fromXDR(e){const t=new c(b(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"raw")),r=this.read(t);return t.ensureInputConsumed(),r}static validateXDR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"raw";try{return this.fromXDR(e,t),!0}catch(e){return!1}}}class m extends f{static read(e){throw new s}static write(e,t){throw new s}static isValid(e){return!1}}class g extends f{isValid(e){return!1}}class y extends TypeError{constructor(e){super("Invalid format ".concat(e,', must be one of "raw", "hex", "base64"'))}}function v(e,t){switch(t){case"raw":return e;case"hex":return e.toString("hex");case"base64":return e.toString("base64");default:throw new y(t)}}function b(e,t){switch(t){case"raw":return e;case"hex":return p.from(e,"hex");case"base64":return p.from(e,"base64");default:throw new y(t)}}function x(e,t){return null!=e&&(e instanceof t||_(e,t)&&"function"==typeof e.constructor.read&&"function"==typeof e.constructor.write&&_(e,"XdrType"))}function _(e,t){do{if(e.constructor.name===t)return!0}while(e=Object.getPrototypeOf(e));return!1}const w=2147483647;class S extends m{static read(e){return e.readInt32BE()}static write(e,t){if("number"!=typeof e)throw new n("not a number");if((0|e)!==e)throw new n("invalid i32 value");t.writeInt32BE(e)}static isValid(e){return"number"==typeof e&&(0|e)===e&&e>=-2147483648&&e<=w}}function k(e,t,r){if("bigint"!=typeof e)throw new TypeError("Expected bigint 'value', got "+typeof e);const n=t/r;if(1===n)return[e];if(r<32||r>128||2!==n&&4!==n&&8!==n)throw new TypeError("invalid bigint (".concat(e,") and slice size (").concat(t," -> ").concat(r,") combination"));const o=BigInt(r),i=new Array(n);for(let a=0;a<n;a++)i[a]=BigInt.asIntN(r,e),e>>=o;return i}function T(e,t){if(t)return[0n,(1n<<BigInt(e))-1n];const r=1n<<BigInt(e-1);return[0n-r,r-1n]}S.MAX_VALUE=w,S.MIN_VALUE=2147483648;class E extends m{constructor(e){super(),this._value=function(e,t,r){e instanceof Array?e.length&&e[0]instanceof Array&&(e=e[0]):e=[e];const n=t/e.length;switch(n){case 32:case 64:case 128:case 256:break;default:throw new RangeError("expected slices to fit in 32/64/128/256 bits, got ".concat(e))}try{for(let t=0;t<e.length;t++)"bigint"!=typeof e[t]&&(e[t]=BigInt(e[t].valueOf()))}catch(t){throw new TypeError("expected bigint-like values, got: ".concat(e," (").concat(t,")"))}if(r&&1===e.length&&e[0]<0n)throw new RangeError("expected a positive value, got: ".concat(e));let o=BigInt.asUintN(n,e[0]);for(let s=1;s<e.length;s++)o|=BigInt.asUintN(n,e[s])<<BigInt(s*n);r||(o=BigInt.asIntN(t,o));const[i,a]=T(t,r);if(o>=i&&o<=a)return o;throw new TypeError("bigint values [".concat(e,"] for ").concat(function(e,t){return"".concat(t?"u":"i").concat(e)}(t,r)," out of range [").concat(i,", ").concat(a,"]: ").concat(o))}(e,this.size,this.unsigned)}get unsigned(){throw new s}get size(){throw new s}slice(e){return k(this._value,this.size,e)}toString(){return this._value.toString()}toJSON(){return{_value:this._value.toString()}}toBigInt(){return BigInt(this._value)}static read(e){const{size:t}=this.prototype;return 64===t?new this(e.readBigUInt64BE()):new this(...Array.from({length:t/64},(()=>e.readBigUInt64BE())).reverse())}static write(e,t){if(e instanceof this)e=e._value;else if("bigint"!=typeof e||e>this.MAX_VALUE||e<this.MIN_VALUE)throw new n("".concat(e," is not a ").concat(this.name));const{unsigned:r,size:o}=this.prototype;if(64===o)r?t.writeBigUInt64BE(e):t.writeBigInt64BE(e);else for(const n of k(e,o,64).reverse())r?t.writeBigUInt64BE(n):t.writeBigInt64BE(n)}static isValid(e){return"bigint"==typeof e||e instanceof this}static fromString(e){return new this(e)}static defineIntBoundaries(){const[e,t]=T(this.prototype.size,this.prototype.unsigned);this.MIN_VALUE=e,this.MAX_VALUE=t}}i(E,"MAX_VALUE",0n),i(E,"MIN_VALUE",0n);class C extends E{constructor(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];super(t)}get low(){return 0|Number(0xffffffffn&this._value)}get high(){return 0|Number(this._value>>32n)}get size(){return 64}get unsigned(){return!1}static fromBits(e,t){return new this(e,t)}}C.defineIntBoundaries();const A=4294967295;class j extends m{static read(e){return e.readUInt32BE()}static write(e,t){if("number"!=typeof e||!(e>=0&&e<=A)||e%1!=0)throw new n("invalid u32 value");t.writeUInt32BE(e)}static isValid(e){return"number"==typeof e&&e%1==0&&e>=0&&e<=A}}j.MAX_VALUE=A,j.MIN_VALUE=0;class P extends E{constructor(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];super(t)}get low(){return 0|Number(0xffffffffn&this._value)}get high(){return 0|Number(this._value>>32n)}get size(){return 64}get unsigned(){return!0}static fromBits(e,t){return new this(e,t)}}P.defineIntBoundaries();class I extends m{static read(e){return e.readFloatBE()}static write(e,t){if("number"!=typeof e)throw new n("not a number");t.writeFloatBE(e)}static isValid(e){return"number"==typeof e}}class O extends m{static read(e){return e.readDoubleBE()}static write(e,t){if("number"!=typeof e)throw new n("not a number");t.writeDoubleBE(e)}static isValid(e){return"number"==typeof e}}class M extends m{static read(){throw new a("quadruple not supported")}static write(){throw new a("quadruple not supported")}static isValid(){return!1}}class R extends m{static read(e){const t=S.read(e);switch(t){case 0:return!1;case 1:return!0;default:throw new o("got ".concat(t," when trying to read a bool"))}}static write(e,t){const r=e?1:0;S.write(r,t)}static isValid(e){return"boolean"==typeof e}}var L=r(616).A;class F extends g{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.MAX_VALUE;super(),this._maxLength=e}read(e){const t=j.read(e);if(t>this._maxLength)throw new o("saw ".concat(t," length String, max allowed is ").concat(this._maxLength));return e.read(t)}readString(e){return this.read(e).toString("utf8")}write(e,t){const r="string"==typeof e?L.byteLength(e,"utf8"):e.length;if(r>this._maxLength)throw new n("got ".concat(e.length," bytes, max allowed is ").concat(this._maxLength));j.write(r,t),t.write(e,r)}isValid(e){return"string"==typeof e?L.byteLength(e,"utf8")<=this._maxLength:!!(e instanceof Array||L.isBuffer(e))&&e.length<=this._maxLength}}var z=r(616).A;class D extends g{constructor(e){super(),this._length=e}read(e){return e.read(this._length)}write(e,t){const{length:r}=e;if(r!==this._length)throw new n("got ".concat(e.length," bytes, expected ").concat(this._length));t.write(e,r)}isValid(e){return z.isBuffer(e)&&e.length===this._length}}var N=r(616).A;class B extends g{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.MAX_VALUE;super(),this._maxLength=e}read(e){const t=j.read(e);if(t>this._maxLength)throw new o("saw ".concat(t," length VarOpaque, max allowed is ").concat(this._maxLength));return e.read(t)}write(e,t){const{length:r}=e;if(e.length>this._maxLength)throw new n("got ".concat(e.length," bytes, max allowed is ").concat(this._maxLength));j.write(r,t),t.write(e,r)}isValid(e){return N.isBuffer(e)&&e.length<=this._maxLength}}class U extends g{constructor(e,t){super(),this._childType=e,this._length=t}read(e){const t=new r.g.Array(this._length);for(let r=0;r<this._length;r++)t[r]=this._childType.read(e);return t}write(e,t){if(!r.g.Array.isArray(e))throw new n("value is not array");if(e.length!==this._length)throw new n("got array of size ".concat(e.length,", expected ").concat(this._length));for(const r of e)this._childType.write(r,t)}isValid(e){if(!(e instanceof r.g.Array)||e.length!==this._length)return!1;for(const t of e)if(!this._childType.isValid(t))return!1;return!0}}class V extends g{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.MAX_VALUE;super(),this._childType=e,this._maxLength=t}read(e){const t=j.read(e);if(t>this._maxLength)throw new o("saw ".concat(t," length VarArray, max allowed is ").concat(this._maxLength));const r=new Array(t);for(let n=0;n<t;n++)r[n]=this._childType.read(e);return r}write(e,t){if(!(e instanceof Array))throw new n("value is not array");if(e.length>this._maxLength)throw new n("got array of size ".concat(e.length,", max allowed is ").concat(this._maxLength));j.write(e.length,t);for(const r of e)this._childType.write(r,t)}isValid(e){if(!(e instanceof Array)||e.length>this._maxLength)return!1;for(const t of e)if(!this._childType.isValid(t))return!1;return!0}}class W extends m{constructor(e){super(),this._childType=e}read(e){if(R.read(e))return this._childType.read(e)}write(e,t){const r=null!=e;R.write(r,t),r&&this._childType.write(e,t)}isValid(e){return null==e||this._childType.isValid(e)}}class q extends m{static read(){}static write(e){if(void 0!==e)throw new n("trying to write value to a void slot")}static isValid(e){return void 0===e}}class H extends m{constructor(e,t){super(),this.name=e,this.value=t}static read(e){const t=S.read(e),r=this._byValue[t];if(void 0===r)throw new o("unknown ".concat(this.enumName," member for value ").concat(t));return r}static write(e,t){if(!this.isValid(e))throw new n("".concat(e," has enum name ").concat(null===e||void 0===e?void 0:e.enumName,", not ").concat(this.enumName,": ").concat(JSON.stringify(e)));S.write(e.value,t)}static isValid(e){var t;return(null===e||void 0===e||null===(t=e.constructor)||void 0===t?void 0:t.enumName)===this.enumName||x(e,this)}static members(){return this._members}static values(){return Object.values(this._members)}static fromName(e){const t=this._members[e];if(!t)throw new TypeError("".concat(e," is not a member of ").concat(this.enumName));return t}static fromValue(e){const t=this._byValue[e];if(void 0===t)throw new TypeError("".concat(e," is not a value of any member of ").concat(this.enumName));return t}static create(e,t,r){const n=class extends H{};n.enumName=t,e.results[t]=n,n._members={},n._byValue={};for(const[o,i]of Object.entries(r)){const e=new n(o,i);n._members[o]=e,n._byValue[i]=e,n[o]=()=>e}return n}}class G extends m{resolve(){throw new a('"resolve" method should be implemented in the descendant class')}}class K extends g{constructor(e){super(),this._attributes=e||{}}static read(e){const t={};for(const[r,n]of this._fields)t[r]=n.read(e);return new this(t)}static write(e,t){var r;if(!this.isValid(e))throw new n("".concat(e," has struct name ").concat(null===e||void 0===e||null===(r=e.constructor)||void 0===r?void 0:r.structName,", not ").concat(this.structName,": ").concat(JSON.stringify(e)));for(const[n,o]of this._fields){const r=e._attributes[n];o.write(r,t)}}static isValid(e){var t;return(null===e||void 0===e||null===(t=e.constructor)||void 0===t?void 0:t.structName)===this.structName||x(e,this)}static create(e,t,r){const n=class extends K{};n.structName=t,e.results[t]=n;const o=new Array(r.length);for(let i=0;i<r.length;i++){const t=r[i],a=t[0];let s=t[1];s instanceof G&&(s=s.resolve(e)),o[i]=[a,s],n.prototype[a]=X(a)}return n._fields=o,n}}function X(e){return function(t){return void 0!==t&&(this._attributes[e]=t),this._attributes[e]}}class Z extends g{constructor(e,t){super(),this.set(e,t)}set(e,t){"string"==typeof e&&(e=this.constructor._switchOn.fromName(e)),this._switch=e;const r=this.constructor.armForSwitch(this._switch);this._arm=r,this._armType=r===q?q:this.constructor._arms[r],this._value=t}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._arm;if(this._arm!==q&&this._arm!==e)throw new TypeError("".concat(e," not set"));return this._value}switch(){return this._switch}arm(){return this._arm}armType(){return this._armType}value(){return this._value}static armForSwitch(e){const t=this._switches.get(e);if(void 0!==t)return t;if(this._defaultArm)return this._defaultArm;throw new TypeError("Bad union switch: ".concat(e))}static armTypeForArm(e){return e===q?q:this._arms[e]}static read(e){const t=this._switchOn.read(e),r=this.armForSwitch(t),n=r===q?q:this._arms[r];let o;return o=void 0!==n?n.read(e):r.read(e),new this(t,o)}static write(e,t){if(!this.isValid(e))throw new n("".concat(e," has union name ").concat(null===e||void 0===e?void 0:e.unionName,", not ").concat(this.unionName,": ").concat(JSON.stringify(e)));this._switchOn.write(e.switch(),t),e.armType().write(e.value(),t)}static isValid(e){var t;return(null===e||void 0===e||null===(t=e.constructor)||void 0===t?void 0:t.unionName)===this.unionName||x(e,this)}static create(e,t,r){const n=class extends Z{};n.unionName=t,e.results[t]=n,r.switchOn instanceof G?n._switchOn=r.switchOn.resolve(e):n._switchOn=r.switchOn,n._switches=new Map,n._arms={};let o=r.defaultArm;o instanceof G&&(o=o.resolve(e)),n._defaultArm=o;for(const[i,a]of r.switches){const e="string"==typeof i?n._switchOn.fromName(i):i;n._switches.set(e,a)}if(void 0!==n._switchOn.values)for(const i of n._switchOn.values())n[i.name]=function(e){return new n(i,e)},n.prototype[i.name]=function(e){return this.set(i,e)};if(r.arms)for(const[i,a]of Object.entries(r.arms))n._arms[i]=a instanceof G?a.resolve(e):a,a!==q&&(n.prototype[i]=function(){return this.get(i)});return n}}class Y extends G{constructor(e){super(),this.name=e}resolve(e){return e.definitions[this.name].resolve(e)}}class J extends G{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.childReference=e,this.length=t,this.variable=r}resolve(e){let t=this.childReference,r=this.length;return t instanceof G&&(t=t.resolve(e)),r instanceof G&&(r=r.resolve(e)),this.variable?new V(t,r):new U(t,r)}}class $ extends G{constructor(e){super(),this.childReference=e,this.name=e.name}resolve(e){let t=this.childReference;return t instanceof G&&(t=t.resolve(e)),new W(t)}}class Q extends G{constructor(e,t){super(),this.sizedType=e,this.length=t}resolve(e){let t=this.length;return t instanceof G&&(t=t.resolve(e)),new this.sizedType(t)}}class ee{constructor(e,t,r){this.constructor=e,this.name=t,this.config=r}resolve(e){return this.name in e.results?e.results[this.name]:this.constructor(e,this.name,this.config)}}function te(e,t,r){return r instanceof G&&(r=r.resolve(e)),e.results[t]=r,r}function re(e,t,r){return e.results[t]=r,r}class ne{constructor(e){this._destination=e,this._definitions={}}enum(e,t){const r=new ee(H.create,e,t);this.define(e,r)}struct(e,t){const r=new ee(K.create,e,t);this.define(e,r)}union(e,t){const r=new ee(Z.create,e,t);this.define(e,r)}typedef(e,t){const r=new ee(te,e,t);this.define(e,r)}const(e,t){const r=new ee(re,e,t);this.define(e,r)}void(){return q}bool(){return R}int(){return S}hyper(){return C}uint(){return j}uhyper(){return P}float(){return I}double(){return O}quadruple(){return M}string(e){return new Q(F,e)}opaque(e){return new Q(D,e)}varOpaque(e){return new Q(B,e)}array(e,t){return new J(e,t)}varArray(e,t){return new J(e,t,!0)}option(e){return new $(e)}define(e,t){if(void 0!==this._destination[e])throw new a("".concat(e," is already defined"));this._definitions[e]=t}lookup(e){return new Y(e)}resolve(){for(const e of Object.values(this._definitions))e.resolve({definitions:this._definitions,results:this._destination})}}function oe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){const r=new ne(t);e(r),r.resolve()}return t}},526:(e,t)=>{"use strict";t.byteLength=function(e){var t=s(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,i=s(e),a=i[0],l=i[1],c=new o(function(e,t,r){return 3*(t+r)/4-r}(0,a,l)),u=0,d=l>0?a-4:a;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===l&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[u++]=255&t),1===l&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],a=16383,s=0,c=n-o;s<c;s+=a)i.push(l(e,s,s+a>c?c:s+a));return 1===o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};for(var r=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)r[a]=i[a],n[i.charCodeAt(a)]=a;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,n){for(var o,i,a=[],s=t;s<n;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},287:(e,t,r)=>{"use strict";const n=r(526),o=r(251),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=l,t.IS=50;const a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|m(e,t);let n=s(r);const o=n.write(e,t);return o!==r&&(n=n.slice(0,o)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Z(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Z(e,ArrayBuffer)||e&&Z(e.buffer,ArrayBuffer))return p(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(Z(e,SharedArrayBuffer)||e&&Z(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return l.from(n,t,r);const o=function(e){if(l.isBuffer(e)){const t=0|f(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||Y(e.length)?s(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return u(e),s(e<0?0:0|f(e))}function h(e){const t=e.length<0?0:0|f(e.length),r=s(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,l.prototype),n}function f(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function m(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Z(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return K(e).length;default:if(o)return n?-1:G(e).length;t=(""+t).toLowerCase(),o=!0}}function g(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,r);case"utf8":case"utf-8":return E(this,t,r);case"ascii":return A(this,t,r);case"latin1":case"binary":return j(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Y(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,o){let i,a=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){let n=-1;for(i=r;i<s;i++)if(c(e,i)===c(t,-1===n?0:i-n)){if(-1===n&&(n=i),i-n+1===l)return n*a}else-1!==n&&(i-=i-n),n=-1}else for(r+l>s&&(r=s-l),i=r;i>=0;i--){let r=!0;for(let n=0;n<l;n++)if(c(e,i+n)!==c(t,n)){r=!1;break}if(r)return i}return-1}function x(e,t,r,n){r=Number(r)||0;const o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;const i=t.length;let a;for(n>i/2&&(n=i/2),a=0;a<n;++a){const n=parseInt(t.substr(2*a,2),16);if(Y(n))return a;e[r+a]=n}return a}function _(e,t,r,n){return X(G(t,e.length-r),e,r,n)}function w(e,t,r,n){return X(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function S(e,t,r,n){return X(K(t),e,r,n)}function k(e,t,r,n){return X(function(e,t){let r,n,o;const i=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function T(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function E(e,t,r){r=Math.min(e.length,r);const n=[];let o=t;for(;o<r;){const t=e[o];let i=null,a=t>239?4:t>223?3:t>191?2:1;if(o+a<=r){let r,n,s,l;switch(a){case 1:t<128&&(i=t);break;case 2:r=e[o+1],128==(192&r)&&(l=(31&t)<<6|63&r,l>127&&(i=l));break;case 3:r=e[o+1],n=e[o+2],128==(192&r)&&128==(192&n)&&(l=(15&t)<<12|(63&r)<<6|63&n,l>2047&&(l<55296||l>57343)&&(i=l));break;case 4:r=e[o+1],n=e[o+2],s=e[o+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&s,l>65535&&l<1114112&&(i=l))}}null===i?(i=65533,a=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),o+=a}return function(e){const t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=C));return r}(n)}l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,r){return function(e,t,r){return u(e),e<=0?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)}(e,t,r)},l.allocUnsafe=function(e){return d(e)},l.allocUnsafeSlow=function(e){return d(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(Z(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),Z(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=l.allocUnsafe(t);let o=0;for(r=0;r<e.length;++r){let t=e[r];if(Z(t,Uint8Array))o+t.length>n.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(n,o)):Uint8Array.prototype.set.call(n,t,o);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,o)}o+=t.length}return n},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const r=t.IS;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},i&&(l.prototype[i]=l.prototype.inspect),l.prototype.compare=function(e,t,r,n,o){if(Z(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;let i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0);const s=Math.min(i,a),c=this.slice(n,o),u=e.slice(t,r);for(let l=0;l<s;++l)if(c[l]!==u[l]){i=c[l],a=u[l];break}return i<a?-1:a<i?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let i=!1;for(;;)switch(n){case"hex":return x(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":case"latin1":case"binary":return w(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const C=4096;function A(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function j(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function P(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let o="";for(let i=t;i<r;++i)o+=J[e[i]];return o}function I(e,t,r){const n=e.slice(t,r);let o="";for(let i=0;i<n.length-1;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function O(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,r,n,o,i){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function R(e,t,r,n,o){V(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function L(e,t,r,n,o){V(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r+7]=i,i>>=8,e[r+6]=i,i>>=8,e[r+5]=i,i>>=8,e[r+4]=i;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function F(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function z(e,t,r,n,i){return t=+t,r>>>=0,i||F(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function D(e,t,r,n,i){return t=+t,r>>>=0,i||F(e,0,r,8),o.write(e,t,r,n,52,8),r+8}l.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,l.prototype),n},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return n},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=this[e+--t],o=1;for(;t>0&&(o*=256);)n+=this[e+--t]*o;return n},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=$((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||q(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(o)<<BigInt(32))})),l.prototype.readBigUInt64BE=$((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||q(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(o)})),l.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=t,o=1,i=this[e+--n];for(;n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},l.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=$((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||q(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),l.prototype.readBigInt64BE=$((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||q(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||O(e,4,this.length),o.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||O(e,4,this.length),o.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||O(e,8,this.length),o.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||O(e,8,this.length),o.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||M(this,e,t,r,Math.pow(2,8*r)-1,0);let o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||M(this,e,t,r,Math.pow(2,8*r)-1,0);let o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=$((function(e){return R(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=$((function(e){return L(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);M(this,e,t,r,n-1,-n)}let o=0,i=1,a=0;for(this[t]=255&e;++o<r&&(i*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/i|0)-a&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);M(this,e,t,r,n-1,-n)}let o=r-1,i=1,a=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/i|0)-a&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=$((function(e){return R(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=$((function(e){return L(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(e,t,r){return z(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return z(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return D(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return D(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const o=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),o},l.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{const i=l.isBuffer(e)?e:l.from(e,n),a=i.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=i[o%a]}return this};const N={};function B(e,t,r){N[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(e,"]"),this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}}function U(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t="_".concat(e.slice(r-3,r)).concat(t);return"".concat(e.slice(0,r)).concat(t)}function V(e,t,r,n,o,i){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let o;throw o=i>3?0===t||t===BigInt(0)?">= 0".concat(n," and < 2").concat(n," ** ").concat(8*(i+1)).concat(n):">= -(2".concat(n," ** ").concat(8*(i+1)-1).concat(n,") and < 2 ** ").concat(8*(i+1)-1).concat(n):">= ".concat(t).concat(n," and <= ").concat(r).concat(n),new N.ERR_OUT_OF_RANGE("value",o,e)}!function(e,t,r){W(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||q(t,e.length-(r+1))}(n,o,i)}function W(e,t){if("number"!=typeof e)throw new N.ERR_INVALID_ARG_TYPE(t,"number",e)}function q(e,t,r){if(Math.floor(e)!==e)throw W(e,r),new N.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new N.ERR_BUFFER_OUT_OF_BOUNDS;throw new N.ERR_OUT_OF_RANGE(r||"offset",">= ".concat(r?1:0," and <= ").concat(t),e)}B("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),B("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)}),TypeError),B("ERR_OUT_OF_RANGE",(function(e,t,r){let n='The value of "'.concat(e,'" is out of range.'),o=r;return Number.isInteger(r)&&Math.abs(r)>2**32?o=U(String(r)):"bigint"==typeof r&&(o=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(o=U(o)),o+="n"),n+=" It must be ".concat(t,". Received ").concat(o),n}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function G(e,t){let r;t=t||1/0;const n=e.length;let o=null;const i=[];for(let a=0;a<n;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function K(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function X(e,t,r,n){let o;for(o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function Z(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Y(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let o=0;o<16;++o)t[n+o]=e[r]+e[o]}return t}();function $(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},251:(e,t)=>{t.read=function(e,t,r,n,o){var i,a,s=8*o-n-1,l=(1<<s)-1,c=l>>1,u=-7,d=r?o-1:0,h=r?-1:1,p=e[t+d];for(d+=h,i=p&(1<<-u)-1,p>>=-u,u+=s;u>0;i=256*i+e[t+d],d+=h,u-=8);for(a=i&(1<<-u)-1,i>>=-u,u+=n;u>0;a=256*a+e[t+d],d+=h,u-=8);if(0===i)i=1-c;else{if(i===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),i-=c}return(p?-1:1)*a*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var a,s,l,c=8*i-o-1,u=(1<<c)-1,d=u>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*l-1)*Math.pow(2,o),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;e[r+p]=255&s,p+=f,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;e[r+p]=255&a,p+=f,a/=256,c-=8);e[r+p-f]|=128*m}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}return r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(281)})(),e.exports=t()},2135:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Account=void 0;var n,o=(n=r(1242))&&n.__esModule?n:{default:n},i=r(7120);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function l(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}t.Account=function(e,t){return t&&s(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i.StrKey.isValidMed25519PublicKey(t))throw new Error("accountId is an M-address; use MuxedAccount instead");if(!i.StrKey.isValidEd25519PublicKey(t))throw new Error("accountId is invalid");if("string"!=typeof r)throw new Error("sequence must be of type string");this._accountId=t,this.sequence=new o.default(r)}),[{key:"accountId",value:function(){return this._accountId}},{key:"sequenceNumber",value:function(){return this.sequence.toString()}},{key:"incrementSequenceNumber",value:function(){this.sequence=this.sequence.plus(1)}}])},1180:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Address=void 0;var n,o=r(7120),i=(n=r(1918))&&n.__esModule?n:{default:n};function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function l(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}t.Address=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o.StrKey.isValidEd25519PublicKey(t))this._type="account",this._key=o.StrKey.decodeEd25519PublicKey(t);else{if(!o.StrKey.isValidContract(t))throw new Error("Unsupported address type: ".concat(t));this._type="contract",this._key=o.StrKey.decodeContract(t)}}return function(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,[{key:"toString",value:function(){switch(this._type){case"account":return o.StrKey.encodeEd25519PublicKey(this._key);case"contract":return o.StrKey.encodeContract(this._key);default:throw new Error("Unsupported address type")}}},{key:"toScVal",value:function(){return i.default.ScVal.scvAddress(this.toScAddress())}},{key:"toScAddress",value:function(){switch(this._type){case"account":return i.default.ScAddress.scAddressTypeAccount(i.default.PublicKey.publicKeyTypeEd25519(this._key));case"contract":return i.default.ScAddress.scAddressTypeContract(this._key);default:throw new Error("Unsupported address type")}}},{key:"toBuffer",value:function(){return this._key}}],[{key:"fromString",value:function(t){return new e(t)}},{key:"account",value:function(t){return new e(o.StrKey.encodeEd25519PublicKey(t))}},{key:"contract",value:function(t){return new e(o.StrKey.encodeContract(t))}},{key:"fromScVal",value:function(t){return e.fromScAddress(t.address())}},{key:"fromScAddress",value:function(t){switch(t.switch()){case i.default.ScAddressType.scAddressTypeAccount():return e.account(t.accountId().ed25519());case i.default.ScAddressType.scAddressTypeContract():return e.contract(t.contractId());default:throw new Error("Unsupported address type")}}}])}()},1764:(e,t,r)=>{"use strict";var n=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Asset=void 0;var o,i=r(645),a=(o=r(1918))&&o.__esModule?o:{default:o},s=r(6691),l=r(7120),c=r(9152);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function h(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}function p(e,t){return n.compare(n.from(e,"ascii"),n.from(t,"ascii"))}t.Asset=function(){function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!/^[a-zA-Z0-9]{1,12}$/.test(t))throw new Error("Asset code is invalid (maximum alphanumeric, 12 characters at max)");if("xlm"!==String(t).toLowerCase()&&!r)throw new Error("Issuer cannot be null");if(r&&!l.StrKey.isValidEd25519PublicKey(r))throw new Error("Issuer is invalid");"xlm"===String(t).toLowerCase()?this.code="XLM":this.code=t,this.issuer=r}return function(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,[{key:"toXDRObject",value:function(){return this._toXDRObject(a.default.Asset)}},{key:"toChangeTrustXDRObject",value:function(){return this._toXDRObject(a.default.ChangeTrustAsset)}},{key:"toTrustLineXDRObject",value:function(){return this._toXDRObject(a.default.TrustLineAsset)}},{key:"contractId",value:function(e){var t=(0,c.hash)(n.from(e)),r=a.default.HashIdPreimage.envelopeTypeContractId(new a.default.HashIdPreimageContractId({networkId:t,contractIdPreimage:a.default.ContractIdPreimage.contractIdPreimageFromAsset(this.toXDRObject())}));return l.StrKey.encodeContract((0,c.hash)(r.toXDR()))}},{key:"_toXDRObject",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.default.Asset;if(this.isNative())return r.assetTypeNative();this.code.length<=4?(e=a.default.AlphaNum4,t="assetTypeCreditAlphanum4"):(e=a.default.AlphaNum12,t="assetTypeCreditAlphanum12");var n=this.code.length<=4?4:12;return new r(t,new e({assetCode:this.code.padEnd(n,"\0"),issuer:s.Keypair.fromPublicKey(this.issuer).xdrAccountId()}))}},{key:"getCode",value:function(){if(void 0!==this.code)return String(this.code)}},{key:"getIssuer",value:function(){if(void 0!==this.issuer)return String(this.issuer)}},{key:"getAssetType",value:function(){switch(this.getRawAssetType().value){case a.default.AssetType.assetTypeNative().value:return"native";case a.default.AssetType.assetTypeCreditAlphanum4().value:return"credit_alphanum4";case a.default.AssetType.assetTypeCreditAlphanum12().value:return"credit_alphanum12";default:return"unknown"}}},{key:"getRawAssetType",value:function(){return this.isNative()?a.default.AssetType.assetTypeNative():this.code.length<=4?a.default.AssetType.assetTypeCreditAlphanum4():a.default.AssetType.assetTypeCreditAlphanum12()}},{key:"isNative",value:function(){return!this.issuer}},{key:"equals",value:function(e){return this.code===e.getCode()&&this.issuer===e.getIssuer()}},{key:"toString",value:function(){return this.isNative()?"native":"".concat(this.getCode(),":").concat(this.getIssuer())}}],[{key:"native",value:function(){return new e("XLM")}},{key:"fromOperation",value:function(e){var t,r;switch(e.switch()){case a.default.AssetType.assetTypeNative():return this.native();case a.default.AssetType.assetTypeCreditAlphanum4():t=e.alphaNum4();case a.default.AssetType.assetTypeCreditAlphanum12():return t=t||e.alphaNum12(),r=l.StrKey.encodeEd25519PublicKey(t.issuer().ed25519()),new this((0,i.trimEnd)(t.assetCode(),"\0"),r);default:throw new Error("Invalid asset type: ".concat(e.switch().name))}}},{key:"compare",value:function(t,r){if(!(t&&t instanceof e))throw new Error("assetA is invalid");if(!(r&&r instanceof e))throw new Error("assetB is invalid");if(t.equals(r))return 0;var n=t.getRawAssetType().value,o=r.getRawAssetType().value;if(n!==o)return n<o?-1:1;var i=p(t.getCode(),r.getCode());return 0!==i?i:p(t.getIssuer(),r.getIssuer())}}])}()},5328:(e,t,r)=>{"use strict";var n=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.authorizeEntry=m,t.authorizeInvocation=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l.Networks.FUTURENET,s=a.Keypair.random().rawPublicKey(),c=new i.default.Int64(s.subarray(0,8).reduce((function(e,t){return e<<8|t}),0)),d=n||e.publicKey();if(!d)throw new Error("authorizeInvocation requires publicKey parameter");return m(new i.default.SorobanAuthorizationEntry({rootInvocation:r,credentials:i.default.SorobanCredentials.sorobanCredentialsAddress(new i.default.SorobanAddressCredentials({address:new u.Address(d).toScAddress(),nonce:c,signatureExpirationLedger:0,signature:i.default.ScVal.scvVec([])}))}),e,t,o)};var o,i=(o=r(1918))&&o.__esModule?o:{default:o},a=r(6691),s=r(7120),l=r(6202),c=r(9152),u=r(1180),d=r(7177);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(){p=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),s=new O(n||[]);return o(a,"_invoke",{value:A(e,r,s)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",m="suspendedYield",g="executing",y="completed",v={};function b(){}function x(){}function _(){}var w={};c(w,a,(function(){return this}));var S=Object.getPrototypeOf,k=S&&S(S(M([])));k&&k!==r&&n.call(k,a)&&(w=k);var T=_.prototype=b.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,i,a,s){var l=d(e[o],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==h(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=f;return function(i,a){if(o===g)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=j(s,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=g;var c=d(t,r,n);if("normal"===c.type){if(o=n.done?y:m,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=d(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function M(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(h(t)+" is not iterable")}return x.prototype=_,o(T,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:x,configurable:!0}),x.displayName=c(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,l,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},E(C.prototype),c(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new C(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(T),c(T,l,"Generator"),c(T,a,(function(){return this})),c(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=M,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:M(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function f(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function m(e,t,r){return g.apply(this,arguments)}function g(){var e;return e=p().mark((function e(t,r,o){var h,f,m,g,y,v,b,x,_,w=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h=w.length>3&&void 0!==w[3]?w[3]:l.Networks.FUTURENET,t.credentials().switch().value===i.default.SorobanCredentialsType.sorobanCredentialsAddress().value){e.next=3;break}return e.abrupt("return",t);case 3:if(f=i.default.SorobanAuthorizationEntry.fromXDR(t.toXDR()),(m=f.credentials().address()).signatureExpirationLedger(o),g=(0,c.hash)(n.from(h)),y=i.default.HashIdPreimage.envelopeTypeSorobanAuthorization(new i.default.HashIdPreimageSorobanAuthorization({networkId:g,nonce:m.nonce(),invocation:f.rootInvocation(),signatureExpirationLedger:m.signatureExpirationLedger()})),v=(0,c.hash)(y.toXDR()),"function"!=typeof r){e.next=18;break}return e.t0=n,e.next=13,r(y);case 13:e.t1=e.sent,b=e.t0.from.call(e.t0,e.t1),x=u.Address.fromScAddress(m.address()).toString(),e.next=20;break;case 18:b=n.from(r.sign(v)),x=r.publicKey();case 20:if(a.Keypair.fromPublicKey(x).verify(v,b)){e.next=22;break}throw new Error("signature doesn't match payload");case 22:return _=(0,d.nativeToScVal)({public_key:s.StrKey.decodeEd25519PublicKey(x),signature:b},{type:{public_key:["symbol",null],signature:["symbol",null]}}),m.signature(i.default.ScVal.scvVec([_])),e.abrupt("return",f);case 25:case"end":return e.stop()}}),e)})),g=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){f(i,n,o,a,s,"next",e)}function s(e){f(i,n,o,a,s,"throw",e)}a(void 0)}))},g.apply(this,arguments)}},1387:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Claimant=void 0;var n,o=(n=r(1918))&&n.__esModule?n:{default:n},i=r(6691),a=r(7120);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function c(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}t.Claimant=function(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&!a.StrKey.isValidEd25519PublicKey(t))throw new Error("Destination is invalid");if(this._destination=t,r){if(!(r instanceof o.default.ClaimPredicate))throw new Error("Predicate should be an xdr.ClaimPredicate");this._predicate=r}else this._predicate=o.default.ClaimPredicate.claimPredicateUnconditional()}),[{key:"toXDRObject",value:function(){var e=new o.default.ClaimantV0({destination:i.Keypair.fromPublicKey(this._destination).xdrAccountId(),predicate:this._predicate});return o.default.Claimant.claimantTypeV0(e)}},{key:"destination",get:function(){return this._destination},set:function(e){throw new Error("Claimant is immutable")}},{key:"predicate",get:function(){return this._predicate},set:function(e){throw new Error("Claimant is immutable")}}],[{key:"predicateUnconditional",value:function(){return o.default.ClaimPredicate.claimPredicateUnconditional()}},{key:"predicateAnd",value:function(e,t){if(!(e instanceof o.default.ClaimPredicate))throw new Error("left Predicate should be an xdr.ClaimPredicate");if(!(t instanceof o.default.ClaimPredicate))throw new Error("right Predicate should be an xdr.ClaimPredicate");return o.default.ClaimPredicate.claimPredicateAnd([e,t])}},{key:"predicateOr",value:function(e,t){if(!(e instanceof o.default.ClaimPredicate))throw new Error("left Predicate should be an xdr.ClaimPredicate");if(!(t instanceof o.default.ClaimPredicate))throw new Error("right Predicate should be an xdr.ClaimPredicate");return o.default.ClaimPredicate.claimPredicateOr([e,t])}},{key:"predicateNot",value:function(e){if(!(e instanceof o.default.ClaimPredicate))throw new Error("right Predicate should be an xdr.ClaimPredicate");return o.default.ClaimPredicate.claimPredicateNot(e)}},{key:"predicateBeforeAbsoluteTime",value:function(e){return o.default.ClaimPredicate.claimPredicateBeforeAbsoluteTime(o.default.Int64.fromString(e))}},{key:"predicateBeforeRelativeTime",value:function(e){return o.default.ClaimPredicate.claimPredicateBeforeRelativeTime(o.default.Int64.fromString(e))}},{key:"fromXDR",value:function(e){var t;if(e.switch()===o.default.ClaimantType.claimantTypeV0())return t=e.v0(),new this(a.StrKey.encodeEd25519PublicKey(t.destination().ed25519()),t.predicate());throw new Error("Invalid claimant type: ".concat(e.switch().name))}}])},7452:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Contract=void 0;var n,o=r(1180),i=r(7237),a=(n=r(1918))&&n.__esModule?n:{default:n},s=r(7120);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}t.Contract=function(e,t){return t&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);try{this._id=s.StrKey.decodeContract(t)}catch(e){throw new Error("Invalid contract ID: ".concat(t))}}),[{key:"contractId",value:function(){return s.StrKey.encodeContract(this._id)}},{key:"toString",value:function(){return this.contractId()}},{key:"address",value:function(){return o.Address.contract(this._id)}},{key:"call",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return i.Operation.invokeContractFunction({contract:this.address().toString(),function:e,args:r})}},{key:"getFootprint",value:function(){return a.default.LedgerKey.contractData(new a.default.LedgerKeyContractData({contract:this.address().toScAddress(),key:a.default.ScVal.scvLedgerKeyContractInstance(),durability:a.default.ContractDataDurability.persistent()}))}}])},3919:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.humanizeEvents=function(e){return e.map((function(e){return e.inSuccessfulContractCall?c(e.event()):c(e)}))};var n=r(7120),o=r(7177);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return(t=function(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){return s(s({},"function"==typeof e.contractId&&null!=e.contractId()&&{contractId:n.StrKey.encodeContract(e.contractId())}),{},{type:e.type().name,topics:e.body().value().topics().map((function(e){return(0,o.scValToNative)(e)})),data:(0,o.scValToNative)(e.body().value().data())})}},9260:(e,t,r)=>{"use strict";var n=r(8287).Buffer;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.FeeBumpTransaction=void 0;var i,a=(i=r(1918))&&i.__esModule?i:{default:i},s=r(9152),l=r(380),c=r(3758),u=r(6160);function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function h(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}function p(e,t,r){return t=m(t),function(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,f()?Reflect.construct(t,r||[],m(e).constructor):t.apply(e,r))}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}t.FeeBumpTransaction=function(e){function t(e,r){var o;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof e){var i=n.from(e,"base64");e=a.default.TransactionEnvelope.fromXDR(i)}var s=e.switch();if(s!==a.default.EnvelopeType.envelopeTypeTxFeeBump())throw new Error("Invalid TransactionEnvelope: expected an envelopeTypeTxFeeBump but received an ".concat(s.name,"."));var c=e.value(),d=c.tx(),h=d.fee().toString();o=p(this,t,[d,(c.signatures()||[]).slice(),h,r]);var f=a.default.TransactionEnvelope.envelopeTypeTx(d.innerTx().v1());return o._feeSource=(0,u.encodeMuxedAccountToAddress)(o.tx.feeSource()),o._innerTransaction=new l.Transaction(f,r),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),function(e,t){return t&&d(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"innerTransaction",get:function(){return this._innerTransaction}},{key:"operations",get:function(){return this._innerTransaction.operations}},{key:"feeSource",get:function(){return this._feeSource}},{key:"signatureBase",value:function(){var e=new a.default.TransactionSignaturePayloadTaggedTransaction.envelopeTypeTxFeeBump(this.tx);return new a.default.TransactionSignaturePayload({networkId:a.default.Hash.fromXDR((0,s.hash)(this.networkPassphrase)),taggedTransaction:e}).toXDR()}},{key:"toEnvelope",value:function(){var e=new a.default.FeeBumpTransactionEnvelope({tx:a.default.FeeBumpTransaction.fromXDR(this.tx.toXDR()),signatures:this.signatures.slice()});return new a.default.TransactionEnvelope.envelopeTypeTxFeeBump(e)}}])}(c.TransactionBase)},7938:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var i={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var l=a?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(i,s,l):i[s]=e[s]}return i.default=e,r&&r.set(e,i),i}(r(3740)).config((function(e){var t=1024;e.typedef("Value",e.varOpaque()),e.struct("ScpBallot",[["counter",e.lookup("Uint32")],["value",e.lookup("Value")]]),e.enum("ScpStatementType",{scpStPrepare:0,scpStConfirm:1,scpStExternalize:2,scpStNominate:3}),e.struct("ScpNomination",[["quorumSetHash",e.lookup("Hash")],["votes",e.varArray(e.lookup("Value"),2147483647)],["accepted",e.varArray(e.lookup("Value"),2147483647)]]),e.struct("ScpStatementPrepare",[["quorumSetHash",e.lookup("Hash")],["ballot",e.lookup("ScpBallot")],["prepared",e.option(e.lookup("ScpBallot"))],["preparedPrime",e.option(e.lookup("ScpBallot"))],["nC",e.lookup("Uint32")],["nH",e.lookup("Uint32")]]),e.struct("ScpStatementConfirm",[["ballot",e.lookup("ScpBallot")],["nPrepared",e.lookup("Uint32")],["nCommit",e.lookup("Uint32")],["nH",e.lookup("Uint32")],["quorumSetHash",e.lookup("Hash")]]),e.struct("ScpStatementExternalize",[["commit",e.lookup("ScpBallot")],["nH",e.lookup("Uint32")],["commitQuorumSetHash",e.lookup("Hash")]]),e.union("ScpStatementPledges",{switchOn:e.lookup("ScpStatementType"),switchName:"type",switches:[["scpStPrepare","prepare"],["scpStConfirm","confirm"],["scpStExternalize","externalize"],["scpStNominate","nominate"]],arms:{prepare:e.lookup("ScpStatementPrepare"),confirm:e.lookup("ScpStatementConfirm"),externalize:e.lookup("ScpStatementExternalize"),nominate:e.lookup("ScpNomination")}}),e.struct("ScpStatement",[["nodeId",e.lookup("NodeId")],["slotIndex",e.lookup("Uint64")],["pledges",e.lookup("ScpStatementPledges")]]),e.struct("ScpEnvelope",[["statement",e.lookup("ScpStatement")],["signature",e.lookup("Signature")]]),e.struct("ScpQuorumSet",[["threshold",e.lookup("Uint32")],["validators",e.varArray(e.lookup("NodeId"),2147483647)],["innerSets",e.varArray(e.lookup("ScpQuorumSet"),2147483647)]]),e.typedef("Thresholds",e.opaque(4)),e.typedef("String32",e.string(32)),e.typedef("String64",e.string(64)),e.typedef("SequenceNumber",e.lookup("Int64")),e.typedef("DataValue",e.varOpaque(64)),e.typedef("PoolId",e.lookup("Hash")),e.typedef("AssetCode4",e.opaque(4)),e.typedef("AssetCode12",e.opaque(12)),e.enum("AssetType",{assetTypeNative:0,assetTypeCreditAlphanum4:1,assetTypeCreditAlphanum12:2,assetTypePoolShare:3}),e.union("AssetCode",{switchOn:e.lookup("AssetType"),switchName:"type",switches:[["assetTypeCreditAlphanum4","assetCode4"],["assetTypeCreditAlphanum12","assetCode12"]],arms:{assetCode4:e.lookup("AssetCode4"),assetCode12:e.lookup("AssetCode12")}}),e.struct("AlphaNum4",[["assetCode",e.lookup("AssetCode4")],["issuer",e.lookup("AccountId")]]),e.struct("AlphaNum12",[["assetCode",e.lookup("AssetCode12")],["issuer",e.lookup("AccountId")]]),e.union("Asset",{switchOn:e.lookup("AssetType"),switchName:"type",switches:[["assetTypeNative",e.void()],["assetTypeCreditAlphanum4","alphaNum4"],["assetTypeCreditAlphanum12","alphaNum12"]],arms:{alphaNum4:e.lookup("AlphaNum4"),alphaNum12:e.lookup("AlphaNum12")}}),e.struct("Price",[["n",e.lookup("Int32")],["d",e.lookup("Int32")]]),e.struct("Liabilities",[["buying",e.lookup("Int64")],["selling",e.lookup("Int64")]]),e.enum("ThresholdIndices",{thresholdMasterWeight:0,thresholdLow:1,thresholdMed:2,thresholdHigh:3}),e.enum("LedgerEntryType",{account:0,trustline:1,offer:2,data:3,claimableBalance:4,liquidityPool:5,contractData:6,contractCode:7,configSetting:8,ttl:9}),e.struct("Signer",[["key",e.lookup("SignerKey")],["weight",e.lookup("Uint32")]]),e.enum("AccountFlags",{authRequiredFlag:1,authRevocableFlag:2,authImmutableFlag:4,authClawbackEnabledFlag:8}),e.const("MASK_ACCOUNT_FLAGS",7),e.const("MASK_ACCOUNT_FLAGS_V17",15),e.const("MAX_SIGNERS",20),e.typedef("SponsorshipDescriptor",e.option(e.lookup("AccountId"))),e.struct("AccountEntryExtensionV3",[["ext",e.lookup("ExtensionPoint")],["seqLedger",e.lookup("Uint32")],["seqTime",e.lookup("TimePoint")]]),e.union("AccountEntryExtensionV2Ext",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()],[3,"v3"]],arms:{v3:e.lookup("AccountEntryExtensionV3")}}),e.struct("AccountEntryExtensionV2",[["numSponsored",e.lookup("Uint32")],["numSponsoring",e.lookup("Uint32")],["signerSponsoringIDs",e.varArray(e.lookup("SponsorshipDescriptor"),e.lookup("MAX_SIGNERS"))],["ext",e.lookup("AccountEntryExtensionV2Ext")]]),e.union("AccountEntryExtensionV1Ext",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()],[2,"v2"]],arms:{v2:e.lookup("AccountEntryExtensionV2")}}),e.struct("AccountEntryExtensionV1",[["liabilities",e.lookup("Liabilities")],["ext",e.lookup("AccountEntryExtensionV1Ext")]]),e.union("AccountEntryExt",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()],[1,"v1"]],arms:{v1:e.lookup("AccountEntryExtensionV1")}}),e.struct("AccountEntry",[["accountId",e.lookup("AccountId")],["balance",e.lookup("Int64")],["seqNum",e.lookup("SequenceNumber")],["numSubEntries",e.lookup("Uint32")],["inflationDest",e.option(e.lookup("AccountId"))],["flags",e.lookup("Uint32")],["homeDomain",e.lookup("String32")],["thresholds",e.lookup("Thresholds")],["signers",e.varArray(e.lookup("Signer"),e.lookup("MAX_SIGNERS"))],["ext",e.lookup("AccountEntryExt")]]),e.enum("TrustLineFlags",{authorizedFlag:1,authorizedToMaintainLiabilitiesFlag:2,trustlineClawbackEnabledFlag:4}),e.const("MASK_TRUSTLINE_FLAGS",1),e.const("MASK_TRUSTLINE_FLAGS_V13",3),e.const("MASK_TRUSTLINE_FLAGS_V17",7),e.enum("LiquidityPoolType",{liquidityPoolConstantProduct:0}),e.union("TrustLineAsset",{switchOn:e.lookup("AssetType"),switchName:"type",switches:[["assetTypeNative",e.void()],["assetTypeCreditAlphanum4","alphaNum4"],["assetTypeCreditAlphanum12","alphaNum12"],["assetTypePoolShare","liquidityPoolId"]],arms:{alphaNum4:e.lookup("AlphaNum4"),alphaNum12:e.lookup("AlphaNum12"),liquidityPoolId:e.lookup("PoolId")}}),e.union("TrustLineEntryExtensionV2Ext",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()]],arms:{}}),e.struct("TrustLineEntryExtensionV2",[["liquidityPoolUseCount",e.lookup("Int32")],["ext",e.lookup("TrustLineEntryExtensionV2Ext")]]),e.union("TrustLineEntryV1Ext",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()],[2,"v2"]],arms:{v2:e.lookup("TrustLineEntryExtensionV2")}}),e.struct("TrustLineEntryV1",[["liabilities",e.lookup("Liabilities")],["ext",e.lookup("TrustLineEntryV1Ext")]]),e.union("TrustLineEntryExt",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()],[1,"v1"]],arms:{v1:e.lookup("TrustLineEntryV1")}}),e.struct("TrustLineEntry",[["accountId",e.lookup("AccountId")],["asset",e.lookup("TrustLineAsset")],["balance",e.lookup("Int64")],["limit",e.lookup("Int64")],["flags",e.lookup("Uint32")],["ext",e.lookup("TrustLineEntryExt")]]),e.enum("OfferEntryFlags",{passiveFlag:1}),e.const("MASK_OFFERENTRY_FLAGS",1),e.union("OfferEntryExt",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()]],arms:{}}),e.struct("OfferEntry",[["sellerId",e.lookup("AccountId")],["offerId",e.lookup("Int64")],["selling",e.lookup("Asset")],["buying",e.lookup("Asset")],["amount",e.lookup("Int64")],["price",e.lookup("Price")],["flags",e.lookup("Uint32")],["ext",e.lookup("OfferEntryExt")]]),e.union("DataEntryExt",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()]],arms:{}}),e.struct("DataEntry",[["accountId",e.lookup("AccountId")],["dataName",e.lookup("String64")],["dataValue",e.lookup("DataValue")],["ext",e.lookup("DataEntryExt")]]),e.enum("ClaimPredicateType",{claimPredicateUnconditional:0,claimPredicateAnd:1,claimPredicateOr:2,claimPredicateNot:3,claimPredicateBeforeAbsoluteTime:4,claimPredicateBeforeRelativeTime:5}),e.union("ClaimPredicate",{switchOn:e.lookup("ClaimPredicateType"),switchName:"type",switches:[["claimPredicateUnconditional",e.void()],["claimPredicateAnd","andPredicates"],["claimPredicateOr","orPredicates"],["claimPredicateNot","notPredicate"],["claimPredicateBeforeAbsoluteTime","absBefore"],["claimPredicateBeforeRelativeTime","relBefore"]],arms:{andPredicates:e.varArray(e.lookup("ClaimPredicate"),2),orPredicates:e.varArray(e.lookup("ClaimPredicate"),2),notPredicate:e.option(e.lookup("ClaimPredicate")),absBefore:e.lookup("Int64"),relBefore:e.lookup("Int64")}}),e.enum("ClaimantType",{claimantTypeV0:0}),e.struct("ClaimantV0",[["destination",e.lookup("AccountId")],["predicate",e.lookup("ClaimPredicate")]]),e.union("Claimant",{switchOn:e.lookup("ClaimantType"),switchName:"type",switches:[["claimantTypeV0","v0"]],arms:{v0:e.lookup("ClaimantV0")}}),e.enum("ClaimableBalanceIdType",{claimableBalanceIdTypeV0:0}),e.union("ClaimableBalanceId",{switchOn:e.lookup("ClaimableBalanceIdType"),switchName:"type",switches:[["claimableBalanceIdTypeV0","v0"]],arms:{v0:e.lookup("Hash")}}),e.enum("ClaimableBalanceFlags",{claimableBalanceClawbackEnabledFlag:1}),e.const("MASK_CLAIMABLE_BALANCE_FLAGS",1),e.union("ClaimableBalanceEntryExtensionV1Ext",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()]],arms:{}}),e.struct("ClaimableBalanceEntryExtensionV1",[["ext",e.lookup("ClaimableBalanceEntryExtensionV1Ext")],["flags",e.lookup("Uint32")]]),e.union("ClaimableBalanceEntryExt",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()],[1,"v1"]],arms:{v1:e.lookup("ClaimableBalanceEntryExtensionV1")}}),e.struct("ClaimableBalanceEntry",[["balanceId",e.lookup("ClaimableBalanceId")],["claimants",e.varArray(e.lookup("Claimant"),10)],["asset",e.lookup("Asset")],["amount",e.lookup("Int64")],["ext",e.lookup("ClaimableBalanceEntryExt")]]),e.struct("LiquidityPoolConstantProductParameters",[["assetA",e.lookup("Asset")],["assetB",e.lookup("Asset")],["fee",e.lookup("Int32")]]),e.struct("LiquidityPoolEntryConstantProduct",[["params",e.lookup("LiquidityPoolConstantProductParameters")],["reserveA",e.lookup("Int64")],["reserveB",e.lookup("Int64")],["totalPoolShares",e.lookup("Int64")],["poolSharesTrustLineCount",e.lookup("Int64")]]),e.union("LiquidityPoolEntryBody",{switchOn:e.lookup("LiquidityPoolType"),switchName:"type",switches:[["liquidityPoolConstantProduct","constantProduct"]],arms:{constantProduct:e.lookup("LiquidityPoolEntryConstantProduct")}}),e.struct("LiquidityPoolEntry",[["liquidityPoolId",e.lookup("PoolId")],["body",e.lookup("LiquidityPoolEntryBody")]]),e.enum("ContractDataDurability",{temporary:0,persistent:1}),e.struct("ContractDataEntry",[["ext",e.lookup("ExtensionPoint")],["contract",e.lookup("ScAddress")],["key",e.lookup("ScVal")],["durability",e.lookup("ContractDataDurability")],["val",e.lookup("ScVal")]]),e.struct("ContractCodeCostInputs",[["ext",e.lookup("ExtensionPoint")],["nInstructions",e.lookup("Uint32")],["nFunctions",e.lookup("Uint32")],["nGlobals",e.lookup("Uint32")],["nTableEntries",e.lookup("Uint32")],["nTypes",e.lookup("Uint32")],["nDataSegments",e.lookup("Uint32")],["nElemSegments",e.lookup("Uint32")],["nImports",e.lookup("Uint32")],["nExports",e.lookup("Uint32")],["nDataSegmentBytes",e.lookup("Uint32")]]),e.struct("ContractCodeEntryV1",[["ext",e.lookup("ExtensionPoint")],["costInputs",e.lookup("ContractCodeCostInputs")]]),e.union("ContractCodeEntryExt",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()],[1,"v1"]],arms:{v1:e.lookup("ContractCodeEntryV1")}}),e.struct("ContractCodeEntry",[["ext",e.lookup("ContractCodeEntryExt")],["hash",e.lookup("Hash")],["code",e.varOpaque()]]),e.struct("TtlEntry",[["keyHash",e.lookup("Hash")],["liveUntilLedgerSeq",e.lookup("Uint32")]]),e.union("LedgerEntryExtensionV1Ext",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()]],arms:{}}),e.struct("LedgerEntryExtensionV1",[["sponsoringId",e.lookup("SponsorshipDescriptor")],["ext",e.lookup("LedgerEntryExtensionV1Ext")]]),e.union("LedgerEntryData",{switchOn:e.lookup("LedgerEntryType"),switchName:"type",switches:[["account","account"],["trustline","trustLine"],["offer","offer"],["data","data"],["claimableBalance","claimableBalance"],["liquidityPool","liquidityPool"],["contractData","contractData"],["contractCode","contractCode"],["configSetting","configSetting"],["ttl","ttl"]],arms:{account:e.lookup("AccountEntry"),trustLine:e.lookup("TrustLineEntry"),offer:e.lookup("OfferEntry"),data:e.lookup("DataEntry"),claimableBalance:e.lookup("ClaimableBalanceEntry"),liquidityPool:e.lookup("LiquidityPoolEntry"),contractData:e.lookup("ContractDataEntry"),contractCode:e.lookup("ContractCodeEntry"),configSetting:e.lookup("ConfigSettingEntry"),ttl:e.lookup("TtlEntry")}}),e.union("LedgerEntryExt",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()],[1,"v1"]],arms:{v1:e.lookup("LedgerEntryExtensionV1")}}),e.struct("LedgerEntry",[["lastModifiedLedgerSeq",e.lookup("Uint32")],["data",e.lookup("LedgerEntryData")],["ext",e.lookup("LedgerEntryExt")]]),e.struct("LedgerKeyAccount",[["accountId",e.lookup("AccountId")]]),e.struct("LedgerKeyTrustLine",[["accountId",e.lookup("AccountId")],["asset",e.lookup("TrustLineAsset")]]),e.struct("LedgerKeyOffer",[["sellerId",e.lookup("AccountId")],["offerId",e.lookup("Int64")]]),e.struct("LedgerKeyData",[["accountId",e.lookup("AccountId")],["dataName",e.lookup("String64")]]),e.struct("LedgerKeyClaimableBalance",[["balanceId",e.lookup("ClaimableBalanceId")]]),e.struct("LedgerKeyLiquidityPool",[["liquidityPoolId",e.lookup("PoolId")]]),e.struct("LedgerKeyContractData",[["contract",e.lookup("ScAddress")],["key",e.lookup("ScVal")],["durability",e.lookup("ContractDataDurability")]]),e.struct("LedgerKeyContractCode",[["hash",e.lookup("Hash")]]),e.struct("LedgerKeyConfigSetting",[["configSettingId",e.lookup("ConfigSettingId")]]),e.struct("LedgerKeyTtl",[["keyHash",e.lookup("Hash")]]),e.union("LedgerKey",{switchOn:e.lookup("LedgerEntryType"),switchName:"type",switches:[["account","account"],["trustline","trustLine"],["offer","offer"],["data","data"],["claimableBalance","claimableBalance"],["liquidityPool","liquidityPool"],["contractData","contractData"],["contractCode","contractCode"],["configSetting","configSetting"],["ttl","ttl"]],arms:{account:e.lookup("LedgerKeyAccount"),trustLine:e.lookup("LedgerKeyTrustLine"),offer:e.lookup("LedgerKeyOffer"),data:e.lookup("LedgerKeyData"),claimableBalance:e.lookup("LedgerKeyClaimableBalance"),liquidityPool:e.lookup("LedgerKeyLiquidityPool"),contractData:e.lookup("LedgerKeyContractData"),contractCode:e.lookup("LedgerKeyContractCode"),configSetting:e.lookup("LedgerKeyConfigSetting"),ttl:e.lookup("LedgerKeyTtl")}}),e.enum("EnvelopeType",{envelopeTypeTxV0:0,envelopeTypeScp:1,envelopeTypeTx:2,envelopeTypeAuth:3,envelopeTypeScpvalue:4,envelopeTypeTxFeeBump:5,envelopeTypeOpId:6,envelopeTypePoolRevokeOpId:7,envelopeTypeContractId:8,envelopeTypeSorobanAuthorization:9}),e.typedef("UpgradeType",e.varOpaque(128)),e.enum("StellarValueType",{stellarValueBasic:0,stellarValueSigned:1}),e.struct("LedgerCloseValueSignature",[["nodeId",e.lookup("NodeId")],["signature",e.lookup("Signature")]]),e.union("StellarValueExt",{switchOn:e.lookup("StellarValueType"),switchName:"v",switches:[["stellarValueBasic",e.void()],["stellarValueSigned","lcValueSignature"]],arms:{lcValueSignature:e.lookup("LedgerCloseValueSignature")}}),e.struct("StellarValue",[["txSetHash",e.lookup("Hash")],["closeTime",e.lookup("TimePoint")],["upgrades",e.varArray(e.lookup("UpgradeType"),6)],["ext",e.lookup("StellarValueExt")]]),e.const("MASK_LEDGER_HEADER_FLAGS",7),e.enum("LedgerHeaderFlags",{disableLiquidityPoolTradingFlag:1,disableLiquidityPoolDepositFlag:2,disableLiquidityPoolWithdrawalFlag:4}),e.union("LedgerHeaderExtensionV1Ext",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()]],arms:{}}),e.struct("LedgerHeaderExtensionV1",[["flags",e.lookup("Uint32")],["ext",e.lookup("LedgerHeaderExtensionV1Ext")]]),e.union("LedgerHeaderExt",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()],[1,"v1"]],arms:{v1:e.lookup("LedgerHeaderExtensionV1")}}),e.struct("LedgerHeader",[["ledgerVersion",e.lookup("Uint32")],["previousLedgerHash",e.lookup("Hash")],["scpValue",e.lookup("StellarValue")],["txSetResultHash",e.lookup("Hash")],["bucketListHash",e.lookup("Hash")],["ledgerSeq",e.lookup("Uint32")],["totalCoins",e.lookup("Int64")],["feePool",e.lookup("Int64")],["inflationSeq",e.lookup("Uint32")],["idPool",e.lookup("Uint64")],["baseFee",e.lookup("Uint32")],["baseReserve",e.lookup("Uint32")],["maxTxSetSize",e.lookup("Uint32")],["skipList",e.array(e.lookup("Hash"),4)],["ext",e.lookup("LedgerHeaderExt")]]),e.enum("LedgerUpgradeType",{ledgerUpgradeVersion:1,ledgerUpgradeBaseFee:2,ledgerUpgradeMaxTxSetSize:3,ledgerUpgradeBaseReserve:4,ledgerUpgradeFlags:5,ledgerUpgradeConfig:6,ledgerUpgradeMaxSorobanTxSetSize:7}),e.struct("ConfigUpgradeSetKey",[["contractId",e.lookup("Hash")],["contentHash",e.lookup("Hash")]]),e.union("LedgerUpgrade",{switchOn:e.lookup("LedgerUpgradeType"),switchName:"type",switches:[["ledgerUpgradeVersion","newLedgerVersion"],["ledgerUpgradeBaseFee","newBaseFee"],["ledgerUpgradeMaxTxSetSize","newMaxTxSetSize"],["ledgerUpgradeBaseReserve","newBaseReserve"],["ledgerUpgradeFlags","newFlags"],["ledgerUpgradeConfig","newConfig"],["ledgerUpgradeMaxSorobanTxSetSize","newMaxSorobanTxSetSize"]],arms:{newLedgerVersion:e.lookup("Uint32"),newBaseFee:e.lookup("Uint32"),newMaxTxSetSize:e.lookup("Uint32"),newBaseReserve:e.lookup("Uint32"),newFlags:e.lookup("Uint32"),newConfig:e.lookup("ConfigUpgradeSetKey"),newMaxSorobanTxSetSize:e.lookup("Uint32")}}),e.struct("ConfigUpgradeSet",[["updatedEntry",e.varArray(e.lookup("ConfigSettingEntry"),2147483647)]]),e.enum("BucketEntryType",{metaentry:-1,liveentry:0,deadentry:1,initentry:2}),e.union("BucketMetadataExt",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()]],arms:{}}),e.struct("BucketMetadata",[["ledgerVersion",e.lookup("Uint32")],["ext",e.lookup("BucketMetadataExt")]]),e.union("BucketEntry",{switchOn:e.lookup("BucketEntryType"),switchName:"type",switches:[["liveentry","liveEntry"],["initentry","liveEntry"],["deadentry","deadEntry"],["metaentry","metaEntry"]],arms:{liveEntry:e.lookup("LedgerEntry"),deadEntry:e.lookup("LedgerKey"),metaEntry:e.lookup("BucketMetadata")}}),e.enum("TxSetComponentType",{txsetCompTxsMaybeDiscountedFee:0}),e.struct("TxSetComponentTxsMaybeDiscountedFee",[["baseFee",e.option(e.lookup("Int64"))],["txes",e.varArray(e.lookup("TransactionEnvelope"),2147483647)]]),e.union("TxSetComponent",{switchOn:e.lookup("TxSetComponentType"),switchName:"type",switches:[["txsetCompTxsMaybeDiscountedFee","txsMaybeDiscountedFee"]],arms:{txsMaybeDiscountedFee:e.lookup("TxSetComponentTxsMaybeDiscountedFee")}}),e.union("TransactionPhase",{switchOn:e.int(),switchName:"v",switches:[[0,"v0Components"]],arms:{v0Components:e.varArray(e.lookup("TxSetComponent"),2147483647)}}),e.struct("TransactionSet",[["previousLedgerHash",e.lookup("Hash")],["txes",e.varArray(e.lookup("TransactionEnvelope"),2147483647)]]),e.struct("TransactionSetV1",[["previousLedgerHash",e.lookup("Hash")],["phases",e.varArray(e.lookup("TransactionPhase"),2147483647)]]),e.union("GeneralizedTransactionSet",{switchOn:e.int(),switchName:"v",switches:[[1,"v1TxSet"]],arms:{v1TxSet:e.lookup("TransactionSetV1")}}),e.struct("TransactionResultPair",[["transactionHash",e.lookup("Hash")],["result",e.lookup("TransactionResult")]]),e.struct("TransactionResultSet",[["results",e.varArray(e.lookup("TransactionResultPair"),2147483647)]]),e.union("TransactionHistoryEntryExt",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()],[1,"generalizedTxSet"]],arms:{generalizedTxSet:e.lookup("GeneralizedTransactionSet")}}),e.struct("TransactionHistoryEntry",[["ledgerSeq",e.lookup("Uint32")],["txSet",e.lookup("TransactionSet")],["ext",e.lookup("TransactionHistoryEntryExt")]]),e.union("TransactionHistoryResultEntryExt",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()]],arms:{}}),e.struct("TransactionHistoryResultEntry",[["ledgerSeq",e.lookup("Uint32")],["txResultSet",e.lookup("TransactionResultSet")],["ext",e.lookup("TransactionHistoryResultEntryExt")]]),e.union("LedgerHeaderHistoryEntryExt",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()]],arms:{}}),e.struct("LedgerHeaderHistoryEntry",[["hash",e.lookup("Hash")],["header",e.lookup("LedgerHeader")],["ext",e.lookup("LedgerHeaderHistoryEntryExt")]]),e.struct("LedgerScpMessages",[["ledgerSeq",e.lookup("Uint32")],["messages",e.varArray(e.lookup("ScpEnvelope"),2147483647)]]),e.struct("ScpHistoryEntryV0",[["quorumSets",e.varArray(e.lookup("ScpQuorumSet"),2147483647)],["ledgerMessages",e.lookup("LedgerScpMessages")]]),e.union("ScpHistoryEntry",{switchOn:e.int(),switchName:"v",switches:[[0,"v0"]],arms:{v0:e.lookup("ScpHistoryEntryV0")}}),e.enum("LedgerEntryChangeType",{ledgerEntryCreated:0,ledgerEntryUpdated:1,ledgerEntryRemoved:2,ledgerEntryState:3}),e.union("LedgerEntryChange",{switchOn:e.lookup("LedgerEntryChangeType"),switchName:"type",switches:[["ledgerEntryCreated","created"],["ledgerEntryUpdated","updated"],["ledgerEntryRemoved","removed"],["ledgerEntryState","state"]],arms:{created:e.lookup("LedgerEntry"),updated:e.lookup("LedgerEntry"),removed:e.lookup("LedgerKey"),state:e.lookup("LedgerEntry")}}),e.typedef("LedgerEntryChanges",e.varArray(e.lookup("LedgerEntryChange"),2147483647)),e.struct("OperationMeta",[["changes",e.lookup("LedgerEntryChanges")]]),e.struct("TransactionMetaV1",[["txChanges",e.lookup("LedgerEntryChanges")],["operations",e.varArray(e.lookup("OperationMeta"),2147483647)]]),e.struct("TransactionMetaV2",[["txChangesBefore",e.lookup("LedgerEntryChanges")],["operations",e.varArray(e.lookup("OperationMeta"),2147483647)],["txChangesAfter",e.lookup("LedgerEntryChanges")]]),e.enum("ContractEventType",{system:0,contract:1,diagnostic:2}),e.struct("ContractEventV0",[["topics",e.varArray(e.lookup("ScVal"),2147483647)],["data",e.lookup("ScVal")]]),e.union("ContractEventBody",{switchOn:e.int(),switchName:"v",switches:[[0,"v0"]],arms:{v0:e.lookup("ContractEventV0")}}),e.struct("ContractEvent",[["ext",e.lookup("ExtensionPoint")],["contractId",e.option(e.lookup("Hash"))],["type",e.lookup("ContractEventType")],["body",e.lookup("ContractEventBody")]]),e.struct("DiagnosticEvent",[["inSuccessfulContractCall",e.bool()],["event",e.lookup("ContractEvent")]]),e.struct("SorobanTransactionMetaExtV1",[["ext",e.lookup("ExtensionPoint")],["totalNonRefundableResourceFeeCharged",e.lookup("Int64")],["totalRefundableResourceFeeCharged",e.lookup("Int64")],["rentFeeCharged",e.lookup("Int64")]]),e.union("SorobanTransactionMetaExt",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()],[1,"v1"]],arms:{v1:e.lookup("SorobanTransactionMetaExtV1")}}),e.struct("SorobanTransactionMeta",[["ext",e.lookup("SorobanTransactionMetaExt")],["events",e.varArray(e.lookup("ContractEvent"),2147483647)],["returnValue",e.lookup("ScVal")],["diagnosticEvents",e.varArray(e.lookup("DiagnosticEvent"),2147483647)]]),e.struct("TransactionMetaV3",[["ext",e.lookup("ExtensionPoint")],["txChangesBefore",e.lookup("LedgerEntryChanges")],["operations",e.varArray(e.lookup("OperationMeta"),2147483647)],["txChangesAfter",e.lookup("LedgerEntryChanges")],["sorobanMeta",e.option(e.lookup("SorobanTransactionMeta"))]]),e.struct("InvokeHostFunctionSuccessPreImage",[["returnValue",e.lookup("ScVal")],["events",e.varArray(e.lookup("ContractEvent"),2147483647)]]),e.union("TransactionMeta",{switchOn:e.int(),switchName:"v",switches:[[0,"operations"],[1,"v1"],[2,"v2"],[3,"v3"]],arms:{operations:e.varArray(e.lookup("OperationMeta"),2147483647),v1:e.lookup("TransactionMetaV1"),v2:e.lookup("TransactionMetaV2"),v3:e.lookup("TransactionMetaV3")}}),e.struct("TransactionResultMeta",[["result",e.lookup("TransactionResultPair")],["feeProcessing",e.lookup("LedgerEntryChanges")],["txApplyProcessing",e.lookup("TransactionMeta")]]),e.struct("UpgradeEntryMeta",[["upgrade",e.lookup("LedgerUpgrade")],["changes",e.lookup("LedgerEntryChanges")]]),e.struct("LedgerCloseMetaV0",[["ledgerHeader",e.lookup("LedgerHeaderHistoryEntry")],["txSet",e.lookup("TransactionSet")],["txProcessing",e.varArray(e.lookup("TransactionResultMeta"),2147483647)],["upgradesProcessing",e.varArray(e.lookup("UpgradeEntryMeta"),2147483647)],["scpInfo",e.varArray(e.lookup("ScpHistoryEntry"),2147483647)]]),e.struct("LedgerCloseMetaExtV1",[["ext",e.lookup("ExtensionPoint")],["sorobanFeeWrite1Kb",e.lookup("Int64")]]),e.union("LedgerCloseMetaExt",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()],[1,"v1"]],arms:{v1:e.lookup("LedgerCloseMetaExtV1")}}),e.struct("LedgerCloseMetaV1",[["ext",e.lookup("LedgerCloseMetaExt")],["ledgerHeader",e.lookup("LedgerHeaderHistoryEntry")],["txSet",e.lookup("GeneralizedTransactionSet")],["txProcessing",e.varArray(e.lookup("TransactionResultMeta"),2147483647)],["upgradesProcessing",e.varArray(e.lookup("UpgradeEntryMeta"),2147483647)],["scpInfo",e.varArray(e.lookup("ScpHistoryEntry"),2147483647)],["totalByteSizeOfBucketList",e.lookup("Uint64")],["evictedTemporaryLedgerKeys",e.varArray(e.lookup("LedgerKey"),2147483647)],["evictedPersistentLedgerEntries",e.varArray(e.lookup("LedgerEntry"),2147483647)]]),e.union("LedgerCloseMeta",{switchOn:e.int(),switchName:"v",switches:[[0,"v0"],[1,"v1"]],arms:{v0:e.lookup("LedgerCloseMetaV0"),v1:e.lookup("LedgerCloseMetaV1")}}),e.enum("ErrorCode",{errMisc:0,errData:1,errConf:2,errAuth:3,errLoad:4}),e.struct("Error",[["code",e.lookup("ErrorCode")],["msg",e.string(100)]]),e.struct("SendMore",[["numMessages",e.lookup("Uint32")]]),e.struct("SendMoreExtended",[["numMessages",e.lookup("Uint32")],["numBytes",e.lookup("Uint32")]]),e.struct("AuthCert",[["pubkey",e.lookup("Curve25519Public")],["expiration",e.lookup("Uint64")],["sig",e.lookup("Signature")]]),e.struct("Hello",[["ledgerVersion",e.lookup("Uint32")],["overlayVersion",e.lookup("Uint32")],["overlayMinVersion",e.lookup("Uint32")],["networkId",e.lookup("Hash")],["versionStr",e.string(100)],["listeningPort",e.int()],["peerId",e.lookup("NodeId")],["cert",e.lookup("AuthCert")],["nonce",e.lookup("Uint256")]]),e.const("AUTH_MSG_FLAG_FLOW_CONTROL_BYTES_REQUESTED",200),e.struct("Auth",[["flags",e.int()]]),e.enum("IpAddrType",{iPv4:0,iPv6:1}),e.union("PeerAddressIp",{switchOn:e.lookup("IpAddrType"),switchName:"type",switches:[["iPv4","ipv4"],["iPv6","ipv6"]],arms:{ipv4:e.opaque(4),ipv6:e.opaque(16)}}),e.struct("PeerAddress",[["ip",e.lookup("PeerAddressIp")],["port",e.lookup("Uint32")],["numFailures",e.lookup("Uint32")]]),e.enum("MessageType",{errorMsg:0,auth:2,dontHave:3,getPeers:4,peers:5,getTxSet:6,txSet:7,generalizedTxSet:17,transaction:8,getScpQuorumset:9,scpQuorumset:10,scpMessage:11,getScpState:12,hello:13,surveyRequest:14,surveyResponse:15,sendMore:16,sendMoreExtended:20,floodAdvert:18,floodDemand:19}),e.struct("DontHave",[["type",e.lookup("MessageType")],["reqHash",e.lookup("Uint256")]]),e.enum("SurveyMessageCommandType",{surveyTopology:0}),e.enum("SurveyMessageResponseType",{surveyTopologyResponseV0:0,surveyTopologyResponseV1:1}),e.struct("SurveyRequestMessage",[["surveyorPeerId",e.lookup("NodeId")],["surveyedPeerId",e.lookup("NodeId")],["ledgerNum",e.lookup("Uint32")],["encryptionKey",e.lookup("Curve25519Public")],["commandType",e.lookup("SurveyMessageCommandType")]]),e.struct("SignedSurveyRequestMessage",[["requestSignature",e.lookup("Signature")],["request",e.lookup("SurveyRequestMessage")]]),e.typedef("EncryptedBody",e.varOpaque(64e3)),e.struct("SurveyResponseMessage",[["surveyorPeerId",e.lookup("NodeId")],["surveyedPeerId",e.lookup("NodeId")],["ledgerNum",e.lookup("Uint32")],["commandType",e.lookup("SurveyMessageCommandType")],["encryptedBody",e.lookup("EncryptedBody")]]),e.struct("SignedSurveyResponseMessage",[["responseSignature",e.lookup("Signature")],["response",e.lookup("SurveyResponseMessage")]]),e.struct("PeerStats",[["id",e.lookup("NodeId")],["versionStr",e.string(100)],["messagesRead",e.lookup("Uint64")],["messagesWritten",e.lookup("Uint64")],["bytesRead",e.lookup("Uint64")],["bytesWritten",e.lookup("Uint64")],["secondsConnected",e.lookup("Uint64")],["uniqueFloodBytesRecv",e.lookup("Uint64")],["duplicateFloodBytesRecv",e.lookup("Uint64")],["uniqueFetchBytesRecv",e.lookup("Uint64")],["duplicateFetchBytesRecv",e.lookup("Uint64")],["uniqueFloodMessageRecv",e.lookup("Uint64")],["duplicateFloodMessageRecv",e.lookup("Uint64")],["uniqueFetchMessageRecv",e.lookup("Uint64")],["duplicateFetchMessageRecv",e.lookup("Uint64")]]),e.typedef("PeerStatList",e.varArray(e.lookup("PeerStats"),25)),e.struct("TopologyResponseBodyV0",[["inboundPeers",e.lookup("PeerStatList")],["outboundPeers",e.lookup("PeerStatList")],["totalInboundPeerCount",e.lookup("Uint32")],["totalOutboundPeerCount",e.lookup("Uint32")]]),e.struct("TopologyResponseBodyV1",[["inboundPeers",e.lookup("PeerStatList")],["outboundPeers",e.lookup("PeerStatList")],["totalInboundPeerCount",e.lookup("Uint32")],["totalOutboundPeerCount",e.lookup("Uint32")],["maxInboundPeerCount",e.lookup("Uint32")],["maxOutboundPeerCount",e.lookup("Uint32")]]),e.union("SurveyResponseBody",{switchOn:e.lookup("SurveyMessageResponseType"),switchName:"type",switches:[["surveyTopologyResponseV0","topologyResponseBodyV0"],["surveyTopologyResponseV1","topologyResponseBodyV1"]],arms:{topologyResponseBodyV0:e.lookup("TopologyResponseBodyV0"),topologyResponseBodyV1:e.lookup("TopologyResponseBodyV1")}}),e.const("TX_ADVERT_VECTOR_MAX_SIZE",1e3),e.typedef("TxAdvertVector",e.varArray(e.lookup("Hash"),e.lookup("TX_ADVERT_VECTOR_MAX_SIZE"))),e.struct("FloodAdvert",[["txHashes",e.lookup("TxAdvertVector")]]),e.const("TX_DEMAND_VECTOR_MAX_SIZE",1e3),e.typedef("TxDemandVector",e.varArray(e.lookup("Hash"),e.lookup("TX_DEMAND_VECTOR_MAX_SIZE"))),e.struct("FloodDemand",[["txHashes",e.lookup("TxDemandVector")]]),e.union("StellarMessage",{switchOn:e.lookup("MessageType"),switchName:"type",switches:[["errorMsg","error"],["hello","hello"],["auth","auth"],["dontHave","dontHave"],["getPeers",e.void()],["peers","peers"],["getTxSet","txSetHash"],["txSet","txSet"],["generalizedTxSet","generalizedTxSet"],["transaction","transaction"],["surveyRequest","signedSurveyRequestMessage"],["surveyResponse","signedSurveyResponseMessage"],["getScpQuorumset","qSetHash"],["scpQuorumset","qSet"],["scpMessage","envelope"],["getScpState","getScpLedgerSeq"],["sendMore","sendMoreMessage"],["sendMoreExtended","sendMoreExtendedMessage"],["floodAdvert","floodAdvert"],["floodDemand","floodDemand"]],arms:{error:e.lookup("Error"),hello:e.lookup("Hello"),auth:e.lookup("Auth"),dontHave:e.lookup("DontHave"),peers:e.varArray(e.lookup("PeerAddress"),100),txSetHash:e.lookup("Uint256"),txSet:e.lookup("TransactionSet"),generalizedTxSet:e.lookup("GeneralizedTransactionSet"),transaction:e.lookup("TransactionEnvelope"),signedSurveyRequestMessage:e.lookup("SignedSurveyRequestMessage"),signedSurveyResponseMessage:e.lookup("SignedSurveyResponseMessage"),qSetHash:e.lookup("Uint256"),qSet:e.lookup("ScpQuorumSet"),envelope:e.lookup("ScpEnvelope"),getScpLedgerSeq:e.lookup("Uint32"),sendMoreMessage:e.lookup("SendMore"),sendMoreExtendedMessage:e.lookup("SendMoreExtended"),floodAdvert:e.lookup("FloodAdvert"),floodDemand:e.lookup("FloodDemand")}}),e.struct("AuthenticatedMessageV0",[["sequence",e.lookup("Uint64")],["message",e.lookup("StellarMessage")],["mac",e.lookup("HmacSha256Mac")]]),e.union("AuthenticatedMessage",{switchOn:e.lookup("Uint32"),switchName:"v",switches:[[0,"v0"]],arms:{v0:e.lookup("AuthenticatedMessageV0")}}),e.const("MAX_OPS_PER_TX",100),e.union("LiquidityPoolParameters",{switchOn:e.lookup("LiquidityPoolType"),switchName:"type",switches:[["liquidityPoolConstantProduct","constantProduct"]],arms:{constantProduct:e.lookup("LiquidityPoolConstantProductParameters")}}),e.struct("MuxedAccountMed25519",[["id",e.lookup("Uint64")],["ed25519",e.lookup("Uint256")]]),e.union("MuxedAccount",{switchOn:e.lookup("CryptoKeyType"),switchName:"type",switches:[["keyTypeEd25519","ed25519"],["keyTypeMuxedEd25519","med25519"]],arms:{ed25519:e.lookup("Uint256"),med25519:e.lookup("MuxedAccountMed25519")}}),e.struct("DecoratedSignature",[["hint",e.lookup("SignatureHint")],["signature",e.lookup("Signature")]]),e.enum("OperationType",{createAccount:0,payment:1,pathPaymentStrictReceive:2,manageSellOffer:3,createPassiveSellOffer:4,setOptions:5,changeTrust:6,allowTrust:7,accountMerge:8,inflation:9,manageData:10,bumpSequence:11,manageBuyOffer:12,pathPaymentStrictSend:13,createClaimableBalance:14,claimClaimableBalance:15,beginSponsoringFutureReserves:16,endSponsoringFutureReserves:17,revokeSponsorship:18,clawback:19,clawbackClaimableBalance:20,setTrustLineFlags:21,liquidityPoolDeposit:22,liquidityPoolWithdraw:23,invokeHostFunction:24,extendFootprintTtl:25,restoreFootprint:26}),e.struct("CreateAccountOp",[["destination",e.lookup("AccountId")],["startingBalance",e.lookup("Int64")]]),e.struct("PaymentOp",[["destination",e.lookup("MuxedAccount")],["asset",e.lookup("Asset")],["amount",e.lookup("Int64")]]),e.struct("PathPaymentStrictReceiveOp",[["sendAsset",e.lookup("Asset")],["sendMax",e.lookup("Int64")],["destination",e.lookup("MuxedAccount")],["destAsset",e.lookup("Asset")],["destAmount",e.lookup("Int64")],["path",e.varArray(e.lookup("Asset"),5)]]),e.struct("PathPaymentStrictSendOp",[["sendAsset",e.lookup("Asset")],["sendAmount",e.lookup("Int64")],["destination",e.lookup("MuxedAccount")],["destAsset",e.lookup("Asset")],["destMin",e.lookup("Int64")],["path",e.varArray(e.lookup("Asset"),5)]]),e.struct("ManageSellOfferOp",[["selling",e.lookup("Asset")],["buying",e.lookup("Asset")],["amount",e.lookup("Int64")],["price",e.lookup("Price")],["offerId",e.lookup("Int64")]]),e.struct("ManageBuyOfferOp",[["selling",e.lookup("Asset")],["buying",e.lookup("Asset")],["buyAmount",e.lookup("Int64")],["price",e.lookup("Price")],["offerId",e.lookup("Int64")]]),e.struct("CreatePassiveSellOfferOp",[["selling",e.lookup("Asset")],["buying",e.lookup("Asset")],["amount",e.lookup("Int64")],["price",e.lookup("Price")]]),e.struct("SetOptionsOp",[["inflationDest",e.option(e.lookup("AccountId"))],["clearFlags",e.option(e.lookup("Uint32"))],["setFlags",e.option(e.lookup("Uint32"))],["masterWeight",e.option(e.lookup("Uint32"))],["lowThreshold",e.option(e.lookup("Uint32"))],["medThreshold",e.option(e.lookup("Uint32"))],["highThreshold",e.option(e.lookup("Uint32"))],["homeDomain",e.option(e.lookup("String32"))],["signer",e.option(e.lookup("Signer"))]]),e.union("ChangeTrustAsset",{switchOn:e.lookup("AssetType"),switchName:"type",switches:[["assetTypeNative",e.void()],["assetTypeCreditAlphanum4","alphaNum4"],["assetTypeCreditAlphanum12","alphaNum12"],["assetTypePoolShare","liquidityPool"]],arms:{alphaNum4:e.lookup("AlphaNum4"),alphaNum12:e.lookup("AlphaNum12"),liquidityPool:e.lookup("LiquidityPoolParameters")}}),e.struct("ChangeTrustOp",[["line",e.lookup("ChangeTrustAsset")],["limit",e.lookup("Int64")]]),e.struct("AllowTrustOp",[["trustor",e.lookup("AccountId")],["asset",e.lookup("AssetCode")],["authorize",e.lookup("Uint32")]]),e.struct("ManageDataOp",[["dataName",e.lookup("String64")],["dataValue",e.option(e.lookup("DataValue"))]]),e.struct("BumpSequenceOp",[["bumpTo",e.lookup("SequenceNumber")]]),e.struct("CreateClaimableBalanceOp",[["asset",e.lookup("Asset")],["amount",e.lookup("Int64")],["claimants",e.varArray(e.lookup("Claimant"),10)]]),e.struct("ClaimClaimableBalanceOp",[["balanceId",e.lookup("ClaimableBalanceId")]]),e.struct("BeginSponsoringFutureReservesOp",[["sponsoredId",e.lookup("AccountId")]]),e.enum("RevokeSponsorshipType",{revokeSponsorshipLedgerEntry:0,revokeSponsorshipSigner:1}),e.struct("RevokeSponsorshipOpSigner",[["accountId",e.lookup("AccountId")],["signerKey",e.lookup("SignerKey")]]),e.union("RevokeSponsorshipOp",{switchOn:e.lookup("RevokeSponsorshipType"),switchName:"type",switches:[["revokeSponsorshipLedgerEntry","ledgerKey"],["revokeSponsorshipSigner","signer"]],arms:{ledgerKey:e.lookup("LedgerKey"),signer:e.lookup("RevokeSponsorshipOpSigner")}}),e.struct("ClawbackOp",[["asset",e.lookup("Asset")],["from",e.lookup("MuxedAccount")],["amount",e.lookup("Int64")]]),e.struct("ClawbackClaimableBalanceOp",[["balanceId",e.lookup("ClaimableBalanceId")]]),e.struct("SetTrustLineFlagsOp",[["trustor",e.lookup("AccountId")],["asset",e.lookup("Asset")],["clearFlags",e.lookup("Uint32")],["setFlags",e.lookup("Uint32")]]),e.const("LIQUIDITY_POOL_FEE_V18",30),e.struct("LiquidityPoolDepositOp",[["liquidityPoolId",e.lookup("PoolId")],["maxAmountA",e.lookup("Int64")],["maxAmountB",e.lookup("Int64")],["minPrice",e.lookup("Price")],["maxPrice",e.lookup("Price")]]),e.struct("LiquidityPoolWithdrawOp",[["liquidityPoolId",e.lookup("PoolId")],["amount",e.lookup("Int64")],["minAmountA",e.lookup("Int64")],["minAmountB",e.lookup("Int64")]]),e.enum("HostFunctionType",{hostFunctionTypeInvokeContract:0,hostFunctionTypeCreateContract:1,hostFunctionTypeUploadContractWasm:2}),e.enum("ContractIdPreimageType",{contractIdPreimageFromAddress:0,contractIdPreimageFromAsset:1}),e.struct("ContractIdPreimageFromAddress",[["address",e.lookup("ScAddress")],["salt",e.lookup("Uint256")]]),e.union("ContractIdPreimage",{switchOn:e.lookup("ContractIdPreimageType"),switchName:"type",switches:[["contractIdPreimageFromAddress","fromAddress"],["contractIdPreimageFromAsset","fromAsset"]],arms:{fromAddress:e.lookup("ContractIdPreimageFromAddress"),fromAsset:e.lookup("Asset")}}),e.struct("CreateContractArgs",[["contractIdPreimage",e.lookup("ContractIdPreimage")],["executable",e.lookup("ContractExecutable")]]),e.struct("InvokeContractArgs",[["contractAddress",e.lookup("ScAddress")],["functionName",e.lookup("ScSymbol")],["args",e.varArray(e.lookup("ScVal"),2147483647)]]),e.union("HostFunction",{switchOn:e.lookup("HostFunctionType"),switchName:"type",switches:[["hostFunctionTypeInvokeContract","invokeContract"],["hostFunctionTypeCreateContract","createContract"],["hostFunctionTypeUploadContractWasm","wasm"]],arms:{invokeContract:e.lookup("InvokeContractArgs"),createContract:e.lookup("CreateContractArgs"),wasm:e.varOpaque()}}),e.enum("SorobanAuthorizedFunctionType",{sorobanAuthorizedFunctionTypeContractFn:0,sorobanAuthorizedFunctionTypeCreateContractHostFn:1}),e.union("SorobanAuthorizedFunction",{switchOn:e.lookup("SorobanAuthorizedFunctionType"),switchName:"type",switches:[["sorobanAuthorizedFunctionTypeContractFn","contractFn"],["sorobanAuthorizedFunctionTypeCreateContractHostFn","createContractHostFn"]],arms:{contractFn:e.lookup("InvokeContractArgs"),createContractHostFn:e.lookup("CreateContractArgs")}}),e.struct("SorobanAuthorizedInvocation",[["function",e.lookup("SorobanAuthorizedFunction")],["subInvocations",e.varArray(e.lookup("SorobanAuthorizedInvocation"),2147483647)]]),e.struct("SorobanAddressCredentials",[["address",e.lookup("ScAddress")],["nonce",e.lookup("Int64")],["signatureExpirationLedger",e.lookup("Uint32")],["signature",e.lookup("ScVal")]]),e.enum("SorobanCredentialsType",{sorobanCredentialsSourceAccount:0,sorobanCredentialsAddress:1}),e.union("SorobanCredentials",{switchOn:e.lookup("SorobanCredentialsType"),switchName:"type",switches:[["sorobanCredentialsSourceAccount",e.void()],["sorobanCredentialsAddress","address"]],arms:{address:e.lookup("SorobanAddressCredentials")}}),e.struct("SorobanAuthorizationEntry",[["credentials",e.lookup("SorobanCredentials")],["rootInvocation",e.lookup("SorobanAuthorizedInvocation")]]),e.struct("InvokeHostFunctionOp",[["hostFunction",e.lookup("HostFunction")],["auth",e.varArray(e.lookup("SorobanAuthorizationEntry"),2147483647)]]),e.struct("ExtendFootprintTtlOp",[["ext",e.lookup("ExtensionPoint")],["extendTo",e.lookup("Uint32")]]),e.struct("RestoreFootprintOp",[["ext",e.lookup("ExtensionPoint")]]),e.union("OperationBody",{switchOn:e.lookup("OperationType"),switchName:"type",switches:[["createAccount","createAccountOp"],["payment","paymentOp"],["pathPaymentStrictReceive","pathPaymentStrictReceiveOp"],["manageSellOffer","manageSellOfferOp"],["createPassiveSellOffer","createPassiveSellOfferOp"],["setOptions","setOptionsOp"],["changeTrust","changeTrustOp"],["allowTrust","allowTrustOp"],["accountMerge","destination"],["inflation",e.void()],["manageData","manageDataOp"],["bumpSequence","bumpSequenceOp"],["manageBuyOffer","manageBuyOfferOp"],["pathPaymentStrictSend","pathPaymentStrictSendOp"],["createClaimableBalance","createClaimableBalanceOp"],["claimClaimableBalance","claimClaimableBalanceOp"],["beginSponsoringFutureReserves","beginSponsoringFutureReservesOp"],["endSponsoringFutureReserves",e.void()],["revokeSponsorship","revokeSponsorshipOp"],["clawback","clawbackOp"],["clawbackClaimableBalance","clawbackClaimableBalanceOp"],["setTrustLineFlags","setTrustLineFlagsOp"],["liquidityPoolDeposit","liquidityPoolDepositOp"],["liquidityPoolWithdraw","liquidityPoolWithdrawOp"],["invokeHostFunction","invokeHostFunctionOp"],["extendFootprintTtl","extendFootprintTtlOp"],["restoreFootprint","restoreFootprintOp"]],arms:{createAccountOp:e.lookup("CreateAccountOp"),paymentOp:e.lookup("PaymentOp"),pathPaymentStrictReceiveOp:e.lookup("PathPaymentStrictReceiveOp"),manageSellOfferOp:e.lookup("ManageSellOfferOp"),createPassiveSellOfferOp:e.lookup("CreatePassiveSellOfferOp"),setOptionsOp:e.lookup("SetOptionsOp"),changeTrustOp:e.lookup("ChangeTrustOp"),allowTrustOp:e.lookup("AllowTrustOp"),destination:e.lookup("MuxedAccount"),manageDataOp:e.lookup("ManageDataOp"),bumpSequenceOp:e.lookup("BumpSequenceOp"),manageBuyOfferOp:e.lookup("ManageBuyOfferOp"),pathPaymentStrictSendOp:e.lookup("PathPaymentStrictSendOp"),createClaimableBalanceOp:e.lookup("CreateClaimableBalanceOp"),claimClaimableBalanceOp:e.lookup("ClaimClaimableBalanceOp"),beginSponsoringFutureReservesOp:e.lookup("BeginSponsoringFutureReservesOp"),revokeSponsorshipOp:e.lookup("RevokeSponsorshipOp"),clawbackOp:e.lookup("ClawbackOp"),clawbackClaimableBalanceOp:e.lookup("ClawbackClaimableBalanceOp"),setTrustLineFlagsOp:e.lookup("SetTrustLineFlagsOp"),liquidityPoolDepositOp:e.lookup("LiquidityPoolDepositOp"),liquidityPoolWithdrawOp:e.lookup("LiquidityPoolWithdrawOp"),invokeHostFunctionOp:e.lookup("InvokeHostFunctionOp"),extendFootprintTtlOp:e.lookup("ExtendFootprintTtlOp"),restoreFootprintOp:e.lookup("RestoreFootprintOp")}}),e.struct("Operation",[["sourceAccount",e.option(e.lookup("MuxedAccount"))],["body",e.lookup("OperationBody")]]),e.struct("HashIdPreimageOperationId",[["sourceAccount",e.lookup("AccountId")],["seqNum",e.lookup("SequenceNumber")],["opNum",e.lookup("Uint32")]]),e.struct("HashIdPreimageRevokeId",[["sourceAccount",e.lookup("AccountId")],["seqNum",e.lookup("SequenceNumber")],["opNum",e.lookup("Uint32")],["liquidityPoolId",e.lookup("PoolId")],["asset",e.lookup("Asset")]]),e.struct("HashIdPreimageContractId",[["networkId",e.lookup("Hash")],["contractIdPreimage",e.lookup("ContractIdPreimage")]]),e.struct("HashIdPreimageSorobanAuthorization",[["networkId",e.lookup("Hash")],["nonce",e.lookup("Int64")],["signatureExpirationLedger",e.lookup("Uint32")],["invocation",e.lookup("SorobanAuthorizedInvocation")]]),e.union("HashIdPreimage",{switchOn:e.lookup("EnvelopeType"),switchName:"type",switches:[["envelopeTypeOpId","operationId"],["envelopeTypePoolRevokeOpId","revokeId"],["envelopeTypeContractId","contractId"],["envelopeTypeSorobanAuthorization","sorobanAuthorization"]],arms:{operationId:e.lookup("HashIdPreimageOperationId"),revokeId:e.lookup("HashIdPreimageRevokeId"),contractId:e.lookup("HashIdPreimageContractId"),sorobanAuthorization:e.lookup("HashIdPreimageSorobanAuthorization")}}),e.enum("MemoType",{memoNone:0,memoText:1,memoId:2,memoHash:3,memoReturn:4}),e.union("Memo",{switchOn:e.lookup("MemoType"),switchName:"type",switches:[["memoNone",e.void()],["memoText","text"],["memoId","id"],["memoHash","hash"],["memoReturn","retHash"]],arms:{text:e.string(28),id:e.lookup("Uint64"),hash:e.lookup("Hash"),retHash:e.lookup("Hash")}}),e.struct("TimeBounds",[["minTime",e.lookup("TimePoint")],["maxTime",e.lookup("TimePoint")]]),e.struct("LedgerBounds",[["minLedger",e.lookup("Uint32")],["maxLedger",e.lookup("Uint32")]]),e.struct("PreconditionsV2",[["timeBounds",e.option(e.lookup("TimeBounds"))],["ledgerBounds",e.option(e.lookup("LedgerBounds"))],["minSeqNum",e.option(e.lookup("SequenceNumber"))],["minSeqAge",e.lookup("Duration")],["minSeqLedgerGap",e.lookup("Uint32")],["extraSigners",e.varArray(e.lookup("SignerKey"),2)]]),e.enum("PreconditionType",{precondNone:0,precondTime:1,precondV2:2}),e.union("Preconditions",{switchOn:e.lookup("PreconditionType"),switchName:"type",switches:[["precondNone",e.void()],["precondTime","timeBounds"],["precondV2","v2"]],arms:{timeBounds:e.lookup("TimeBounds"),v2:e.lookup("PreconditionsV2")}}),e.struct("LedgerFootprint",[["readOnly",e.varArray(e.lookup("LedgerKey"),2147483647)],["readWrite",e.varArray(e.lookup("LedgerKey"),2147483647)]]),e.struct("SorobanResources",[["footprint",e.lookup("LedgerFootprint")],["instructions",e.lookup("Uint32")],["readBytes",e.lookup("Uint32")],["writeBytes",e.lookup("Uint32")]]),e.struct("SorobanTransactionData",[["ext",e.lookup("ExtensionPoint")],["resources",e.lookup("SorobanResources")],["resourceFee",e.lookup("Int64")]]),e.union("TransactionV0Ext",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()]],arms:{}}),e.struct("TransactionV0",[["sourceAccountEd25519",e.lookup("Uint256")],["fee",e.lookup("Uint32")],["seqNum",e.lookup("SequenceNumber")],["timeBounds",e.option(e.lookup("TimeBounds"))],["memo",e.lookup("Memo")],["operations",e.varArray(e.lookup("Operation"),e.lookup("MAX_OPS_PER_TX"))],["ext",e.lookup("TransactionV0Ext")]]),e.struct("TransactionV0Envelope",[["tx",e.lookup("TransactionV0")],["signatures",e.varArray(e.lookup("DecoratedSignature"),20)]]),e.union("TransactionExt",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()],[1,"sorobanData"]],arms:{sorobanData:e.lookup("SorobanTransactionData")}}),e.struct("Transaction",[["sourceAccount",e.lookup("MuxedAccount")],["fee",e.lookup("Uint32")],["seqNum",e.lookup("SequenceNumber")],["cond",e.lookup("Preconditions")],["memo",e.lookup("Memo")],["operations",e.varArray(e.lookup("Operation"),e.lookup("MAX_OPS_PER_TX"))],["ext",e.lookup("TransactionExt")]]),e.struct("TransactionV1Envelope",[["tx",e.lookup("Transaction")],["signatures",e.varArray(e.lookup("DecoratedSignature"),20)]]),e.union("FeeBumpTransactionInnerTx",{switchOn:e.lookup("EnvelopeType"),switchName:"type",switches:[["envelopeTypeTx","v1"]],arms:{v1:e.lookup("TransactionV1Envelope")}}),e.union("FeeBumpTransactionExt",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()]],arms:{}}),e.struct("FeeBumpTransaction",[["feeSource",e.lookup("MuxedAccount")],["fee",e.lookup("Int64")],["innerTx",e.lookup("FeeBumpTransactionInnerTx")],["ext",e.lookup("FeeBumpTransactionExt")]]),e.struct("FeeBumpTransactionEnvelope",[["tx",e.lookup("FeeBumpTransaction")],["signatures",e.varArray(e.lookup("DecoratedSignature"),20)]]),e.union("TransactionEnvelope",{switchOn:e.lookup("EnvelopeType"),switchName:"type",switches:[["envelopeTypeTxV0","v0"],["envelopeTypeTx","v1"],["envelopeTypeTxFeeBump","feeBump"]],arms:{v0:e.lookup("TransactionV0Envelope"),v1:e.lookup("TransactionV1Envelope"),feeBump:e.lookup("FeeBumpTransactionEnvelope")}}),e.union("TransactionSignaturePayloadTaggedTransaction",{switchOn:e.lookup("EnvelopeType"),switchName:"type",switches:[["envelopeTypeTx","tx"],["envelopeTypeTxFeeBump","feeBump"]],arms:{tx:e.lookup("Transaction"),feeBump:e.lookup("FeeBumpTransaction")}}),e.struct("TransactionSignaturePayload",[["networkId",e.lookup("Hash")],["taggedTransaction",e.lookup("TransactionSignaturePayloadTaggedTransaction")]]),e.enum("ClaimAtomType",{claimAtomTypeV0:0,claimAtomTypeOrderBook:1,claimAtomTypeLiquidityPool:2}),e.struct("ClaimOfferAtomV0",[["sellerEd25519",e.lookup("Uint256")],["offerId",e.lookup("Int64")],["assetSold",e.lookup("Asset")],["amountSold",e.lookup("Int64")],["assetBought",e.lookup("Asset")],["amountBought",e.lookup("Int64")]]),e.struct("ClaimOfferAtom",[["sellerId",e.lookup("AccountId")],["offerId",e.lookup("Int64")],["assetSold",e.lookup("Asset")],["amountSold",e.lookup("Int64")],["assetBought",e.lookup("Asset")],["amountBought",e.lookup("Int64")]]),e.struct("ClaimLiquidityAtom",[["liquidityPoolId",e.lookup("PoolId")],["assetSold",e.lookup("Asset")],["amountSold",e.lookup("Int64")],["assetBought",e.lookup("Asset")],["amountBought",e.lookup("Int64")]]),e.union("ClaimAtom",{switchOn:e.lookup("ClaimAtomType"),switchName:"type",switches:[["claimAtomTypeV0","v0"],["claimAtomTypeOrderBook","orderBook"],["claimAtomTypeLiquidityPool","liquidityPool"]],arms:{v0:e.lookup("ClaimOfferAtomV0"),orderBook:e.lookup("ClaimOfferAtom"),liquidityPool:e.lookup("ClaimLiquidityAtom")}}),e.enum("CreateAccountResultCode",{createAccountSuccess:0,createAccountMalformed:-1,createAccountUnderfunded:-2,createAccountLowReserve:-3,createAccountAlreadyExist:-4}),e.union("CreateAccountResult",{switchOn:e.lookup("CreateAccountResultCode"),switchName:"code",switches:[["createAccountSuccess",e.void()],["createAccountMalformed",e.void()],["createAccountUnderfunded",e.void()],["createAccountLowReserve",e.void()],["createAccountAlreadyExist",e.void()]],arms:{}}),e.enum("PaymentResultCode",{paymentSuccess:0,paymentMalformed:-1,paymentUnderfunded:-2,paymentSrcNoTrust:-3,paymentSrcNotAuthorized:-4,paymentNoDestination:-5,paymentNoTrust:-6,paymentNotAuthorized:-7,paymentLineFull:-8,paymentNoIssuer:-9}),e.union("PaymentResult",{switchOn:e.lookup("PaymentResultCode"),switchName:"code",switches:[["paymentSuccess",e.void()],["paymentMalformed",e.void()],["paymentUnderfunded",e.void()],["paymentSrcNoTrust",e.void()],["paymentSrcNotAuthorized",e.void()],["paymentNoDestination",e.void()],["paymentNoTrust",e.void()],["paymentNotAuthorized",e.void()],["paymentLineFull",e.void()],["paymentNoIssuer",e.void()]],arms:{}}),e.enum("PathPaymentStrictReceiveResultCode",{pathPaymentStrictReceiveSuccess:0,pathPaymentStrictReceiveMalformed:-1,pathPaymentStrictReceiveUnderfunded:-2,pathPaymentStrictReceiveSrcNoTrust:-3,pathPaymentStrictReceiveSrcNotAuthorized:-4,pathPaymentStrictReceiveNoDestination:-5,pathPaymentStrictReceiveNoTrust:-6,pathPaymentStrictReceiveNotAuthorized:-7,pathPaymentStrictReceiveLineFull:-8,pathPaymentStrictReceiveNoIssuer:-9,pathPaymentStrictReceiveTooFewOffers:-10,pathPaymentStrictReceiveOfferCrossSelf:-11,pathPaymentStrictReceiveOverSendmax:-12}),e.struct("SimplePaymentResult",[["destination",e.lookup("AccountId")],["asset",e.lookup("Asset")],["amount",e.lookup("Int64")]]),e.struct("PathPaymentStrictReceiveResultSuccess",[["offers",e.varArray(e.lookup("ClaimAtom"),2147483647)],["last",e.lookup("SimplePaymentResult")]]),e.union("PathPaymentStrictReceiveResult",{switchOn:e.lookup("PathPaymentStrictReceiveResultCode"),switchName:"code",switches:[["pathPaymentStrictReceiveSuccess","success"],["pathPaymentStrictReceiveMalformed",e.void()],["pathPaymentStrictReceiveUnderfunded",e.void()],["pathPaymentStrictReceiveSrcNoTrust",e.void()],["pathPaymentStrictReceiveSrcNotAuthorized",e.void()],["pathPaymentStrictReceiveNoDestination",e.void()],["pathPaymentStrictReceiveNoTrust",e.void()],["pathPaymentStrictReceiveNotAuthorized",e.void()],["pathPaymentStrictReceiveLineFull",e.void()],["pathPaymentStrictReceiveNoIssuer","noIssuer"],["pathPaymentStrictReceiveTooFewOffers",e.void()],["pathPaymentStrictReceiveOfferCrossSelf",e.void()],["pathPaymentStrictReceiveOverSendmax",e.void()]],arms:{success:e.lookup("PathPaymentStrictReceiveResultSuccess"),noIssuer:e.lookup("Asset")}}),e.enum("PathPaymentStrictSendResultCode",{pathPaymentStrictSendSuccess:0,pathPaymentStrictSendMalformed:-1,pathPaymentStrictSendUnderfunded:-2,pathPaymentStrictSendSrcNoTrust:-3,pathPaymentStrictSendSrcNotAuthorized:-4,pathPaymentStrictSendNoDestination:-5,pathPaymentStrictSendNoTrust:-6,pathPaymentStrictSendNotAuthorized:-7,pathPaymentStrictSendLineFull:-8,pathPaymentStrictSendNoIssuer:-9,pathPaymentStrictSendTooFewOffers:-10,pathPaymentStrictSendOfferCrossSelf:-11,pathPaymentStrictSendUnderDestmin:-12}),e.struct("PathPaymentStrictSendResultSuccess",[["offers",e.varArray(e.lookup("ClaimAtom"),2147483647)],["last",e.lookup("SimplePaymentResult")]]),e.union("PathPaymentStrictSendResult",{switchOn:e.lookup("PathPaymentStrictSendResultCode"),switchName:"code",switches:[["pathPaymentStrictSendSuccess","success"],["pathPaymentStrictSendMalformed",e.void()],["pathPaymentStrictSendUnderfunded",e.void()],["pathPaymentStrictSendSrcNoTrust",e.void()],["pathPaymentStrictSendSrcNotAuthorized",e.void()],["pathPaymentStrictSendNoDestination",e.void()],["pathPaymentStrictSendNoTrust",e.void()],["pathPaymentStrictSendNotAuthorized",e.void()],["pathPaymentStrictSendLineFull",e.void()],["pathPaymentStrictSendNoIssuer","noIssuer"],["pathPaymentStrictSendTooFewOffers",e.void()],["pathPaymentStrictSendOfferCrossSelf",e.void()],["pathPaymentStrictSendUnderDestmin",e.void()]],arms:{success:e.lookup("PathPaymentStrictSendResultSuccess"),noIssuer:e.lookup("Asset")}}),e.enum("ManageSellOfferResultCode",{manageSellOfferSuccess:0,manageSellOfferMalformed:-1,manageSellOfferSellNoTrust:-2,manageSellOfferBuyNoTrust:-3,manageSellOfferSellNotAuthorized:-4,manageSellOfferBuyNotAuthorized:-5,manageSellOfferLineFull:-6,manageSellOfferUnderfunded:-7,manageSellOfferCrossSelf:-8,manageSellOfferSellNoIssuer:-9,manageSellOfferBuyNoIssuer:-10,manageSellOfferNotFound:-11,manageSellOfferLowReserve:-12}),e.enum("ManageOfferEffect",{manageOfferCreated:0,manageOfferUpdated:1,manageOfferDeleted:2}),e.union("ManageOfferSuccessResultOffer",{switchOn:e.lookup("ManageOfferEffect"),switchName:"effect",switches:[["manageOfferCreated","offer"],["manageOfferUpdated","offer"],["manageOfferDeleted",e.void()]],arms:{offer:e.lookup("OfferEntry")}}),e.struct("ManageOfferSuccessResult",[["offersClaimed",e.varArray(e.lookup("ClaimAtom"),2147483647)],["offer",e.lookup("ManageOfferSuccessResultOffer")]]),e.union("ManageSellOfferResult",{switchOn:e.lookup("ManageSellOfferResultCode"),switchName:"code",switches:[["manageSellOfferSuccess","success"],["manageSellOfferMalformed",e.void()],["manageSellOfferSellNoTrust",e.void()],["manageSellOfferBuyNoTrust",e.void()],["manageSellOfferSellNotAuthorized",e.void()],["manageSellOfferBuyNotAuthorized",e.void()],["manageSellOfferLineFull",e.void()],["manageSellOfferUnderfunded",e.void()],["manageSellOfferCrossSelf",e.void()],["manageSellOfferSellNoIssuer",e.void()],["manageSellOfferBuyNoIssuer",e.void()],["manageSellOfferNotFound",e.void()],["manageSellOfferLowReserve",e.void()]],arms:{success:e.lookup("ManageOfferSuccessResult")}}),e.enum("ManageBuyOfferResultCode",{manageBuyOfferSuccess:0,manageBuyOfferMalformed:-1,manageBuyOfferSellNoTrust:-2,manageBuyOfferBuyNoTrust:-3,manageBuyOfferSellNotAuthorized:-4,manageBuyOfferBuyNotAuthorized:-5,manageBuyOfferLineFull:-6,manageBuyOfferUnderfunded:-7,manageBuyOfferCrossSelf:-8,manageBuyOfferSellNoIssuer:-9,manageBuyOfferBuyNoIssuer:-10,manageBuyOfferNotFound:-11,manageBuyOfferLowReserve:-12}),e.union("ManageBuyOfferResult",{switchOn:e.lookup("ManageBuyOfferResultCode"),switchName:"code",switches:[["manageBuyOfferSuccess","success"],["manageBuyOfferMalformed",e.void()],["manageBuyOfferSellNoTrust",e.void()],["manageBuyOfferBuyNoTrust",e.void()],["manageBuyOfferSellNotAuthorized",e.void()],["manageBuyOfferBuyNotAuthorized",e.void()],["manageBuyOfferLineFull",e.void()],["manageBuyOfferUnderfunded",e.void()],["manageBuyOfferCrossSelf",e.void()],["manageBuyOfferSellNoIssuer",e.void()],["manageBuyOfferBuyNoIssuer",e.void()],["manageBuyOfferNotFound",e.void()],["manageBuyOfferLowReserve",e.void()]],arms:{success:e.lookup("ManageOfferSuccessResult")}}),e.enum("SetOptionsResultCode",{setOptionsSuccess:0,setOptionsLowReserve:-1,setOptionsTooManySigners:-2,setOptionsBadFlags:-3,setOptionsInvalidInflation:-4,setOptionsCantChange:-5,setOptionsUnknownFlag:-6,setOptionsThresholdOutOfRange:-7,setOptionsBadSigner:-8,setOptionsInvalidHomeDomain:-9,setOptionsAuthRevocableRequired:-10}),e.union("SetOptionsResult",{switchOn:e.lookup("SetOptionsResultCode"),switchName:"code",switches:[["setOptionsSuccess",e.void()],["setOptionsLowReserve",e.void()],["setOptionsTooManySigners",e.void()],["setOptionsBadFlags",e.void()],["setOptionsInvalidInflation",e.void()],["setOptionsCantChange",e.void()],["setOptionsUnknownFlag",e.void()],["setOptionsThresholdOutOfRange",e.void()],["setOptionsBadSigner",e.void()],["setOptionsInvalidHomeDomain",e.void()],["setOptionsAuthRevocableRequired",e.void()]],arms:{}}),e.enum("ChangeTrustResultCode",{changeTrustSuccess:0,changeTrustMalformed:-1,changeTrustNoIssuer:-2,changeTrustInvalidLimit:-3,changeTrustLowReserve:-4,changeTrustSelfNotAllowed:-5,changeTrustTrustLineMissing:-6,changeTrustCannotDelete:-7,changeTrustNotAuthMaintainLiabilities:-8}),e.union("ChangeTrustResult",{switchOn:e.lookup("ChangeTrustResultCode"),switchName:"code",switches:[["changeTrustSuccess",e.void()],["changeTrustMalformed",e.void()],["changeTrustNoIssuer",e.void()],["changeTrustInvalidLimit",e.void()],["changeTrustLowReserve",e.void()],["changeTrustSelfNotAllowed",e.void()],["changeTrustTrustLineMissing",e.void()],["changeTrustCannotDelete",e.void()],["changeTrustNotAuthMaintainLiabilities",e.void()]],arms:{}}),e.enum("AllowTrustResultCode",{allowTrustSuccess:0,allowTrustMalformed:-1,allowTrustNoTrustLine:-2,allowTrustTrustNotRequired:-3,allowTrustCantRevoke:-4,allowTrustSelfNotAllowed:-5,allowTrustLowReserve:-6}),e.union("AllowTrustResult",{switchOn:e.lookup("AllowTrustResultCode"),switchName:"code",switches:[["allowTrustSuccess",e.void()],["allowTrustMalformed",e.void()],["allowTrustNoTrustLine",e.void()],["allowTrustTrustNotRequired",e.void()],["allowTrustCantRevoke",e.void()],["allowTrustSelfNotAllowed",e.void()],["allowTrustLowReserve",e.void()]],arms:{}}),e.enum("AccountMergeResultCode",{accountMergeSuccess:0,accountMergeMalformed:-1,accountMergeNoAccount:-2,accountMergeImmutableSet:-3,accountMergeHasSubEntries:-4,accountMergeSeqnumTooFar:-5,accountMergeDestFull:-6,accountMergeIsSponsor:-7}),e.union("AccountMergeResult",{switchOn:e.lookup("AccountMergeResultCode"),switchName:"code",switches:[["accountMergeSuccess","sourceAccountBalance"],["accountMergeMalformed",e.void()],["accountMergeNoAccount",e.void()],["accountMergeImmutableSet",e.void()],["accountMergeHasSubEntries",e.void()],["accountMergeSeqnumTooFar",e.void()],["accountMergeDestFull",e.void()],["accountMergeIsSponsor",e.void()]],arms:{sourceAccountBalance:e.lookup("Int64")}}),e.enum("InflationResultCode",{inflationSuccess:0,inflationNotTime:-1}),e.struct("InflationPayout",[["destination",e.lookup("AccountId")],["amount",e.lookup("Int64")]]),e.union("InflationResult",{switchOn:e.lookup("InflationResultCode"),switchName:"code",switches:[["inflationSuccess","payouts"],["inflationNotTime",e.void()]],arms:{payouts:e.varArray(e.lookup("InflationPayout"),2147483647)}}),e.enum("ManageDataResultCode",{manageDataSuccess:0,manageDataNotSupportedYet:-1,manageDataNameNotFound:-2,manageDataLowReserve:-3,manageDataInvalidName:-4}),e.union("ManageDataResult",{switchOn:e.lookup("ManageDataResultCode"),switchName:"code",switches:[["manageDataSuccess",e.void()],["manageDataNotSupportedYet",e.void()],["manageDataNameNotFound",e.void()],["manageDataLowReserve",e.void()],["manageDataInvalidName",e.void()]],arms:{}}),e.enum("BumpSequenceResultCode",{bumpSequenceSuccess:0,bumpSequenceBadSeq:-1}),e.union("BumpSequenceResult",{switchOn:e.lookup("BumpSequenceResultCode"),switchName:"code",switches:[["bumpSequenceSuccess",e.void()],["bumpSequenceBadSeq",e.void()]],arms:{}}),e.enum("CreateClaimableBalanceResultCode",{createClaimableBalanceSuccess:0,createClaimableBalanceMalformed:-1,createClaimableBalanceLowReserve:-2,createClaimableBalanceNoTrust:-3,createClaimableBalanceNotAuthorized:-4,createClaimableBalanceUnderfunded:-5}),e.union("CreateClaimableBalanceResult",{switchOn:e.lookup("CreateClaimableBalanceResultCode"),switchName:"code",switches:[["createClaimableBalanceSuccess","balanceId"],["createClaimableBalanceMalformed",e.void()],["createClaimableBalanceLowReserve",e.void()],["createClaimableBalanceNoTrust",e.void()],["createClaimableBalanceNotAuthorized",e.void()],["createClaimableBalanceUnderfunded",e.void()]],arms:{balanceId:e.lookup("ClaimableBalanceId")}}),e.enum("ClaimClaimableBalanceResultCode",{claimClaimableBalanceSuccess:0,claimClaimableBalanceDoesNotExist:-1,claimClaimableBalanceCannotClaim:-2,claimClaimableBalanceLineFull:-3,claimClaimableBalanceNoTrust:-4,claimClaimableBalanceNotAuthorized:-5}),e.union("ClaimClaimableBalanceResult",{switchOn:e.lookup("ClaimClaimableBalanceResultCode"),switchName:"code",switches:[["claimClaimableBalanceSuccess",e.void()],["claimClaimableBalanceDoesNotExist",e.void()],["claimClaimableBalanceCannotClaim",e.void()],["claimClaimableBalanceLineFull",e.void()],["claimClaimableBalanceNoTrust",e.void()],["claimClaimableBalanceNotAuthorized",e.void()]],arms:{}}),e.enum("BeginSponsoringFutureReservesResultCode",{beginSponsoringFutureReservesSuccess:0,beginSponsoringFutureReservesMalformed:-1,beginSponsoringFutureReservesAlreadySponsored:-2,beginSponsoringFutureReservesRecursive:-3}),e.union("BeginSponsoringFutureReservesResult",{switchOn:e.lookup("BeginSponsoringFutureReservesResultCode"),switchName:"code",switches:[["beginSponsoringFutureReservesSuccess",e.void()],["beginSponsoringFutureReservesMalformed",e.void()],["beginSponsoringFutureReservesAlreadySponsored",e.void()],["beginSponsoringFutureReservesRecursive",e.void()]],arms:{}}),e.enum("EndSponsoringFutureReservesResultCode",{endSponsoringFutureReservesSuccess:0,endSponsoringFutureReservesNotSponsored:-1}),e.union("EndSponsoringFutureReservesResult",{switchOn:e.lookup("EndSponsoringFutureReservesResultCode"),switchName:"code",switches:[["endSponsoringFutureReservesSuccess",e.void()],["endSponsoringFutureReservesNotSponsored",e.void()]],arms:{}}),e.enum("RevokeSponsorshipResultCode",{revokeSponsorshipSuccess:0,revokeSponsorshipDoesNotExist:-1,revokeSponsorshipNotSponsor:-2,revokeSponsorshipLowReserve:-3,revokeSponsorshipOnlyTransferable:-4,revokeSponsorshipMalformed:-5}),e.union("RevokeSponsorshipResult",{switchOn:e.lookup("RevokeSponsorshipResultCode"),switchName:"code",switches:[["revokeSponsorshipSuccess",e.void()],["revokeSponsorshipDoesNotExist",e.void()],["revokeSponsorshipNotSponsor",e.void()],["revokeSponsorshipLowReserve",e.void()],["revokeSponsorshipOnlyTransferable",e.void()],["revokeSponsorshipMalformed",e.void()]],arms:{}}),e.enum("ClawbackResultCode",{clawbackSuccess:0,clawbackMalformed:-1,clawbackNotClawbackEnabled:-2,clawbackNoTrust:-3,clawbackUnderfunded:-4}),e.union("ClawbackResult",{switchOn:e.lookup("ClawbackResultCode"),switchName:"code",switches:[["clawbackSuccess",e.void()],["clawbackMalformed",e.void()],["clawbackNotClawbackEnabled",e.void()],["clawbackNoTrust",e.void()],["clawbackUnderfunded",e.void()]],arms:{}}),e.enum("ClawbackClaimableBalanceResultCode",{clawbackClaimableBalanceSuccess:0,clawbackClaimableBalanceDoesNotExist:-1,clawbackClaimableBalanceNotIssuer:-2,clawbackClaimableBalanceNotClawbackEnabled:-3}),e.union("ClawbackClaimableBalanceResult",{switchOn:e.lookup("ClawbackClaimableBalanceResultCode"),switchName:"code",switches:[["clawbackClaimableBalanceSuccess",e.void()],["clawbackClaimableBalanceDoesNotExist",e.void()],["clawbackClaimableBalanceNotIssuer",e.void()],["clawbackClaimableBalanceNotClawbackEnabled",e.void()]],arms:{}}),e.enum("SetTrustLineFlagsResultCode",{setTrustLineFlagsSuccess:0,setTrustLineFlagsMalformed:-1,setTrustLineFlagsNoTrustLine:-2,setTrustLineFlagsCantRevoke:-3,setTrustLineFlagsInvalidState:-4,setTrustLineFlagsLowReserve:-5}),e.union("SetTrustLineFlagsResult",{switchOn:e.lookup("SetTrustLineFlagsResultCode"),switchName:"code",switches:[["setTrustLineFlagsSuccess",e.void()],["setTrustLineFlagsMalformed",e.void()],["setTrustLineFlagsNoTrustLine",e.void()],["setTrustLineFlagsCantRevoke",e.void()],["setTrustLineFlagsInvalidState",e.void()],["setTrustLineFlagsLowReserve",e.void()]],arms:{}}),e.enum("LiquidityPoolDepositResultCode",{liquidityPoolDepositSuccess:0,liquidityPoolDepositMalformed:-1,liquidityPoolDepositNoTrust:-2,liquidityPoolDepositNotAuthorized:-3,liquidityPoolDepositUnderfunded:-4,liquidityPoolDepositLineFull:-5,liquidityPoolDepositBadPrice:-6,liquidityPoolDepositPoolFull:-7}),e.union("LiquidityPoolDepositResult",{switchOn:e.lookup("LiquidityPoolDepositResultCode"),switchName:"code",switches:[["liquidityPoolDepositSuccess",e.void()],["liquidityPoolDepositMalformed",e.void()],["liquidityPoolDepositNoTrust",e.void()],["liquidityPoolDepositNotAuthorized",e.void()],["liquidityPoolDepositUnderfunded",e.void()],["liquidityPoolDepositLineFull",e.void()],["liquidityPoolDepositBadPrice",e.void()],["liquidityPoolDepositPoolFull",e.void()]],arms:{}}),e.enum("LiquidityPoolWithdrawResultCode",{liquidityPoolWithdrawSuccess:0,liquidityPoolWithdrawMalformed:-1,liquidityPoolWithdrawNoTrust:-2,liquidityPoolWithdrawUnderfunded:-3,liquidityPoolWithdrawLineFull:-4,liquidityPoolWithdrawUnderMinimum:-5}),e.union("LiquidityPoolWithdrawResult",{switchOn:e.lookup("LiquidityPoolWithdrawResultCode"),switchName:"code",switches:[["liquidityPoolWithdrawSuccess",e.void()],["liquidityPoolWithdrawMalformed",e.void()],["liquidityPoolWithdrawNoTrust",e.void()],["liquidityPoolWithdrawUnderfunded",e.void()],["liquidityPoolWithdrawLineFull",e.void()],["liquidityPoolWithdrawUnderMinimum",e.void()]],arms:{}}),e.enum("InvokeHostFunctionResultCode",{invokeHostFunctionSuccess:0,invokeHostFunctionMalformed:-1,invokeHostFunctionTrapped:-2,invokeHostFunctionResourceLimitExceeded:-3,invokeHostFunctionEntryArchived:-4,invokeHostFunctionInsufficientRefundableFee:-5}),e.union("InvokeHostFunctionResult",{switchOn:e.lookup("InvokeHostFunctionResultCode"),switchName:"code",switches:[["invokeHostFunctionSuccess","success"],["invokeHostFunctionMalformed",e.void()],["invokeHostFunctionTrapped",e.void()],["invokeHostFunctionResourceLimitExceeded",e.void()],["invokeHostFunctionEntryArchived",e.void()],["invokeHostFunctionInsufficientRefundableFee",e.void()]],arms:{success:e.lookup("Hash")}}),e.enum("ExtendFootprintTtlResultCode",{extendFootprintTtlSuccess:0,extendFootprintTtlMalformed:-1,extendFootprintTtlResourceLimitExceeded:-2,extendFootprintTtlInsufficientRefundableFee:-3}),e.union("ExtendFootprintTtlResult",{switchOn:e.lookup("ExtendFootprintTtlResultCode"),switchName:"code",switches:[["extendFootprintTtlSuccess",e.void()],["extendFootprintTtlMalformed",e.void()],["extendFootprintTtlResourceLimitExceeded",e.void()],["extendFootprintTtlInsufficientRefundableFee",e.void()]],arms:{}}),e.enum("RestoreFootprintResultCode",{restoreFootprintSuccess:0,restoreFootprintMalformed:-1,restoreFootprintResourceLimitExceeded:-2,restoreFootprintInsufficientRefundableFee:-3}),e.union("RestoreFootprintResult",{switchOn:e.lookup("RestoreFootprintResultCode"),switchName:"code",switches:[["restoreFootprintSuccess",e.void()],["restoreFootprintMalformed",e.void()],["restoreFootprintResourceLimitExceeded",e.void()],["restoreFootprintInsufficientRefundableFee",e.void()]],arms:{}}),e.enum("OperationResultCode",{opInner:0,opBadAuth:-1,opNoAccount:-2,opNotSupported:-3,opTooManySubentries:-4,opExceededWorkLimit:-5,opTooManySponsoring:-6}),e.union("OperationResultTr",{switchOn:e.lookup("OperationType"),switchName:"type",switches:[["createAccount","createAccountResult"],["payment","paymentResult"],["pathPaymentStrictReceive","pathPaymentStrictReceiveResult"],["manageSellOffer","manageSellOfferResult"],["createPassiveSellOffer","createPassiveSellOfferResult"],["setOptions","setOptionsResult"],["changeTrust","changeTrustResult"],["allowTrust","allowTrustResult"],["accountMerge","accountMergeResult"],["inflation","inflationResult"],["manageData","manageDataResult"],["bumpSequence","bumpSeqResult"],["manageBuyOffer","manageBuyOfferResult"],["pathPaymentStrictSend","pathPaymentStrictSendResult"],["createClaimableBalance","createClaimableBalanceResult"],["claimClaimableBalance","claimClaimableBalanceResult"],["beginSponsoringFutureReserves","beginSponsoringFutureReservesResult"],["endSponsoringFutureReserves","endSponsoringFutureReservesResult"],["revokeSponsorship","revokeSponsorshipResult"],["clawback","clawbackResult"],["clawbackClaimableBalance","clawbackClaimableBalanceResult"],["setTrustLineFlags","setTrustLineFlagsResult"],["liquidityPoolDeposit","liquidityPoolDepositResult"],["liquidityPoolWithdraw","liquidityPoolWithdrawResult"],["invokeHostFunction","invokeHostFunctionResult"],["extendFootprintTtl","extendFootprintTtlResult"],["restoreFootprint","restoreFootprintResult"]],arms:{createAccountResult:e.lookup("CreateAccountResult"),paymentResult:e.lookup("PaymentResult"),pathPaymentStrictReceiveResult:e.lookup("PathPaymentStrictReceiveResult"),manageSellOfferResult:e.lookup("ManageSellOfferResult"),createPassiveSellOfferResult:e.lookup("ManageSellOfferResult"),setOptionsResult:e.lookup("SetOptionsResult"),changeTrustResult:e.lookup("ChangeTrustResult"),allowTrustResult:e.lookup("AllowTrustResult"),accountMergeResult:e.lookup("AccountMergeResult"),inflationResult:e.lookup("InflationResult"),manageDataResult:e.lookup("ManageDataResult"),bumpSeqResult:e.lookup("BumpSequenceResult"),manageBuyOfferResult:e.lookup("ManageBuyOfferResult"),pathPaymentStrictSendResult:e.lookup("PathPaymentStrictSendResult"),createClaimableBalanceResult:e.lookup("CreateClaimableBalanceResult"),claimClaimableBalanceResult:e.lookup("ClaimClaimableBalanceResult"),beginSponsoringFutureReservesResult:e.lookup("BeginSponsoringFutureReservesResult"),endSponsoringFutureReservesResult:e.lookup("EndSponsoringFutureReservesResult"),revokeSponsorshipResult:e.lookup("RevokeSponsorshipResult"),clawbackResult:e.lookup("ClawbackResult"),clawbackClaimableBalanceResult:e.lookup("ClawbackClaimableBalanceResult"),setTrustLineFlagsResult:e.lookup("SetTrustLineFlagsResult"),liquidityPoolDepositResult:e.lookup("LiquidityPoolDepositResult"),liquidityPoolWithdrawResult:e.lookup("LiquidityPoolWithdrawResult"),invokeHostFunctionResult:e.lookup("InvokeHostFunctionResult"),extendFootprintTtlResult:e.lookup("ExtendFootprintTtlResult"),restoreFootprintResult:e.lookup("RestoreFootprintResult")}}),e.union("OperationResult",{switchOn:e.lookup("OperationResultCode"),switchName:"code",switches:[["opInner","tr"],["opBadAuth",e.void()],["opNoAccount",e.void()],["opNotSupported",e.void()],["opTooManySubentries",e.void()],["opExceededWorkLimit",e.void()],["opTooManySponsoring",e.void()]],arms:{tr:e.lookup("OperationResultTr")}}),e.enum("TransactionResultCode",{txFeeBumpInnerSuccess:1,txSuccess:0,txFailed:-1,txTooEarly:-2,txTooLate:-3,txMissingOperation:-4,txBadSeq:-5,txBadAuth:-6,txInsufficientBalance:-7,txNoAccount:-8,txInsufficientFee:-9,txBadAuthExtra:-10,txInternalError:-11,txNotSupported:-12,txFeeBumpInnerFailed:-13,txBadSponsorship:-14,txBadMinSeqAgeOrGap:-15,txMalformed:-16,txSorobanInvalid:-17}),e.union("InnerTransactionResultResult",{switchOn:e.lookup("TransactionResultCode"),switchName:"code",switches:[["txSuccess","results"],["txFailed","results"],["txTooEarly",e.void()],["txTooLate",e.void()],["txMissingOperation",e.void()],["txBadSeq",e.void()],["txBadAuth",e.void()],["txInsufficientBalance",e.void()],["txNoAccount",e.void()],["txInsufficientFee",e.void()],["txBadAuthExtra",e.void()],["txInternalError",e.void()],["txNotSupported",e.void()],["txBadSponsorship",e.void()],["txBadMinSeqAgeOrGap",e.void()],["txMalformed",e.void()],["txSorobanInvalid",e.void()]],arms:{results:e.varArray(e.lookup("OperationResult"),2147483647)}}),e.union("InnerTransactionResultExt",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()]],arms:{}}),e.struct("InnerTransactionResult",[["feeCharged",e.lookup("Int64")],["result",e.lookup("InnerTransactionResultResult")],["ext",e.lookup("InnerTransactionResultExt")]]),e.struct("InnerTransactionResultPair",[["transactionHash",e.lookup("Hash")],["result",e.lookup("InnerTransactionResult")]]),e.union("TransactionResultResult",{switchOn:e.lookup("TransactionResultCode"),switchName:"code",switches:[["txFeeBumpInnerSuccess","innerResultPair"],["txFeeBumpInnerFailed","innerResultPair"],["txSuccess","results"],["txFailed","results"],["txTooEarly",e.void()],["txTooLate",e.void()],["txMissingOperation",e.void()],["txBadSeq",e.void()],["txBadAuth",e.void()],["txInsufficientBalance",e.void()],["txNoAccount",e.void()],["txInsufficientFee",e.void()],["txBadAuthExtra",e.void()],["txInternalError",e.void()],["txNotSupported",e.void()],["txBadSponsorship",e.void()],["txBadMinSeqAgeOrGap",e.void()],["txMalformed",e.void()],["txSorobanInvalid",e.void()]],arms:{innerResultPair:e.lookup("InnerTransactionResultPair"),results:e.varArray(e.lookup("OperationResult"),2147483647)}}),e.union("TransactionResultExt",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()]],arms:{}}),e.struct("TransactionResult",[["feeCharged",e.lookup("Int64")],["result",e.lookup("TransactionResultResult")],["ext",e.lookup("TransactionResultExt")]]),e.typedef("Hash",e.opaque(32)),e.typedef("Uint256",e.opaque(32)),e.typedef("Uint32",e.uint()),e.typedef("Int32",e.int()),e.typedef("Uint64",e.uhyper()),e.typedef("Int64",e.hyper()),e.typedef("TimePoint",e.lookup("Uint64")),e.typedef("Duration",e.lookup("Uint64")),e.union("ExtensionPoint",{switchOn:e.int(),switchName:"v",switches:[[0,e.void()]],arms:{}}),e.enum("CryptoKeyType",{keyTypeEd25519:0,keyTypePreAuthTx:1,keyTypeHashX:2,keyTypeEd25519SignedPayload:3,keyTypeMuxedEd25519:256}),e.enum("PublicKeyType",{publicKeyTypeEd25519:0}),e.enum("SignerKeyType",{signerKeyTypeEd25519:0,signerKeyTypePreAuthTx:1,signerKeyTypeHashX:2,signerKeyTypeEd25519SignedPayload:3}),e.union("PublicKey",{switchOn:e.lookup("PublicKeyType"),switchName:"type",switches:[["publicKeyTypeEd25519","ed25519"]],arms:{ed25519:e.lookup("Uint256")}}),e.struct("SignerKeyEd25519SignedPayload",[["ed25519",e.lookup("Uint256")],["payload",e.varOpaque(64)]]),e.union("SignerKey",{switchOn:e.lookup("SignerKeyType"),switchName:"type",switches:[["signerKeyTypeEd25519","ed25519"],["signerKeyTypePreAuthTx","preAuthTx"],["signerKeyTypeHashX","hashX"],["signerKeyTypeEd25519SignedPayload","ed25519SignedPayload"]],arms:{ed25519:e.lookup("Uint256"),preAuthTx:e.lookup("Uint256"),hashX:e.lookup("Uint256"),ed25519SignedPayload:e.lookup("SignerKeyEd25519SignedPayload")}}),e.typedef("Signature",e.varOpaque(64)),e.typedef("SignatureHint",e.opaque(4)),e.typedef("NodeId",e.lookup("PublicKey")),e.typedef("AccountId",e.lookup("PublicKey")),e.struct("Curve25519Secret",[["key",e.opaque(32)]]),e.struct("Curve25519Public",[["key",e.opaque(32)]]),e.struct("HmacSha256Key",[["key",e.opaque(32)]]),e.struct("HmacSha256Mac",[["mac",e.opaque(32)]]),e.enum("ScValType",{scvBool:0,scvVoid:1,scvError:2,scvU32:3,scvI32:4,scvU64:5,scvI64:6,scvTimepoint:7,scvDuration:8,scvU128:9,scvI128:10,scvU256:11,scvI256:12,scvBytes:13,scvString:14,scvSymbol:15,scvVec:16,scvMap:17,scvAddress:18,scvContractInstance:19,scvLedgerKeyContractInstance:20,scvLedgerKeyNonce:21}),e.enum("ScErrorType",{sceContract:0,sceWasmVm:1,sceContext:2,sceStorage:3,sceObject:4,sceCrypto:5,sceEvents:6,sceBudget:7,sceValue:8,sceAuth:9}),e.enum("ScErrorCode",{scecArithDomain:0,scecIndexBounds:1,scecInvalidInput:2,scecMissingValue:3,scecExistingValue:4,scecExceededLimit:5,scecInvalidAction:6,scecInternalError:7,scecUnexpectedType:8,scecUnexpectedSize:9}),e.union("ScError",{switchOn:e.lookup("ScErrorType"),switchName:"type",switches:[["sceContract","contractCode"],["sceWasmVm","code"],["sceContext","code"],["sceStorage","code"],["sceObject","code"],["sceCrypto","code"],["sceEvents","code"],["sceBudget","code"],["sceValue","code"],["sceAuth","code"]],arms:{contractCode:e.lookup("Uint32"),code:e.lookup("ScErrorCode")}}),e.struct("UInt128Parts",[["hi",e.lookup("Uint64")],["lo",e.lookup("Uint64")]]),e.struct("Int128Parts",[["hi",e.lookup("Int64")],["lo",e.lookup("Uint64")]]),e.struct("UInt256Parts",[["hiHi",e.lookup("Uint64")],["hiLo",e.lookup("Uint64")],["loHi",e.lookup("Uint64")],["loLo",e.lookup("Uint64")]]),e.struct("Int256Parts",[["hiHi",e.lookup("Int64")],["hiLo",e.lookup("Uint64")],["loHi",e.lookup("Uint64")],["loLo",e.lookup("Uint64")]]),e.enum("ContractExecutableType",{contractExecutableWasm:0,contractExecutableStellarAsset:1}),e.union("ContractExecutable",{switchOn:e.lookup("ContractExecutableType"),switchName:"type",switches:[["contractExecutableWasm","wasmHash"],["contractExecutableStellarAsset",e.void()]],arms:{wasmHash:e.lookup("Hash")}}),e.enum("ScAddressType",{scAddressTypeAccount:0,scAddressTypeContract:1}),e.union("ScAddress",{switchOn:e.lookup("ScAddressType"),switchName:"type",switches:[["scAddressTypeAccount","accountId"],["scAddressTypeContract","contractId"]],arms:{accountId:e.lookup("AccountId"),contractId:e.lookup("Hash")}}),e.const("SCSYMBOL_LIMIT",32),e.typedef("ScVec",e.varArray(e.lookup("ScVal"),2147483647)),e.typedef("ScMap",e.varArray(e.lookup("ScMapEntry"),2147483647)),e.typedef("ScBytes",e.varOpaque()),e.typedef("ScString",e.string()),e.typedef("ScSymbol",e.string(32)),e.struct("ScNonceKey",[["nonce",e.lookup("Int64")]]),e.struct("ScContractInstance",[["executable",e.lookup("ContractExecutable")],["storage",e.option(e.lookup("ScMap"))]]),e.union("ScVal",{switchOn:e.lookup("ScValType"),switchName:"type",switches:[["scvBool","b"],["scvVoid",e.void()],["scvError","error"],["scvU32","u32"],["scvI32","i32"],["scvU64","u64"],["scvI64","i64"],["scvTimepoint","timepoint"],["scvDuration","duration"],["scvU128","u128"],["scvI128","i128"],["scvU256","u256"],["scvI256","i256"],["scvBytes","bytes"],["scvString","str"],["scvSymbol","sym"],["scvVec","vec"],["scvMap","map"],["scvAddress","address"],["scvLedgerKeyContractInstance",e.void()],["scvLedgerKeyNonce","nonceKey"],["scvContractInstance","instance"]],arms:{b:e.bool(),error:e.lookup("ScError"),u32:e.lookup("Uint32"),i32:e.lookup("Int32"),u64:e.lookup("Uint64"),i64:e.lookup("Int64"),timepoint:e.lookup("TimePoint"),duration:e.lookup("Duration"),u128:e.lookup("UInt128Parts"),i128:e.lookup("Int128Parts"),u256:e.lookup("UInt256Parts"),i256:e.lookup("Int256Parts"),bytes:e.lookup("ScBytes"),str:e.lookup("ScString"),sym:e.lookup("ScSymbol"),vec:e.option(e.lookup("ScVec")),map:e.option(e.lookup("ScMap")),address:e.lookup("ScAddress"),nonceKey:e.lookup("ScNonceKey"),instance:e.lookup("ScContractInstance")}}),e.struct("ScMapEntry",[["key",e.lookup("ScVal")],["val",e.lookup("ScVal")]]),e.enum("ScEnvMetaKind",{scEnvMetaKindInterfaceVersion:0}),e.union("ScEnvMetaEntry",{switchOn:e.lookup("ScEnvMetaKind"),switchName:"kind",switches:[["scEnvMetaKindInterfaceVersion","interfaceVersion"]],arms:{interfaceVersion:e.lookup("Uint64")}}),e.struct("ScMetaV0",[["key",e.string()],["val",e.string()]]),e.enum("ScMetaKind",{scMetaV0:0}),e.union("ScMetaEntry",{switchOn:e.lookup("ScMetaKind"),switchName:"kind",switches:[["scMetaV0","v0"]],arms:{v0:e.lookup("ScMetaV0")}}),e.const("SC_SPEC_DOC_LIMIT",1024),e.enum("ScSpecType",{scSpecTypeVal:0,scSpecTypeBool:1,scSpecTypeVoid:2,scSpecTypeError:3,scSpecTypeU32:4,scSpecTypeI32:5,scSpecTypeU64:6,scSpecTypeI64:7,scSpecTypeTimepoint:8,scSpecTypeDuration:9,scSpecTypeU128:10,scSpecTypeI128:11,scSpecTypeU256:12,scSpecTypeI256:13,scSpecTypeBytes:14,scSpecTypeString:16,scSpecTypeSymbol:17,scSpecTypeAddress:19,scSpecTypeOption:1e3,scSpecTypeResult:1001,scSpecTypeVec:1002,scSpecTypeMap:1004,scSpecTypeTuple:1005,scSpecTypeBytesN:1006,scSpecTypeUdt:2e3}),e.struct("ScSpecTypeOption",[["valueType",e.lookup("ScSpecTypeDef")]]),e.struct("ScSpecTypeResult",[["okType",e.lookup("ScSpecTypeDef")],["errorType",e.lookup("ScSpecTypeDef")]]),e.struct("ScSpecTypeVec",[["elementType",e.lookup("ScSpecTypeDef")]]),e.struct("ScSpecTypeMap",[["keyType",e.lookup("ScSpecTypeDef")],["valueType",e.lookup("ScSpecTypeDef")]]),e.struct("ScSpecTypeTuple",[["valueTypes",e.varArray(e.lookup("ScSpecTypeDef"),12)]]),e.struct("ScSpecTypeBytesN",[["n",e.lookup("Uint32")]]),e.struct("ScSpecTypeUdt",[["name",e.string(60)]]),e.union("ScSpecTypeDef",{switchOn:e.lookup("ScSpecType"),switchName:"type",switches:[["scSpecTypeVal",e.void()],["scSpecTypeBool",e.void()],["scSpecTypeVoid",e.void()],["scSpecTypeError",e.void()],["scSpecTypeU32",e.void()],["scSpecTypeI32",e.void()],["scSpecTypeU64",e.void()],["scSpecTypeI64",e.void()],["scSpecTypeTimepoint",e.void()],["scSpecTypeDuration",e.void()],["scSpecTypeU128",e.void()],["scSpecTypeI128",e.void()],["scSpecTypeU256",e.void()],["scSpecTypeI256",e.void()],["scSpecTypeBytes",e.void()],["scSpecTypeString",e.void()],["scSpecTypeSymbol",e.void()],["scSpecTypeAddress",e.void()],["scSpecTypeOption","option"],["scSpecTypeResult","result"],["scSpecTypeVec","vec"],["scSpecTypeMap","map"],["scSpecTypeTuple","tuple"],["scSpecTypeBytesN","bytesN"],["scSpecTypeUdt","udt"]],arms:{option:e.lookup("ScSpecTypeOption"),result:e.lookup("ScSpecTypeResult"),vec:e.lookup("ScSpecTypeVec"),map:e.lookup("ScSpecTypeMap"),tuple:e.lookup("ScSpecTypeTuple"),bytesN:e.lookup("ScSpecTypeBytesN"),udt:e.lookup("ScSpecTypeUdt")}}),e.struct("ScSpecUdtStructFieldV0",[["doc",e.string(t)],["name",e.string(30)],["type",e.lookup("ScSpecTypeDef")]]),e.struct("ScSpecUdtStructV0",[["doc",e.string(t)],["lib",e.string(80)],["name",e.string(60)],["fields",e.varArray(e.lookup("ScSpecUdtStructFieldV0"),40)]]),e.struct("ScSpecUdtUnionCaseVoidV0",[["doc",e.string(t)],["name",e.string(60)]]),e.struct("ScSpecUdtUnionCaseTupleV0",[["doc",e.string(t)],["name",e.string(60)],["type",e.varArray(e.lookup("ScSpecTypeDef"),12)]]),e.enum("ScSpecUdtUnionCaseV0Kind",{scSpecUdtUnionCaseVoidV0:0,scSpecUdtUnionCaseTupleV0:1}),e.union("ScSpecUdtUnionCaseV0",{switchOn:e.lookup("ScSpecUdtUnionCaseV0Kind"),switchName:"kind",switches:[["scSpecUdtUnionCaseVoidV0","voidCase"],["scSpecUdtUnionCaseTupleV0","tupleCase"]],arms:{voidCase:e.lookup("ScSpecUdtUnionCaseVoidV0"),tupleCase:e.lookup("ScSpecUdtUnionCaseTupleV0")}}),e.struct("ScSpecUdtUnionV0",[["doc",e.string(t)],["lib",e.string(80)],["name",e.string(60)],["cases",e.varArray(e.lookup("ScSpecUdtUnionCaseV0"),50)]]),e.struct("ScSpecUdtEnumCaseV0",[["doc",e.string(t)],["name",e.string(60)],["value",e.lookup("Uint32")]]),e.struct("ScSpecUdtEnumV0",[["doc",e.string(t)],["lib",e.string(80)],["name",e.string(60)],["cases",e.varArray(e.lookup("ScSpecUdtEnumCaseV0"),50)]]),e.struct("ScSpecUdtErrorEnumCaseV0",[["doc",e.string(t)],["name",e.string(60)],["value",e.lookup("Uint32")]]),e.struct("ScSpecUdtErrorEnumV0",[["doc",e.string(t)],["lib",e.string(80)],["name",e.string(60)],["cases",e.varArray(e.lookup("ScSpecUdtErrorEnumCaseV0"),50)]]),e.struct("ScSpecFunctionInputV0",[["doc",e.string(t)],["name",e.string(30)],["type",e.lookup("ScSpecTypeDef")]]),e.struct("ScSpecFunctionV0",[["doc",e.string(t)],["name",e.lookup("ScSymbol")],["inputs",e.varArray(e.lookup("ScSpecFunctionInputV0"),10)],["outputs",e.varArray(e.lookup("ScSpecTypeDef"),1)]]),e.enum("ScSpecEntryKind",{scSpecEntryFunctionV0:0,scSpecEntryUdtStructV0:1,scSpecEntryUdtUnionV0:2,scSpecEntryUdtEnumV0:3,scSpecEntryUdtErrorEnumV0:4}),e.union("ScSpecEntry",{switchOn:e.lookup("ScSpecEntryKind"),switchName:"kind",switches:[["scSpecEntryFunctionV0","functionV0"],["scSpecEntryUdtStructV0","udtStructV0"],["scSpecEntryUdtUnionV0","udtUnionV0"],["scSpecEntryUdtEnumV0","udtEnumV0"],["scSpecEntryUdtErrorEnumV0","udtErrorEnumV0"]],arms:{functionV0:e.lookup("ScSpecFunctionV0"),udtStructV0:e.lookup("ScSpecUdtStructV0"),udtUnionV0:e.lookup("ScSpecUdtUnionV0"),udtEnumV0:e.lookup("ScSpecUdtEnumV0"),udtErrorEnumV0:e.lookup("ScSpecUdtErrorEnumV0")}}),e.struct("ConfigSettingContractExecutionLanesV0",[["ledgerMaxTxCount",e.lookup("Uint32")]]),e.struct("ConfigSettingContractComputeV0",[["ledgerMaxInstructions",e.lookup("Int64")],["txMaxInstructions",e.lookup("Int64")],["feeRatePerInstructionsIncrement",e.lookup("Int64")],["txMemoryLimit",e.lookup("Uint32")]]),e.struct("ConfigSettingContractLedgerCostV0",[["ledgerMaxReadLedgerEntries",e.lookup("Uint32")],["ledgerMaxReadBytes",e.lookup("Uint32")],["ledgerMaxWriteLedgerEntries",e.lookup("Uint32")],["ledgerMaxWriteBytes",e.lookup("Uint32")],["txMaxReadLedgerEntries",e.lookup("Uint32")],["txMaxReadBytes",e.lookup("Uint32")],["txMaxWriteLedgerEntries",e.lookup("Uint32")],["txMaxWriteBytes",e.lookup("Uint32")],["feeReadLedgerEntry",e.lookup("Int64")],["feeWriteLedgerEntry",e.lookup("Int64")],["feeRead1Kb",e.lookup("Int64")],["bucketListTargetSizeBytes",e.lookup("Int64")],["writeFee1KbBucketListLow",e.lookup("Int64")],["writeFee1KbBucketListHigh",e.lookup("Int64")],["bucketListWriteFeeGrowthFactor",e.lookup("Uint32")]]),e.struct("ConfigSettingContractHistoricalDataV0",[["feeHistorical1Kb",e.lookup("Int64")]]),e.struct("ConfigSettingContractEventsV0",[["txMaxContractEventsSizeBytes",e.lookup("Uint32")],["feeContractEvents1Kb",e.lookup("Int64")]]),e.struct("ConfigSettingContractBandwidthV0",[["ledgerMaxTxsSizeBytes",e.lookup("Uint32")],["txMaxSizeBytes",e.lookup("Uint32")],["feeTxSize1Kb",e.lookup("Int64")]]),e.enum("ContractCostType",{wasmInsnExec:0,memAlloc:1,memCpy:2,memCmp:3,dispatchHostFunction:4,visitObject:5,valSer:6,valDeser:7,computeSha256Hash:8,computeEd25519PubKey:9,verifyEd25519Sig:10,vmInstantiation:11,vmCachedInstantiation:12,invokeVmFunction:13,computeKeccak256Hash:14,decodeEcdsaCurve256Sig:15,recoverEcdsaSecp256k1Key:16,int256AddSub:17,int256Mul:18,int256Div:19,int256Pow:20,int256Shift:21,chaCha20DrawBytes:22,parseWasmInstructions:23,parseWasmFunctions:24,parseWasmGlobals:25,parseWasmTableEntries:26,parseWasmTypes:27,parseWasmDataSegments:28,parseWasmElemSegments:29,parseWasmImports:30,parseWasmExports:31,parseWasmDataSegmentBytes:32,instantiateWasmInstructions:33,instantiateWasmFunctions:34,instantiateWasmGlobals:35,instantiateWasmTableEntries:36,instantiateWasmTypes:37,instantiateWasmDataSegments:38,instantiateWasmElemSegments:39,instantiateWasmImports:40,instantiateWasmExports:41,instantiateWasmDataSegmentBytes:42,sec1DecodePointUncompressed:43,verifyEcdsaSecp256r1Sig:44}),e.struct("ContractCostParamEntry",[["ext",e.lookup("ExtensionPoint")],["constTerm",e.lookup("Int64")],["linearTerm",e.lookup("Int64")]]),e.struct("StateArchivalSettings",[["maxEntryTtl",e.lookup("Uint32")],["minTemporaryTtl",e.lookup("Uint32")],["minPersistentTtl",e.lookup("Uint32")],["persistentRentRateDenominator",e.lookup("Int64")],["tempRentRateDenominator",e.lookup("Int64")],["maxEntriesToArchive",e.lookup("Uint32")],["bucketListSizeWindowSampleSize",e.lookup("Uint32")],["bucketListWindowSamplePeriod",e.lookup("Uint32")],["evictionScanSize",e.lookup("Uint32")],["startingEvictionScanLevel",e.lookup("Uint32")]]),e.struct("EvictionIterator",[["bucketListLevel",e.lookup("Uint32")],["isCurrBucket",e.bool()],["bucketFileOffset",e.lookup("Uint64")]]),e.const("CONTRACT_COST_COUNT_LIMIT",1024),e.typedef("ContractCostParams",e.varArray(e.lookup("ContractCostParamEntry"),e.lookup("CONTRACT_COST_COUNT_LIMIT"))),e.enum("ConfigSettingId",{configSettingContractMaxSizeBytes:0,configSettingContractComputeV0:1,configSettingContractLedgerCostV0:2,configSettingContractHistoricalDataV0:3,configSettingContractEventsV0:4,configSettingContractBandwidthV0:5,configSettingContractCostParamsCpuInstructions:6,configSettingContractCostParamsMemoryBytes:7,configSettingContractDataKeySizeBytes:8,configSettingContractDataEntrySizeBytes:9,configSettingStateArchival:10,configSettingContractExecutionLanes:11,configSettingBucketlistSizeWindow:12,configSettingEvictionIterator:13}),e.union("ConfigSettingEntry",{switchOn:e.lookup("ConfigSettingId"),switchName:"configSettingId",switches:[["configSettingContractMaxSizeBytes","contractMaxSizeBytes"],["configSettingContractComputeV0","contractCompute"],["configSettingContractLedgerCostV0","contractLedgerCost"],["configSettingContractHistoricalDataV0","contractHistoricalData"],["configSettingContractEventsV0","contractEvents"],["configSettingContractBandwidthV0","contractBandwidth"],["configSettingContractCostParamsCpuInstructions","contractCostParamsCpuInsns"],["configSettingContractCostParamsMemoryBytes","contractCostParamsMemBytes"],["configSettingContractDataKeySizeBytes","contractDataKeySizeBytes"],["configSettingContractDataEntrySizeBytes","contractDataEntrySizeBytes"],["configSettingStateArchival","stateArchivalSettings"],["configSettingContractExecutionLanes","contractExecutionLanes"],["configSettingBucketlistSizeWindow","bucketListSizeWindow"],["configSettingEvictionIterator","evictionIterator"]],arms:{contractMaxSizeBytes:e.lookup("Uint32"),contractCompute:e.lookup("ConfigSettingContractComputeV0"),contractLedgerCost:e.lookup("ConfigSettingContractLedgerCostV0"),contractHistoricalData:e.lookup("ConfigSettingContractHistoricalDataV0"),contractEvents:e.lookup("ConfigSettingContractEventsV0"),contractBandwidth:e.lookup("ConfigSettingContractBandwidthV0"),contractCostParamsCpuInsns:e.lookup("ContractCostParams"),contractCostParamsMemBytes:e.lookup("ContractCostParams"),contractDataKeySizeBytes:e.lookup("Uint32"),contractDataEntrySizeBytes:e.lookup("Uint32"),stateArchivalSettings:e.lookup("StateArchivalSettings"),contractExecutionLanes:e.lookup("ConfigSettingContractExecutionLanesV0"),bucketListSizeWindow:e.varArray(e.lookup("Uint64"),2147483647),evictionIterator:e.lookup("EvictionIterator")}})}));t.default=i},5578:(e,t,r)=>{"use strict";var n=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.LiquidityPoolFeeV18=void 0,t.getLiquidityPoolId=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("constant_product"!==e)throw new Error("liquidityPoolType is invalid");var r=t.assetA,o=t.assetB,c=t.fee;if(!(r&&r instanceof a.Asset))throw new Error("assetA is invalid");if(!(o&&o instanceof a.Asset))throw new Error("assetB is invalid");if(!c||c!==l)throw new Error("fee is invalid");if(-1!==a.Asset.compare(r,o))throw new Error("Assets are not in lexicographic order");var u=i.default.LiquidityPoolType.liquidityPoolConstantProduct().toXDR(),d=new i.default.LiquidityPoolConstantProductParameters({assetA:r.toXDRObject(),assetB:o.toXDRObject(),fee:c}).toXDR(),h=n.concat([u,d]);return(0,s.hash)(h)};var o,i=(o=r(1918))&&o.__esModule?o:{default:o},a=r(1764),s=r(9152),l=t.LiquidityPoolFeeV18=30},9152:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hash=function(e){var t=new n.sha256;return t.update(e,"utf8"),t.digest()};var n=r(2802)},356:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={xdr:!0,cereal:!0,hash:!0,sign:!0,verify:!0,FastSigning:!0,getLiquidityPoolId:!0,LiquidityPoolFeeV18:!0,Keypair:!0,UnsignedHyper:!0,Hyper:!0,TransactionBase:!0,Transaction:!0,FeeBumpTransaction:!0,TransactionBuilder:!0,TimeoutInfinite:!0,BASE_FEE:!0,Asset:!0,LiquidityPoolAsset:!0,LiquidityPoolId:!0,Operation:!0,AuthRequiredFlag:!0,AuthRevocableFlag:!0,AuthImmutableFlag:!0,AuthClawbackEnabledFlag:!0,Account:!0,MuxedAccount:!0,Claimant:!0,Networks:!0,StrKey:!0,SignerKey:!0,Soroban:!0,decodeAddressToMuxedAccount:!0,encodeMuxedAccountToAddress:!0,extractBaseAddress:!0,encodeMuxedAccount:!0,Contract:!0,Address:!0};Object.defineProperty(t,"Account",{enumerable:!0,get:function(){return x.Account}}),Object.defineProperty(t,"Address",{enumerable:!0,get:function(){return j.Address}}),Object.defineProperty(t,"Asset",{enumerable:!0,get:function(){return m.Asset}}),Object.defineProperty(t,"AuthClawbackEnabledFlag",{enumerable:!0,get:function(){return v.AuthClawbackEnabledFlag}}),Object.defineProperty(t,"AuthImmutableFlag",{enumerable:!0,get:function(){return v.AuthImmutableFlag}}),Object.defineProperty(t,"AuthRequiredFlag",{enumerable:!0,get:function(){return v.AuthRequiredFlag}}),Object.defineProperty(t,"AuthRevocableFlag",{enumerable:!0,get:function(){return v.AuthRevocableFlag}}),Object.defineProperty(t,"BASE_FEE",{enumerable:!0,get:function(){return f.BASE_FEE}}),Object.defineProperty(t,"Claimant",{enumerable:!0,get:function(){return w.Claimant}}),Object.defineProperty(t,"Contract",{enumerable:!0,get:function(){return A.Contract}}),Object.defineProperty(t,"FastSigning",{enumerable:!0,get:function(){return s.FastSigning}}),Object.defineProperty(t,"FeeBumpTransaction",{enumerable:!0,get:function(){return p.FeeBumpTransaction}}),Object.defineProperty(t,"Hyper",{enumerable:!0,get:function(){return u.Hyper}}),Object.defineProperty(t,"Keypair",{enumerable:!0,get:function(){return c.Keypair}}),Object.defineProperty(t,"LiquidityPoolAsset",{enumerable:!0,get:function(){return g.LiquidityPoolAsset}}),Object.defineProperty(t,"LiquidityPoolFeeV18",{enumerable:!0,get:function(){return l.LiquidityPoolFeeV18}}),Object.defineProperty(t,"LiquidityPoolId",{enumerable:!0,get:function(){return y.LiquidityPoolId}}),Object.defineProperty(t,"MuxedAccount",{enumerable:!0,get:function(){return _.MuxedAccount}}),Object.defineProperty(t,"Networks",{enumerable:!0,get:function(){return S.Networks}}),Object.defineProperty(t,"Operation",{enumerable:!0,get:function(){return v.Operation}}),Object.defineProperty(t,"SignerKey",{enumerable:!0,get:function(){return T.SignerKey}}),Object.defineProperty(t,"Soroban",{enumerable:!0,get:function(){return E.Soroban}}),Object.defineProperty(t,"StrKey",{enumerable:!0,get:function(){return k.StrKey}}),Object.defineProperty(t,"TimeoutInfinite",{enumerable:!0,get:function(){return f.TimeoutInfinite}}),Object.defineProperty(t,"Transaction",{enumerable:!0,get:function(){return h.Transaction}}),Object.defineProperty(t,"TransactionBase",{enumerable:!0,get:function(){return d.TransactionBase}}),Object.defineProperty(t,"TransactionBuilder",{enumerable:!0,get:function(){return f.TransactionBuilder}}),Object.defineProperty(t,"UnsignedHyper",{enumerable:!0,get:function(){return u.UnsignedHyper}}),Object.defineProperty(t,"cereal",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"decodeAddressToMuxedAccount",{enumerable:!0,get:function(){return C.decodeAddressToMuxedAccount}}),t.default=void 0,Object.defineProperty(t,"encodeMuxedAccount",{enumerable:!0,get:function(){return C.encodeMuxedAccount}}),Object.defineProperty(t,"encodeMuxedAccountToAddress",{enumerable:!0,get:function(){return C.encodeMuxedAccountToAddress}}),Object.defineProperty(t,"extractBaseAddress",{enumerable:!0,get:function(){return C.extractBaseAddress}}),Object.defineProperty(t,"getLiquidityPoolId",{enumerable:!0,get:function(){return l.getLiquidityPoolId}}),Object.defineProperty(t,"hash",{enumerable:!0,get:function(){return a.hash}}),Object.defineProperty(t,"sign",{enumerable:!0,get:function(){return s.sign}}),Object.defineProperty(t,"verify",{enumerable:!0,get:function(){return s.verify}}),Object.defineProperty(t,"xdr",{enumerable:!0,get:function(){return o.default}});var o=F(r(1918)),i=F(r(3335)),a=r(9152),s=r(15),l=r(5578),c=r(6691),u=r(3740),d=r(3758),h=r(380),p=r(9260),f=r(6396),m=r(1764),g=r(2262),y=r(9353),v=r(7237),b=r(4172);Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===b[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}}))}));var x=r(2135),_=r(2243),w=r(1387),S=r(6202),k=r(7120),T=r(225),E=r(4062),C=r(6160),A=r(7452),j=r(1180),P=r(8549);Object.keys(P).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===P[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return P[e]}}))}));var I=r(7177);Object.keys(I).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===I[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return I[e]}}))}));var O=r(3919);Object.keys(O).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===O[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return O[e]}}))}));var M=r(4842);Object.keys(M).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===M[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return M[e]}}))}));var R=r(5328);Object.keys(R).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===R[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return R[e]}}))}));var L=r(3564);function F(e){return e&&e.__esModule?e:{default:e}}Object.keys(L).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===L[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return L[e]}}))})),t.default=e.exports},3564:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildInvocationTree=function e(t){var r=t.function(),a={},s=r.value();switch(r.switch().value){case 0:a.type="execute",a.args={source:o.Address.fromScAddress(s.contractAddress()).toString(),function:s.functionName(),args:s.args().map((function(e){return(0,i.scValToNative)(e)}))};break;case 1:a.type="create",a.args={};var l=[s.executable(),s.contractIdPreimage()],c=l[0],u=l[1];if(!!c.switch().value!=!!u.switch().value)throw new Error("creation function appears invalid: ".concat(JSON.stringify(s)," (should be wasm+address or token+asset)"));switch(c.switch().value){case 0:var d=u.fromAddress();a.args.type="wasm",a.args.wasm={salt:d.salt().toString("hex"),hash:c.wasmHash().toString("hex"),address:o.Address.fromScAddress(d.address()).toString()};break;case 1:a.args.type="sac",a.args.asset=n.Asset.fromOperation(u.fromAsset()).toString();break;default:throw new Error("unknown creation type: ".concat(JSON.stringify(c)))}break;default:throw new Error("unknown invocation type (".concat(r.switch(),"): ").concat(JSON.stringify(r)))}return a.invocations=t.subInvocations().map((function(t){return e(t)})),a},t.walkInvocationTree=function(e,t){a(e,1,t)};var n=r(1764),o=r(1180),i=r(7177);function a(e,t,r,n){!1!==r(e,t,n)&&e.subInvocations().forEach((function(n){return a(n,t+1,r,e)}))}},3335:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(3740),o={XdrWriter:n.XdrWriter,XdrReader:n.XdrReader};t.default=o},6691:(e,t,r)=>{"use strict";var n=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Keypair=void 0;var o=c(r(4940)),i=r(15),a=r(7120),s=r(9152),l=c(r(1918));function c(e){return e&&e.__esModule?e:{default:e}}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function h(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}t.Keypair=function(){return e=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"ed25519"!==t.type)throw new Error("Invalid keys type");if(this.type=t.type,t.secretKey){if(t.secretKey=n.from(t.secretKey),32!==t.secretKey.length)throw new Error("secretKey length is invalid");if(this._secretSeed=t.secretKey,this._publicKey=(0,i.generate)(t.secretKey),this._secretKey=n.concat([t.secretKey,this._publicKey]),t.publicKey&&!this._publicKey.equals(n.from(t.publicKey)))throw new Error("secretKey does not match publicKey")}else if(this._publicKey=n.from(t.publicKey),32!==this._publicKey.length)throw new Error("publicKey length is invalid")},r=[{key:"fromSecret",value:function(e){var t=a.StrKey.decodeEd25519SecretSeed(e);return this.fromRawEd25519Seed(t)}},{key:"fromRawEd25519Seed",value:function(e){return new this({type:"ed25519",secretKey:e})}},{key:"master",value:function(e){if(!e)throw new Error("No network selected. Please pass a network argument, e.g. `Keypair.master(Networks.PUBLIC)`.");return this.fromRawEd25519Seed((0,s.hash)(e))}},{key:"fromPublicKey",value:function(e){if(32!==(e=a.StrKey.decodeEd25519PublicKey(e)).length)throw new Error("Invalid Stellar public key");return new this({type:"ed25519",publicKey:e})}},{key:"random",value:function(){var e=o.default.randomBytes(32);return this.fromRawEd25519Seed(e)}}],(t=[{key:"xdrAccountId",value:function(){return new l.default.AccountId.publicKeyTypeEd25519(this._publicKey)}},{key:"xdrPublicKey",value:function(){return new l.default.PublicKey.publicKeyTypeEd25519(this._publicKey)}},{key:"xdrMuxedAccount",value:function(e){if(void 0!==e){if("string"!=typeof e)throw new TypeError("expected string for ID, got ".concat(u(e)));return l.default.MuxedAccount.keyTypeMuxedEd25519(new l.default.MuxedAccountMed25519({id:l.default.Uint64.fromString(e),ed25519:this._publicKey}))}return new l.default.MuxedAccount.keyTypeEd25519(this._publicKey)}},{key:"rawPublicKey",value:function(){return this._publicKey}},{key:"signatureHint",value:function(){var e=this.xdrAccountId().toXDR();return e.slice(e.length-4)}},{key:"publicKey",value:function(){return a.StrKey.encodeEd25519PublicKey(this._publicKey)}},{key:"secret",value:function(){if(!this._secretSeed)throw new Error("no secret key available");if("ed25519"===this.type)return a.StrKey.encodeEd25519SecretSeed(this._secretSeed);throw new Error("Invalid Keypair type")}},{key:"rawSecretKey",value:function(){return this._secretSeed}},{key:"canSign",value:function(){return!!this._secretKey}},{key:"sign",value:function(e){if(!this.canSign())throw new Error("cannot sign: no secret key available");return(0,i.sign)(e,this._secretKey)}},{key:"verify",value:function(e,t){return(0,i.verify)(e,t,this._publicKey)}},{key:"signDecorated",value:function(e){var t=this.sign(e),r=this.signatureHint();return new l.default.DecoratedSignature({hint:r,signature:t})}},{key:"signPayloadDecorated",value:function(e){var t=this.sign(e),r=this.signatureHint(),o=n.from(e.slice(-4));return o.length<4&&(o=n.concat([o,n.alloc(4-e.length,0)])),new l.default.DecoratedSignature({hint:o.map((function(e,t){return e^r[t]})),signature:t})}}])&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}()},2262:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LiquidityPoolAsset=void 0;var n,o=(n=r(1918))&&n.__esModule?n:{default:n},i=r(1764),a=r(5578);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function h(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}t.LiquidityPoolAsset=function(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,r,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(t&&t instanceof i.Asset))throw new Error("assetA is invalid");if(!(r&&r instanceof i.Asset))throw new Error("assetB is invalid");if(-1!==i.Asset.compare(t,r))throw new Error("Assets are not in lexicographic order");if(!n||n!==a.LiquidityPoolFeeV18)throw new Error("fee is invalid");this.assetA=t,this.assetB=r,this.fee=n}),[{key:"toXDRObject",value:function(){var e=new o.default.LiquidityPoolConstantProductParameters({assetA:this.assetA.toXDRObject(),assetB:this.assetB.toXDRObject(),fee:this.fee}),t=new o.default.LiquidityPoolParameters("liquidityPoolConstantProduct",e);return new o.default.ChangeTrustAsset("assetTypePoolShare",t)}},{key:"getLiquidityPoolParameters",value:function(){return c(c({},this),{},{assetA:this.assetA,assetB:this.assetB,fee:this.fee})}},{key:"getAssetType",value:function(){return"liquidity_pool_shares"}},{key:"equals",value:function(e){return this.assetA.equals(e.assetA)&&this.assetB.equals(e.assetB)&&this.fee===e.fee}},{key:"toString",value:function(){var e=(0,a.getLiquidityPoolId)("constant_product",this.getLiquidityPoolParameters()).toString("hex");return"liquidity_pool:".concat(e)}}],[{key:"fromOperation",value:function(e){var t=e.switch();if(t===o.default.AssetType.assetTypePoolShare()){var r=e.liquidityPool().constantProduct();return new this(i.Asset.fromOperation(r.assetA()),i.Asset.fromOperation(r.assetB()),r.fee())}throw new Error("Invalid asset type: ".concat(t.name))}}])},9353:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LiquidityPoolId=void 0;var n,o=(n=r(1918))&&n.__esModule?n:{default:n};function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}t.LiquidityPoolId=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("liquidityPoolId cannot be empty");if(!/^[a-f0-9]{64}$/.test(t))throw new Error("Liquidity pool ID is not a valid hash");this.liquidityPoolId=t}),[{key:"toXDRObject",value:function(){var e=o.default.PoolId.fromXDR(this.liquidityPoolId,"hex");return new o.default.TrustLineAsset("assetTypePoolShare",e)}},{key:"getLiquidityPoolId",value:function(){return String(this.liquidityPoolId)}},{key:"getAssetType",value:function(){return"liquidity_pool_shares"}},{key:"equals",value:function(e){return this.liquidityPoolId===e.getLiquidityPoolId()}},{key:"toString",value:function(){return"liquidity_pool:".concat(this.liquidityPoolId)}}],[{key:"fromOperation",value:function(e){var t=e.switch();if(t===o.default.AssetType.assetTypePoolShare())return new this(e.liquidityPoolId().toString("hex"));throw new Error("Invalid asset type: ".concat(t.name))}}])},4172:(e,t,r)=>{"use strict";var n=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.MemoText=t.MemoReturn=t.MemoNone=t.MemoID=t.MemoHash=t.Memo=void 0;var o=r(3740),i=s(r(1242)),a=s(r(1918));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var d=t.MemoNone="none",h=t.MemoID="id",p=t.MemoText="text",f=t.MemoHash="hash",m=t.MemoReturn="return";t.Memo=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._type=t,this._value=r,this._type){case d:break;case h:e._validateIdValue(r);break;case p:e._validateTextValue(r);break;case f:case m:e._validateHashValue(r),"string"==typeof r&&(this._value=n.from(r,"hex"));break;default:throw new Error("Invalid memo type")}}return t=e,s=[{key:"_validateIdValue",value:function(e){var t,r=new Error("Expects a int64 as a string. Got ".concat(e));if("string"!=typeof e)throw r;try{t=new i.default(e)}catch(e){throw r}if(!t.isFinite())throw r;if(t.isNaN())throw r}},{key:"_validateTextValue",value:function(e){if(!a.default.Memo.armTypeForArm("text").isValid(e))throw new Error("Expects string, array or buffer, max 28 bytes")}},{key:"_validateHashValue",value:function(e){var t,r=new Error("Expects a 32 byte hash value or hex encoded string. Got ".concat(e));if(null==e)throw r;if("string"==typeof e){if(!/^[0-9A-Fa-f]{64}$/g.test(e))throw r;t=n.from(e,"hex")}else{if(!n.isBuffer(e))throw r;t=n.from(e)}if(!t.length||32!==t.length)throw r}},{key:"none",value:function(){return new e(d)}},{key:"text",value:function(t){return new e(p,t)}},{key:"id",value:function(t){return new e(h,t)}},{key:"hash",value:function(t){return new e(f,t)}},{key:"return",value:function(t){return new e(m,t)}},{key:"fromXDRObject",value:function(t){switch(t.arm()){case"id":return e.id(t.value().toString());case"text":return e.text(t.value());case"hash":return e.hash(t.value());case"retHash":return e.return(t.value())}if(void 0===t.value())return e.none();throw new Error("Unknown type")}}],(r=[{key:"type",get:function(){return this._type},set:function(e){throw new Error("Memo is immutable")}},{key:"value",get:function(){switch(this._type){case d:return null;case h:case p:return this._value;case f:case m:return n.from(this._value);default:throw new Error("Invalid memo type")}},set:function(e){throw new Error("Memo is immutable")}},{key:"toXDRObject",value:function(){switch(this._type){case d:return a.default.Memo.memoNone();case h:return a.default.Memo.memoId(o.UnsignedHyper.fromString(this._value));case p:return a.default.Memo.memoText(this._value);case f:return a.default.Memo.memoHash(this._value);case m:return a.default.Memo.memoReturn(this._value);default:return null}}}])&&c(t.prototype,r),s&&c(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,s}()},2243:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MuxedAccount=void 0;var n,o=(n=r(1918))&&n.__esModule?n:{default:n},i=r(2135),a=r(7120),s=r(6160);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}t.MuxedAccount=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.accountId();if(!a.StrKey.isValidEd25519PublicKey(n))throw new Error("accountId is invalid");this.account=t,this._muxedXdr=(0,s.encodeMuxedAccount)(n,r),this._mAddress=(0,s.encodeMuxedAccountToAddress)(this._muxedXdr),this._id=r}return function(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,[{key:"baseAccount",value:function(){return this.account}},{key:"accountId",value:function(){return this._mAddress}},{key:"id",value:function(){return this._id}},{key:"setId",value:function(e){if("string"!=typeof e)throw new Error("id should be a string representing a number (uint64)");return this._muxedXdr.med25519().id(o.default.Uint64.fromString(e)),this._mAddress=(0,s.encodeMuxedAccountToAddress)(this._muxedXdr),this._id=e,this}},{key:"sequenceNumber",value:function(){return this.account.sequenceNumber()}},{key:"incrementSequenceNumber",value:function(){return this.account.incrementSequenceNumber()}},{key:"toXDRObject",value:function(){return this._muxedXdr}},{key:"equals",value:function(e){return this.accountId()===e.accountId()}}],[{key:"fromAddress",value:function(t,r){var n=(0,s.decodeAddressToMuxedAccount)(t),o=(0,s.extractBaseAddress)(t),a=n.med25519().id().toString();return new e(new i.Account(o,r),a)}}])}()},6202:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Networks=void 0,t.Networks={PUBLIC:"Public Global Stellar Network ; September 2015",TESTNET:"Test SDF Network ; September 2015",FUTURENET:"Test SDF Future Network ; October 2022",SANDBOX:"Local Sandbox Stellar Network ; September 2022",STANDALONE:"Standalone Network ; February 2017"}},8549:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Int128",{enumerable:!0,get:function(){return a.Int128}}),Object.defineProperty(t,"Int256",{enumerable:!0,get:function(){return s.Int256}}),Object.defineProperty(t,"ScInt",{enumerable:!0,get:function(){return l.ScInt}}),Object.defineProperty(t,"Uint128",{enumerable:!0,get:function(){return o.Uint128}}),Object.defineProperty(t,"Uint256",{enumerable:!0,get:function(){return i.Uint256}}),Object.defineProperty(t,"XdrLargeInt",{enumerable:!0,get:function(){return n.XdrLargeInt}}),t.scValToBigInt=function(e){var t=n.XdrLargeInt.getType(e.switch().name);switch(e.switch().name){case"scvU32":case"scvI32":return BigInt(e.value());case"scvU64":case"scvI64":return new n.XdrLargeInt(t,e.value()).toBigInt();case"scvU128":case"scvI128":return new n.XdrLargeInt(t,[e.value().lo(),e.value().hi()]).toBigInt();case"scvU256":case"scvI256":return new n.XdrLargeInt(t,[e.value().loLo(),e.value().loHi(),e.value().hiLo(),e.value().hiHi()]).toBigInt();default:throw TypeError("expected integer type, got ".concat(e.switch()))}};var n=r(7429),o=r(6272),i=r(8672),a=r(5487),s=r(4063),l=r(3317)},5487:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Int128=void 0;var o=r(3740);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}function s(e,t,r){return t=c(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r))}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(l=function(){return!!e})()}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}(t.Int128=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return s(this,t,[r])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e),r=t,(n=[{key:"unsigned",get:function(){return!1}},{key:"size",get:function(){return 128}}])&&i(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o.LargeInt)).defineIntBoundaries()},4063:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Int256=void 0;var o=r(3740);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}function s(e,t,r){return t=c(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r))}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(l=function(){return!!e})()}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}(t.Int256=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return s(this,t,[r])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e),r=t,(n=[{key:"unsigned",get:function(){return!1}},{key:"size",get:function(){return 256}}])&&i(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o.LargeInt)).defineIntBoundaries()},3317:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ScInt=void 0;var o=r(7429);function i(e,t,r){return t=s(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,a()?Reflect.construct(t,r||[],s(e).constructor):t.apply(e,r))}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(a=function(){return!!e})()}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}t.ScInt=function(e){function t(e,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=e<0,a=null!==(n=null==r?void 0:r.type)&&void 0!==n?n:"";if(a.startsWith("u")&&o)throw TypeError("specified type ".concat(r.type," yet negative (").concat(e,")"));if(""===a){a=o?"i":"u";var s=function(e){var t,r=e.toString(2).length;return null!==(t=[64,128,256].find((function(e){return r<=e})))&&void 0!==t?t:r}(e);switch(s){case 64:case 128:case 256:a+=s.toString();break;default:throw RangeError("expected 64/128/256 bits for input (".concat(e,"), got ").concat(s))}}return i(this,t,[a,e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(t,e),r=t,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(o.XdrLargeInt)},6272:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Uint128=void 0;var o=r(3740);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}function s(e,t,r){return t=c(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r))}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(l=function(){return!!e})()}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}(t.Uint128=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return s(this,t,[r])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e),r=t,(n=[{key:"unsigned",get:function(){return!0}},{key:"size",get:function(){return 128}}])&&i(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o.LargeInt)).defineIntBoundaries()},8672:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Uint256=void 0;var o=r(3740);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}function s(e,t,r){return t=c(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r))}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(l=function(){return!!e})()}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}(t.Uint256=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return s(this,t,[r])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e),r=t,(n=[{key:"unsigned",get:function(){return!0}},{key:"size",get:function(){return 256}}])&&i(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o.LargeInt)).defineIntBoundaries()},7429:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XdrLargeInt=void 0;var n,o=r(3740),i=r(6272),a=r(8672),s=r(5487),l=r(4063),c=(n=r(1918))&&n.__esModule?n:{default:n};function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function h(e,t,r){return(t=p(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}t.XdrLargeInt=function(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,r){switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"int",void 0),h(this,"type",void 0),r instanceof Array||(r=[r]),r=r.map((function(t){return"bigint"==typeof t?t:t instanceof e?t.toBigInt():BigInt(t)})),t){case"i64":this.int=new o.Hyper(r);break;case"i128":this.int=new s.Int128(r);break;case"i256":this.int=new l.Int256(r);break;case"u64":this.int=new o.UnsignedHyper(r);break;case"u128":this.int=new i.Uint128(r);break;case"u256":this.int=new a.Uint256(r);break;default:throw TypeError("invalid type: ".concat(t))}this.type=t}),[{key:"toNumber",value:function(){var e=this.int.toBigInt();if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)throw RangeError("value ".concat(e," not in range for Number ")+"[".concat(Number.MAX_SAFE_INTEGER,", ").concat(Number.MIN_SAFE_INTEGER,"]"));return Number(e)}},{key:"toBigInt",value:function(){return this.int.toBigInt()}},{key:"toI64",value:function(){this._sizeCheck(64);var e=this.toBigInt();if(BigInt.asIntN(64,e)!==e)throw RangeError("value too large for i64: ".concat(e));return c.default.ScVal.scvI64(new c.default.Int64(e))}},{key:"toU64",value:function(){return this._sizeCheck(64),c.default.ScVal.scvU64(new c.default.Uint64(BigInt.asUintN(64,this.toBigInt())))}},{key:"toI128",value:function(){this._sizeCheck(128);var e=this.int.toBigInt(),t=BigInt.asIntN(64,e>>64n),r=BigInt.asUintN(64,e);return c.default.ScVal.scvI128(new c.default.Int128Parts({hi:new c.default.Int64(t),lo:new c.default.Uint64(r)}))}},{key:"toU128",value:function(){this._sizeCheck(128);var e=this.int.toBigInt();return c.default.ScVal.scvU128(new c.default.UInt128Parts({hi:new c.default.Uint64(BigInt.asUintN(64,e>>64n)),lo:new c.default.Uint64(BigInt.asUintN(64,e))}))}},{key:"toI256",value:function(){var e=this.int.toBigInt(),t=BigInt.asIntN(64,e>>192n),r=BigInt.asUintN(64,e>>128n),n=BigInt.asUintN(64,e>>64n),o=BigInt.asUintN(64,e);return c.default.ScVal.scvI256(new c.default.Int256Parts({hiHi:new c.default.Int64(t),hiLo:new c.default.Uint64(r),loHi:new c.default.Uint64(n),loLo:new c.default.Uint64(o)}))}},{key:"toU256",value:function(){var e=this.int.toBigInt(),t=BigInt.asUintN(64,e>>192n),r=BigInt.asUintN(64,e>>128n),n=BigInt.asUintN(64,e>>64n),o=BigInt.asUintN(64,e);return c.default.ScVal.scvU256(new c.default.UInt256Parts({hiHi:new c.default.Uint64(t),hiLo:new c.default.Uint64(r),loHi:new c.default.Uint64(n),loLo:new c.default.Uint64(o)}))}},{key:"toScVal",value:function(){switch(this.type){case"i64":return this.toI64();case"i128":return this.toI128();case"i256":return this.toI256();case"u64":return this.toU64();case"u128":return this.toU128();case"u256":return this.toU256();default:throw TypeError("invalid type: ".concat(this.type))}}},{key:"valueOf",value:function(){return this.int.valueOf()}},{key:"toString",value:function(){return this.int.toString()}},{key:"toJSON",value:function(){return{value:this.toBigInt().toString(),type:this.type}}},{key:"_sizeCheck",value:function(e){if(this.int.size>e)throw RangeError("value too large for ".concat(e," bits (").concat(this.type,")"))}}],[{key:"isType",value:function(e){switch(e){case"i64":case"i128":case"i256":case"u64":case"u128":case"u256":return!0;default:return!1}}},{key:"getType",value:function(e){return e.slice(3).toLowerCase()}}])},7237:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Operation=t.AuthRevocableFlag=t.AuthRequiredFlag=t.AuthImmutableFlag=t.AuthClawbackEnabledFlag=void 0;var n=r(3740),o=g(r(1242)),i=r(645),a=r(4151),s=r(1764),l=r(2262),c=r(1387),u=r(7120),d=r(9353),h=g(r(1918)),p=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=y(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(7511)),f=r(6160);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function g(e){return e&&e.__esModule?e:{default:e}}function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function b(e){var t=function(e){if("object"!=y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}var x=1e7,_=(t.AuthRequiredFlag=1,t.AuthRevocableFlag=2,t.AuthImmutableFlag=4,t.AuthClawbackEnabledFlag=8,t.Operation=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"setSourceAccount",value:function(e,t){if(t.source)try{e.sourceAccount=(0,f.decodeAddressToMuxedAccount)(t.source)}catch(e){throw new Error("Source address is invalid")}}},{key:"fromXDRObject",value:function(e){var t={};e.sourceAccount()&&(t.source=(0,f.encodeMuxedAccountToAddress)(e.sourceAccount()));var r=e.body().value(),n=e.body().switch().name;switch(n){case"createAccount":t.type="createAccount",t.destination=w(r.destination()),t.startingBalance=this._fromXDRAmount(r.startingBalance());break;case"payment":t.type="payment",t.destination=(0,f.encodeMuxedAccountToAddress)(r.destination()),t.asset=s.Asset.fromOperation(r.asset()),t.amount=this._fromXDRAmount(r.amount());break;case"pathPaymentStrictReceive":t.type="pathPaymentStrictReceive",t.sendAsset=s.Asset.fromOperation(r.sendAsset()),t.sendMax=this._fromXDRAmount(r.sendMax()),t.destination=(0,f.encodeMuxedAccountToAddress)(r.destination()),t.destAsset=s.Asset.fromOperation(r.destAsset()),t.destAmount=this._fromXDRAmount(r.destAmount()),t.path=[];var o=r.path();Object.keys(o).forEach((function(e){t.path.push(s.Asset.fromOperation(o[e]))}));break;case"pathPaymentStrictSend":t.type="pathPaymentStrictSend",t.sendAsset=s.Asset.fromOperation(r.sendAsset()),t.sendAmount=this._fromXDRAmount(r.sendAmount()),t.destination=(0,f.encodeMuxedAccountToAddress)(r.destination()),t.destAsset=s.Asset.fromOperation(r.destAsset()),t.destMin=this._fromXDRAmount(r.destMin()),t.path=[];var a=r.path();Object.keys(a).forEach((function(e){t.path.push(s.Asset.fromOperation(a[e]))}));break;case"changeTrust":t.type="changeTrust",r.line().switch()===h.default.AssetType.assetTypePoolShare()?t.line=l.LiquidityPoolAsset.fromOperation(r.line()):t.line=s.Asset.fromOperation(r.line()),t.limit=this._fromXDRAmount(r.limit());break;case"allowTrust":t.type="allowTrust",t.trustor=w(r.trustor()),t.assetCode=r.asset().value().toString(),t.assetCode=(0,i.trimEnd)(t.assetCode,"\0"),t.authorize=r.authorize();break;case"setOptions":if(t.type="setOptions",r.inflationDest()&&(t.inflationDest=w(r.inflationDest())),t.clearFlags=r.clearFlags(),t.setFlags=r.setFlags(),t.masterWeight=r.masterWeight(),t.lowThreshold=r.lowThreshold(),t.medThreshold=r.medThreshold(),t.highThreshold=r.highThreshold(),t.homeDomain=void 0!==r.homeDomain()?r.homeDomain().toString("ascii"):void 0,r.signer()){var p={},m=r.signer().key().arm();if("ed25519"===m)p.ed25519PublicKey=w(r.signer().key());else if("preAuthTx"===m)p.preAuthTx=r.signer().key().preAuthTx();else if("hashX"===m)p.sha256Hash=r.signer().key().hashX();else if("ed25519SignedPayload"===m){var g=r.signer().key().ed25519SignedPayload();p.ed25519SignedPayload=u.StrKey.encodeSignedPayload(g.toXDR())}p.weight=r.signer().weight(),t.signer=p}break;case"manageOffer":case"manageSellOffer":t.type="manageSellOffer",t.selling=s.Asset.fromOperation(r.selling()),t.buying=s.Asset.fromOperation(r.buying()),t.amount=this._fromXDRAmount(r.amount()),t.price=this._fromXDRPrice(r.price()),t.offerId=r.offerId().toString();break;case"manageBuyOffer":t.type="manageBuyOffer",t.selling=s.Asset.fromOperation(r.selling()),t.buying=s.Asset.fromOperation(r.buying()),t.buyAmount=this._fromXDRAmount(r.buyAmount()),t.price=this._fromXDRPrice(r.price()),t.offerId=r.offerId().toString();break;case"createPassiveOffer":case"createPassiveSellOffer":t.type="createPassiveSellOffer",t.selling=s.Asset.fromOperation(r.selling()),t.buying=s.Asset.fromOperation(r.buying()),t.amount=this._fromXDRAmount(r.amount()),t.price=this._fromXDRPrice(r.price());break;case"accountMerge":t.type="accountMerge",t.destination=(0,f.encodeMuxedAccountToAddress)(r);break;case"manageData":t.type="manageData",t.name=r.dataName().toString("ascii"),t.value=r.dataValue();break;case"inflation":t.type="inflation";break;case"bumpSequence":t.type="bumpSequence",t.bumpTo=r.bumpTo().toString();break;case"createClaimableBalance":t.type="createClaimableBalance",t.asset=s.Asset.fromOperation(r.asset()),t.amount=this._fromXDRAmount(r.amount()),t.claimants=[],r.claimants().forEach((function(e){t.claimants.push(c.Claimant.fromXDR(e))}));break;case"claimClaimableBalance":t.type="claimClaimableBalance",t.balanceId=r.toXDR("hex");break;case"beginSponsoringFutureReserves":t.type="beginSponsoringFutureReserves",t.sponsoredId=w(r.sponsoredId());break;case"endSponsoringFutureReserves":t.type="endSponsoringFutureReserves";break;case"revokeSponsorship":!function(e,t){switch(e.switch().name){case"revokeSponsorshipLedgerEntry":var r=e.ledgerKey();switch(r.switch().name){case h.default.LedgerEntryType.account().name:t.type="revokeAccountSponsorship",t.account=w(r.account().accountId());break;case h.default.LedgerEntryType.trustline().name:t.type="revokeTrustlineSponsorship",t.account=w(r.trustLine().accountId());var n=r.trustLine().asset();n.switch()===h.default.AssetType.assetTypePoolShare()?t.asset=d.LiquidityPoolId.fromOperation(n):t.asset=s.Asset.fromOperation(n);break;case h.default.LedgerEntryType.offer().name:t.type="revokeOfferSponsorship",t.seller=w(r.offer().sellerId()),t.offerId=r.offer().offerId().toString();break;case h.default.LedgerEntryType.data().name:t.type="revokeDataSponsorship",t.account=w(r.data().accountId()),t.name=r.data().dataName().toString("ascii");break;case h.default.LedgerEntryType.claimableBalance().name:t.type="revokeClaimableBalanceSponsorship",t.balanceId=r.claimableBalance().balanceId().toXDR("hex");break;case h.default.LedgerEntryType.liquidityPool().name:t.type="revokeLiquidityPoolSponsorship",t.liquidityPoolId=r.liquidityPool().liquidityPoolId().toString("hex");break;default:throw new Error("Unknown ledgerKey: ".concat(e.switch().name))}break;case"revokeSponsorshipSigner":t.type="revokeSignerSponsorship",t.account=w(e.signer().accountId()),t.signer=function(e){var t={};switch(e.switch().name){case h.default.SignerKeyType.signerKeyTypeEd25519().name:t.ed25519PublicKey=u.StrKey.encodeEd25519PublicKey(e.ed25519());break;case h.default.SignerKeyType.signerKeyTypePreAuthTx().name:t.preAuthTx=e.preAuthTx().toString("hex");break;case h.default.SignerKeyType.signerKeyTypeHashX().name:t.sha256Hash=e.hashX().toString("hex");break;default:throw new Error("Unknown signerKey: ".concat(e.switch().name))}return t}(e.signer().signerKey());break;default:throw new Error("Unknown revokeSponsorship: ".concat(e.switch().name))}}(r,t);break;case"clawback":t.type="clawback",t.amount=this._fromXDRAmount(r.amount()),t.from=(0,f.encodeMuxedAccountToAddress)(r.from()),t.asset=s.Asset.fromOperation(r.asset());break;case"clawbackClaimableBalance":t.type="clawbackClaimableBalance",t.balanceId=r.toXDR("hex");break;case"setTrustLineFlags":t.type="setTrustLineFlags",t.asset=s.Asset.fromOperation(r.asset()),t.trustor=w(r.trustor());var y=r.clearFlags(),v=r.setFlags(),b={authorized:h.default.TrustLineFlags.authorizedFlag(),authorizedToMaintainLiabilities:h.default.TrustLineFlags.authorizedToMaintainLiabilitiesFlag(),clawbackEnabled:h.default.TrustLineFlags.trustlineClawbackEnabledFlag()};t.flags={},Object.keys(b).forEach((function(e){var r;t.flags[e]=(r=b[e].value,!!(v&r)||!(y&r)&&void 0)}));break;case"liquidityPoolDeposit":t.type="liquidityPoolDeposit",t.liquidityPoolId=r.liquidityPoolId().toString("hex"),t.maxAmountA=this._fromXDRAmount(r.maxAmountA()),t.maxAmountB=this._fromXDRAmount(r.maxAmountB()),t.minPrice=this._fromXDRPrice(r.minPrice()),t.maxPrice=this._fromXDRPrice(r.maxPrice());break;case"liquidityPoolWithdraw":t.type="liquidityPoolWithdraw",t.liquidityPoolId=r.liquidityPoolId().toString("hex"),t.amount=this._fromXDRAmount(r.amount()),t.minAmountA=this._fromXDRAmount(r.minAmountA()),t.minAmountB=this._fromXDRAmount(r.minAmountB());break;case"invokeHostFunction":var x;t.type="invokeHostFunction",t.func=r.hostFunction(),t.auth=null!==(x=r.auth())&&void 0!==x?x:[];break;case"extendFootprintTtl":t.type="extendFootprintTtl",t.extendTo=r.extendTo();break;case"restoreFootprint":t.type="restoreFootprint";break;default:throw new Error("Unknown operation: ".concat(n))}return t}},{key:"isValidAmount",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"!=typeof e)return!1;try{t=new o.default(e)}catch(e){return!1}return!(!r&&t.isZero()||t.isNegative()||t.times(x).gt(new o.default("9223372036854775807").toString())||t.decimalPlaces()>7||t.isNaN()||!t.isFinite())}},{key:"constructAmountRequirementsError",value:function(e){return"".concat(e," argument must be of type String, represent a positive number and have at most 7 digits after the decimal")}},{key:"_checkUnsignedIntValue",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(void 0!==t)switch("string"==typeof t&&(t=parseFloat(t)),!0){case"number"!=typeof t||!Number.isFinite(t)||t%1!=0:throw new Error("".concat(e," value is invalid"));case t<0:throw new Error("".concat(e," value must be unsigned"));case!r||r&&r(t,e):return t;default:throw new Error("".concat(e," value is invalid"))}}},{key:"_toXDRAmount",value:function(e){var t=new o.default(e).times(x);return n.Hyper.fromString(t.toString())}},{key:"_fromXDRAmount",value:function(e){return new o.default(e).div(x).toFixed(7)}},{key:"_fromXDRPrice",value:function(e){return new o.default(e.n()).div(new o.default(e.d())).toString()}},{key:"_toXDRPrice",value:function(e){var t;if(e.n&&e.d)t=new h.default.Price(e);else{var r=(0,a.best_r)(e);t=new h.default.Price({n:parseInt(r[0],10),d:parseInt(r[1],10)})}if(t.n()<0||t.d()<0)throw new Error("price must be positive");return t}}],t&&v(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}());function w(e){return u.StrKey.encodeEd25519PublicKey(e.ed25519())}_.accountMerge=p.accountMerge,_.allowTrust=p.allowTrust,_.bumpSequence=p.bumpSequence,_.changeTrust=p.changeTrust,_.createAccount=p.createAccount,_.createClaimableBalance=p.createClaimableBalance,_.claimClaimableBalance=p.claimClaimableBalance,_.clawbackClaimableBalance=p.clawbackClaimableBalance,_.createPassiveSellOffer=p.createPassiveSellOffer,_.inflation=p.inflation,_.manageData=p.manageData,_.manageSellOffer=p.manageSellOffer,_.manageBuyOffer=p.manageBuyOffer,_.pathPaymentStrictReceive=p.pathPaymentStrictReceive,_.pathPaymentStrictSend=p.pathPaymentStrictSend,_.payment=p.payment,_.setOptions=p.setOptions,_.beginSponsoringFutureReserves=p.beginSponsoringFutureReserves,_.endSponsoringFutureReserves=p.endSponsoringFutureReserves,_.revokeAccountSponsorship=p.revokeAccountSponsorship,_.revokeTrustlineSponsorship=p.revokeTrustlineSponsorship,_.revokeOfferSponsorship=p.revokeOfferSponsorship,_.revokeDataSponsorship=p.revokeDataSponsorship,_.revokeClaimableBalanceSponsorship=p.revokeClaimableBalanceSponsorship,_.revokeLiquidityPoolSponsorship=p.revokeLiquidityPoolSponsorship,_.revokeSignerSponsorship=p.revokeSignerSponsorship,_.clawback=p.clawback,_.setTrustLineFlags=p.setTrustLineFlags,_.liquidityPoolDeposit=p.liquidityPoolDeposit,_.liquidityPoolWithdraw=p.liquidityPoolWithdraw,_.invokeHostFunction=p.invokeHostFunction,_.extendFootprintTtl=p.extendFootprintTtl,_.restoreFootprint=p.restoreFootprint,_.createStellarAssetContract=p.createStellarAssetContract,_.invokeContractFunction=p.invokeContractFunction,_.createCustomContract=p.createCustomContract,_.uploadContractWasm=p.uploadContractWasm},4295:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.accountMerge=function(e){var t={};try{t.body=o.default.OperationBody.accountMerge((0,i.decodeAddressToMuxedAccount)(e.destination))}catch(e){throw new Error("destination is invalid")}return this.setSourceAccount(t,e),new o.default.Operation(t)};var n,o=(n=r(1918))&&n.__esModule?n:{default:n},i=r(6160)},3683:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allowTrust=function(e){if(!a.StrKey.isValidEd25519PublicKey(e.trustor))throw new Error("trustor is invalid");var t={};if(t.trustor=i.Keypair.fromPublicKey(e.trustor).xdrAccountId(),e.assetCode.length<=4){var r=e.assetCode.padEnd(4,"\0");t.asset=o.default.AssetCode.assetTypeCreditAlphanum4(r)}else{if(!(e.assetCode.length<=12))throw new Error("Asset code must be 12 characters at max.");var n=e.assetCode.padEnd(12,"\0");t.asset=o.default.AssetCode.assetTypeCreditAlphanum12(n)}"boolean"==typeof e.authorize?e.authorize?t.authorize=o.default.TrustLineFlags.authorizedFlag().value:t.authorize=0:t.authorize=e.authorize;var s=new o.default.AllowTrustOp(t),l={};return l.body=o.default.OperationBody.allowTrust(s),this.setSourceAccount(l,e),new o.default.Operation(l)};var n,o=(n=r(1918))&&n.__esModule?n:{default:n},i=r(6691),a=r(7120)},7505:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.beginSponsoringFutureReserves=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!i.StrKey.isValidEd25519PublicKey(e.sponsoredId))throw new Error("sponsoredId is invalid");var t=new o.default.BeginSponsoringFutureReservesOp({sponsoredId:a.Keypair.fromPublicKey(e.sponsoredId).xdrAccountId()}),r={};return r.body=o.default.OperationBody.beginSponsoringFutureReserves(t),this.setSourceAccount(r,e),new o.default.Operation(r)};var n,o=(n=r(1918))&&n.__esModule?n:{default:n},i=r(7120),a=r(6691)},6183:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bumpSequence=function(e){var t={};if("string"!=typeof e.bumpTo)throw new Error("bumpTo must be a string");try{new o.default(e.bumpTo)}catch(e){throw new Error("bumpTo must be a stringified number")}t.bumpTo=n.Hyper.fromString(e.bumpTo);var r=new i.default.BumpSequenceOp(t),a={};return a.body=i.default.OperationBody.bumpSequence(r),this.setSourceAccount(a,e),new i.default.Operation(a)};var n=r(3740),o=a(r(1242)),i=a(r(1918));function a(e){return e&&e.__esModule?e:{default:e}}},2810:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeTrust=function(e){var t={};if(e.asset instanceof a.Asset)t.line=e.asset.toChangeTrustXDRObject();else{if(!(e.asset instanceof s.LiquidityPoolAsset))throw new TypeError("asset must be Asset or LiquidityPoolAsset");t.line=e.asset.toXDRObject()}if(void 0!==e.limit&&!this.isValidAmount(e.limit,!0))throw new TypeError(this.constructAmountRequirementsError("limit"));e.limit?t.limit=this._toXDRAmount(e.limit):t.limit=n.Hyper.fromString(new o.default(c).toString()),e.source&&(t.source=e.source.masterKeypair);var r=new i.default.ChangeTrustOp(t),l={};return l.body=i.default.OperationBody.changeTrust(r),this.setSourceAccount(l,e),new i.default.Operation(l)};var n=r(3740),o=l(r(1242)),i=l(r(1918)),a=r(1764),s=r(2262);function l(e){return e&&e.__esModule?e:{default:e}}var c="9223372036854775807"},7239:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.claimClaimableBalance=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(e.balanceId);var t={};t.balanceId=o.default.ClaimableBalanceId.fromXDR(e.balanceId,"hex");var r=new o.default.ClaimClaimableBalanceOp(t),n={};return n.body=o.default.OperationBody.claimClaimableBalance(r),this.setSourceAccount(n,e),new o.default.Operation(n)},t.validateClaimableBalanceId=i;var n,o=(n=r(1918))&&n.__esModule?n:{default:n};function i(e){if("string"!=typeof e||72!==e.length)throw new Error("must provide a valid claimable balance id")}},7651:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clawback=function(e){var t={};if(!this.isValidAmount(e.amount))throw new TypeError(this.constructAmountRequirementsError("amount"));t.amount=this._toXDRAmount(e.amount),t.asset=e.asset.toXDRObject();try{t.from=(0,i.decodeAddressToMuxedAccount)(e.from)}catch(e){throw new Error("from address is invalid")}var r={body:o.default.OperationBody.clawback(new o.default.ClawbackOp(t))};return this.setSourceAccount(r,e),new o.default.Operation(r)};var n,o=(n=r(1918))&&n.__esModule?n:{default:n},i=r(6160)},2203:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clawbackClaimableBalance=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.validateClaimableBalanceId)(e.balanceId);var t={balanceId:o.default.ClaimableBalanceId.fromXDR(e.balanceId,"hex")},r={body:o.default.OperationBody.clawbackClaimableBalance(new o.default.ClawbackClaimableBalanceOp(t))};return this.setSourceAccount(r,e),new o.default.Operation(r)};var n,o=(n=r(1918))&&n.__esModule?n:{default:n},i=r(7239)},2115:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAccount=function(e){if(!a.StrKey.isValidEd25519PublicKey(e.destination))throw new Error("destination is invalid");if(!this.isValidAmount(e.startingBalance,!0))throw new TypeError(this.constructAmountRequirementsError("startingBalance"));var t={};t.destination=i.Keypair.fromPublicKey(e.destination).xdrAccountId(),t.startingBalance=this._toXDRAmount(e.startingBalance);var r=new o.default.CreateAccountOp(t),n={};return n.body=o.default.OperationBody.createAccount(r),this.setSourceAccount(n,e),new o.default.Operation(n)};var n,o=(n=r(1918))&&n.__esModule?n:{default:n},i=r(6691),a=r(7120)},4831:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createClaimableBalance=function(e){if(!(e.asset instanceof i.Asset))throw new Error("must provide an asset for create claimable balance operation");if(!this.isValidAmount(e.amount))throw new TypeError(this.constructAmountRequirementsError("amount"));if(!Array.isArray(e.claimants)||0===e.claimants.length)throw new Error("must provide at least one claimant");var t={};t.asset=e.asset.toXDRObject(),t.amount=this._toXDRAmount(e.amount),t.claimants=Object.values(e.claimants).map((function(e){return e.toXDRObject()}));var r=new o.default.CreateClaimableBalanceOp(t),n={};return n.body=o.default.OperationBody.createClaimableBalance(r),this.setSourceAccount(n,e),new o.default.Operation(n)};var n,o=(n=r(1918))&&n.__esModule?n:{default:n},i=r(1764)},9073:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPassiveSellOffer=function(e){var t={};if(t.selling=e.selling.toXDRObject(),t.buying=e.buying.toXDRObject(),!this.isValidAmount(e.amount))throw new TypeError(this.constructAmountRequirementsError("amount"));if(t.amount=this._toXDRAmount(e.amount),void 0===e.price)throw new TypeError("price argument is required");t.price=this._toXDRPrice(e.price);var r=new o.default.CreatePassiveSellOfferOp(t),n={};return n.body=o.default.OperationBody.createPassiveSellOffer(r),this.setSourceAccount(n,e),new o.default.Operation(n)};var n,o=(n=r(1918))&&n.__esModule?n:{default:n}},721:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.endSponsoringFutureReserves=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return t.body=o.default.OperationBody.endSponsoringFutureReserves(),this.setSourceAccount(t,e),new o.default.Operation(t)};var n,o=(n=r(1918))&&n.__esModule?n:{default:n}},8752:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendFootprintTtl=function(e){var t;if((null!==(t=e.extendTo)&&void 0!==t?t:-1)<=0)throw new RangeError("extendTo has to be positive");var r=new o.default.ExtendFootprintTtlOp({ext:new o.default.ExtensionPoint(0),extendTo:e.extendTo}),n={body:o.default.OperationBody.extendFootprintTtl(r)};return this.setSourceAccount(n,e),new o.default.Operation(n)};var n,o=(n=r(1918))&&n.__esModule?n:{default:n}},7511:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"accountMerge",{enumerable:!0,get:function(){return i.accountMerge}}),Object.defineProperty(t,"allowTrust",{enumerable:!0,get:function(){return a.allowTrust}}),Object.defineProperty(t,"beginSponsoringFutureReserves",{enumerable:!0,get:function(){return x.beginSponsoringFutureReserves}}),Object.defineProperty(t,"bumpSequence",{enumerable:!0,get:function(){return s.bumpSequence}}),Object.defineProperty(t,"changeTrust",{enumerable:!0,get:function(){return l.changeTrust}}),Object.defineProperty(t,"claimClaimableBalance",{enumerable:!0,get:function(){return d.claimClaimableBalance}}),Object.defineProperty(t,"clawback",{enumerable:!0,get:function(){return S.clawback}}),Object.defineProperty(t,"clawbackClaimableBalance",{enumerable:!0,get:function(){return h.clawbackClaimableBalance}}),Object.defineProperty(t,"createAccount",{enumerable:!0,get:function(){return c.createAccount}}),Object.defineProperty(t,"createClaimableBalance",{enumerable:!0,get:function(){return u.createClaimableBalance}}),Object.defineProperty(t,"createCustomContract",{enumerable:!0,get:function(){return C.createCustomContract}}),Object.defineProperty(t,"createPassiveSellOffer",{enumerable:!0,get:function(){return o.createPassiveSellOffer}}),Object.defineProperty(t,"createStellarAssetContract",{enumerable:!0,get:function(){return C.createStellarAssetContract}}),Object.defineProperty(t,"endSponsoringFutureReserves",{enumerable:!0,get:function(){return _.endSponsoringFutureReserves}}),Object.defineProperty(t,"extendFootprintTtl",{enumerable:!0,get:function(){return A.extendFootprintTtl}}),Object.defineProperty(t,"inflation",{enumerable:!0,get:function(){return p.inflation}}),Object.defineProperty(t,"invokeContractFunction",{enumerable:!0,get:function(){return C.invokeContractFunction}}),Object.defineProperty(t,"invokeHostFunction",{enumerable:!0,get:function(){return C.invokeHostFunction}}),Object.defineProperty(t,"liquidityPoolDeposit",{enumerable:!0,get:function(){return T.liquidityPoolDeposit}}),Object.defineProperty(t,"liquidityPoolWithdraw",{enumerable:!0,get:function(){return E.liquidityPoolWithdraw}}),Object.defineProperty(t,"manageBuyOffer",{enumerable:!0,get:function(){return m.manageBuyOffer}}),Object.defineProperty(t,"manageData",{enumerable:!0,get:function(){return f.manageData}}),Object.defineProperty(t,"manageSellOffer",{enumerable:!0,get:function(){return n.manageSellOffer}}),Object.defineProperty(t,"pathPaymentStrictReceive",{enumerable:!0,get:function(){return g.pathPaymentStrictReceive}}),Object.defineProperty(t,"pathPaymentStrictSend",{enumerable:!0,get:function(){return y.pathPaymentStrictSend}}),Object.defineProperty(t,"payment",{enumerable:!0,get:function(){return v.payment}}),Object.defineProperty(t,"restoreFootprint",{enumerable:!0,get:function(){return j.restoreFootprint}}),Object.defineProperty(t,"revokeAccountSponsorship",{enumerable:!0,get:function(){return w.revokeAccountSponsorship}}),Object.defineProperty(t,"revokeClaimableBalanceSponsorship",{enumerable:!0,get:function(){return w.revokeClaimableBalanceSponsorship}}),Object.defineProperty(t,"revokeDataSponsorship",{enumerable:!0,get:function(){return w.revokeDataSponsorship}}),Object.defineProperty(t,"revokeLiquidityPoolSponsorship",{enumerable:!0,get:function(){return w.revokeLiquidityPoolSponsorship}}),Object.defineProperty(t,"revokeOfferSponsorship",{enumerable:!0,get:function(){return w.revokeOfferSponsorship}}),Object.defineProperty(t,"revokeSignerSponsorship",{enumerable:!0,get:function(){return w.revokeSignerSponsorship}}),Object.defineProperty(t,"revokeTrustlineSponsorship",{enumerable:!0,get:function(){return w.revokeTrustlineSponsorship}}),Object.defineProperty(t,"setOptions",{enumerable:!0,get:function(){return b.setOptions}}),Object.defineProperty(t,"setTrustLineFlags",{enumerable:!0,get:function(){return k.setTrustLineFlags}}),Object.defineProperty(t,"uploadContractWasm",{enumerable:!0,get:function(){return C.uploadContractWasm}});var n=r(862),o=r(9073),i=r(4295),a=r(3683),s=r(6183),l=r(2810),c=r(2115),u=r(4831),d=r(7239),h=r(2203),p=r(7421),f=r(1411),m=r(1922),g=r(2075),y=r(3874),v=r(3533),b=r(2018),x=r(7505),_=r(721),w=r(7790),S=r(7651),k=r(1804),T=r(9845),E=r(4737),C=r(4403),A=r(8752),j=r(149)},7421:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inflation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return t.body=o.default.OperationBody.inflation(),this.setSourceAccount(t,e),new o.default.Operation(t)};var n,o=(n=r(1918))&&n.__esModule?n:{default:n}},4403:(e,t,r)=>{"use strict";var n=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.createCustomContract=function(e){var t=n.from(e.salt||a.Keypair.random().xdrPublicKey().value());if(!e.wasmHash||32!==e.wasmHash.length)throw new TypeError("expected hash(contract WASM) in 'opts.wasmHash', got ".concat(e.wasmHash));if(32!==t.length)throw new TypeError("expected 32-byte salt in 'opts.salt', got ".concat(e.wasmHash));return this.invokeHostFunction({source:e.source,auth:e.auth,func:i.default.HostFunction.hostFunctionTypeCreateContract(new i.default.CreateContractArgs({executable:i.default.ContractExecutable.contractExecutableWasm(n.from(e.wasmHash)),contractIdPreimage:i.default.ContractIdPreimage.contractIdPreimageFromAddress(new i.default.ContractIdPreimageFromAddress({address:e.address.toScAddress(),salt:t}))}))})},t.createStellarAssetContract=function(e){var t,r=e.asset;if("string"==typeof r){var n=function(e){if(Array.isArray(e))return e}(t=r.split(":"))||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,n,o,i,a=[],s=!0,l=!1;try{for(o=(t=t.call(e)).next;!(s=(r=o.call(t)).done)&&(a.push(r.value),2!==a.length);s=!0);}catch(e){l=!0,n=e}finally{try{if(!s&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(l)throw n}}return a}}(t)||function(e){if(e){if("string"==typeof e)return c(e,2);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=n[0],a=n[1];r=new l.Asset(o,a)}if(!(r instanceof l.Asset))throw new TypeError("expected Asset in 'opts.asset', got ".concat(r));return this.invokeHostFunction({source:e.source,auth:e.auth,func:i.default.HostFunction.hostFunctionTypeCreateContract(new i.default.CreateContractArgs({executable:i.default.ContractExecutable.contractExecutableStellarAsset(),contractIdPreimage:i.default.ContractIdPreimage.contractIdPreimageFromAsset(r.toXDRObject())}))})},t.invokeContractFunction=function(e){var t=new s.Address(e.contract);if("contract"!==t._type)throw new TypeError("expected contract strkey instance, got ".concat(t));return this.invokeHostFunction({source:e.source,auth:e.auth,func:i.default.HostFunction.hostFunctionTypeInvokeContract(new i.default.InvokeContractArgs({contractAddress:t.toScAddress(),functionName:e.function,args:e.args}))})},t.invokeHostFunction=function(e){if(!e.func)throw new TypeError("host function invocation ('func') required (got ".concat(JSON.stringify(e),")"));var t=new i.default.InvokeHostFunctionOp({hostFunction:e.func,auth:e.auth||[]}),r={body:i.default.OperationBody.invokeHostFunction(t)};return this.setSourceAccount(r,e),new i.default.Operation(r)},t.uploadContractWasm=function(e){return this.invokeHostFunction({source:e.source,auth:e.auth,func:i.default.HostFunction.hostFunctionTypeUploadContractWasm(n.from(e.wasm))})};var o,i=(o=r(1918))&&o.__esModule?o:{default:o},a=r(6691),s=r(1180),l=r(1764);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}},9845:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.liquidityPoolDeposit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.liquidityPoolId,r=e.maxAmountA,n=e.maxAmountB,i=e.minPrice,a=e.maxPrice,s={};if(!t)throw new TypeError("liquidityPoolId argument is required");if(s.liquidityPoolId=o.default.PoolId.fromXDR(t,"hex"),!this.isValidAmount(r,!0))throw new TypeError(this.constructAmountRequirementsError("maxAmountA"));if(s.maxAmountA=this._toXDRAmount(r),!this.isValidAmount(n,!0))throw new TypeError(this.constructAmountRequirementsError("maxAmountB"));if(s.maxAmountB=this._toXDRAmount(n),void 0===i)throw new TypeError("minPrice argument is required");if(s.minPrice=this._toXDRPrice(i),void 0===a)throw new TypeError("maxPrice argument is required");s.maxPrice=this._toXDRPrice(a);var l=new o.default.LiquidityPoolDepositOp(s),c={body:o.default.OperationBody.liquidityPoolDeposit(l)};return this.setSourceAccount(c,e),new o.default.Operation(c)};var n,o=(n=r(1918))&&n.__esModule?n:{default:n}},4737:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.liquidityPoolWithdraw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};if(!e.liquidityPoolId)throw new TypeError("liquidityPoolId argument is required");if(t.liquidityPoolId=o.default.PoolId.fromXDR(e.liquidityPoolId,"hex"),!this.isValidAmount(e.amount))throw new TypeError(this.constructAmountRequirementsError("amount"));if(t.amount=this._toXDRAmount(e.amount),!this.isValidAmount(e.minAmountA,!0))throw new TypeError(this.constructAmountRequirementsError("minAmountA"));if(t.minAmountA=this._toXDRAmount(e.minAmountA),!this.isValidAmount(e.minAmountB,!0))throw new TypeError(this.constructAmountRequirementsError("minAmountB"));t.minAmountB=this._toXDRAmount(e.minAmountB);var r=new o.default.LiquidityPoolWithdrawOp(t),n={body:o.default.OperationBody.liquidityPoolWithdraw(r)};return this.setSourceAccount(n,e),new o.default.Operation(n)};var n,o=(n=r(1918))&&n.__esModule?n:{default:n}},1922:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.manageBuyOffer=function(e){var t={};if(t.selling=e.selling.toXDRObject(),t.buying=e.buying.toXDRObject(),!this.isValidAmount(e.buyAmount,!0))throw new TypeError(this.constructAmountRequirementsError("buyAmount"));if(t.buyAmount=this._toXDRAmount(e.buyAmount),void 0===e.price)throw new TypeError("price argument is required");t.price=this._toXDRPrice(e.price),void 0!==e.offerId?e.offerId=e.offerId.toString():e.offerId="0",t.offerId=o.Hyper.fromString(e.offerId);var r=new i.default.ManageBuyOfferOp(t),n={};return n.body=i.default.OperationBody.manageBuyOffer(r),this.setSourceAccount(n,e),new i.default.Operation(n)};var n,o=r(3740),i=(n=r(1918))&&n.__esModule?n:{default:n}},1411:(e,t,r)=>{"use strict";var n=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.manageData=function(e){var t={};if(!("string"==typeof e.name&&e.name.length<=64))throw new Error("name must be a string, up to 64 characters");if(t.dataName=e.name,"string"!=typeof e.value&&!n.isBuffer(e.value)&&null!==e.value)throw new Error("value must be a string, Buffer or null");if("string"==typeof e.value?t.dataValue=n.from(e.value):t.dataValue=e.value,null!==t.dataValue&&t.dataValue.length>64)throw new Error("value cannot be longer that 64 bytes");var r=new i.default.ManageDataOp(t),o={};return o.body=i.default.OperationBody.manageData(r),this.setSourceAccount(o,e),new i.default.Operation(o)};var o,i=(o=r(1918))&&o.__esModule?o:{default:o}},862:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.manageSellOffer=function(e){var t={};if(t.selling=e.selling.toXDRObject(),t.buying=e.buying.toXDRObject(),!this.isValidAmount(e.amount,!0))throw new TypeError(this.constructAmountRequirementsError("amount"));if(t.amount=this._toXDRAmount(e.amount),void 0===e.price)throw new TypeError("price argument is required");t.price=this._toXDRPrice(e.price),void 0!==e.offerId?e.offerId=e.offerId.toString():e.offerId="0",t.offerId=o.Hyper.fromString(e.offerId);var r=new i.default.ManageSellOfferOp(t),n={};return n.body=i.default.OperationBody.manageSellOffer(r),this.setSourceAccount(n,e),new i.default.Operation(n)};var n,o=r(3740),i=(n=r(1918))&&n.__esModule?n:{default:n}},2075:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pathPaymentStrictReceive=function(e){switch(!0){case!e.sendAsset:throw new Error("Must specify a send asset");case!this.isValidAmount(e.sendMax):throw new TypeError(this.constructAmountRequirementsError("sendMax"));case!e.destAsset:throw new Error("Must provide a destAsset for a payment operation");case!this.isValidAmount(e.destAmount):throw new TypeError(this.constructAmountRequirementsError("destAmount"))}var t={};t.sendAsset=e.sendAsset.toXDRObject(),t.sendMax=this._toXDRAmount(e.sendMax);try{t.destination=(0,i.decodeAddressToMuxedAccount)(e.destination)}catch(e){throw new Error("destination is invalid")}t.destAsset=e.destAsset.toXDRObject(),t.destAmount=this._toXDRAmount(e.destAmount);var r=e.path?e.path:[];t.path=r.map((function(e){return e.toXDRObject()}));var n=new o.default.PathPaymentStrictReceiveOp(t),a={};return a.body=o.default.OperationBody.pathPaymentStrictReceive(n),this.setSourceAccount(a,e),new o.default.Operation(a)};var n,o=(n=r(1918))&&n.__esModule?n:{default:n},i=r(6160)},3874:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pathPaymentStrictSend=function(e){switch(!0){case!e.sendAsset:throw new Error("Must specify a send asset");case!this.isValidAmount(e.sendAmount):throw new TypeError(this.constructAmountRequirementsError("sendAmount"));case!e.destAsset:throw new Error("Must provide a destAsset for a payment operation");case!this.isValidAmount(e.destMin):throw new TypeError(this.constructAmountRequirementsError("destMin"))}var t={};t.sendAsset=e.sendAsset.toXDRObject(),t.sendAmount=this._toXDRAmount(e.sendAmount);try{t.destination=(0,i.decodeAddressToMuxedAccount)(e.destination)}catch(e){throw new Error("destination is invalid")}t.destAsset=e.destAsset.toXDRObject(),t.destMin=this._toXDRAmount(e.destMin);var r=e.path?e.path:[];t.path=r.map((function(e){return e.toXDRObject()}));var n=new o.default.PathPaymentStrictSendOp(t),a={};return a.body=o.default.OperationBody.pathPaymentStrictSend(n),this.setSourceAccount(a,e),new o.default.Operation(a)};var n,o=(n=r(1918))&&n.__esModule?n:{default:n},i=r(6160)},3533:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.payment=function(e){if(!e.asset)throw new Error("Must provide an asset for a payment operation");if(!this.isValidAmount(e.amount))throw new TypeError(this.constructAmountRequirementsError("amount"));var t={};try{t.destination=(0,i.decodeAddressToMuxedAccount)(e.destination)}catch(e){throw new Error("destination is invalid")}t.asset=e.asset.toXDRObject(),t.amount=this._toXDRAmount(e.amount);var r=new o.default.PaymentOp(t),n={};return n.body=o.default.OperationBody.payment(r),this.setSourceAccount(n,e),new o.default.Operation(n)};var n,o=(n=r(1918))&&n.__esModule?n:{default:n},i=r(6160)},149:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restoreFootprint=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new o.default.RestoreFootprintOp({ext:new o.default.ExtensionPoint(0)}),r={body:o.default.OperationBody.restoreFootprint(t)};return this.setSourceAccount(r,null!=e?e:{}),new o.default.Operation(r)};var n,o=(n=r(1918))&&n.__esModule?n:{default:n}},7790:(e,t,r)=>{"use strict";var n=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.revokeAccountSponsorship=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!a.StrKey.isValidEd25519PublicKey(e.account))throw new Error("account is invalid");var t=i.default.LedgerKey.account(new i.default.LedgerKeyAccount({accountId:s.Keypair.fromPublicKey(e.account).xdrAccountId()})),r=i.default.RevokeSponsorshipOp.revokeSponsorshipLedgerEntry(t),n={};return n.body=i.default.OperationBody.revokeSponsorship(r),this.setSourceAccount(n,e),new i.default.Operation(n)},t.revokeClaimableBalanceSponsorship=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("string"!=typeof e.balanceId)throw new Error("balanceId is invalid");var t=i.default.LedgerKey.claimableBalance(new i.default.LedgerKeyClaimableBalance({balanceId:i.default.ClaimableBalanceId.fromXDR(e.balanceId,"hex")})),r=i.default.RevokeSponsorshipOp.revokeSponsorshipLedgerEntry(t),n={};return n.body=i.default.OperationBody.revokeSponsorship(r),this.setSourceAccount(n,e),new i.default.Operation(n)},t.revokeDataSponsorship=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!a.StrKey.isValidEd25519PublicKey(e.account))throw new Error("account is invalid");if("string"!=typeof e.name||e.name.length>64)throw new Error("name must be a string, up to 64 characters");var t=i.default.LedgerKey.data(new i.default.LedgerKeyData({accountId:s.Keypair.fromPublicKey(e.account).xdrAccountId(),dataName:e.name})),r=i.default.RevokeSponsorshipOp.revokeSponsorshipLedgerEntry(t),n={};return n.body=i.default.OperationBody.revokeSponsorship(r),this.setSourceAccount(n,e),new i.default.Operation(n)},t.revokeLiquidityPoolSponsorship=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("string"!=typeof e.liquidityPoolId)throw new Error("liquidityPoolId is invalid");var t=i.default.LedgerKey.liquidityPool(new i.default.LedgerKeyLiquidityPool({liquidityPoolId:i.default.PoolId.fromXDR(e.liquidityPoolId,"hex")})),r=i.default.RevokeSponsorshipOp.revokeSponsorshipLedgerEntry(t),n={body:i.default.OperationBody.revokeSponsorship(r)};return this.setSourceAccount(n,e),new i.default.Operation(n)},t.revokeOfferSponsorship=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!a.StrKey.isValidEd25519PublicKey(e.seller))throw new Error("seller is invalid");if("string"!=typeof e.offerId)throw new Error("offerId is invalid");var t=i.default.LedgerKey.offer(new i.default.LedgerKeyOffer({sellerId:s.Keypair.fromPublicKey(e.seller).xdrAccountId(),offerId:i.default.Int64.fromString(e.offerId)})),r=i.default.RevokeSponsorshipOp.revokeSponsorshipLedgerEntry(t),n={};return n.body=i.default.OperationBody.revokeSponsorship(r),this.setSourceAccount(n,e),new i.default.Operation(n)},t.revokeSignerSponsorship=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!a.StrKey.isValidEd25519PublicKey(t.account))throw new Error("account is invalid");if(t.signer.ed25519PublicKey){if(!a.StrKey.isValidEd25519PublicKey(t.signer.ed25519PublicKey))throw new Error("signer.ed25519PublicKey is invalid.");var r=a.StrKey.decodeEd25519PublicKey(t.signer.ed25519PublicKey);e=new i.default.SignerKey.signerKeyTypeEd25519(r)}else if(t.signer.preAuthTx){var o;if(o="string"==typeof t.signer.preAuthTx?n.from(t.signer.preAuthTx,"hex"):t.signer.preAuthTx,!n.isBuffer(o)||32!==o.length)throw new Error("signer.preAuthTx must be 32 bytes Buffer.");e=new i.default.SignerKey.signerKeyTypePreAuthTx(o)}else{if(!t.signer.sha256Hash)throw new Error("signer is invalid");var l;if(l="string"==typeof t.signer.sha256Hash?n.from(t.signer.sha256Hash,"hex"):t.signer.sha256Hash,!n.isBuffer(l)||32!==l.length)throw new Error("signer.sha256Hash must be 32 bytes Buffer.");e=new i.default.SignerKey.signerKeyTypeHashX(l)}var c=new i.default.RevokeSponsorshipOpSigner({accountId:s.Keypair.fromPublicKey(t.account).xdrAccountId(),signerKey:e}),u=i.default.RevokeSponsorshipOp.revokeSponsorshipSigner(c),d={};return d.body=i.default.OperationBody.revokeSponsorship(u),this.setSourceAccount(d,t),new i.default.Operation(d)},t.revokeTrustlineSponsorship=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!a.StrKey.isValidEd25519PublicKey(t.account))throw new Error("account is invalid");if(t.asset instanceof l.Asset)e=t.asset.toTrustLineXDRObject();else{if(!(t.asset instanceof c.LiquidityPoolId))throw new TypeError("asset must be an Asset or LiquidityPoolId");e=t.asset.toXDRObject()}var r=i.default.LedgerKey.trustline(new i.default.LedgerKeyTrustLine({accountId:s.Keypair.fromPublicKey(t.account).xdrAccountId(),asset:e})),n=i.default.RevokeSponsorshipOp.revokeSponsorshipLedgerEntry(r),o={};return o.body=i.default.OperationBody.revokeSponsorship(n),this.setSourceAccount(o,t),new i.default.Operation(o)};var o,i=(o=r(1918))&&o.__esModule?o:{default:o},a=r(7120),s=r(6691),l=r(1764),c=r(9353)},2018:(e,t,r)=>{"use strict";var n=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.setOptions=function(e){var t={};if(e.inflationDest){if(!s.StrKey.isValidEd25519PublicKey(e.inflationDest))throw new Error("inflationDest is invalid");t.inflationDest=a.Keypair.fromPublicKey(e.inflationDest).xdrAccountId()}if(t.clearFlags=this._checkUnsignedIntValue("clearFlags",e.clearFlags),t.setFlags=this._checkUnsignedIntValue("setFlags",e.setFlags),t.masterWeight=this._checkUnsignedIntValue("masterWeight",e.masterWeight,l),t.lowThreshold=this._checkUnsignedIntValue("lowThreshold",e.lowThreshold,l),t.medThreshold=this._checkUnsignedIntValue("medThreshold",e.medThreshold,l),t.highThreshold=this._checkUnsignedIntValue("highThreshold",e.highThreshold,l),void 0!==e.homeDomain&&"string"!=typeof e.homeDomain)throw new TypeError("homeDomain argument must be of type String");if(t.homeDomain=e.homeDomain,e.signer){var r,o=this._checkUnsignedIntValue("signer.weight",e.signer.weight,l),c=0;if(e.signer.ed25519PublicKey){if(!s.StrKey.isValidEd25519PublicKey(e.signer.ed25519PublicKey))throw new Error("signer.ed25519PublicKey is invalid.");var u=s.StrKey.decodeEd25519PublicKey(e.signer.ed25519PublicKey);r=new i.default.SignerKey.signerKeyTypeEd25519(u),c+=1}if(e.signer.preAuthTx){if("string"==typeof e.signer.preAuthTx&&(e.signer.preAuthTx=n.from(e.signer.preAuthTx,"hex")),!n.isBuffer(e.signer.preAuthTx)||32!==e.signer.preAuthTx.length)throw new Error("signer.preAuthTx must be 32 bytes Buffer.");r=new i.default.SignerKey.signerKeyTypePreAuthTx(e.signer.preAuthTx),c+=1}if(e.signer.sha256Hash){if("string"==typeof e.signer.sha256Hash&&(e.signer.sha256Hash=n.from(e.signer.sha256Hash,"hex")),!n.isBuffer(e.signer.sha256Hash)||32!==e.signer.sha256Hash.length)throw new Error("signer.sha256Hash must be 32 bytes Buffer.");r=new i.default.SignerKey.signerKeyTypeHashX(e.signer.sha256Hash),c+=1}if(e.signer.ed25519SignedPayload){if(!s.StrKey.isValidSignedPayload(e.signer.ed25519SignedPayload))throw new Error("signer.ed25519SignedPayload is invalid.");var d=s.StrKey.decodeSignedPayload(e.signer.ed25519SignedPayload),h=i.default.SignerKeyEd25519SignedPayload.fromXDR(d);r=i.default.SignerKey.signerKeyTypeEd25519SignedPayload(h),c+=1}if(1!==c)throw new Error("Signer object must contain exactly one of signer.ed25519PublicKey, signer.sha256Hash, signer.preAuthTx.");t.signer=new i.default.Signer({key:r,weight:o})}var p=new i.default.SetOptionsOp(t),f={};return f.body=i.default.OperationBody.setOptions(p),this.setSourceAccount(f,e),new i.default.Operation(f)};var o,i=(o=r(1918))&&o.__esModule?o:{default:o},a=r(6691),s=r(7120);function l(e,t){if(e>=0&&e<=255)return!0;throw new Error("".concat(t," value must be between 0 and 255"))}},1804:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setTrustLineFlags=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};if("object"!==a(e.flags)||0===Object.keys(e.flags).length)throw new Error("opts.flags must be a map of boolean flags to modify");var r={authorized:o.default.TrustLineFlags.authorizedFlag(),authorizedToMaintainLiabilities:o.default.TrustLineFlags.authorizedToMaintainLiabilitiesFlag(),clawbackEnabled:o.default.TrustLineFlags.trustlineClawbackEnabledFlag()},n=0,s=0;Object.keys(e.flags).forEach((function(t){if(!Object.prototype.hasOwnProperty.call(r,t))throw new Error("unsupported flag name specified: ".concat(t));var o=e.flags[t],i=r[t].value;!0===o?s|=i:!1===o&&(n|=i)})),t.trustor=i.Keypair.fromPublicKey(e.trustor).xdrAccountId(),t.asset=e.asset.toXDRObject(),t.clearFlags=n,t.setFlags=s;var l={body:o.default.OperationBody.setTrustLineFlags(new o.default.SetTrustLineFlagsOp(t))};return this.setSourceAccount(l,e),new o.default.Operation(l)};var n,o=(n=r(1918))&&n.__esModule?n:{default:n},i=r(6691);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}},7177:(e,t,r)=>{"use strict";var n=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.nativeToScVal=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(d(t)){case"object":var o,u,h;if(null===t)return i.default.ScVal.scvVoid();if(t instanceof i.default.ScVal)return t;if(t instanceof a.Address)return t.toScVal();if(t instanceof s.Contract)return t.address().toScVal();if(t instanceof Uint8Array||n.isBuffer(t)){var p,f=Uint8Array.from(t);switch(null!==(p=null==r?void 0:r.type)&&void 0!==p?p:"bytes"){case"bytes":return i.default.ScVal.scvBytes(f);case"symbol":return i.default.ScVal.scvSymbol(f);case"string":return i.default.ScVal.scvString(f);default:throw new TypeError("invalid type (".concat(r.type,") specified for bytes-like value"))}}if(Array.isArray(t)){if(t.length>0&&t.some((function(e){return d(e)!==d(t[0])})))throw new TypeError("array values (".concat(t,") must have the same type (types: ").concat(t.map((function(e){return d(e)})).join(","),")"));return i.default.ScVal.scvVec(t.map((function(t){return e(t,r)})))}if("Object"!==(null!==(o=null===(u=t.constructor)||void 0===u?void 0:u.name)&&void 0!==o?o:""))throw new TypeError("cannot interpret ".concat(null===(h=t.constructor)||void 0===h?void 0:h.name," value as ScVal (").concat(JSON.stringify(t),")"));return i.default.ScVal.scvMap(Object.entries(t).sort((function(e,t){var r=c(e,1)[0],n=c(t,1)[0];return r.localeCompare(n)})).map((function(t){var n,o,a=c(t,2),s=a[0],l=a[1],u=c(null!==(n=(null!==(o=null==r?void 0:r.type)&&void 0!==o?o:{})[s])&&void 0!==n?n:[null,null],2),d=u[0],h=u[1],p=d?{type:d}:{},f=h?{type:h}:{};return new i.default.ScMapEntry({key:e(s,p),val:e(l,f)})})));case"number":case"bigint":switch(null==r?void 0:r.type){case"u32":return i.default.ScVal.scvU32(t);case"i32":return i.default.ScVal.scvI32(t)}return new l.ScInt(t,{type:null==r?void 0:r.type}).toScVal();case"string":var m,g=null!==(m=null==r?void 0:r.type)&&void 0!==m?m:"string";switch(g){case"string":return i.default.ScVal.scvString(t);case"symbol":return i.default.ScVal.scvSymbol(t);case"address":return new a.Address(t).toScVal();case"u32":return i.default.ScVal.scvU32(parseInt(t,10));case"i32":return i.default.ScVal.scvI32(parseInt(t,10));default:if(l.XdrLargeInt.isType(g))return new l.XdrLargeInt(g,t).toScVal();throw new TypeError("invalid type (".concat(r.type,") specified for string value"))}case"boolean":return i.default.ScVal.scvBool(t);case"undefined":return i.default.ScVal.scvVoid();case"function":return e(t());default:throw new TypeError("failed to convert typeof ".concat(d(t)," (").concat(t,")"))}},t.scValToNative=function e(t){var r,o;switch(t.switch().value){case i.default.ScValType.scvVoid().value:return null;case i.default.ScValType.scvU64().value:case i.default.ScValType.scvI64().value:return t.value().toBigInt();case i.default.ScValType.scvU128().value:case i.default.ScValType.scvI128().value:case i.default.ScValType.scvU256().value:case i.default.ScValType.scvI256().value:return(0,l.scValToBigInt)(t);case i.default.ScValType.scvVec().value:return(null!==(r=t.vec())&&void 0!==r?r:[]).map(e);case i.default.ScValType.scvAddress().value:return a.Address.fromScVal(t).toString();case i.default.ScValType.scvMap().value:return Object.fromEntries((null!==(o=t.map())&&void 0!==o?o:[]).map((function(t){return[e(t.key()),e(t.val())]})));case i.default.ScValType.scvBool().value:case i.default.ScValType.scvU32().value:case i.default.ScValType.scvI32().value:case i.default.ScValType.scvBytes().value:return t.value();case i.default.ScValType.scvSymbol().value:case i.default.ScValType.scvString().value:var s=t.value();if(n.isBuffer(s)||ArrayBuffer.isView(s))try{return(new TextDecoder).decode(s)}catch(e){return new Uint8Array(s.buffer)}return s;case i.default.ScValType.scvTimepoint().value:case i.default.ScValType.scvDuration().value:return new i.default.Uint64(t.value()).toBigInt();case i.default.ScValType.scvError().value:if(t.error().switch().value===i.default.ScErrorType.sceContract().value)return{type:"contract",code:t.error().contractCode()};var c=t.error();return{type:"system",code:c.code().value,value:c.code().name};default:return t.value()}};var o,i=(o=r(1918))&&o.__esModule?o:{default:o},a=r(1180),s=r(7452),l=r(8549);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}},225:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignerKey=void 0;var n,o=(n=r(1918))&&n.__esModule?n:{default:n},i=r(7120);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function l(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}t.SignerKey=function(e,t,r){return r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}),0,[{key:"decodeAddress",value:function(e){var t={ed25519PublicKey:o.default.SignerKey.signerKeyTypeEd25519,preAuthTx:o.default.SignerKey.signerKeyTypePreAuthTx,sha256Hash:o.default.SignerKey.signerKeyTypeHashX,signedPayload:o.default.SignerKey.signerKeyTypeEd25519SignedPayload},r=i.StrKey.getVersionByteForPrefix(e),n=t[r];if(!n)throw new Error("invalid signer key type (".concat(r,")"));var a=(0,i.decodeCheck)(r,e);return n("signedPayload"===r?new o.default.SignerKeyEd25519SignedPayload({ed25519:a.slice(0,32),payload:a.slice(36)}):a)}},{key:"encodeSignerKey",value:function(e){var t,r;switch(e.switch()){case o.default.SignerKeyType.signerKeyTypeEd25519():t="ed25519PublicKey",r=e.value();break;case o.default.SignerKeyType.signerKeyTypePreAuthTx():t="preAuthTx",r=e.value();break;case o.default.SignerKeyType.signerKeyTypeHashX():t="sha256Hash",r=e.value();break;case o.default.SignerKeyType.signerKeyTypeEd25519SignedPayload():t="signedPayload",r=e.ed25519SignedPayload().toXDR("raw");break;default:throw new Error("invalid SignerKey (type: ".concat(e.switch(),")"))}return(0,i.encodeCheck)(t,r)}}])},15:(e,t,r)=>{"use strict";var n=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.FastSigning=void 0,t.generate=function(e){return o.generate(e)},t.sign=function(e,t){return o.sign(e,t)},t.verify=function(e,t,r){return o.verify(e,t,r)};var o={};function i(){var e=r(4940);return o.generate=function(t){var r=new Uint8Array(t),o=e.sign.keyPair.fromSeed(r);return n.from(o.publicKey)},o.sign=function(t,r){t=n.from(t),t=new Uint8Array(t.toJSON().data),r=new Uint8Array(r.toJSON().data);var o=e.sign.detached(t,r);return n.from(o)},o.verify=function(t,r,o){return t=n.from(t),t=new Uint8Array(t.toJSON().data),r=new Uint8Array(r.toJSON().data),o=new Uint8Array(o.toJSON().data),e.sign.detached.verify(t,r,o)},!1}t.FastSigning="undefined"==typeof window?function(){var e;try{e=r(Object(function(){var e=new Error("Cannot find module 'sodium-native'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(e){return i()}return Object.keys(e).length?(o.generate=function(t){var r=n.alloc(e.crypto_sign_PUBLICKEYBYTES),o=n.alloc(e.crypto_sign_SECRETKEYBYTES);return e.crypto_sign_seed_keypair(r,o,t),r},o.sign=function(t,r){t=n.from(t);var o=n.alloc(e.crypto_sign_BYTES);return e.crypto_sign_detached(o,t,r),o},o.verify=function(t,r,o){t=n.from(t);try{return e.crypto_sign_verify_detached(r,t,o)}catch(e){return!1}},!0):i()}():i()},4062:(e,t)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}Object.defineProperty(t,"__esModule",{value:!0}),t.Soroban=void 0,t.Soroban=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"formatTokenAmount",value:function(e,t){if(e.includes("."))throw new TypeError("No decimals are allowed");var r=e;return t>0&&(r=t>r.length?["0",r.toString().padStart(t,"0")].join("."):[r.slice(0,-t),r.slice(-t)].join(".")),r.replace(/(\.\d*?)0+$/,"$1")}},{key:"parseTokenAmount",value:function(e,t){var r,o=n(e.split(".").slice()),i=o[0],a=o[1];if(o.slice(2).length)throw new Error("Invalid decimal value: ".concat(e));return BigInt(i+(null!==(r=null==a?void 0:a.padEnd(t,"0"))&&void 0!==r?r:"0".repeat(t))).toString()}}],t&&i(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}()},4842:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SorobanDataBuilder=void 0;var n,o=(n=r(1918))&&n.__esModule?n:{default:n};function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}t.SorobanDataBuilder=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,r){(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"_data",void 0),r=t?"string"==typeof t||ArrayBuffer.isView(t)?e.fromXDR(t):e.fromXDR(t.toXDR()):new o.default.SorobanTransactionData({resources:new o.default.SorobanResources({footprint:new o.default.LedgerFootprint({readOnly:[],readWrite:[]}),instructions:0,readBytes:0,writeBytes:0}),ext:new o.default.ExtensionPoint(0),resourceFee:new o.default.Int64(0)}),this._data=r}),[{key:"setResourceFee",value:function(e){return this._data.resourceFee(new o.default.Int64(e)),this}},{key:"setResources",value:function(e,t,r){return this._data.resources().instructions(e),this._data.resources().readBytes(t),this._data.resources().writeBytes(r),this}},{key:"appendFootprint",value:function(e,t){return this.setFootprint(this.getReadOnly().concat(e),this.getReadWrite().concat(t))}},{key:"setFootprint",value:function(e,t){return null!==e&&this.setReadOnly(e),null!==t&&this.setReadWrite(t),this}},{key:"setReadOnly",value:function(e){return this._data.resources().footprint().readOnly(null!=e?e:[]),this}},{key:"setReadWrite",value:function(e){return this._data.resources().footprint().readWrite(null!=e?e:[]),this}},{key:"build",value:function(){return o.default.SorobanTransactionData.fromXDR(this._data.toXDR())}},{key:"getReadOnly",value:function(){return this.getFootprint().readOnly()}},{key:"getReadWrite",value:function(){return this.getFootprint().readWrite()}},{key:"getFootprint",value:function(){return this._data.resources().footprint()}}],[{key:"fromXDR",value:function(e){return o.default.SorobanTransactionData.fromXDR(e,"string"==typeof e?"base64":"raw")}}])},7120:(e,t,r)=>{"use strict";var n=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.StrKey=void 0,t.decodeCheck=p,t.encodeCheck=f;var o,i=(o=r(5360))&&o.__esModule?o:{default:o},a=r(1346);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function c(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}var u={ed25519PublicKey:48,ed25519SecretSeed:144,med25519PublicKey:96,preAuthTx:152,sha256Hash:184,signedPayload:120,contract:16},d={G:"ed25519PublicKey",S:"ed25519SecretSeed",M:"med25519PublicKey",T:"preAuthTx",X:"sha256Hash",P:"signedPayload",C:"contract"};function h(e,t){if("string"!=typeof t)return!1;switch(e){case"ed25519PublicKey":case"ed25519SecretSeed":case"preAuthTx":case"sha256Hash":case"contract":if(56!==t.length)return!1;break;case"med25519PublicKey":if(69!==t.length)return!1;break;case"signedPayload":if(t.length<56||t.length>165)return!1;break;default:return!1}var r="";try{r=p(e,t)}catch(e){return!1}switch(e){case"ed25519PublicKey":case"ed25519SecretSeed":case"preAuthTx":case"sha256Hash":case"contract":return 32===r.length;case"med25519PublicKey":return 40===r.length;case"signedPayload":return r.length>=40&&r.length<=100;default:return!1}}function p(e,t){if("string"!=typeof t)throw new TypeError("encoded argument must be of type String");var r=i.default.decode(t),o=r[0],s=r.slice(0,-2),l=s.slice(1),c=r.slice(-2);if(t!==i.default.encode(r))throw new Error("invalid encoded string");var d=u[e];if(void 0===d)throw new Error("".concat(e," is not a valid version byte name. ")+"Expected one of ".concat(Object.keys(u).join(", ")));if(o!==d)throw new Error("invalid version byte. expected ".concat(d,", got ").concat(o));var h=m(s);if(!(0,a.verifyChecksum)(h,c))throw new Error("invalid checksum");return n.from(l)}function f(e,t){if(null==t)throw new Error("cannot encode null data");var r=u[e];if(void 0===r)throw new Error("".concat(e," is not a valid version byte name. ")+"Expected one of ".concat(Object.keys(u).join(", ")));t=n.from(t);var o=n.from([r]),a=n.concat([o,t]),s=n.from(m(a)),l=n.concat([a,s]);return i.default.encode(l)}function m(e){for(var t=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],r=0,n=0;n<e.length;n+=1)r=r<<8^t[r>>8^e[n]],r&=65535;var o=new Uint8Array(2);return o[0]=255&r,o[1]=r>>8&255,o}t.StrKey=function(e,t,r){return r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}),0,[{key:"encodeEd25519PublicKey",value:function(e){return f("ed25519PublicKey",e)}},{key:"decodeEd25519PublicKey",value:function(e){return p("ed25519PublicKey",e)}},{key:"isValidEd25519PublicKey",value:function(e){return h("ed25519PublicKey",e)}},{key:"encodeEd25519SecretSeed",value:function(e){return f("ed25519SecretSeed",e)}},{key:"decodeEd25519SecretSeed",value:function(e){return p("ed25519SecretSeed",e)}},{key:"isValidEd25519SecretSeed",value:function(e){return h("ed25519SecretSeed",e)}},{key:"encodeMed25519PublicKey",value:function(e){return f("med25519PublicKey",e)}},{key:"decodeMed25519PublicKey",value:function(e){return p("med25519PublicKey",e)}},{key:"isValidMed25519PublicKey",value:function(e){return h("med25519PublicKey",e)}},{key:"encodePreAuthTx",value:function(e){return f("preAuthTx",e)}},{key:"decodePreAuthTx",value:function(e){return p("preAuthTx",e)}},{key:"encodeSha256Hash",value:function(e){return f("sha256Hash",e)}},{key:"decodeSha256Hash",value:function(e){return p("sha256Hash",e)}},{key:"encodeSignedPayload",value:function(e){return f("signedPayload",e)}},{key:"decodeSignedPayload",value:function(e){return p("signedPayload",e)}},{key:"isValidSignedPayload",value:function(e){return h("signedPayload",e)}},{key:"encodeContract",value:function(e){return f("contract",e)}},{key:"decodeContract",value:function(e){return p("contract",e)}},{key:"isValidContract",value:function(e){return h("contract",e)}},{key:"getVersionByteForPrefix",value:function(e){return d[e[0]]}}])},380:(e,t,r)=>{"use strict";var n=r(8287).Buffer;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Transaction=void 0;var i,a=(i=r(1918))&&i.__esModule?i:{default:i},s=r(9152),l=r(7120),c=r(7237),u=r(4172),d=r(3758),h=r(6160);function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}function m(e,t,r){return t=y(t),function(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,g()?Reflect.construct(t,r||[],y(e).constructor):t.apply(e,r))}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}t.Transaction=function(e){function t(e,r){var o;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof e){var i=n.from(e,"base64");e=a.default.TransactionEnvelope.fromXDR(i)}var s=e.switch();if(s!==a.default.EnvelopeType.envelopeTypeTxV0()&&s!==a.default.EnvelopeType.envelopeTypeTx())throw new Error("Invalid TransactionEnvelope: expected an envelopeTypeTxV0 or envelopeTypeTx but received an ".concat(s.name,"."));var u=e.value(),d=u.tx(),p=d.fee().toString();(o=m(this,t,[d,(u.signatures()||[]).slice(),p,r]))._envelopeType=s,o._memo=d.memo(),o._sequence=d.seqNum().toString(),o._envelopeType===a.default.EnvelopeType.envelopeTypeTxV0()?o._source=l.StrKey.encodeEd25519PublicKey(o.tx.sourceAccountEd25519()):o._source=(0,h.encodeMuxedAccountToAddress)(o.tx.sourceAccount());var f=null,g=null;switch(o._envelopeType){case a.default.EnvelopeType.envelopeTypeTxV0():g=d.timeBounds();break;case a.default.EnvelopeType.envelopeTypeTx():switch(d.cond().switch()){case a.default.PreconditionType.precondTime():g=d.cond().timeBounds();break;case a.default.PreconditionType.precondV2():g=(f=d.cond().v2()).timeBounds()}}if(g&&(o._timeBounds={minTime:g.minTime().toString(),maxTime:g.maxTime().toString()}),f){var y=f.ledgerBounds();y&&(o._ledgerBounds={minLedger:y.minLedger(),maxLedger:y.maxLedger()});var v=f.minSeqNum();v&&(o._minAccountSequence=v.toString()),o._minAccountSequenceAge=f.minSeqAge(),o._minAccountSequenceLedgerGap=f.minSeqLedgerGap(),o._extraSigners=f.extraSigners()}var b=d.operations()||[];return o._operations=b.map((function(e){return c.Operation.fromXDRObject(e)})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e),function(e,t){return t&&p(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"timeBounds",get:function(){return this._timeBounds},set:function(e){throw new Error("Transaction is immutable")}},{key:"ledgerBounds",get:function(){return this._ledgerBounds},set:function(e){throw new Error("Transaction is immutable")}},{key:"minAccountSequence",get:function(){return this._minAccountSequence},set:function(e){throw new Error("Transaction is immutable")}},{key:"minAccountSequenceAge",get:function(){return this._minAccountSequenceAge},set:function(e){throw new Error("Transaction is immutable")}},{key:"minAccountSequenceLedgerGap",get:function(){return this._minAccountSequenceLedgerGap},set:function(e){throw new Error("Transaction is immutable")}},{key:"extraSigners",get:function(){return this._extraSigners},set:function(e){throw new Error("Transaction is immutable")}},{key:"sequence",get:function(){return this._sequence},set:function(e){throw new Error("Transaction is immutable")}},{key:"source",get:function(){return this._source},set:function(e){throw new Error("Transaction is immutable")}},{key:"operations",get:function(){return this._operations},set:function(e){throw new Error("Transaction is immutable")}},{key:"memo",get:function(){return u.Memo.fromXDRObject(this._memo)},set:function(e){throw new Error("Transaction is immutable")}},{key:"signatureBase",value:function(){var e=this.tx;this._envelopeType===a.default.EnvelopeType.envelopeTypeTxV0()&&(e=a.default.Transaction.fromXDR(n.concat([a.default.PublicKeyType.publicKeyTypeEd25519().toXDR(),e.toXDR()])));var t=new a.default.TransactionSignaturePayloadTaggedTransaction.envelopeTypeTx(e);return new a.default.TransactionSignaturePayload({networkId:a.default.Hash.fromXDR((0,s.hash)(this.networkPassphrase)),taggedTransaction:t}).toXDR()}},{key:"toEnvelope",value:function(){var e,t=this.tx.toXDR(),r=this.signatures.slice();switch(this._envelopeType){case a.default.EnvelopeType.envelopeTypeTxV0():e=new a.default.TransactionEnvelope.envelopeTypeTxV0(new a.default.TransactionV0Envelope({tx:a.default.TransactionV0.fromXDR(t),signatures:r}));break;case a.default.EnvelopeType.envelopeTypeTx():e=new a.default.TransactionEnvelope.envelopeTypeTx(new a.default.TransactionV1Envelope({tx:a.default.Transaction.fromXDR(t),signatures:r}));break;default:throw new Error("Invalid TransactionEnvelope: expected an envelopeTypeTxV0 or envelopeTypeTx but received an ".concat(this._envelopeType.name,"."))}return e}},{key:"getClaimableBalanceId",value:function(e){if(!Number.isInteger(e)||e<0||e>=this.operations.length)throw new RangeError("invalid operation index");var t=this.operations[e];try{t=c.Operation.createClaimableBalance(t)}catch(e){throw new TypeError("expected createClaimableBalance, got ".concat(t.type,": ").concat(e))}var r=l.StrKey.decodeEd25519PublicKey((0,h.extractBaseAddress)(this.source)),n=a.default.HashIdPreimage.envelopeTypeOpId(new a.default.HashIdPreimageOperationId({sourceAccount:a.default.AccountId.publicKeyTypeEd25519(r),seqNum:a.default.SequenceNumber.fromString(this.sequence),opNum:e})),o=(0,s.hash)(n.toXDR("raw"));return a.default.ClaimableBalanceId.claimableBalanceIdTypeV0(o).toXDR("hex")}}])}(d.TransactionBase)},3758:(e,t,r)=>{"use strict";var n=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionBase=void 0;var o,i=(o=r(1918))&&o.__esModule?o:{default:o},a=r(9152),s=r(6691);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}t.TransactionBase=function(e,t){return t&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,r,n,o){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"!=typeof o)throw new Error("Invalid passphrase provided to Transaction: expected a string but got a ".concat(l(o)));this._networkPassphrase=o,this._tx=t,this._signatures=r,this._fee=n}),[{key:"signatures",get:function(){return this._signatures},set:function(e){throw new Error("Transaction is immutable")}},{key:"tx",get:function(){return this._tx},set:function(e){throw new Error("Transaction is immutable")}},{key:"fee",get:function(){return this._fee},set:function(e){throw new Error("Transaction is immutable")}},{key:"networkPassphrase",get:function(){return this._networkPassphrase},set:function(e){this._networkPassphrase=e}},{key:"sign",value:function(){for(var e=this,t=this.hash(),r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];n.forEach((function(r){var n=r.signDecorated(t);e.signatures.push(n)}))}},{key:"getKeypairSignature",value:function(e){return e.sign(this.hash()).toString("base64")}},{key:"addSignature",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!o||"string"!=typeof o)throw new Error("Invalid signature");if(!r||"string"!=typeof r)throw new Error("Invalid publicKey");var a=n.from(o,"base64");try{t=(e=s.Keypair.fromPublicKey(r)).signatureHint()}catch(e){throw new Error("Invalid publicKey")}if(!e.verify(this.hash(),a))throw new Error("Invalid signature");this.signatures.push(new i.default.DecoratedSignature({hint:t,signature:a}))}},{key:"addDecoratedSignature",value:function(e){this.signatures.push(e)}},{key:"signHashX",value:function(e){if("string"==typeof e&&(e=n.from(e,"hex")),e.length>64)throw new Error("preimage cannnot be longer than 64 bytes");var t=e,r=(0,a.hash)(e),o=r.slice(r.length-4);this.signatures.push(new i.default.DecoratedSignature({hint:o,signature:t}))}},{key:"hash",value:function(){return(0,a.hash)(this.signatureBase())}},{key:"signatureBase",value:function(){throw new Error("Implement in subclass")}},{key:"toEnvelope",value:function(){throw new Error("Implement in subclass")}},{key:"toXDR",value:function(){return this.toEnvelope().toXDR().toString("base64")}}])},6396:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionBuilder=t.TimeoutInfinite=t.BASE_FEE=void 0,t.isValidDate=T;var n=r(3740),o=m(r(1242)),i=m(r(1918)),a=r(2135),s=r(2243),l=r(6160),c=r(380),u=r(9260),d=r(4842),h=r(7120),p=r(225),f=r(4172);function m(e){return e&&e.__esModule?e:{default:e}}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function y(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function S(e){var t=function(e){if("object"!=g(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}var k=t.BASE_FEE="100";function T(e){return e instanceof Date&&!isNaN(e)}t.TimeoutInfinite=0,t.TransactionBuilder=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("must specify source account for the transaction");if(void 0===r.fee)throw new Error("must specify fee for the transaction (in stroops)");this.source=t,this.operations=[],this.baseFee=r.fee,this.timebounds=r.timebounds?x({},r.timebounds):null,this.ledgerbounds=r.ledgerbounds?x({},r.ledgerbounds):null,this.minAccountSequence=r.minAccountSequence||null,this.minAccountSequenceAge=r.minAccountSequenceAge||null,this.minAccountSequenceLedgerGap=r.minAccountSequenceLedgerGap||null,this.extraSigners=r.extraSigners?y(r.extraSigners):null,this.memo=r.memo||f.Memo.none(),this.networkPassphrase=r.networkPassphrase||null,this.sorobanData=r.sorobanData?new d.SorobanDataBuilder(r.sorobanData).build():null}return t=e,m=[{key:"cloneFrom",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(t instanceof c.Transaction))throw new TypeError("expected a 'Transaction', got: ".concat(t));var n,o=(BigInt(t.sequence)-1n).toString();if(h.StrKey.isValidMed25519PublicKey(t.source))n=s.MuxedAccount.fromAddress(t.source,o);else{if(!h.StrKey.isValidEd25519PublicKey(t.source))throw new TypeError("unsupported tx source account: ".concat(t.source));n=new a.Account(t.source,o)}var i=new e(n,x({fee:(parseInt(t.fee,10)/t.operations.length||k).toString(),memo:t.memo,networkPassphrase:t.networkPassphrase,timebounds:t.timeBounds,ledgerbounds:t.ledgerBounds,minAccountSequence:t.minAccountSequence,minAccountSequenceAge:t.minAccountSequenceAge,minAccountSequenceLedgerGap:t.minAccountSequenceLedgerGap,extraSigners:t.extraSigners},r));return t._tx.operations().forEach((function(e){return i.addOperation(e)})),i}},{key:"buildFeeBumpTransaction",value:function(e,t,r,n){var a=r.operations.length,s=new o.default(r.fee).div(a),c=new o.default(t);if(c.lt(s))throw new Error("Invalid baseFee, it should be at least ".concat(s," stroops."));var d=new o.default(k);if(c.lt(d))throw new Error("Invalid baseFee, it should be at least ".concat(d," stroops."));var h,p=r.toEnvelope();if(p.switch()===i.default.EnvelopeType.envelopeTypeTxV0()){var f=p.v0().tx(),m=new i.default.Transaction({sourceAccount:new i.default.MuxedAccount.keyTypeEd25519(f.sourceAccountEd25519()),fee:f.fee(),seqNum:f.seqNum(),cond:i.default.Preconditions.precondTime(f.timeBounds()),memo:f.memo(),operations:f.operations(),ext:new i.default.TransactionExt(0)});p=new i.default.TransactionEnvelope.envelopeTypeTx(new i.default.TransactionV1Envelope({tx:m,signatures:p.v0().signatures()}))}h="string"==typeof e?(0,l.decodeAddressToMuxedAccount)(e):e.xdrMuxedAccount();var g=new i.default.FeeBumpTransaction({feeSource:h,fee:i.default.Int64.fromString(c.times(a+1).toString()),innerTx:i.default.FeeBumpTransactionInnerTx.envelopeTypeTx(p.v1()),ext:new i.default.FeeBumpTransactionExt(0)}),y=new i.default.FeeBumpTransactionEnvelope({tx:g,signatures:[]}),v=new i.default.TransactionEnvelope.envelopeTypeTxFeeBump(y);return new u.FeeBumpTransaction(v,n)}},{key:"fromXDR",value:function(e,t){return"string"==typeof e&&(e=i.default.TransactionEnvelope.fromXDR(e,"base64")),e.switch()===i.default.EnvelopeType.envelopeTypeTxFeeBump()?new u.FeeBumpTransaction(e,t):new c.Transaction(e,t)}}],(r=[{key:"addOperation",value:function(e){return this.operations.push(e),this}},{key:"addOperationAt",value:function(e,t){return this.operations.splice(t,0,e),this}},{key:"clearOperations",value:function(){return this.operations=[],this}},{key:"clearOperationAt",value:function(e){return this.operations.splice(e,1),this}},{key:"addMemo",value:function(e){return this.memo=e,this}},{key:"setTimeout",value:function(e){if(null!==this.timebounds&&this.timebounds.maxTime>0)throw new Error("TimeBounds.max_time has been already set - setting timeout would overwrite it.");if(e<0)throw new Error("timeout cannot be negative");if(e>0){var t=Math.floor(Date.now()/1e3)+e;null===this.timebounds?this.timebounds={minTime:0,maxTime:t}:this.timebounds={minTime:this.timebounds.minTime,maxTime:t}}else this.timebounds={minTime:0,maxTime:0};return this}},{key:"setTimebounds",value:function(e,t){if("number"==typeof e&&(e=new Date(1e3*e)),"number"==typeof t&&(t=new Date(1e3*t)),null!==this.timebounds)throw new Error("TimeBounds has been already set - setting timebounds would overwrite it.");var r=Math.floor(e.valueOf()/1e3),n=Math.floor(t.valueOf()/1e3);if(r<0)throw new Error("min_time cannot be negative");if(n<0)throw new Error("max_time cannot be negative");if(n>0&&r>n)throw new Error("min_time cannot be greater than max_time");return this.timebounds={minTime:r,maxTime:n},this}},{key:"setLedgerbounds",value:function(e,t){if(null!==this.ledgerbounds)throw new Error("LedgerBounds has been already set - setting ledgerbounds would overwrite it.");if(e<0)throw new Error("min_ledger cannot be negative");if(t<0)throw new Error("max_ledger cannot be negative");if(t>0&&e>t)throw new Error("min_ledger cannot be greater than max_ledger");return this.ledgerbounds={minLedger:e,maxLedger:t},this}},{key:"setMinAccountSequence",value:function(e){if(null!==this.minAccountSequence)throw new Error("min_account_sequence has been already set - setting min_account_sequence would overwrite it.");return this.minAccountSequence=e,this}},{key:"setMinAccountSequenceAge",value:function(e){if("number"!=typeof e)throw new Error("min_account_sequence_age must be a number");if(null!==this.minAccountSequenceAge)throw new Error("min_account_sequence_age has been already set - setting min_account_sequence_age would overwrite it.");if(e<0)throw new Error("min_account_sequence_age cannot be negative");return this.minAccountSequenceAge=e,this}},{key:"setMinAccountSequenceLedgerGap",value:function(e){if(null!==this.minAccountSequenceLedgerGap)throw new Error("min_account_sequence_ledger_gap has been already set - setting min_account_sequence_ledger_gap would overwrite it.");if(e<0)throw new Error("min_account_sequence_ledger_gap cannot be negative");return this.minAccountSequenceLedgerGap=e,this}},{key:"setExtraSigners",value:function(e){if(!Array.isArray(e))throw new Error("extra_signers must be an array of strings.");if(null!==this.extraSigners)throw new Error("extra_signers has been already set - setting extra_signers would overwrite it.");if(e.length>2)throw new Error("extra_signers cannot be longer than 2 elements.");return this.extraSigners=y(e),this}},{key:"setNetworkPassphrase",value:function(e){return this.networkPassphrase=e,this}},{key:"setSorobanData",value:function(e){return this.sorobanData=new d.SorobanDataBuilder(e).build(),this}},{key:"build",value:function(){var e=new o.default(this.source.sequenceNumber()).plus(1),t={fee:new o.default(this.baseFee).times(this.operations.length).toNumber(),seqNum:i.default.SequenceNumber.fromString(e.toString()),memo:this.memo?this.memo.toXDRObject():null};if(null===this.timebounds||void 0===this.timebounds.minTime||void 0===this.timebounds.maxTime)throw new Error("TimeBounds has to be set or you must call setTimeout(TimeoutInfinite).");T(this.timebounds.minTime)&&(this.timebounds.minTime=this.timebounds.minTime.getTime()/1e3),T(this.timebounds.maxTime)&&(this.timebounds.maxTime=this.timebounds.maxTime.getTime()/1e3),this.timebounds.minTime=n.UnsignedHyper.fromString(this.timebounds.minTime.toString()),this.timebounds.maxTime=n.UnsignedHyper.fromString(this.timebounds.maxTime.toString());var r=new i.default.TimeBounds(this.timebounds);if(this.hasV2Preconditions()){var a=null;null!==this.ledgerbounds&&(a=new i.default.LedgerBounds(this.ledgerbounds));var s=this.minAccountSequence||"0";s=i.default.SequenceNumber.fromString(s);var u=n.UnsignedHyper.fromString(null!==this.minAccountSequenceAge?this.minAccountSequenceAge.toString():"0"),d=this.minAccountSequenceLedgerGap||0,h=null!==this.extraSigners?this.extraSigners.map(p.SignerKey.decodeAddress):[];t.cond=i.default.Preconditions.precondV2(new i.default.PreconditionsV2({timeBounds:r,ledgerBounds:a,minSeqNum:s,minSeqAge:u,minSeqLedgerGap:d,extraSigners:h}))}else t.cond=i.default.Preconditions.precondTime(r);t.sourceAccount=(0,l.decodeAddressToMuxedAccount)(this.source.accountId()),this.sorobanData?t.ext=new i.default.TransactionExt(1,this.sorobanData):t.ext=new i.default.TransactionExt(0,i.default.Void);var f=new i.default.Transaction(t);f.operations(this.operations);var m=new i.default.TransactionEnvelope.envelopeTypeTx(new i.default.TransactionV1Envelope({tx:f})),g=new c.Transaction(m,this.networkPassphrase);return this.source.incrementSequenceNumber(),g}},{key:"hasV2Preconditions",value:function(){return null!==this.ledgerbounds||null!==this.minAccountSequence||null!==this.minAccountSequenceAge||null!==this.minAccountSequenceLedgerGap||null!==this.extraSigners&&this.extraSigners.length>0}}])&&w(t.prototype,r),m&&w(t,m),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,m}()},1242:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=((n=r(1594))&&n.__esModule?n:{default:n}).default.clone();o.DEBUG=!0,t.default=o},1346:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyChecksum=function(e,t){if(e.length!==t.length)return!1;if(0===e.length)return!0;for(var r=0;r<e.length;r+=1)if(e[r]!==t[r])return!1;return!0}},4151:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.best_r=function(e){for(var t,r,n=new o.default(e),s=[[new o.default(0),new o.default(1)],[new o.default(1),new o.default(0)]],l=2;!n.gt(a);){t=n.integerValue(o.default.ROUND_FLOOR),r=n.minus(t);var c=t.times(s[l-1][0]).plus(s[l-2][0]),u=t.times(s[l-1][1]).plus(s[l-2][1]);if(c.gt(a)||u.gt(a))break;if(s.push([c,u]),r.eq(0))break;n=new o.default(1).div(r),l+=1}var d,h=function(e){if(Array.isArray(e))return e}(d=s[s.length-1])||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,n,o,i,a=[],s=!0,l=!1;try{for(o=(t=t.call(e)).next;!(s=(r=o.call(t)).done)&&(a.push(r.value),2!==a.length);s=!0);}catch(e){l=!0,n=e}finally{try{if(!s&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(l)throw n}}return a}}(d)||function(e){if(e){if("string"==typeof e)return i(e,2);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,2):void 0}}(d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),p=h[0],f=h[1];if(p.isZero()||f.isZero())throw new Error("Couldn't find approximation");return[p.toNumber(),f.toNumber()]};var n,o=(n=r(1242))&&n.__esModule?n:{default:n};function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var a=2147483647},6160:(e,t,r)=>{"use strict";var n=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeAddressToMuxedAccount=s,t.encodeMuxedAccount=function(e,t){if(!a.StrKey.isValidEd25519PublicKey(e))throw new Error("address should be a Stellar account ID (G...)");if("string"!=typeof t)throw new Error("id should be a string representing a number (uint64)");return i.default.MuxedAccount.keyTypeMuxedEd25519(new i.default.MuxedAccountMed25519({id:i.default.Uint64.fromString(t),ed25519:a.StrKey.decodeEd25519PublicKey(e)}))},t.encodeMuxedAccountToAddress=function e(t){return t.switch().value===i.default.CryptoKeyType.keyTypeMuxedEd25519().value?function(t){if(t.switch()===i.default.CryptoKeyType.keyTypeEd25519())return e(t);var r=t.med25519();return a.StrKey.encodeMed25519PublicKey(n.concat([r.ed25519(),r.id().toXDR("raw")]))}(t):a.StrKey.encodeEd25519PublicKey(t.ed25519())},t.extractBaseAddress=function(e){if(a.StrKey.isValidEd25519PublicKey(e))return e;if(!a.StrKey.isValidMed25519PublicKey(e))throw new TypeError("expected muxed account (M...), got ".concat(e));var t=s(e);return a.StrKey.encodeEd25519PublicKey(t.med25519().ed25519())};var o,i=(o=r(1918))&&o.__esModule?o:{default:o},a=r(7120);function s(e){return a.StrKey.isValidMed25519PublicKey(e)?function(e){var t=a.StrKey.decodeMed25519PublicKey(e);return i.default.MuxedAccount.keyTypeMuxedEd25519(new i.default.MuxedAccountMed25519({id:i.default.Uint64.fromXDR(t.subarray(-8)),ed25519:t.subarray(0,-8)}))}(e):i.default.MuxedAccount.keyTypeEd25519(a.StrKey.decodeEd25519PublicKey(e))}},645:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trimEnd=void 0,t.trimEnd=function(e,t){for(var r="number"==typeof e,n=String(e);n.endsWith(t);)n=n.slice(0,-1);return r?Number(n):n}},1918:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(7938))&&n.__esModule?n:{default:n};t.default=o.default},4940:(e,t,r)=>{!function(e){"use strict";var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},n=function(){throw new Error("no PRNG")},o=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var a=t(),s=t([1]),l=t([56129,1]),c=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function f(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function m(e,t,r,n,o){var i,a=0;for(i=0;i<o;i++)a|=e[t+i]^r[n+i];return(1&a-1>>>8)-1}function g(e,t,r,n){return m(e,t,r,n,16)}function y(e,t,r,n){return m(e,t,r,n,32)}function v(e,t,r,n){!function(e,t,r,n){for(var o,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,a=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,s=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,l=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,c=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,p=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,m=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,g=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,y=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,x=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,_=i,w=a,S=s,k=l,T=c,E=u,C=d,A=h,j=p,P=f,I=m,O=g,M=y,R=v,L=b,F=x,z=0;z<20;z+=2)_^=(o=(M^=(o=(j^=(o=(T^=(o=_+M|0)<<7|o>>>25)+_|0)<<9|o>>>23)+T|0)<<13|o>>>19)+j|0)<<18|o>>>14,E^=(o=(w^=(o=(R^=(o=(P^=(o=E+w|0)<<7|o>>>25)+E|0)<<9|o>>>23)+P|0)<<13|o>>>19)+R|0)<<18|o>>>14,I^=(o=(C^=(o=(S^=(o=(L^=(o=I+C|0)<<7|o>>>25)+I|0)<<9|o>>>23)+L|0)<<13|o>>>19)+S|0)<<18|o>>>14,F^=(o=(O^=(o=(A^=(o=(k^=(o=F+O|0)<<7|o>>>25)+F|0)<<9|o>>>23)+k|0)<<13|o>>>19)+A|0)<<18|o>>>14,_^=(o=(k^=(o=(S^=(o=(w^=(o=_+k|0)<<7|o>>>25)+_|0)<<9|o>>>23)+w|0)<<13|o>>>19)+S|0)<<18|o>>>14,E^=(o=(T^=(o=(A^=(o=(C^=(o=E+T|0)<<7|o>>>25)+E|0)<<9|o>>>23)+C|0)<<13|o>>>19)+A|0)<<18|o>>>14,I^=(o=(P^=(o=(j^=(o=(O^=(o=I+P|0)<<7|o>>>25)+I|0)<<9|o>>>23)+O|0)<<13|o>>>19)+j|0)<<18|o>>>14,F^=(o=(L^=(o=(R^=(o=(M^=(o=F+L|0)<<7|o>>>25)+F|0)<<9|o>>>23)+M|0)<<13|o>>>19)+R|0)<<18|o>>>14;_=_+i|0,w=w+a|0,S=S+s|0,k=k+l|0,T=T+c|0,E=E+u|0,C=C+d|0,A=A+h|0,j=j+p|0,P=P+f|0,I=I+m|0,O=O+g|0,M=M+y|0,R=R+v|0,L=L+b|0,F=F+x|0,e[0]=_>>>0&255,e[1]=_>>>8&255,e[2]=_>>>16&255,e[3]=_>>>24&255,e[4]=w>>>0&255,e[5]=w>>>8&255,e[6]=w>>>16&255,e[7]=w>>>24&255,e[8]=S>>>0&255,e[9]=S>>>8&255,e[10]=S>>>16&255,e[11]=S>>>24&255,e[12]=k>>>0&255,e[13]=k>>>8&255,e[14]=k>>>16&255,e[15]=k>>>24&255,e[16]=T>>>0&255,e[17]=T>>>8&255,e[18]=T>>>16&255,e[19]=T>>>24&255,e[20]=E>>>0&255,e[21]=E>>>8&255,e[22]=E>>>16&255,e[23]=E>>>24&255,e[24]=C>>>0&255,e[25]=C>>>8&255,e[26]=C>>>16&255,e[27]=C>>>24&255,e[28]=A>>>0&255,e[29]=A>>>8&255,e[30]=A>>>16&255,e[31]=A>>>24&255,e[32]=j>>>0&255,e[33]=j>>>8&255,e[34]=j>>>16&255,e[35]=j>>>24&255,e[36]=P>>>0&255,e[37]=P>>>8&255,e[38]=P>>>16&255,e[39]=P>>>24&255,e[40]=I>>>0&255,e[41]=I>>>8&255,e[42]=I>>>16&255,e[43]=I>>>24&255,e[44]=O>>>0&255,e[45]=O>>>8&255,e[46]=O>>>16&255,e[47]=O>>>24&255,e[48]=M>>>0&255,e[49]=M>>>8&255,e[50]=M>>>16&255,e[51]=M>>>24&255,e[52]=R>>>0&255,e[53]=R>>>8&255,e[54]=R>>>16&255,e[55]=R>>>24&255,e[56]=L>>>0&255,e[57]=L>>>8&255,e[58]=L>>>16&255,e[59]=L>>>24&255,e[60]=F>>>0&255,e[61]=F>>>8&255,e[62]=F>>>16&255,e[63]=F>>>24&255}(e,t,r,n)}function b(e,t,r,n){!function(e,t,r,n){for(var o,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,a=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,s=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,l=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,c=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,p=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,m=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,g=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,y=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,x=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,_=0;_<20;_+=2)i^=(o=(y^=(o=(p^=(o=(c^=(o=i+y|0)<<7|o>>>25)+i|0)<<9|o>>>23)+c|0)<<13|o>>>19)+p|0)<<18|o>>>14,u^=(o=(a^=(o=(v^=(o=(f^=(o=u+a|0)<<7|o>>>25)+u|0)<<9|o>>>23)+f|0)<<13|o>>>19)+v|0)<<18|o>>>14,m^=(o=(d^=(o=(s^=(o=(b^=(o=m+d|0)<<7|o>>>25)+m|0)<<9|o>>>23)+b|0)<<13|o>>>19)+s|0)<<18|o>>>14,x^=(o=(g^=(o=(h^=(o=(l^=(o=x+g|0)<<7|o>>>25)+x|0)<<9|o>>>23)+l|0)<<13|o>>>19)+h|0)<<18|o>>>14,i^=(o=(l^=(o=(s^=(o=(a^=(o=i+l|0)<<7|o>>>25)+i|0)<<9|o>>>23)+a|0)<<13|o>>>19)+s|0)<<18|o>>>14,u^=(o=(c^=(o=(h^=(o=(d^=(o=u+c|0)<<7|o>>>25)+u|0)<<9|o>>>23)+d|0)<<13|o>>>19)+h|0)<<18|o>>>14,m^=(o=(f^=(o=(p^=(o=(g^=(o=m+f|0)<<7|o>>>25)+m|0)<<9|o>>>23)+g|0)<<13|o>>>19)+p|0)<<18|o>>>14,x^=(o=(b^=(o=(v^=(o=(y^=(o=x+b|0)<<7|o>>>25)+x|0)<<9|o>>>23)+y|0)<<13|o>>>19)+v|0)<<18|o>>>14;e[0]=i>>>0&255,e[1]=i>>>8&255,e[2]=i>>>16&255,e[3]=i>>>24&255,e[4]=u>>>0&255,e[5]=u>>>8&255,e[6]=u>>>16&255,e[7]=u>>>24&255,e[8]=m>>>0&255,e[9]=m>>>8&255,e[10]=m>>>16&255,e[11]=m>>>24&255,e[12]=x>>>0&255,e[13]=x>>>8&255,e[14]=x>>>16&255,e[15]=x>>>24&255,e[16]=d>>>0&255,e[17]=d>>>8&255,e[18]=d>>>16&255,e[19]=d>>>24&255,e[20]=h>>>0&255,e[21]=h>>>8&255,e[22]=h>>>16&255,e[23]=h>>>24&255,e[24]=p>>>0&255,e[25]=p>>>8&255,e[26]=p>>>16&255,e[27]=p>>>24&255,e[28]=f>>>0&255,e[29]=f>>>8&255,e[30]=f>>>16&255,e[31]=f>>>24&255}(e,t,r,n)}var x=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function _(e,t,r,n,o,i,a){var s,l,c=new Uint8Array(16),u=new Uint8Array(64);for(l=0;l<16;l++)c[l]=0;for(l=0;l<8;l++)c[l]=i[l];for(;o>=64;){for(v(u,c,a,x),l=0;l<64;l++)e[t+l]=r[n+l]^u[l];for(s=1,l=8;l<16;l++)s=s+(255&c[l])|0,c[l]=255&s,s>>>=8;o-=64,t+=64,n+=64}if(o>0)for(v(u,c,a,x),l=0;l<o;l++)e[t+l]=r[n+l]^u[l];return 0}function w(e,t,r,n,o){var i,a,s=new Uint8Array(16),l=new Uint8Array(64);for(a=0;a<16;a++)s[a]=0;for(a=0;a<8;a++)s[a]=n[a];for(;r>=64;){for(v(l,s,o,x),a=0;a<64;a++)e[t+a]=l[a];for(i=1,a=8;a<16;a++)i=i+(255&s[a])|0,s[a]=255&i,i>>>=8;r-=64,t+=64}if(r>0)for(v(l,s,o,x),a=0;a<r;a++)e[t+a]=l[a];return 0}function S(e,t,r,n,o){var i=new Uint8Array(32);b(i,n,o,x);for(var a=new Uint8Array(8),s=0;s<8;s++)a[s]=n[s+16];return w(e,t,r,a,i)}function k(e,t,r,n,o,i,a){var s=new Uint8Array(32);b(s,i,a,x);for(var l=new Uint8Array(8),c=0;c<8;c++)l[c]=i[c+16];return _(e,t,r,n,o,l,s)}var T=function(e){var t,r,n,o,i,a,s,l;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),n=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|n<<6),o=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(n>>>7|o<<9),i=255&e[8]|(255&e[9])<<8,this.r[4]=255&(o>>>4|i<<12),this.r[5]=i>>>1&8190,a=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(i>>>14|a<<2),s=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(a>>>11|s<<5),l=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(s>>>8|l<<8),this.r[9]=l>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function E(e,t,r,n,o,i){var a=new T(i);return a.update(r,n,o),a.finish(e,t),0}function C(e,t,r,n,o,i){var a=new Uint8Array(16);return E(a,0,r,n,o,i),g(e,t,a,0)}function A(e,t,r,n,o){var i;if(r<32)return-1;for(k(e,0,t,0,r,n,o),E(e,16,e,32,r-32,e),i=0;i<16;i++)e[i]=0;return 0}function j(e,t,r,n,o){var i,a=new Uint8Array(32);if(r<32)return-1;if(S(a,0,32,n,o),0!==C(t,16,t,32,r-32,a))return-1;for(k(e,0,t,0,r,n,o),i=0;i<32;i++)e[i]=0;return 0}function P(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function I(e){var t,r,n=1;for(t=0;t<16;t++)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function O(e,t,r){for(var n,o=~(r-1),i=0;i<16;i++)n=o&(e[i]^t[i]),e[i]^=n,t[i]^=n}function M(e,r){var n,o,i,a=t(),s=t();for(n=0;n<16;n++)s[n]=r[n];for(I(s),I(s),I(s),o=0;o<2;o++){for(a[0]=s[0]-65517,n=1;n<15;n++)a[n]=s[n]-65535-(a[n-1]>>16&1),a[n-1]&=65535;a[15]=s[15]-32767-(a[14]>>16&1),i=a[15]>>16&1,a[14]&=65535,O(s,a,1-i)}for(n=0;n<16;n++)e[2*n]=255&s[n],e[2*n+1]=s[n]>>8}function R(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return M(r,e),M(n,t),y(r,0,n,0)}function L(e){var t=new Uint8Array(32);return M(t,e),1&t[0]}function F(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function z(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function D(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function N(e,t,r){var n,o,i=0,a=0,s=0,l=0,c=0,u=0,d=0,h=0,p=0,f=0,m=0,g=0,y=0,v=0,b=0,x=0,_=0,w=0,S=0,k=0,T=0,E=0,C=0,A=0,j=0,P=0,I=0,O=0,M=0,R=0,L=0,F=r[0],z=r[1],D=r[2],N=r[3],B=r[4],U=r[5],V=r[6],W=r[7],q=r[8],H=r[9],G=r[10],K=r[11],X=r[12],Z=r[13],Y=r[14],J=r[15];i+=(n=t[0])*F,a+=n*z,s+=n*D,l+=n*N,c+=n*B,u+=n*U,d+=n*V,h+=n*W,p+=n*q,f+=n*H,m+=n*G,g+=n*K,y+=n*X,v+=n*Z,b+=n*Y,x+=n*J,a+=(n=t[1])*F,s+=n*z,l+=n*D,c+=n*N,u+=n*B,d+=n*U,h+=n*V,p+=n*W,f+=n*q,m+=n*H,g+=n*G,y+=n*K,v+=n*X,b+=n*Z,x+=n*Y,_+=n*J,s+=(n=t[2])*F,l+=n*z,c+=n*D,u+=n*N,d+=n*B,h+=n*U,p+=n*V,f+=n*W,m+=n*q,g+=n*H,y+=n*G,v+=n*K,b+=n*X,x+=n*Z,_+=n*Y,w+=n*J,l+=(n=t[3])*F,c+=n*z,u+=n*D,d+=n*N,h+=n*B,p+=n*U,f+=n*V,m+=n*W,g+=n*q,y+=n*H,v+=n*G,b+=n*K,x+=n*X,_+=n*Z,w+=n*Y,S+=n*J,c+=(n=t[4])*F,u+=n*z,d+=n*D,h+=n*N,p+=n*B,f+=n*U,m+=n*V,g+=n*W,y+=n*q,v+=n*H,b+=n*G,x+=n*K,_+=n*X,w+=n*Z,S+=n*Y,k+=n*J,u+=(n=t[5])*F,d+=n*z,h+=n*D,p+=n*N,f+=n*B,m+=n*U,g+=n*V,y+=n*W,v+=n*q,b+=n*H,x+=n*G,_+=n*K,w+=n*X,S+=n*Z,k+=n*Y,T+=n*J,d+=(n=t[6])*F,h+=n*z,p+=n*D,f+=n*N,m+=n*B,g+=n*U,y+=n*V,v+=n*W,b+=n*q,x+=n*H,_+=n*G,w+=n*K,S+=n*X,k+=n*Z,T+=n*Y,E+=n*J,h+=(n=t[7])*F,p+=n*z,f+=n*D,m+=n*N,g+=n*B,y+=n*U,v+=n*V,b+=n*W,x+=n*q,_+=n*H,w+=n*G,S+=n*K,k+=n*X,T+=n*Z,E+=n*Y,C+=n*J,p+=(n=t[8])*F,f+=n*z,m+=n*D,g+=n*N,y+=n*B,v+=n*U,b+=n*V,x+=n*W,_+=n*q,w+=n*H,S+=n*G,k+=n*K,T+=n*X,E+=n*Z,C+=n*Y,A+=n*J,f+=(n=t[9])*F,m+=n*z,g+=n*D,y+=n*N,v+=n*B,b+=n*U,x+=n*V,_+=n*W,w+=n*q,S+=n*H,k+=n*G,T+=n*K,E+=n*X,C+=n*Z,A+=n*Y,j+=n*J,m+=(n=t[10])*F,g+=n*z,y+=n*D,v+=n*N,b+=n*B,x+=n*U,_+=n*V,w+=n*W,S+=n*q,k+=n*H,T+=n*G,E+=n*K,C+=n*X,A+=n*Z,j+=n*Y,P+=n*J,g+=(n=t[11])*F,y+=n*z,v+=n*D,b+=n*N,x+=n*B,_+=n*U,w+=n*V,S+=n*W,k+=n*q,T+=n*H,E+=n*G,C+=n*K,A+=n*X,j+=n*Z,P+=n*Y,I+=n*J,y+=(n=t[12])*F,v+=n*z,b+=n*D,x+=n*N,_+=n*B,w+=n*U,S+=n*V,k+=n*W,T+=n*q,E+=n*H,C+=n*G,A+=n*K,j+=n*X,P+=n*Z,I+=n*Y,O+=n*J,v+=(n=t[13])*F,b+=n*z,x+=n*D,_+=n*N,w+=n*B,S+=n*U,k+=n*V,T+=n*W,E+=n*q,C+=n*H,A+=n*G,j+=n*K,P+=n*X,I+=n*Z,O+=n*Y,M+=n*J,b+=(n=t[14])*F,x+=n*z,_+=n*D,w+=n*N,S+=n*B,k+=n*U,T+=n*V,E+=n*W,C+=n*q,A+=n*H,j+=n*G,P+=n*K,I+=n*X,O+=n*Z,M+=n*Y,R+=n*J,x+=(n=t[15])*F,a+=38*(w+=n*D),s+=38*(S+=n*N),l+=38*(k+=n*B),c+=38*(T+=n*U),u+=38*(E+=n*V),d+=38*(C+=n*W),h+=38*(A+=n*q),p+=38*(j+=n*H),f+=38*(P+=n*G),m+=38*(I+=n*K),g+=38*(O+=n*X),y+=38*(M+=n*Z),v+=38*(R+=n*Y),b+=38*(L+=n*J),i=(n=(i+=38*(_+=n*z))+(o=1)+65535)-65536*(o=Math.floor(n/65536)),a=(n=a+o+65535)-65536*(o=Math.floor(n/65536)),s=(n=s+o+65535)-65536*(o=Math.floor(n/65536)),l=(n=l+o+65535)-65536*(o=Math.floor(n/65536)),c=(n=c+o+65535)-65536*(o=Math.floor(n/65536)),u=(n=u+o+65535)-65536*(o=Math.floor(n/65536)),d=(n=d+o+65535)-65536*(o=Math.floor(n/65536)),h=(n=h+o+65535)-65536*(o=Math.floor(n/65536)),p=(n=p+o+65535)-65536*(o=Math.floor(n/65536)),f=(n=f+o+65535)-65536*(o=Math.floor(n/65536)),m=(n=m+o+65535)-65536*(o=Math.floor(n/65536)),g=(n=g+o+65535)-65536*(o=Math.floor(n/65536)),y=(n=y+o+65535)-65536*(o=Math.floor(n/65536)),v=(n=v+o+65535)-65536*(o=Math.floor(n/65536)),b=(n=b+o+65535)-65536*(o=Math.floor(n/65536)),x=(n=x+o+65535)-65536*(o=Math.floor(n/65536)),i=(n=(i+=o-1+37*(o-1))+(o=1)+65535)-65536*(o=Math.floor(n/65536)),a=(n=a+o+65535)-65536*(o=Math.floor(n/65536)),s=(n=s+o+65535)-65536*(o=Math.floor(n/65536)),l=(n=l+o+65535)-65536*(o=Math.floor(n/65536)),c=(n=c+o+65535)-65536*(o=Math.floor(n/65536)),u=(n=u+o+65535)-65536*(o=Math.floor(n/65536)),d=(n=d+o+65535)-65536*(o=Math.floor(n/65536)),h=(n=h+o+65535)-65536*(o=Math.floor(n/65536)),p=(n=p+o+65535)-65536*(o=Math.floor(n/65536)),f=(n=f+o+65535)-65536*(o=Math.floor(n/65536)),m=(n=m+o+65535)-65536*(o=Math.floor(n/65536)),g=(n=g+o+65535)-65536*(o=Math.floor(n/65536)),y=(n=y+o+65535)-65536*(o=Math.floor(n/65536)),v=(n=v+o+65535)-65536*(o=Math.floor(n/65536)),b=(n=b+o+65535)-65536*(o=Math.floor(n/65536)),x=(n=x+o+65535)-65536*(o=Math.floor(n/65536)),i+=o-1+37*(o-1),e[0]=i,e[1]=a,e[2]=s,e[3]=l,e[4]=c,e[5]=u,e[6]=d,e[7]=h,e[8]=p,e[9]=f,e[10]=m,e[11]=g,e[12]=y,e[13]=v,e[14]=b,e[15]=x}function B(e,t){N(e,t,t)}function U(e,r){var n,o=t();for(n=0;n<16;n++)o[n]=r[n];for(n=253;n>=0;n--)B(o,o),2!==n&&4!==n&&N(o,o,r);for(n=0;n<16;n++)e[n]=o[n]}function V(e,r){var n,o=t();for(n=0;n<16;n++)o[n]=r[n];for(n=250;n>=0;n--)B(o,o),1!==n&&N(o,o,r);for(n=0;n<16;n++)e[n]=o[n]}function W(e,r,n){var o,i,a=new Uint8Array(32),s=new Float64Array(80),c=t(),u=t(),d=t(),h=t(),p=t(),f=t();for(i=0;i<31;i++)a[i]=r[i];for(a[31]=127&r[31]|64,a[0]&=248,F(s,n),i=0;i<16;i++)u[i]=s[i],h[i]=c[i]=d[i]=0;for(c[0]=h[0]=1,i=254;i>=0;--i)O(c,u,o=a[i>>>3]>>>(7&i)&1),O(d,h,o),z(p,c,d),D(c,c,d),z(d,u,h),D(u,u,h),B(h,p),B(f,c),N(c,d,c),N(d,u,p),z(p,c,d),D(c,c,d),B(u,c),D(d,h,f),N(c,d,l),z(c,c,h),N(d,d,c),N(c,h,f),N(h,u,s),B(u,p),O(c,u,o),O(d,h,o);for(i=0;i<16;i++)s[i+16]=c[i],s[i+32]=d[i],s[i+48]=u[i],s[i+64]=h[i];var m=s.subarray(32),g=s.subarray(16);return U(m,m),N(g,g,m),M(e,g),0}function q(e,t){return W(e,t,i)}function H(e,t){return n(t,32),q(e,t)}function G(e,t,r){var n=new Uint8Array(32);return W(n,r,t),b(e,o,n,x)}T.prototype.blocks=function(e,t,r){for(var n,o,i,a,s,l,c,u,d,h,p,f,m,g,y,v,b,x,_,w=this.fin?0:2048,S=this.h[0],k=this.h[1],T=this.h[2],E=this.h[3],C=this.h[4],A=this.h[5],j=this.h[6],P=this.h[7],I=this.h[8],O=this.h[9],M=this.r[0],R=this.r[1],L=this.r[2],F=this.r[3],z=this.r[4],D=this.r[5],N=this.r[6],B=this.r[7],U=this.r[8],V=this.r[9];r>=16;)h=d=0,h+=(S+=8191&(n=255&e[t+0]|(255&e[t+1])<<8))*M,h+=(k+=8191&(n>>>13|(o=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*V),h+=(T+=8191&(o>>>10|(i=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*U),h+=(E+=8191&(i>>>7|(a=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*B),d=(h+=(C+=8191&(a>>>4|(s=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*N))>>>13,h&=8191,h+=(A+=s>>>1&8191)*(5*D),h+=(j+=8191&(s>>>14|(l=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*z),h+=(P+=8191&(l>>>11|(c=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*F),h+=(I+=8191&(c>>>8|(u=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*L),p=d+=(h+=(O+=u>>>5|w)*(5*R))>>>13,p+=S*R,p+=k*M,p+=T*(5*V),p+=E*(5*U),d=(p+=C*(5*B))>>>13,p&=8191,p+=A*(5*N),p+=j*(5*D),p+=P*(5*z),p+=I*(5*F),d+=(p+=O*(5*L))>>>13,p&=8191,f=d,f+=S*L,f+=k*R,f+=T*M,f+=E*(5*V),d=(f+=C*(5*U))>>>13,f&=8191,f+=A*(5*B),f+=j*(5*N),f+=P*(5*D),f+=I*(5*z),m=d+=(f+=O*(5*F))>>>13,m+=S*F,m+=k*L,m+=T*R,m+=E*M,d=(m+=C*(5*V))>>>13,m&=8191,m+=A*(5*U),m+=j*(5*B),m+=P*(5*N),m+=I*(5*D),g=d+=(m+=O*(5*z))>>>13,g+=S*z,g+=k*F,g+=T*L,g+=E*R,d=(g+=C*M)>>>13,g&=8191,g+=A*(5*V),g+=j*(5*U),g+=P*(5*B),g+=I*(5*N),y=d+=(g+=O*(5*D))>>>13,y+=S*D,y+=k*z,y+=T*F,y+=E*L,d=(y+=C*R)>>>13,y&=8191,y+=A*M,y+=j*(5*V),y+=P*(5*U),y+=I*(5*B),v=d+=(y+=O*(5*N))>>>13,v+=S*N,v+=k*D,v+=T*z,v+=E*F,d=(v+=C*L)>>>13,v&=8191,v+=A*R,v+=j*M,v+=P*(5*V),v+=I*(5*U),b=d+=(v+=O*(5*B))>>>13,b+=S*B,b+=k*N,b+=T*D,b+=E*z,d=(b+=C*F)>>>13,b&=8191,b+=A*L,b+=j*R,b+=P*M,b+=I*(5*V),x=d+=(b+=O*(5*U))>>>13,x+=S*U,x+=k*B,x+=T*N,x+=E*D,d=(x+=C*z)>>>13,x&=8191,x+=A*F,x+=j*L,x+=P*R,x+=I*M,_=d+=(x+=O*(5*V))>>>13,_+=S*V,_+=k*U,_+=T*B,_+=E*N,d=(_+=C*D)>>>13,_&=8191,_+=A*z,_+=j*F,_+=P*L,_+=I*R,S=h=8191&(d=(d=((d+=(_+=O*M)>>>13)<<2)+d|0)+(h&=8191)|0),k=p+=d>>>=13,T=f&=8191,E=m&=8191,C=g&=8191,A=y&=8191,j=v&=8191,P=b&=8191,I=x&=8191,O=_&=8191,t+=16,r-=16;this.h[0]=S,this.h[1]=k,this.h[2]=T,this.h[3]=E,this.h[4]=C,this.h[5]=A,this.h[6]=j,this.h[7]=P,this.h[8]=I,this.h[9]=O},T.prototype.finish=function(e,t){var r,n,o,i,a=new Uint16Array(10);if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=r,r=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,a[0]=this.h[0]+5,r=a[0]>>>13,a[0]&=8191,i=1;i<10;i++)a[i]=this.h[i]+r,r=a[i]>>>13,a[i]&=8191;for(a[9]-=8192,n=(1^r)-1,i=0;i<10;i++)a[i]&=n;for(n=~n,i=0;i<10;i++)this.h[i]=this.h[i]&n|a[i];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),o=this.h[0]+this.pad[0],this.h[0]=65535&o,i=1;i<8;i++)o=(this.h[i]+this.pad[i]|0)+(o>>>16)|0,this.h[i]=65535&o;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},T.prototype.update=function(e,t,r){var n,o;if(this.leftover){for((o=16-this.leftover)>r&&(o=r),n=0;n<o;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=o,t+=o,this.leftover+=o,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(o=r-r%16,this.blocks(e,t,o),t+=o,r-=o),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var K=A,X=j,Z=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Y(e,t,r,n){for(var o,i,a,s,l,c,u,d,h,p,f,m,g,y,v,b,x,_,w,S,k,T,E,C,A,j,P=new Int32Array(16),I=new Int32Array(16),O=e[0],M=e[1],R=e[2],L=e[3],F=e[4],z=e[5],D=e[6],N=e[7],B=t[0],U=t[1],V=t[2],W=t[3],q=t[4],H=t[5],G=t[6],K=t[7],X=0;n>=128;){for(w=0;w<16;w++)S=8*w+X,P[w]=r[S+0]<<24|r[S+1]<<16|r[S+2]<<8|r[S+3],I[w]=r[S+4]<<24|r[S+5]<<16|r[S+6]<<8|r[S+7];for(w=0;w<80;w++)if(o=O,i=M,a=R,s=L,l=F,c=z,u=D,h=B,p=U,f=V,m=W,g=q,y=H,v=G,E=65535&(T=K),C=T>>>16,A=65535&(k=N),j=k>>>16,E+=65535&(T=(q>>>14|F<<18)^(q>>>18|F<<14)^(F>>>9|q<<23)),C+=T>>>16,A+=65535&(k=(F>>>14|q<<18)^(F>>>18|q<<14)^(q>>>9|F<<23)),j+=k>>>16,E+=65535&(T=q&H^~q&G),C+=T>>>16,A+=65535&(k=F&z^~F&D),j+=k>>>16,E+=65535&(T=Z[2*w+1]),C+=T>>>16,A+=65535&(k=Z[2*w]),j+=k>>>16,k=P[w%16],C+=(T=I[w%16])>>>16,A+=65535&k,j+=k>>>16,A+=(C+=(E+=65535&T)>>>16)>>>16,E=65535&(T=_=65535&E|C<<16),C=T>>>16,A=65535&(k=x=65535&A|(j+=A>>>16)<<16),j=k>>>16,E+=65535&(T=(B>>>28|O<<4)^(O>>>2|B<<30)^(O>>>7|B<<25)),C+=T>>>16,A+=65535&(k=(O>>>28|B<<4)^(B>>>2|O<<30)^(B>>>7|O<<25)),j+=k>>>16,C+=(T=B&U^B&V^U&V)>>>16,A+=65535&(k=O&M^O&R^M&R),j+=k>>>16,d=65535&(A+=(C+=(E+=65535&T)>>>16)>>>16)|(j+=A>>>16)<<16,b=65535&E|C<<16,E=65535&(T=m),C=T>>>16,A=65535&(k=s),j=k>>>16,C+=(T=_)>>>16,A+=65535&(k=x),j+=k>>>16,M=o,R=i,L=a,F=s=65535&(A+=(C+=(E+=65535&T)>>>16)>>>16)|(j+=A>>>16)<<16,z=l,D=c,N=u,O=d,U=h,V=p,W=f,q=m=65535&E|C<<16,H=g,G=y,K=v,B=b,w%16==15)for(S=0;S<16;S++)k=P[S],E=65535&(T=I[S]),C=T>>>16,A=65535&k,j=k>>>16,k=P[(S+9)%16],E+=65535&(T=I[(S+9)%16]),C+=T>>>16,A+=65535&k,j+=k>>>16,x=P[(S+1)%16],E+=65535&(T=((_=I[(S+1)%16])>>>1|x<<31)^(_>>>8|x<<24)^(_>>>7|x<<25)),C+=T>>>16,A+=65535&(k=(x>>>1|_<<31)^(x>>>8|_<<24)^x>>>7),j+=k>>>16,x=P[(S+14)%16],C+=(T=((_=I[(S+14)%16])>>>19|x<<13)^(x>>>29|_<<3)^(_>>>6|x<<26))>>>16,A+=65535&(k=(x>>>19|_<<13)^(_>>>29|x<<3)^x>>>6),j+=k>>>16,j+=(A+=(C+=(E+=65535&T)>>>16)>>>16)>>>16,P[S]=65535&A|j<<16,I[S]=65535&E|C<<16;E=65535&(T=B),C=T>>>16,A=65535&(k=O),j=k>>>16,k=e[0],C+=(T=t[0])>>>16,A+=65535&k,j+=k>>>16,j+=(A+=(C+=(E+=65535&T)>>>16)>>>16)>>>16,e[0]=O=65535&A|j<<16,t[0]=B=65535&E|C<<16,E=65535&(T=U),C=T>>>16,A=65535&(k=M),j=k>>>16,k=e[1],C+=(T=t[1])>>>16,A+=65535&k,j+=k>>>16,j+=(A+=(C+=(E+=65535&T)>>>16)>>>16)>>>16,e[1]=M=65535&A|j<<16,t[1]=U=65535&E|C<<16,E=65535&(T=V),C=T>>>16,A=65535&(k=R),j=k>>>16,k=e[2],C+=(T=t[2])>>>16,A+=65535&k,j+=k>>>16,j+=(A+=(C+=(E+=65535&T)>>>16)>>>16)>>>16,e[2]=R=65535&A|j<<16,t[2]=V=65535&E|C<<16,E=65535&(T=W),C=T>>>16,A=65535&(k=L),j=k>>>16,k=e[3],C+=(T=t[3])>>>16,A+=65535&k,j+=k>>>16,j+=(A+=(C+=(E+=65535&T)>>>16)>>>16)>>>16,e[3]=L=65535&A|j<<16,t[3]=W=65535&E|C<<16,E=65535&(T=q),C=T>>>16,A=65535&(k=F),j=k>>>16,k=e[4],C+=(T=t[4])>>>16,A+=65535&k,j+=k>>>16,j+=(A+=(C+=(E+=65535&T)>>>16)>>>16)>>>16,e[4]=F=65535&A|j<<16,t[4]=q=65535&E|C<<16,E=65535&(T=H),C=T>>>16,A=65535&(k=z),j=k>>>16,k=e[5],C+=(T=t[5])>>>16,A+=65535&k,j+=k>>>16,j+=(A+=(C+=(E+=65535&T)>>>16)>>>16)>>>16,e[5]=z=65535&A|j<<16,t[5]=H=65535&E|C<<16,E=65535&(T=G),C=T>>>16,A=65535&(k=D),j=k>>>16,k=e[6],C+=(T=t[6])>>>16,A+=65535&k,j+=k>>>16,j+=(A+=(C+=(E+=65535&T)>>>16)>>>16)>>>16,e[6]=D=65535&A|j<<16,t[6]=G=65535&E|C<<16,E=65535&(T=K),C=T>>>16,A=65535&(k=N),j=k>>>16,k=e[7],C+=(T=t[7])>>>16,A+=65535&k,j+=k>>>16,j+=(A+=(C+=(E+=65535&T)>>>16)>>>16)>>>16,e[7]=N=65535&A|j<<16,t[7]=K=65535&E|C<<16,X+=128,n-=128}return n}function J(e,t,r){var n,o=new Int32Array(8),i=new Int32Array(8),a=new Uint8Array(256),s=r;for(o[0]=1779033703,o[1]=3144134277,o[2]=1013904242,o[3]=2773480762,o[4]=1359893119,o[5]=2600822924,o[6]=528734635,o[7]=1541459225,i[0]=4089235720,i[1]=2227873595,i[2]=4271175723,i[3]=1595750129,i[4]=2917565137,i[5]=725511199,i[6]=4215389547,i[7]=327033209,Y(o,i,t,r),r%=128,n=0;n<r;n++)a[n]=t[s-r+n];for(a[r]=128,a[(r=256-128*(r<112?1:0))-9]=0,f(a,r-8,s/536870912|0,s<<3),Y(o,i,a,r),n=0;n<8;n++)f(e,8*n,o[n],i[n]);return 0}function $(e,r){var n=t(),o=t(),i=t(),a=t(),s=t(),l=t(),c=t(),d=t(),h=t();D(n,e[1],e[0]),D(h,r[1],r[0]),N(n,n,h),z(o,e[0],e[1]),z(h,r[0],r[1]),N(o,o,h),N(i,e[3],r[3]),N(i,i,u),N(a,e[2],r[2]),z(a,a,a),D(s,o,n),D(l,a,i),z(c,a,i),z(d,o,n),N(e[0],s,l),N(e[1],d,c),N(e[2],c,l),N(e[3],s,d)}function Q(e,t,r){var n;for(n=0;n<4;n++)O(e[n],t[n],r)}function ee(e,r){var n=t(),o=t(),i=t();U(i,r[2]),N(n,r[0],i),N(o,r[1],i),M(e,o),e[31]^=L(n)<<7}function te(e,t,r){var n,o;for(P(e[0],a),P(e[1],s),P(e[2],s),P(e[3],a),o=255;o>=0;--o)Q(e,t,n=r[o/8|0]>>(7&o)&1),$(t,e),$(e,e),Q(e,t,n)}function re(e,r){var n=[t(),t(),t(),t()];P(n[0],d),P(n[1],h),P(n[2],s),N(n[3],d,h),te(e,n,r)}function ne(e,r,o){var i,a=new Uint8Array(64),s=[t(),t(),t(),t()];for(o||n(r,32),J(a,r,32),a[0]&=248,a[31]&=127,a[31]|=64,re(s,a),ee(e,s),i=0;i<32;i++)r[i+32]=e[i];return 0}var oe=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ie(e,t){var r,n,o,i;for(n=63;n>=32;--n){for(r=0,o=n-32,i=n-12;o<i;++o)t[o]+=r-16*t[n]*oe[o-(n-32)],r=Math.floor((t[o]+128)/256),t[o]-=256*r;t[o]+=r,t[n]=0}for(r=0,o=0;o<32;o++)t[o]+=r-(t[31]>>4)*oe[o],r=t[o]>>8,t[o]&=255;for(o=0;o<32;o++)t[o]-=r*oe[o];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function ae(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;ie(e,r)}function se(e,r,n,o){var i,a,s=new Uint8Array(64),l=new Uint8Array(64),c=new Uint8Array(64),u=new Float64Array(64),d=[t(),t(),t(),t()];J(s,o,32),s[0]&=248,s[31]&=127,s[31]|=64;var h=n+64;for(i=0;i<n;i++)e[64+i]=r[i];for(i=0;i<32;i++)e[32+i]=s[32+i];for(J(c,e.subarray(32),n+32),ae(c),re(d,c),ee(e,d),i=32;i<64;i++)e[i]=o[i];for(J(l,e,n+64),ae(l),i=0;i<64;i++)u[i]=0;for(i=0;i<32;i++)u[i]=c[i];for(i=0;i<32;i++)for(a=0;a<32;a++)u[i+a]+=l[i]*s[a];return ie(e.subarray(32),u),h}function le(e,r,n,o){var i,l=new Uint8Array(32),u=new Uint8Array(64),d=[t(),t(),t(),t()],h=[t(),t(),t(),t()];if(n<64)return-1;if(function(e,r){var n=t(),o=t(),i=t(),l=t(),u=t(),d=t(),h=t();return P(e[2],s),F(e[1],r),B(i,e[1]),N(l,i,c),D(i,i,e[2]),z(l,e[2],l),B(u,l),B(d,u),N(h,d,u),N(n,h,i),N(n,n,l),V(n,n),N(n,n,i),N(n,n,l),N(n,n,l),N(e[0],n,l),B(o,e[0]),N(o,o,l),R(o,i)&&N(e[0],e[0],p),B(o,e[0]),N(o,o,l),R(o,i)?-1:(L(e[0])===r[31]>>7&&D(e[0],a,e[0]),N(e[3],e[0],e[1]),0)}(h,o))return-1;for(i=0;i<n;i++)e[i]=r[i];for(i=0;i<32;i++)e[i+32]=o[i];if(J(u,e,n),ae(u),te(d,h,u),re(h,r.subarray(32)),$(d,h),ee(l,d),n-=64,y(r,0,l,0)){for(i=0;i<n;i++)e[i]=0;return-1}for(i=0;i<n;i++)e[i]=r[i+64];return n}var ce=64,ue=32,de=64;function he(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function pe(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function fe(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:b,crypto_stream_xor:k,crypto_stream:S,crypto_stream_salsa20_xor:_,crypto_stream_salsa20:w,crypto_onetimeauth:E,crypto_onetimeauth_verify:C,crypto_verify_16:g,crypto_verify_32:y,crypto_secretbox:A,crypto_secretbox_open:j,crypto_scalarmult:W,crypto_scalarmult_base:q,crypto_box_beforenm:G,crypto_box_afternm:K,crypto_box:function(e,t,r,n,o,i){var a=new Uint8Array(32);return G(a,o,i),K(e,t,r,n,a)},crypto_box_open:function(e,t,r,n,o,i){var a=new Uint8Array(32);return G(a,o,i),X(e,t,r,n,a)},crypto_box_keypair:H,crypto_hash:J,crypto_sign:se,crypto_sign_keypair:ne,crypto_sign_open:le,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:ce,crypto_sign_PUBLICKEYBYTES:ue,crypto_sign_SECRETKEYBYTES:de,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:t,D:c,L:oe,pack25519:M,unpack25519:F,M:N,A:z,S:B,Z:D,pow2523:V,add:$,set25519:P,modL:ie,scalarmult:te,scalarbase:re},e.randomBytes=function(e){var t=new Uint8Array(e);return n(t,e),t},e.secretbox=function(e,t,r){pe(e,t,r),he(r,t);for(var n=new Uint8Array(32+e.length),o=new Uint8Array(n.length),i=0;i<e.length;i++)n[i+32]=e[i];return A(o,n,n.length,t,r),o.subarray(16)},e.secretbox.open=function(e,t,r){pe(e,t,r),he(r,t);for(var n=new Uint8Array(16+e.length),o=new Uint8Array(n.length),i=0;i<e.length;i++)n[i+16]=e[i];return n.length<32||0!==j(o,n,n.length,t,r)?null:o.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=16,e.scalarMult=function(e,t){if(pe(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return W(r,e,t),r},e.scalarMult.base=function(e){if(pe(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return q(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,n,o){var i=e.box.before(n,o);return e.secretbox(t,r,i)},e.box.before=function(e,t){pe(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return G(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,n,o){var i=e.box.before(n,o);return e.secretbox.open(t,r,i)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return H(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(pe(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return q(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(pe(e,t),t.length!==de)throw new Error("bad secret key size");var r=new Uint8Array(ce+e.length);return se(r,e,e.length,t),r},e.sign.open=function(e,t){if(pe(e,t),t.length!==ue)throw new Error("bad public key size");var r=new Uint8Array(e.length),n=le(r,e,e.length,t);if(n<0)return null;for(var o=new Uint8Array(n),i=0;i<o.length;i++)o[i]=r[i];return o},e.sign.detached=function(t,r){for(var n=e.sign(t,r),o=new Uint8Array(ce),i=0;i<o.length;i++)o[i]=n[i];return o},e.sign.detached.verify=function(e,t,r){if(pe(e,t,r),t.length!==ce)throw new Error("bad signature size");if(r.length!==ue)throw new Error("bad public key size");var n,o=new Uint8Array(ce+e.length),i=new Uint8Array(ce+e.length);for(n=0;n<ce;n++)o[n]=t[n];for(n=0;n<e.length;n++)o[n+ce]=e[n];return le(i,o,o.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(ue),t=new Uint8Array(de);return ne(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(pe(e),e.length!==de)throw new Error("bad secret key size");for(var t=new Uint8Array(ue),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(pe(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(ue),r=new Uint8Array(de),n=0;n<32;n++)r[n]=e[n];return ne(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=ue,e.sign.secretKeyLength=de,e.sign.seedLength=32,e.sign.signatureLength=ce,e.hash=function(e){pe(e);var t=new Uint8Array(64);return J(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return pe(e,t),0!==e.length&&0!==t.length&&e.length===t.length&&0===m(e,0,t,0,e.length)},e.setPRNG=function(e){n=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;t&&t.getRandomValues?e.setPRNG((function(e,r){var n,o=new Uint8Array(r);for(n=0;n<r;n+=65536)t.getRandomValues(o.subarray(n,n+Math.min(r-n,65536)));for(n=0;n<r;n++)e[n]=o[n];fe(o)})):(t=r(2894))&&t.randomBytes&&e.setPRNG((function(e,r){var n,o=t.randomBytes(r);for(n=0;n<r;n++)e[n]=o[n];fe(o)}))}()}(e.exports?e.exports:self.nacl=self.nacl||{})},1924:(e,t,r)=>{"use strict";r.r(t),r.d(t,{StellarBase:()=>a,axios:()=>n.A,default:()=>s});var n=r(1083),o=r(4356),i={};for(const l in o)["default","StellarBase","axios"].indexOf(l)<0&&(i[l]=()=>o[l]);r.d(t,i);var a=r(356);const s=(e=r.hmd(e)).exports},8732:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}r.d(t,{T:()=>p});var c,u,d={allowHttp:!1,timeout:0},h=a({},d),p=(c=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},u=[{key:"setAllowHttp",value:function(e){h.allowHttp=e}},{key:"setTimeout",value:function(e){h.timeout=e}},{key:"isAllowHttp",value:function(){return h.allowHttp}},{key:"getTimeout",value:function(){return h.timeout}},{key:"setDefault",value:function(){h=a({},d)}}],u&&o(c,u),Object.defineProperty(c,"prototype",{writable:!1}),c)},6299:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AssembledTransaction:()=>pe,Client:()=>Xe,DEFAULT_TIMEOUT:()=>f,Err:()=>p,NULL_ACCOUNT:()=>m,Ok:()=>h,SentTransaction:()=>W,Spec:()=>Le,basicNodeSigner:()=>be});var n=r(356),o=r(1575),i=r(4076),a=r(8680);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function u(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}var h=u((function e(t){l(this,e),this.value=t}),[{key:"unwrapErr",value:function(){throw new Error("No error")}},{key:"unwrap",value:function(){return this.value}},{key:"isOk",value:function(){return!0}},{key:"isErr",value:function(){return!1}}]),p=u((function e(t){l(this,e),this.error=t}),[{key:"unwrapErr",value:function(){return this.error}},{key:"unwrap",value:function(){throw new Error(this.error.message)}},{key:"isOk",value:function(){return!1}},{key:"isErr",value:function(){return!0}}]),f=300,m="GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWHF";function g(){g=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),s=new O(n||[]);return o(a,"_invoke",{value:A(e,r,s)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function b(){}function x(){}function _(){}var w={};c(w,a,(function(){return this}));var S=Object.getPrototypeOf,k=S&&S(S(M([])));k&&k!==r&&n.call(k,a)&&(w=k);var T=_.prototype=b.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,i,a,s){var l=d(e[o],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==y(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=j(s,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var c=d(t,r,n);if("normal"===c.type){if(o=n.done?m:p,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=d(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function M(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(y(t)+" is not iterable")}return x.prototype=_,o(T,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:x,configurable:!0}),x.displayName=c(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,l,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},E(C.prototype),c(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new C(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(T),c(T,l,"Generator"),c(T,a,(function(){return this})),c(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=M,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:M(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){v(i,n,o,a,s,"next",e)}function s(e){v(i,n,o,a,s,"throw",e)}a(void 0)}))}}function x(e,t,r){return _.apply(this,arguments)}function _(){return _=b(g().mark((function e(t,r,n){var o,i,a,s,l,c,u,d=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=d.length>3&&void 0!==d[3]?d[3]:1.5,i=d.length>4&&void 0!==d[4]&&d[4],a=[],s=0,e.t0=a,e.next=7,t();case 7:if(e.t1=e.sent,e.t0.push.call(e.t0,e.t1),r(a[a.length-1])){e.next=11;break}return e.abrupt("return",a);case 11:l=new Date(Date.now()+1e3*n).valueOf(),u=c=1e3;case 14:if(!(Date.now()<l&&r(a[a.length-1]))){e.next=30;break}return s+=1,i&&console.info("Waiting ".concat(c,"ms before trying again (bringing the total wait time to ").concat(u,"ms so far, of total ").concat(1e3*n,"ms)")),e.next=19,new Promise((function(e){return setTimeout(e,c)}));case 19:return c*=o,new Date(Date.now()+c).valueOf()>l&&(c=l-Date.now(),i&&console.info("was gonna wait too long; new waitTime: ".concat(c,"ms"))),u=c+u,e.t2=a,e.next=25,t(a[a.length-1]);case 25:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),i&&r(a[a.length-1])&&console.info("".concat(s,". Called ").concat(t,"; ").concat(a.length," prev attempts. Most recent: ").concat(JSON.stringify(a[a.length-1],null,2))),e.next=14;break;case 30:return e.abrupt("return",a);case 31:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}var w,S=/Error\(Contract, #(\d+)\)/;function k(e){for(var t=new n.cereal.XdrReader(e),r=[];!t.eof;)r.push(n.xdr.ScSpecEntry.read(t));return r}function T(e,t){return E.apply(this,arguments)}function E(){return E=b(g().mark((function e(t,r){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.publicKey?r.getAccount(t.publicKey):new n.Account(m,"0"));case 1:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function C(e,t,r){return t=O(t),function(e,t){if(t&&("object"==M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,P()?Reflect.construct(t,r||[],O(e).constructor):t.apply(e,r))}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}function j(e){var t="function"==typeof Map?new Map:void 0;return j=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(P())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var o=new(e.bind.apply(e,n));return r&&I(o,r.prototype),o}(e,arguments,O(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),I(r,e)},j(e)}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function R(){R=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),s=new P(n||[]);return o(a,"_invoke",{value:E(e,r,s)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function y(){}function v(){}function b(){}var x={};c(x,a,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(I([])));w&&w!==r&&n.call(w,a)&&(x=w);var S=b.prototype=y.prototype=Object.create(x);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function r(o,i,a,s){var l=d(e[o],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==M(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function E(t,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=C(s,n);if(l){if(l===g)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var c=d(t,r,n);if("normal"===c.type){if(o=n.done?m:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function C(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=d(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(M(t)+" is not iterable")}return v.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:v,configurable:!0}),v.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(T.prototype),c(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new T(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function L(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function F(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){L(i,n,o,a,s,"next",e)}function s(e){L(i,n,o,a,s,"throw",e)}a(void 0)}))}}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,U(n.key),n)}}function N(e,t,r){return t&&D(e.prototype,t),r&&D(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function B(e,t,r){return(t=U(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e){var t=function(e){if("object"!=M(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==M(t)?t:t+""}var V,W=function(){function e(t,r){var n,a=this;z(this,e),B(this,"send",F(R().mark((function t(){var r,n,o;return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.server.sendTransaction(a.assembled.signed);case 2:if(a.sendTransactionResponse=t.sent,"PENDING"===a.sendTransactionResponse.status){t.next=5;break}throw new e.Errors.SendFailed("Sending the transaction to the network failed!\n".concat(JSON.stringify(a.sendTransactionResponse,null,2)));case 5:return n=a.sendTransactionResponse.hash,o=null!==(r=a.assembled.options.timeoutInSeconds)&&void 0!==r?r:f,t.next=9,x((function(){return a.server.getTransaction(n)}),(function(e){return e.status===i.j.GetTransactionStatus.NOT_FOUND}),o);case 9:if(a.getTransactionResponseAll=t.sent,a.getTransactionResponse=a.getTransactionResponseAll[a.getTransactionResponseAll.length-1],a.getTransactionResponse.status!==i.j.GetTransactionStatus.NOT_FOUND){t.next=13;break}throw new e.Errors.TransactionStillPending("Waited ".concat(o," seconds for transaction to complete, but it did not. ")+"Returning anyway. Check the transaction status manually. "+"Sent transaction: ".concat(JSON.stringify(a.sendTransactionResponse,null,2),"\n")+"All attempts to get the result: ".concat(JSON.stringify(a.getTransactionResponseAll,null,2)));case 13:return t.abrupt("return",a);case 14:case"end":return t.stop()}}),t)})))),this.assembled=r,this.server=new o.gq(this.assembled.options.rpcUrl,{allowHttp:null!==(n=this.assembled.options.allowHttp)&&void 0!==n&&n})}return N(e,[{key:"result",get:function(){if("getTransactionResponse"in this&&this.getTransactionResponse){if("returnValue"in this.getTransactionResponse)return this.assembled.options.parseResultXdr(this.getTransactionResponse.returnValue);throw new Error("Transaction failed! Cannot parse result.")}if(this.sendTransactionResponse){var t,r=null===(t=this.sendTransactionResponse.errorResult)||void 0===t?void 0:t.result();if(r)throw new e.Errors.SendFailed("Transaction simulation looked correct, but attempting to send the transaction failed. Check `simulation` and `sendTransactionResponseAll` to troubleshoot. Decoded `sendTransactionResponse.errorResultXdr`: ".concat(r));throw new e.Errors.SendResultOnly("Transaction was sent to the network, but not yet awaited. No result to show. Await transaction completion with `getTransaction(sendTransactionResponse.hash)`")}throw new Error("Sending transaction failed: ".concat(JSON.stringify(this.assembled.signed)))}}])}();w=W,B(W,"Errors",{SendFailed:function(e){function t(){return z(this,t),C(this,t,arguments)}return A(t,e),N(t)}(j(Error)),SendResultOnly:function(e){function t(){return z(this,t),C(this,t,arguments)}return A(t,e),N(t)}(j(Error)),TransactionStillPending:function(e){function t(){return z(this,t),C(this,t,arguments)}return A(t,e),N(t)}(j(Error))}),B(W,"init",(V=F(R().mark((function e(t,r){var n,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new w(void 0,r),e.next=3,n.send();case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)}))),function(e,t){return V.apply(this,arguments)}));var q=r(8287).Buffer;function H(e,t,r){return t=Y(t),function(e,t){if(t&&("object"==J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,X()?Reflect.construct(t,r||[],Y(e).constructor):t.apply(e,r))}function G(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}function K(e){var t="function"==typeof Map?new Map:void 0;return K=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(X())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var o=new(e.bind.apply(e,n));return r&&Z(o,r.prototype),o}(e,arguments,Y(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Z(r,e)},K(e)}function X(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(X=function(){return!!e})()}function Z(e,t){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Z(e,t)}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){de(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||oe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=oe(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function re(){re=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),s=new P(n||[]);return o(a,"_invoke",{value:E(e,r,s)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function y(){}function v(){}function b(){}var x={};c(x,a,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(I([])));w&&w!==r&&n.call(w,a)&&(x=w);var S=b.prototype=y.prototype=Object.create(x);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function r(o,i,a,s){var l=d(e[o],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==J(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function E(t,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=C(s,n);if(l){if(l===g)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var c=d(t,r,n);if("normal"===c.type){if(o=n.done?m:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function C(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=d(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(J(t)+" is not iterable")}return v.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:v,configurable:!0}),v.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(T.prototype),c(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new T(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function ne(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){if(e){if("string"==typeof e)return ie(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ie(e,t):void 0}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ae(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function se(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ae(i,n,o,a,s,"next",e)}function s(e){ae(i,n,o,a,s,"throw",e)}a(void 0)}))}}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,he(n.key),n)}}function ue(e,t,r){return t&&ce(e.prototype,t),r&&ce(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function de(e,t,r){return(t=he(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function he(e){var t=function(e){if("object"!=J(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==J(t)?t:t+""}var pe=function(){function e(t){var r,s,l=this;le(this,e),de(this,"simulate",se(re().mark((function t(){var r,o,s,c,u,d,h,p,m=arguments;return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=(m.length>0&&void 0!==m[0]?m[0]:{}).restore,l.built){t.next=5;break}if(l.raw){t.next=4;break}throw new Error("Transaction has not yet been assembled; call `AssembledTransaction.build` first.");case 4:l.built=l.raw.build();case 5:return o=null!==(r=o)&&void 0!==r?r:l.options.restore,delete l.simulationResult,delete l.simulationTransactionData,t.next=10,l.server.simulateTransaction(l.built);case 10:if(l.simulation=t.sent,!o||!i.j.isSimulationRestore(l.simulation)){t.next=25;break}return t.next=14,T(l.options,l.server);case 14:return s=t.sent,t.next=17,l.restoreFootprint(l.simulation.restorePreamble,s);case 17:if((c=t.sent).status!==i.j.GetTransactionStatus.SUCCESS){t.next=24;break}return p=new n.Contract(l.options.contractId),l.raw=new n.TransactionBuilder(s,{fee:null!==(u=l.options.fee)&&void 0!==u?u:n.BASE_FEE,networkPassphrase:l.options.networkPassphrase}).addOperation(p.call.apply(p,[l.options.method].concat(ne(null!==(d=l.options.args)&&void 0!==d?d:[])))).setTimeout(null!==(h=l.options.timeoutInSeconds)&&void 0!==h?h:f),t.next=23,l.simulate();case 23:return t.abrupt("return",l);case 24:throw new e.Errors.RestorationFailure("Automatic restore failed! You set 'restore: true' but the attempted restore did not work. Result:\n".concat(JSON.stringify(c)));case 25:return i.j.isSimulationSuccess(l.simulation)&&(l.built=(0,a.X)(l.built,l.simulation).build()),t.abrupt("return",l);case 27:case"end":return t.stop()}}),t)})))),de(this,"sign",se(re().mark((function t(){var r,o,i,a,s,c,u,d,h=arguments;return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=(o=h.length>0&&void 0!==h[0]?h[0]:{}).force,a=void 0!==i&&i,s=o.signTransaction,c=void 0===s?l.options.signTransaction:s,l.built){t.next=3;break}throw new Error("Transaction has not yet been simulated");case 3:if(a||!l.isReadCall){t.next=5;break}throw new e.Errors.NoSignatureNeeded("This is a read call. It requires no signature or sending. Use `force: true` to sign and send anyway.");case 5:if(c){t.next=7;break}throw new e.Errors.NoSigner("You must provide a signTransaction function, either when calling `signAndSend` or when initializing your Client");case 7:if(!l.needsNonInvokerSigningBy().length){t.next=9;break}throw new e.Errors.NeedsMoreSignatures("Transaction requires more signatures. See `needsNonInvokerSigningBy` for details.");case 9:return u=null!==(r=l.options.timeoutInSeconds)&&void 0!==r?r:f,l.built=n.TransactionBuilder.cloneFrom(l.built,{fee:l.built.fee,timebounds:void 0,sorobanData:l.simulationData.transactionData}).setTimeout(u).build(),t.next=13,c(l.built.toXDR(),{networkPassphrase:l.options.networkPassphrase});case 13:d=t.sent,l.signed=n.TransactionBuilder.fromXDR(d,l.options.networkPassphrase);case 15:case"end":return t.stop()}}),t)})))),de(this,"signAndSend",se(re().mark((function e(){var t,r,n,o,i,a=arguments;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(t=a.length>0&&void 0!==a[0]?a[0]:{}).force,n=void 0!==r&&r,o=t.signTransaction,i=void 0===o?l.options.signTransaction:o,l.signed){e.next=4;break}return e.next=4,l.sign({force:n,signTransaction:i});case 4:return e.abrupt("return",l.send());case 5:case"end":return e.stop()}}),e)})))),de(this,"needsNonInvokerSigningBy",(function(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeAlreadySigned,r=void 0!==t&&t;if(!l.built)throw new Error("Transaction has not yet been simulated");if(!("operations"in l.built))throw new Error("Unexpected Transaction type; no operations: ".concat(JSON.stringify(l.built)));var o=l.built.operations[0];return ne(new Set((null!==(e=o.auth)&&void 0!==e?e:[]).filter((function(e){return e.credentials().switch()===n.xdr.SorobanCredentialsType.sorobanCredentialsAddress()&&(r||"scvVoid"===e.credentials().address().signature().switch().name)})).map((function(e){return n.StrKey.encodeEd25519PublicKey(e.credentials().address().address().accountId().ed25519())}))))})),de(this,"signAuthEntries",se(re().mark((function t(){var r,o,i,a,s,c,u,d,h,p,f,m,g,y,v,b,x=arguments;return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=(o=x.length>0&&void 0!==x[0]?x[0]:{}).expiration,a=void 0===i?se(re().mark((function e(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.server.getLatestLedger();case 2:return e.t0=e.sent.sequence,e.abrupt("return",e.t0+100);case 4:case"end":return e.stop()}}),e)})))():i,s=o.signAuthEntry,c=void 0===s?l.options.signAuthEntry:s,u=o.publicKey,d=void 0===u?l.options.publicKey:u,l.built){t.next=3;break}throw new Error("Transaction has not yet been assembled or simulated");case 3:if(h=l.needsNonInvokerSigningBy()){t.next=6;break}throw new e.Errors.NoUnsignedNonInvokerAuthEntries("No unsigned non-invoker auth entries; maybe you already signed?");case 6:if(-1!==h.indexOf(null!=d?d:"")){t.next=8;break}throw new e.Errors.NoSignatureNeeded('No auth entries for public key "'.concat(d,'"'));case 8:if(c){t.next=10;break}throw new e.Errors.NoSigner("You must provide `signAuthEntry` when calling `signAuthEntries`, or when constructing the `Client` or `AssembledTransaction`");case 10:p=l.built.operations[0],f=null!==(r=p.auth)&&void 0!==r?r:[],m=te(f.entries()),t.prev=13,m.s();case 15:if((g=m.n()).done){t.next=34;break}if(y=ee(g.value,2),v=y[0],(b=y[1]).credentials().switch()===n.xdr.SorobanCredentialsType.sorobanCredentialsAddress()){t.next=19;break}return t.abrupt("continue",32);case 19:if(n.StrKey.encodeEd25519PublicKey(b.credentials().address().address().accountId().ed25519())===d){t.next=22;break}return t.abrupt("continue",32);case 22:return t.t0=n.authorizeEntry,t.t1=b,t.t2=function(){var e=se(re().mark((function e(t){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=q,e.next=3,c(t.toXDR("base64"));case 3:return e.t1=e.sent,e.abrupt("return",e.t0.from.call(e.t0,e.t1,"base64"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.next=27,a;case 27:return t.t3=t.sent,t.t4=l.options.networkPassphrase,t.next=31,(0,t.t0)(t.t1,t.t2,t.t3,t.t4);case 31:f[v]=t.sent;case 32:t.next=15;break;case 34:t.next=39;break;case 36:t.prev=36,t.t5=t.catch(13),m.e(t.t5);case 39:return t.prev=39,m.f(),t.finish(39);case 42:case"end":return t.stop()}}),t,null,[[13,36,39,42]])})))),this.options=t,this.options.simulate=null===(r=this.options.simulate)||void 0===r||r,this.server=new o.gq(this.options.rpcUrl,{allowHttp:null!==(s=this.options.allowHttp)&&void 0!==s&&s})}return ue(e,[{key:"toJSON",value:function(){var e;return JSON.stringify({method:this.options.method,tx:null===(e=this.built)||void 0===e?void 0:e.toXDR(),simulationResult:{auth:this.simulationData.result.auth.map((function(e){return e.toXDR("base64")})),retval:this.simulationData.result.retval.toXDR("base64")},simulationTransactionData:this.simulationData.transactionData.toXDR("base64")})}},{key:"toXDR",value:function(){var e;if(!this.built)throw new Error("Transaction has not yet been simulated; call `AssembledTransaction.simulate` first.");return null===(e=this.built)||void 0===e?void 0:e.toEnvelope().toXDR("base64")}},{key:"simulationData",get:function(){var t;if(this.simulationResult&&this.simulationTransactionData)return{result:this.simulationResult,transactionData:this.simulationTransactionData};var r=this.simulation;if(!r)throw new e.Errors.NotYetSimulated("Transaction has not yet been simulated");if(i.j.isSimulationError(r))throw new Error('Transaction simulation failed: "'.concat(r.error,'"'));if(i.j.isSimulationRestore(r))throw new e.Errors.ExpiredState("You need to restore some contract state before you can invoke this method.\nYou can set `restore` to true in the method options in order to automatically restore the contract state when needed.");return this.simulationResult=null!==(t=r.result)&&void 0!==t?t:{auth:[],retval:n.xdr.ScVal.scvVoid()},this.simulationTransactionData=r.transactionData.build(),{result:this.simulationResult,transactionData:this.simulationTransactionData}}},{key:"result",get:function(){try{if(!this.simulationData.result)throw new Error("No simulation result!");return this.options.parseResultXdr(this.simulationData.result.retval)}catch(r){if("object"!==y(t=r)||null===t||!("toString"in t))throw r;var e=this.parseError(r.toString());if(e)return e;throw r}var t}},{key:"parseError",value:function(e){if(this.options.errorTypes){var t=e.match(S);if(t){var r=parseInt(t[1],10),n=this.options.errorTypes[r];if(n)return new p(n)}}}},{key:"send",value:(l=se(re().mark((function e(){var t;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.signed){e.next=2;break}throw new Error("The transaction has not yet been signed. Run `sign` first, or use `signAndSend` instead.");case 2:return e.next=4,W.init(void 0,this);case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"isReadCall",get:function(){var e=this.simulationData.result.auth.length,t=this.simulationData.transactionData.resources().footprint().readWrite().length;return 0===e&&0===t}},{key:"restoreFootprint",value:(s=se(re().mark((function t(r,n){var o,i,a;return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.options.signTransaction){t.next=2;break}throw new Error("For automatic restore to work you must provide a signTransaction function when initializing your Client");case 2:if(null===(o=n)||void 0===o){t.next=6;break}t.t0=o,t.next=9;break;case 6:return t.next=8,T(this.options,this.server);case 8:t.t0=t.sent;case 9:return n=t.t0,t.next=12,e.buildFootprintRestoreTransaction(Q({},this.options),r.transactionData,n,r.minResourceFee);case 12:return i=t.sent,t.next=15,i.signAndSend();case 15:if((a=t.sent).getTransactionResponse){t.next=18;break}throw new e.Errors.RestorationFailure("The attempt at automatic restore failed. \n".concat(JSON.stringify(a)));case 18:return t.abrupt("return",a.getTransactionResponse);case 19:case"end":return t.stop()}}),t,this)}))),function(e,t){return s.apply(this,arguments)})}],[{key:"fromJSON",value:function(t,r){var o=r.tx,i=r.simulationResult,a=r.simulationTransactionData,s=new e(t);return s.built=n.TransactionBuilder.fromXDR(o,t.networkPassphrase),s.simulationResult={auth:i.auth.map((function(e){return n.xdr.SorobanAuthorizationEntry.fromXDR(e,"base64")})),retval:n.xdr.ScVal.fromXDR(i.retval,"base64")},s.simulationTransactionData=n.xdr.SorobanTransactionData.fromXDR(a,"base64"),s}},{key:"fromXDR",value:function(t,r,o){var i,a=n.xdr.TransactionEnvelope.fromXDR(r,"base64"),s=n.TransactionBuilder.fromXDR(a,t.networkPassphrase),l=s.operations[0];if(null==l||null===(i=l.func)||void 0===i||!i.value||"function"!=typeof l.func.value)throw new Error("Could not extract the method from the transaction envelope.");var c=l.func.value();if(null==c||!c.functionName)throw new Error("Could not extract the method name from the transaction envelope.");var u=c.functionName().toString("utf-8"),d=new e(Q(Q({},t),{},{method:u,parseResultXdr:function(e){return o.funcResToNative(u,e)}}));return d.built=s,d}},{key:"build",value:(r=se(re().mark((function t(r){var o,i,a,s,l,c;return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=new e(r),l=new n.Contract(r.contractId),t.next=4,T(r,s.server);case 4:if(c=t.sent,s.raw=new n.TransactionBuilder(c,{fee:null!==(o=r.fee)&&void 0!==o?o:n.BASE_FEE,networkPassphrase:r.networkPassphrase}).addOperation(l.call.apply(l,[r.method].concat(ne(null!==(i=r.args)&&void 0!==i?i:[])))).setTimeout(null!==(a=r.timeoutInSeconds)&&void 0!==a?a:f),!r.simulate){t.next=9;break}return t.next=9,s.simulate();case 9:return t.abrupt("return",s);case 10:case"end":return t.stop()}}),t)}))),function(e){return r.apply(this,arguments)})},{key:"buildFootprintRestoreTransaction",value:(t=se(re().mark((function t(r,o,i,a){var s,l;return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(l=new e(r)).raw=new n.TransactionBuilder(i,{fee:a,networkPassphrase:r.networkPassphrase}).setSorobanData(o instanceof n.SorobanDataBuilder?o.build():o).addOperation(n.Operation.restoreFootprint({})).setTimeout(null!==(s=r.timeoutInSeconds)&&void 0!==s?s:f),t.next=4,l.simulate({restore:!1});case 4:return t.abrupt("return",l);case 5:case"end":return t.stop()}}),t)}))),function(e,r,n,o){return t.apply(this,arguments)})}]);var t,r,s,l}();de(pe,"Errors",{ExpiredState:function(e){function t(){return le(this,t),H(this,t,arguments)}return G(t,e),ue(t)}(K(Error)),RestorationFailure:function(e){function t(){return le(this,t),H(this,t,arguments)}return G(t,e),ue(t)}(K(Error)),NeedsMoreSignatures:function(e){function t(){return le(this,t),H(this,t,arguments)}return G(t,e),ue(t)}(K(Error)),NoSignatureNeeded:function(e){function t(){return le(this,t),H(this,t,arguments)}return G(t,e),ue(t)}(K(Error)),NoUnsignedNonInvokerAuthEntries:function(e){function t(){return le(this,t),H(this,t,arguments)}return G(t,e),ue(t)}(K(Error)),NoSigner:function(e){function t(){return le(this,t),H(this,t,arguments)}return G(t,e),ue(t)}(K(Error)),NotYetSimulated:function(e){function t(){return le(this,t),H(this,t,arguments)}return G(t,e),ue(t)}(K(Error)),FakeAccount:function(e){function t(){return le(this,t),H(this,t,arguments)}return G(t,e),ue(t)}(K(Error))});var fe=r(8287).Buffer;function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function ge(){ge=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),s=new P(n||[]);return o(a,"_invoke",{value:E(e,r,s)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function y(){}function v(){}function b(){}var x={};c(x,a,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(I([])));w&&w!==r&&n.call(w,a)&&(x=w);var S=b.prototype=y.prototype=Object.create(x);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function r(o,i,a,s){var l=d(e[o],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==me(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function E(t,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=C(s,n);if(l){if(l===g)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var c=d(t,r,n);if("normal"===c.type){if(o=n.done?m:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function C(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=d(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(me(t)+" is not iterable")}return v.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:v,configurable:!0}),v.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(T.prototype),c(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new T(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function ye(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function ve(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ye(i,n,o,a,s,"next",e)}function s(e){ye(i,n,o,a,s,"throw",e)}a(void 0)}))}}var be=function(e,t){return{signTransaction:(o=ve(ge().mark((function r(o){var i;return ge().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(i=n.TransactionBuilder.fromXDR(o,t)).sign(e),r.abrupt("return",i.toXDR());case 3:case"end":return r.stop()}}),r)}))),function(e){return o.apply(this,arguments)}),signAuthEntry:(r=ve(ge().mark((function t(r){return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.sign((0,n.hash)(fe.from(r,"base64"))).toString("base64"));case 1:case"end":return t.stop()}}),t)}))),function(e){return r.apply(this,arguments)})};var r,o},xe=r(8287).Buffer;function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){Te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ee(n.key),n)}}function Te(e,t,r){return(t=Ee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ee(e){var t=function(e){if("object"!=Se(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Se(t)?t:t+""}function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ae(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ae(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function je(e){return/^\d+$/.test(e.name().toString())}var Pe={U32:{type:"integer",minimum:0,maximum:4294967295},I32:{type:"integer",minimum:-2147483648,maximum:2147483647},U64:{type:"string",pattern:"^([1-9][0-9]*|0)$",minLength:1,maxLength:20},I64:{type:"string",pattern:"^(-?[1-9][0-9]*|0)$",minLength:1,maxLength:21},U128:{type:"string",pattern:"^([1-9][0-9]*|0)$",minLength:1,maxLength:39},I128:{type:"string",pattern:"^(-?[1-9][0-9]*|0)$",minLength:1,maxLength:40},U256:{type:"string",pattern:"^([1-9][0-9]*|0)$",minLength:1,maxLength:78},I256:{type:"string",pattern:"^(-?[1-9][0-9]*|0)$",minLength:1,maxLength:79},Address:{type:"string",format:"address",description:"Address can be a public key or contract id"},ScString:{type:"string",description:"ScString is a string"},ScSymbol:{type:"string",description:"ScString is a string"},DataUrl:{type:"string",pattern:"^(?:[A-Za-z0-9+\\/]{4})*(?:[A-Za-z0-9+\\/]{2}==|[A-Za-z0-9+\\/]{3}=)?$"}};function Ie(e){var t;switch(e.switch().value){case n.xdr.ScSpecType.scSpecTypeVal().value:t="Val";break;case n.xdr.ScSpecType.scSpecTypeBool().value:return{type:"boolean"};case n.xdr.ScSpecType.scSpecTypeVoid().value:return{type:"null"};case n.xdr.ScSpecType.scSpecTypeError().value:t="Error";break;case n.xdr.ScSpecType.scSpecTypeU32().value:t="U32";break;case n.xdr.ScSpecType.scSpecTypeI32().value:t="I32";break;case n.xdr.ScSpecType.scSpecTypeU64().value:t="U64";break;case n.xdr.ScSpecType.scSpecTypeI64().value:t="I64";break;case n.xdr.ScSpecType.scSpecTypeTimepoint().value:throw new Error("Timepoint type not supported");case n.xdr.ScSpecType.scSpecTypeDuration().value:throw new Error("Duration not supported");case n.xdr.ScSpecType.scSpecTypeU128().value:t="U128";break;case n.xdr.ScSpecType.scSpecTypeI128().value:t="I128";break;case n.xdr.ScSpecType.scSpecTypeU256().value:t="U256";break;case n.xdr.ScSpecType.scSpecTypeI256().value:t="I256";break;case n.xdr.ScSpecType.scSpecTypeBytes().value:t="DataUrl";break;case n.xdr.ScSpecType.scSpecTypeString().value:t="ScString";break;case n.xdr.ScSpecType.scSpecTypeSymbol().value:t="ScSymbol";break;case n.xdr.ScSpecType.scSpecTypeAddress().value:t="Address";break;case n.xdr.ScSpecType.scSpecTypeOption().value:return Ie(e.option().valueType());case n.xdr.ScSpecType.scSpecTypeResult().value:break;case n.xdr.ScSpecType.scSpecTypeVec().value:return{type:"array",items:Ie(e.vec().elementType())};case n.xdr.ScSpecType.scSpecTypeMap().value:var r=e.map();return{type:"array",items:{type:"array",items:[Ie(r.keyType()),Ie(r.valueType())],minItems:2,maxItems:2}};case n.xdr.ScSpecType.scSpecTypeTuple().value:var o=e.tuple(),i=o.valueTypes().length,a=i;return{type:"array",items:o.valueTypes().map(Ie),minItems:i,maxItems:a};case n.xdr.ScSpecType.scSpecTypeBytesN().value:return{$ref:"#/definitions/DataUrl",maxLength:e.bytesN().n()};case n.xdr.ScSpecType.scSpecTypeUdt().value:t=e.udt().name().toString()}return{$ref:"#/definitions/".concat(t)}}function Oe(e){var t={},r=[];e.forEach((function(e){var o=e.type(),i=e.name().toString();t[i]=Ie(o),o.switch().value!==n.xdr.ScSpecType.scSpecTypeOption().value&&r.push(i)}));var o={properties:t};return r.length>0&&(o.required=r),o}var Me,Re,Le=(Me=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Te(this,"entries",[]),0===t.length)throw new Error("Contract spec must have at least one entry");var r=t[0];this.entries="string"==typeof r?t.map((function(e){return n.xdr.ScSpecEntry.fromXDR(e,"base64")})):t},Re=[{key:"funcs",value:function(){return this.entries.filter((function(e){return e.switch().value===n.xdr.ScSpecEntryKind.scSpecEntryFunctionV0().value})).map((function(e){return e.functionV0()}))}},{key:"getFunc",value:function(e){var t=this.findEntry(e);if(t.switch().value!==n.xdr.ScSpecEntryKind.scSpecEntryFunctionV0().value)throw new Error("".concat(e," is not a function"));return t.functionV0()}},{key:"funcArgsToScVals",value:function(e,t){var r=this;return this.getFunc(e).inputs().map((function(e){return r.nativeToScVal(function(e,t){var r=t.name().toString(),n=Object.entries(e).find((function(e){return Ce(e,1)[0]===r}));if(!n)throw new Error("Missing field ".concat(r));return n[1]}(t,e),e.type())}))}},{key:"funcResToNative",value:function(e,t){var r="string"==typeof t?n.xdr.ScVal.fromXDR(t,"base64"):t,o=this.getFunc(e).outputs();if(0===o.length){var i=r.switch();if(i.value!==n.xdr.ScValType.scvVoid().value)throw new Error("Expected void, got ".concat(i.name));return null}if(o.length>1)throw new Error("Multiple outputs not supported");var a=o[0];return a.switch().value===n.xdr.ScSpecType.scSpecTypeResult().value?new h(this.scValToNative(r,a.result().okType())):this.scValToNative(r,a)}},{key:"findEntry",value:function(e){var t=this.entries.find((function(t){return t.value().name().toString()===e}));if(!t)throw new Error("no such entry: ".concat(e));return t}},{key:"nativeToScVal",value:function(e,t){var r=this,o=t.switch(),i=o.value;if(o.value===n.xdr.ScSpecType.scSpecTypeUdt().value){var a=t.udt();return this.nativeToUdt(e,a.name().toString())}if(i===n.xdr.ScSpecType.scSpecTypeOption().value){var s=t.option();return void 0===e?n.xdr.ScVal.scvVoid():this.nativeToScVal(e,s.valueType())}switch(Se(e)){case"object":var l,c,u;if(null===e){if(i===n.xdr.ScSpecType.scSpecTypeVoid().value)return n.xdr.ScVal.scvVoid();throw new TypeError("Type ".concat(t," was not void, but value was null"))}if(e instanceof n.xdr.ScVal)return e;if(e instanceof n.Address){if(t.switch().value!==n.xdr.ScSpecType.scSpecTypeAddress().value)throw new TypeError("Type ".concat(t," was not address, but value was Address"));return e.toScVal()}if(e instanceof n.Contract){if(t.switch().value!==n.xdr.ScSpecType.scSpecTypeAddress().value)throw new TypeError("Type ".concat(t," was not address, but value was Address"));return e.address().toScVal()}if(e instanceof Uint8Array||xe.isBuffer(e)){var d=Uint8Array.from(e);switch(i){case n.xdr.ScSpecType.scSpecTypeBytesN().value:var h=t.bytesN();if(d.length!==h.n())throw new TypeError("expected ".concat(h.n()," bytes, but got ").concat(d.length));return n.xdr.ScVal.scvBytes(d);case n.xdr.ScSpecType.scSpecTypeBytes().value:return n.xdr.ScVal.scvBytes(d);default:throw new TypeError("invalid type (".concat(t,") specified for Bytes and BytesN"))}}if(Array.isArray(e))switch(i){case n.xdr.ScSpecType.scSpecTypeVec().value:var p=t.vec().elementType();return n.xdr.ScVal.scvVec(e.map((function(e){return r.nativeToScVal(e,p)})));case n.xdr.ScSpecType.scSpecTypeTuple().value:var f=t.tuple().valueTypes();if(e.length!==f.length)throw new TypeError("Tuple expects ".concat(f.length," values, but ").concat(e.length," were provided"));return n.xdr.ScVal.scvVec(e.map((function(e,t){return r.nativeToScVal(e,f[t])})));case n.xdr.ScSpecType.scSpecTypeMap().value:var m=t.map(),g=m.keyType(),y=m.valueType();return n.xdr.ScVal.scvMap(e.map((function(e){var t=r.nativeToScVal(e[0],g),o=r.nativeToScVal(e[1],y);return new n.xdr.ScMapEntry({key:t,val:o})})));default:throw new TypeError("Type ".concat(t," was not vec, but value was Array"))}if(e.constructor===Map){if(i!==n.xdr.ScSpecType.scSpecTypeMap().value)throw new TypeError("Type ".concat(t," was not map, but value was Map"));for(var v=t.map(),b=[],x=e.entries(),_=x.next();!_.done;){var w=Ce(_.value,2),S=w[0],k=w[1],T=this.nativeToScVal(S,v.keyType()),E=this.nativeToScVal(k,v.valueType());b.push(new n.xdr.ScMapEntry({key:T,val:E})),_=x.next()}return n.xdr.ScVal.scvMap(b)}if("Object"!==(null!==(l=null===(c=e.constructor)||void 0===c?void 0:c.name)&&void 0!==l?l:""))throw new TypeError("cannot interpret ".concat(null===(u=e.constructor)||void 0===u?void 0:u.name," value as ScVal (").concat(JSON.stringify(e),")"));throw new TypeError("Received object ".concat(e,"  did not match the provided type ").concat(t));case"number":case"bigint":switch(i){case n.xdr.ScSpecType.scSpecTypeU32().value:return n.xdr.ScVal.scvU32(e);case n.xdr.ScSpecType.scSpecTypeI32().value:return n.xdr.ScVal.scvI32(e);case n.xdr.ScSpecType.scSpecTypeU64().value:case n.xdr.ScSpecType.scSpecTypeI64().value:case n.xdr.ScSpecType.scSpecTypeU128().value:case n.xdr.ScSpecType.scSpecTypeI128().value:case n.xdr.ScSpecType.scSpecTypeU256().value:case n.xdr.ScSpecType.scSpecTypeI256().value:var C=o.name.substring(10).toLowerCase();return new n.XdrLargeInt(C,e).toScVal();default:throw new TypeError("invalid type (".concat(t,") specified for integer"))}case"string":return function(e,t){switch(t.value){case n.xdr.ScSpecType.scSpecTypeString().value:return n.xdr.ScVal.scvString(e);case n.xdr.ScSpecType.scSpecTypeSymbol().value:return n.xdr.ScVal.scvSymbol(e);case n.xdr.ScSpecType.scSpecTypeAddress().value:var r=n.Address.fromString(e);return n.xdr.ScVal.scvAddress(r.toScAddress());case n.xdr.ScSpecType.scSpecTypeU64().value:return new n.XdrLargeInt("u64",e).toScVal();case n.xdr.ScSpecType.scSpecTypeI64().value:return new n.XdrLargeInt("i64",e).toScVal();case n.xdr.ScSpecType.scSpecTypeU128().value:return new n.XdrLargeInt("u128",e).toScVal();case n.xdr.ScSpecType.scSpecTypeI128().value:return new n.XdrLargeInt("i128",e).toScVal();case n.xdr.ScSpecType.scSpecTypeU256().value:return new n.XdrLargeInt("u256",e).toScVal();case n.xdr.ScSpecType.scSpecTypeI256().value:return new n.XdrLargeInt("i256",e).toScVal();case n.xdr.ScSpecType.scSpecTypeBytes().value:case n.xdr.ScSpecType.scSpecTypeBytesN().value:return n.xdr.ScVal.scvBytes(xe.from(e,"base64"));default:throw new TypeError("invalid type ".concat(t.name," specified for string value"))}}(e,o);case"boolean":if(i!==n.xdr.ScSpecType.scSpecTypeBool().value)throw TypeError("Type ".concat(t," was not bool, but value was bool"));return n.xdr.ScVal.scvBool(e);case"undefined":if(!t)return n.xdr.ScVal.scvVoid();switch(i){case n.xdr.ScSpecType.scSpecTypeVoid().value:case n.xdr.ScSpecType.scSpecTypeOption().value:return n.xdr.ScVal.scvVoid();default:throw new TypeError("Type ".concat(t," was not void, but value was undefined"))}case"function":return this.nativeToScVal(e(),t);default:throw new TypeError("failed to convert typeof ".concat(Se(e)," (").concat(e,")"))}}},{key:"nativeToUdt",value:function(e,t){var r=this.findEntry(t);switch(r.switch()){case n.xdr.ScSpecEntryKind.scSpecEntryUdtEnumV0():if("number"!=typeof e)throw new TypeError("expected number for enum ".concat(t,", but got ").concat(Se(e)));return this.nativeToEnum(e,r.udtEnumV0());case n.xdr.ScSpecEntryKind.scSpecEntryUdtStructV0():return this.nativeToStruct(e,r.udtStructV0());case n.xdr.ScSpecEntryKind.scSpecEntryUdtUnionV0():return this.nativeToUnion(e,r.udtUnionV0());default:throw new Error("failed to parse udt ".concat(t))}}},{key:"nativeToUnion",value:function(e,t){var r=this,o=e.tag,i=t.cases().find((function(e){return e.value().name().toString()===o}));if(!i)throw new TypeError("no such enum entry: ".concat(o," in ").concat(t));var a=n.xdr.ScVal.scvSymbol(o);switch(i.switch()){case n.xdr.ScSpecUdtUnionCaseV0Kind.scSpecUdtUnionCaseVoidV0():return n.xdr.ScVal.scvVec([a]);case n.xdr.ScSpecUdtUnionCaseV0Kind.scSpecUdtUnionCaseTupleV0():var s=i.tupleCase().type();if(Array.isArray(e.values)){if(e.values.length!==s.length)throw new TypeError("union ".concat(t," expects ").concat(s.length," values, but got ").concat(e.values.length));var l=e.values.map((function(e,t){return r.nativeToScVal(e,s[t])}));return l.unshift(a),n.xdr.ScVal.scvVec(l)}throw new Error("failed to parse union case ".concat(i," with ").concat(e));default:throw new Error("failed to parse union ".concat(t," with ").concat(e))}}},{key:"nativeToStruct",value:function(e,t){var r=this,o=t.fields();if(o.some(je)){if(!o.every(je))throw new Error("mixed numeric and non-numeric field names are not allowed");return n.xdr.ScVal.scvVec(o.map((function(t,n){return r.nativeToScVal(e[n],o[n].type())})))}return n.xdr.ScVal.scvMap(o.map((function(t){var o=t.name().toString();return new n.xdr.ScMapEntry({key:r.nativeToScVal(o,n.xdr.ScSpecTypeDef.scSpecTypeSymbol()),val:r.nativeToScVal(e[o],t.type())})})))}},{key:"nativeToEnum",value:function(e,t){if(t.cases().some((function(t){return t.value()===e})))return n.xdr.ScVal.scvU32(e);throw new TypeError("no such enum entry: ".concat(e," in ").concat(t))}},{key:"scValStrToNative",value:function(e,t){return this.scValToNative(n.xdr.ScVal.fromXDR(e,"base64"),t)}},{key:"scValToNative",value:function(e,t){var r=this,o=t.switch(),i=o.value;if(i===n.xdr.ScSpecType.scSpecTypeUdt().value)return this.scValUdtToNative(e,t.udt());switch(e.switch().value){case n.xdr.ScValType.scvVoid().value:return;case n.xdr.ScValType.scvU64().value:case n.xdr.ScValType.scvI64().value:case n.xdr.ScValType.scvU128().value:case n.xdr.ScValType.scvI128().value:case n.xdr.ScValType.scvU256().value:case n.xdr.ScValType.scvI256().value:return(0,n.scValToBigInt)(e);case n.xdr.ScValType.scvVec().value:if(i===n.xdr.ScSpecType.scSpecTypeVec().value){var a,s=t.vec();return(null!==(a=e.vec())&&void 0!==a?a:[]).map((function(e){return r.scValToNative(e,s.elementType())}))}if(i===n.xdr.ScSpecType.scSpecTypeTuple().value){var l,c=t.tuple().valueTypes();return(null!==(l=e.vec())&&void 0!==l?l:[]).map((function(e,t){return r.scValToNative(e,c[t])}))}throw new TypeError("Type ".concat(t," was not vec, but ").concat(e," is"));case n.xdr.ScValType.scvAddress().value:return n.Address.fromScVal(e).toString();case n.xdr.ScValType.scvMap().value:var u,d=null!==(u=e.map())&&void 0!==u?u:[];if(i===n.xdr.ScSpecType.scSpecTypeMap().value){var h=t.map(),p=h.keyType(),f=h.valueType();return d.map((function(e){return[r.scValToNative(e.key(),p),r.scValToNative(e.val(),f)]}))}throw new TypeError("ScSpecType ".concat(o.name," was not map, but ").concat(JSON.stringify(e,null,2)," is"));case n.xdr.ScValType.scvBool().value:case n.xdr.ScValType.scvU32().value:case n.xdr.ScValType.scvI32().value:case n.xdr.ScValType.scvBytes().value:return e.value();case n.xdr.ScValType.scvString().value:case n.xdr.ScValType.scvSymbol().value:var m;if(i!==n.xdr.ScSpecType.scSpecTypeString().value&&i!==n.xdr.ScSpecType.scSpecTypeSymbol().value)throw new Error("ScSpecType ".concat(o.name," was not string or symbol, but ").concat(JSON.stringify(e,null,2)," is"));return null===(m=e.value())||void 0===m?void 0:m.toString();case n.xdr.ScValType.scvTimepoint().value:case n.xdr.ScValType.scvDuration().value:return(0,n.scValToBigInt)(n.xdr.ScVal.scvU64(e.u64()));default:throw new TypeError("failed to convert ".concat(JSON.stringify(e,null,2)," to native type from type ").concat(o.name))}}},{key:"scValUdtToNative",value:function(e,t){var r=this.findEntry(t.name().toString());switch(r.switch()){case n.xdr.ScSpecEntryKind.scSpecEntryUdtEnumV0():return this.enumToNative(e);case n.xdr.ScSpecEntryKind.scSpecEntryUdtStructV0():return this.structToNative(e,r.udtStructV0());case n.xdr.ScSpecEntryKind.scSpecEntryUdtUnionV0():return this.unionToNative(e,r.udtUnionV0());default:throw new Error("failed to parse udt ".concat(t.name().toString(),": ").concat(r))}}},{key:"unionToNative",value:function(e,t){var r=this,o=e.vec();if(!o)throw new Error("".concat(JSON.stringify(e,null,2)," is not a vec"));if(0===o.length&&0!==t.cases.length)throw new Error("".concat(e," has length 0, but the there are at least one case in the union"));var i=o[0].sym().toString();if(o[0].switch().value!==n.xdr.ScValType.scvSymbol().value)throw new Error("{vec[0]} is not a symbol");var a=t.cases().find(function(e){return function(t){switch(t.switch().value){case n.xdr.ScSpecUdtUnionCaseV0Kind.scSpecUdtUnionCaseTupleV0().value:return t.tupleCase().name().toString()===e;case n.xdr.ScSpecUdtUnionCaseV0Kind.scSpecUdtUnionCaseVoidV0().value:return t.voidCase().name().toString()===e;default:return!1}}}(i));if(!a)throw new Error("failed to find entry ".concat(i," in union {udt.name().toString()}"));var s={tag:i};if(a.switch().value===n.xdr.ScSpecUdtUnionCaseV0Kind.scSpecUdtUnionCaseTupleV0().value){var l=a.tupleCase().type().map((function(e,t){return r.scValToNative(o[t+1],e)}));s.values=l}return s}},{key:"structToNative",value:function(e,t){var r,n,o=this,i={},a=t.fields();return a.some(je)?null===(n=e.vec())||void 0===n?void 0:n.map((function(e,t){return o.scValToNative(e,a[t].type())})):(null===(r=e.map())||void 0===r||r.forEach((function(e,t){var r=a[t];i[r.name().toString()]=o.scValToNative(e.val(),r.type())})),i)}},{key:"enumToNative",value:function(e){if(e.switch().value!==n.xdr.ScValType.scvU32().value)throw new Error("Enum must have a u32 value");return e.u32()}},{key:"errorCases",value:function(){return this.entries.filter((function(e){return e.switch().value===n.xdr.ScSpecEntryKind.scSpecEntryUdtErrorEnumV0().value})).flatMap((function(e){return e.value().cases()}))}},{key:"jsonSchema",value:function(e){var t={};this.entries.forEach((function(e){switch(e.switch().value){case n.xdr.ScSpecEntryKind.scSpecEntryUdtEnumV0().value:var r=e.udtEnumV0();t[r.name().toString()]=function(e){var t=e.doc().toString(),r=e.cases(),n=[];r.forEach((function(e){var t=e.name().toString(),r=e.doc().toString();n.push({description:r,title:t,enum:[e.value()],type:"number"})}));var o={oneOf:n};return t.length>0&&(o.description=t),o}(r);break;case n.xdr.ScSpecEntryKind.scSpecEntryUdtStructV0().value:var o=e.udtStructV0();t[o.name().toString()]=function(e){var t=e.fields();if(t.some(je)){if(!t.every(je))throw new Error("mixed numeric and non-numeric field names are not allowed");return{type:"array",items:t.map((function(e,r){return Ie(t[r].type())})),minItems:t.length,maxItems:t.length}}var r=e.doc().toString(),n=Oe(t),o=n.properties,i=n.required;return o.additionalProperties=!1,{description:r,properties:o,required:i,type:"object"}}(o);break;case n.xdr.ScSpecEntryKind.scSpecEntryUdtUnionV0().value:var i=e.udtUnionV0();t[i.name().toString()]=function(e){var t=e.doc().toString(),r=e.cases(),o=[];r.forEach((function(e){switch(e.switch().value){case n.xdr.ScSpecUdtUnionCaseV0Kind.scSpecUdtUnionCaseVoidV0().value:var t=e.voidCase().name().toString();o.push({type:"object",title:t,properties:{tag:t},additionalProperties:!1,required:["tag"]});break;case n.xdr.ScSpecUdtUnionCaseV0Kind.scSpecUdtUnionCaseTupleV0().value:var r=e.tupleCase(),i=r.name().toString();o.push({type:"object",title:i,properties:{tag:i,values:{type:"array",items:r.type().map(Ie)}},required:["tag","values"],additionalProperties:!1})}}));var i={oneOf:o};return t.length>0&&(i.description=t),i}(i);break;case n.xdr.ScSpecEntryKind.scSpecEntryFunctionV0().value:var a=e.functionV0(),s=a.name().toString(),l=function(e){var t=Oe(e.inputs()),r=t.properties,o=t.required,i={additionalProperties:!1,properties:r,type:"object"};(null==o?void 0:o.length)>0&&(i.required=o);var a={properties:{args:i}},s=e.outputs(),l=s.length>0?Ie(s[0]):Ie(n.xdr.ScSpecTypeDef.scSpecTypeVoid()),c=e.doc().toString();return c.length>0&&(a.description=c),a.additionalProperties=!1,l.additionalProperties=!1,{input:a,output:l}}(a),c=l.input;t[s]=c;case n.xdr.ScSpecEntryKind.scSpecEntryUdtErrorEnumV0().value:}}));var r={$schema:"http://json-schema.org/draft-07/schema#",definitions:we(we({},Pe),t)};return e&&(r.$ref="#/definitions/".concat(e)),r}}],Re&&ke(Me.prototype,Re),Object.defineProperty(Me,"prototype",{writable:!1}),Me),Fe=r(1660),ze=r(8287).Buffer,De=["method"];function Ne(e){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(e)}function Be(){Be=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),s=new P(n||[]);return o(a,"_invoke",{value:E(e,r,s)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function y(){}function v(){}function b(){}var x={};c(x,a,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(I([])));w&&w!==r&&n.call(w,a)&&(x=w);var S=b.prototype=y.prototype=Object.create(x);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function r(o,i,a,s){var l=d(e[o],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Ne(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function E(t,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=C(s,n);if(l){if(l===g)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var c=d(t,r,n);if("normal"===c.type){if(o=n.done?m:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function C(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=d(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Ne(t)+" is not iterable")}return v.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:v,configurable:!0}),v.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(T.prototype),c(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new T(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function Ue(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function Ve(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ue(i,n,o,a,s,"next",e)}function s(e){Ue(i,n,o,a,s,"throw",e)}a(void 0)}))}}function We(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?We(Object(r),!0).forEach((function(t){Ge(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):We(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function He(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ke(n.key),n)}}function Ge(e,t,r){return(t=Ke(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ke(e){var t=function(e){if("object"!=Ne(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ne(t)?t:t+""}var Xe=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ge(this,"txFromJSON",(function(e){var t=JSON.parse(e),r=t.method,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,De);return pe.fromJSON(qe(qe({},n.options),{},{method:r,parseResultXdr:function(e){return n.spec.funcResToNative(r,e)}}),o)})),Ge(this,"txFromXDR",(function(e){return pe.fromXDR(n.options,e,n.spec)})),this.spec=t,this.options=r,this.spec.funcs().forEach((function(e){var o=e.name().toString(),i=function(e,n){return pe.build(qe(qe(qe({method:o,args:e&&t.funcArgsToScVals(o,e)},r),n),{},{errorTypes:t.errorCases().reduce((function(e,t){return qe(qe({},e),{},Ge({},t.value(),{message:t.doc().toString()}))}),{}),parseResultXdr:function(e){return t.funcResToNative(o,e)}}))};n[o]=0===t.getFunc(o).inputs().length?function(e){return i(void 0,e)}:i}))}return function(e,t,r){return r&&He(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,0,[{key:"fromWasmHash",value:(n=Ve(Be().mark((function t(r,n){var o,i,a,s,l,c,u=arguments;return Be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=u.length>2&&void 0!==u[2]?u[2]:"hex",n&&n.rpcUrl){t.next=3;break}throw new TypeError("options must contain rpcUrl");case 3:return i=n.rpcUrl,a=n.allowHttp,s={allowHttp:a},l=new Fe.Server(i,s),t.next=8,l.getContractWasmByHash(r,o);case 8:return c=t.sent,t.abrupt("return",e.fromWasm(c,n));case 10:case"end":return t.stop()}}),t)}))),function(e,t){return n.apply(this,arguments)})},{key:"fromWasm",value:(r=Ve(Be().mark((function t(r,n){var o,i,a,s,l;return Be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,WebAssembly.compile(r);case 2:if(o=t.sent,0!==(i=WebAssembly.Module.customSections(o,"contractspecv0")).length){t.next=6;break}throw new Error("Could not obtain contract spec from wasm");case 6:return a=ze.from(i[0]),s=k(a),l=new Le(s),t.abrupt("return",new e(l,n));case 10:case"end":return t.stop()}}),t)}))),function(e,t){return r.apply(this,arguments)})},{key:"from",value:(t=Ve(Be().mark((function t(r){var n,o,i,a,s,l;return Be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r&&r.rpcUrl&&r.contractId){t.next=2;break}throw new TypeError("options must contain rpcUrl and contractId");case 2:return n=r.rpcUrl,o=r.contractId,i=r.allowHttp,a={allowHttp:i},s=new Fe.Server(n,a),t.next=7,s.getContractWasmByContractId(o);case 7:return l=t.sent,t.abrupt("return",e.fromWasm(l,r));case 9:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})}]);var t,r,n}()},5885:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}function l(e,t,r){return t=p(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,d()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r))}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function u(e){var t="function"==typeof Map?new Map:void 0;return u=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(d())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var o=new(e.bind.apply(e,n));return r&&h(o,r.prototype),o}(e,arguments,p(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),h(r,e)},u(e)}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d=function(){return!!e})()}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}r.d(t,{Cu:()=>v,Dr:()=>f,m_:()=>m,nS:()=>y,v7:()=>g});var f=function(e){function t(e,r){var n;o(this,t);var i=(this instanceof t?this.constructor:void 0).prototype;return(n=l(this,t,[e])).__proto__=i,n.constructor=t,n.response=r,n}return c(t,e),a(t,[{key:"getResponse",value:function(){return this.response}}])}(u(Error)),m=function(e){function t(e,r){var n;o(this,t);var i=(this instanceof t?this.constructor:void 0).prototype;return(n=l(this,t,[e,r])).__proto__=i,n.constructor=t,n.name="NotFoundError",n}return c(t,e),a(t)}(f),g=function(e){function t(e,r){var n;o(this,t);var i=(this instanceof t?this.constructor:void 0).prototype;return(n=l(this,t,[e,r])).__proto__=i,n.constructor=t,n.name="BadRequestError",n}return c(t,e),a(t)}(f),y=function(e){function t(e,r){var n;o(this,t);var i=(this instanceof t?this.constructor:void 0).prototype;return(n=l(this,t,[e,r])).__proto__=i,n.constructor=t,n.name="BadResponseError",n}return c(t,e),a(t)}(f),v=function(e){function t(e,r,n){var i;o(this,t);var a=(this instanceof t?this.constructor:void 0).prototype;return(i=l(this,t,[e])).__proto__=a,i.constructor=t,i.name="AccountRequiresMemoError",i.accountId=r,i.operationIndex=n,i}return c(t,e),a(t)}(u(Error))},7600:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Api:()=>n,FEDERATION_RESPONSE_MAX_SIZE:()=>b,Server:()=>x});var n={};r.r(n),r.d(n,{Api:()=>{}});var o=r(1083),i=r(356),a=r(4193),s=r.n(a),l=r(8732),c=r(5885),u=r(3898);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(){f=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),s=new O(n||[]);return o(a,"_invoke",{value:A(e,r,s)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",m="suspendedYield",g="executing",y="completed",v={};function b(){}function x(){}function _(){}var w={};c(w,a,(function(){return this}));var S=Object.getPrototypeOf,k=S&&S(S(M([])));k&&k!==r&&n.call(k,a)&&(w=k);var T=_.prototype=b.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,i,a,s){var l=h(e[o],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==d(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=p;return function(i,a){if(o===g)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=j(s,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=g;var c=h(t,r,n);if("normal"===c.type){if(o=n.done?y:m,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=h(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function M(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(d(t)+" is not iterable")}return x.prototype=_,o(T,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:x,configurable:!0}),x.displayName=c(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,l,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},E(C.prototype),c(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new C(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(T),c(T,l,"Generator"),c(T,a,(function(){return this})),c(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=M,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:M(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function m(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function g(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){m(i,n,o,a,s,"next",e)}function s(e){m(i,n,o,a,s,"throw",e)}a(void 0)}))}}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function v(e){var t=function(e){if("object"!=d(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}var b=102400,x=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.serverURL=s()(t),this.domain=r;var o=void 0===n.allowHttp?l.T.isAllowHttp():n.allowHttp;if(this.timeout=void 0===n.timeout?l.T.getTimeout():n.timeout,"https"!==this.serverURL.protocol()&&!o)throw new Error("Cannot connect to insecure federation server")}return t=e,r=[{key:"resolveAddress",value:(x=g(f().mark((function e(t){var r,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t,!(t.indexOf("*")<0)){e.next=5;break}if(this.domain){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("Unknown domain. Make sure `address` contains a domain (ex. `bob*stellar.org`) or pass `domain` parameter when instantiating the server object.")));case 4:r="".concat(t,"*").concat(this.domain);case 5:return n=this.serverURL.query({type:"name",q:r}),e.abrupt("return",this._sendRequest(n));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return x.apply(this,arguments)})},{key:"resolveAccountId",value:(v=g(f().mark((function e(t){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.serverURL.query({type:"id",q:t}),e.abrupt("return",this._sendRequest(r));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"resolveTransactionId",value:(m=g(f().mark((function e(t){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.serverURL.query({type:"txid",q:t}),e.abrupt("return",this._sendRequest(r));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"_sendRequest",value:(p=g(f().mark((function e(t){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.timeout,e.abrupt("return",o.A.get(t.toString(),{maxContentLength:b,timeout:r}).then((function(e){if(void 0!==e.data.memo&&"string"!=typeof e.data.memo)throw new Error("memo value should be of type string");return e.data})).catch((function(e){if(e instanceof Error){if(e.message.match(/^maxContentLength size/))throw new Error("federation response exceeds allowed size of ".concat(b));return Promise.reject(e)}return Promise.reject(new c.nS("Server query failed. Server responded: ".concat(e.status," ").concat(e.statusText),e.data))})));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})}],n=[{key:"resolve",value:(d=g(f().mark((function t(r){var n,o,a,s,l,c=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:{},!(r.indexOf("*")<0)){t.next=5;break}if(i.StrKey.isValidEd25519PublicKey(r)){t.next=4;break}return t.abrupt("return",Promise.reject(new Error("Invalid Account ID")));case 4:return t.abrupt("return",Promise.resolve({account_id:r}));case 5:if(o=r.split("*"),a=h(o,2),s=a[1],2===o.length&&s){t.next=9;break}return t.abrupt("return",Promise.reject(new Error("Invalid Stellar address")));case 9:return t.next=11,e.createForDomain(s,n);case 11:return l=t.sent,t.abrupt("return",l.resolveAddress(r));case 13:case"end":return t.stop()}}),t)}))),function(e){return d.apply(this,arguments)})},{key:"createForDomain",value:(a=g(f().mark((function t(r){var n,o,i=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.next=3,u.Resolver.resolve(r,n);case 3:if((o=t.sent).FEDERATION_SERVER){t.next=6;break}return t.abrupt("return",Promise.reject(new Error("stellar.toml does not contain FEDERATION_SERVER field")));case 6:return t.abrupt("return",new e(o.FEDERATION_SERVER,r,n));case 7:case"end":return t.stop()}}),t)}))),function(e){return a.apply(this,arguments)})}],r&&y(t.prototype,r),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n,a,d,p,m,v,x}()},8242:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Api:()=>{}})},2731:(e,t,r)=>{"use strict";var n,o;r.r(t),r.d(t,{AccountResponse:()=>h,AxiosClient:()=>W,HorizonApi:()=>n,SERVER_TIME_MAP:()=>B,Server:()=>_r,ServerApi:()=>o,default:()=>wr,getCurrentServerTime:()=>q}),function(e){var t=function(e){return e.constantProduct="constant_product",e}({});e.LiquidityPoolType=t;var r=function(e){return e.createAccount="create_account",e.payment="payment",e.pathPayment="path_payment_strict_receive",e.createPassiveOffer="create_passive_sell_offer",e.manageOffer="manage_sell_offer",e.setOptions="set_options",e.changeTrust="change_trust",e.allowTrust="allow_trust",e.accountMerge="account_merge",e.inflation="inflation",e.manageData="manage_data",e.bumpSequence="bump_sequence",e.manageBuyOffer="manage_buy_offer",e.pathPaymentStrictSend="path_payment_strict_send",e.createClaimableBalance="create_claimable_balance",e.claimClaimableBalance="claim_claimable_balance",e.beginSponsoringFutureReserves="begin_sponsoring_future_reserves",e.endSponsoringFutureReserves="end_sponsoring_future_reserves",e.revokeSponsorship="revoke_sponsorship",e.clawback="clawback",e.clawbackClaimableBalance="clawback_claimable_balance",e.setTrustLineFlags="set_trust_line_flags",e.liquidityPoolDeposit="liquidity_pool_deposit",e.liquidityPoolWithdraw="liquidity_pool_withdraw",e.invokeHostFunction="invoke_host_function",e.bumpFootprintExpiration="bump_footprint_expiration",e.restoreFootprint="restore_footprint",e}({});e.OperationResponseType=r;var n=function(e){return e[e.createAccount=0]="createAccount",e[e.payment=1]="payment",e[e.pathPayment=2]="pathPayment",e[e.createPassiveOffer=3]="createPassiveOffer",e[e.manageOffer=4]="manageOffer",e[e.setOptions=5]="setOptions",e[e.changeTrust=6]="changeTrust",e[e.allowTrust=7]="allowTrust",e[e.accountMerge=8]="accountMerge",e[e.inflation=9]="inflation",e[e.manageData=10]="manageData",e[e.bumpSequence=11]="bumpSequence",e[e.manageBuyOffer=12]="manageBuyOffer",e[e.pathPaymentStrictSend=13]="pathPaymentStrictSend",e[e.createClaimableBalance=14]="createClaimableBalance",e[e.claimClaimableBalance=15]="claimClaimableBalance",e[e.beginSponsoringFutureReserves=16]="beginSponsoringFutureReserves",e[e.endSponsoringFutureReserves=17]="endSponsoringFutureReserves",e[e.revokeSponsorship=18]="revokeSponsorship",e[e.clawback=19]="clawback",e[e.clawbackClaimableBalance=20]="clawbackClaimableBalance",e[e.setTrustLineFlags=21]="setTrustLineFlags",e[e.liquidityPoolDeposit=22]="liquidityPoolDeposit",e[e.liquidityPoolWithdraw=23]="liquidityPoolWithdraw",e[e.invokeHostFunction=24]="invokeHostFunction",e[e.bumpFootprintExpiration=25]="bumpFootprintExpiration",e[e.restoreFootprint=26]="restoreFootprint",e}({});e.OperationResponseTypeI=n;var o=function(e){return e.TX_FAILED="tx_failed",e.TX_BAD_SEQ="tx_bad_seq",e.TX_BAD_AUTH="tx_bad_auth",e.TX_BAD_AUTH_EXTRA="tx_bad_auth_extra",e.TX_FEE_BUMP_INNER_SUCCESS="tx_fee_bump_inner_success",e.TX_FEE_BUMP_INNER_FAILED="tx_fee_bump_inner_failed",e.TX_NOT_SUPPORTED="tx_not_supported",e.TX_SUCCESS="tx_success",e.TX_TOO_EARLY="tx_too_early",e.TX_TOO_LATE="tx_too_late",e.TX_MISSING_OPERATION="tx_missing_operation",e.TX_INSUFFICIENT_BALANCE="tx_insufficient_balance",e.TX_NO_SOURCE_ACCOUNT="tx_no_source_account",e.TX_INSUFFICIENT_FEE="tx_insufficient_fee",e.TX_INTERNAL_ERROR="tx_internal_error",e}({});e.TransactionFailedResultCodes=o}(n||(n={})),function(e){var t=function(e){return e.all="all",e.liquidityPools="liquidity_pool",e.orderbook="orderbook",e}({});e.TradeType=t,n.OperationResponseType,n.OperationResponseTypeI}(o||(o={}));var i=r(356);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function c(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}var u,d,h=(u=function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseAccount=new i.Account(t.account_id,t.sequence),Object.entries(t).forEach((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),n=t[0],o=t[1];r[n]=o}))},(d=[{key:"accountId",value:function(){return this._baseAccount.accountId()}},{key:"sequenceNumber",value:function(){return this._baseAccount.sequenceNumber()}},{key:"incrementSequenceNumber",value:function(){this._baseAccount.incrementSequenceNumber(),this.sequence=this._baseAccount.sequenceNumber()}}])&&l(u.prototype,d),Object.defineProperty(u,"prototype",{writable:!1}),u),p=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,f=Math.ceil,m=Math.floor,g="[BigNumber Error] ",y=g+"Number primitive has more than 15 significant digits: ",v=1e14,b=14,x=9007199254740991,_=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],w=1e7,S=1e9;function k(e){var t=0|e;return e>0||e===t?t:t-1}function T(e){for(var t,r,n=1,o=e.length,i=e[0]+"";n<o;){for(t=e[n++]+"",r=b-t.length;r--;t="0"+t);i+=t}for(o=i.length;48===i.charCodeAt(--o););return i.slice(0,o+1||1)}function E(e,t){var r,n,o=e.c,i=t.c,a=e.s,s=t.s,l=e.e,c=t.e;if(!a||!s)return null;if(r=o&&!o[0],n=i&&!i[0],r||n)return r?n?0:-s:a;if(a!=s)return a;if(r=a<0,n=l==c,!o||!i)return n?0:!o^r?1:-1;if(!n)return l>c^r?1:-1;for(s=(l=o.length)<(c=i.length)?l:c,a=0;a<s;a++)if(o[a]!=i[a])return o[a]>i[a]^r?1:-1;return l==c?0:l>c^r?1:-1}function C(e,t,r,n){if(e<t||e>r||e!==m(e))throw Error(g+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function A(e){var t=e.c.length-1;return k(e.e/b)==t&&e.c[t]%2!=0}function j(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function P(e,t,r){var n,o;if(t<0){for(o=r+".";++t;o+=r);e=o+e}else if(++t>(n=e.length)){for(o=r,t-=n;--t;o+=r);e+=o}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}var I=function e(t){var r,n,o,i,a,s,l,c,u,d,h=q.prototype={constructor:q,toString:null,valueOf:null},I=new q(1),O=20,M=4,R=-7,L=21,F=-1e7,z=1e7,D=!1,N=1,B=0,U={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},V="0123456789abcdefghijklmnopqrstuvwxyz",W=!0;function q(e,t){var r,i,a,s,l,c,u,d,h=this;if(!(h instanceof q))return new q(e,t);if(null==t){if(e&&!0===e._isBigNumber)return h.s=e.s,void(!e.c||e.e>z?h.c=h.e=null:e.e<F?h.c=[h.e=0]:(h.e=e.e,h.c=e.c.slice()));if((c="number"==typeof e)&&0*e==0){if(h.s=1/e<0?(e=-e,-1):1,e===~~e){for(s=0,l=e;l>=10;l/=10,s++);return void(s>z?h.c=h.e=null:(h.e=s,h.c=[e]))}d=String(e)}else{if(!p.test(d=String(e)))return o(h,d,c);h.s=45==d.charCodeAt(0)?(d=d.slice(1),-1):1}(s=d.indexOf("."))>-1&&(d=d.replace(".","")),(l=d.search(/e/i))>0?(s<0&&(s=l),s+=+d.slice(l+1),d=d.substring(0,l)):s<0&&(s=d.length)}else{if(C(t,2,V.length,"Base"),10==t&&W)return X(h=new q(e),O+h.e+1,M);if(d=String(e),c="number"==typeof e){if(0*e!=0)return o(h,d,c,t);if(h.s=1/e<0?(d=d.slice(1),-1):1,q.DEBUG&&d.replace(/^0\.0*|\./,"").length>15)throw Error(y+e)}else h.s=45===d.charCodeAt(0)?(d=d.slice(1),-1):1;for(r=V.slice(0,t),s=l=0,u=d.length;l<u;l++)if(r.indexOf(i=d.charAt(l))<0){if("."==i){if(l>s){s=u;continue}}else if(!a&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){a=!0,l=-1,s=0;continue}return o(h,String(e),c,t)}c=!1,(s=(d=n(d,t,10,h.s)).indexOf("."))>-1?d=d.replace(".",""):s=d.length}for(l=0;48===d.charCodeAt(l);l++);for(u=d.length;48===d.charCodeAt(--u););if(d=d.slice(l,++u)){if(u-=l,c&&q.DEBUG&&u>15&&(e>x||e!==m(e)))throw Error(y+h.s*e);if((s=s-l-1)>z)h.c=h.e=null;else if(s<F)h.c=[h.e=0];else{if(h.e=s,h.c=[],l=(s+1)%b,s<0&&(l+=b),l<u){for(l&&h.c.push(+d.slice(0,l)),u-=b;l<u;)h.c.push(+d.slice(l,l+=b));l=b-(d=d.slice(l)).length}else l-=u;for(;l--;d+="0");h.c.push(+d)}}else h.c=[h.e=0]}function H(e,t,r,n){var o,i,a,s,l;if(null==r?r=M:C(r,0,8),!e.c)return e.toString();if(o=e.c[0],a=e.e,null==t)l=T(e.c),l=1==n||2==n&&(a<=R||a>=L)?j(l,a):P(l,a,"0");else if(i=(e=X(new q(e),t,r)).e,s=(l=T(e.c)).length,1==n||2==n&&(t<=i||i<=R)){for(;s<t;l+="0",s++);l=j(l,i)}else if(t-=a,l=P(l,i,"0"),i+1>s){if(--t>0)for(l+=".";t--;l+="0");}else if((t+=i-s)>0)for(i+1==s&&(l+=".");t--;l+="0");return e.s<0&&o?"-"+l:l}function G(e,t){for(var r,n,o=1,i=new q(e[0]);o<e.length;o++)(!(n=new q(e[o])).s||(r=E(i,n))===t||0===r&&i.s===t)&&(i=n);return i}function K(e,t,r){for(var n=1,o=t.length;!t[--o];t.pop());for(o=t[0];o>=10;o/=10,n++);return(r=n+r*b-1)>z?e.c=e.e=null:r<F?e.c=[e.e=0]:(e.e=r,e.c=t),e}function X(e,t,r,n){var o,i,a,s,l,c,u,d=e.c,h=_;if(d){e:{for(o=1,s=d[0];s>=10;s/=10,o++);if((i=t-o)<0)i+=b,a=t,l=d[c=0],u=m(l/h[o-a-1]%10);else if((c=f((i+1)/b))>=d.length){if(!n)break e;for(;d.length<=c;d.push(0));l=u=0,o=1,a=(i%=b)-b+1}else{for(l=s=d[c],o=1;s>=10;s/=10,o++);u=(a=(i%=b)-b+o)<0?0:m(l/h[o-a-1]%10)}if(n=n||t<0||null!=d[c+1]||(a<0?l:l%h[o-a-1]),n=r<4?(u||n)&&(0==r||r==(e.s<0?3:2)):u>5||5==u&&(4==r||n||6==r&&(i>0?a>0?l/h[o-a]:0:d[c-1])%10&1||r==(e.s<0?8:7)),t<1||!d[0])return d.length=0,n?(t-=e.e+1,d[0]=h[(b-t%b)%b],e.e=-t||0):d[0]=e.e=0,e;if(0==i?(d.length=c,s=1,c--):(d.length=c+1,s=h[b-i],d[c]=a>0?m(l/h[o-a]%h[a])*s:0),n)for(;;){if(0==c){for(i=1,a=d[0];a>=10;a/=10,i++);for(a=d[0]+=s,s=1;a>=10;a/=10,s++);i!=s&&(e.e++,d[0]==v&&(d[0]=1));break}if(d[c]+=s,d[c]!=v)break;d[c--]=0,s=1}for(i=d.length;0===d[--i];d.pop());}e.e>z?e.c=e.e=null:e.e<F&&(e.c=[e.e=0])}return e}function Z(e){var t,r=e.e;return null===r?e.toString():(t=T(e.c),t=r<=R||r>=L?j(t,r):P(t,r,"0"),e.s<0?"-"+t:t)}return q.clone=e,q.ROUND_UP=0,q.ROUND_DOWN=1,q.ROUND_CEIL=2,q.ROUND_FLOOR=3,q.ROUND_HALF_UP=4,q.ROUND_HALF_DOWN=5,q.ROUND_HALF_EVEN=6,q.ROUND_HALF_CEIL=7,q.ROUND_HALF_FLOOR=8,q.EUCLID=9,q.config=q.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(g+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(C(r=e[t],0,S,t),O=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(C(r=e[t],0,8,t),M=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(C(r[0],-S,0,t),C(r[1],0,S,t),R=r[0],L=r[1]):(C(r,-S,S,t),R=-(L=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)C(r[0],-S,-1,t),C(r[1],1,S,t),F=r[0],z=r[1];else{if(C(r,-S,S,t),!r)throw Error(g+t+" cannot be zero: "+r);F=-(z=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(g+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw D=!r,Error(g+"crypto unavailable");D=r}else D=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(C(r=e[t],0,9,t),N=r),e.hasOwnProperty(t="POW_PRECISION")&&(C(r=e[t],0,S,t),B=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(g+t+" not an object: "+r);U=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(g+t+" invalid: "+r);W="0123456789"==r.slice(0,10),V=r}}return{DECIMAL_PLACES:O,ROUNDING_MODE:M,EXPONENTIAL_AT:[R,L],RANGE:[F,z],CRYPTO:D,MODULO_MODE:N,POW_PRECISION:B,FORMAT:U,ALPHABET:V}},q.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!q.DEBUG)return!0;var t,r,n=e.c,o=e.e,i=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===i||-1===i)&&o>=-S&&o<=S&&o===m(o)){if(0===n[0]){if(0===o&&1===n.length)return!0;break e}if((t=(o+1)%b)<1&&(t+=b),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=v||r!==m(r))break e;if(0!==r)return!0}}}else if(null===n&&null===o&&(null===i||1===i||-1===i))return!0;throw Error(g+"Invalid BigNumber: "+e)},q.maximum=q.max=function(){return G(arguments,-1)},q.minimum=q.min=function(){return G(arguments,1)},q.random=(i=9007199254740992,a=Math.random()*i&2097151?function(){return m(Math.random()*i)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,o,i,s=0,l=[],c=new q(I);if(null==e?e=O:C(e,0,S),o=f(e/b),D)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));s<o;)(i=131072*t[s]+(t[s+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[s]=r[0],t[s+1]=r[1]):(l.push(i%1e14),s+=2);s=o/2}else{if(!crypto.randomBytes)throw D=!1,Error(g+"crypto unavailable");for(t=crypto.randomBytes(o*=7);s<o;)(i=281474976710656*(31&t[s])+1099511627776*t[s+1]+4294967296*t[s+2]+16777216*t[s+3]+(t[s+4]<<16)+(t[s+5]<<8)+t[s+6])>=9e15?crypto.randomBytes(7).copy(t,s):(l.push(i%1e14),s+=7);s=o/7}if(!D)for(;s<o;)(i=a())<9e15&&(l[s++]=i%1e14);for(o=l[--s],e%=b,o&&e&&(i=_[b-e],l[s]=m(o/i)*i);0===l[s];l.pop(),s--);if(s<0)l=[n=0];else{for(n=-1;0===l[0];l.splice(0,1),n-=b);for(s=1,i=l[0];i>=10;i/=10,s++);s<b&&(n-=b-s)}return c.e=n,c.c=l,c}),q.sum=function(){for(var e=1,t=arguments,r=new q(t[0]);e<t.length;)r=r.plus(t[e++]);return r},n=function(){var e="0123456789";function t(e,t,r,n){for(var o,i,a=[0],s=0,l=e.length;s<l;){for(i=a.length;i--;a[i]*=t);for(a[0]+=n.indexOf(e.charAt(s++)),o=0;o<a.length;o++)a[o]>r-1&&(null==a[o+1]&&(a[o+1]=0),a[o+1]+=a[o]/r|0,a[o]%=r)}return a.reverse()}return function(n,o,i,a,s){var l,c,u,d,h,p,f,m,g=n.indexOf("."),y=O,v=M;for(g>=0&&(d=B,B=0,n=n.replace(".",""),p=(m=new q(o)).pow(n.length-g),B=d,m.c=t(P(T(p.c),p.e,"0"),10,i,e),m.e=m.c.length),u=d=(f=t(n,o,i,s?(l=V,e):(l=e,V))).length;0==f[--d];f.pop());if(!f[0])return l.charAt(0);if(g<0?--u:(p.c=f,p.e=u,p.s=a,f=(p=r(p,m,y,v,i)).c,h=p.r,u=p.e),g=f[c=u+y+1],d=i/2,h=h||c<0||null!=f[c+1],h=v<4?(null!=g||h)&&(0==v||v==(p.s<0?3:2)):g>d||g==d&&(4==v||h||6==v&&1&f[c-1]||v==(p.s<0?8:7)),c<1||!f[0])n=h?P(l.charAt(1),-y,l.charAt(0)):l.charAt(0);else{if(f.length=c,h)for(--i;++f[--c]>i;)f[c]=0,c||(++u,f=[1].concat(f));for(d=f.length;!f[--d];);for(g=0,n="";g<=d;n+=l.charAt(f[g++]));n=P(n,u,l.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,o,i,a,s=0,l=e.length,c=t%w,u=t/w|0;for(e=e.slice();l--;)s=((o=c*(i=e[l]%w)+(n=u*i+(a=e[l]/w|0)*c)%w*w+s)/r|0)+(n/w|0)+u*a,e[l]=o%r;return s&&(e=[s].concat(e)),e}function t(e,t,r,n){var o,i;if(r!=n)i=r>n?1:-1;else for(o=i=0;o<r;o++)if(e[o]!=t[o]){i=e[o]>t[o]?1:-1;break}return i}function r(e,t,r,n){for(var o=0;r--;)e[r]-=o,o=e[r]<t[r]?1:0,e[r]=o*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,o,i,a,s){var l,c,u,d,h,p,f,g,y,x,_,w,S,T,E,C,A,j=n.s==o.s?1:-1,P=n.c,I=o.c;if(!(P&&P[0]&&I&&I[0]))return new q(n.s&&o.s&&(P?!I||P[0]!=I[0]:I)?P&&0==P[0]||!I?0*j:j/0:NaN);for(y=(g=new q(j)).c=[],j=i+(c=n.e-o.e)+1,s||(s=v,c=k(n.e/b)-k(o.e/b),j=j/b|0),u=0;I[u]==(P[u]||0);u++);if(I[u]>(P[u]||0)&&c--,j<0)y.push(1),d=!0;else{for(T=P.length,C=I.length,u=0,j+=2,(h=m(s/(I[0]+1)))>1&&(I=e(I,h,s),P=e(P,h,s),C=I.length,T=P.length),S=C,_=(x=P.slice(0,C)).length;_<C;x[_++]=0);A=I.slice(),A=[0].concat(A),E=I[0],I[1]>=s/2&&E++;do{if(h=0,(l=t(I,x,C,_))<0){if(w=x[0],C!=_&&(w=w*s+(x[1]||0)),(h=m(w/E))>1)for(h>=s&&(h=s-1),f=(p=e(I,h,s)).length,_=x.length;1==t(p,x,f,_);)h--,r(p,C<f?A:I,f,s),f=p.length,l=1;else 0==h&&(l=h=1),f=(p=I.slice()).length;if(f<_&&(p=[0].concat(p)),r(x,p,_,s),_=x.length,-1==l)for(;t(I,x,C,_)<1;)h++,r(x,C<_?A:I,_,s),_=x.length}else 0===l&&(h++,x=[0]);y[u++]=h,x[0]?x[_++]=P[S]||0:(x=[P[S]],_=1)}while((S++<T||null!=x[0])&&j--);d=null!=x[0],y[0]||y.splice(0,1)}if(s==v){for(u=1,j=y[0];j>=10;j/=10,u++);X(g,i+(g.e=u+c*b-1)+1,a,d)}else g.e=c,g.r=+d;return g}}(),s=/^(-?)0([xbo])(?=\w[\w.]*$)/i,l=/^([^.]+)\.$/,c=/^\.([^.]+)$/,u=/^-?(Infinity|NaN)$/,d=/^\s*\+(?=[\w.])|^\s+|\s+$/g,o=function(e,t,r,n){var o,i=r?t:t.replace(d,"");if(u.test(i))e.s=isNaN(i)?null:i<0?-1:1;else{if(!r&&(i=i.replace(s,(function(e,t,r){return o="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=o?e:t})),n&&(o=n,i=i.replace(l,"$1").replace(c,"0.$1")),t!=i))return new q(i,o);if(q.DEBUG)throw Error(g+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},h.absoluteValue=h.abs=function(){var e=new q(this);return e.s<0&&(e.s=1),e},h.comparedTo=function(e,t){return E(this,new q(e,t))},h.decimalPlaces=h.dp=function(e,t){var r,n,o,i=this;if(null!=e)return C(e,0,S),null==t?t=M:C(t,0,8),X(new q(i),e+i.e+1,t);if(!(r=i.c))return null;if(n=((o=r.length-1)-k(this.e/b))*b,o=r[o])for(;o%10==0;o/=10,n--);return n<0&&(n=0),n},h.dividedBy=h.div=function(e,t){return r(this,new q(e,t),O,M)},h.dividedToIntegerBy=h.idiv=function(e,t){return r(this,new q(e,t),0,1)},h.exponentiatedBy=h.pow=function(e,t){var r,n,o,i,a,s,l,c,u=this;if((e=new q(e)).c&&!e.isInteger())throw Error(g+"Exponent not an integer: "+Z(e));if(null!=t&&(t=new q(t)),a=e.e>14,!u.c||!u.c[0]||1==u.c[0]&&!u.e&&1==u.c.length||!e.c||!e.c[0])return c=new q(Math.pow(+Z(u),a?e.s*(2-A(e)):+Z(e))),t?c.mod(t):c;if(s=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new q(NaN);(n=!s&&u.isInteger()&&t.isInteger())&&(u=u.mod(t))}else{if(e.e>9&&(u.e>0||u.e<-1||(0==u.e?u.c[0]>1||a&&u.c[1]>=24e7:u.c[0]<8e13||a&&u.c[0]<=9999975e7)))return i=u.s<0&&A(e)?-0:0,u.e>-1&&(i=1/i),new q(s?1/i:i);B&&(i=f(B/b+2))}for(a?(r=new q(.5),s&&(e.s=1),l=A(e)):l=(o=Math.abs(+Z(e)))%2,c=new q(I);;){if(l){if(!(c=c.times(u)).c)break;i?c.c.length>i&&(c.c.length=i):n&&(c=c.mod(t))}if(o){if(0===(o=m(o/2)))break;l=o%2}else if(X(e=e.times(r),e.e+1,1),e.e>14)l=A(e);else{if(0===(o=+Z(e)))break;l=o%2}u=u.times(u),i?u.c&&u.c.length>i&&(u.c.length=i):n&&(u=u.mod(t))}return n?c:(s&&(c=I.div(c)),t?c.mod(t):i?X(c,B,M,void 0):c)},h.integerValue=function(e){var t=new q(this);return null==e?e=M:C(e,0,8),X(t,t.e+1,e)},h.isEqualTo=h.eq=function(e,t){return 0===E(this,new q(e,t))},h.isFinite=function(){return!!this.c},h.isGreaterThan=h.gt=function(e,t){return E(this,new q(e,t))>0},h.isGreaterThanOrEqualTo=h.gte=function(e,t){return 1===(t=E(this,new q(e,t)))||0===t},h.isInteger=function(){return!!this.c&&k(this.e/b)>this.c.length-2},h.isLessThan=h.lt=function(e,t){return E(this,new q(e,t))<0},h.isLessThanOrEqualTo=h.lte=function(e,t){return-1===(t=E(this,new q(e,t)))||0===t},h.isNaN=function(){return!this.s},h.isNegative=function(){return this.s<0},h.isPositive=function(){return this.s>0},h.isZero=function(){return!!this.c&&0==this.c[0]},h.minus=function(e,t){var r,n,o,i,a=this,s=a.s;if(t=(e=new q(e,t)).s,!s||!t)return new q(NaN);if(s!=t)return e.s=-t,a.plus(e);var l=a.e/b,c=e.e/b,u=a.c,d=e.c;if(!l||!c){if(!u||!d)return u?(e.s=-t,e):new q(d?a:NaN);if(!u[0]||!d[0])return d[0]?(e.s=-t,e):new q(u[0]?a:3==M?-0:0)}if(l=k(l),c=k(c),u=u.slice(),s=l-c){for((i=s<0)?(s=-s,o=u):(c=l,o=d),o.reverse(),t=s;t--;o.push(0));o.reverse()}else for(n=(i=(s=u.length)<(t=d.length))?s:t,s=t=0;t<n;t++)if(u[t]!=d[t]){i=u[t]<d[t];break}if(i&&(o=u,u=d,d=o,e.s=-e.s),(t=(n=d.length)-(r=u.length))>0)for(;t--;u[r++]=0);for(t=v-1;n>s;){if(u[--n]<d[n]){for(r=n;r&&!u[--r];u[r]=t);--u[r],u[n]+=v}u[n]-=d[n]}for(;0==u[0];u.splice(0,1),--c);return u[0]?K(e,u,c):(e.s=3==M?-1:1,e.c=[e.e=0],e)},h.modulo=h.mod=function(e,t){var n,o,i=this;return e=new q(e,t),!i.c||!e.s||e.c&&!e.c[0]?new q(NaN):!e.c||i.c&&!i.c[0]?new q(i):(9==N?(o=e.s,e.s=1,n=r(i,e,0,3),e.s=o,n.s*=o):n=r(i,e,0,N),(e=i.minus(n.times(e))).c[0]||1!=N||(e.s=i.s),e)},h.multipliedBy=h.times=function(e,t){var r,n,o,i,a,s,l,c,u,d,h,p,f,m,g,y=this,x=y.c,_=(e=new q(e,t)).c;if(!(x&&_&&x[0]&&_[0]))return!y.s||!e.s||x&&!x[0]&&!_||_&&!_[0]&&!x?e.c=e.e=e.s=null:(e.s*=y.s,x&&_?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=k(y.e/b)+k(e.e/b),e.s*=y.s,(l=x.length)<(d=_.length)&&(f=x,x=_,_=f,o=l,l=d,d=o),o=l+d,f=[];o--;f.push(0));for(m=v,g=w,o=d;--o>=0;){for(r=0,h=_[o]%g,p=_[o]/g|0,i=o+(a=l);i>o;)r=((c=h*(c=x[--a]%g)+(s=p*c+(u=x[a]/g|0)*h)%g*g+f[i]+r)/m|0)+(s/g|0)+p*u,f[i--]=c%m;f[i]=r}return r?++n:f.splice(0,1),K(e,f,n)},h.negated=function(){var e=new q(this);return e.s=-e.s||null,e},h.plus=function(e,t){var r,n=this,o=n.s;if(t=(e=new q(e,t)).s,!o||!t)return new q(NaN);if(o!=t)return e.s=-t,n.minus(e);var i=n.e/b,a=e.e/b,s=n.c,l=e.c;if(!i||!a){if(!s||!l)return new q(o/0);if(!s[0]||!l[0])return l[0]?e:new q(s[0]?n:0*o)}if(i=k(i),a=k(a),s=s.slice(),o=i-a){for(o>0?(a=i,r=l):(o=-o,r=s),r.reverse();o--;r.push(0));r.reverse()}for((o=s.length)-(t=l.length)<0&&(r=l,l=s,s=r,t=o),o=0;t;)o=(s[--t]=s[t]+l[t]+o)/v|0,s[t]=v===s[t]?0:s[t]%v;return o&&(s=[o].concat(s),++a),K(e,s,a)},h.precision=h.sd=function(e,t){var r,n,o,i=this;if(null!=e&&e!==!!e)return C(e,1,S),null==t?t=M:C(t,0,8),X(new q(i),e,t);if(!(r=i.c))return null;if(n=(o=r.length-1)*b+1,o=r[o]){for(;o%10==0;o/=10,n--);for(o=r[0];o>=10;o/=10,n++);}return e&&i.e+1>n&&(n=i.e+1),n},h.shiftedBy=function(e){return C(e,-9007199254740991,x),this.times("1e"+e)},h.squareRoot=h.sqrt=function(){var e,t,n,o,i,a=this,s=a.c,l=a.s,c=a.e,u=O+4,d=new q("0.5");if(1!==l||!s||!s[0])return new q(!l||l<0&&(!s||s[0])?NaN:s?a:1/0);if(0==(l=Math.sqrt(+Z(a)))||l==1/0?(((t=T(s)).length+c)%2==0&&(t+="0"),l=Math.sqrt(+t),c=k((c+1)/2)-(c<0||c%2),n=new q(t=l==1/0?"5e"+c:(t=l.toExponential()).slice(0,t.indexOf("e")+1)+c)):n=new q(l+""),n.c[0])for((l=(c=n.e)+u)<3&&(l=0);;)if(i=n,n=d.times(i.plus(r(a,i,u,1))),T(i.c).slice(0,l)===(t=T(n.c)).slice(0,l)){if(n.e<c&&--l,"9999"!=(t=t.slice(l-3,l+1))&&(o||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(X(n,n.e+O+2,1),e=!n.times(n).eq(a));break}if(!o&&(X(i,i.e+O+2,0),i.times(i).eq(a))){n=i;break}u+=4,l+=4,o=1}return X(n,n.e+O+1,M,e)},h.toExponential=function(e,t){return null!=e&&(C(e,0,S),e++),H(this,e,t,1)},h.toFixed=function(e,t){return null!=e&&(C(e,0,S),e=e+this.e+1),H(this,e,t)},h.toFormat=function(e,t,r){var n,o=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=U;else if("object"!=typeof r)throw Error(g+"Argument not an object: "+r);if(n=o.toFixed(e,t),o.c){var i,a=n.split("."),s=+r.groupSize,l=+r.secondaryGroupSize,c=r.groupSeparator||"",u=a[0],d=a[1],h=o.s<0,p=h?u.slice(1):u,f=p.length;if(l&&(i=s,s=l,l=i,f-=i),s>0&&f>0){for(i=f%s||s,u=p.substr(0,i);i<f;i+=s)u+=c+p.substr(i,s);l>0&&(u+=c+p.slice(i)),h&&(u="-"+u)}n=d?u+(r.decimalSeparator||"")+((l=+r.fractionGroupSize)?d.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):d):u}return(r.prefix||"")+n+(r.suffix||"")},h.toFraction=function(e){var t,n,o,i,a,s,l,c,u,d,h,p,f=this,m=f.c;if(null!=e&&(!(l=new q(e)).isInteger()&&(l.c||1!==l.s)||l.lt(I)))throw Error(g+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+Z(l));if(!m)return new q(f);for(t=new q(I),u=n=new q(I),o=c=new q(I),p=T(m),a=t.e=p.length-f.e-1,t.c[0]=_[(s=a%b)<0?b+s:s],e=!e||l.comparedTo(t)>0?a>0?t:u:l,s=z,z=1/0,l=new q(p),c.c[0]=0;d=r(l,t,0,1),1!=(i=n.plus(d.times(o))).comparedTo(e);)n=o,o=i,u=c.plus(d.times(i=u)),c=i,t=l.minus(d.times(i=t)),l=i;return i=r(e.minus(n),o,0,1),c=c.plus(i.times(u)),n=n.plus(i.times(o)),c.s=u.s=f.s,h=r(u,o,a*=2,M).minus(f).abs().comparedTo(r(c,n,a,M).minus(f).abs())<1?[u,o]:[c,n],z=s,h},h.toNumber=function(){return+Z(this)},h.toPrecision=function(e,t){return null!=e&&C(e,1,S),H(this,e,t,2)},h.toString=function(e){var t,r=this,o=r.s,i=r.e;return null===i?o?(t="Infinity",o<0&&(t="-"+t)):t="NaN":(null==e?t=i<=R||i>=L?j(T(r.c),i):P(T(r.c),i,"0"):10===e&&W?t=P(T((r=X(new q(r),O+i+1,M)).c),r.e,"0"):(C(e,2,V.length,"Base"),t=n(P(T(r.c),i,"0"),10,e,o,!0)),o<0&&r.c[0]&&(t="-"+t)),t},h.valueOf=h.toJSON=function(){return Z(this)},h._isBigNumber=!0,h[Symbol.toStringTag]="BigNumber",h[Symbol.for("nodejs.util.inspect.custom")]=h.valueOf,null!=t&&q.set(t),q}();const O=I;var M=r(4193),R=r.n(M),L=r(9127),F=r.n(L),z=r(5885),D=r(1083),N=r(8330).rE,B={},U=D.A.create({headers:{"X-Client-Name":"js-stellar-sdk","X-Client-Version":N}});function V(e){return Math.floor(e/1e3)}U.interceptors.response.use((function(e){var t=R()(e.config.url).hostname(),r=V(Date.parse(e.headers.date)),n=V((new Date).getTime());return Number.isNaN(r)||(B[t]={serverTime:r,localTimeRecorded:n}),e}));const W=U;function q(e){var t=B[e];if(!t||!t.localTimeRecorded||!t.serverTime)return null;var r=t.serverTime,n=t.localTimeRecorded,o=V((new Date).getTime());return o-n>300?null:o-n+r}function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}var G,K,X;function Z(){Z=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),s=new P(n||[]);return o(a,"_invoke",{value:E(e,r,s)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function y(){}function v(){}function b(){}var x={};c(x,a,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(I([])));w&&w!==r&&n.call(w,a)&&(x=w);var S=b.prototype=y.prototype=Object.create(x);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function r(o,i,a,s){var l=d(e[o],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==H(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function E(t,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=C(s,n);if(l){if(l===g)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var c=d(t,r,n);if("normal"===c.type){if(o=n.done?m:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function C(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=d(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(H(t)+" is not iterable")}return v.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:v,configurable:!0}),v.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(T.prototype),c(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new T(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function Y(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function J(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Y(i,n,o,a,s,"next",e)}function s(e){Y(i,n,o,a,s,"throw",e)}a(void 0)}))}}function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Q(n.key),n)}}function Q(e){var t=function(e){if("object"!=H(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==H(t)?t:t+""}var ee,te,re=["transaction"],ne=r.g,oe=null!==(G=null!==(K=ne.EventSource)&&void 0!==K?K:null===(X=ne.window)||void 0===X?void 0:X.EventSource)&&void 0!==G?G:r(1731),ie=function(e,t){return t&&$(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t.clone(),this.filter=[],this.originalSegments=this.url.segment()||[],this.neighborRoot=r}),[{key:"call",value:function(){var e=this;return this.checkFilter(),this._sendNormalRequest(this.url).then((function(t){return e._parseResponse(t)}))}},{key:"stream",value:function(){var e,t,r=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.checkFilter(),this.url.setQuery("X-Client-Name","js-stellar-sdk"),this.url.setQuery("X-Client-Version",N);var o=function(){t=setTimeout((function(){var t;null===(t=e)||void 0===t||t.close(),e=i()}),n.reconnectTimeout||15e3)},i=function(){try{e=new oe(r.url.toString())}catch(e){n.onerror&&n.onerror(e)}if(o(),!e)return e;var a=!1,s=function(){a||(clearTimeout(t),e.close(),i(),a=!0)},l=function(e){if("close"!==e.type){var i=e.data?r._parseRecord(JSON.parse(e.data)):e;i.paging_token&&r.url.setQuery("cursor",i.paging_token),clearTimeout(t),o(),void 0!==n.onmessage&&n.onmessage(i)}else s()},c=function(e){n.onerror&&n.onerror(e)};return e.addEventListener?(e.addEventListener("message",l.bind(r)),e.addEventListener("error",c.bind(r)),e.addEventListener("close",s.bind(r))):(e.onmessage=l.bind(r),e.onerror=c.bind(r)),e};return i(),function(){var r;clearTimeout(t),null===(r=e)||void 0===r||r.close()}}},{key:"cursor",value:function(e){return this.url.setQuery("cursor",e),this}},{key:"limit",value:function(e){return this.url.setQuery("limit",e.toString()),this}},{key:"order",value:function(e){return this.url.setQuery("order",e),this}},{key:"join",value:function(e){return this.url.setQuery("join",e),this}},{key:"forEndpoint",value:function(e,t){if(""===this.neighborRoot)throw new Error("Invalid usage: neighborRoot not set in constructor");return this.filter.push([e,t,this.neighborRoot]),this}},{key:"checkFilter",value:function(){if(this.filter.length>=2)throw new z.v7("Too many filters specified",this.filter);if(1===this.filter.length){var e=this.originalSegments.concat(this.filter[0]);this.url.segment(e)}}},{key:"_requestFnForLink",value:function(e){var t=this;return J(Z().mark((function r(){var n,o,i,a,s=arguments;return Z().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=s.length>0&&void 0!==s[0]?s[0]:{},e.templated?(i=F()(e.href),o=R()(i.expand(n))):o=R()(e.href),r.next=4,t._sendNormalRequest(o);case 4:return a=r.sent,r.abrupt("return",t._parseResponse(a));case 6:case"end":return r.stop()}}),r)})))}},{key:"_parseRecord",value:function(e){var t=this;return e._links?(Object.keys(e._links).forEach((function(r){var n=e._links[r],o=!1;if(void 0!==e[r]&&(e["".concat(r,"_attr")]=e[r],o=!0),o&&re.indexOf(r)>=0){var i=t._parseRecord(e[r]);e[r]=J(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i);case 1:case"end":return e.stop()}}),e)})))}else e[r]=t._requestFnForLink(n)})),e):e}},{key:"_sendNormalRequest",value:(te=J(Z().mark((function e(t){var r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return""===(r=t).authority()&&(r=r.authority(this.url.authority())),""===r.protocol()&&(r=r.protocol(this.url.protocol())),e.abrupt("return",U.get(r.toString()).then((function(e){return e.data})).catch(this._handleNetworkError));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return te.apply(this,arguments)})},{key:"_parseResponse",value:function(e){return e._embedded&&e._embedded.records?this._toCollectionPage(e):this._parseRecord(e)}},{key:"_toCollectionPage",value:function(e){for(var t,r,n=this,o=0;o<e._embedded.records.length;o+=1)e._embedded.records[o]=this._parseRecord(e._embedded.records[o]);return{records:e._embedded.records,next:(r=J(Z().mark((function t(){var r;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._sendNormalRequest(R()(e._links.next.href));case 2:return r=t.sent,t.abrupt("return",n._toCollectionPage(r));case 4:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)}),prev:(t=J(Z().mark((function t(){var r;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._sendNormalRequest(R()(e._links.prev.href));case 2:return r=t.sent,t.abrupt("return",n._toCollectionPage(r));case 4:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}}},{key:"_handleNetworkError",value:(ee=J(Z().mark((function e(t){var r,n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.response||!t.response.status){e.next=8;break}e.t0=t.response.status,e.next=404===e.t0?4:5;break;case 4:return e.abrupt("return",Promise.reject(new z.m_(null!==(r=t.response.statusText)&&void 0!==r?r:"Not Found",t.response.data)));case 5:return e.abrupt("return",Promise.reject(new z.Dr(null!==(n=t.response.statusText)&&void 0!==n?n:"Unknown",t.response.data)));case 6:e.next=9;break;case 8:return e.abrupt("return",Promise.reject(new Error(t.message)));case 9:case"end":return e.stop()}}),e)}))),function(e){return ee.apply(this,arguments)})}]),ae=r(8732);function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ce(n.key),n)}}function ce(e){var t=function(e){if("object"!=se(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==se(t)?t:t+""}function ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ue=function(){return!!e})()}function de(e){return de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},de(e)}function he(e,t){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},he(e,t)}var pe=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,r){return t=de(t),function(e,t){if(t&&("object"==se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ue()?Reflect.construct(t,r||[],de(e).constructor):t.apply(e,r))}(this,t,[e])).url.segment("accounts"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}(t,e),function(e,t){return t&&le(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"accountId",value:function(e){var t=new ie(this.url.clone());return t.filter.push([e]),t}},{key:"forSigner",value:function(e){return this.url.setQuery("signer",e),this}},{key:"forAsset",value:function(e){return this.url.setQuery("asset","".concat(e)),this}},{key:"sponsor",value:function(e){return this.url.setQuery("sponsor",e),this}},{key:"forLiquidityPool",value:function(e){return this.url.setQuery("liquidity_pool",e),this}}])}(ie);function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ge(n.key),n)}}function ge(e){var t=function(e){if("object"!=fe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fe(t)?t:t+""}function ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ye=function(){return!!e})()}function ve(e){return ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ve(e)}function be(e,t){return be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},be(e,t)}var xe=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,r){return t=ve(t),function(e,t){if(t&&("object"==fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ye()?Reflect.construct(t,r||[],ve(e).constructor):t.apply(e,r))}(this,t,[e])).url.segment("assets"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&be(e,t)}(t,e),function(e,t){return t&&me(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"forCode",value:function(e){return this.url.setQuery("asset_code",e),this}},{key:"forIssuer",value:function(e){return this.url.setQuery("asset_issuer",e),this}}])}(ie);function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function we(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Se(n.key),n)}}function Se(e){var t=function(e){if("object"!=_e(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=_e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_e(t)?t:t+""}function ke(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ke=function(){return!!e})()}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}function Ee(e,t){return Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ee(e,t)}var Ce=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,r){return t=Te(t),function(e,t){if(t&&("object"==_e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ke()?Reflect.construct(t,r||[],Te(e).constructor):t.apply(e,r))}(this,t,[e])).url.segment("claimable_balances"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ee(e,t)}(t,e),function(e,t){return t&&we(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"claimableBalance",value:function(e){var t=new ie(this.url.clone());return t.filter.push([e]),t}},{key:"sponsor",value:function(e){return this.url.setQuery("sponsor",e),this}},{key:"claimant",value:function(e){return this.url.setQuery("claimant",e),this}},{key:"asset",value:function(e){return this.url.setQuery("asset",e.toString()),this}}])}(ie);function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Pe(n.key),n)}}function Pe(e){var t=function(e){if("object"!=Ae(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ae(t)?t:t+""}function Ie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ie=function(){return!!e})()}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}function Me(e,t){return Me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Me(e,t)}var Re=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,r){return t=Oe(t),function(e,t){if(t&&("object"==Ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ie()?Reflect.construct(t,r||[],Oe(e).constructor):t.apply(e,r))}(this,t,[e,"effects"])).url.segment("effects"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Me(e,t)}(t,e),function(e,t){return t&&je(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"forAccount",value:function(e){return this.forEndpoint("accounts",e)}},{key:"forLedger",value:function(e){return this.forEndpoint("ledgers",e.toString())}},{key:"forTransaction",value:function(e){return this.forEndpoint("transactions",e)}},{key:"forOperation",value:function(e){return this.forEndpoint("operations",e)}},{key:"forLiquidityPool",value:function(e){return this.forEndpoint("liquidity_pools",e)}}])}(ie);function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}function Fe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fe=function(){return!!e})()}function ze(e){return ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ze(e)}function De(e,t){return De=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},De(e,t)}var Ne=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,r){return t=ze(t),function(e,t){if(t&&("object"==Le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Fe()?Reflect.construct(t,r||[],ze(e).constructor):t.apply(e,r))}(this,t,[e])).url.segment("friendbot"),n.url.setQuery("addr",r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&De(e,t)}(t,e),function(e){return Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(ie);function Be(e){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be(e)}function Ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ve(n.key),n)}}function Ve(e){var t=function(e){if("object"!=Be(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Be(t)?t:t+""}function We(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(We=function(){return!!e})()}function qe(e){return qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qe(e)}function He(e,t){return He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},He(e,t)}var Ge=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,r){return t=qe(t),function(e,t){if(t&&("object"==Be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,We()?Reflect.construct(t,r||[],qe(e).constructor):t.apply(e,r))}(this,t,[e])).url.segment("ledgers"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&He(e,t)}(t,e),function(e,t){return t&&Ue(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"ledger",value:function(e){return this.filter.push(["ledgers",e.toString()]),this}}])}(ie);function Ke(e){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ke(e)}function Xe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ze(n.key),n)}}function Ze(e){var t=function(e){if("object"!=Ke(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ke(t)?t:t+""}function Ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ye=function(){return!!e})()}function Je(e){return Je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Je(e)}function $e(e,t){return $e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$e(e,t)}var Qe=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,r){return t=Je(t),function(e,t){if(t&&("object"==Ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ye()?Reflect.construct(t,r||[],Je(e).constructor):t.apply(e,r))}(this,t,[e])).url.segment("liquidity_pools"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$e(e,t)}(t,e),function(e,t){return t&&Xe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"forAssets",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.map((function(e){return e.toString()})).join(",");return this.url.setQuery("reserves",n),this}},{key:"forAccount",value:function(e){return this.url.setQuery("account",e),this}},{key:"liquidityPoolId",value:function(e){if(!e.match(/[a-fA-F0-9]{64}/))throw new TypeError("".concat(e," does not look like a liquidity pool ID"));var t=new ie(this.url.clone());return t.filter.push([e.toLowerCase()]),t}}])}(ie);function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rt(n.key),n)}}function rt(e){var t=function(e){if("object"!=et(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==et(t)?t:t+""}function nt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nt=function(){return!!e})()}function ot(e){return ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ot(e)}function it(e,t){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},it(e,t)}var at=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,r){return t=ot(t),function(e,t){if(t&&("object"==et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,nt()?Reflect.construct(t,r||[],ot(e).constructor):t.apply(e,r))}(this,t,[e,"offers"])).url.segment("offers"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&it(e,t)}(t,e),function(e,t){return t&&tt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"offer",value:function(e){var t=new ie(this.url.clone());return t.filter.push([e]),t}},{key:"forAccount",value:function(e){return this.forEndpoint("accounts",e)}},{key:"buying",value:function(e){return e.isNative()?this.url.setQuery("buying_asset_type","native"):(this.url.setQuery("buying_asset_type",e.getAssetType()),this.url.setQuery("buying_asset_code",e.getCode()),this.url.setQuery("buying_asset_issuer",e.getIssuer())),this}},{key:"selling",value:function(e){return e.isNative()?this.url.setQuery("selling_asset_type","native"):(this.url.setQuery("selling_asset_type",e.getAssetType()),this.url.setQuery("selling_asset_code",e.getCode()),this.url.setQuery("selling_asset_issuer",e.getIssuer())),this}},{key:"sponsor",value:function(e){return this.url.setQuery("sponsor",e),this}},{key:"seller",value:function(e){return this.url.setQuery("seller",e),this}}])}(ie);function st(e){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(e)}function lt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ct(n.key),n)}}function ct(e){var t=function(e){if("object"!=st(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=st(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==st(t)?t:t+""}function ut(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ut=function(){return!!e})()}function dt(e){return dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dt(e)}function ht(e,t){return ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ht(e,t)}var pt=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,r){return t=dt(t),function(e,t){if(t&&("object"==st(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ut()?Reflect.construct(t,r||[],dt(e).constructor):t.apply(e,r))}(this,t,[e,"operations"])).url.segment("operations"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ht(e,t)}(t,e),function(e,t){return t&&lt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"operation",value:function(e){var t=new ie(this.url.clone());return t.filter.push([e]),t}},{key:"forAccount",value:function(e){return this.forEndpoint("accounts",e)}},{key:"forClaimableBalance",value:function(e){return this.forEndpoint("claimable_balances",e)}},{key:"forLedger",value:function(e){return this.forEndpoint("ledgers",e.toString())}},{key:"forTransaction",value:function(e){return this.forEndpoint("transactions",e)}},{key:"forLiquidityPool",value:function(e){return this.forEndpoint("liquidity_pools",e)}},{key:"includeFailed",value:function(e){return this.url.setQuery("include_failed",e.toString()),this}}])}(ie);function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}function mt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mt=function(){return!!e})()}function gt(e){return gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gt(e)}function yt(e,t){return yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yt(e,t)}var vt=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=function(e,t,r){return t=gt(t),function(e,t){if(t&&("object"==ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mt()?Reflect.construct(t,r||[],gt(e).constructor):t.apply(e,r))}(this,t,[e])).url.segment("order_book"),r.isNative()?o.url.setQuery("selling_asset_type","native"):(o.url.setQuery("selling_asset_type",r.getAssetType()),o.url.setQuery("selling_asset_code",r.getCode()),o.url.setQuery("selling_asset_issuer",r.getIssuer())),n.isNative()?o.url.setQuery("buying_asset_type","native"):(o.url.setQuery("buying_asset_type",n.getAssetType()),o.url.setQuery("buying_asset_code",n.getCode()),o.url.setQuery("buying_asset_issuer",n.getIssuer())),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yt(e,t)}(t,e),function(e){return Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(ie);function bt(e){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bt(e)}function xt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_t(n.key),n)}}function _t(e){var t=function(e){if("object"!=bt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=bt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==bt(t)?t:t+""}function wt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wt=function(){return!!e})()}function St(e){return St=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},St(e)}function kt(e,t){return kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kt(e,t)}var Tt=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,r){return t=St(t),function(e,t){if(t&&("object"==bt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,wt()?Reflect.construct(t,r||[],St(e).constructor):t.apply(e,r))}(this,t,[e,"payments"])).url.segment("payments"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kt(e,t)}(t,e),function(e,t){return t&&xt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"forAccount",value:function(e){return this.forEndpoint("accounts",e)}},{key:"forLedger",value:function(e){return this.forEndpoint("ledgers",e.toString())}},{key:"forTransaction",value:function(e){return this.forEndpoint("transactions",e)}}])}(ie);function Et(e){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Et(e)}function Ct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ct=function(){return!!e})()}function At(e){return At=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},At(e)}function jt(e,t){return jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jt(e,t)}var Pt=function(e){function t(e,r,n,o){var i;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=function(e,t,r){return t=At(t),function(e,t){if(t&&("object"==Et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ct()?Reflect.construct(t,r||[],At(e).constructor):t.apply(e,r))}(this,t,[e])).url.segment("paths/strict-receive"),"string"==typeof r)i.url.setQuery("source_account",r);else{var a=r.map((function(e){return e.isNative()?"native":"".concat(e.getCode(),":").concat(e.getIssuer())})).join(",");i.url.setQuery("source_assets",a)}return i.url.setQuery("destination_amount",o),n.isNative()?i.url.setQuery("destination_asset_type","native"):(i.url.setQuery("destination_asset_type",n.getAssetType()),i.url.setQuery("destination_asset_code",n.getCode()),i.url.setQuery("destination_asset_issuer",n.getIssuer())),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jt(e,t)}(t,e),function(e){return Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(ie);function It(e){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},It(e)}function Ot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ot=function(){return!!e})()}function Mt(e){return Mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mt(e)}function Rt(e,t){return Rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rt(e,t)}var Lt=function(e){function t(e,r,n,o){var i;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=function(e,t,r){return t=Mt(t),function(e,t){if(t&&("object"==It(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ot()?Reflect.construct(t,r||[],Mt(e).constructor):t.apply(e,r))}(this,t,[e])).url.segment("paths/strict-send"),r.isNative()?i.url.setQuery("source_asset_type","native"):(i.url.setQuery("source_asset_type",r.getAssetType()),i.url.setQuery("source_asset_code",r.getCode()),i.url.setQuery("source_asset_issuer",r.getIssuer())),i.url.setQuery("source_amount",n),"string"==typeof o)i.url.setQuery("destination_account",o);else{var a=o.map((function(e){return e.isNative()?"native":"".concat(e.getCode(),":").concat(e.getIssuer())})).join(",");i.url.setQuery("destination_assets",a)}return i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rt(e,t)}(t,e),function(e){return Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(ie);function Ft(e){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft(e)}function zt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Dt(n.key),n)}}function Dt(e){var t=function(e){if("object"!=Ft(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ft(t)?t:t+""}function Nt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Nt=function(){return!!e})()}function Bt(e){return Bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bt(e)}function Ut(e,t){return Ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ut(e,t)}var Vt=[6e4,3e5,9e5,36e5,864e5,6048e5],Wt=function(e){function t(e,r,n,o,i,a,s){var l;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(l=function(e,t,r){return t=Bt(t),function(e,t){if(t&&("object"==Ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Nt()?Reflect.construct(t,r||[],Bt(e).constructor):t.apply(e,r))}(this,t,[e])).url.segment("trade_aggregations"),r.isNative()?l.url.setQuery("base_asset_type","native"):(l.url.setQuery("base_asset_type",r.getAssetType()),l.url.setQuery("base_asset_code",r.getCode()),l.url.setQuery("base_asset_issuer",r.getIssuer())),n.isNative()?l.url.setQuery("counter_asset_type","native"):(l.url.setQuery("counter_asset_type",n.getAssetType()),l.url.setQuery("counter_asset_code",n.getCode()),l.url.setQuery("counter_asset_issuer",n.getIssuer())),"number"!=typeof o||"number"!=typeof i)throw new z.v7("Invalid time bounds",[o,i]);if(l.url.setQuery("start_time",o.toString()),l.url.setQuery("end_time",i.toString()),!l.isValidResolution(a))throw new z.v7("Invalid resolution",a);if(l.url.setQuery("resolution",a.toString()),!l.isValidOffset(s,a))throw new z.v7("Invalid offset",s);return l.url.setQuery("offset",s.toString()),l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ut(e,t)}(t,e),function(e,t){return t&&zt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"isValidResolution",value:function(e){return Vt.some((function(t){return t===e}))}},{key:"isValidOffset",value:function(e,t){var r=36e5;return!(e>t||e>=24*r||e%r!=0)}}])}(ie);function qt(e){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qt(e)}function Ht(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Gt(n.key),n)}}function Gt(e){var t=function(e){if("object"!=qt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==qt(t)?t:t+""}function Kt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Kt=function(){return!!e})()}function Xt(e){return Xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xt(e)}function Zt(e,t){return Zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zt(e,t)}var Yt=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,r){return t=Xt(t),function(e,t){if(t&&("object"==qt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Kt()?Reflect.construct(t,r||[],Xt(e).constructor):t.apply(e,r))}(this,t,[e,"trades"])).url.segment("trades"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zt(e,t)}(t,e),function(e,t){return t&&Ht(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"forAssetPair",value:function(e,t){return e.isNative()?this.url.setQuery("base_asset_type","native"):(this.url.setQuery("base_asset_type",e.getAssetType()),this.url.setQuery("base_asset_code",e.getCode()),this.url.setQuery("base_asset_issuer",e.getIssuer())),t.isNative()?this.url.setQuery("counter_asset_type","native"):(this.url.setQuery("counter_asset_type",t.getAssetType()),this.url.setQuery("counter_asset_code",t.getCode()),this.url.setQuery("counter_asset_issuer",t.getIssuer())),this}},{key:"forOffer",value:function(e){return this.url.setQuery("offer_id",e),this}},{key:"forType",value:function(e){return this.url.setQuery("trade_type",e),this}},{key:"forAccount",value:function(e){return this.forEndpoint("accounts",e)}},{key:"forLiquidityPool",value:function(e){return this.forEndpoint("liquidity_pools",e)}}])}(ie);function Jt(e){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(e)}function $t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Qt(n.key),n)}}function Qt(e){var t=function(e){if("object"!=Jt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Jt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Jt(t)?t:t+""}function er(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(er=function(){return!!e})()}function tr(e){return tr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tr(e)}function rr(e,t){return rr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rr(e,t)}var nr=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t,r){return t=tr(t),function(e,t){if(t&&("object"==Jt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,er()?Reflect.construct(t,r||[],tr(e).constructor):t.apply(e,r))}(this,t,[e,"transactions"])).url.segment("transactions"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rr(e,t)}(t,e),function(e,t){return t&&$t(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"transaction",value:function(e){var t=new ie(this.url.clone());return t.filter.push([e]),t}},{key:"forAccount",value:function(e){return this.forEndpoint("accounts",e)}},{key:"forClaimableBalance",value:function(e){return this.forEndpoint("claimable_balances",e)}},{key:"forLedger",value:function(e){return this.forEndpoint("ledgers",e.toString())}},{key:"forLiquidityPool",value:function(e){return this.forEndpoint("liquidity_pools",e)}},{key:"includeFailed",value:function(e){return this.url.setQuery("include_failed",e.toString()),this}}])}(ie);function or(e){return or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},or(e)}function ir(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ar(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(r),!0).forEach((function(t){sr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ir(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sr(e,t,r){return(t=hr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lr(){lr=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),s=new P(n||[]);return o(a,"_invoke",{value:E(e,r,s)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function y(){}function v(){}function b(){}var x={};c(x,a,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(I([])));w&&w!==r&&n.call(w,a)&&(x=w);var S=b.prototype=y.prototype=Object.create(x);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function r(o,i,a,s){var l=d(e[o],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==or(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function E(t,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=C(s,n);if(l){if(l===g)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var c=d(t,r,n);if("normal"===c.type){if(o=n.done?m:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function C(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=d(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(or(t)+" is not iterable")}return v.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:v,configurable:!0}),v.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(T.prototype),c(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new T(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function cr(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function ur(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){cr(i,n,o,a,s,"next",e)}function s(e){cr(i,n,o,a,s,"throw",e)}a(void 0)}))}}function dr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hr(n.key),n)}}function hr(e){var t=function(e){if("object"!=or(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=or(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==or(t)?t:t+""}function pr(e){return new O(e).div(1e7).toString()}var fr,mr,gr,yr,vr,br,xr,_r=function(e,t){return t&&dr(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.serverURL=R()(t);var n=void 0===r.allowHttp?ae.T.isAllowHttp():r.allowHttp,o={};if(r.appName&&(o["X-App-Name"]=r.appName),r.appVersion&&(o["X-App-Version"]=r.appVersion),r.authToken&&(o["X-Auth-Token"]=r.authToken),r.headers&&Object.assign(o,r.headers),Object.keys(o).length>0&&W.interceptors.request.use((function(e){return e.headers=Object.assign(e.headers,o),e})),"https"!==this.serverURL.protocol()&&!n)throw new Error("Cannot connect to insecure horizon server")}),[{key:"fetchTimebounds",value:(xr=ur(lr().mark((function e(t){var r,n,o=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]&&o[1],!(n=q(this.serverURL.hostname()))){e.next=4;break}return e.abrupt("return",{minTime:0,maxTime:n+t});case 4:if(!r){e.next=6;break}return e.abrupt("return",{minTime:0,maxTime:Math.floor((new Date).getTime()/1e3)+t});case 6:return e.next=8,W.get(R()(this.serverURL).toString());case 8:return e.abrupt("return",this.fetchTimebounds(t,!0));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return xr.apply(this,arguments)})},{key:"fetchBaseFee",value:(br=ur(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.feeStats();case 2:return t=e.sent,e.abrupt("return",parseInt(t.last_ledger_base_fee,10)||100);case 4:case"end":return e.stop()}}),e,this)}))),function(){return br.apply(this,arguments)})},{key:"feeStats",value:(vr=ur(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new ie(R()(this.serverURL))).filter.push(["fee_stats"]),e.abrupt("return",t.call());case 3:case"end":return e.stop()}}),e,this)}))),function(){return vr.apply(this,arguments)})},{key:"submitTransaction",value:(yr=ur(lr().mark((function e(t){var r,n=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n.length>1&&void 0!==n[1]?n[1]:{skipMemoRequiredCheck:!1}).skipMemoRequiredCheck){e.next=4;break}return e.next=4,this.checkMemoRequired(t);case 4:return r=encodeURIComponent(t.toEnvelope().toXDR().toString("base64")),e.abrupt("return",W.post(R()(this.serverURL).segment("transactions").toString(),"tx=".concat(r),{timeout:6e4}).then((function(e){if(!e.data.result_xdr)return e.data;var t,r,n=i.xdr.TransactionResult.fromXDR(e.data.result_xdr,"base64").result().value();return n.length&&(t=n.map((function(e,t){if("manageBuyOffer"!==e.value().switch().name&&"manageSellOffer"!==e.value().switch().name)return null;r=!0;var n,o=new O(0),a=new O(0),s=e.value().value().success(),l=s.offersClaimed().map((function(e){var t=e.value(),r="";switch(e.switch()){case i.xdr.ClaimAtomType.claimAtomTypeV0():r=i.StrKey.encodeEd25519PublicKey(t.sellerEd25519());break;case i.xdr.ClaimAtomType.claimAtomTypeOrderBook():r=i.StrKey.encodeEd25519PublicKey(t.sellerId().ed25519());break;default:throw new Error("Invalid offer result type: ".concat(e.switch()))}var n=new O(t.amountBought().toString()),s=new O(t.amountSold().toString());o=o.plus(s),a=a.plus(n);var l=i.Asset.fromOperation(t.assetSold()),c=i.Asset.fromOperation(t.assetBought()),u={type:l.getAssetType(),assetCode:l.getCode(),issuer:l.getIssuer()},d={type:c.getAssetType(),assetCode:c.getCode(),issuer:c.getIssuer()};return{sellerId:r,offerId:t.offerId().toString(),assetSold:u,amountSold:pr(s),assetBought:d,amountBought:pr(n)}})),c=s.offer().switch().name;if("function"==typeof s.offer().value&&s.offer().value()){var u=s.offer().value();n={offerId:u.offerId().toString(),selling:{},buying:{},amount:pr(u.amount().toString()),price:{n:u.price().n(),d:u.price().d()}};var d=i.Asset.fromOperation(u.selling());n.selling={type:d.getAssetType(),assetCode:d.getCode(),issuer:d.getIssuer()};var h=i.Asset.fromOperation(u.buying());n.buying={type:h.getAssetType(),assetCode:h.getCode(),issuer:h.getIssuer()}}return{offersClaimed:l,effect:c,operationIndex:t,currentOffer:n,amountBought:pr(o),amountSold:pr(a),isFullyOpen:!l.length&&"manageOfferDeleted"!==c,wasPartiallyFilled:!!l.length&&"manageOfferDeleted"!==c,wasImmediatelyFilled:!!l.length&&"manageOfferDeleted"===c,wasImmediatelyDeleted:!l.length&&"manageOfferDeleted"===c}})).filter((function(e){return!!e}))),ar(ar({},e.data),{},{offerResults:r?t:void 0})})).catch((function(e){return e instanceof Error?Promise.reject(e):Promise.reject(new z.nS("Transaction submission failed. Server responded: ".concat(e.status," ").concat(e.statusText),e.data))})));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return yr.apply(this,arguments)})},{key:"submitAsyncTransaction",value:(gr=ur(lr().mark((function e(t){var r,n=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n.length>1&&void 0!==n[1]?n[1]:{skipMemoRequiredCheck:!1}).skipMemoRequiredCheck){e.next=4;break}return e.next=4,this.checkMemoRequired(t);case 4:return r=encodeURIComponent(t.toEnvelope().toXDR().toString("base64")),e.abrupt("return",W.post(R()(this.serverURL).segment("transactions_async").toString(),"tx=".concat(r)).then((function(e){return e.data})).catch((function(e){return e instanceof Error?Promise.reject(e):Promise.reject(new z.nS("Transaction submission failed. Server responded: ".concat(e.status," ").concat(e.statusText),e.data))})));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return gr.apply(this,arguments)})},{key:"accounts",value:function(){return new pe(R()(this.serverURL))}},{key:"claimableBalances",value:function(){return new Ce(R()(this.serverURL))}},{key:"ledgers",value:function(){return new Ge(R()(this.serverURL))}},{key:"transactions",value:function(){return new nr(R()(this.serverURL))}},{key:"offers",value:function(){return new at(R()(this.serverURL))}},{key:"orderbook",value:function(e,t){return new vt(R()(this.serverURL),e,t)}},{key:"trades",value:function(){return new Yt(R()(this.serverURL))}},{key:"operations",value:function(){return new pt(R()(this.serverURL))}},{key:"liquidityPools",value:function(){return new Qe(R()(this.serverURL))}},{key:"strictReceivePaths",value:function(e,t,r){return new Pt(R()(this.serverURL),e,t,r)}},{key:"strictSendPaths",value:function(e,t,r){return new Lt(R()(this.serverURL),e,t,r)}},{key:"payments",value:function(){return new Tt(R()(this.serverURL))}},{key:"effects",value:function(){return new Re(R()(this.serverURL))}},{key:"friendbot",value:function(e){return new Ne(R()(this.serverURL),e)}},{key:"assets",value:function(){return new xe(R()(this.serverURL))}},{key:"loadAccount",value:(mr=ur(lr().mark((function e(t){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.accounts().accountId(t).call();case 2:return r=e.sent,e.abrupt("return",new h(r));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return mr.apply(this,arguments)})},{key:"tradeAggregation",value:function(e,t,r,n,o,i){return new Wt(R()(this.serverURL),e,t,r,n,o,i)}},{key:"checkMemoRequired",value:(fr=ur(lr().mark((function e(t){var r,n,o,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof i.FeeBumpTransaction&&(t=t.innerTransaction),"none"===t.memo.type){e.next=3;break}return e.abrupt("return");case 3:r=new Set,n=0;case 5:if(!(n<t.operations.length)){e.next=36;break}o=t.operations[n],e.t0=o.type,e.next="payment"===e.t0||"pathPaymentStrictReceive"===e.t0||"pathPaymentStrictSend"===e.t0||"accountMerge"===e.t0?10:11;break;case 10:return e.abrupt("break",12);case 11:return e.abrupt("continue",33);case 12:if(a=o.destination,!r.has(a)){e.next=15;break}return e.abrupt("continue",33);case 15:if(r.add(a),!a.startsWith("M")){e.next=18;break}return e.abrupt("continue",33);case 18:return e.prev=18,e.next=21,this.loadAccount(a);case 21:if("MQ=="!==e.sent.data_attr["config.memo_required"]){e.next=24;break}throw new z.Cu("account requires memo",a,n);case 24:e.next=33;break;case 26:if(e.prev=26,e.t1=e.catch(18),!(e.t1 instanceof z.Cu)){e.next=30;break}throw e.t1;case 30:if(e.t1 instanceof z.m_){e.next=32;break}throw e.t1;case 32:return e.abrupt("continue",33);case 33:n+=1,e.next=5;break;case 36:case"end":return e.stop()}}),e,this,[[18,26]])}))),function(e){return fr.apply(this,arguments)})}]);const wr=(e=r.hmd(e)).exports},4356:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AccountRequiresMemoError:()=>n.Cu,BadRequestError:()=>n.v7,BadResponseError:()=>n.nS,Config:()=>o.T,Federation:()=>s,Friendbot:()=>c,Horizon:()=>u,NetworkError:()=>n.Dr,NotFoundError:()=>n.m_,SorobanRpc:()=>d,StellarToml:()=>a,Utils:()=>i.A,WebAuth:()=>l,contract:()=>h,default:()=>m,rpc:()=>d});var n=r(5885),o=r(8732),i=r(3121),a=r(3898),s=r(7600),l=r(5479),c=r(8242),u=r(2731),d=r(1660),h=r(6299),p=r(356),f={};for(const g in p)["default","Config","Utils","StellarToml","Federation","WebAuth","Friendbot","Horizon","rpc","SorobanRpc","contract","AccountRequiresMemoError","BadRequestError","BadResponseError","NetworkError","NotFoundError"].indexOf(g)<0&&(f[g]=()=>p[g]);r.d(t,f);const m=(e=r.hmd(e)).exports},4076:(e,t,r)=>{"use strict";var n;r.d(t,{j:()=>n}),function(e){var t=function(e){return e.SUCCESS="SUCCESS",e.NOT_FOUND="NOT_FOUND",e.FAILED="FAILED",e}({});function r(e){return"transactionData"in e}e.GetTransactionStatus=t,e.isSimulationError=function(e){return"error"in e},e.isSimulationSuccess=r,e.isSimulationRestore=function(e){return r(e)&&"restorePreamble"in e&&!!e.restorePreamble.transactionData},e.isSimulationRaw=function(e){return!e._parsed}}(n||(n={}))},4982:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>i});var n=r(1083),o=r(8330).rE;const i=n.A.create({headers:{"X-Client-Name":"js-soroban-client","X-Client-Version":o}})},1660:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Api:()=>n.j,AxiosClient:()=>i.Ay,Durability:()=>o.ku,Server:()=>o.gq,assembleTransaction:()=>s.X,default:()=>l,parseRawEvents:()=>a.fG,parseRawSimulation:()=>a.jr});var n=r(4076),o=r(1575),i=r(4982),a=r(784),s=r(8680);const l=(e=r.hmd(e)).exports},784:(e,t,r)=>{"use strict";r.d(t,{$D:()=>p,Af:()=>c,WC:()=>u,fG:()=>h,jr:()=>f,tR:()=>d});var n=r(356),o=r(4076);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return(t=function(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){var t=e.errorResultXdr,r=e.diagnosticEventsXdr;return delete e.errorResultXdr,delete e.diagnosticEventsXdr,t?s(s(s({},e),void 0!==r&&r.length>0&&{diagnosticEvents:r.map((function(e){return n.xdr.DiagnosticEvent.fromXDR(e,"base64")}))}),{},{errorResult:n.xdr.TransactionResult.fromXDR(t,"base64")}):s({},e)}function u(e){var t,r=n.xdr.TransactionMeta.fromXDR(e.resultMetaXdr,"base64"),o={ledger:e.ledger,createdAt:e.createdAt,applicationOrder:e.applicationOrder,feeBump:e.feeBump,envelopeXdr:n.xdr.TransactionEnvelope.fromXDR(e.envelopeXdr,"base64"),resultXdr:n.xdr.TransactionResult.fromXDR(e.resultXdr,"base64"),resultMetaXdr:r};return 3===r.switch()&&null!==r.v3().sorobanMeta()&&(o.returnValue=null===(t=r.v3().sorobanMeta())||void 0===t?void 0:t.returnValue()),"diagnosticEventsXdr"in e&&e.diagnosticEventsXdr&&(o.diagnosticEventsXdr=e.diagnosticEventsXdr.map((function(e){return n.xdr.DiagnosticEvent.fromXDR(e,"base64")}))),o}function d(e){return s({status:e.status},u(e))}function h(e){var t;return{latestLedger:e.latestLedger,events:(null!==(t=e.events)&&void 0!==t?t:[]).map((function(e){var t=s({},e);return delete t.contractId,s(s(s({},t),""!==e.contractId&&{contractId:new n.Contract(e.contractId)}),{},{topic:e.topic.map((function(e){return n.xdr.ScVal.fromXDR(e,"base64")})),value:n.xdr.ScVal.fromXDR(e.value,"base64")})}))}}function p(e){var t;return{latestLedger:e.latestLedger,entries:(null!==(t=e.entries)&&void 0!==t?t:[]).map((function(e){if(!e.key||!e.xdr)throw new TypeError("invalid ledger entry: ".concat(JSON.stringify(e)));return s({lastModifiedLedgerSeq:e.lastModifiedLedgerSeq,key:n.xdr.LedgerKey.fromXDR(e.key,"base64"),val:n.xdr.LedgerEntryData.fromXDR(e.xdr,"base64")},void 0!==e.liveUntilLedgerSeq&&{liveUntilLedgerSeq:e.liveUntilLedgerSeq})}))}}function f(e){var t,r;if(!o.j.isSimulationRaw(e))return e;var i={_parsed:!0,id:e.id,latestLedger:e.latestLedger,events:null!==(t=null===(r=e.events)||void 0===r?void 0:r.map((function(e){return n.xdr.DiagnosticEvent.fromXDR(e,"base64")})))&&void 0!==t?t:[]};return"string"==typeof e.error?s(s({},i),{},{error:e.error}):function(e,t){var r,o,i,a,l,c=s(s(s({},t),{},{transactionData:new n.SorobanDataBuilder(e.transactionData),minResourceFee:e.minResourceFee,cost:e.cost},null!==(r=null===(o=e.results)||void 0===o?void 0:o.length)&&void 0!==r&&r&&{result:e.results.map((function(e){var t;return{auth:(null!==(t=e.auth)&&void 0!==t?t:[]).map((function(e){return n.xdr.SorobanAuthorizationEntry.fromXDR(e,"base64")})),retval:e.xdr?n.xdr.ScVal.fromXDR(e.xdr,"base64"):n.xdr.ScVal.scvVoid()}}))[0]}),null!==(i=null===(a=e.stateChanges)||void 0===a?void 0:a.length)&&void 0!==i&&i&&{stateChanges:null===(l=e.stateChanges)||void 0===l?void 0:l.map((function(e){return{type:e.type,key:n.xdr.LedgerKey.fromXDR(e.key,"base64"),before:e.before?n.xdr.LedgerEntry.fromXDR(e.before,"base64"):null,after:e.after?n.xdr.LedgerEntry.fromXDR(e.after,"base64"):null}}))});return e.restorePreamble&&""!==e.restorePreamble.transactionData?s(s({},c),{},{restorePreamble:{minResourceFee:e.restorePreamble.minResourceFee,transactionData:new n.SorobanDataBuilder(e.restorePreamble.transactionData)}}):c}(e,i)}},1575:(e,t,r)=>{"use strict";r.d(t,{ku:()=>T,gq:()=>$});var n=r(4193),o=r.n(n),i=r(356),a=r(4982);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(){l=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function h(e,t,r,n){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),s=new O(n||[]);return o(a,"_invoke",{value:A(e,r,s)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var f="suspendedStart",m="suspendedYield",g="executing",y="completed",v={};function b(){}function x(){}function _(){}var w={};d(w,a,(function(){return this}));var S=Object.getPrototypeOf,k=S&&S(S(M([])));k&&k!==r&&n.call(k,a)&&(w=k);var T=_.prototype=b.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,i,a,l){var c=p(e[o],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==s(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=f;return function(i,a){if(o===g)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=j(s,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=g;var c=p(t,r,n);if("normal"===c.type){if(o=n.done?y:m,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=p(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function M(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(s(t)+" is not iterable")}return x.prototype=_,o(T,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:x,configurable:!0}),x.displayName=d(_,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,d(e,u,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},E(C.prototype),d(C.prototype,c,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new C(h(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(T),d(T,u,"Generator"),d(T,a,(function(){return this})),d(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=M,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:M(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function c(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function u(e,t){return d.apply(this,arguments)}function d(){var e;return e=l().mark((function e(t,r){var n,o,i,s=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:null,e.next=3,a.Ay.post(t,{jsonrpc:"2.0",id:1,method:r,params:n});case 3:if(!(o=e.sent).data.hasOwnProperty("error")){e.next=8;break}throw o.data.error;case 8:return e.abrupt("return",null===(i=o.data)||void 0===i?void 0:i.result);case 9:case"end":return e.stop()}}),e)})),d=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){c(i,n,o,a,s,"next",e)}function s(e){c(i,n,o,a,s,"throw",e)}a(void 0)}))},d.apply(this,arguments)}var h=r(4076),p=r(8680),f=r(784),m=r(8287).Buffer;function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=k(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(){x=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new O(n||[]);return o(a,"_invoke",{value:A(e,r,s)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",p="suspendedYield",f="executing",m="completed",y={};function v(){}function b(){}function _(){}var w={};c(w,a,(function(){return this}));var S=Object.getPrototypeOf,k=S&&S(S(M([])));k&&k!==r&&n.call(k,a)&&(w=k);var T=_.prototype=v.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,i,a,s){var l=d(e[o],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==g(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=j(s,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var c=d(t,r,n);if("normal"===c.type){if(o=n.done?m:p,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function M(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(g(t)+" is not iterable")}return b.prototype=_,o(T,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:b,configurable:!0}),b.displayName=c(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,l,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},E(C.prototype),c(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new C(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(T),c(T,l,"Generator"),c(T,a,(function(){return this})),c(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=M,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:M(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function _(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){_(i,n,o,a,s,"next",e)}function s(e){_(i,n,o,a,s,"throw",e)}a(void 0)}))}}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k(n.key),n)}}function k(e){var t=function(e){if("object"!=g(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}var T=function(e){return e.Temporary="temporary",e.Persistent="persistent",e}({});function E(e){var t,r=[];switch(e.switch()){case 0:r=e.operations();break;case 1:case 2:case 3:r=e.value().operations();break;default:throw new Error("Unexpected transaction meta switch value")}var n=null===(t=r.flatMap((function(e){return e.changes()})).find((function(e){return e.switch()===i.xdr.LedgerEntryChangeType.ledgerEntryCreated()&&e.created().data().switch()===i.xdr.LedgerEntryType.account()})))||void 0===t||null===(t=t.created())||void 0===t||null===(t=t.data())||void 0===t||null===(t=t.account())||void 0===t||null===(t=t.seqNum())||void 0===t?void 0:t.toString();if(n)return n;throw new Error("No account created in transaction")}var C,A,j,P,I,O,M,R,L,F,z,D,N,B,U,V,W,q,H,G,K,X,Z,Y,J,$=(C=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.serverURL=o()(t),r.headers&&0!==Object.keys(r.headers).length&&a.Ay.interceptors.request.use((function(e){return e.headers=Object.assign(e.headers,r.headers),e})),"https"!==this.serverURL.protocol()&&!r.allowHttp)throw new Error("Cannot connect to insecure Soroban RPC server if `allowHttp` isn't set")},A=[{key:"getAccount",value:(J=w(x().mark((function e(t){var r,n,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.xdr.LedgerKey.account(new i.xdr.LedgerKeyAccount({accountId:i.Keypair.fromPublicKey(t).xdrPublicKey()})),e.next=3,this.getLedgerEntries(r);case 3:if(0!==(n=e.sent).entries.length){e.next=6;break}return e.abrupt("return",Promise.reject({code:404,message:"Account not found: ".concat(t)}));case 6:return o=n.entries[0].val.account(),e.abrupt("return",new i.Account(t,o.seqNum().toString()));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return J.apply(this,arguments)})},{key:"getHealth",value:(Y=w(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u(this.serverURL.toString(),"getHealth"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return Y.apply(this,arguments)})},{key:"getContractData",value:(Z=w(x().mark((function e(t,r){var n,o,a,s,l=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>2&&void 0!==l[2]?l[2]:T.Persistent,"string"!=typeof t){e.next=5;break}o=new i.Contract(t).address().toScAddress(),e.next=14;break;case 5:if(!(t instanceof i.Address)){e.next=9;break}o=t.toScAddress(),e.next=14;break;case 9:if(!(t instanceof i.Contract)){e.next=13;break}o=t.address().toScAddress(),e.next=14;break;case 13:throw new TypeError("unknown contract type: ".concat(t));case 14:e.t0=n,e.next=e.t0===T.Temporary?17:e.t0===T.Persistent?19:21;break;case 17:return a=i.xdr.ContractDataDurability.temporary(),e.abrupt("break",22);case 19:return a=i.xdr.ContractDataDurability.persistent(),e.abrupt("break",22);case 21:throw new TypeError("invalid durability: ".concat(n));case 22:return s=i.xdr.LedgerKey.contractData(new i.xdr.LedgerKeyContractData({key:r,contract:o,durability:a})),e.abrupt("return",this.getLedgerEntries(s).then((function(e){return 0===e.entries.length?Promise.reject({code:404,message:"Contract data not found. Contract: ".concat(i.Address.fromScAddress(o).toString(),", Key: ").concat(r.toXDR("base64"),", Durability: ").concat(n)}):e.entries[0]})));case 24:case"end":return e.stop()}}),e,this)}))),function(e,t){return Z.apply(this,arguments)})},{key:"getContractWasmByContractId",value:(X=w(x().mark((function e(t){var r,n,o,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new i.Contract(t).getFootprint(),e.next=3,this.getLedgerEntries(n);case 3:if((o=e.sent).entries.length&&null!==(r=o.entries[0])&&void 0!==r&&r.val){e.next=6;break}return e.abrupt("return",Promise.reject({code:404,message:"Could not obtain contract hash from server"}));case 6:return a=o.entries[0].val.contractData().val().instance().executable().wasmHash(),e.abrupt("return",this.getContractWasmByHash(a));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return X.apply(this,arguments)})},{key:"getContractWasmByHash",value:(K=w(x().mark((function e(t){var r,n,o,a,s,l,c=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:void 0,o="string"==typeof t?m.from(t,n):t,a=i.xdr.LedgerKey.contractCode(new i.xdr.LedgerKeyContractCode({hash:o})),e.next=5,this.getLedgerEntries(a);case 5:if((s=e.sent).entries.length&&null!==(r=s.entries[0])&&void 0!==r&&r.val){e.next=8;break}return e.abrupt("return",Promise.reject({code:404,message:"Could not obtain contract wasm from server"}));case 8:return l=s.entries[0].val.contractCode().code(),e.abrupt("return",l);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return K.apply(this,arguments)})},{key:"getLedgerEntries",value:(G=w(x().mark((function e(){var t=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._getLedgerEntries.apply(this,t).then(f.$D));case 1:case"end":return e.stop()}}),e,this)}))),function(){return G.apply(this,arguments)})},{key:"_getLedgerEntries",value:(H=w(x().mark((function e(){var t,r,n,o=arguments;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,r=new Array(t),n=0;n<t;n++)r[n]=o[n];return e.abrupt("return",u(this.serverURL.toString(),"getLedgerEntries",{keys:r.map((function(e){return e.toXDR("base64")}))}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return H.apply(this,arguments)})},{key:"getTransaction",value:(q=w(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._getTransaction(t).then((function(e){var t={};return e.status!==h.j.GetTransactionStatus.NOT_FOUND&&Object.assign(t,(0,f.WC)(e)),v({status:e.status,latestLedger:e.latestLedger,latestLedgerCloseTime:e.latestLedgerCloseTime,oldestLedger:e.oldestLedger,oldestLedgerCloseTime:e.oldestLedgerCloseTime},t)})));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return q.apply(this,arguments)})},{key:"_getTransaction",value:(W=w(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u(this.serverURL.toString(),"getTransaction",{hash:t}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return W.apply(this,arguments)})},{key:"getTransactions",value:(V=w(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._getTransactions(t).then((function(e){return{transactions:e.transactions.map(f.tR),latestLedger:e.latestLedger,latestLedgerCloseTimestamp:e.latestLedgerCloseTimestamp,oldestLedger:e.oldestLedger,oldestLedgerCloseTimestamp:e.oldestLedgerCloseTimestamp,cursor:e.cursor}})));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return V.apply(this,arguments)})},{key:"_getTransactions",value:(U=w(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u(this.serverURL.toString(),"getTransactions",t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return U.apply(this,arguments)})},{key:"getEvents",value:(B=w(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._getEvents(t).then(f.fG));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return B.apply(this,arguments)})},{key:"_getEvents",value:(N=w(x().mark((function e(t){var r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u(this.serverURL.toString(),"getEvents",v({filters:null!==(r=t.filters)&&void 0!==r?r:[],pagination:v(v({},t.cursor&&{cursor:t.cursor}),t.limit&&{limit:t.limit})},t.startLedger&&{startLedger:t.startLedger})));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return N.apply(this,arguments)})},{key:"getNetwork",value:(D=w(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u(this.serverURL.toString(),"getNetwork"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return D.apply(this,arguments)})},{key:"getLatestLedger",value:(z=w(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u(this.serverURL.toString(),"getLatestLedger"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return z.apply(this,arguments)})},{key:"simulateTransaction",value:(F=w(x().mark((function e(t,r){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._simulateTransaction(t,r).then(f.jr));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return F.apply(this,arguments)})},{key:"_simulateTransaction",value:(L=w(x().mark((function e(t,r){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u(this.serverURL.toString(),"simulateTransaction",v({transaction:t.toXDR()},void 0!==r&&{resourceConfig:{instructionLeeway:r.cpuInstructions}})));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return L.apply(this,arguments)})},{key:"prepareTransaction",value:(R=w(x().mark((function e(t){var r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.simulateTransaction(t);case 2:if(r=e.sent,!h.j.isSimulationError(r)){e.next=5;break}throw new Error(r.error);case 5:return e.abrupt("return",(0,p.X)(t,r).build());case 6:case"end":return e.stop()}}),e,this)}))),function(e){return R.apply(this,arguments)})},{key:"sendTransaction",value:(M=w(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._sendTransaction(t).then(f.Af));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return M.apply(this,arguments)})},{key:"_sendTransaction",value:(O=w(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u(this.serverURL.toString(),"sendTransaction",{transaction:t.toXDR()}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return O.apply(this,arguments)})},{key:"requestAirdrop",value:(I=w(x().mark((function e(t,r){var n,o,s,l,c,u;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="string"==typeof t?t:t.accountId(),e.t0=r,e.t0){e.next=6;break}return e.next=5,this.getNetwork();case 5:e.t0=e.sent.friendbotUrl;case 6:if(r=e.t0){e.next=9;break}throw new Error("No friendbot URL configured for current network");case 9:return e.prev=9,e.next=12,a.Ay.post("".concat(r,"?addr=").concat(encodeURIComponent(n)));case 12:return o=e.sent,s=i.xdr.TransactionMeta.fromXDR(o.data.result_meta_xdr,"base64"),l=E(s),e.abrupt("return",new i.Account(n,l));case 18:if(e.prev=18,e.t1=e.catch(9),400!==(null===(c=e.t1.response)||void 0===c?void 0:c.status)){e.next=23;break}if(null===(u=e.t1.response.detail)||void 0===u||!u.includes("createAccountAlreadyExist")){e.next=23;break}return e.abrupt("return",this.getAccount(n));case 23:throw e.t1;case 24:case"end":return e.stop()}}),e,this,[[9,18]])}))),function(e,t){return I.apply(this,arguments)})},{key:"getFeeStats",value:(P=w(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u(this.serverURL.toString(),"getFeeStats"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return P.apply(this,arguments)})},{key:"getVersionInfo",value:(j=w(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u(this.serverURL.toString(),"getVersionInfo"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return j.apply(this,arguments)})}],A&&S(C.prototype,A),Object.defineProperty(C,"prototype",{writable:!1}),C)},8680:(e,t,r)=>{"use strict";r.d(t,{X:()=>a});var n=r(356),o=r(4076),i=r(784);function a(e,t){if("innerTransaction"in e)return a(e.innerTransaction,t);if(!function(e){if(1!==e.operations.length)return!1;switch(e.operations[0].type){case"invokeHostFunction":case"extendFootprintTtl":case"restoreFootprint":return!0;default:return!1}}(e))throw new TypeError("unsupported transaction: must contain exactly one invokeHostFunction, extendFootprintTtl, or restoreFootprint operation");var r=(0,i.jr)(t);if(!o.j.isSimulationSuccess(r))throw new Error("simulation incorrect: ".concat(JSON.stringify(r)));var s=parseInt(e.fee)||0,l=parseInt(r.minResourceFee)||0,c=n.TransactionBuilder.cloneFrom(e,{fee:(s+l).toString(),sorobanData:r.transactionData.build(),networkPassphrase:e.networkPassphrase});if("invokeHostFunction"===e.operations[0].type){var u;c.clearOperations();var d=e.operations[0],h=null!==(u=d.auth)&&void 0!==u?u:[];c.addOperation(n.Operation.invokeHostFunction({source:d.source,func:d.func,auth:h.length>0?h:r.result.auth}))}return c}},3898:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Api:()=>{},Resolver:()=>v,STELLAR_TOML_MAX_SIZE:()=>g});var n=r(1083),o=r(1293),i=r.n(o),a=r(8732);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(){l=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function h(e,t,r,n){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),s=new O(n||[]);return o(a,"_invoke",{value:A(e,r,s)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var f="suspendedStart",m="suspendedYield",g="executing",y="completed",v={};function b(){}function x(){}function _(){}var w={};d(w,a,(function(){return this}));var S=Object.getPrototypeOf,k=S&&S(S(M([])));k&&k!==r&&n.call(k,a)&&(w=k);var T=_.prototype=b.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,i,a,l){var c=p(e[o],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==s(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,r,n){var o=f;return function(i,a){if(o===g)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=j(s,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=g;var c=p(t,r,n);if("normal"===c.type){if(o=n.done?y:m,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=p(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function M(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(s(t)+" is not iterable")}return x.prototype=_,o(T,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:x,configurable:!0}),x.displayName=d(_,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,d(e,u,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},E(C.prototype),d(C.prototype,c,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new C(h(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(T),d(T,u,"Generator"),d(T,a,(function(){return this})),d(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=M,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:M(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function c(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function d(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}var h,p,f,m,g=102400,y=n.A.CancelToken,v=(h=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},p=[{key:"resolve",value:(f=l().mark((function e(t){var r,o,s,c,u=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=void 0===(r=u.length>1&&void 0!==u[1]?u[1]:{}).allowHttp?a.T.isAllowHttp():r.allowHttp,s=void 0===r.timeout?a.T.getTimeout():r.timeout,c=o?"http":"https",e.abrupt("return",n.A.get("".concat(c,"://").concat(t,"/.well-known/stellar.toml"),{maxContentLength:g,cancelToken:s?new y((function(e){return setTimeout((function(){return e("timeout of ".concat(s,"ms exceeded"))}),s)})):void 0,timeout:s}).then((function(e){try{var t=i().parse(e.data);return Promise.resolve(t)}catch(e){return Promise.reject(new Error("stellar.toml is invalid - Parsing error on line ".concat(e.line,", column ").concat(e.column,": ").concat(e.message)))}})).catch((function(e){throw e.message.match(/^maxContentLength size/)?new Error("stellar.toml file exceeds allowed size of ".concat(g)):e})));case 5:case"end":return e.stop()}}),e)})),m=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=f.apply(e,t);function i(e){c(o,r,n,i,a,"next",e)}function a(e){c(o,r,n,i,a,"throw",e)}i(void 0)}))},function(e){return m.apply(this,arguments)})}],p&&u(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h)},3121:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function i(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}r.d(t,{A:()=>l});var a,s,l=(a=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},s=[{key:"validateTimebounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e.timeBounds)return!1;var r=Math.floor(Date.now()/1e3),n=e.timeBounds,o=n.minTime,i=n.maxTime;return r>=Number.parseInt(o,10)-t&&r<=Number.parseInt(i,10)+t}}],s&&o(a,s),Object.defineProperty(a,"prototype",{writable:!1}),a)},5479:(e,t,r)=>{"use strict";r.r(t),r.d(t,{InvalidChallengeError:()=>h,buildChallengeTx:()=>_,gatherTxSigners:()=>E,readChallengeTx:()=>w,verifyChallengeTxSigners:()=>k,verifyChallengeTxThreshold:()=>S,verifyTxSignedBy:()=>T});var n=r(3209),o=r.n(n),i=r(356),a=r(3121);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e){var t="function"==typeof Map?new Map:void 0;return l=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(c())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var o=new(e.bind.apply(e,n));return r&&u(o,r.prototype),o}(e,arguments,d(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,e)},l(e)}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var h=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=(this instanceof t?this.constructor:void 0).prototype;return(r=function(e,t,r){return t=d(t),function(e,t){if(t&&("object"==s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r))}(this,t,[e])).__proto__=n,r.constructor=t,r.name="InvalidChallengeError",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e),r=t,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(l(Error)),p=r(8287).Buffer;function f(e){return function(e){if(Array.isArray(e))return b(e)}(e)||x(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=v(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function y(e){return function(e){if(Array.isArray(e))return e}(e)||x(e)||v(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return b(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function x(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:300,a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;if(t.startsWith("M")&&l)throw Error("memo cannot be used if clientAccountID is a muxed account");var d=new i.Account(e.publicKey(),"-1"),h=Math.floor(Date.now()/1e3),p=o()(48).toString("base64"),f=new i.TransactionBuilder(d,{fee:i.BASE_FEE,networkPassphrase:a,timebounds:{minTime:h,maxTime:h+n}}).addOperation(i.Operation.manageData({name:"".concat(r," auth"),value:p,source:t})).addOperation(i.Operation.manageData({name:"web_auth_domain",value:s,source:d.accountId()}));if(c){if(!u)throw Error("clientSigningKey is required if clientDomain is provided");f.addOperation(i.Operation.manageData({name:"client_domain",value:c,source:u}))}l&&f.addMemo(i.Memo.id(l));var m=f.build();return m.sign(e),m.toEnvelope().toXDR("base64").toString()}function w(e,t,r,n,o){var s,l;if(t.startsWith("M"))throw Error("Invalid serverAccountID: multiplexed accounts are not supported.");try{l=new i.Transaction(e,r)}catch(t){try{l=new i.FeeBumpTransaction(e,r)}catch(e){throw new h("Invalid challenge: unable to deserialize challengeTx transaction string")}throw new h("Invalid challenge: expected a Transaction but received a FeeBumpTransaction")}if(0!==Number.parseInt(l.sequence,10))throw new h("The transaction sequence number should be zero");if(l.source!==t)throw new h("The transaction source account is not equal to the server's account");if(l.operations.length<1)throw new h("The transaction should contain at least one operation");var c=y(l.operations),u=c[0],d=c.slice(1);if(!u.source)throw new h("The transaction's operation should contain a source account");var f,v=u.source,b=null;if(l.memo.type!==i.MemoNone){if(v.startsWith("M"))throw new h("The transaction has a memo but the client account ID is a muxed account");if(l.memo.type!==i.MemoID)throw new h("The transaction's memo must be of type `id`");b=l.memo.value}if("manageData"!==u.type)throw new h("The transaction's operation type should be 'manageData'");if(l.timeBounds&&Number.parseInt(null===(s=l.timeBounds)||void 0===s?void 0:s.maxTime,10)===i.TimeoutInfinite)throw new h("The transaction requires non-infinite timebounds");if(!a.A.validateTimebounds(l,300))throw new h("The transaction has expired");if(void 0===u.value)throw new h("The transaction's operation values should not be null");if(!u.value)throw new h("The transaction's operation value should not be null");if(48!==p.from(u.value.toString(),"base64").length)throw new h("The transaction's operation value should be a 64 bytes base64 random string");if(!n)throw new h("Invalid homeDomains: a home domain must be provided for verification");if("string"==typeof n)"".concat(n," auth")===u.name&&(f=n);else{if(!Array.isArray(n))throw new h("Invalid homeDomains: homeDomains type is ".concat(g(n)," but should be a string or an array"));f=n.find((function(e){return"".concat(e," auth")===u.name}))}if(!f)throw new h("Invalid homeDomains: the transaction's operation key name does not match the expected home domain");var x,_=m(d);try{for(_.s();!(x=_.n()).done;){var w=x.value;if("manageData"!==w.type)throw new h("The transaction has operations that are not of type 'manageData'");if(w.source!==t&&"client_domain"!==w.name)throw new h("The transaction has operations that are unrecognized");if("web_auth_domain"===w.name){if(void 0===w.value)throw new h("'web_auth_domain' operation value should not be null");if(w.value.compare(p.from(o)))throw new h("'web_auth_domain' operation value does not match ".concat(o))}}}catch(e){_.e(e)}finally{_.f()}if(!T(l,t))throw new h("Transaction not signed by server: '".concat(t,"'"));return{tx:l,clientAccountID:v,matchedHomeDomain:f,memo:b}}function S(e,t,r,n,o,i,a){for(var s=k(e,t,r,o.map((function(e){return e.key})),i,a),l=0,c=function(){var e,t=d[u],r=(null===(e=o.find((function(e){return e.key===t})))||void 0===e?void 0:e.weight)||0;l+=r},u=0,d=s;u<d.length;u++)c();if(l<n)throw new h("signers with weight ".concat(l," do not meet threshold ").concat(n,'"'));return s}function k(e,t,r,n,o,a){var s,l=w(e,t,r,o,a).tx;try{s=i.Keypair.fromPublicKey(t)}catch(e){throw new Error("Couldn't infer keypair from the provided 'serverAccountID': ".concat(e.message))}var c,u,d=new Set,p=m(n);try{for(p.s();!(c=p.n()).done;){var g=c.value;g!==s.publicKey()&&"G"===g.charAt(0)&&d.add(g)}}catch(e){p.e(e)}finally{p.f()}if(0===d.size)throw new h("No verifiable client signers provided, at least one G... address must be provided");var y,v=m(l.operations);try{for(v.s();!(y=v.n()).done;){var b=y.value;if("manageData"===b.type&&"client_domain"===b.name){if(u)throw new h("Found more than one client_domain operation");u=b.source}}}catch(e){v.e(e)}finally{v.f()}var x=[s.publicKey()].concat(f(Array.from(d)));u&&x.push(u);for(var _=E(l,x),S=!1,k=!1,T=0,C=_;T<C.length;T++){var A=C[T];A===s.publicKey()&&(S=!0),A===u&&(k=!0)}if(!S)throw new h("Transaction not signed by server: '".concat(s.publicKey(),"'"));if(u&&!k)throw new h("Transaction not signed by the source account of the 'client_domain' ManageData operation");if(1===_.length)throw new h("None of the given signers match the transaction signatures");if(_.length!==l.signatures.length)throw new h("Transaction has unrecognized signatures");return _.splice(_.indexOf(s.publicKey()),1),u&&_.splice(_.indexOf(u),1),_}function T(e,t){return 0!==E(e,[t]).length}function E(e,t){var r,n=e.hash(),o=f(e.signatures),a=new Set,s=m(t);try{for(s.s();!(r=s.n()).done;){var l=r.value;if(0===o.length)break;var c=void 0;try{c=i.Keypair.fromPublicKey(l)}catch(e){throw new h("Signer is not a valid address: ".concat(e.message))}for(var u=0;u<o.length;u++){var d=o[u];if(d.hint().equals(c.signatureHint())&&c.verify(n,d.signature())){a.add(l),o.splice(u,1);break}}}}catch(e){s.e(e)}finally{s.f()}return Array.from(a)}},5360:(e,t)=>{"use strict";var r=function(e,t){return t||(t={}),e.split("").forEach((function(e,r){e in t||(t[e]=r)})),t},n={alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",charmap:{0:14,1:8}};n.charmap=r(n.alphabet,n.charmap);var o={alphabet:"0123456789ABCDEFGHJKMNPQRSTVWXYZ",charmap:{O:0,I:1,L:1}};o.charmap=r(o.alphabet,o.charmap);var i={alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",charmap:{}};function a(e){if(this.buf=[],this.shift=8,this.carry=0,e){switch(e.type){case"rfc4648":this.charmap=t.rfc4648.charmap;break;case"crockford":this.charmap=t.crockford.charmap;break;case"base32hex":this.charmap=t.base32hex.charmap;break;default:throw new Error("invalid type")}e.charmap&&(this.charmap=e.charmap)}}function s(e){if(this.buf="",this.shift=3,this.carry=0,e){switch(e.type){case"rfc4648":this.alphabet=t.rfc4648.alphabet;break;case"crockford":this.alphabet=t.crockford.alphabet;break;case"base32hex":this.alphabet=t.base32hex.alphabet;break;default:throw new Error("invalid type")}e.alphabet?this.alphabet=e.alphabet:e.lc&&(this.alphabet=this.alphabet.toLowerCase())}}i.charmap=r(i.alphabet,i.charmap),a.prototype.charmap=n.charmap,a.prototype.write=function(e){var t=this.charmap,r=this.buf,n=this.shift,o=this.carry;return e.toUpperCase().split("").forEach((function(e){if("="!=e){var i=255&t[e];(n-=5)>0?o|=i<<n:n<0?(r.push(o|i>>-n),o=i<<(n+=8)&255):(r.push(o|i),n=8,o=0)}})),this.shift=n,this.carry=o,this},a.prototype.finalize=function(e){return e&&this.write(e),8!==this.shift&&0!==this.carry&&(this.buf.push(this.carry),this.shift=8,this.carry=0),this.buf},s.prototype.alphabet=n.alphabet,s.prototype.write=function(e){var t,r,n,o=this.shift,i=this.carry;for(n=0;n<e.length;n++)t=i|(r=e[n])>>o,this.buf+=this.alphabet[31&t],o>5&&(t=r>>(o-=5),this.buf+=this.alphabet[31&t]),i=r<<(o=5-o),o=8-o;return this.shift=o,this.carry=i,this},s.prototype.finalize=function(e){return e&&this.write(e),3!==this.shift&&(this.buf+=this.alphabet[31&this.carry],this.shift=3,this.carry=0),this.buf},t.encode=function(e,t){return new s(t).finalize(e)},t.decode=function(e,t){return new a(t).finalize(e)},t.Decoder=a,t.Encoder=s,t.charmap=r,t.crockford=o,t.rfc4648=n,t.base32hex=i},7526:(e,t)=>{"use strict";t.byteLength=function(e){var t=s(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,i=s(e),a=i[0],l=i[1],c=new o(function(e,t,r){return 3*(t+r)/4-r}(0,a,l)),u=0,d=l>0?a-4:a;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===l&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[u++]=255&t),1===l&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],a=16383,s=0,c=n-o;s<c;s+=a)i.push(l(e,s,s+a>c?c:s+a));return 1===o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};for(var r=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)r[a]=i[a],n[i.charCodeAt(a)]=a;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,n){for(var o,i,a=[],s=t;s<n;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},1594:function(e,t,r){var n;!function(){"use strict";var o,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,s=Math.floor,l="[BigNumber Error] ",c=l+"Number primitive has more than 15 significant digits: ",u=1e14,d=14,h=9007199254740991,p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,m=1e9;function g(e){var t=0|e;return e>0||e===t?t:t-1}function y(e){for(var t,r,n=1,o=e.length,i=e[0]+"";n<o;){for(t=e[n++]+"",r=d-t.length;r--;t="0"+t);i+=t}for(o=i.length;48===i.charCodeAt(--o););return i.slice(0,o+1||1)}function v(e,t){var r,n,o=e.c,i=t.c,a=e.s,s=t.s,l=e.e,c=t.e;if(!a||!s)return null;if(r=o&&!o[0],n=i&&!i[0],r||n)return r?n?0:-s:a;if(a!=s)return a;if(r=a<0,n=l==c,!o||!i)return n?0:!o^r?1:-1;if(!n)return l>c^r?1:-1;for(s=(l=o.length)<(c=i.length)?l:c,a=0;a<s;a++)if(o[a]!=i[a])return o[a]>i[a]^r?1:-1;return l==c?0:l>c^r?1:-1}function b(e,t,r,n){if(e<t||e>r||e!==s(e))throw Error(l+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function x(e){var t=e.c.length-1;return g(e.e/d)==t&&e.c[t]%2!=0}function _(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function w(e,t,r){var n,o;if(t<0){for(o=r+".";++t;o+=r);e=o+e}else if(++t>(n=e.length)){for(o=r,t-=n;--t;o+=r);e+=o}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}o=function e(t){var r,n,o,S,k,T,E,C,A,j,P=q.prototype={constructor:q,toString:null,valueOf:null},I=new q(1),O=20,M=4,R=-7,L=21,F=-1e7,z=1e7,D=!1,N=1,B=0,U={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},V="0123456789abcdefghijklmnopqrstuvwxyz",W=!0;function q(e,t){var r,a,l,u,p,f,m,g,y=this;if(!(y instanceof q))return new q(e,t);if(null==t){if(e&&!0===e._isBigNumber)return y.s=e.s,void(!e.c||e.e>z?y.c=y.e=null:e.e<F?y.c=[y.e=0]:(y.e=e.e,y.c=e.c.slice()));if((f="number"==typeof e)&&0*e==0){if(y.s=1/e<0?(e=-e,-1):1,e===~~e){for(u=0,p=e;p>=10;p/=10,u++);return void(u>z?y.c=y.e=null:(y.e=u,y.c=[e]))}g=String(e)}else{if(!i.test(g=String(e)))return o(y,g,f);y.s=45==g.charCodeAt(0)?(g=g.slice(1),-1):1}(u=g.indexOf("."))>-1&&(g=g.replace(".","")),(p=g.search(/e/i))>0?(u<0&&(u=p),u+=+g.slice(p+1),g=g.substring(0,p)):u<0&&(u=g.length)}else{if(b(t,2,V.length,"Base"),10==t&&W)return X(y=new q(e),O+y.e+1,M);if(g=String(e),f="number"==typeof e){if(0*e!=0)return o(y,g,f,t);if(y.s=1/e<0?(g=g.slice(1),-1):1,q.DEBUG&&g.replace(/^0\.0*|\./,"").length>15)throw Error(c+e)}else y.s=45===g.charCodeAt(0)?(g=g.slice(1),-1):1;for(r=V.slice(0,t),u=p=0,m=g.length;p<m;p++)if(r.indexOf(a=g.charAt(p))<0){if("."==a){if(p>u){u=m;continue}}else if(!l&&(g==g.toUpperCase()&&(g=g.toLowerCase())||g==g.toLowerCase()&&(g=g.toUpperCase()))){l=!0,p=-1,u=0;continue}return o(y,String(e),f,t)}f=!1,(u=(g=n(g,t,10,y.s)).indexOf("."))>-1?g=g.replace(".",""):u=g.length}for(p=0;48===g.charCodeAt(p);p++);for(m=g.length;48===g.charCodeAt(--m););if(g=g.slice(p,++m)){if(m-=p,f&&q.DEBUG&&m>15&&(e>h||e!==s(e)))throw Error(c+y.s*e);if((u=u-p-1)>z)y.c=y.e=null;else if(u<F)y.c=[y.e=0];else{if(y.e=u,y.c=[],p=(u+1)%d,u<0&&(p+=d),p<m){for(p&&y.c.push(+g.slice(0,p)),m-=d;p<m;)y.c.push(+g.slice(p,p+=d));p=d-(g=g.slice(p)).length}else p-=m;for(;p--;g+="0");y.c.push(+g)}}else y.c=[y.e=0]}function H(e,t,r,n){var o,i,a,s,l;if(null==r?r=M:b(r,0,8),!e.c)return e.toString();if(o=e.c[0],a=e.e,null==t)l=y(e.c),l=1==n||2==n&&(a<=R||a>=L)?_(l,a):w(l,a,"0");else if(i=(e=X(new q(e),t,r)).e,s=(l=y(e.c)).length,1==n||2==n&&(t<=i||i<=R)){for(;s<t;l+="0",s++);l=_(l,i)}else if(t-=a,l=w(l,i,"0"),i+1>s){if(--t>0)for(l+=".";t--;l+="0");}else if((t+=i-s)>0)for(i+1==s&&(l+=".");t--;l+="0");return e.s<0&&o?"-"+l:l}function G(e,t){for(var r,n,o=1,i=new q(e[0]);o<e.length;o++)(!(n=new q(e[o])).s||(r=v(i,n))===t||0===r&&i.s===t)&&(i=n);return i}function K(e,t,r){for(var n=1,o=t.length;!t[--o];t.pop());for(o=t[0];o>=10;o/=10,n++);return(r=n+r*d-1)>z?e.c=e.e=null:r<F?e.c=[e.e=0]:(e.e=r,e.c=t),e}function X(e,t,r,n){var o,i,l,c,h,f,m,g=e.c,y=p;if(g){e:{for(o=1,c=g[0];c>=10;c/=10,o++);if((i=t-o)<0)i+=d,l=t,h=g[f=0],m=s(h/y[o-l-1]%10);else if((f=a((i+1)/d))>=g.length){if(!n)break e;for(;g.length<=f;g.push(0));h=m=0,o=1,l=(i%=d)-d+1}else{for(h=c=g[f],o=1;c>=10;c/=10,o++);m=(l=(i%=d)-d+o)<0?0:s(h/y[o-l-1]%10)}if(n=n||t<0||null!=g[f+1]||(l<0?h:h%y[o-l-1]),n=r<4?(m||n)&&(0==r||r==(e.s<0?3:2)):m>5||5==m&&(4==r||n||6==r&&(i>0?l>0?h/y[o-l]:0:g[f-1])%10&1||r==(e.s<0?8:7)),t<1||!g[0])return g.length=0,n?(t-=e.e+1,g[0]=y[(d-t%d)%d],e.e=-t||0):g[0]=e.e=0,e;if(0==i?(g.length=f,c=1,f--):(g.length=f+1,c=y[d-i],g[f]=l>0?s(h/y[o-l]%y[l])*c:0),n)for(;;){if(0==f){for(i=1,l=g[0];l>=10;l/=10,i++);for(l=g[0]+=c,c=1;l>=10;l/=10,c++);i!=c&&(e.e++,g[0]==u&&(g[0]=1));break}if(g[f]+=c,g[f]!=u)break;g[f--]=0,c=1}for(i=g.length;0===g[--i];g.pop());}e.e>z?e.c=e.e=null:e.e<F&&(e.c=[e.e=0])}return e}function Z(e){var t,r=e.e;return null===r?e.toString():(t=y(e.c),t=r<=R||r>=L?_(t,r):w(t,r,"0"),e.s<0?"-"+t:t)}return q.clone=e,q.ROUND_UP=0,q.ROUND_DOWN=1,q.ROUND_CEIL=2,q.ROUND_FLOOR=3,q.ROUND_HALF_UP=4,q.ROUND_HALF_DOWN=5,q.ROUND_HALF_EVEN=6,q.ROUND_HALF_CEIL=7,q.ROUND_HALF_FLOOR=8,q.EUCLID=9,q.config=q.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(l+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(b(r=e[t],0,m,t),O=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(b(r=e[t],0,8,t),M=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(b(r[0],-m,0,t),b(r[1],0,m,t),R=r[0],L=r[1]):(b(r,-m,m,t),R=-(L=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)b(r[0],-m,-1,t),b(r[1],1,m,t),F=r[0],z=r[1];else{if(b(r,-m,m,t),!r)throw Error(l+t+" cannot be zero: "+r);F=-(z=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(l+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw D=!r,Error(l+"crypto unavailable");D=r}else D=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(b(r=e[t],0,9,t),N=r),e.hasOwnProperty(t="POW_PRECISION")&&(b(r=e[t],0,m,t),B=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(l+t+" not an object: "+r);U=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(l+t+" invalid: "+r);W="0123456789"==r.slice(0,10),V=r}}return{DECIMAL_PLACES:O,ROUNDING_MODE:M,EXPONENTIAL_AT:[R,L],RANGE:[F,z],CRYPTO:D,MODULO_MODE:N,POW_PRECISION:B,FORMAT:U,ALPHABET:V}},q.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!q.DEBUG)return!0;var t,r,n=e.c,o=e.e,i=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===i||-1===i)&&o>=-m&&o<=m&&o===s(o)){if(0===n[0]){if(0===o&&1===n.length)return!0;break e}if((t=(o+1)%d)<1&&(t+=d),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=u||r!==s(r))break e;if(0!==r)return!0}}}else if(null===n&&null===o&&(null===i||1===i||-1===i))return!0;throw Error(l+"Invalid BigNumber: "+e)},q.maximum=q.max=function(){return G(arguments,-1)},q.minimum=q.min=function(){return G(arguments,1)},q.random=(S=9007199254740992,k=Math.random()*S&2097151?function(){return s(Math.random()*S)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,o,i,c=0,u=[],h=new q(I);if(null==e?e=O:b(e,0,m),o=a(e/d),D)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));c<o;)(i=131072*t[c]+(t[c+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[c]=r[0],t[c+1]=r[1]):(u.push(i%1e14),c+=2);c=o/2}else{if(!crypto.randomBytes)throw D=!1,Error(l+"crypto unavailable");for(t=crypto.randomBytes(o*=7);c<o;)(i=281474976710656*(31&t[c])+1099511627776*t[c+1]+4294967296*t[c+2]+16777216*t[c+3]+(t[c+4]<<16)+(t[c+5]<<8)+t[c+6])>=9e15?crypto.randomBytes(7).copy(t,c):(u.push(i%1e14),c+=7);c=o/7}if(!D)for(;c<o;)(i=k())<9e15&&(u[c++]=i%1e14);for(o=u[--c],e%=d,o&&e&&(i=p[d-e],u[c]=s(o/i)*i);0===u[c];u.pop(),c--);if(c<0)u=[n=0];else{for(n=-1;0===u[0];u.splice(0,1),n-=d);for(c=1,i=u[0];i>=10;i/=10,c++);c<d&&(n-=d-c)}return h.e=n,h.c=u,h}),q.sum=function(){for(var e=1,t=arguments,r=new q(t[0]);e<t.length;)r=r.plus(t[e++]);return r},n=function(){var e="0123456789";function t(e,t,r,n){for(var o,i,a=[0],s=0,l=e.length;s<l;){for(i=a.length;i--;a[i]*=t);for(a[0]+=n.indexOf(e.charAt(s++)),o=0;o<a.length;o++)a[o]>r-1&&(null==a[o+1]&&(a[o+1]=0),a[o+1]+=a[o]/r|0,a[o]%=r)}return a.reverse()}return function(n,o,i,a,s){var l,c,u,d,h,p,f,m,g=n.indexOf("."),v=O,b=M;for(g>=0&&(d=B,B=0,n=n.replace(".",""),p=(m=new q(o)).pow(n.length-g),B=d,m.c=t(w(y(p.c),p.e,"0"),10,i,e),m.e=m.c.length),u=d=(f=t(n,o,i,s?(l=V,e):(l=e,V))).length;0==f[--d];f.pop());if(!f[0])return l.charAt(0);if(g<0?--u:(p.c=f,p.e=u,p.s=a,f=(p=r(p,m,v,b,i)).c,h=p.r,u=p.e),g=f[c=u+v+1],d=i/2,h=h||c<0||null!=f[c+1],h=b<4?(null!=g||h)&&(0==b||b==(p.s<0?3:2)):g>d||g==d&&(4==b||h||6==b&&1&f[c-1]||b==(p.s<0?8:7)),c<1||!f[0])n=h?w(l.charAt(1),-v,l.charAt(0)):l.charAt(0);else{if(f.length=c,h)for(--i;++f[--c]>i;)f[c]=0,c||(++u,f=[1].concat(f));for(d=f.length;!f[--d];);for(g=0,n="";g<=d;n+=l.charAt(f[g++]));n=w(n,u,l.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,o,i,a,s=0,l=e.length,c=t%f,u=t/f|0;for(e=e.slice();l--;)s=((o=c*(i=e[l]%f)+(n=u*i+(a=e[l]/f|0)*c)%f*f+s)/r|0)+(n/f|0)+u*a,e[l]=o%r;return s&&(e=[s].concat(e)),e}function t(e,t,r,n){var o,i;if(r!=n)i=r>n?1:-1;else for(o=i=0;o<r;o++)if(e[o]!=t[o]){i=e[o]>t[o]?1:-1;break}return i}function r(e,t,r,n){for(var o=0;r--;)e[r]-=o,o=e[r]<t[r]?1:0,e[r]=o*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,o,i,a,l){var c,h,p,f,m,y,v,b,x,_,w,S,k,T,E,C,A,j=n.s==o.s?1:-1,P=n.c,I=o.c;if(!(P&&P[0]&&I&&I[0]))return new q(n.s&&o.s&&(P?!I||P[0]!=I[0]:I)?P&&0==P[0]||!I?0*j:j/0:NaN);for(x=(b=new q(j)).c=[],j=i+(h=n.e-o.e)+1,l||(l=u,h=g(n.e/d)-g(o.e/d),j=j/d|0),p=0;I[p]==(P[p]||0);p++);if(I[p]>(P[p]||0)&&h--,j<0)x.push(1),f=!0;else{for(T=P.length,C=I.length,p=0,j+=2,(m=s(l/(I[0]+1)))>1&&(I=e(I,m,l),P=e(P,m,l),C=I.length,T=P.length),k=C,w=(_=P.slice(0,C)).length;w<C;_[w++]=0);A=I.slice(),A=[0].concat(A),E=I[0],I[1]>=l/2&&E++;do{if(m=0,(c=t(I,_,C,w))<0){if(S=_[0],C!=w&&(S=S*l+(_[1]||0)),(m=s(S/E))>1)for(m>=l&&(m=l-1),v=(y=e(I,m,l)).length,w=_.length;1==t(y,_,v,w);)m--,r(y,C<v?A:I,v,l),v=y.length,c=1;else 0==m&&(c=m=1),v=(y=I.slice()).length;if(v<w&&(y=[0].concat(y)),r(_,y,w,l),w=_.length,-1==c)for(;t(I,_,C,w)<1;)m++,r(_,C<w?A:I,w,l),w=_.length}else 0===c&&(m++,_=[0]);x[p++]=m,_[0]?_[w++]=P[k]||0:(_=[P[k]],w=1)}while((k++<T||null!=_[0])&&j--);f=null!=_[0],x[0]||x.splice(0,1)}if(l==u){for(p=1,j=x[0];j>=10;j/=10,p++);X(b,i+(b.e=p+h*d-1)+1,a,f)}else b.e=h,b.r=+f;return b}}(),T=/^(-?)0([xbo])(?=\w[\w.]*$)/i,E=/^([^.]+)\.$/,C=/^\.([^.]+)$/,A=/^-?(Infinity|NaN)$/,j=/^\s*\+(?=[\w.])|^\s+|\s+$/g,o=function(e,t,r,n){var o,i=r?t:t.replace(j,"");if(A.test(i))e.s=isNaN(i)?null:i<0?-1:1;else{if(!r&&(i=i.replace(T,(function(e,t,r){return o="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=o?e:t})),n&&(o=n,i=i.replace(E,"$1").replace(C,"0.$1")),t!=i))return new q(i,o);if(q.DEBUG)throw Error(l+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},P.absoluteValue=P.abs=function(){var e=new q(this);return e.s<0&&(e.s=1),e},P.comparedTo=function(e,t){return v(this,new q(e,t))},P.decimalPlaces=P.dp=function(e,t){var r,n,o,i=this;if(null!=e)return b(e,0,m),null==t?t=M:b(t,0,8),X(new q(i),e+i.e+1,t);if(!(r=i.c))return null;if(n=((o=r.length-1)-g(this.e/d))*d,o=r[o])for(;o%10==0;o/=10,n--);return n<0&&(n=0),n},P.dividedBy=P.div=function(e,t){return r(this,new q(e,t),O,M)},P.dividedToIntegerBy=P.idiv=function(e,t){return r(this,new q(e,t),0,1)},P.exponentiatedBy=P.pow=function(e,t){var r,n,o,i,c,u,h,p,f=this;if((e=new q(e)).c&&!e.isInteger())throw Error(l+"Exponent not an integer: "+Z(e));if(null!=t&&(t=new q(t)),c=e.e>14,!f.c||!f.c[0]||1==f.c[0]&&!f.e&&1==f.c.length||!e.c||!e.c[0])return p=new q(Math.pow(+Z(f),c?e.s*(2-x(e)):+Z(e))),t?p.mod(t):p;if(u=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new q(NaN);(n=!u&&f.isInteger()&&t.isInteger())&&(f=f.mod(t))}else{if(e.e>9&&(f.e>0||f.e<-1||(0==f.e?f.c[0]>1||c&&f.c[1]>=24e7:f.c[0]<8e13||c&&f.c[0]<=9999975e7)))return i=f.s<0&&x(e)?-0:0,f.e>-1&&(i=1/i),new q(u?1/i:i);B&&(i=a(B/d+2))}for(c?(r=new q(.5),u&&(e.s=1),h=x(e)):h=(o=Math.abs(+Z(e)))%2,p=new q(I);;){if(h){if(!(p=p.times(f)).c)break;i?p.c.length>i&&(p.c.length=i):n&&(p=p.mod(t))}if(o){if(0===(o=s(o/2)))break;h=o%2}else if(X(e=e.times(r),e.e+1,1),e.e>14)h=x(e);else{if(0===(o=+Z(e)))break;h=o%2}f=f.times(f),i?f.c&&f.c.length>i&&(f.c.length=i):n&&(f=f.mod(t))}return n?p:(u&&(p=I.div(p)),t?p.mod(t):i?X(p,B,M,void 0):p)},P.integerValue=function(e){var t=new q(this);return null==e?e=M:b(e,0,8),X(t,t.e+1,e)},P.isEqualTo=P.eq=function(e,t){return 0===v(this,new q(e,t))},P.isFinite=function(){return!!this.c},P.isGreaterThan=P.gt=function(e,t){return v(this,new q(e,t))>0},P.isGreaterThanOrEqualTo=P.gte=function(e,t){return 1===(t=v(this,new q(e,t)))||0===t},P.isInteger=function(){return!!this.c&&g(this.e/d)>this.c.length-2},P.isLessThan=P.lt=function(e,t){return v(this,new q(e,t))<0},P.isLessThanOrEqualTo=P.lte=function(e,t){return-1===(t=v(this,new q(e,t)))||0===t},P.isNaN=function(){return!this.s},P.isNegative=function(){return this.s<0},P.isPositive=function(){return this.s>0},P.isZero=function(){return!!this.c&&0==this.c[0]},P.minus=function(e,t){var r,n,o,i,a=this,s=a.s;if(t=(e=new q(e,t)).s,!s||!t)return new q(NaN);if(s!=t)return e.s=-t,a.plus(e);var l=a.e/d,c=e.e/d,h=a.c,p=e.c;if(!l||!c){if(!h||!p)return h?(e.s=-t,e):new q(p?a:NaN);if(!h[0]||!p[0])return p[0]?(e.s=-t,e):new q(h[0]?a:3==M?-0:0)}if(l=g(l),c=g(c),h=h.slice(),s=l-c){for((i=s<0)?(s=-s,o=h):(c=l,o=p),o.reverse(),t=s;t--;o.push(0));o.reverse()}else for(n=(i=(s=h.length)<(t=p.length))?s:t,s=t=0;t<n;t++)if(h[t]!=p[t]){i=h[t]<p[t];break}if(i&&(o=h,h=p,p=o,e.s=-e.s),(t=(n=p.length)-(r=h.length))>0)for(;t--;h[r++]=0);for(t=u-1;n>s;){if(h[--n]<p[n]){for(r=n;r&&!h[--r];h[r]=t);--h[r],h[n]+=u}h[n]-=p[n]}for(;0==h[0];h.splice(0,1),--c);return h[0]?K(e,h,c):(e.s=3==M?-1:1,e.c=[e.e=0],e)},P.modulo=P.mod=function(e,t){var n,o,i=this;return e=new q(e,t),!i.c||!e.s||e.c&&!e.c[0]?new q(NaN):!e.c||i.c&&!i.c[0]?new q(i):(9==N?(o=e.s,e.s=1,n=r(i,e,0,3),e.s=o,n.s*=o):n=r(i,e,0,N),(e=i.minus(n.times(e))).c[0]||1!=N||(e.s=i.s),e)},P.multipliedBy=P.times=function(e,t){var r,n,o,i,a,s,l,c,h,p,m,y,v,b,x,_=this,w=_.c,S=(e=new q(e,t)).c;if(!(w&&S&&w[0]&&S[0]))return!_.s||!e.s||w&&!w[0]&&!S||S&&!S[0]&&!w?e.c=e.e=e.s=null:(e.s*=_.s,w&&S?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=g(_.e/d)+g(e.e/d),e.s*=_.s,(l=w.length)<(p=S.length)&&(v=w,w=S,S=v,o=l,l=p,p=o),o=l+p,v=[];o--;v.push(0));for(b=u,x=f,o=p;--o>=0;){for(r=0,m=S[o]%x,y=S[o]/x|0,i=o+(a=l);i>o;)r=((c=m*(c=w[--a]%x)+(s=y*c+(h=w[a]/x|0)*m)%x*x+v[i]+r)/b|0)+(s/x|0)+y*h,v[i--]=c%b;v[i]=r}return r?++n:v.splice(0,1),K(e,v,n)},P.negated=function(){var e=new q(this);return e.s=-e.s||null,e},P.plus=function(e,t){var r,n=this,o=n.s;if(t=(e=new q(e,t)).s,!o||!t)return new q(NaN);if(o!=t)return e.s=-t,n.minus(e);var i=n.e/d,a=e.e/d,s=n.c,l=e.c;if(!i||!a){if(!s||!l)return new q(o/0);if(!s[0]||!l[0])return l[0]?e:new q(s[0]?n:0*o)}if(i=g(i),a=g(a),s=s.slice(),o=i-a){for(o>0?(a=i,r=l):(o=-o,r=s),r.reverse();o--;r.push(0));r.reverse()}for((o=s.length)-(t=l.length)<0&&(r=l,l=s,s=r,t=o),o=0;t;)o=(s[--t]=s[t]+l[t]+o)/u|0,s[t]=u===s[t]?0:s[t]%u;return o&&(s=[o].concat(s),++a),K(e,s,a)},P.precision=P.sd=function(e,t){var r,n,o,i=this;if(null!=e&&e!==!!e)return b(e,1,m),null==t?t=M:b(t,0,8),X(new q(i),e,t);if(!(r=i.c))return null;if(n=(o=r.length-1)*d+1,o=r[o]){for(;o%10==0;o/=10,n--);for(o=r[0];o>=10;o/=10,n++);}return e&&i.e+1>n&&(n=i.e+1),n},P.shiftedBy=function(e){return b(e,-9007199254740991,h),this.times("1e"+e)},P.squareRoot=P.sqrt=function(){var e,t,n,o,i,a=this,s=a.c,l=a.s,c=a.e,u=O+4,d=new q("0.5");if(1!==l||!s||!s[0])return new q(!l||l<0&&(!s||s[0])?NaN:s?a:1/0);if(0==(l=Math.sqrt(+Z(a)))||l==1/0?(((t=y(s)).length+c)%2==0&&(t+="0"),l=Math.sqrt(+t),c=g((c+1)/2)-(c<0||c%2),n=new q(t=l==1/0?"5e"+c:(t=l.toExponential()).slice(0,t.indexOf("e")+1)+c)):n=new q(l+""),n.c[0])for((l=(c=n.e)+u)<3&&(l=0);;)if(i=n,n=d.times(i.plus(r(a,i,u,1))),y(i.c).slice(0,l)===(t=y(n.c)).slice(0,l)){if(n.e<c&&--l,"9999"!=(t=t.slice(l-3,l+1))&&(o||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(X(n,n.e+O+2,1),e=!n.times(n).eq(a));break}if(!o&&(X(i,i.e+O+2,0),i.times(i).eq(a))){n=i;break}u+=4,l+=4,o=1}return X(n,n.e+O+1,M,e)},P.toExponential=function(e,t){return null!=e&&(b(e,0,m),e++),H(this,e,t,1)},P.toFixed=function(e,t){return null!=e&&(b(e,0,m),e=e+this.e+1),H(this,e,t)},P.toFormat=function(e,t,r){var n,o=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=U;else if("object"!=typeof r)throw Error(l+"Argument not an object: "+r);if(n=o.toFixed(e,t),o.c){var i,a=n.split("."),s=+r.groupSize,c=+r.secondaryGroupSize,u=r.groupSeparator||"",d=a[0],h=a[1],p=o.s<0,f=p?d.slice(1):d,m=f.length;if(c&&(i=s,s=c,c=i,m-=i),s>0&&m>0){for(i=m%s||s,d=f.substr(0,i);i<m;i+=s)d+=u+f.substr(i,s);c>0&&(d+=u+f.slice(i)),p&&(d="-"+d)}n=h?d+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):d}return(r.prefix||"")+n+(r.suffix||"")},P.toFraction=function(e){var t,n,o,i,a,s,c,u,h,f,m,g,v=this,b=v.c;if(null!=e&&(!(c=new q(e)).isInteger()&&(c.c||1!==c.s)||c.lt(I)))throw Error(l+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+Z(c));if(!b)return new q(v);for(t=new q(I),h=n=new q(I),o=u=new q(I),g=y(b),a=t.e=g.length-v.e-1,t.c[0]=p[(s=a%d)<0?d+s:s],e=!e||c.comparedTo(t)>0?a>0?t:h:c,s=z,z=1/0,c=new q(g),u.c[0]=0;f=r(c,t,0,1),1!=(i=n.plus(f.times(o))).comparedTo(e);)n=o,o=i,h=u.plus(f.times(i=h)),u=i,t=c.minus(f.times(i=t)),c=i;return i=r(e.minus(n),o,0,1),u=u.plus(i.times(h)),n=n.plus(i.times(o)),u.s=h.s=v.s,m=r(h,o,a*=2,M).minus(v).abs().comparedTo(r(u,n,a,M).minus(v).abs())<1?[h,o]:[u,n],z=s,m},P.toNumber=function(){return+Z(this)},P.toPrecision=function(e,t){return null!=e&&b(e,1,m),H(this,e,t,2)},P.toString=function(e){var t,r=this,o=r.s,i=r.e;return null===i?o?(t="Infinity",o<0&&(t="-"+t)):t="NaN":(null==e?t=i<=R||i>=L?_(y(r.c),i):w(y(r.c),i,"0"):10===e&&W?t=w(y((r=X(new q(r),O+i+1,M)).c),r.e,"0"):(b(e,2,V.length,"Base"),t=n(w(y(r.c),i,"0"),10,e,o,!0)),o<0&&r.c[0]&&(t="-"+t)),t},P.valueOf=P.toJSON=function(){return Z(this)},P._isBigNumber=!0,null!=t&&q.set(t),q}(),o.default=o.BigNumber=o,void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)}()},8287:(e,t,r)=>{"use strict";const n=r(7526),o=r(251),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50;const a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|m(e,t);let n=s(r);const o=n.write(e,t);return o!==r&&(n=n.slice(0,o)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Z(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Z(e,ArrayBuffer)||e&&Z(e.buffer,ArrayBuffer))return p(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(Z(e,SharedArrayBuffer)||e&&Z(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return l.from(n,t,r);const o=function(e){if(l.isBuffer(e)){const t=0|f(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||Y(e.length)?s(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return u(e),s(e<0?0:0|f(e))}function h(e){const t=e.length<0?0:0|f(e.length),r=s(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,l.prototype),n}function f(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function m(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Z(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return K(e).length;default:if(o)return n?-1:G(e).length;t=(""+t).toLowerCase(),o=!0}}function g(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,r);case"utf8":case"utf-8":return E(this,t,r);case"ascii":return A(this,t,r);case"latin1":case"binary":return j(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Y(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,o){let i,a=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){let n=-1;for(i=r;i<s;i++)if(c(e,i)===c(t,-1===n?0:i-n)){if(-1===n&&(n=i),i-n+1===l)return n*a}else-1!==n&&(i-=i-n),n=-1}else for(r+l>s&&(r=s-l),i=r;i>=0;i--){let r=!0;for(let n=0;n<l;n++)if(c(e,i+n)!==c(t,n)){r=!1;break}if(r)return i}return-1}function x(e,t,r,n){r=Number(r)||0;const o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;const i=t.length;let a;for(n>i/2&&(n=i/2),a=0;a<n;++a){const n=parseInt(t.substr(2*a,2),16);if(Y(n))return a;e[r+a]=n}return a}function _(e,t,r,n){return X(G(t,e.length-r),e,r,n)}function w(e,t,r,n){return X(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function S(e,t,r,n){return X(K(t),e,r,n)}function k(e,t,r,n){return X(function(e,t){let r,n,o;const i=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function T(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function E(e,t,r){r=Math.min(e.length,r);const n=[];let o=t;for(;o<r;){const t=e[o];let i=null,a=t>239?4:t>223?3:t>191?2:1;if(o+a<=r){let r,n,s,l;switch(a){case 1:t<128&&(i=t);break;case 2:r=e[o+1],128==(192&r)&&(l=(31&t)<<6|63&r,l>127&&(i=l));break;case 3:r=e[o+1],n=e[o+2],128==(192&r)&&128==(192&n)&&(l=(15&t)<<12|(63&r)<<6|63&n,l>2047&&(l<55296||l>57343)&&(i=l));break;case 4:r=e[o+1],n=e[o+2],s=e[o+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&s,l>65535&&l<1114112&&(i=l))}}null===i?(i=65533,a=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),o+=a}return function(e){const t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=C));return r}(n)}t.kMaxLength=a,l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,r){return function(e,t,r){return u(e),e<=0?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)}(e,t,r)},l.allocUnsafe=function(e){return d(e)},l.allocUnsafeSlow=function(e){return d(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(Z(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),Z(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=l.allocUnsafe(t);let o=0;for(r=0;r<e.length;++r){let t=e[r];if(Z(t,Uint8Array))o+t.length>n.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(n,o)):Uint8Array.prototype.set.call(n,t,o);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,o)}o+=t.length}return n},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},i&&(l.prototype[i]=l.prototype.inspect),l.prototype.compare=function(e,t,r,n,o){if(Z(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;let i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0);const s=Math.min(i,a),c=this.slice(n,o),u=e.slice(t,r);for(let l=0;l<s;++l)if(c[l]!==u[l]){i=c[l],a=u[l];break}return i<a?-1:a<i?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let i=!1;for(;;)switch(n){case"hex":return x(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":case"latin1":case"binary":return w(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const C=4096;function A(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function j(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function P(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let o="";for(let i=t;i<r;++i)o+=J[e[i]];return o}function I(e,t,r){const n=e.slice(t,r);let o="";for(let i=0;i<n.length-1;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function O(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,r,n,o,i){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function R(e,t,r,n,o){V(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function L(e,t,r,n,o){V(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r+7]=i,i>>=8,e[r+6]=i,i>>=8,e[r+5]=i,i>>=8,e[r+4]=i;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function F(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function z(e,t,r,n,i){return t=+t,r>>>=0,i||F(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function D(e,t,r,n,i){return t=+t,r>>>=0,i||F(e,0,r,8),o.write(e,t,r,n,52,8),r+8}l.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,l.prototype),n},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return n},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=this[e+--t],o=1;for(;t>0&&(o*=256);)n+=this[e+--t]*o;return n},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=$((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||q(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(o)<<BigInt(32))})),l.prototype.readBigUInt64BE=$((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||q(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(o)})),l.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=t,o=1,i=this[e+--n];for(;n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},l.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=$((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||q(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),l.prototype.readBigInt64BE=$((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||q(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||O(e,4,this.length),o.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||O(e,4,this.length),o.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||O(e,8,this.length),o.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||O(e,8,this.length),o.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||M(this,e,t,r,Math.pow(2,8*r)-1,0);let o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||M(this,e,t,r,Math.pow(2,8*r)-1,0);let o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=$((function(e){return R(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=$((function(e){return L(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);M(this,e,t,r,n-1,-n)}let o=0,i=1,a=0;for(this[t]=255&e;++o<r&&(i*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/i|0)-a&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);M(this,e,t,r,n-1,-n)}let o=r-1,i=1,a=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/i|0)-a&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=$((function(e){return R(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=$((function(e){return L(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(e,t,r){return z(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return z(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return D(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return D(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const o=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),o},l.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{const i=l.isBuffer(e)?e:l.from(e,n),a=i.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=i[o%a]}return this};const N={};function B(e,t,r){N[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(e,"]"),this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}}function U(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t="_".concat(e.slice(r-3,r)).concat(t);return"".concat(e.slice(0,r)).concat(t)}function V(e,t,r,n,o,i){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let o;throw o=i>3?0===t||t===BigInt(0)?">= 0".concat(n," and < 2").concat(n," ** ").concat(8*(i+1)).concat(n):">= -(2".concat(n," ** ").concat(8*(i+1)-1).concat(n,") and < 2 ** ").concat(8*(i+1)-1).concat(n):">= ".concat(t).concat(n," and <= ").concat(r).concat(n),new N.ERR_OUT_OF_RANGE("value",o,e)}!function(e,t,r){W(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||q(t,e.length-(r+1))}(n,o,i)}function W(e,t){if("number"!=typeof e)throw new N.ERR_INVALID_ARG_TYPE(t,"number",e)}function q(e,t,r){if(Math.floor(e)!==e)throw W(e,r),new N.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new N.ERR_BUFFER_OUT_OF_BOUNDS;throw new N.ERR_OUT_OF_RANGE(r||"offset",">= ".concat(r?1:0," and <= ").concat(t),e)}B("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),B("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)}),TypeError),B("ERR_OUT_OF_RANGE",(function(e,t,r){let n='The value of "'.concat(e,'" is out of range.'),o=r;return Number.isInteger(r)&&Math.abs(r)>2**32?o=U(String(r)):"bigint"==typeof r&&(o=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(o=U(o)),o+="n"),n+=" It must be ".concat(t,". Received ").concat(o),n}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function G(e,t){let r;t=t||1/0;const n=e.length;let o=null;const i=[];for(let a=0;a<n;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function K(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function X(e,t,r,n){let o;for(o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function Z(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Y(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let o=0;o<16;++o)t[n+o]=e[r]+e[o]}return t}();function $(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},6866:e=>{e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},8075:(e,t,r)=>{"use strict";var n=r(453),o=r(487),i=o(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&i(e,".prototype.")>-1?o(r):r}},487:(e,t,r)=>{"use strict";var n=r(6743),o=r(453),i=r(6897),a=r(9675),s=o("%Function.prototype.apply%"),l=o("%Function.prototype.call%"),c=o("%Reflect.apply%",!0)||n.call(l,s),u=r(655),d=o("%Math.max%");e.exports=function(e){if("function"!=typeof e)throw new a("a function is required");var t=c(n,l,arguments);return i(t,1+d(0,e.length-(arguments.length-1)),!0)};var h=function(){return c(n,s,arguments)};u?u(e.exports,"apply",{value:h}):e.exports.apply=h},41:(e,t,r)=>{"use strict";var n=r(655),o=r(8068),i=r(9675),a=r(5795);e.exports=function(e,t,r){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new i("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new i("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new i("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new i("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new i("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new i("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,c=arguments.length>5?arguments[5]:null,u=arguments.length>6&&arguments[6],d=!!a&&a(e,t);if(n)n(e,t,{configurable:null===c&&d?d.configurable:!c,enumerable:null===s&&d?d.enumerable:!s,value:r,writable:null===l&&d?d.writable:!l});else{if(!u&&(s||l||c))throw new o("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=r}}},655:(e,t,r)=>{"use strict";var n=r(453)("%Object.defineProperty%",!0)||!1;if(n)try{n({},"a",{value:1})}catch(e){n=!1}e.exports=n},1237:e=>{"use strict";e.exports=EvalError},9383:e=>{"use strict";e.exports=Error},9290:e=>{"use strict";e.exports=RangeError},9538:e=>{"use strict";e.exports=ReferenceError},8068:e=>{"use strict";e.exports=SyntaxError},9675:e=>{"use strict";e.exports=TypeError},5345:e=>{"use strict";e.exports=URIError},7007:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(r,n){function o(r){e.removeListener(t,i),n(r)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}m(e,t,i,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&m(e,"error",t,{once:!0})}(e,o)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function c(e,t,r,n){var o,i,a,c;if(s(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),a=i[t]),void 0===a)a=i[t]=r,++e._eventsCount;else if("function"==typeof a?a=i[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(o=l(e))>0&&a.length>o&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,c=u,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=u.bind(n);return o.listener=r,n.wrapFn=o,o}function h(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):f(o,o.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function m(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){n.once&&e.removeEventListener(t,o),r(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)n(l,this,t);else{var c=l.length,u=f(l,c);for(r=0;r<c;++r)n(u[r],this,t)}return!0},i.prototype.addListener=function(e,t){return c(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return c(this,e,t,!0)},i.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},i.prototype.removeListener=function(e,t){var r,n,o,i,a;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){a=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},i.prototype.listeners=function(e){return h(this,e,!0)},i.prototype.rawListeners=function(e){return h(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},i.prototype.listenerCount=p,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},1731:(e,t,r)=>{var n=r(8287).Buffer,o=r(8835).parse,i=r(7007),a=r(3464),s=r(1568),l=r(537),c=["pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","secureProtocol","servername","checkServerIdentity"],u=[239,187,191],d=262144,h=/^(cookie|authorization)$/i;function p(e,t){var r=p.CONNECTING,i=t&&t.headers,l=!1;Object.defineProperty(this,"readyState",{get:function(){return r}}),Object.defineProperty(this,"url",{get:function(){return e}});var g,y=this;function v(t){r!==p.CLOSED&&(r=p.CONNECTING,T("error",new f("error",{message:t})),S&&(e=S,S=null,l=!1),setTimeout((function(){r!==p.CONNECTING||y.connectionInProgress||(y.connectionInProgress=!0,k())}),y.reconnectInterval))}y.reconnectInterval=1e3,y.connectionInProgress=!1;var b="";i&&i["Last-Event-ID"]&&(b=i["Last-Event-ID"],delete i["Last-Event-ID"]);var x=!1,_="",w="",S=null;function k(){var m=o(e),_="https:"===m.protocol;if(m.headers={"Cache-Control":"no-cache",Accept:"text/event-stream"},b&&(m.headers["Last-Event-ID"]=b),i){var w=l?function(e){var t={};for(var r in e)h.test(r)||(t[r]=e[r]);return t}(i):i;for(var C in w){var A=w[C];A&&(m.headers[C]=A)}}if(m.rejectUnauthorized=!(t&&!t.rejectUnauthorized),t&&void 0!==t.createConnection&&(m.createConnection=t.createConnection),t&&t.proxy){var j=o(t.proxy);_="https:"===j.protocol,m.protocol=_?"https:":"http:",m.path=e,m.headers.Host=m.host,m.hostname=j.hostname,m.host=j.host,m.port=j.port}if(t&&t.https)for(var P in t.https)if(-1!==c.indexOf(P)){var I=t.https[P];void 0!==I&&(m[P]=I)}t&&void 0!==t.withCredentials&&(m.withCredentials=t.withCredentials),g=(_?a:s).request(m,(function(t){if(y.connectionInProgress=!1,500===t.statusCode||502===t.statusCode||503===t.statusCode||504===t.statusCode)return T("error",new f("error",{status:t.statusCode,message:t.statusMessage})),void v();if(301===t.statusCode||302===t.statusCode||307===t.statusCode){var o=t.headers.location;if(!o)return void T("error",new f("error",{status:t.statusCode,message:t.statusMessage}));var i=new URL(e).origin,a=new URL(o).origin;return l=i!==a,307===t.statusCode&&(S=e),e=o,void process.nextTick(k)}if(200!==t.statusCode)return T("error",new f("error",{status:t.statusCode,message:t.statusMessage})),y.close();var s,c;r=p.OPEN,t.on("close",(function(){t.removeAllListeners("close"),t.removeAllListeners("end"),v()})),t.on("end",(function(){t.removeAllListeners("close"),t.removeAllListeners("end"),v()})),T("open",new f("open"));var h=0,m=-1,g=0,b=0;t.on("data",(function(e){s?(e.length>s.length-b&&((g=2*s.length+e.length)>d&&(g=s.length+e.length+d),c=n.alloc(g),s.copy(c,0,0,b),s=c),e.copy(s,b),b+=e.length):(function(e){return u.every((function(t,r){return e[r]===t}))}(s=e)&&(s=s.slice(u.length)),b=s.length);for(var t=0,r=b;t<r;){x&&(10===s[t]&&++t,x=!1);for(var o,i=-1,a=m,l=h;i<0&&l<r;++l)58===(o=s[l])?a<0&&(a=l-t):13===o?(x=!0,i=l-t):10===o&&(i=l-t);if(i<0){h=r-t,m=a;break}h=0,m=-1,E(s,t,a,i),t+=i+1}t===r?(s=void 0,b=0):t>0&&(s=s.slice(t,b),b=s.length)}))})),g.on("error",(function(e){y.connectionInProgress=!1,v(e.message)})),g.setNoDelay&&g.setNoDelay(!0),g.end()}function T(){y.listeners(arguments[0]).length>0&&y.emit.apply(y,arguments)}function E(t,r,n,o){if(0===o){if(_.length>0){var i=w||"message";T(i,new m(i,{data:_.slice(0,-1),lastEventId:b,origin:new URL(e).origin})),_=""}w=void 0}else if(n>0){var a,s=n<0,l=t.slice(r,r+(s?o:n)).toString();r+=a=s?o:32!==t[r+n+1]?n+1:n+2;var c=o-a,u=t.slice(r,r+c).toString();if("data"===l)_+=u+"\n";else if("event"===l)w=u;else if("id"===l)b=u;else if("retry"===l){var d=parseInt(u,10);Number.isNaN(d)||(y.reconnectInterval=d)}}}k(),this._close=function(){r!==p.CLOSED&&(r=p.CLOSED,g.abort&&g.abort(),g.xhr&&g.xhr.abort&&g.xhr.abort())}}function f(e,t){if(Object.defineProperty(this,"type",{writable:!1,value:e,enumerable:!0}),t)for(var r in t)t.hasOwnProperty(r)&&Object.defineProperty(this,r,{writable:!1,value:t[r],enumerable:!0})}function m(e,t){for(var r in Object.defineProperty(this,"type",{writable:!1,value:e,enumerable:!0}),t)t.hasOwnProperty(r)&&Object.defineProperty(this,r,{writable:!1,value:t[r],enumerable:!0})}e.exports=p,l.inherits(p,i.EventEmitter),p.prototype.constructor=p,["open","error","message"].forEach((function(e){Object.defineProperty(p.prototype,"on"+e,{get:function(){var t=this.listeners(e)[0];return t?t._listener?t._listener:t:void 0},set:function(t){this.removeAllListeners(e),this.addEventListener(e,t)}})})),Object.defineProperty(p,"CONNECTING",{enumerable:!0,value:0}),Object.defineProperty(p,"OPEN",{enumerable:!0,value:1}),Object.defineProperty(p,"CLOSED",{enumerable:!0,value:2}),p.prototype.CONNECTING=0,p.prototype.OPEN=1,p.prototype.CLOSED=2,p.prototype.close=function(){this._close()},p.prototype.addEventListener=function(e,t){"function"==typeof t&&(t._listener=t,this.on(e,t))},p.prototype.dispatchEvent=function(e){if(!e.type)throw new Error("UNSPECIFIED_EVENT_TYPE_ERR");this.emit(e.type,e.detail)},p.prototype.removeEventListener=function(e,t){"function"==typeof t&&(t._listener=void 0,this.removeListener(e,t))}},2682:(e,t,r)=>{"use strict";var n=r(9600),o=Object.prototype.toString,i=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){if(!n(t))throw new TypeError("iterator must be a function");var a;arguments.length>=3&&(a=r),"[object Array]"===o.call(e)?function(e,t,r){for(var n=0,o=e.length;n<o;n++)i.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))}(e,t,a):"string"==typeof e?function(e,t,r){for(var n=0,o=e.length;n<o;n++)null==r?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)}(e,t,a):function(e,t,r){for(var n in e)i.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))}(e,t,a)}},1734:e=>{"use strict";var t=Object.prototype.toString,r=Math.max,n=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var o=0;o<t.length;o+=1)r[o+e.length]=t[o];return r};e.exports=function(e){var o=this;if("function"!=typeof o||"[object Function]"!==t.apply(o))throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var i,a=function(e){for(var t=[],r=1,n=0;r<e.length;r+=1,n+=1)t[n]=e[r];return t}(arguments),s=r(0,o.length-a.length),l=[],c=0;c<s;c++)l[c]="$"+c;if(i=Function("binder","return function ("+function(e){for(var t="",r=0;r<e.length;r+=1)t+=e[r],r+1<e.length&&(t+=",");return t}(l)+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var t=o.apply(this,n(a,arguments));return Object(t)===t?t:this}return o.apply(e,n(a,arguments))})),o.prototype){var u=function(){};u.prototype=o.prototype,i.prototype=new u,u.prototype=null}return i}},6743:(e,t,r)=>{"use strict";var n=r(1734);e.exports=Function.prototype.bind||n},453:(e,t,r)=>{"use strict";var n,o=r(9383),i=r(1237),a=r(9290),s=r(9538),l=r(8068),c=r(9675),u=r(5345),d=Function,h=function(e){try{return d('"use strict"; return ('+e+").constructor;")()}catch(e){}},p=Object.getOwnPropertyDescriptor;if(p)try{p({},"")}catch(e){p=null}var f=function(){throw new c},m=p?function(){try{return f}catch(e){try{return p(arguments,"callee").get}catch(e){return f}}}():f,g=r(4039)(),y=r(24)(),v=Object.getPrototypeOf||(y?function(e){return e.__proto__}:null),b={},x="undefined"!=typeof Uint8Array&&v?v(Uint8Array):n,_={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":g&&v?v([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o,"%eval%":eval,"%EvalError%":i,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":d,"%GeneratorFunction%":b,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&v?v(v([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&g&&v?v((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":a,"%ReferenceError%":s,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&g&&v?v((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&v?v(""[Symbol.iterator]()):n,"%Symbol%":g?Symbol:n,"%SyntaxError%":l,"%ThrowTypeError%":m,"%TypedArray%":x,"%TypeError%":c,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":u,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet};if(v)try{null.error}catch(e){var w=v(v(e));_["%Error.prototype%"]=w}var S=function e(t){var r;if("%AsyncFunction%"===t)r=h("async function () {}");else if("%GeneratorFunction%"===t)r=h("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=h("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&v&&(r=v(o.prototype))}return _[t]=r,r},k={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},T=r(6743),E=r(9957),C=T.call(Function.call,Array.prototype.concat),A=T.call(Function.apply,Array.prototype.splice),j=T.call(Function.call,String.prototype.replace),P=T.call(Function.call,String.prototype.slice),I=T.call(Function.call,RegExp.prototype.exec),O=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,M=/\\(\\)?/g,R=function(e,t){var r,n=e;if(E(k,n)&&(n="%"+(r=k[n])[0]+"%"),E(_,n)){var o=_[n];if(o===b&&(o=S(n)),void 0===o&&!t)throw new c("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new l("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new c('"allowMissing" argument must be a boolean');if(null===I(/^%?[^%]*%?$/,e))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=P(e,0,1),r=P(e,-1);if("%"===t&&"%"!==r)throw new l("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new l("invalid intrinsic syntax, expected opening `%`");var n=[];return j(e,O,(function(e,t,r,o){n[n.length]=r?j(o,M,"$1"):t||e})),n}(e),n=r.length>0?r[0]:"",o=R("%"+n+"%",t),i=o.name,a=o.value,s=!1,u=o.alias;u&&(n=u[0],A(r,C([0,1],u)));for(var d=1,h=!0;d<r.length;d+=1){var f=r[d],m=P(f,0,1),g=P(f,-1);if(('"'===m||"'"===m||"`"===m||'"'===g||"'"===g||"`"===g)&&m!==g)throw new l("property names with quotes must have matching quotes");if("constructor"!==f&&h||(s=!0),E(_,i="%"+(n+="."+f)+"%"))a=_[i];else if(null!=a){if(!(f in a)){if(!t)throw new c("base intrinsic for "+e+" exists, but the property is not available.");return}if(p&&d+1>=r.length){var y=p(a,f);a=(h=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:a[f]}else h=E(a,f),a=a[f];h&&!s&&(_[i]=a)}}return a}},5795:(e,t,r)=>{"use strict";var n=r(453)("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch(e){n=null}e.exports=n},592:(e,t,r)=>{"use strict";var n=r(655),o=function(){return!!n};o.hasArrayLengthDefineBug=function(){if(!n)return null;try{return 1!==n([],"length",{value:1}).length}catch(e){return!0}},e.exports=o},24:e=>{"use strict";var t={__proto__:null,foo:{}},r=Object;e.exports=function(){return{__proto__:t}.foo===t.foo&&!(t instanceof r)}},4039:(e,t,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=r(1333);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&o()}},1333:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},9092:(e,t,r)=>{"use strict";var n=r(1333);e.exports=function(){return n()&&!!Symbol.toStringTag}},9957:(e,t,r)=>{"use strict";var n=Function.prototype.call,o=Object.prototype.hasOwnProperty,i=r(6743);e.exports=i.call(n,o)},3464:(e,t,r)=>{var n=r(1568),o=r(8835),i=e.exports;for(var a in n)n.hasOwnProperty(a)&&(i[a]=n[a]);function s(e){if("string"==typeof e&&(e=o.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}i.request=function(e,t){return e=s(e),n.request.call(this,e,t)},i.get=function(e,t){return e=s(e),n.get.call(this,e,t)}},251:(e,t)=>{t.read=function(e,t,r,n,o){var i,a,s=8*o-n-1,l=(1<<s)-1,c=l>>1,u=-7,d=r?o-1:0,h=r?-1:1,p=e[t+d];for(d+=h,i=p&(1<<-u)-1,p>>=-u,u+=s;u>0;i=256*i+e[t+d],d+=h,u-=8);for(a=i&(1<<-u)-1,i>>=-u,u+=n;u>0;a=256*a+e[t+d],d+=h,u-=8);if(0===i)i=1-c;else{if(i===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),i-=c}return(p?-1:1)*a*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var a,s,l,c=8*i-o-1,u=(1<<c)-1,d=u>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*l-1)*Math.pow(2,o),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;e[r+p]=255&s,p+=f,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;e[r+p]=255&a,p+=f,a/=256,c-=8);e[r+p-f]|=128*m}},6698:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},7244:(e,t,r)=>{"use strict";var n=r(9092)(),o=r(8075)("Object.prototype.toString"),i=function(e){return!(n&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===o(e)},a=function(e){return!!i(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==o(e)&&"[object Function]"===o(e.callee)},s=function(){return i(arguments)}();i.isLegacyArguments=a,e.exports=s?i:a},9600:e=>{"use strict";var t,r,n=Function.prototype.toString,o="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof o&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},o((function(){throw 42}),null,t)}catch(e){e!==r&&(o=null)}else o=null;var i=/^\s*class\b/,a=function(e){try{var t=n.call(e);return i.test(t)}catch(e){return!1}},s=function(e){try{return!a(e)&&(n.call(e),!0)}catch(e){return!1}},l=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,u=!(0 in[,]),d=function(){return!1};if("object"==typeof document){var h=document.all;l.call(h)===l.call(document.all)&&(d=function(e){if((u||!e)&&(void 0===e||"object"==typeof e))try{var t=l.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(e){}return!1})}e.exports=o?function(e){if(d(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;try{o(e,null,t)}catch(e){if(e!==r)return!1}return!a(e)&&s(e)}:function(e){if(d(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(c)return s(e);if(a(e))return!1;var t=l.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&s(e)}},8184:(e,t,r)=>{"use strict";var n,o=Object.prototype.toString,i=Function.prototype.toString,a=/^\s*(?:function)?\*/,s=r(9092)(),l=Object.getPrototypeOf;e.exports=function(e){if("function"!=typeof e)return!1;if(a.test(i.call(e)))return!0;if(!s)return"[object GeneratorFunction]"===o.call(e);if(!l)return!1;if(void 0===n){var t=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}}();n=!!t&&l(t)}return l(e)===n}},5680:(e,t,r)=>{"use strict";var n=r(5767);e.exports=function(e){return!!n(e)}},8859:(e,t,r)=>{var n="function"==typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=n&&o&&"function"==typeof o.get?o.get:null,a=n&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=s&&l&&"function"==typeof l.get?l.get:null,u=s&&Set.prototype.forEach,d="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,h="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,f=Boolean.prototype.valueOf,m=Object.prototype.toString,g=Function.prototype.toString,y=String.prototype.match,v=String.prototype.slice,b=String.prototype.replace,x=String.prototype.toUpperCase,_=String.prototype.toLowerCase,w=RegExp.prototype.test,S=Array.prototype.concat,k=Array.prototype.join,T=Array.prototype.slice,E=Math.floor,C="function"==typeof BigInt?BigInt.prototype.valueOf:null,A=Object.getOwnPropertySymbols,j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,P="function"==typeof Symbol&&"object"==typeof Symbol.iterator,I="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,O=Object.prototype.propertyIsEnumerable,M=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function R(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||w.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-E(-e):E(e);if(n!==e){var o=String(n),i=v.call(t,o.length+1);return b.call(o,r,"$&_")+"."+b.call(b.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(t,r,"$&_")}var L=r(2634),F=L.custom,z=V(F)?F:null;function D(e,t,r){var n="double"===(r.quoteStyle||t)?'"':"'";return n+e+n}function N(e){return b.call(String(e),/"/g,"&quot;")}function B(e){return!("[object Array]"!==H(e)||I&&"object"==typeof e&&I in e)}function U(e){return!("[object RegExp]"!==H(e)||I&&"object"==typeof e&&I in e)}function V(e){if(P)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!j)return!1;try{return j.call(e),!0}catch(e){}return!1}e.exports=function e(t,n,o,s){var l=n||{};if(q(l,"quoteStyle")&&"single"!==l.quoteStyle&&"double"!==l.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(q(l,"maxStringLength")&&("number"==typeof l.maxStringLength?l.maxStringLength<0&&l.maxStringLength!==1/0:null!==l.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var m=!q(l,"customInspect")||l.customInspect;if("boolean"!=typeof m&&"symbol"!==m)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(q(l,"indent")&&null!==l.indent&&"\t"!==l.indent&&!(parseInt(l.indent,10)===l.indent&&l.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(q(l,"numericSeparator")&&"boolean"!=typeof l.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var x=l.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return K(t,l);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var w=String(t);return x?R(t,w):w}if("bigint"==typeof t){var E=String(t)+"n";return x?R(t,E):E}var A=void 0===l.depth?5:l.depth;if(void 0===o&&(o=0),o>=A&&A>0&&"object"==typeof t)return B(t)?"[Array]":"[Object]";var F=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=k.call(Array(e.indent+1)," ")}return{base:r,prev:k.call(Array(t+1),r)}}(l,o);if(void 0===s)s=[];else if(G(s,t)>=0)return"[Circular]";function W(t,r,n){if(r&&(s=T.call(s)).push(r),n){var i={depth:l.depth};return q(l,"quoteStyle")&&(i.quoteStyle=l.quoteStyle),e(t,i,o+1,s)}return e(t,l,o+1,s)}if("function"==typeof t&&!U(t)){var X=function(e){if(e.name)return e.name;var t=y.call(g.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),ee=Q(t,W);return"[Function"+(X?": "+X:" (anonymous)")+"]"+(ee.length>0?" { "+k.call(ee,", ")+" }":"")}if(V(t)){var te=P?b.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):j.call(t);return"object"!=typeof t||P?te:Z(te)}if(function(e){return!(!e||"object"!=typeof e)&&("undefined"!=typeof HTMLElement&&e instanceof HTMLElement||"string"==typeof e.nodeName&&"function"==typeof e.getAttribute)}(t)){for(var re="<"+_.call(String(t.nodeName)),ne=t.attributes||[],oe=0;oe<ne.length;oe++)re+=" "+ne[oe].name+"="+D(N(ne[oe].value),"double",l);return re+=">",t.childNodes&&t.childNodes.length&&(re+="..."),re+"</"+_.call(String(t.nodeName))+">"}if(B(t)){if(0===t.length)return"[]";var ie=Q(t,W);return F&&!function(e){for(var t=0;t<e.length;t++)if(G(e[t],"\n")>=0)return!1;return!0}(ie)?"["+$(ie,F)+"]":"[ "+k.call(ie,", ")+" ]"}if(function(e){return!("[object Error]"!==H(e)||I&&"object"==typeof e&&I in e)}(t)){var ae=Q(t,W);return"cause"in Error.prototype||!("cause"in t)||O.call(t,"cause")?0===ae.length?"["+String(t)+"]":"{ ["+String(t)+"] "+k.call(ae,", ")+" }":"{ ["+String(t)+"] "+k.call(S.call("[cause]: "+W(t.cause),ae),", ")+" }"}if("object"==typeof t&&m){if(z&&"function"==typeof t[z]&&L)return L(t,{depth:A-o});if("symbol"!==m&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!i||!e||"object"!=typeof e)return!1;try{i.call(e);try{c.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var se=[];return a&&a.call(t,(function(e,r){se.push(W(r,t,!0)+" => "+W(e,t))})),J("Map",i.call(t),se,F)}if(function(e){if(!c||!e||"object"!=typeof e)return!1;try{c.call(e);try{i.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var le=[];return u&&u.call(t,(function(e){le.push(W(e,t))})),J("Set",c.call(t),le,F)}if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{h.call(e,h)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return Y("WeakMap");if(function(e){if(!h||!e||"object"!=typeof e)return!1;try{h.call(e,h);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return Y("WeakSet");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{return p.call(e),!0}catch(e){}return!1}(t))return Y("WeakRef");if(function(e){return!("[object Number]"!==H(e)||I&&"object"==typeof e&&I in e)}(t))return Z(W(Number(t)));if(function(e){if(!e||"object"!=typeof e||!C)return!1;try{return C.call(e),!0}catch(e){}return!1}(t))return Z(W(C.call(t)));if(function(e){return!("[object Boolean]"!==H(e)||I&&"object"==typeof e&&I in e)}(t))return Z(f.call(t));if(function(e){return!("[object String]"!==H(e)||I&&"object"==typeof e&&I in e)}(t))return Z(W(String(t)));if("undefined"!=typeof window&&t===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&t===globalThis||void 0!==r.g&&t===r.g)return"{ [object globalThis] }";if(!function(e){return!("[object Date]"!==H(e)||I&&"object"==typeof e&&I in e)}(t)&&!U(t)){var ce=Q(t,W),ue=M?M(t)===Object.prototype:t instanceof Object||t.constructor===Object,de=t instanceof Object?"":"null prototype",he=!ue&&I&&Object(t)===t&&I in t?v.call(H(t),8,-1):de?"Object":"",pe=(ue||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(he||de?"["+k.call(S.call([],he||[],de||[]),": ")+"] ":"");return 0===ce.length?pe+"{}":F?pe+"{"+$(ce,F)+"}":pe+"{ "+k.call(ce,", ")+" }"}return String(t)};var W=Object.prototype.hasOwnProperty||function(e){return e in this};function q(e,t){return W.call(e,t)}function H(e){return m.call(e)}function G(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function K(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return K(v.call(e,0,t.maxStringLength),t)+n}return D(b.call(b.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,X),"single",t)}function X(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+x.call(t.toString(16))}function Z(e){return"Object("+e+")"}function Y(e){return e+" { ? }"}function J(e,t,r,n){return e+" ("+t+") {"+(n?$(r,n):k.call(r,", "))+"}"}function $(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+k.call(e,","+r)+"\n"+t.prev}function Q(e,t){var r=B(e),n=[];if(r){n.length=e.length;for(var o=0;o<e.length;o++)n[o]=q(e,o)?t(e[o],e):""}var i,a="function"==typeof A?A(e):[];if(P){i={};for(var s=0;s<a.length;s++)i["$"+a[s]]=a[s]}for(var l in e)q(e,l)&&(r&&String(Number(l))===l&&l<e.length||P&&i["$"+l]instanceof Symbol||(w.call(/[^\w$]/,l)?n.push(t(l,e)+": "+t(e[l],e)):n.push(l+": "+t(e[l],e))));if("function"==typeof A)for(var c=0;c<a.length;c++)O.call(e,a[c])&&n.push("["+t(a[c])+"]: "+t(e[a[c]],e));return n}},6578:e=>{"use strict";e.exports=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]},4765:e=>{"use strict";var t=String.prototype.replace,r=/%20/g,n="RFC3986";e.exports={default:n,formatters:{RFC1738:function(e){return t.call(e,r,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:n}},5373:(e,t,r)=>{"use strict";var n=r(8636),o=r(2642),i=r(4765);e.exports={formats:i,parse:o,stringify:n}},2642:(e,t,r)=>{"use strict";var n=r(7720),o=Object.prototype.hasOwnProperty,i=Array.isArray,a={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},l=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},c=function(e,t,r,n){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=r.depth>0&&/(\[[^[\]]*])/.exec(i),c=s?i.slice(0,s.index):i,u=[];if(c){if(!r.plainObjects&&o.call(Object.prototype,c)&&!r.allowPrototypes)return;u.push(c)}for(var d=0;r.depth>0&&null!==(s=a.exec(i))&&d<r.depth;){if(d+=1,!r.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(s[1])}if(s){if(!0===r.strictDepth)throw new RangeError("Input depth exceeded depth option of "+r.depth+" and strictDepth is true");u.push("["+i.slice(s.index)+"]")}return function(e,t,r,n){for(var o=n?t:l(t,r),i=e.length-1;i>=0;--i){var a,s=e[i];if("[]"===s&&r.parseArrays)a=r.allowEmptyArrays&&(""===o||r.strictNullHandling&&null===o)?[]:[].concat(o);else{a=r.plainObjects?Object.create(null):{};var c="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,u=r.decodeDotInKeys?c.replace(/%2E/g,"."):c,d=parseInt(u,10);r.parseArrays||""!==u?!isNaN(d)&&s!==u&&String(d)===u&&d>=0&&r.parseArrays&&d<=r.arrayLimit?(a=[])[d]=o:"__proto__"!==u&&(a[u]=o):a={0:o}}o=a}return o}(u,t,r,n)}};e.exports=function(e,t){var r=function(e){if(!e)return a;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.decodeDotInKeys&&"boolean"!=typeof e.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?a.charset:e.charset,r=void 0===e.duplicates?a.duplicates:e.duplicates;if("combine"!==r&&"first"!==r&&"last"!==r)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===e.allowDots?!0===e.decodeDotInKeys||a.allowDots:!!e.allowDots,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:a.allowEmptyArrays,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:a.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:a.comma,decodeDotInKeys:"boolean"==typeof e.decodeDotInKeys?e.decodeDotInKeys:a.decodeDotInKeys,decoder:"function"==typeof e.decoder?e.decoder:a.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:a.depth,duplicates:r,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:a.plainObjects,strictDepth:"boolean"==typeof e.strictDepth?!!e.strictDepth:a.strictDepth,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var u="string"==typeof e?function(e,t){var r={__proto__:null},c=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;c=c.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var u,d=t.parameterLimit===1/0?void 0:t.parameterLimit,h=c.split(t.delimiter,d),p=-1,f=t.charset;if(t.charsetSentinel)for(u=0;u<h.length;++u)0===h[u].indexOf("utf8=")&&("utf8=%E2%9C%93"===h[u]?f="utf-8":"utf8=%26%2310003%3B"===h[u]&&(f="iso-8859-1"),p=u,u=h.length);for(u=0;u<h.length;++u)if(u!==p){var m,g,y=h[u],v=y.indexOf("]="),b=-1===v?y.indexOf("="):v+1;-1===b?(m=t.decoder(y,a.decoder,f,"key"),g=t.strictNullHandling?null:""):(m=t.decoder(y.slice(0,b),a.decoder,f,"key"),g=n.maybeMap(l(y.slice(b+1),t),(function(e){return t.decoder(e,a.decoder,f,"value")}))),g&&t.interpretNumericEntities&&"iso-8859-1"===f&&(g=s(g)),y.indexOf("[]=")>-1&&(g=i(g)?[g]:g);var x=o.call(r,m);x&&"combine"===t.duplicates?r[m]=n.combine(r[m],g):x&&"last"!==t.duplicates||(r[m]=g)}return r}(e,r):e,d=r.plainObjects?Object.create(null):{},h=Object.keys(u),p=0;p<h.length;++p){var f=h[p],m=c(f,u[f],r,"string"==typeof e);d=n.merge(d,m,r)}return!0===r.allowSparse?d:n.compact(d)}},8636:(e,t,r)=>{"use strict";var n=r(920),o=r(7720),i=r(4765),a=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Array.isArray,c=Array.prototype.push,u=function(e,t){c.apply(e,l(t)?t:[t])},d=Date.prototype.toISOString,h=i.default,p={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:o.encode,encodeValuesOnly:!1,format:h,formatter:i.formatters[h],indices:!1,serializeDate:function(e){return d.call(e)},skipNulls:!1,strictNullHandling:!1},f={},m=function e(t,r,i,a,s,c,d,h,m,g,y,v,b,x,_,w,S,k){for(var T,E=t,C=k,A=0,j=!1;void 0!==(C=C.get(f))&&!j;){var P=C.get(t);if(A+=1,void 0!==P){if(P===A)throw new RangeError("Cyclic object value");j=!0}void 0===C.get(f)&&(A=0)}if("function"==typeof g?E=g(r,E):E instanceof Date?E=b(E):"comma"===i&&l(E)&&(E=o.maybeMap(E,(function(e){return e instanceof Date?b(e):e}))),null===E){if(c)return m&&!w?m(r,p.encoder,S,"key",x):r;E=""}if("string"==typeof(T=E)||"number"==typeof T||"boolean"==typeof T||"symbol"==typeof T||"bigint"==typeof T||o.isBuffer(E))return m?[_(w?r:m(r,p.encoder,S,"key",x))+"="+_(m(E,p.encoder,S,"value",x))]:[_(r)+"="+_(String(E))];var I,O=[];if(void 0===E)return O;if("comma"===i&&l(E))w&&m&&(E=o.maybeMap(E,m)),I=[{value:E.length>0?E.join(",")||null:void 0}];else if(l(g))I=g;else{var M=Object.keys(E);I=y?M.sort(y):M}var R=h?r.replace(/\./g,"%2E"):r,L=a&&l(E)&&1===E.length?R+"[]":R;if(s&&l(E)&&0===E.length)return L+"[]";for(var F=0;F<I.length;++F){var z=I[F],D="object"==typeof z&&void 0!==z.value?z.value:E[z];if(!d||null!==D){var N=v&&h?z.replace(/\./g,"%2E"):z,B=l(E)?"function"==typeof i?i(L,N):L:L+(v?"."+N:"["+N+"]");k.set(t,A);var U=n();U.set(f,k),u(O,e(D,B,i,a,s,c,d,h,"comma"===i&&w&&l(E)?null:m,g,y,v,b,x,_,w,S,U))}}return O};e.exports=function(e,t){var r,o=e,c=function(e){if(!e)return p;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||p.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=i.default;if(void 0!==e.format){if(!a.call(i.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n,o=i.formatters[r],c=p.filter;if(("function"==typeof e.filter||l(e.filter))&&(c=e.filter),n=e.arrayFormat in s?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":p.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var u=void 0===e.allowDots?!0===e.encodeDotInKeys||p.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:p.addQueryPrefix,allowDots:u,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:p.allowEmptyArrays,arrayFormat:n,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:p.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:void 0===e.delimiter?p.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:p.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:p.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:p.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:p.encodeValuesOnly,filter:c,format:r,formatter:o,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:p.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:p.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:p.strictNullHandling}}(t);"function"==typeof c.filter?o=(0,c.filter)("",o):l(c.filter)&&(r=c.filter);var d=[];if("object"!=typeof o||null===o)return"";var h=s[c.arrayFormat],f="comma"===h&&c.commaRoundTrip;r||(r=Object.keys(o)),c.sort&&r.sort(c.sort);for(var g=n(),y=0;y<r.length;++y){var v=r[y];c.skipNulls&&null===o[v]||u(d,m(o[v],v,h,f,c.allowEmptyArrays,c.strictNullHandling,c.skipNulls,c.encodeDotInKeys,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.format,c.formatter,c.encodeValuesOnly,c.charset,g))}var b=d.join(c.delimiter),x=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?x+="utf8=%26%2310003%3B&":x+="utf8=%E2%9C%93&"),b.length>0?x+b:""}},7720:(e,t,r)=>{"use strict";var n=r(4765),o=Object.prototype.hasOwnProperty,i=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},l=1024;e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var o=t[n],a=o.obj[o.prop],s=Object.keys(a),l=0;l<s.length;++l){var c=s[l],u=a[c];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:a,prop:c}),r.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(i(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r,o,i){if(0===e.length)return e;var s=e;if("symbol"==typeof e?s=Symbol.prototype.toString.call(e):"string"!=typeof e&&(s=String(e)),"iso-8859-1"===r)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var c="",u=0;u<s.length;u+=l){for(var d=s.length>=l?s.slice(u,u+l):s,h=[],p=0;p<d.length;++p){var f=d.charCodeAt(p);45===f||46===f||95===f||126===f||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||i===n.RFC1738&&(40===f||41===f)?h[h.length]=d.charAt(p):f<128?h[h.length]=a[f]:f<2048?h[h.length]=a[192|f>>6]+a[128|63&f]:f<55296||f>=57344?h[h.length]=a[224|f>>12]+a[128|f>>6&63]+a[128|63&f]:(p+=1,f=65536+((1023&f)<<10|1023&d.charCodeAt(p)),h[h.length]=a[240|f>>18]+a[128|f>>12&63]+a[128|f>>6&63]+a[128|63&f])}c+=h.join("")}return c},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(i(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r){if(i(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!o.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var a=t;return i(t)&&!i(r)&&(a=s(t,n)),i(t)&&i(r)?(r.forEach((function(r,i){if(o.call(t,i)){var a=t[i];a&&"object"==typeof a&&r&&"object"==typeof r?t[i]=e(a,r,n):t.push(r)}else t[i]=r})),t):Object.keys(r).reduce((function(t,i){var a=r[i];return o.call(t,i)?t[i]=e(t[i],a,n):t[i]=a,t}),a)}}},3209:(e,t,r)=>{"use strict";var n=65536,o=r(2861).Buffer,i=r.g.crypto||r.g.msCrypto;i&&i.getRandomValues?e.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var r=o.allocUnsafe(e);if(e>0)if(e>n)for(var a=0;a<e;a+=n)i.getRandomValues(r.slice(a,a+n));else i.getRandomValues(r);return"function"==typeof t?process.nextTick((function(){t(null,r)})):r}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},6048:e=>{"use strict";var t={};function r(e,r,n){n||(n=Error);var o=function(e){var t,n;function o(t,n,o){return e.call(this,function(e,t,n){return"string"==typeof r?r:r(e,t,n)}(t,n,o))||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,o}(n);o.prototype.name=n.name,o.prototype.code=e,t[e]=o}function n(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}r("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(e,t,r){var o,i,a;if("string"==typeof t&&(i="not ",t.substr(0,4)===i)?(o="must not be",t=t.replace(/^not /,"")):o="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-9,r)===t}(e," argument"))a="The ".concat(e," ").concat(o," ").concat(n(t,"type"));else{var s=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+1>e.length)&&-1!==e.indexOf(".",r)}(e)?"property":"argument";a='The "'.concat(e,'" ').concat(s," ").concat(o," ").concat(n(t,"type"))}return a+". Received type ".concat(typeof r)}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.F=t},5382:(e,t,r)=>{"use strict";var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=c;var o=r(5412),i=r(6708);r(6698)(c,o);for(var a=n(i.prototype),s=0;s<a.length;s++){var l=a[s];c.prototype[l]||(c.prototype[l]=i.prototype[l])}function c(e){if(!(this instanceof c))return new c(e);o.call(this,e),i.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||process.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},3600:(e,t,r)=>{"use strict";e.exports=o;var n=r(4610);function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}r(6698)(o,n),o.prototype._transform=function(e,t,r){r(null,e)}},5412:(e,t,r)=>{"use strict";var n;e.exports=k,k.ReadableState=S,r(7007).EventEmitter;var o,i=function(e,t){return e.listeners(t).length},a=r(345),s=r(8287).Buffer,l=(void 0!==r.g?r.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},c=r(9838);o=c&&c.debuglog?c.debuglog("stream"):function(){};var u,d,h,p=r(2726),f=r(5896),m=r(5291).getHighWaterMark,g=r(6048).F,y=g.ERR_INVALID_ARG_TYPE,v=g.ERR_STREAM_PUSH_AFTER_EOF,b=g.ERR_METHOD_NOT_IMPLEMENTED,x=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(6698)(k,a);var _=f.errorOrDestroy,w=["error","close","destroy","pause","resume"];function S(e,t,o){n=n||r(5382),e=e||{},"boolean"!=typeof o&&(o=t instanceof n),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",o),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(u||(u=r(3141).I),this.decoder=new u(e.encoding),this.encoding=e.encoding)}function k(e){if(n=n||r(5382),!(this instanceof k))return new k(e);var t=this instanceof n;this._readableState=new S(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function T(e,t,r,n,i){o("readableAddChunk",t);var a,c=e._readableState;if(null===t)c.reading=!1,function(e,t){if(o("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?j(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,P(e)))}}(e,c);else if(i||(a=function(e,t){var r,n;return n=t,s.isBuffer(n)||n instanceof l||"string"==typeof t||void 0===t||e.objectMode||(r=new y("chunk",["string","Buffer","Uint8Array"],t)),r}(c,t)),a)_(e,a);else if(c.objectMode||t&&t.length>0)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),n)c.endEmitted?_(e,new x):E(e,c,t,!0);else if(c.ended)_(e,new v);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!r?(t=c.decoder.write(t),c.objectMode||0!==t.length?E(e,c,t,!1):I(e,c)):E(e,c,t,!1)}else n||(c.reading=!1,I(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function E(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&j(e)),I(e,t)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),k.prototype.destroy=f.destroy,k.prototype._undestroy=f.undestroy,k.prototype._destroy=function(e,t){t(e)},k.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=s.from(e,t),t=""),r=!0),T(this,e,t,!1,r)},k.prototype.unshift=function(e){return T(this,e,null,!0,!1)},k.prototype.isPaused=function(){return!1===this._readableState.flowing},k.prototype.setEncoding=function(e){u||(u=r(3141).I);var t=new u(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,o="";null!==n;)o+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==o&&this._readableState.buffer.push(o),this._readableState.length=o.length,this};var C=1073741824;function A(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=C?e=C:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function j(e){var t=e._readableState;o("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(P,e))}function P(e){var t=e._readableState;o("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,F(e)}function I(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(O,e,t))}function O(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(o("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function M(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function R(e){o("readable nexttick read 0"),e.read(0)}function L(e,t){o("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),F(e),t.flowing&&!t.reading&&e.read(0)}function F(e){var t=e._readableState;for(o("flow",t.flowing);t.flowing&&null!==e.read(););}function z(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function D(e){var t=e._readableState;o("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(N,t,e))}function N(e,t){if(o("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function B(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}k.prototype.read=function(e){o("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return o("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?D(this):j(this),null;if(0===(e=A(e,t))&&t.ended)return 0===t.length&&D(this),null;var n,i=t.needReadable;return o("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&o("length less than watermark",i=!0),t.ended||t.reading?o("reading or ended",i=!1):i&&(o("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=A(r,t))),null===(n=e>0?z(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&D(this)),null!==n&&this.emit("data",n),n},k.prototype._read=function(e){_(this,new b("_read()"))},k.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,o("pipe count=%d opts=%j",n.pipesCount,t);var a=t&&!1===t.end||e===process.stdout||e===process.stderr?f:s;function s(){o("onend"),e.end()}n.endEmitted?process.nextTick(a):r.once("end",a),e.on("unpipe",(function t(i,a){o("onunpipe"),i===r&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,o("cleanup"),e.removeListener("close",h),e.removeListener("finish",p),e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",t),r.removeListener("end",s),r.removeListener("end",f),r.removeListener("data",u),c=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}));var l=function(e){return function(){var t=e._readableState;o("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,F(e))}}(r);e.on("drain",l);var c=!1;function u(t){o("ondata");var i=e.write(t);o("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==B(n.pipes,e))&&!c&&(o("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function d(t){o("onerror",t),f(),e.removeListener("error",d),0===i(e,"error")&&_(e,t)}function h(){e.removeListener("finish",p),f()}function p(){o("onfinish"),e.removeListener("close",h),f()}function f(){o("unpipe"),r.unpipe(e)}return r.on("data",u),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",d),e.once("close",h),e.once("finish",p),e.emit("pipe",r),n.flowing||(o("pipe resume"),r.resume()),e},k.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,{hasUnpiped:!1});return this}var a=B(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},k.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,o("on readable",n.length,n.reading),n.length?j(this):n.reading||process.nextTick(R,this))),r},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(e,t){var r=a.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(M,this),r},k.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(M,this),t},k.prototype.resume=function(){var e=this._readableState;return e.flowing||(o("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(L,e,t))}(this,e)),e.paused=!1,this},k.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},k.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(o("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){o("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<w.length;a++)e.on(w[a],this.emit.bind(this,w[a]));return this._read=function(t){o("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=r(2955)),d(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),k._fromList=z,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(k.from=function(e,t){return void 0===h&&(h=r(5157)),h(k,e,t)})},4610:(e,t,r)=>{"use strict";e.exports=u;var n=r(6048).F,o=n.ERR_METHOD_NOT_IMPLEMENTED,i=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,l=r(5382);function c(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new i);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);l.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,r){h(e,t,r)}))}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}r(6698)(u,l),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,r){r(new o("_transform()"))},u.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,(function(e){t(e)}))}},6708:(e,t,r)=>{"use strict";function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t){var r=e.entry;for(e.entry=null;r;){var n=r.callback;t.pendingcb--,n(void 0),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var o;e.exports=k,k.WritableState=S;var i,a={deprecate:r(4643)},s=r(345),l=r(8287).Buffer,c=(void 0!==r.g?r.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},u=r(5896),d=r(5291).getHighWaterMark,h=r(6048).F,p=h.ERR_INVALID_ARG_TYPE,f=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,y=h.ERR_STREAM_DESTROYED,v=h.ERR_STREAM_NULL_VALUES,b=h.ERR_STREAM_WRITE_AFTER_END,x=h.ERR_UNKNOWN_ENCODING,_=u.errorOrDestroy;function w(){}function S(e,t,i){o=o||r(5382),e=e||{},"boolean"!=typeof i&&(i=t instanceof o),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=d(this,e,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if("function"!=typeof o)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,o){--t.pendingcb,r?(process.nextTick(o,n),process.nextTick(P,e,t),e._writableState.errorEmitted=!0,_(e,n)):(o(n),e._writableState.errorEmitted=!0,_(e,n),P(e,t))}(e,r,n,t,o);else{var i=A(r)||e.destroyed;i||r.corked||r.bufferProcessing||!r.bufferedRequest||C(e,r),n?process.nextTick(E,e,r,i,o):E(e,r,i,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function k(e){var t=this instanceof(o=o||r(5382));if(!t&&!i.call(k,this))return new k(e);this._writableState=new S(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),s.call(this)}function T(e,t,r,n,o,i,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function E(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),P(e,t)}function C(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var o=t.bufferedRequestCount,i=new Array(o),a=t.corkedRequestsFree;a.entry=r;for(var s=0,l=!0;r;)i[s]=r,r.isBuf||(l=!1),r=r.next,s+=1;i.allBuffers=l,T(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,d=r.callback;if(T(e,t,!1,t.objectMode?1:c.length,c,u,d),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function A(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function j(e,t){e._final((function(r){t.pendingcb--,r&&_(e,r),t.prefinished=!0,e.emit("prefinish"),P(e,t)}))}function P(e,t){var r=A(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(j,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}r(6698)(k,s),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(i=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(e){return!!i.call(this,e)||this===k&&e&&e._writableState instanceof S}})):i=function(e){return e instanceof this},k.prototype.pipe=function(){_(this,new g)},k.prototype.write=function(e,t,r){var n,o=this._writableState,i=!1,a=!o.objectMode&&(n=e,l.isBuffer(n)||n instanceof c);return a&&!l.isBuffer(e)&&(e=function(e){return l.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof r&&(r=w),o.ending?function(e,t){var r=new b;_(e,r),process.nextTick(t,r)}(this,r):(a||function(e,t,r,n){var o;return null===r?o=new v:"string"==typeof r||t.objectMode||(o=new p("chunk",["string","Buffer"],r)),!o||(_(e,o),process.nextTick(n,o),!1)}(this,o,e,r))&&(o.pendingcb++,i=function(e,t,r,n,o,i){if(!r){var a=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,r)),t}(t,n,o);n!==a&&(r=!0,o="buffer",n=a)}var s=t.objectMode?1:n.length;t.length+=s;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:i,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,s,n,o,i);return c}(this,o,a,e,t,r)),i},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||C(this,e))},k.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new x(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),k.prototype._write=function(e,t,r){r(new f("_write()"))},k.prototype._writev=null,k.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,P(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,n,r),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),k.prototype.destroy=u.destroy,k.prototype._undestroy=u.undestroy,k.prototype._destroy=function(e,t){t(e)}},2955:(e,t,r)=>{"use strict";var n;function o(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(6238),a=Symbol("lastResolve"),s=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),d=Symbol("handlePromise"),h=Symbol("stream");function p(e,t){return{value:e,done:t}}function f(e){var t=e[a];if(null!==t){var r=e[h].read();null!==r&&(e[u]=null,e[a]=null,e[s]=null,t(p(r,!1)))}}function m(e){process.nextTick(f,e)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((o(n={get stream(){return this[h]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(p(void 0,!0));if(this[h].destroyed)return new Promise((function(t,r){process.nextTick((function(){e[l]?r(e[l]):t(p(void 0,!0))}))}));var r,n=this[u];if(n)r=new Promise(function(e,t){return function(r,n){e.then((function(){t[c]?r(p(void 0,!0)):t[d](r,n)}),n)}}(n,this));else{var o=this[h].read();if(null!==o)return Promise.resolve(p(o,!1));r=new Promise(this[d])}return this[u]=r,r}},Symbol.asyncIterator,(function(){return this})),o(n,"return",(function(){var e=this;return new Promise((function(t,r){e[h].destroy(null,(function(e){e?r(e):t(p(void 0,!0))}))}))})),n),g);e.exports=function(e){var t,r=Object.create(y,(o(t={},h,{value:e,writable:!0}),o(t,a,{value:null,writable:!0}),o(t,s,{value:null,writable:!0}),o(t,l,{value:null,writable:!0}),o(t,c,{value:e._readableState.endEmitted,writable:!0}),o(t,d,{value:function(e,t){var n=r[h].read();n?(r[u]=null,r[a]=null,r[s]=null,e(p(n,!1))):(r[a]=e,r[s]=t)},writable:!0}),t));return r[u]=null,i(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[s];return null!==t&&(r[u]=null,r[a]=null,r[s]=null,t(e)),void(r[l]=e)}var n=r[a];null!==n&&(r[u]=null,r[a]=null,r[s]=null,n(p(void 0,!0))),r[c]=!0})),e.on("readable",m.bind(null,r)),r}},2726:(e,t,r)=>{"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}var l=r(8287).Buffer,c=r(5340).inspect,u=c&&c.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r;return t=e,(r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return l.alloc(0);for(var t,r,n,o=l.allocUnsafe(e>>>0),i=this.head,a=0;i;)t=i.data,r=o,n=a,l.prototype.copy.call(t,r,n),a+=i.data.length,i=i.next;return o}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var o=t.data,i=e>o.length?o.length:e;if(i===o.length?n+=o:n+=o.slice(0,e),0==(e-=i)){i===o.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=o.slice(i));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=l.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var o=r.data,i=e>o.length?o.length:e;if(o.copy(t,t.length-e,0,i),0==(e-=i)){i===o.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=o.slice(i));break}++n}return this.length-=n,t}},{key:u,value:function(e,t){return c(this,o(o({},t),{},{depth:0,customInspect:!1}))}}])&&a(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},5896:e=>{"use strict";function t(e,t){n(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function n(e,t){e.emit("error",t)}e.exports={destroy:function(e,o){var i=this,a=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return a||s?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(n,this,e)):process.nextTick(n,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!o&&e?i._writableState?i._writableState.errorEmitted?process.nextTick(r,i):(i._writableState.errorEmitted=!0,process.nextTick(t,i,e)):process.nextTick(t,i,e):o?(process.nextTick(r,i),o(e)):process.nextTick(r,i)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}},6238:(e,t,r)=>{"use strict";var n=r(6048).F.ERR_STREAM_PREMATURE_CLOSE;function o(){}e.exports=function e(t,r,i){if("function"==typeof r)return e(t,null,r);r||(r={}),i=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];e.apply(this,n)}}}(i||o);var a=r.readable||!1!==r.readable&&t.readable,s=r.writable||!1!==r.writable&&t.writable,l=function(){t.writable||u()},c=t._writableState&&t._writableState.finished,u=function(){s=!1,c=!0,a||i.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){a=!1,d=!0,s||i.call(t)},p=function(e){i.call(t,e)},f=function(){var e;return a&&!d?(t._readableState&&t._readableState.ended||(e=new n),i.call(t,e)):s&&!c?(t._writableState&&t._writableState.ended||(e=new n),i.call(t,e)):void 0},m=function(){t.req.on("finish",u)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",u),t.on("abort",f),t.req?m():t.on("request",m)):s&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",h),t.on("finish",u),!1!==r.error&&t.on("error",p),t.on("close",f),function(){t.removeListener("complete",u),t.removeListener("abort",f),t.removeListener("request",m),t.req&&t.req.removeListener("finish",u),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",u),t.removeListener("end",h),t.removeListener("error",p),t.removeListener("close",f)}}},5157:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},7758:(e,t,r)=>{"use strict";var n,o=r(6048).F,i=o.ERR_MISSING_ARGS,a=o.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function l(e){e()}function c(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var u,d=function(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new i("streams");var h=t.map((function(e,o){var i=o<t.length-1;return function(e,t,o,i){i=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(i);var s=!1;e.on("close",(function(){s=!0})),void 0===n&&(n=r(6238)),n(e,{readable:t,writable:o},(function(e){if(e)return i(e);s=!0,i()}));var l=!1;return function(t){if(!s&&!l)return l=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void i(t||new a("pipe"))}}(e,i,o>0,(function(e){u||(u=e),e&&h.forEach(l),i||(h.forEach(l),d(u))}))}));return t.reduce(c)}},5291:(e,t,r)=>{"use strict";var n=r(6048).F.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,o){var i=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,o,r);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new n(o?r:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}}},345:(e,t,r)=>{e.exports=r(7007).EventEmitter},8399:(e,t,r)=>{(t=e.exports=r(5412)).Stream=t,t.Readable=t,t.Writable=r(6708),t.Duplex=r(5382),t.Transform=r(4610),t.PassThrough=r(3600),t.finished=r(6238),t.pipeline=r(7758)},2861:(e,t,r)=>{var n=r(8287),o=n.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return o(e,t,r)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=a),a.prototype=Object.create(o.prototype),i(o,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=o(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},6897:(e,t,r)=>{"use strict";var n=r(453),o=r(41),i=r(592)(),a=r(5795),s=r(9675),l=n("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new s("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||l(t)!==t)throw new s("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,c=!0;if("length"in e&&a){var u=a(e,"length");u&&!u.configurable&&(n=!1),u&&!u.writable&&(c=!1)}return(n||c||!r)&&(i?o(e,"length",t,!0,!0):o(e,"length",t)),e}},392:(e,t,r)=>{var n=r(2861).Buffer;function o(e,t){this._block=n.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}o.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=n.from(e,t));for(var r=this._block,o=this._blockSize,i=e.length,a=this._len,s=0;s<i;){for(var l=a%o,c=Math.min(i-s,o-l),u=0;u<c;u++)r[l+u]=e[s+u];s+=c,(a+=c)%o==0&&this._update(r)}return this._len+=i,this},o.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,o=(r-n)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var i=this._hash();return e?i.toString(e):i},o.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=o},2802:(e,t,r)=>{var n=e.exports=function(e){e=e.toLowerCase();var t=n[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};n.sha=r(7816),n.sha1=r(3737),n.sha224=r(6710),n.sha256=r(4107),n.sha384=r(2827),n.sha512=r(2890)},7816:(e,t,r)=>{var n=r(6698),o=r(392),i=r(2861).Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function l(){this.init(),this._w=s,o.call(this,64,56)}function c(e){return e<<30|e>>>2}function u(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}n(l,o),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,o=0|this._b,i=0|this._c,s=0|this._d,l=0|this._e,d=0;d<16;++d)r[d]=e.readInt32BE(4*d);for(;d<80;++d)r[d]=r[d-3]^r[d-8]^r[d-14]^r[d-16];for(var h=0;h<80;++h){var p=~~(h/20),f=0|((t=n)<<5|t>>>27)+u(p,o,i,s)+l+r[h]+a[p];l=s,s=i,i=c(o),o=n,n=f}this._a=n+this._a|0,this._b=o+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=l+this._e|0},l.prototype._hash=function(){var e=i.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=l},3737:(e,t,r)=>{var n=r(6698),o=r(392),i=r(2861).Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function l(){this.init(),this._w=s,o.call(this,64,56)}function c(e){return e<<5|e>>>27}function u(e){return e<<30|e>>>2}function d(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}n(l,o),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,o=0|this._b,i=0|this._c,s=0|this._d,l=0|this._e,h=0;h<16;++h)r[h]=e.readInt32BE(4*h);for(;h<80;++h)r[h]=(t=r[h-3]^r[h-8]^r[h-14]^r[h-16])<<1|t>>>31;for(var p=0;p<80;++p){var f=~~(p/20),m=c(n)+d(f,o,i,s)+l+r[p]+a[f]|0;l=s,s=i,i=u(o),o=n,n=m}this._a=n+this._a|0,this._b=o+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=l+this._e|0},l.prototype._hash=function(){var e=i.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=l},6710:(e,t,r)=>{var n=r(6698),o=r(4107),i=r(392),a=r(2861).Buffer,s=new Array(64);function l(){this.init(),this._w=s,i.call(this,64,56)}n(l,o),l.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},l.prototype._hash=function(){var e=a.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=l},4107:(e,t,r)=>{var n=r(6698),o=r(392),i=r(2861).Buffer,a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function l(){this.init(),this._w=s,o.call(this,64,56)}function c(e,t,r){return r^e&(t^r)}function u(e,t,r){return e&t|r&(e|t)}function d(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function h(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function p(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}n(l,o),l.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},l.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,o=0|this._b,i=0|this._c,s=0|this._d,l=0|this._e,f=0|this._f,m=0|this._g,g=0|this._h,y=0;y<16;++y)r[y]=e.readInt32BE(4*y);for(;y<64;++y)r[y]=0|(((t=r[y-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+r[y-7]+p(r[y-15])+r[y-16];for(var v=0;v<64;++v){var b=g+h(l)+c(l,f,m)+a[v]+r[v]|0,x=d(n)+u(n,o,i)|0;g=m,m=f,f=l,l=s+b|0,s=i,i=o,o=n,n=b+x|0}this._a=n+this._a|0,this._b=o+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=l+this._e|0,this._f=f+this._f|0,this._g=m+this._g|0,this._h=g+this._h|0},l.prototype._hash=function(){var e=i.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=l},2827:(e,t,r)=>{var n=r(6698),o=r(2890),i=r(392),a=r(2861).Buffer,s=new Array(160);function l(){this.init(),this._w=s,i.call(this,128,112)}n(l,o),l.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},l.prototype._hash=function(){var e=a.allocUnsafe(48);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},e.exports=l},2890:(e,t,r)=>{var n=r(6698),o=r(392),i=r(2861).Buffer,a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function l(){this.init(),this._w=s,o.call(this,128,112)}function c(e,t,r){return r^e&(t^r)}function u(e,t,r){return e&t|r&(e|t)}function d(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function h(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function p(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function f(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function m(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function g(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function y(e,t){return e>>>0<t>>>0?1:0}n(l,o),l.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},l.prototype._update=function(e){for(var t=this._w,r=0|this._ah,n=0|this._bh,o=0|this._ch,i=0|this._dh,s=0|this._eh,l=0|this._fh,v=0|this._gh,b=0|this._hh,x=0|this._al,_=0|this._bl,w=0|this._cl,S=0|this._dl,k=0|this._el,T=0|this._fl,E=0|this._gl,C=0|this._hl,A=0;A<32;A+=2)t[A]=e.readInt32BE(4*A),t[A+1]=e.readInt32BE(4*A+4);for(;A<160;A+=2){var j=t[A-30],P=t[A-30+1],I=p(j,P),O=f(P,j),M=m(j=t[A-4],P=t[A-4+1]),R=g(P,j),L=t[A-14],F=t[A-14+1],z=t[A-32],D=t[A-32+1],N=O+F|0,B=I+L+y(N,O)|0;B=(B=B+M+y(N=N+R|0,R)|0)+z+y(N=N+D|0,D)|0,t[A]=B,t[A+1]=N}for(var U=0;U<160;U+=2){B=t[U],N=t[U+1];var V=u(r,n,o),W=u(x,_,w),q=d(r,x),H=d(x,r),G=h(s,k),K=h(k,s),X=a[U],Z=a[U+1],Y=c(s,l,v),J=c(k,T,E),$=C+K|0,Q=b+G+y($,C)|0;Q=(Q=(Q=Q+Y+y($=$+J|0,J)|0)+X+y($=$+Z|0,Z)|0)+B+y($=$+N|0,N)|0;var ee=H+W|0,te=q+V+y(ee,H)|0;b=v,C=E,v=l,E=T,l=s,T=k,s=i+Q+y(k=S+$|0,S)|0,i=o,S=w,o=n,w=_,n=r,_=x,r=Q+te+y(x=$+ee|0,$)|0}this._al=this._al+x|0,this._bl=this._bl+_|0,this._cl=this._cl+w|0,this._dl=this._dl+S|0,this._el=this._el+k|0,this._fl=this._fl+T|0,this._gl=this._gl+E|0,this._hl=this._hl+C|0,this._ah=this._ah+r+y(this._al,x)|0,this._bh=this._bh+n+y(this._bl,_)|0,this._ch=this._ch+o+y(this._cl,w)|0,this._dh=this._dh+i+y(this._dl,S)|0,this._eh=this._eh+s+y(this._el,k)|0,this._fh=this._fh+l+y(this._fl,T)|0,this._gh=this._gh+v+y(this._gl,E)|0,this._hh=this._hh+b+y(this._hl,C)|0},l.prototype._hash=function(){var e=i.allocUnsafe(64);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},e.exports=l},920:(e,t,r)=>{"use strict";var n=r(453),o=r(8075),i=r(8859),a=r(9675),s=n("%WeakMap%",!0),l=n("%Map%",!0),c=o("WeakMap.prototype.get",!0),u=o("WeakMap.prototype.set",!0),d=o("WeakMap.prototype.has",!0),h=o("Map.prototype.get",!0),p=o("Map.prototype.set",!0),f=o("Map.prototype.has",!0),m=function(e,t){for(var r,n=e;null!==(r=n.next);n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r};e.exports=function(){var e,t,r,n={assert:function(e){if(!n.has(e))throw new a("Side channel does not contain "+i(e))},get:function(n){if(s&&n&&("object"==typeof n||"function"==typeof n)){if(e)return c(e,n)}else if(l){if(t)return h(t,n)}else if(r)return function(e,t){var r=m(e,t);return r&&r.value}(r,n)},has:function(n){if(s&&n&&("object"==typeof n||"function"==typeof n)){if(e)return d(e,n)}else if(l){if(t)return f(t,n)}else if(r)return function(e,t){return!!m(e,t)}(r,n);return!1},set:function(n,o){s&&n&&("object"==typeof n||"function"==typeof n)?(e||(e=new s),u(e,n,o)):l?(t||(t=new l),p(t,n,o)):(r||(r={key:{},next:null}),function(e,t,r){var n=m(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}}(r,n,o))}};return n}},1568:(e,t,r)=>{var n=r(5537),o=r(6917),i=r(7510),a=r(6866),s=r(8835),l=t;l.request=function(e,t){e="string"==typeof e?s.parse(e):i(e);var o=-1===r.g.location.protocol.search(/^https?:$/)?"http:":"",a=e.protocol||o,l=e.hostname||e.host,c=e.port,u=e.path||"/";l&&-1!==l.indexOf(":")&&(l="["+l+"]"),e.url=(l?a+"//"+l:"")+(c?":"+c:"")+u,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var d=new n(e);return t&&d.on("response",t),d},l.get=function(e,t){var r=l.request(e,t);return r.end(),r},l.ClientRequest=n,l.IncomingMessage=o.IncomingMessage,l.Agent=function(){},l.Agent.defaultMaxSockets=4,l.globalAgent=new l.Agent,l.STATUS_CODES=a,l.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]},6688:(e,t,r)=>{var n;function o(){if(void 0!==n)return n;if(r.g.XMLHttpRequest){n=new r.g.XMLHttpRequest;try{n.open("GET",r.g.XDomainRequest?"/":"https://example.com")}catch(e){n=null}}else n=null;return n}function i(e){var t=o();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}function a(e){return"function"==typeof e}t.fetch=a(r.g.fetch)&&a(r.g.ReadableStream),t.writableStream=a(r.g.WritableStream),t.abortController=a(r.g.AbortController),t.arraybuffer=t.fetch||i("arraybuffer"),t.msstream=!t.fetch&&i("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&i("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||!!o()&&a(o().overrideMimeType),n=null},5537:(e,t,r)=>{var n=r(8287).Buffer,o=r(6688),i=r(6698),a=r(6917),s=r(8399),l=a.IncomingMessage,c=a.readyStates,u=e.exports=function(e){var t,r=this;s.Writable.call(r),r._opts=e,r._body=[],r._headers={},e.auth&&r.setHeader("Authorization","Basic "+n.from(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(t){r.setHeader(t,e.headers[t])}));var i=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!o.abortController)i=!1,t=!0;else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!o.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}r._mode=function(e,t){return o.fetch&&t?"fetch":o.mozchunkedarraybuffer?"moz-chunked-arraybuffer":o.msstream?"ms-stream":o.arraybuffer&&e?"arraybuffer":"text"}(t,i),r._fetchTimer=null,r._socketTimeout=null,r._socketTimer=null,r.on("finish",(function(){r._onFinish()}))};i(u,s.Writable),u.prototype.setHeader=function(e,t){var r=e.toLowerCase();-1===d.indexOf(r)&&(this._headers[r]={name:e,value:t})},u.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},u.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},u.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts;"timeout"in t&&0!==t.timeout&&e.setTimeout(t.timeout);var n=e._headers,i=null;"GET"!==t.method&&"HEAD"!==t.method&&(i=new Blob(e._body,{type:(n["content-type"]||{}).value||""}));var a=[];if(Object.keys(n).forEach((function(e){var t=n[e].name,r=n[e].value;Array.isArray(r)?r.forEach((function(e){a.push([t,e])})):a.push([t,r])})),"fetch"===e._mode){var s=null;if(o.abortController){var l=new AbortController;s=l.signal,e._fetchAbortController=l,"requestTimeout"in t&&0!==t.requestTimeout&&(e._fetchTimer=r.g.setTimeout((function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()}),t.requestTimeout))}r.g.fetch(e._opts.url,{method:e._opts.method,headers:a,body:i||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin",signal:s}).then((function(t){e._fetchResponse=t,e._resetTimers(!1),e._connect()}),(function(t){e._resetTimers(!0),e._destroyed||e.emit("error",t)}))}else{var u=e._xhr=new r.g.XMLHttpRequest;try{u.open(e._opts.method,e._opts.url,!0)}catch(t){return void process.nextTick((function(){e.emit("error",t)}))}"responseType"in u&&(u.responseType=e._mode),"withCredentials"in u&&(u.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in u&&u.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in t&&(u.timeout=t.requestTimeout,u.ontimeout=function(){e.emit("requestTimeout")}),a.forEach((function(e){u.setRequestHeader(e[0],e[1])})),e._response=null,u.onreadystatechange=function(){switch(u.readyState){case c.LOADING:case c.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(u.onprogress=function(){e._onXHRProgress()}),u.onerror=function(){e._destroyed||(e._resetTimers(!0),e.emit("error",new Error("XHR error")))};try{u.send(i)}catch(t){return void process.nextTick((function(){e.emit("error",t)}))}}}},u.prototype._onXHRProgress=function(){var e=this;e._resetTimers(!1),function(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}}(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress(e._resetTimers.bind(e)))},u.prototype._connect=function(){var e=this;e._destroyed||(e._response=new l(e._xhr,e._fetchResponse,e._mode,e._resetTimers.bind(e)),e._response.on("error",(function(t){e.emit("error",t)})),e.emit("response",e._response))},u.prototype._write=function(e,t,r){this._body.push(e),r()},u.prototype._resetTimers=function(e){var t=this;r.g.clearTimeout(t._socketTimer),t._socketTimer=null,e?(r.g.clearTimeout(t._fetchTimer),t._fetchTimer=null):t._socketTimeout&&(t._socketTimer=r.g.setTimeout((function(){t.emit("timeout")}),t._socketTimeout))},u.prototype.abort=u.prototype.destroy=function(e){var t=this;t._destroyed=!0,t._resetTimers(!0),t._response&&(t._response._destroyed=!0),t._xhr?t._xhr.abort():t._fetchAbortController&&t._fetchAbortController.abort(),e&&t.emit("error",e)},u.prototype.end=function(e,t,r){"function"==typeof e&&(r=e,e=void 0),s.Writable.prototype.end.call(this,e,t,r)},u.prototype.setTimeout=function(e,t){var r=this;t&&r.once("timeout",t),r._socketTimeout=e,r._resetTimers(!1)},u.prototype.flushHeaders=function(){},u.prototype.setNoDelay=function(){},u.prototype.setSocketKeepAlive=function(){};var d=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]},6917:(e,t,r)=>{var n=r(8287).Buffer,o=r(6688),i=r(6698),a=r(8399),s=t.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l=t.IncomingMessage=function(e,t,r,i){var s=this;if(a.Readable.call(s),s._mode=r,s.headers={},s.rawHeaders=[],s.trailers={},s.rawTrailers=[],s.on("end",(function(){process.nextTick((function(){s.emit("close")}))})),"fetch"===r){if(s._fetchResponse=t,s.url=t.url,s.statusCode=t.status,s.statusMessage=t.statusText,t.headers.forEach((function(e,t){s.headers[t.toLowerCase()]=e,s.rawHeaders.push(t,e)})),o.writableStream){var l=new WritableStream({write:function(e){return i(!1),new Promise((function(t,r){s._destroyed?r():s.push(n.from(e))?t():s._resumeFetch=t}))},close:function(){i(!0),s._destroyed||s.push(null)},abort:function(e){i(!0),s._destroyed||s.emit("error",e)}});try{return void t.body.pipeTo(l).catch((function(e){i(!0),s._destroyed||s.emit("error",e)}))}catch(e){}}var c=t.body.getReader();!function e(){c.read().then((function(t){s._destroyed||(i(t.done),t.done?s.push(null):(s.push(n.from(t.value)),e()))})).catch((function(e){i(!0),s._destroyed||s.emit("error",e)}))}()}else if(s._xhr=e,s._pos=0,s.url=e.responseURL,s.statusCode=e.status,s.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===s.headers[r]&&(s.headers[r]=[]),s.headers[r].push(t[2])):void 0!==s.headers[r]?s.headers[r]+=", "+t[2]:s.headers[r]=t[2],s.rawHeaders.push(t[1],t[2])}})),s._charset="x-user-defined",!o.overrideMimeType){var u=s.rawHeaders["mime-type"];if(u){var d=u.match(/;\s*charset=([^;])(;|$)/);d&&(s._charset=d[1].toLowerCase())}s._charset||(s._charset="utf-8")}};i(l,a.Readable),l.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},l.prototype._onXHRProgress=function(e){var t=this,o=t._xhr,i=null;switch(t._mode){case"text":if((i=o.responseText).length>t._pos){var a=i.substr(t._pos);if("x-user-defined"===t._charset){for(var l=n.alloc(a.length),c=0;c<a.length;c++)l[c]=255&a.charCodeAt(c);t.push(l)}else t.push(a,t._charset);t._pos=i.length}break;case"arraybuffer":if(o.readyState!==s.DONE||!o.response)break;i=o.response,t.push(n.from(new Uint8Array(i)));break;case"moz-chunked-arraybuffer":if(i=o.response,o.readyState!==s.LOADING||!i)break;t.push(n.from(new Uint8Array(i)));break;case"ms-stream":if(i=o.response,o.readyState!==s.LOADING)break;var u=new r.g.MSStreamReader;u.onprogress=function(){u.result.byteLength>t._pos&&(t.push(n.from(new Uint8Array(u.result.slice(t._pos)))),t._pos=u.result.byteLength)},u.onload=function(){e(!0),t.push(null)},u.readAsArrayBuffer(i)}t._xhr.readyState===s.DONE&&"ms-stream"!==t._mode&&(e(!0),t.push(null))}},3141:(e,t,r)=>{"use strict";var n=r(2861).Buffer,o=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,r=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function u(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.I=i,i.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},i.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var o=a(t[n]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--n<r||-2===o?0:(o=a(t[n]))>=0?(o>0&&(e.lastNeed=o-2),o):--n<r||-2===o?0:(o=a(t[n]))>=0?(o>0&&(2===o?o=0:e.lastNeed=o-3),o):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},1293:(e,t,r)=>{var n=r(5546),o=r(2708);e.exports={parse:function(e){var t=n.parse(e.toString());return o.compile(t)}}},2708:e=>{"use strict";e.exports={compile:function(e){var t=[],r=[],n="",o=Object.create(null),i=o;return function(e){for(var t,r=0;r<e.length;r++)switch((t=e[r]).type){case"Assign":s(t);break;case"ObjectPath":d(t);break;case"ArrayPath":h(t)}return o}(e);function a(e,t,r){var n=new Error(e);throw n.line=t,n.column=r,n}function s(e){var o,s=e.key,u=e.value,d=e.line,h=e.column;o=n?n+"."+s:s,void 0!==i[s]&&a("Cannot redefine existing key '"+o+"'.",d,h),i[s]=c(u),l(o)||(t.push(o),r.push(o))}function l(e){return-1!==t.indexOf(e)}function c(e){return"Array"===e.type?function(e){for(var t=null,r=0;r<e.length;r++){var n=e[r];null===t?t=n.type:n.type!==t&&a("Cannot add value of type "+n.type+" to array of type "+t+".",n.line,n.column)}return e.map(c)}(e.value):"InlineTable"===e.type?u(e.value):e.value}function u(e){for(var t=Object.create(null),r=0;r<e.length;r++){var n=e[r];"InlineTable"===n.value.type?t[n.key]=u(n.value.value):"InlineTableValue"===n.type&&(t[n.key]=c(n.value))}return t}function d(e){var r=e.value,s=r.map(f).join("."),c=e.line,u=e.column;l(s)&&a("Cannot redefine existing key '"+r+"'.",c,u),t.push(s),i=p(o,r,Object.create(null),c,u),n=r}function h(e){var r=e.value,s=r.map(f).join("."),c=e.line,u=e.column;if(l(s)||t.push(s),(t=t.filter((function(e){return 0!==e.indexOf(s)}))).push(s),i=p(o,r,[],c,u),n=s,i instanceof Array){var d=Object.create(null);i.push(d),i=d}else a("Cannot redefine existing key '"+r+"'.",c,u)}function p(e,t,n,o,i){for(var s=[],l="",c=(t.join("."),e),u=0;u<t.length;u++){var d=t[u];s.push(d),l=s.join("."),void 0===c[d]?u===t.length-1?c[d]=n:c[d]=Object.create(null):u!==t.length-1&&r.indexOf(l)>-1&&a("Cannot redefine existing key '"+l+"'.",o,i),(c=c[d])instanceof Array&&c.length&&u<t.length-1&&(c=c[c.length-1])}return c}function f(e){return e.indexOf(".")>-1?'"'+e+'"':e}}}},5546:e=>{e.exports=function(){function e(e,t,r,n,o,i){this.message=e,this.expected=t,this.found=r,this.offset=n,this.line=o,this.column=i,this.name="SyntaxError"}return function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(e,Error),{SyntaxError:e,parse:function(t){var r,n=arguments.length>1?arguments[1]:{},o={},i={start:Mt},a=Mt,s=function(){return dr},l=o,c="#",u={type:"literal",value:"#",description:'"#"'},d=void 0,h={type:"any",description:"any character"},p="[",f={type:"literal",value:"[",description:'"["'},m="]",g={type:"literal",value:"]",description:'"]"'},y=function(e){hr(pr("ObjectPath",e,jt,Pt))},v=function(e){hr(pr("ArrayPath",e,jt,Pt))},b=function(e,t){return e.concat(t)},x=function(e){return[e]},_=function(e){return e},w=".",S={type:"literal",value:".",description:'"."'},k="=",T={type:"literal",value:"=",description:'"="'},E=function(e,t){hr(pr("Assign",t,jt,Pt,e))},C=function(e){return e.join("")},A=function(e){return e.value},j='"""',P={type:"literal",value:'"""',description:'"\\"\\"\\""'},I=null,O=function(e){return pr("String",e.join(""),jt,Pt)},M='"',R={type:"literal",value:'"',description:'"\\""'},L="'''",F={type:"literal",value:"'''",description:"\"'''\""},z="'",D={type:"literal",value:"'",description:'"\'"'},N=function(e){return e},B=function(e){return e},U="\\",V={type:"literal",value:"\\",description:'"\\\\"'},W=function(){return""},q="e",H={type:"literal",value:"e",description:'"e"'},G="E",K={type:"literal",value:"E",description:'"E"'},X=function(e,t){return pr("Float",parseFloat(e+"e"+t),jt,Pt)},Z=function(e){return pr("Float",parseFloat(e),jt,Pt)},Y="+",J={type:"literal",value:"+",description:'"+"'},$=function(e){return e.join("")},Q="-",ee={type:"literal",value:"-",description:'"-"'},te=function(e){return"-"+e.join("")},re=function(e){return pr("Integer",parseInt(e,10),jt,Pt)},ne="true",oe={type:"literal",value:"true",description:'"true"'},ie=function(){return pr("Boolean",!0,jt,Pt)},ae="false",se={type:"literal",value:"false",description:'"false"'},le=function(){return pr("Boolean",!1,jt,Pt)},ce=function(){return pr("Array",[],jt,Pt)},ue=function(e){return pr("Array",e?[e]:[],jt,Pt)},de=function(e){return pr("Array",e,jt,Pt)},he=function(e,t){return pr("Array",e.concat(t),jt,Pt)},pe=function(e){return e},fe=",",me={type:"literal",value:",",description:'","'},ge="{",ye={type:"literal",value:"{",description:'"{"'},ve="}",be={type:"literal",value:"}",description:'"}"'},xe=function(e){return pr("InlineTable",e,jt,Pt)},_e=function(e,t){return pr("InlineTableValue",t,jt,Pt,e)},we=function(e){return"."+e},Se=function(e){return e.join("")},ke=":",Te={type:"literal",value:":",description:'":"'},Ee=function(e){return e.join("")},Ce="T",Ae={type:"literal",value:"T",description:'"T"'},je="Z",Pe={type:"literal",value:"Z",description:'"Z"'},Ie=function(e,t){return pr("Date",new Date(e+"T"+t+"Z"),jt,Pt)},Oe=function(e,t){return pr("Date",new Date(e+"T"+t),jt,Pt)},Me=/^[ \t]/,Re={type:"class",value:"[ \\t]",description:"[ \\t]"},Le="\n",Fe={type:"literal",value:"\n",description:'"\\n"'},ze="\r",De={type:"literal",value:"\r",description:'"\\r"'},Ne=/^[0-9a-f]/i,Be={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},Ue=/^[0-9]/,Ve={type:"class",value:"[0-9]",description:"[0-9]"},We="_",qe={type:"literal",value:"_",description:'"_"'},He=function(){return""},Ge=/^[A-Za-z0-9_\-]/,Ke={type:"class",value:"[A-Za-z0-9_\\-]",description:"[A-Za-z0-9_\\-]"},Xe=function(e){return e.join("")},Ze='\\"',Ye={type:"literal",value:'\\"',description:'"\\\\\\""'},Je=function(){return'"'},$e="\\\\",Qe={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},et=function(){return"\\"},tt="\\b",rt={type:"literal",value:"\\b",description:'"\\\\b"'},nt=function(){return"\b"},ot="\\t",it={type:"literal",value:"\\t",description:'"\\\\t"'},at=function(){return"\t"},st="\\n",lt={type:"literal",value:"\\n",description:'"\\\\n"'},ct=function(){return"\n"},ut="\\f",dt={type:"literal",value:"\\f",description:'"\\\\f"'},ht=function(){return"\f"},pt="\\r",ft={type:"literal",value:"\\r",description:'"\\\\r"'},mt=function(){return"\r"},gt="\\U",yt={type:"literal",value:"\\U",description:'"\\\\U"'},vt=function(e){return function(e){var t=parseInt("0x"+e);if(!(!isFinite(t)||Math.floor(t)!=t||t<0||t>1114111||t>55295&&t<57344))return function(){var e,t,r=[],n=-1,o=arguments.length;if(!o)return"";for(var i="";++n<o;){var a=Number(arguments[n]);a<=65535?r.push(a):(e=55296+((a-=65536)>>10),t=a%1024+56320,r.push(e,t)),(n+1==o||r.length>16384)&&(i+=String.fromCharCode.apply(null,r),r.length=0)}return i}(t);!function(e){var t=new Error(e);throw t.line=undefined,t.column=undefined,t}("Invalid Unicode escape code: "+e)}(e.join(""))},bt="\\u",xt={type:"literal",value:"\\u",description:'"\\\\u"'},_t=0,wt=0,St=0,kt={line:1,column:1,seenCR:!1},Tt=0,Et=[],Ct=0,At={};if("startRule"in n){if(!(n.startRule in i))throw new Error("Can't start parsing from rule \""+n.startRule+'".');a=i[n.startRule]}function jt(){return It(wt).line}function Pt(){return It(wt).column}function It(e){return St!==e&&(St>e&&(St=0,kt={line:1,column:1,seenCR:!1}),function(e,r,n){var o,i;for(o=r;o<n;o++)"\n"===(i=t.charAt(o))?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}(kt,St,e),St=e),kt}function Ot(e){_t<Tt||(_t>Tt&&(Tt=_t,Et=[]),Et.push(e))}function Mt(){var e,t,r,n=49*_t+0,i=At[n];if(i)return _t=i.nextPos,i.result;for(e=_t,t=[],r=Rt();r!==o;)t.push(r),r=Rt();return t!==o&&(wt=e,t=s()),e=t,At[n]={nextPos:_t,result:e},e}function Rt(){var e,r,n,i,a,s,c,u=49*_t+1,d=At[u];if(d)return _t=d.nextPos,d.result;for(e=_t,r=[],n=rr();n!==o;)r.push(n),n=rr();if(r!==o)if(n=function(){var e,r=49*_t+2,n=At[r];return n?(_t=n.nextPos,n.result):((e=Lt())===o&&(e=function(){var e,r,n,i,a,s,c=49*_t+4,u=At[c];if(u)return _t=u.nextPos,u.result;if(e=_t,91===t.charCodeAt(_t)?(r=p,_t++):(r=o,0===Ct&&Ot(f)),r!==o){for(n=[],i=rr();i!==o;)n.push(i),i=rr();if(n!==o)if((i=Ft())!==o){for(a=[],s=rr();s!==o;)a.push(s),s=rr();a!==o?(93===t.charCodeAt(_t)?(s=m,_t++):(s=o,0===Ct&&Ot(g)),s!==o?(wt=e,e=r=y(i)):(_t=e,e=l)):(_t=e,e=l)}else _t=e,e=l;else _t=e,e=l}else _t=e,e=l;return At[c]={nextPos:_t,result:e},e}(),e===o&&(e=function(){var e,r,n,i,a,s,c,u,d=49*_t+5,h=At[d];if(h)return _t=h.nextPos,h.result;if(e=_t,91===t.charCodeAt(_t)?(r=p,_t++):(r=o,0===Ct&&Ot(f)),r!==o)if(91===t.charCodeAt(_t)?(n=p,_t++):(n=o,0===Ct&&Ot(f)),n!==o){for(i=[],a=rr();a!==o;)i.push(a),a=rr();if(i!==o)if((a=Ft())!==o){for(s=[],c=rr();c!==o;)s.push(c),c=rr();s!==o?(93===t.charCodeAt(_t)?(c=m,_t++):(c=o,0===Ct&&Ot(g)),c!==o?(93===t.charCodeAt(_t)?(u=m,_t++):(u=o,0===Ct&&Ot(g)),u!==o?(wt=e,e=r=v(a)):(_t=e,e=l)):(_t=e,e=l)):(_t=e,e=l)}else _t=e,e=l;else _t=e,e=l}else _t=e,e=l;else _t=e,e=l;return At[d]={nextPos:_t,result:e},e}(),e===o&&(e=function(){var e,r,n,i,a,s,c=49*_t+9,u=At[c];if(u)return _t=u.nextPos,u.result;if(e=_t,(r=Nt())!==o){for(n=[],i=rr();i!==o;)n.push(i),i=rr();if(n!==o)if(61===t.charCodeAt(_t)?(i=k,_t++):(i=o,0===Ct&&Ot(T)),i!==o){for(a=[],s=rr();s!==o;)a.push(s),s=rr();a!==o&&(s=Ut())!==o?(wt=e,e=r=E(r,s)):(_t=e,e=l)}else _t=e,e=l;else _t=e,e=l}else _t=e,e=l;if(e===o)if(e=_t,(r=Bt())!==o){for(n=[],i=rr();i!==o;)n.push(i),i=rr();if(n!==o)if(61===t.charCodeAt(_t)?(i=k,_t++):(i=o,0===Ct&&Ot(T)),i!==o){for(a=[],s=rr();s!==o;)a.push(s),s=rr();a!==o&&(s=Ut())!==o?(wt=e,e=r=E(r,s)):(_t=e,e=l)}else _t=e,e=l;else _t=e,e=l}else _t=e,e=l;return At[c]={nextPos:_t,result:e},e}()))),At[r]={nextPos:_t,result:e},e)}(),n!==o){for(i=[],a=rr();a!==o;)i.push(a),a=rr();if(i!==o){for(a=[],s=Lt();s!==o;)a.push(s),s=Lt();if(a!==o){if(s=[],(c=nr())!==o)for(;c!==o;)s.push(c),c=nr();else s=l;s===o&&(s=ir()),s!==o?e=r=[r,n,i,a,s]:(_t=e,e=l)}else _t=e,e=l}else _t=e,e=l}else _t=e,e=l;else _t=e,e=l;if(e===o){if(e=_t,r=[],(n=rr())!==o)for(;n!==o;)r.push(n),n=rr();else r=l;if(r!==o){if(n=[],(i=nr())!==o)for(;i!==o;)n.push(i),i=nr();else n=l;n===o&&(n=ir()),n!==o?e=r=[r,n]:(_t=e,e=l)}else _t=e,e=l;e===o&&(e=nr())}return At[u]={nextPos:_t,result:e},e}function Lt(){var e,r,n,i,a,s,p=49*_t+3,f=At[p];if(f)return _t=f.nextPos,f.result;if(e=_t,35===t.charCodeAt(_t)?(r=c,_t++):(r=o,0===Ct&&Ot(u)),r!==o){for(n=[],i=_t,a=_t,Ct++,(s=nr())===o&&(s=ir()),Ct--,s===o?a=d:(_t=a,a=l),a!==o?(t.length>_t?(s=t.charAt(_t),_t++):(s=o,0===Ct&&Ot(h)),s!==o?i=a=[a,s]:(_t=i,i=l)):(_t=i,i=l);i!==o;)n.push(i),i=_t,a=_t,Ct++,(s=nr())===o&&(s=ir()),Ct--,s===o?a=d:(_t=a,a=l),a!==o?(t.length>_t?(s=t.charAt(_t),_t++):(s=o,0===Ct&&Ot(h)),s!==o?i=a=[a,s]:(_t=i,i=l)):(_t=i,i=l);n!==o?e=r=[r,n]:(_t=e,e=l)}else _t=e,e=l;return At[p]={nextPos:_t,result:e},e}function Ft(){var e,t,r,n=49*_t+6,i=At[n];if(i)return _t=i.nextPos,i.result;if(e=_t,t=[],(r=Dt())!==o)for(;r!==o;)t.push(r),r=Dt();else t=l;return t!==o&&(r=zt())!==o?(wt=e,e=t=b(t,r)):(_t=e,e=l),e===o&&(e=_t,(t=zt())!==o&&(wt=e,t=x(t)),e=t),At[n]={nextPos:_t,result:e},e}function zt(){var e,t,r,n,i,a=49*_t+7,s=At[a];if(s)return _t=s.nextPos,s.result;for(e=_t,t=[],r=rr();r!==o;)t.push(r),r=rr();if(t!==o)if((r=Nt())!==o){for(n=[],i=rr();i!==o;)n.push(i),i=rr();n!==o?(wt=e,e=t=_(r)):(_t=e,e=l)}else _t=e,e=l;else _t=e,e=l;if(e===o){for(e=_t,t=[],r=rr();r!==o;)t.push(r),r=rr();if(t!==o)if((r=Bt())!==o){for(n=[],i=rr();i!==o;)n.push(i),i=rr();n!==o?(wt=e,e=t=_(r)):(_t=e,e=l)}else _t=e,e=l;else _t=e,e=l}return At[a]={nextPos:_t,result:e},e}function Dt(){var e,r,n,i,a,s,c,u=49*_t+8,d=At[u];if(d)return _t=d.nextPos,d.result;for(e=_t,r=[],n=rr();n!==o;)r.push(n),n=rr();if(r!==o)if((n=Nt())!==o){for(i=[],a=rr();a!==o;)i.push(a),a=rr();if(i!==o)if(46===t.charCodeAt(_t)?(a=w,_t++):(a=o,0===Ct&&Ot(S)),a!==o){for(s=[],c=rr();c!==o;)s.push(c),c=rr();s!==o?(wt=e,e=r=_(n)):(_t=e,e=l)}else _t=e,e=l;else _t=e,e=l}else _t=e,e=l;else _t=e,e=l;if(e===o){for(e=_t,r=[],n=rr();n!==o;)r.push(n),n=rr();if(r!==o)if((n=Bt())!==o){for(i=[],a=rr();a!==o;)i.push(a),a=rr();if(i!==o)if(46===t.charCodeAt(_t)?(a=w,_t++):(a=o,0===Ct&&Ot(S)),a!==o){for(s=[],c=rr();c!==o;)s.push(c),c=rr();s!==o?(wt=e,e=r=_(n)):(_t=e,e=l)}else _t=e,e=l;else _t=e,e=l}else _t=e,e=l;else _t=e,e=l}return At[u]={nextPos:_t,result:e},e}function Nt(){var e,t,r,n=49*_t+10,i=At[n];if(i)return _t=i.nextPos,i.result;if(e=_t,t=[],(r=lr())!==o)for(;r!==o;)t.push(r),r=lr();else t=l;return t!==o&&(wt=e,t=C(t)),e=t,At[n]={nextPos:_t,result:e},e}function Bt(){var e,t,r=49*_t+11,n=At[r];return n?(_t=n.nextPos,n.result):(e=_t,(t=Vt())!==o&&(wt=e,t=A(t)),(e=t)===o&&(e=_t,(t=Wt())!==o&&(wt=e,t=A(t)),e=t),At[r]={nextPos:_t,result:e},e)}function Ut(){var e,r=49*_t+12,n=At[r];return n?(_t=n.nextPos,n.result):(e=function(){var e,r=49*_t+13,n=At[r];return n?(_t=n.nextPos,n.result):(e=function(){var e,r,n,i,a,s=49*_t+14,c=At[s];if(c)return _t=c.nextPos,c.result;if(e=_t,t.substr(_t,3)===j?(r=j,_t+=3):(r=o,0===Ct&&Ot(P)),r!==o)if((n=nr())===o&&(n=I),n!==o){for(i=[],a=Gt();a!==o;)i.push(a),a=Gt();i!==o?(t.substr(_t,3)===j?(a=j,_t+=3):(a=o,0===Ct&&Ot(P)),a!==o?(wt=e,e=r=O(i)):(_t=e,e=l)):(_t=e,e=l)}else _t=e,e=l;else _t=e,e=l;return At[s]={nextPos:_t,result:e},e}(),e===o&&(e=Vt())===o&&(e=function(){var e,r,n,i,a,s=49*_t+16,c=At[s];if(c)return _t=c.nextPos,c.result;if(e=_t,t.substr(_t,3)===L?(r=L,_t+=3):(r=o,0===Ct&&Ot(F)),r!==o)if((n=nr())===o&&(n=I),n!==o){for(i=[],a=Kt();a!==o;)i.push(a),a=Kt();i!==o?(t.substr(_t,3)===L?(a=L,_t+=3):(a=o,0===Ct&&Ot(F)),a!==o?(wt=e,e=r=O(i)):(_t=e,e=l)):(_t=e,e=l)}else _t=e,e=l;else _t=e,e=l;return At[s]={nextPos:_t,result:e},e}(),e===o&&(e=Wt())),At[r]={nextPos:_t,result:e},e)}(),e===o&&(e=function(){var e,r,n,i,a,s=49*_t+38,c=At[s];return c?(_t=c.nextPos,c.result):(e=_t,(r=tr())!==o?(84===t.charCodeAt(_t)?(n=Ce,_t++):(n=o,0===Ct&&Ot(Ae)),n!==o?(i=function(){var e,r,n,i,a,s,c,u,d,h,p,f=49*_t+36,m=At[f];return m?(_t=m.nextPos,m.result):(e=_t,r=_t,(n=sr())!==o&&(i=sr())!==o?(58===t.charCodeAt(_t)?(a=ke,_t++):(a=o,0===Ct&&Ot(Te)),a!==o&&(s=sr())!==o&&(c=sr())!==o?(58===t.charCodeAt(_t)?(u=ke,_t++):(u=o,0===Ct&&Ot(Te)),u!==o&&(d=sr())!==o&&(h=sr())!==o?((p=er())===o&&(p=I),p!==o?r=n=[n,i,a,s,c,u,d,h,p]:(_t=r,r=l)):(_t=r,r=l)):(_t=r,r=l)):(_t=r,r=l),r!==o&&(wt=e,r=Ee(r)),e=r,At[f]={nextPos:_t,result:e},e)}(),i!==o?(90===t.charCodeAt(_t)?(a=je,_t++):(a=o,0===Ct&&Ot(Pe)),a!==o?(wt=e,e=r=Ie(r,i)):(_t=e,e=l)):(_t=e,e=l)):(_t=e,e=l)):(_t=e,e=l),e===o&&(e=_t,(r=tr())!==o?(84===t.charCodeAt(_t)?(n=Ce,_t++):(n=o,0===Ct&&Ot(Ae)),n!==o?(i=function(){var e,r,n,i,a,s,c,u,d,h,p,f,m,g,y,v,b,x=49*_t+37,_=At[x];return _?(_t=_.nextPos,_.result):(e=_t,r=_t,(n=sr())!==o&&(i=sr())!==o?(58===t.charCodeAt(_t)?(a=ke,_t++):(a=o,0===Ct&&Ot(Te)),a!==o&&(s=sr())!==o&&(c=sr())!==o?(58===t.charCodeAt(_t)?(u=ke,_t++):(u=o,0===Ct&&Ot(Te)),u!==o&&(d=sr())!==o&&(h=sr())!==o?((p=er())===o&&(p=I),p!==o?(45===t.charCodeAt(_t)?(f=Q,_t++):(f=o,0===Ct&&Ot(ee)),f===o&&(43===t.charCodeAt(_t)?(f=Y,_t++):(f=o,0===Ct&&Ot(J))),f!==o&&(m=sr())!==o&&(g=sr())!==o?(58===t.charCodeAt(_t)?(y=ke,_t++):(y=o,0===Ct&&Ot(Te)),y!==o&&(v=sr())!==o&&(b=sr())!==o?r=n=[n,i,a,s,c,u,d,h,p,f,m,g,y,v,b]:(_t=r,r=l)):(_t=r,r=l)):(_t=r,r=l)):(_t=r,r=l)):(_t=r,r=l)):(_t=r,r=l),r!==o&&(wt=e,r=Ee(r)),e=r,At[x]={nextPos:_t,result:e},e)}(),i!==o?(wt=e,e=r=Oe(r,i)):(_t=e,e=l)):(_t=e,e=l)):(_t=e,e=l)),At[s]={nextPos:_t,result:e},e)}(),e===o&&(e=function(){var e,r,n,i,a=49*_t+23,s=At[a];return s?(_t=s.nextPos,s.result):(e=_t,(r=Xt())===o&&(r=Zt()),r!==o?(101===t.charCodeAt(_t)?(n=q,_t++):(n=o,0===Ct&&Ot(H)),n===o&&(69===t.charCodeAt(_t)?(n=G,_t++):(n=o,0===Ct&&Ot(K))),n!==o&&(i=Zt())!==o?(wt=e,e=r=X(r,i)):(_t=e,e=l)):(_t=e,e=l),e===o&&(e=_t,(r=Xt())!==o&&(wt=e,r=Z(r)),e=r),At[a]={nextPos:_t,result:e},e)}(),e===o&&(e=function(){var e,t,r=49*_t+25,n=At[r];return n?(_t=n.nextPos,n.result):(e=_t,(t=Zt())!==o&&(wt=e,t=re(t)),e=t,At[r]={nextPos:_t,result:e},e)}(),e===o&&(e=function(){var e,r,n=49*_t+27,i=At[n];return i?(_t=i.nextPos,i.result):(e=_t,t.substr(_t,4)===ne?(r=ne,_t+=4):(r=o,0===Ct&&Ot(oe)),r!==o&&(wt=e,r=ie()),(e=r)===o&&(e=_t,t.substr(_t,5)===ae?(r=ae,_t+=5):(r=o,0===Ct&&Ot(se)),r!==o&&(wt=e,r=le()),e=r),At[n]={nextPos:_t,result:e},e)}(),e===o&&(e=function(){var e,r,n,i,a,s=49*_t+28,c=At[s];if(c)return _t=c.nextPos,c.result;if(e=_t,91===t.charCodeAt(_t)?(r=p,_t++):(r=o,0===Ct&&Ot(f)),r!==o){for(n=[],i=$t();i!==o;)n.push(i),i=$t();n!==o?(93===t.charCodeAt(_t)?(i=m,_t++):(i=o,0===Ct&&Ot(g)),i!==o?(wt=e,e=r=ce()):(_t=e,e=l)):(_t=e,e=l)}else _t=e,e=l;if(e===o&&(e=_t,91===t.charCodeAt(_t)?(r=p,_t++):(r=o,0===Ct&&Ot(f)),r!==o?((n=Yt())===o&&(n=I),n!==o?(93===t.charCodeAt(_t)?(i=m,_t++):(i=o,0===Ct&&Ot(g)),i!==o?(wt=e,e=r=ue(n)):(_t=e,e=l)):(_t=e,e=l)):(_t=e,e=l),e===o)){if(e=_t,91===t.charCodeAt(_t)?(r=p,_t++):(r=o,0===Ct&&Ot(f)),r!==o){if(n=[],(i=Jt())!==o)for(;i!==o;)n.push(i),i=Jt();else n=l;n!==o?(93===t.charCodeAt(_t)?(i=m,_t++):(i=o,0===Ct&&Ot(g)),i!==o?(wt=e,e=r=de(n)):(_t=e,e=l)):(_t=e,e=l)}else _t=e,e=l;if(e===o)if(e=_t,91===t.charCodeAt(_t)?(r=p,_t++):(r=o,0===Ct&&Ot(f)),r!==o){if(n=[],(i=Jt())!==o)for(;i!==o;)n.push(i),i=Jt();else n=l;n!==o&&(i=Yt())!==o?(93===t.charCodeAt(_t)?(a=m,_t++):(a=o,0===Ct&&Ot(g)),a!==o?(wt=e,e=r=he(n,i)):(_t=e,e=l)):(_t=e,e=l)}else _t=e,e=l}return At[s]={nextPos:_t,result:e},e}(),e===o&&(e=function(){var e,r,n,i,a,s,c=49*_t+32,u=At[c];if(u)return _t=u.nextPos,u.result;if(e=_t,123===t.charCodeAt(_t)?(r=ge,_t++):(r=o,0===Ct&&Ot(ye)),r!==o){for(n=[],i=rr();i!==o;)n.push(i),i=rr();if(n!==o){for(i=[],a=Qt();a!==o;)i.push(a),a=Qt();if(i!==o){for(a=[],s=rr();s!==o;)a.push(s),s=rr();a!==o?(125===t.charCodeAt(_t)?(s=ve,_t++):(s=o,0===Ct&&Ot(be)),s!==o?(wt=e,e=r=xe(i)):(_t=e,e=l)):(_t=e,e=l)}else _t=e,e=l}else _t=e,e=l}else _t=e,e=l;return At[c]={nextPos:_t,result:e},e}())))))),At[r]={nextPos:_t,result:e},e)}function Vt(){var e,r,n,i,a=49*_t+15,s=At[a];if(s)return _t=s.nextPos,s.result;if(e=_t,34===t.charCodeAt(_t)?(r=M,_t++):(r=o,0===Ct&&Ot(R)),r!==o){for(n=[],i=qt();i!==o;)n.push(i),i=qt();n!==o?(34===t.charCodeAt(_t)?(i=M,_t++):(i=o,0===Ct&&Ot(R)),i!==o?(wt=e,e=r=O(n)):(_t=e,e=l)):(_t=e,e=l)}else _t=e,e=l;return At[a]={nextPos:_t,result:e},e}function Wt(){var e,r,n,i,a=49*_t+17,s=At[a];if(s)return _t=s.nextPos,s.result;if(e=_t,39===t.charCodeAt(_t)?(r=z,_t++):(r=o,0===Ct&&Ot(D)),r!==o){for(n=[],i=Ht();i!==o;)n.push(i),i=Ht();n!==o?(39===t.charCodeAt(_t)?(i=z,_t++):(i=o,0===Ct&&Ot(D)),i!==o?(wt=e,e=r=O(n)):(_t=e,e=l)):(_t=e,e=l)}else _t=e,e=l;return At[a]={nextPos:_t,result:e},e}function qt(){var e,r,n,i=49*_t+18,a=At[i];return a?(_t=a.nextPos,a.result):((e=ur())===o&&(e=_t,r=_t,Ct++,34===t.charCodeAt(_t)?(n=M,_t++):(n=o,0===Ct&&Ot(R)),Ct--,n===o?r=d:(_t=r,r=l),r!==o?(t.length>_t?(n=t.charAt(_t),_t++):(n=o,0===Ct&&Ot(h)),n!==o?(wt=e,e=r=N(n)):(_t=e,e=l)):(_t=e,e=l)),At[i]={nextPos:_t,result:e},e)}function Ht(){var e,r,n,i=49*_t+19,a=At[i];return a?(_t=a.nextPos,a.result):(e=_t,r=_t,Ct++,39===t.charCodeAt(_t)?(n=z,_t++):(n=o,0===Ct&&Ot(D)),Ct--,n===o?r=d:(_t=r,r=l),r!==o?(t.length>_t?(n=t.charAt(_t),_t++):(n=o,0===Ct&&Ot(h)),n!==o?(wt=e,e=r=N(n)):(_t=e,e=l)):(_t=e,e=l),At[i]={nextPos:_t,result:e},e)}function Gt(){var e,r,n,i=49*_t+20,a=At[i];return a?(_t=a.nextPos,a.result):((e=ur())===o&&(e=function(){var e,r,n,i,a=49*_t+21,s=At[a];if(s)return _t=s.nextPos,s.result;if(e=_t,92===t.charCodeAt(_t)?(r=U,_t++):(r=o,0===Ct&&Ot(V)),r!==o)if(nr()!==o){for(n=[],i=or();i!==o;)n.push(i),i=or();n!==o?(wt=e,e=r=W()):(_t=e,e=l)}else _t=e,e=l;else _t=e,e=l;return At[a]={nextPos:_t,result:e},e}(),e===o&&(e=_t,r=_t,Ct++,t.substr(_t,3)===j?(n=j,_t+=3):(n=o,0===Ct&&Ot(P)),Ct--,n===o?r=d:(_t=r,r=l),r!==o?(t.length>_t?(n=t.charAt(_t),_t++):(n=o,0===Ct&&Ot(h)),n!==o?(wt=e,e=r=B(n)):(_t=e,e=l)):(_t=e,e=l))),At[i]={nextPos:_t,result:e},e)}function Kt(){var e,r,n,i=49*_t+22,a=At[i];return a?(_t=a.nextPos,a.result):(e=_t,r=_t,Ct++,t.substr(_t,3)===L?(n=L,_t+=3):(n=o,0===Ct&&Ot(F)),Ct--,n===o?r=d:(_t=r,r=l),r!==o?(t.length>_t?(n=t.charAt(_t),_t++):(n=o,0===Ct&&Ot(h)),n!==o?(wt=e,e=r=N(n)):(_t=e,e=l)):(_t=e,e=l),At[i]={nextPos:_t,result:e},e)}function Xt(){var e,r,n,i,a,s,c=49*_t+24,u=At[c];return u?(_t=u.nextPos,u.result):(e=_t,43===t.charCodeAt(_t)?(r=Y,_t++):(r=o,0===Ct&&Ot(J)),r===o&&(r=I),r!==o?(n=_t,(i=cr())!==o?(46===t.charCodeAt(_t)?(a=w,_t++):(a=o,0===Ct&&Ot(S)),a!==o&&(s=cr())!==o?n=i=[i,a,s]:(_t=n,n=l)):(_t=n,n=l),n!==o?(wt=e,e=r=$(n)):(_t=e,e=l)):(_t=e,e=l),e===o&&(e=_t,45===t.charCodeAt(_t)?(r=Q,_t++):(r=o,0===Ct&&Ot(ee)),r!==o?(n=_t,(i=cr())!==o?(46===t.charCodeAt(_t)?(a=w,_t++):(a=o,0===Ct&&Ot(S)),a!==o&&(s=cr())!==o?n=i=[i,a,s]:(_t=n,n=l)):(_t=n,n=l),n!==o?(wt=e,e=r=te(n)):(_t=e,e=l)):(_t=e,e=l)),At[c]={nextPos:_t,result:e},e)}function Zt(){var e,r,n,i,a,s=49*_t+26,c=At[s];if(c)return _t=c.nextPos,c.result;if(e=_t,43===t.charCodeAt(_t)?(r=Y,_t++):(r=o,0===Ct&&Ot(J)),r===o&&(r=I),r!==o){if(n=[],(i=sr())!==o)for(;i!==o;)n.push(i),i=sr();else n=l;n!==o?(i=_t,Ct++,46===t.charCodeAt(_t)?(a=w,_t++):(a=o,0===Ct&&Ot(S)),Ct--,a===o?i=d:(_t=i,i=l),i!==o?(wt=e,e=r=$(n)):(_t=e,e=l)):(_t=e,e=l)}else _t=e,e=l;if(e===o)if(e=_t,45===t.charCodeAt(_t)?(r=Q,_t++):(r=o,0===Ct&&Ot(ee)),r!==o){if(n=[],(i=sr())!==o)for(;i!==o;)n.push(i),i=sr();else n=l;n!==o?(i=_t,Ct++,46===t.charCodeAt(_t)?(a=w,_t++):(a=o,0===Ct&&Ot(S)),Ct--,a===o?i=d:(_t=i,i=l),i!==o?(wt=e,e=r=te(n)):(_t=e,e=l)):(_t=e,e=l)}else _t=e,e=l;return At[s]={nextPos:_t,result:e},e}function Yt(){var e,t,r,n,i,a=49*_t+29,s=At[a];if(s)return _t=s.nextPos,s.result;for(e=_t,t=[],r=$t();r!==o;)t.push(r),r=$t();if(t!==o)if((r=Ut())!==o){for(n=[],i=$t();i!==o;)n.push(i),i=$t();n!==o?(wt=e,e=t=pe(r)):(_t=e,e=l)}else _t=e,e=l;else _t=e,e=l;return At[a]={nextPos:_t,result:e},e}function Jt(){var e,r,n,i,a,s,c,u=49*_t+30,d=At[u];if(d)return _t=d.nextPos,d.result;for(e=_t,r=[],n=$t();n!==o;)r.push(n),n=$t();if(r!==o)if((n=Ut())!==o){for(i=[],a=$t();a!==o;)i.push(a),a=$t();if(i!==o)if(44===t.charCodeAt(_t)?(a=fe,_t++):(a=o,0===Ct&&Ot(me)),a!==o){for(s=[],c=$t();c!==o;)s.push(c),c=$t();s!==o?(wt=e,e=r=pe(n)):(_t=e,e=l)}else _t=e,e=l;else _t=e,e=l}else _t=e,e=l;else _t=e,e=l;return At[u]={nextPos:_t,result:e},e}function $t(){var e,t=49*_t+31,r=At[t];return r?(_t=r.nextPos,r.result):((e=rr())===o&&(e=nr())===o&&(e=Lt()),At[t]={nextPos:_t,result:e},e)}function Qt(){var e,r,n,i,a,s,c,u,d,h,p,f=49*_t+33,m=At[f];if(m)return _t=m.nextPos,m.result;for(e=_t,r=[],n=rr();n!==o;)r.push(n),n=rr();if(r!==o)if((n=Nt())!==o){for(i=[],a=rr();a!==o;)i.push(a),a=rr();if(i!==o)if(61===t.charCodeAt(_t)?(a=k,_t++):(a=o,0===Ct&&Ot(T)),a!==o){for(s=[],c=rr();c!==o;)s.push(c),c=rr();if(s!==o)if((c=Ut())!==o){for(u=[],d=rr();d!==o;)u.push(d),d=rr();if(u!==o)if(44===t.charCodeAt(_t)?(d=fe,_t++):(d=o,0===Ct&&Ot(me)),d!==o){for(h=[],p=rr();p!==o;)h.push(p),p=rr();h!==o?(wt=e,e=r=_e(n,c)):(_t=e,e=l)}else _t=e,e=l;else _t=e,e=l}else _t=e,e=l;else _t=e,e=l}else _t=e,e=l;else _t=e,e=l}else _t=e,e=l;else _t=e,e=l;if(e===o){for(e=_t,r=[],n=rr();n!==o;)r.push(n),n=rr();if(r!==o)if((n=Nt())!==o){for(i=[],a=rr();a!==o;)i.push(a),a=rr();if(i!==o)if(61===t.charCodeAt(_t)?(a=k,_t++):(a=o,0===Ct&&Ot(T)),a!==o){for(s=[],c=rr();c!==o;)s.push(c),c=rr();s!==o&&(c=Ut())!==o?(wt=e,e=r=_e(n,c)):(_t=e,e=l)}else _t=e,e=l;else _t=e,e=l}else _t=e,e=l;else _t=e,e=l}return At[f]={nextPos:_t,result:e},e}function er(){var e,r,n,i=49*_t+34,a=At[i];return a?(_t=a.nextPos,a.result):(e=_t,46===t.charCodeAt(_t)?(r=w,_t++):(r=o,0===Ct&&Ot(S)),r!==o&&(n=cr())!==o?(wt=e,e=r=we(n)):(_t=e,e=l),At[i]={nextPos:_t,result:e},e)}function tr(){var e,r,n,i,a,s,c,u,d,h,p,f,m=49*_t+35,g=At[m];return g?(_t=g.nextPos,g.result):(e=_t,r=_t,(n=sr())!==o&&(i=sr())!==o&&(a=sr())!==o&&(s=sr())!==o?(45===t.charCodeAt(_t)?(c=Q,_t++):(c=o,0===Ct&&Ot(ee)),c!==o&&(u=sr())!==o&&(d=sr())!==o?(45===t.charCodeAt(_t)?(h=Q,_t++):(h=o,0===Ct&&Ot(ee)),h!==o&&(p=sr())!==o&&(f=sr())!==o?r=n=[n,i,a,s,c,u,d,h,p,f]:(_t=r,r=l)):(_t=r,r=l)):(_t=r,r=l),r!==o&&(wt=e,r=Se(r)),e=r,At[m]={nextPos:_t,result:e},e)}function rr(){var e,r=49*_t+39,n=At[r];return n?(_t=n.nextPos,n.result):(Me.test(t.charAt(_t))?(e=t.charAt(_t),_t++):(e=o,0===Ct&&Ot(Re)),At[r]={nextPos:_t,result:e},e)}function nr(){var e,r,n,i=49*_t+40,a=At[i];return a?(_t=a.nextPos,a.result):(10===t.charCodeAt(_t)?(e=Le,_t++):(e=o,0===Ct&&Ot(Fe)),e===o&&(e=_t,13===t.charCodeAt(_t)?(r=ze,_t++):(r=o,0===Ct&&Ot(De)),r!==o?(10===t.charCodeAt(_t)?(n=Le,_t++):(n=o,0===Ct&&Ot(Fe)),n!==o?e=r=[r,n]:(_t=e,e=l)):(_t=e,e=l)),At[i]={nextPos:_t,result:e},e)}function or(){var e,t=49*_t+41,r=At[t];return r?(_t=r.nextPos,r.result):((e=nr())===o&&(e=rr()),At[t]={nextPos:_t,result:e},e)}function ir(){var e,r,n=49*_t+42,i=At[n];return i?(_t=i.nextPos,i.result):(e=_t,Ct++,t.length>_t?(r=t.charAt(_t),_t++):(r=o,0===Ct&&Ot(h)),Ct--,r===o?e=d:(_t=e,e=l),At[n]={nextPos:_t,result:e},e)}function ar(){var e,r=49*_t+43,n=At[r];return n?(_t=n.nextPos,n.result):(Ne.test(t.charAt(_t))?(e=t.charAt(_t),_t++):(e=o,0===Ct&&Ot(Be)),At[r]={nextPos:_t,result:e},e)}function sr(){var e,r,n=49*_t+44,i=At[n];return i?(_t=i.nextPos,i.result):(Ue.test(t.charAt(_t))?(e=t.charAt(_t),_t++):(e=o,0===Ct&&Ot(Ve)),e===o&&(e=_t,95===t.charCodeAt(_t)?(r=We,_t++):(r=o,0===Ct&&Ot(qe)),r!==o&&(wt=e,r=He()),e=r),At[n]={nextPos:_t,result:e},e)}function lr(){var e,r=49*_t+45,n=At[r];return n?(_t=n.nextPos,n.result):(Ge.test(t.charAt(_t))?(e=t.charAt(_t),_t++):(e=o,0===Ct&&Ot(Ke)),At[r]={nextPos:_t,result:e},e)}function cr(){var e,t,r,n=49*_t+46,i=At[n];if(i)return _t=i.nextPos,i.result;if(e=_t,t=[],(r=sr())!==o)for(;r!==o;)t.push(r),r=sr();else t=l;return t!==o&&(wt=e,t=Xe(t)),e=t,At[n]={nextPos:_t,result:e},e}function ur(){var e,r,n=49*_t+47,i=At[n];return i?(_t=i.nextPos,i.result):(e=_t,t.substr(_t,2)===Ze?(r=Ze,_t+=2):(r=o,0===Ct&&Ot(Ye)),r!==o&&(wt=e,r=Je()),(e=r)===o&&(e=_t,t.substr(_t,2)===$e?(r=$e,_t+=2):(r=o,0===Ct&&Ot(Qe)),r!==o&&(wt=e,r=et()),(e=r)===o&&(e=_t,t.substr(_t,2)===tt?(r=tt,_t+=2):(r=o,0===Ct&&Ot(rt)),r!==o&&(wt=e,r=nt()),(e=r)===o&&(e=_t,t.substr(_t,2)===ot?(r=ot,_t+=2):(r=o,0===Ct&&Ot(it)),r!==o&&(wt=e,r=at()),(e=r)===o&&(e=_t,t.substr(_t,2)===st?(r=st,_t+=2):(r=o,0===Ct&&Ot(lt)),r!==o&&(wt=e,r=ct()),(e=r)===o&&(e=_t,t.substr(_t,2)===ut?(r=ut,_t+=2):(r=o,0===Ct&&Ot(dt)),r!==o&&(wt=e,r=ht()),(e=r)===o&&(e=_t,t.substr(_t,2)===pt?(r=pt,_t+=2):(r=o,0===Ct&&Ot(ft)),r!==o&&(wt=e,r=mt()),(e=r)===o&&(e=function(){var e,r,n,i,a,s,c,u,d,h,p,f=49*_t+48,m=At[f];return m?(_t=m.nextPos,m.result):(e=_t,t.substr(_t,2)===gt?(r=gt,_t+=2):(r=o,0===Ct&&Ot(yt)),r!==o?(n=_t,(i=ar())!==o&&(a=ar())!==o&&(s=ar())!==o&&(c=ar())!==o&&(u=ar())!==o&&(d=ar())!==o&&(h=ar())!==o&&(p=ar())!==o?n=i=[i,a,s,c,u,d,h,p]:(_t=n,n=l),n!==o?(wt=e,e=r=vt(n)):(_t=e,e=l)):(_t=e,e=l),e===o&&(e=_t,t.substr(_t,2)===bt?(r=bt,_t+=2):(r=o,0===Ct&&Ot(xt)),r!==o?(n=_t,(i=ar())!==o&&(a=ar())!==o&&(s=ar())!==o&&(c=ar())!==o?n=i=[i,a,s,c]:(_t=n,n=l),n!==o?(wt=e,e=r=vt(n)):(_t=e,e=l)):(_t=e,e=l)),At[f]={nextPos:_t,result:e},e)}()))))))),At[n]={nextPos:_t,result:e},e)}var dr=[];function hr(e){dr.push(e)}function pr(e,t,r,n,o){var i={type:e,value:t,line:r(),column:n()};return o&&(i.key=o),i}if((r=a())!==o&&_t===t.length)return r;throw r!==o&&_t<t.length&&Ot({type:"end",description:"end of input"}),function(r,n,o){var i=It(o),a=o<t.length?t.charAt(o):null;return null!==n&&function(e){var t=1;for(e.sort((function(e,t){return e.description<t.description?-1:e.description>t.description?1:0}));t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(n),new e(null!==r?r:function(e,t){var r,n=new Array(e.length);for(r=0;r<e.length;r++)n[r]=e[r].description;return"Expected "+(e.length>1?n.slice(0,-1).join(", ")+" or "+n[e.length-1]:n[0])+" but "+(t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(e){return"\\x0"+t(e)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(e){return"\\x"+t(e)})).replace(/[\u0180-\u0FFF]/g,(function(e){return"\\u0"+t(e)})).replace(/[\u1080-\uFFFF]/g,(function(e){return"\\u"+t(e)}))}(t)+'"':"end of input")+" found."}(n,a),n,a,o,i.line,i.column)}(null,Et,Tt)}}}()},1430:function(e,t,r){var n,o;!function(i,a){"use strict";e.exports?e.exports=a():void 0===(o="function"==typeof(n=a)?n.call(t,r,t,e):n)||(e.exports=o)}(0,(function(e){"use strict";var t=e&&e.IPv6;return{best:function(e){var t,r,n=e.toLowerCase().split(":"),o=n.length,i=8;for(""===n[0]&&""===n[1]&&""===n[2]?(n.shift(),n.shift()):""===n[0]&&""===n[1]?n.shift():""===n[o-1]&&""===n[o-2]&&n.pop(),-1!==n[(o=n.length)-1].indexOf(".")&&(i=7),t=0;t<o&&""!==n[t];t++);if(t<i)for(n.splice(t,1,"0000");n.length<i;)n.splice(t,0,"0000");for(var a=0;a<i;a++){r=n[a].split("");for(var s=0;s<3&&"0"===r[0]&&r.length>1;s++)r.splice(0,1);n[a]=r.join("")}var l=-1,c=0,u=0,d=-1,h=!1;for(a=0;a<i;a++)h?"0"===n[a]?u+=1:(h=!1,u>c&&(l=d,c=u)):"0"===n[a]&&(h=!0,d=a,u=1);u>c&&(l=d,c=u),c>1&&n.splice(l,c,""),o=n.length;var p="";for(""===n[0]&&(p=":"),a=0;a<o&&(p+=n[a],a!==o-1);a++)p+=":";return""===n[o-1]&&(p+=":"),p},noConflict:function(){return e.IPv6===this&&(e.IPv6=t),this}}}))},4704:function(e,t,r){var n,o;!function(i,a){"use strict";e.exports?e.exports=a():void 0===(o="function"==typeof(n=a)?n.call(t,r,t,e):n)||(e.exports=o)}(0,(function(e){"use strict";var t=e&&e.SecondLevelDomains,r={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;var n=e.lastIndexOf(".",t-1);if(n<=0||n>=t-1)return!1;var o=r.list[e.slice(t+1)];return!!o&&o.indexOf(" "+e.slice(n+1,t)+" ")>=0},is:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;if(e.lastIndexOf(".",t-1)>=0)return!1;var n=r.list[e.slice(t+1)];return!!n&&n.indexOf(" "+e.slice(0,t)+" ")>=0},get:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return null;var n=e.lastIndexOf(".",t-1);if(n<=0||n>=t-1)return null;var o=r.list[e.slice(t+1)];return o?o.indexOf(" "+e.slice(n+1,t)+" ")<0?null:e.slice(n+1):null},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return r}))},4193:function(e,t,r){var n,o,i;!function(a,s){"use strict";e.exports?e.exports=s(r(9340),r(1430),r(4704)):(o=[r(9340),r(1430),r(4704)],void 0===(i="function"==typeof(n=s)?n.apply(t,o):n)||(e.exports=i))}(0,(function(e,t,r,n){"use strict";var o=n&&n.URI;function i(e,t){var r=arguments.length>=1;if(!(this instanceof i))return r?arguments.length>=2?new i(e,t):new i(e):new i;if(void 0===e){if(r)throw new TypeError("undefined is not a valid argument for URI");e="undefined"!=typeof location?location.href+"":""}if(null===e&&r)throw new TypeError("null is not a valid argument for URI");return this.href(e),void 0!==t?this.absoluteTo(t):this}i.version="1.19.11";var a=i.prototype,s=Object.prototype.hasOwnProperty;function l(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function c(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function u(e){return"Array"===c(e)}function d(e,t){var r,n,o={};if("RegExp"===c(t))o=null;else if(u(t))for(r=0,n=t.length;r<n;r++)o[t[r]]=!0;else o[t]=!0;for(r=0,n=e.length;r<n;r++)(o&&void 0!==o[e[r]]||!o&&t.test(e[r]))&&(e.splice(r,1),n--,r--);return e}function h(e,t){var r,n;if(u(t)){for(r=0,n=t.length;r<n;r++)if(!h(e,t[r]))return!1;return!0}var o=c(t);for(r=0,n=e.length;r<n;r++)if("RegExp"===o){if("string"==typeof e[r]&&e[r].match(t))return!0}else if(e[r]===t)return!0;return!1}function p(e,t){if(!u(e)||!u(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function f(e){return e.replace(/^\/+|\/+$/g,"")}function m(e){return escape(e)}function g(e){return encodeURIComponent(e).replace(/[!'()*]/g,m).replace(/\*/g,"%2A")}i._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:i.preventInvalidHostname,duplicateQueryParameters:i.duplicateQueryParameters,escapeQuerySpace:i.escapeQuerySpace}},i.preventInvalidHostname=!1,i.duplicateQueryParameters=!1,i.escapeQuerySpace=!0,i.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,i.idn_expression=/[^a-z0-9\._-]/i,i.punycode_expression=/(xn--)/i,i.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,i.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))/gi,i.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u201e\u2018\u2019]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},i.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,i.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},i.hostProtocols=["http","https"],i.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,i.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},i.getDomAttribute=function(e){if(e&&e.nodeName){var t=e.nodeName.toLowerCase();if("input"!==t||"image"===e.type)return i.domAttributes[t]}},i.encode=g,i.decode=decodeURIComponent,i.iso8859=function(){i.encode=escape,i.decode=unescape},i.unicode=function(){i.encode=g,i.decode=decodeURIComponent},i.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},i.encodeQuery=function(e,t){var r=i.encode(e+"");return void 0===t&&(t=i.escapeQuerySpace),t?r.replace(/%20/g,"+"):r},i.decodeQuery=function(e,t){e+="",void 0===t&&(t=i.escapeQuerySpace);try{return i.decode(t?e.replace(/\+/g,"%20"):e)}catch(t){return e}};var y,v={encode:"encode",decode:"decode"},b=function(e,t){return function(r){try{return i[t](r+"").replace(i.characters[e][t].expression,(function(r){return i.characters[e][t].map[r]}))}catch(e){return r}}};for(y in v)i[y+"PathSegment"]=b("pathname",v[y]),i[y+"UrnPathSegment"]=b("urnpath",v[y]);var x=function(e,t,r){return function(n){var o;o=r?function(e){return i[t](i[r](e))}:i[t];for(var a=(n+"").split(e),s=0,l=a.length;s<l;s++)a[s]=o(a[s]);return a.join(e)}};function _(e){return function(t,r){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!r),this)}}function w(e,t){return function(r,n){return void 0===r?this._parts[e]||"":(null!==r&&(r+="").charAt(0)===t&&(r=r.substring(1)),this._parts[e]=r,this.build(!n),this)}}i.decodePath=x("/","decodePathSegment"),i.decodeUrnPath=x(":","decodeUrnPathSegment"),i.recodePath=x("/","encodePathSegment","decode"),i.recodeUrnPath=x(":","encodeUrnPathSegment","decode"),i.encodeReserved=b("reserved","encode"),i.parse=function(e,t){var r;return t||(t={preventInvalidHostname:i.preventInvalidHostname}),(r=(e=(e=e.replace(i.leading_whitespace_expression,"")).replace(i.ascii_tab_whitespace,"")).indexOf("#"))>-1&&(t.fragment=e.substring(r+1)||null,e=e.substring(0,r)),(r=e.indexOf("?"))>-1&&(t.query=e.substring(r+1)||null,e=e.substring(0,r)),"//"===(e=(e=e.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://")).replace(/^[/\\]{2,}/i,"//")).substring(0,2)?(t.protocol=null,e=e.substring(2),e=i.parseAuthority(e,t)):(r=e.indexOf(":"))>-1&&(t.protocol=e.substring(0,r)||null,t.protocol&&!t.protocol.match(i.protocol_expression)?t.protocol=void 0:"//"===e.substring(r+1,r+3).replace(/\\/g,"/")?(e=e.substring(r+3),e=i.parseAuthority(e,t)):(e=e.substring(r+1),t.urn=!0)),t.path=e,t},i.parseHost=function(e,t){e||(e="");var r,n,o=(e=e.replace(/\\/g,"/")).indexOf("/");if(-1===o&&(o=e.length),"["===e.charAt(0))r=e.indexOf("]"),t.hostname=e.substring(1,r)||null,t.port=e.substring(r+2,o)||null,"/"===t.port&&(t.port=null);else{var a=e.indexOf(":"),s=e.indexOf("/"),l=e.indexOf(":",a+1);-1!==l&&(-1===s||l<s)?(t.hostname=e.substring(0,o)||null,t.port=null):(n=e.substring(0,o).split(":"),t.hostname=n[0]||null,t.port=n[1]||null)}return t.hostname&&"/"!==e.substring(o).charAt(0)&&(o++,e="/"+e),t.preventInvalidHostname&&i.ensureValidHostname(t.hostname,t.protocol),t.port&&i.ensureValidPort(t.port),e.substring(o)||"/"},i.parseAuthority=function(e,t){return e=i.parseUserinfo(e,t),i.parseHost(e,t)},i.parseUserinfo=function(e,t){var r=e;-1!==e.indexOf("\\")&&(e=e.replace(/\\/g,"/"));var n,o=e.indexOf("/"),a=e.lastIndexOf("@",o>-1?o:e.length-1);return a>-1&&(-1===o||a<o)?(n=e.substring(0,a).split(":"),t.username=n[0]?i.decode(n[0]):null,n.shift(),t.password=n[0]?i.decode(n.join(":")):null,e=r.substring(a+1)):(t.username=null,t.password=null),e},i.parseQuery=function(e,t){if(!e)return{};if(!(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var r,n,o,a={},l=e.split("&"),c=l.length,u=0;u<c;u++)r=l[u].split("="),n=i.decodeQuery(r.shift(),t),o=r.length?i.decodeQuery(r.join("="),t):null,"__proto__"!==n&&(s.call(a,n)?("string"!=typeof a[n]&&null!==a[n]||(a[n]=[a[n]]),a[n].push(o)):a[n]=o);return a},i.build=function(e){var t="",r=!1;return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//",r=!0),t+=i.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&r&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},i.buildHost=function(e){var t="";return e.hostname?(i.ip6_expression.test(e.hostname)?t+="["+e.hostname+"]":t+=e.hostname,e.port&&(t+=":"+e.port),t):""},i.buildAuthority=function(e){return i.buildUserinfo(e)+i.buildHost(e)},i.buildUserinfo=function(e){var t="";return e.username&&(t+=i.encode(e.username)),e.password&&(t+=":"+i.encode(e.password)),t&&(t+="@"),t},i.buildQuery=function(e,t,r){var n,o,a,l,c="";for(o in e)if("__proto__"!==o&&s.call(e,o))if(u(e[o]))for(n={},a=0,l=e[o].length;a<l;a++)void 0!==e[o][a]&&void 0===n[e[o][a]+""]&&(c+="&"+i.buildQueryParameter(o,e[o][a],r),!0!==t&&(n[e[o][a]+""]=!0));else void 0!==e[o]&&(c+="&"+i.buildQueryParameter(o,e[o],r));return c.substring(1)},i.buildQueryParameter=function(e,t,r){return i.encodeQuery(e,r)+(null!==t?"="+i.encodeQuery(t,r):"")},i.addQuery=function(e,t,r){if("object"==typeof t)for(var n in t)s.call(t,n)&&i.addQuery(e,n,t[n]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return void(e[t]=r);"string"==typeof e[t]&&(e[t]=[e[t]]),u(r)||(r=[r]),e[t]=(e[t]||[]).concat(r)}},i.setQuery=function(e,t,r){if("object"==typeof t)for(var n in t)s.call(t,n)&&i.setQuery(e,n,t[n]);else{if("string"!=typeof t)throw new TypeError("URI.setQuery() accepts an object, string as the name parameter");e[t]=void 0===r?null:r}},i.removeQuery=function(e,t,r){var n,o,a;if(u(t))for(n=0,o=t.length;n<o;n++)e[t[n]]=void 0;else if("RegExp"===c(t))for(a in e)t.test(a)&&(e[a]=void 0);else if("object"==typeof t)for(a in t)s.call(t,a)&&i.removeQuery(e,a,t[a]);else{if("string"!=typeof t)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==r?"RegExp"===c(r)?!u(e[t])&&r.test(e[t])?e[t]=void 0:e[t]=d(e[t],r):e[t]!==String(r)||u(r)&&1!==r.length?u(e[t])&&(e[t]=d(e[t],r)):e[t]=void 0:e[t]=void 0}},i.hasQuery=function(e,t,r,n){switch(c(t)){case"String":break;case"RegExp":for(var o in e)if(s.call(e,o)&&t.test(o)&&(void 0===r||i.hasQuery(e,o,r)))return!0;return!1;case"Object":for(var a in t)if(s.call(t,a)&&!i.hasQuery(e,a,t[a]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(c(r)){case"Undefined":return t in e;case"Boolean":return r===Boolean(u(e[t])?e[t].length:e[t]);case"Function":return!!r(e[t],t,e);case"Array":return!!u(e[t])&&(n?h:p)(e[t],r);case"RegExp":return u(e[t])?!!n&&h(e[t],r):Boolean(e[t]&&e[t].match(r));case"Number":r=String(r);case"String":return u(e[t])?!!n&&h(e[t],r):e[t]===r;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},i.joinPaths=function(){for(var e=[],t=[],r=0,n=0;n<arguments.length;n++){var o=new i(arguments[n]);e.push(o);for(var a=o.segment(),s=0;s<a.length;s++)"string"==typeof a[s]&&t.push(a[s]),a[s]&&r++}if(!t.length||!r)return new i("");var l=new i("").segment(t);return""!==e[0].path()&&"/"!==e[0].path().slice(0,1)||l.path("/"+l.path()),l.normalize()},i.commonPath=function(e,t){var r,n=Math.min(e.length,t.length);for(r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r)){r--;break}return r<1?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":("/"===e.charAt(r)&&"/"===t.charAt(r)||(r=e.substring(0,r).lastIndexOf("/")),e.substring(0,r+1))},i.withinString=function(e,t,r){r||(r={});var n=r.start||i.findUri.start,o=r.end||i.findUri.end,a=r.trim||i.findUri.trim,s=r.parens||i.findUri.parens,l=/[a-z0-9-]=["']?$/i;for(n.lastIndex=0;;){var c=n.exec(e);if(!c)break;var u=c.index;if(r.ignoreHtml){var d=e.slice(Math.max(u-3,0),u);if(d&&l.test(d))continue}for(var h=u+e.slice(u).search(o),p=e.slice(u,h),f=-1;;){var m=s.exec(p);if(!m)break;var g=m.index+m[0].length;f=Math.max(f,g)}if(!((p=f>-1?p.slice(0,f)+p.slice(f).replace(a,""):p.replace(a,"")).length<=c[0].length||r.ignore&&r.ignore.test(p))){var y=t(p,u,h=u+p.length,e);void 0!==y?(y=String(y),e=e.slice(0,u)+y+e.slice(h),n.lastIndex=u+y.length):n.lastIndex=h}}return n.lastIndex=0,e},i.ensureValidHostname=function(t,r){var n=!!t,o=!1;if(!!r&&(o=h(i.hostProtocols,r)),o&&!n)throw new TypeError("Hostname cannot be empty, if protocol is "+r);if(t&&t.match(i.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(e.toASCII(t).match(i.invalid_hostname_characters))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-:_]')}},i.ensureValidPort=function(e){if(e){var t=Number(e);if(!(/^[0-9]+$/.test(t)&&t>0&&t<65536))throw new TypeError('Port "'+e+'" is not a valid port')}},i.noConflict=function(e){if(e){var t={URI:this.noConflict()};return n.URITemplate&&"function"==typeof n.URITemplate.noConflict&&(t.URITemplate=n.URITemplate.noConflict()),n.IPv6&&"function"==typeof n.IPv6.noConflict&&(t.IPv6=n.IPv6.noConflict()),n.SecondLevelDomains&&"function"==typeof n.SecondLevelDomains.noConflict&&(t.SecondLevelDomains=n.SecondLevelDomains.noConflict()),t}return n.URI===this&&(n.URI=o),this},a.build=function(e){return!0===e?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=i.build(this._parts),this._deferred_build=!1),this},a.clone=function(){return new i(this)},a.valueOf=a.toString=function(){return this.build(!1)._string},a.protocol=_("protocol"),a.username=_("username"),a.password=_("password"),a.hostname=_("hostname"),a.port=_("port"),a.query=w("query","?"),a.fragment=w("fragment","#"),a.search=function(e,t){var r=this.query(e,t);return"string"==typeof r&&r.length?"?"+r:r},a.hash=function(e,t){var r=this.fragment(e,t);return"string"==typeof r&&r.length?"#"+r:r},a.pathname=function(e,t){if(void 0===e||!0===e){var r=this._parts.path||(this._parts.hostname?"/":"");return e?(this._parts.urn?i.decodeUrnPath:i.decodePath)(r):r}return this._parts.urn?this._parts.path=e?i.recodeUrnPath(e):"":this._parts.path=e?i.recodePath(e):"/",this.build(!t),this},a.path=a.pathname,a.href=function(e,t){var r;if(void 0===e)return this.toString();this._string="",this._parts=i._parts();var n=e instanceof i,o="object"==typeof e&&(e.hostname||e.path||e.pathname);if(e.nodeName&&(e=e[i.getDomAttribute(e)]||"",o=!1),!n&&o&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e||e instanceof String)this._parts=i.parse(String(e),this._parts);else{if(!n&&!o)throw new TypeError("invalid input");var a=n?e._parts:e;for(r in a)"query"!==r&&s.call(this._parts,r)&&(this._parts[r]=a[r]);a.query&&this.query(a.query,!1)}return this.build(!t),this},a.is=function(e){var t=!1,n=!1,o=!1,a=!1,s=!1,l=!1,c=!1,u=!this._parts.urn;switch(this._parts.hostname&&(u=!1,n=i.ip4_expression.test(this._parts.hostname),o=i.ip6_expression.test(this._parts.hostname),s=(a=!(t=n||o))&&r&&r.has(this._parts.hostname),l=a&&i.idn_expression.test(this._parts.hostname),c=a&&i.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return u;case"absolute":return!u;case"domain":case"name":return a;case"sld":return s;case"ip":return t;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return o;case"idn":return l;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return c}return null};var S=a.protocol,k=a.port,T=a.hostname;a.protocol=function(e,t){if(e&&!(e=e.replace(/:(\/\/)?$/,"")).match(i.protocol_expression))throw new TypeError('Protocol "'+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return S.call(this,e,t)},a.scheme=a.protocol,a.port=function(e,t){return this._parts.urn?void 0===e?"":this:(void 0!==e&&(0===e&&(e=null),e&&(":"===(e+="").charAt(0)&&(e=e.substring(1)),i.ensureValidPort(e))),k.call(this,e,t))},a.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var r={preventInvalidHostname:this._parts.preventInvalidHostname};if("/"!==i.parseHost(e,r))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');e=r.hostname,this._parts.preventInvalidHostname&&i.ensureValidHostname(e,this._parts.protocol)}return T.call(this,e,t)},a.origin=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var r=this.protocol();return this.authority()?(r?r+"://":"")+this.authority():""}var n=i(e);return this.protocol(n.protocol()).authority(n.authority()).build(!t),this},a.host=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?i.buildHost(this._parts):"";if("/"!==i.parseHost(e,this._parts))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},a.authority=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?i.buildAuthority(this._parts):"";if("/"!==i.parseAuthority(e,this._parts))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},a.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var r=i.buildUserinfo(this._parts);return r?r.substring(0,r.length-1):r}return"@"!==e[e.length-1]&&(e+="@"),i.parseUserinfo(e,this._parts),this.build(!t),this},a.resource=function(e,t){var r;return void 0===e?this.path()+this.search()+this.hash():(r=i.parse(e),this._parts.path=r.path,this._parts.query=r.query,this._parts.fragment=r.fragment,this.build(!t),this)},a.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,r)||""}var n=this._parts.hostname.length-this.domain().length,o=this._parts.hostname.substring(0,n),a=new RegExp("^"+l(o));if(e&&"."!==e.charAt(e.length-1)&&(e+="."),-1!==e.indexOf(":"))throw new TypeError("Domains cannot contain colons");return e&&i.ensureValidHostname(e,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(a,e),this.build(!t),this},a.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.match(/\./g);if(r&&r.length<2)return this._parts.hostname;var n=this._parts.hostname.length-this.tld(t).length-1;return n=this._parts.hostname.lastIndexOf(".",n-1)+1,this._parts.hostname.substring(n)||""}if(!e)throw new TypeError("cannot set domain empty");if(-1!==e.indexOf(":"))throw new TypeError("Domains cannot contain colons");if(i.ensureValidHostname(e,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var o=new RegExp(l(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(o,e)}return this.build(!t),this},a.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.lastIndexOf("."),o=this._parts.hostname.substring(n+1);return!0!==t&&r&&r.list[o.toLowerCase()]&&r.get(this._parts.hostname)||o}var i;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!r||!r.is(e))throw new TypeError('TLD "'+e+'" contains characters other than [A-Z0-9]');i=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");i=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,e)}return this.build(!t),this},a.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var r=this._parts.path.length-this.filename().length-1,n=this._parts.path.substring(0,r)||(this._parts.hostname?"/":"");return e?i.decodePath(n):n}var o=this._parts.path.length-this.filename().length,a=this._parts.path.substring(0,o),s=new RegExp("^"+l(a));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=i.recodePath(e),this._parts.path=this._parts.path.replace(s,e),this.build(!t),this},a.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("string"!=typeof e){if(!this._parts.path||"/"===this._parts.path)return"";var r=this._parts.path.lastIndexOf("/"),n=this._parts.path.substring(r+1);return e?i.decodePathSegment(n):n}var o=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(o=!0);var a=new RegExp(l(this.filename())+"$");return e=i.recodePath(e),this._parts.path=this._parts.path.replace(a,e),o?this.normalizePath(t):this.build(!t),this},a.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path||"/"===this._parts.path)return"";var r,n,o=this.filename(),a=o.lastIndexOf(".");return-1===a?"":(r=o.substring(a+1),n=/^[a-z0-9%]+$/i.test(r)?r:"",e?i.decodePathSegment(n):n)}"."===e.charAt(0)&&(e=e.substring(1));var s,c=this.suffix();if(c)s=e?new RegExp(l(c)+"$"):new RegExp(l("."+c)+"$");else{if(!e)return this;this._parts.path+="."+i.recodePath(e)}return s&&(e=i.recodePath(e),this._parts.path=this._parts.path.replace(s,e)),this.build(!t),this},a.segment=function(e,t,r){var n=this._parts.urn?":":"/",o=this.path(),i="/"===o.substring(0,1),a=o.split(n);if(void 0!==e&&"number"!=typeof e&&(r=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw new Error('Bad segment "'+e+'", must be 0-based integer');if(i&&a.shift(),e<0&&(e=Math.max(a.length+e,0)),void 0===t)return void 0===e?a:a[e];if(null===e||void 0===a[e])if(u(t)){a=[];for(var s=0,l=t.length;s<l;s++)(t[s].length||a.length&&a[a.length-1].length)&&(a.length&&!a[a.length-1].length&&a.pop(),a.push(f(t[s])))}else(t||"string"==typeof t)&&(t=f(t),""===a[a.length-1]?a[a.length-1]=t:a.push(t));else t?a[e]=f(t):a.splice(e,1);return i&&a.unshift(""),this.path(a.join(n),r)},a.segmentCoded=function(e,t,r){var n,o,a;if("number"!=typeof e&&(r=t,t=e,e=void 0),void 0===t){if(u(n=this.segment(e,t,r)))for(o=0,a=n.length;o<a;o++)n[o]=i.decode(n[o]);else n=void 0!==n?i.decode(n):void 0;return n}if(u(t))for(o=0,a=t.length;o<a;o++)t[o]=i.encode(t[o]);else t="string"==typeof t||t instanceof String?i.encode(t):t;return this.segment(e,t,r)};var E=a.query;return a.query=function(e,t){if(!0===e)return i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof e){var r=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace),n=e.call(this,r);return this._parts.query=i.buildQuery(n||r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=i.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):E.call(this,e,t)},a.setQuery=function(e,t,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof e||e instanceof String)n[e]=void 0!==t?t:null;else{if("object"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var o in e)s.call(e,o)&&(n[o]=e[o])}return this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},a.addQuery=function(e,t,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.addQuery(n,e,void 0===t?null:t),this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},a.removeQuery=function(e,t,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.removeQuery(n,e,t),this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},a.hasQuery=function(e,t,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.hasQuery(n,e,t,r)},a.setSearch=a.setQuery,a.addSearch=a.addQuery,a.removeSearch=a.removeQuery,a.hasSearch=a.hasQuery,a.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},a.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},a.normalizeHostname=function(r){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!r)),this},a.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===i.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},a.normalizePath=function(e){var t,r=this._parts.path;if(!r)return this;if(this._parts.urn)return this._parts.path=i.recodeUrnPath(this._parts.path),this.build(!e),this;if("/"===this._parts.path)return this;var n,o,a="";for("/"!==(r=i.recodePath(r)).charAt(0)&&(t=!0,r="/"+r),"/.."!==r.slice(-3)&&"/."!==r.slice(-2)||(r+="/"),r=r.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(a=r.substring(1).match(/^(\.\.\/)+/)||"")&&(a=a[0]);-1!==(n=r.search(/\/\.\.(\/|$)/));)0!==n?(-1===(o=r.substring(0,n).lastIndexOf("/"))&&(o=n),r=r.substring(0,o)+r.substring(n+3)):r=r.substring(3);return t&&this.is("relative")&&(r=a+r.substring(1)),this._parts.path=r,this.build(!e),this},a.normalizePathname=a.normalizePath,a.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(i.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},a.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},a.normalizeSearch=a.normalizeQuery,a.normalizeHash=a.normalizeFragment,a.iso8859=function(){var e=i.encode,t=i.decode;i.encode=escape,i.decode=decodeURIComponent;try{this.normalize()}finally{i.encode=e,i.decode=t}return this},a.unicode=function(){var e=i.encode,t=i.decode;i.encode=g,i.decode=unescape;try{this.normalize()}finally{i.encode=e,i.decode=t}return this},a.readable=function(){var t=this.clone();t.username("").password("").normalize();var r="";if(t._parts.protocol&&(r+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(r+=e.toUnicode(t._parts.hostname),t._parts.port&&(r+=":"+t._parts.port)):r+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(r+="/"),r+=t.path(!0),t._parts.query){for(var n="",o=0,a=t._parts.query.split("&"),s=a.length;o<s;o++){var l=(a[o]||"").split("=");n+="&"+i.decodeQuery(l[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==l[1]&&(n+="="+i.decodeQuery(l[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}r+="?"+n.substring(1)}return r+i.decodeQuery(t.hash(),!0)},a.absoluteTo=function(e){var t,r,n,o=this.clone(),a=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof i||(e=new i(e)),o._parts.protocol)return o;if(o._parts.protocol=e._parts.protocol,this._parts.hostname)return o;for(r=0;n=a[r];r++)o._parts[n]=e._parts[n];return o._parts.path?(".."===o._parts.path.substring(-2)&&(o._parts.path+="/"),"/"!==o.path().charAt(0)&&(t=(t=e.directory())||(0===e.path().indexOf("/")?"/":""),o._parts.path=(t?t+"/":"")+o._parts.path,o.normalizePath())):(o._parts.path=e._parts.path,o._parts.query||(o._parts.query=e._parts.query)),o.build(),o},a.relativeTo=function(e){var t,r,n,o,a,s=this.clone().normalize();if(s._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new i(e).normalize(),t=s._parts,r=e._parts,o=s.path(),a=e.path(),"/"!==o.charAt(0))throw new Error("URI is already relative");if("/"!==a.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(t.protocol===r.protocol&&(t.protocol=null),t.username!==r.username||t.password!==r.password)return s.build();if(null!==t.protocol||null!==t.username||null!==t.password)return s.build();if(t.hostname!==r.hostname||t.port!==r.port)return s.build();if(t.hostname=null,t.port=null,o===a)return t.path="",s.build();if(!(n=i.commonPath(o,a)))return s.build();var l=r.path.substring(n.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return t.path=l+t.path.substring(n.length)||"./",s.build()},a.equals=function(e){var t,r,n,o,a,l=this.clone(),c=new i(e),d={};if(l.normalize(),c.normalize(),l.toString()===c.toString())return!0;if(n=l.query(),o=c.query(),l.query(""),c.query(""),l.toString()!==c.toString())return!1;if(n.length!==o.length)return!1;for(a in t=i.parseQuery(n,this._parts.escapeQuerySpace),r=i.parseQuery(o,this._parts.escapeQuerySpace),t)if(s.call(t,a)){if(u(t[a])){if(!p(t[a],r[a]))return!1}else if(t[a]!==r[a])return!1;d[a]=!0}for(a in r)if(s.call(r,a)&&!d[a])return!1;return!0},a.preventInvalidHostname=function(e){return this._parts.preventInvalidHostname=!!e,this},a.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},a.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},i}))},9127:function(e,t,r){var n,o,i;!function(a,s){"use strict";e.exports?e.exports=s(r(4193)):(o=[r(4193)],void 0===(i="function"==typeof(n=s)?n.apply(t,o):n)||(e.exports=i))}(0,(function(e,t){"use strict";var r=t&&t.URITemplate,n=Object.prototype.hasOwnProperty;function o(e){return o._cache[e]?o._cache[e]:this instanceof o?(this.expression=e,o._cache[e]=this,this):new o(e)}function i(e){this.data=e,this.cache={}}var a=o.prototype,s={"":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encode"},"+":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},"#":{prefix:"#",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},".":{prefix:".",separator:".",named:!1,empty_name_separator:!1,encode:"encode"},"/":{prefix:"/",separator:"/",named:!1,empty_name_separator:!1,encode:"encode"},";":{prefix:";",separator:";",named:!0,empty_name_separator:!1,encode:"encode"},"?":{prefix:"?",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"},"&":{prefix:"&",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"}};return o._cache={},o.EXPRESSION_PATTERN=/\{([^a-zA-Z0-9%_]?)([^\}]+)(\}|$)/g,o.VARIABLE_PATTERN=/^([^*:.](?:\.?[^*:.])*)((\*)|:(\d+))?$/,o.VARIABLE_NAME_PATTERN=/[^a-zA-Z0-9%_.]/,o.LITERAL_PATTERN=/[<>{}"`^| \\]/,o.expand=function(e,t,r){var n,i,a,l=s[e.operator],c=l.named?"Named":"Unnamed",u=e.variables,d=[];for(a=0;i=u[a];a++){if(0===(n=t.get(i.name)).type&&r&&r.strict)throw new Error('Missing expansion value for variable "'+i.name+'"');if(n.val.length){if(n.type>1&&i.maxlength)throw new Error('Invalid expression: Prefix modifier not applicable to variable "'+i.name+'"');d.push(o["expand"+c](n,l,i.explode,i.explode&&l.separator||",",i.maxlength,i.name))}else n.type&&d.push("")}return d.length?l.prefix+d.join(l.separator):""},o.expandNamed=function(t,r,n,o,i,a){var s,l,c,u="",d=r.encode,h=r.empty_name_separator,p=!t[d].length,f=2===t.type?"":e[d](a);for(l=0,c=t.val.length;l<c;l++)i?(s=e[d](t.val[l][1].substring(0,i)),2===t.type&&(f=e[d](t.val[l][0].substring(0,i)))):p?(s=e[d](t.val[l][1]),2===t.type?(f=e[d](t.val[l][0]),t[d].push([f,s])):t[d].push([void 0,s])):(s=t[d][l][1],2===t.type&&(f=t[d][l][0])),u&&(u+=o),n?u+=f+(h||s?"=":"")+s:(l||(u+=e[d](a)+(h||s?"=":"")),2===t.type&&(u+=f+","),u+=s);return u},o.expandUnnamed=function(t,r,n,o,i){var a,s,l,c="",u=r.encode,d=r.empty_name_separator,h=!t[u].length;for(s=0,l=t.val.length;s<l;s++)i?a=e[u](t.val[s][1].substring(0,i)):h?(a=e[u](t.val[s][1]),t[u].push([2===t.type?e[u](t.val[s][0]):void 0,a])):a=t[u][s][1],c&&(c+=o),2===t.type&&(c+=i?e[u](t.val[s][0].substring(0,i)):t[u][s][0],c+=n?d||a?"=":"":","),c+=a;return c},o.noConflict=function(){return t.URITemplate===o&&(t.URITemplate=r),o},a.expand=function(e,t){var r="";this.parts&&this.parts.length||this.parse(),e instanceof i||(e=new i(e));for(var n=0,a=this.parts.length;n<a;n++)r+="string"==typeof this.parts[n]?this.parts[n]:o.expand(this.parts[n],e,t);return r},a.parse=function(){var e,t,r,n=this.expression,i=o.EXPRESSION_PATTERN,a=o.VARIABLE_PATTERN,l=o.VARIABLE_NAME_PATTERN,c=o.LITERAL_PATTERN,u=[],d=0,h=function(e){if(e.match(c))throw new Error('Invalid Literal "'+e+'"');return e};for(i.lastIndex=0;;){if(null===(t=i.exec(n))){u.push(h(n.substring(d)));break}if(u.push(h(n.substring(d,t.index))),d=t.index+t[0].length,!s[t[1]])throw new Error('Unknown Operator "'+t[1]+'" in "'+t[0]+'"');if(!t[3])throw new Error('Unclosed Expression "'+t[0]+'"');for(var p=0,f=(e=t[2].split(",")).length;p<f;p++){if(null===(r=e[p].match(a)))throw new Error('Invalid Variable "'+e[p]+'" in "'+t[0]+'"');if(r[1].match(l))throw new Error('Invalid Variable Name "'+r[1]+'" in "'+t[0]+'"');e[p]={name:r[1],explode:!!r[3],maxlength:r[4]&&parseInt(r[4],10)}}if(!e.length)throw new Error('Expression Missing Variable(s) "'+t[0]+'"');u.push({expression:t[0],operator:t[1],variables:e})}return u.length||u.push(h(n)),this.parts=u,this},i.prototype.get=function(e){var t,r,o,i=this.data,a={type:0,val:[],encode:[],encodeReserved:[]};if(void 0!==this.cache[e])return this.cache[e];if(this.cache[e]=a,null==(o="[object Function]"===String(Object.prototype.toString.call(i))?i(e):"[object Function]"===String(Object.prototype.toString.call(i[e]))?i[e](e):i[e]))return a;if("[object Array]"===String(Object.prototype.toString.call(o))){for(t=0,r=o.length;t<r;t++)void 0!==o[t]&&null!==o[t]&&a.val.push([void 0,String(o[t])]);a.val.length&&(a.type=3)}else if("[object Object]"===String(Object.prototype.toString.call(o))){for(t in o)n.call(o,t)&&void 0!==o[t]&&null!==o[t]&&a.val.push([t,String(o[t])]);a.val.length&&(a.type=2)}else a.type=1,a.val.push([void 0,String(o)]);return a},e.expand=function(t,r){var n=new o(t).expand(r);return new e(n)},o}))},9340:function(e,t,r){var n;e=r.nmd(e),function(){t&&t.nodeType,e&&e.nodeType;var o="object"==typeof r.g&&r.g;o.global!==o&&o.window!==o&&o.self;var i,a=2147483647,s=36,l=/^xn--/,c=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,p=String.fromCharCode;function f(e){throw new RangeError(d[e])}function m(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function g(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+m((e=e.replace(u,".")).split("."),t).join(".")}function y(e){for(var t,r,n=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function v(e){return m(e,(function(e){var t="";return e>65535&&(t+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+p(e)})).join("")}function b(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function x(e,t,r){var n=0;for(e=r?h(e/700):e>>1,e+=h(e/t);e>455;n+=s)e=h(e/35);return h(n+36*e/(e+38))}function _(e){var t,r,n,o,i,l,c,u,d,p,m,g=[],y=e.length,b=0,_=128,w=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&f("not-basic"),g.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<y;){for(i=b,l=1,c=s;o>=y&&f("invalid-input"),((u=(m=e.charCodeAt(o++))-48<10?m-22:m-65<26?m-65:m-97<26?m-97:s)>=s||u>h((a-b)/l))&&f("overflow"),b+=u*l,!(u<(d=c<=w?1:c>=w+26?26:c-w));c+=s)l>h(a/(p=s-d))&&f("overflow"),l*=p;w=x(b-i,t=g.length+1,0==i),h(b/t)>a-_&&f("overflow"),_+=h(b/t),b%=t,g.splice(b++,0,_)}return v(g)}function w(e){var t,r,n,o,i,l,c,u,d,m,g,v,_,w,S,k=[];for(v=(e=y(e)).length,t=128,r=0,i=72,l=0;l<v;++l)(g=e[l])<128&&k.push(p(g));for(n=o=k.length,o&&k.push("-");n<v;){for(c=a,l=0;l<v;++l)(g=e[l])>=t&&g<c&&(c=g);for(c-t>h((a-r)/(_=n+1))&&f("overflow"),r+=(c-t)*_,t=c,l=0;l<v;++l)if((g=e[l])<t&&++r>a&&f("overflow"),g==t){for(u=r,d=s;!(u<(m=d<=i?1:d>=i+26?26:d-i));d+=s)S=u-m,w=s-m,k.push(p(b(m+S%w,0))),u=h(S/w);k.push(p(b(u,0))),i=x(r,_,n==o),r=0,++n}++r,++t}return k.join("")}i={version:"1.3.2",ucs2:{decode:y,encode:v},decode:_,encode:w,toASCII:function(e){return g(e,(function(e){return c.test(e)?"xn--"+w(e):e}))},toUnicode:function(e){return g(e,(function(e){return l.test(e)?_(e.slice(4).toLowerCase()):e}))}},void 0===(n=function(){return i}.call(t,r,t,e))||(e.exports=n)}()},1270:function(e,t,r){var n;e=r.nmd(e),function(){t&&t.nodeType,e&&e.nodeType;var o="object"==typeof r.g&&r.g;o.global!==o&&o.window!==o&&o.self;var i,a=2147483647,s=36,l=/^xn--/,c=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,p=String.fromCharCode;function f(e){throw new RangeError(d[e])}function m(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function g(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+m((e=e.replace(u,".")).split("."),t).join(".")}function y(e){for(var t,r,n=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function v(e){return m(e,(function(e){var t="";return e>65535&&(t+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+p(e)})).join("")}function b(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function x(e,t,r){var n=0;for(e=r?h(e/700):e>>1,e+=h(e/t);e>455;n+=s)e=h(e/35);return h(n+36*e/(e+38))}function _(e){var t,r,n,o,i,l,c,u,d,p,m,g=[],y=e.length,b=0,_=128,w=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&f("not-basic"),g.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<y;){for(i=b,l=1,c=s;o>=y&&f("invalid-input"),((u=(m=e.charCodeAt(o++))-48<10?m-22:m-65<26?m-65:m-97<26?m-97:s)>=s||u>h((a-b)/l))&&f("overflow"),b+=u*l,!(u<(d=c<=w?1:c>=w+26?26:c-w));c+=s)l>h(a/(p=s-d))&&f("overflow"),l*=p;w=x(b-i,t=g.length+1,0==i),h(b/t)>a-_&&f("overflow"),_+=h(b/t),b%=t,g.splice(b++,0,_)}return v(g)}function w(e){var t,r,n,o,i,l,c,u,d,m,g,v,_,w,S,k=[];for(v=(e=y(e)).length,t=128,r=0,i=72,l=0;l<v;++l)(g=e[l])<128&&k.push(p(g));for(n=o=k.length,o&&k.push("-");n<v;){for(c=a,l=0;l<v;++l)(g=e[l])>=t&&g<c&&(c=g);for(c-t>h((a-r)/(_=n+1))&&f("overflow"),r+=(c-t)*_,t=c,l=0;l<v;++l)if((g=e[l])<t&&++r>a&&f("overflow"),g==t){for(u=r,d=s;!(u<(m=d<=i?1:d>=i+26?26:d-i));d+=s)S=u-m,w=s-m,k.push(p(b(m+S%w,0))),u=h(S/w);k.push(p(b(u,0))),i=x(r,_,n==o),r=0,++n}++r,++t}return k.join("")}i={version:"1.4.1",ucs2:{decode:y,encode:v},decode:_,encode:w,toASCII:function(e){return g(e,(function(e){return c.test(e)?"xn--"+w(e):e}))},toUnicode:function(e){return g(e,(function(e){return l.test(e)?_(e.slice(4).toLowerCase()):e}))}},void 0===(n=function(){return i}.call(t,r,t,e))||(e.exports=n)}()},8835:(e,t,r)=>{"use strict";var n=r(1270);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var i=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,s=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(l),u=["%","/","?",";","#"].concat(c),d=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=r(5373);function v(e,t,r){if(e&&"object"==typeof e&&e instanceof o)return e;var n=new o;return n.parse(e,t,r),n}o.prototype.parse=function(e,t,r){if("string"!=typeof e)throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),a=-1!==o&&o<e.indexOf("#")?"?":"#",l=e.split(a);l[0]=l[0].replace(/\\/g,"/");var v=e=l.join(a);if(v=v.trim(),!r&&1===e.split("#").length){var b=s.exec(v);if(b)return this.path=v,this.href=v,this.pathname=b[1],b[2]?(this.search=b[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var x=i.exec(v);if(x){var _=(x=x[0]).toLowerCase();this.protocol=_,v=v.substr(x.length)}if(r||x||v.match(/^\/\/[^@/]+@[^@/]+/)){var w="//"===v.substr(0,2);!w||x&&m[x]||(v=v.substr(2),this.slashes=!0)}if(!m[x]&&(w||x&&!g[x])){for(var S,k,T=-1,E=0;E<d.length;E++)-1!==(C=v.indexOf(d[E]))&&(-1===T||C<T)&&(T=C);for(-1!==(k=-1===T?v.lastIndexOf("@"):v.lastIndexOf("@",T))&&(S=v.slice(0,k),v=v.slice(k+1),this.auth=decodeURIComponent(S)),T=-1,E=0;E<u.length;E++){var C;-1!==(C=v.indexOf(u[E]))&&(-1===T||C<T)&&(T=C)}-1===T&&(T=v.length),this.host=v.slice(0,T),v=v.slice(T),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var j=this.hostname.split(/\./),P=(E=0,j.length);E<P;E++){var I=j[E];if(I&&!I.match(h)){for(var O="",M=0,R=I.length;M<R;M++)I.charCodeAt(M)>127?O+="x":O+=I[M];if(!O.match(h)){var L=j.slice(0,E),F=j.slice(E+1),z=I.match(p);z&&(L.push(z[1]),F.unshift(z[2])),F.length&&(v="/"+F.join(".")+v),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=n.toASCII(this.hostname));var D=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+D,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!f[_])for(E=0,P=c.length;E<P;E++){var B=c[E];if(-1!==v.indexOf(B)){var U=encodeURIComponent(B);U===B&&(U=escape(B)),v=v.split(B).join(U)}}var V=v.indexOf("#");-1!==V&&(this.hash=v.substr(V),v=v.slice(0,V));var W=v.indexOf("?");if(-1!==W?(this.search=v.substr(W),this.query=v.substr(W+1),t&&(this.query=y.parse(this.query)),v=v.slice(0,W)):t&&(this.search="",this.query={}),v&&(this.pathname=v),g[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){D=this.pathname||"";var q=this.search||"";this.path=D+q}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(i=y.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var a=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),t+o+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+n},o.prototype.resolve=function(e){return this.resolveObject(v(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if("string"==typeof e){var t=new o;t.parse(e,!1,!0),e=t}for(var r=new o,n=Object.keys(this),i=0;i<n.length;i++){var a=n[i];r[a]=this[a]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),l=0;l<s.length;l++){var c=s[l];"protocol"!==c&&(r[c]=e[c])}return g[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!g[e.protocol]){for(var u=Object.keys(e),d=0;d<u.length;d++){var h=u[d];r[h]=e[h]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||m[e.protocol])r.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var f=r.pathname||"",y=r.search||"";r.path=f+y}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var v=r.pathname&&"/"===r.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),x=b||v||r.host&&e.pathname,_=x,w=r.pathname&&r.pathname.split("/")||[],S=(p=e.pathname&&e.pathname.split("/")||[],r.protocol&&!g[r.protocol]);if(S&&(r.hostname="",r.port=null,r.host&&(""===w[0]?w[0]=r.host:w.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),x=x&&(""===p[0]||""===w[0])),b)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,w=p;else if(p.length)w||(w=[]),w.pop(),w=w.concat(p),r.search=e.search,r.query=e.query;else if(null!=e.search)return S&&(r.host=w.shift(),r.hostname=r.host,(A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=A.shift(),r.hostname=A.shift(),r.host=r.hostname)),r.search=e.search,r.query=e.query,null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!w.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var k=w.slice(-1)[0],T=(r.host||e.host||w.length>1)&&("."===k||".."===k)||""===k,E=0,C=w.length;C>=0;C--)"."===(k=w[C])?w.splice(C,1):".."===k?(w.splice(C,1),E++):E&&(w.splice(C,1),E--);if(!x&&!_)for(;E--;E)w.unshift("..");!x||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),T&&"/"!==w.join("/").substr(-1)&&w.push("");var A,j=""===w[0]||w[0]&&"/"===w[0].charAt(0);return S&&(r.hostname=j?"":w.length?w.shift():"",r.host=r.hostname,(A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=A.shift(),r.hostname=A.shift(),r.host=r.hostname)),(x=x||r.host&&w.length)&&!j&&w.unshift(""),w.length>0?r.pathname=w.join("/"):(r.pathname=null,r.path=null),null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},o.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},t.parse=v,t.resolve=function(e,t){return v(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?v(e,!1,!0).resolveObject(t):t},t.format=function(e){return"string"==typeof e&&(e=v(e)),e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o},4643:(e,t,r)=>{function n(e){try{if(!r.g.localStorage)return!1}catch(e){return!1}var t=r.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}},1135:e=>{e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},9032:(e,t,r)=>{"use strict";var n=r(7244),o=r(8184),i=r(5767),a=r(5680);function s(e){return e.call.bind(e)}var l="undefined"!=typeof BigInt,c="undefined"!=typeof Symbol,u=s(Object.prototype.toString),d=s(Number.prototype.valueOf),h=s(String.prototype.valueOf),p=s(Boolean.prototype.valueOf);if(l)var f=s(BigInt.prototype.valueOf);if(c)var m=s(Symbol.prototype.valueOf);function g(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function y(e){return"[object Map]"===u(e)}function v(e){return"[object Set]"===u(e)}function b(e){return"[object WeakMap]"===u(e)}function x(e){return"[object WeakSet]"===u(e)}function _(e){return"[object ArrayBuffer]"===u(e)}function w(e){return"undefined"!=typeof ArrayBuffer&&(_.working?_(e):e instanceof ArrayBuffer)}function S(e){return"[object DataView]"===u(e)}function k(e){return"undefined"!=typeof DataView&&(S.working?S(e):e instanceof DataView)}t.isArgumentsObject=n,t.isGeneratorFunction=o,t.isTypedArray=a,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):a(e)||k(e)},t.isUint8Array=function(e){return"Uint8Array"===i(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===i(e)},t.isUint16Array=function(e){return"Uint16Array"===i(e)},t.isUint32Array=function(e){return"Uint32Array"===i(e)},t.isInt8Array=function(e){return"Int8Array"===i(e)},t.isInt16Array=function(e){return"Int16Array"===i(e)},t.isInt32Array=function(e){return"Int32Array"===i(e)},t.isFloat32Array=function(e){return"Float32Array"===i(e)},t.isFloat64Array=function(e){return"Float64Array"===i(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===i(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===i(e)},y.working="undefined"!=typeof Map&&y(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(y.working?y(e):e instanceof Map)},v.working="undefined"!=typeof Set&&v(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(v.working?v(e):e instanceof Set)},b.working="undefined"!=typeof WeakMap&&b(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(b.working?b(e):e instanceof WeakMap)},x.working="undefined"!=typeof WeakSet&&x(new WeakSet),t.isWeakSet=function(e){return x(e)},_.working="undefined"!=typeof ArrayBuffer&&_(new ArrayBuffer),t.isArrayBuffer=w,S.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&S(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=k;var T="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function E(e){return"[object SharedArrayBuffer]"===u(e)}function C(e){return void 0!==T&&(void 0===E.working&&(E.working=E(new T)),E.working?E(e):e instanceof T)}function A(e){return g(e,d)}function j(e){return g(e,h)}function P(e){return g(e,p)}function I(e){return l&&g(e,f)}function O(e){return c&&g(e,m)}t.isSharedArrayBuffer=C,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===u(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===u(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===u(e)},t.isGeneratorObject=function(e){return"[object Generator]"===u(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===u(e)},t.isNumberObject=A,t.isStringObject=j,t.isBooleanObject=P,t.isBigIntObject=I,t.isSymbolObject=O,t.isBoxedPrimitive=function(e){return A(e)||j(e)||P(e)||I(e)||O(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(w(e)||C(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},537:(e,t,r)=>{var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},o=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(l(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,a=String(e).replace(o,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),s=n[r];r<i;s=n[++r])g(s)||!_(s)?a+=" "+s:a+=" "+l(s);return a},t.deprecate=function(e,r){if("undefined"!=typeof process&&!0===process.noDeprecation)return e;if("undefined"==typeof process)return function(){return t.deprecate(e,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),n=!0}return e.apply(this,arguments)}};var i={},a=/^$/;if({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1Ijoic2VyZ2UzNjl4MzMiLCJhIjoiY20zZHh6M2h2MDVoZzJqcTdudXhidm5kdyJ9.31fpP6C_HjNaTEN3C0fDTg"}.NODE_DEBUG){var s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1Ijoic2VyZ2UzNjl4MzMiLCJhIjoiY20zZHh6M2h2MDVoZzJqcTdudXhidm5kdyJ9.31fpP6C_HjNaTEN3C0fDTg"}.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+s+"$","i")}function l(e,r){var n={seen:[],stylize:u};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),m(r)?n.showHidden=r:r&&t._extend(n,r),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),d(n,e,n.depth)}function c(e,t){var r=l.styles[t];return r?"\x1b["+l.colors[r][0]+"m"+e+"\x1b["+l.colors[r][1]+"m":e}function u(e,t){return e}function d(e,r,n){if(e.customInspect&&r&&k(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,e);return v(o)||(o=d(e,o,n)),o}var i=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return y(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}(e,r);if(i)return i;var a=Object.keys(r),s=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(r)),S(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return h(r);if(0===a.length){if(k(r)){var l=r.name?": "+r.name:"";return e.stylize("[Function"+l+"]","special")}if(x(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(w(r))return e.stylize(Date.prototype.toString.call(r),"date");if(S(r))return h(r)}var c,u="",_=!1,T=["{","}"];return f(r)&&(_=!0,T=["[","]"]),k(r)&&(u=" [Function"+(r.name?": "+r.name:"")+"]"),x(r)&&(u=" "+RegExp.prototype.toString.call(r)),w(r)&&(u=" "+Date.prototype.toUTCString.call(r)),S(r)&&(u=" "+h(r)),0!==a.length||_&&0!=r.length?n<0?x(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),c=_?function(e,t,r,n,o){for(var i=[],a=0,s=t.length;a<s;++a)A(t,String(a))?i.push(p(e,t,r,n,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(p(e,t,r,n,o,!0))})),i}(e,r,n,s,a):a.map((function(t){return p(e,r,n,s,t,_)})),e.seen.pop(),function(e,t,r){var n=e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return n>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(c,u,T)):T[0]+u+T[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,r,n,o,i){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),A(n,o)||(a="["+o+"]"),s||(e.seen.indexOf(l.value)<0?(s=g(r)?d(e,l.value,null):d(e,l.value,r-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").slice(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),b(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.slice(1,-1),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function f(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function y(e){return"number"==typeof e}function v(e){return"string"==typeof e}function b(e){return void 0===e}function x(e){return _(e)&&"[object RegExp]"===T(e)}function _(e){return"object"==typeof e&&null!==e}function w(e){return _(e)&&"[object Date]"===T(e)}function S(e){return _(e)&&("[object Error]"===T(e)||e instanceof Error)}function k(e){return"function"==typeof e}function T(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!i[e])if(a.test(e)){var r=process.pid;i[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else i[e]=function(){};return i[e]},t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=r(9032),t.isArray=f,t.isBoolean=m,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=v,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=b,t.isRegExp=x,t.types.isRegExp=x,t.isObject=_,t.isDate=w,t.types.isDate=w,t.isError=S,t.types.isNativeError=S,t.isFunction=k,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(1135);var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,r;console.log("%s - %s",(r=[E((e=new Date).getHours()),E(e.getMinutes()),E(e.getSeconds())].join(":"),[e.getDate(),C[e.getMonth()],r].join(" ")),t.format.apply(t,arguments))},t.inherits=r(6698),t._extend=function(e,t){if(!t||!_(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var j="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(j&&e[j]){var t;if("function"!=typeof(t=e[j]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,j,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,o)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),j&&Object.defineProperty(t,j,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=j,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var n=t.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var o=this,i=function(){return n.apply(o,arguments)};e.apply(this,t).then((function(e){process.nextTick(i.bind(null,null,e))}),(function(e){process.nextTick(P.bind(null,e,i))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,n(e)),t}},5767:(e,t,r)=>{"use strict";var n=r(2682),o=r(9209),i=r(487),a=r(8075),s=r(5795),l=a("Object.prototype.toString"),c=r(9092)(),u="undefined"==typeof globalThis?r.g:globalThis,d=o(),h=a("String.prototype.slice"),p=Object.getPrototypeOf,f=a("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},m={__proto__:null};n(d,c&&s&&p?function(e){var t=new u[e];if(Symbol.toStringTag in t){var r=p(t),n=s(r,Symbol.toStringTag);if(!n){var o=p(r);n=s(o,Symbol.toStringTag)}m["$"+e]=i(n.get)}}:function(e){var t=new u[e],r=t.slice||t.set;r&&(m["$"+e]=i(r))}),e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!c){var t=h(l(e),8,-1);return f(d,t)>-1?t:"Object"===t&&function(e){var t=!1;return n(m,(function(r,n){if(!t)try{r(e),t=h(n,1)}catch(e){}})),t}(e)}return s?function(e){var t=!1;return n(m,(function(r,n){if(!t)try{"$"+r(e)===n&&(t=h(n,1))}catch(e){}})),t}(e):null}},7510:e=>{e.exports=function(){for(var e={},r=0;r<arguments.length;r++){var n=arguments[r];for(var o in n)t.call(n,o)&&(e[o]=n[o])}return e};var t=Object.prototype.hasOwnProperty},2894:()=>{},2634:()=>{},5340:()=>{},9838:()=>{},9209:(e,t,r)=>{"use strict";var n=r(6578),o="undefined"==typeof globalThis?r.g:globalThis;e.exports=function(){for(var e=[],t=0;t<n.length;t++)"function"==typeof o[n[t]]&&(e[e.length]=n[t]);return e}},1083:(e,t,n)=>{"use strict";n.d(t,{A:()=>Ct});var i={};function u(e,t){return function(){return e.apply(t,arguments)}}n.r(i),n.d(i,{hasBrowserEnv:()=>xe,hasStandardBrowserEnv:()=>we,hasStandardBrowserWebWorkerEnv:()=>Se,navigator:()=>_e,origin:()=>ke});const{toString:d}=Object.prototype,{getPrototypeOf:h}=Object,p=(f=Object.create(null),e=>{const t=d.call(e);return f[t]||(f[t]=t.slice(8,-1).toLowerCase())});var f;const m=e=>(e=e.toLowerCase(),t=>p(t)===e),g=e=>t=>typeof t===e,{isArray:y}=Array,v=g("undefined"),b=m("ArrayBuffer"),x=g("string"),_=g("function"),w=g("number"),S=e=>null!==e&&"object"==typeof e,k=e=>{if("object"!==p(e))return!1;const t=h(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},T=m("Date"),E=m("File"),C=m("Blob"),A=m("FileList"),j=m("URLSearchParams"),[P,I,O,M]=["ReadableStream","Request","Response","Headers"].map(m);function R(e,t){let r,n,{allOwnKeys:o=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e)if("object"!=typeof e&&(e=[e]),y(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{const n=o?Object.getOwnPropertyNames(e):Object.keys(e),i=n.length;let a;for(r=0;r<i;r++)a=n[r],t.call(null,e[a],a,e)}}function L(e,t){t=t.toLowerCase();const r=Object.keys(e);let n,o=r.length;for(;o-- >0;)if(n=r[o],t===n.toLowerCase())return n;return null}const F="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:r.g,z=e=>!v(e)&&e!==F,D=(N="undefined"!=typeof Uint8Array&&h(Uint8Array),e=>N&&e instanceof N);var N;const B=m("HTMLFormElement"),U=(e=>{let{hasOwnProperty:t}=e;return(e,r)=>t.call(e,r)})(Object.prototype),V=m("RegExp"),W=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};R(r,((r,o)=>{let i;!1!==(i=t(r,o,e))&&(n[o]=i||r)})),Object.defineProperties(e,n)},q="abcdefghijklmnopqrstuvwxyz",H="0123456789",G={DIGIT:H,ALPHA:q,ALPHA_DIGIT:q+q.toUpperCase()+H},K=m("AsyncFunction"),X=(Z="function"==typeof setImmediate,Y=_(F.postMessage),Z?setImmediate:Y?(J="axios@".concat(Math.random()),$=[],F.addEventListener("message",(e=>{let{source:t,data:r}=e;t===F&&r===J&&$.length&&$.shift()()}),!1),e=>{$.push(e),F.postMessage(J,"*")}):e=>setTimeout(e));var Z,Y,J,$;const Q="undefined"!=typeof queueMicrotask?queueMicrotask.bind(F):"undefined"!=typeof process&&process.nextTick||X,ee={isArray:y,isArrayBuffer:b,isBuffer:function(e){return null!==e&&!v(e)&&null!==e.constructor&&!v(e.constructor)&&_(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||_(e.append)&&("formdata"===(t=p(e))||"object"===t&&_(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&b(e.buffer),t},isString:x,isNumber:w,isBoolean:e=>!0===e||!1===e,isObject:S,isPlainObject:k,isReadableStream:P,isRequest:I,isResponse:O,isHeaders:M,isUndefined:v,isDate:T,isFile:E,isBlob:C,isRegExp:V,isFunction:_,isStream:e=>S(e)&&_(e.pipe),isURLSearchParams:j,isTypedArray:D,isFileList:A,forEach:R,merge:function e(){const{caseless:t}=z(this)&&this||{},r={},n=(n,o)=>{const i=t&&L(r,o)||o;k(r[i])&&k(n)?r[i]=e(r[i],n):k(n)?r[i]=e({},n):y(n)?r[i]=n.slice():r[i]=n};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&R(arguments[o],n);return r},extend:function(e,t,r){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return R(t,((t,n)=>{r&&_(t)?e[n]=u(t,r):e[n]=t}),{allOwnKeys:n}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let o,i,a;const s={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)a=o[i],n&&!n(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==r&&h(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:p,kindOfTest:m,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(y(e))return e;let t=e.length;if(!w(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:B,hasOwnProperty:U,hasOwnProp:U,reduceDescriptors:W,freezeMethods:e=>{W(e,((t,r)=>{if(_(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];_(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach((e=>{r[e]=!0}))};return y(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:L,global:F,isContextDefined:z,ALPHABET:G,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G.ALPHA_DIGIT,r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r},isSpecCompliantForm:function(e){return!!(e&&_(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(S(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const o=y(e)?[]:{};return R(e,((e,t)=>{const i=r(e,n+1);!v(i)&&(o[t]=i)})),t[n]=void 0,o}}return e};return r(e,0)},isAsyncFn:K,isThenable:e=>e&&(S(e)||_(e))&&_(e.then)&&_(e.catch),setImmediate:X,asap:Q};function te(e,t,r,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o,this.status=o.status?o.status:null)}ee.inherits(te,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.status}}});const re=te.prototype,ne={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{ne[e]={value:e}})),Object.defineProperties(te,ne),Object.defineProperty(re,"isAxiosError",{value:!0}),te.from=(e,t,r,n,o,i)=>{const a=Object.create(re);return ee.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),te.call(a,e.message,t,r,n,o),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const oe=te;var ie=n(8287).Buffer;function ae(e){return ee.isPlainObject(e)||ee.isArray(e)}function se(e){return ee.endsWith(e,"[]")?e.slice(0,-2):e}function le(e,t,r){return e?e.concat(t).map((function(e,t){return e=se(e),!r&&t?"["+e+"]":e})).join(r?".":""):t}const ce=ee.toFlatObject(ee,{},null,(function(e){return/^is[A-Z]/.test(e)})),ue=function(e,t,r){if(!ee.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=ee.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!ee.isUndefined(t[e])}))).metaTokens,o=r.visitor||c,i=r.dots,a=r.indexes,s=(r.Blob||"undefined"!=typeof Blob&&Blob)&&ee.isSpecCompliantForm(t);if(!ee.isFunction(o))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(ee.isDate(e))return e.toISOString();if(!s&&ee.isBlob(e))throw new oe("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(e)||ee.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):ie.from(e):e}function c(e,r,o){let s=e;if(e&&!o&&"object"==typeof e)if(ee.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(ee.isArray(e)&&function(e){return ee.isArray(e)&&!e.some(ae)}(e)||(ee.isFileList(e)||ee.endsWith(r,"[]"))&&(s=ee.toArray(e)))return r=se(r),s.forEach((function(e,n){!ee.isUndefined(e)&&null!==e&&t.append(!0===a?le([r],n,i):null===a?r:r+"[]",l(e))})),!1;return!!ae(e)||(t.append(le(o,r,i),l(e)),!1)}const u=[],d=Object.assign(ce,{defaultVisitor:c,convertValue:l,isVisitable:ae});if(!ee.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!ee.isUndefined(r)){if(-1!==u.indexOf(r))throw Error("Circular reference detected in "+n.join("."));u.push(r),ee.forEach(r,(function(r,i){!0===(!(ee.isUndefined(r)||null===r)&&o.call(t,r,ee.isString(i)?i.trim():i,n,d))&&e(r,n?n.concat(i):[i])})),u.pop()}}(e),t};function de(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function he(e,t){this._pairs=[],e&&ue(e,this,t)}const pe=he.prototype;pe.append=function(e,t){this._pairs.push([e,t])},pe.toString=function(e){const t=e?function(t){return e.call(this,t,de)}:de;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const fe=he;function me(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ge(e,t,r){if(!t)return e;const n=r&&r.encode||me,o=r&&r.serialize;let i;if(i=o?o(t,r):ee.isURLSearchParams(t)?t.toString():new fe(t,r).toString(n),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const ye=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ee.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},ve={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},be={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:fe,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},xe="undefined"!=typeof window&&"undefined"!=typeof document,_e="object"==typeof navigator&&navigator||void 0,we=xe&&(!_e||["ReactNative","NativeScript","NS"].indexOf(_e.product)<0),Se="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,ke=xe&&window.location.href||"http://localhost",Te=o(o({},i),be),Ee=function(e){function t(e,r,n,o){let i=e[o++];if("__proto__"===i)return!0;const a=Number.isFinite(+i),s=o>=e.length;return i=!i&&ee.isArray(n)?n.length:i,s?(ee.hasOwnProp(n,i)?n[i]=[n[i],r]:n[i]=r,!a):(n[i]&&ee.isObject(n[i])||(n[i]=[]),t(e,r,n[i],o)&&ee.isArray(n[i])&&(n[i]=function(e){const t={},r=Object.keys(e);let n;const o=r.length;let i;for(n=0;n<o;n++)i=r[n],t[i]=e[i];return t}(n[i])),!a)}if(ee.isFormData(e)&&ee.isFunction(e.entries)){const r={};return ee.forEachEntry(e,((e,n)=>{t(function(e){return ee.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,r,0)})),r}return null},Ce={transitional:ve,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,o=ee.isObject(e);if(o&&ee.isHTMLForm(e)&&(e=new FormData(e)),ee.isFormData(e))return n?JSON.stringify(Ee(e)):e;if(ee.isArrayBuffer(e)||ee.isBuffer(e)||ee.isStream(e)||ee.isFile(e)||ee.isBlob(e)||ee.isReadableStream(e))return e;if(ee.isArrayBufferView(e))return e.buffer;if(ee.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ue(e,new Te.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return Te.isNode&&ee.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=ee.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ue(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||n?(t.setContentType("application/json",!1),function(e){if(ee.isString(e))try{return(0,JSON.parse)(e),ee.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Ce.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(ee.isResponse(e)||ee.isReadableStream(e))return e;if(e&&ee.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw oe.from(e,oe.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Te.classes.FormData,Blob:Te.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],(e=>{Ce.headers[e]={}}));const Ae=Ce,je=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Pe=Symbol("internals");function Ie(e){return e&&String(e).trim().toLowerCase()}function Oe(e){return!1===e||null==e?e:ee.isArray(e)?e.map(Oe):String(e)}function Me(e,t,r,n,o){return ee.isFunction(n)?n.call(this,t,r):(o&&(t=r),ee.isString(t)?ee.isString(n)?-1!==t.indexOf(n):ee.isRegExp(n)?n.test(t):void 0:void 0)}class Re{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function o(e,t,r){const o=Ie(t);if(!o)throw new Error("header name must be a non-empty string");const i=ee.findKey(n,o);(!i||void 0===n[i]||!0===r||void 0===r&&!1!==n[i])&&(n[i||t]=Oe(e))}const i=(e,t)=>ee.forEach(e,((e,r)=>o(e,r,t)));if(ee.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(ee.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let r,n,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),r=e.substring(0,o).trim().toLowerCase(),n=e.substring(o+1).trim(),!r||t[r]&&je[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)})),t})(e),t);else if(ee.isHeaders(e))for(const[a,s]of e.entries())o(s,a,r);else null!=e&&o(t,e,r);return this}get(e,t){if(e=Ie(e)){const r=ee.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(ee.isFunction(t))return t.call(this,e,r);if(ee.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ie(e)){const r=ee.findKey(this,e);return!(!r||void 0===this[r]||t&&!Me(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function o(e){if(e=Ie(e)){const o=ee.findKey(r,e);!o||t&&!Me(0,r[o],o,t)||(delete r[o],n=!0)}}return ee.isArray(e)?e.forEach(o):o(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const o=t[r];e&&!Me(0,this[o],o,e,!0)||(delete this[o],n=!0)}return n}normalize(e){const t=this,r={};return ee.forEach(this,((n,o)=>{const i=ee.findKey(r,o);if(i)return t[i]=Oe(n),void delete t[o];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,r)=>t.toUpperCase()+r))}(o):String(o).trim();a!==o&&delete t[o],t[a]=Oe(n),r[a]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return ee.forEach(this,((r,n)=>{null!=r&&!1!==r&&(t[n]=e&&ee.isArray(r)?r.join(", "):r)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,r]=e;return t+": "+r})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return n.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Pe]=this[Pe]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=Ie(e);t[n]||(function(e,t){const r=ee.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+r,{value:function(e,r,o){return this[n].call(this,t,e,r,o)},configurable:!0})}))}(r,e),t[n]=!0)}return ee.isArray(e)?e.forEach(n):n(e),this}}Re.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ee.reduceDescriptors(Re.prototype,((e,t)=>{let{value:r}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(e){this[n]=e}}})),ee.freezeMethods(Re);const Le=Re;function Fe(e,t){const r=this||Ae,n=t||r,o=Le.from(n.headers);let i=n.data;return ee.forEach(e,(function(e){i=e.call(r,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function ze(e){return!(!e||!e.__CANCEL__)}function De(e,t,r){oe.call(this,null==e?"canceled":e,oe.ERR_CANCELED,t,r),this.name="CanceledError"}ee.inherits(De,oe,{__CANCEL__:!0});const Ne=De;function Be(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new oe("Request failed with status code "+r.status,[oe.ERR_BAD_REQUEST,oe.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}const Ue=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0;const o=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let o,i=0,a=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),c=n[a];o||(o=l),r[i]=s,n[i]=l;let u=a,d=0;for(;u!==i;)d+=r[u++],u%=e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),l-o<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}}(50,250);return function(e,t){let r,n,o=0,i=1e3/t;const a=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();o=i,r=null,n&&(clearTimeout(n),n=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-o;for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];t>=i?a(l,e):(r=l,n||(n=setTimeout((()=>{n=null,a(r)}),i-t)))},()=>r&&a(r)]}((r=>{const i=r.loaded,a=r.lengthComputable?r.total:void 0,s=i-n,l=o(s);n=i,e({loaded:i,total:a,progress:a?i/a:void 0,bytes:s,rate:l||void 0,estimated:l&&a&&i<=a?(a-i)/l:void 0,event:r,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),r)},Ve=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},We=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ee.asap((()=>e(...r)))},qe=Te.hasStandardBrowserEnv?function(){const e=Te.navigator&&/(msie|trident)/i.test(Te.navigator.userAgent),t=document.createElement("a");let r;function n(r){let n=r;return e&&(t.setAttribute("href",n),n=t.href),t.setAttribute("href",n),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return r=n(window.location.href),function(e){const t=ee.isString(e)?n(e):e;return t.protocol===r.protocol&&t.host===r.host}}():function(){return!0},He=Te.hasStandardBrowserEnv?{write(e,t,r,n,o,i){const a=[e+"="+encodeURIComponent(t)];ee.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),ee.isString(n)&&a.push("path="+n),ee.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Ge(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Ke=e=>e instanceof Le?o({},e):e;function Xe(e,t){t=t||{};const r={};function n(e,t,r){return ee.isPlainObject(e)&&ee.isPlainObject(t)?ee.merge.call({caseless:r},e,t):ee.isPlainObject(t)?ee.merge({},t):ee.isArray(t)?t.slice():t}function o(e,t,r){return ee.isUndefined(t)?ee.isUndefined(e)?void 0:n(void 0,e,r):n(e,t,r)}function i(e,t){if(!ee.isUndefined(t))return n(void 0,t)}function a(e,t){return ee.isUndefined(t)?ee.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function s(r,o,i){return i in t?n(r,o):i in e?n(void 0,r):void 0}const l={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t)=>o(Ke(e),Ke(t),!0)};return ee.forEach(Object.keys(Object.assign({},e,t)),(function(n){const i=l[n]||o,a=i(e[n],t[n],n);ee.isUndefined(a)&&i!==s||(r[n]=a)})),r}const Ze=e=>{const t=Xe({},e);let r,{data:n,withXSRFToken:o,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:l}=t;if(t.headers=s=Le.from(s),t.url=ge(Ge(t.baseURL,t.url),e.params,e.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),ee.isFormData(n))if(Te.hasStandardBrowserEnv||Te.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(r=s.getContentType())){const[e,...t]=r?r.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(Te.hasStandardBrowserEnv&&(o&&ee.isFunction(o)&&(o=o(t)),o||!1!==o&&qe(t.url))){const e=i&&a&&He.read(a);e&&s.set(i,e)}return t},Ye="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,r){const n=Ze(e);let o=n.data;const i=Le.from(n.headers).normalize();let a,s,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=n;function f(){c&&c(),u&&u(),n.cancelToken&&n.cancelToken.unsubscribe(a),n.signal&&n.signal.removeEventListener("abort",a)}let m=new XMLHttpRequest;function g(){if(!m)return;const n=Le.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Be((function(e){t(e),f()}),(function(e){r(e),f()}),{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:n,config:e,request:m}),m=null}m.open(n.method.toUpperCase(),n.url,!0),m.timeout=n.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(r(new oe("Request aborted",oe.ECONNABORTED,e,m)),m=null)},m.onerror=function(){r(new oe("Network Error",oe.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const o=n.transitional||ve;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new oe(t,o.clarifyTimeoutError?oe.ETIMEDOUT:oe.ECONNABORTED,e,m)),m=null},void 0===o&&i.setContentType(null),"setRequestHeader"in m&&ee.forEach(i.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),ee.isUndefined(n.withCredentials)||(m.withCredentials=!!n.withCredentials),d&&"json"!==d&&(m.responseType=n.responseType),p&&([l,u]=Ue(p,!0),m.addEventListener("progress",l)),h&&m.upload&&([s,c]=Ue(h),m.upload.addEventListener("progress",s),m.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(a=t=>{m&&(r(!t||t.type?new Ne(null,e,m):t),m.abort(),m=null)},n.cancelToken&&n.cancelToken.subscribe(a),n.signal&&(n.signal.aborted?a():n.signal.addEventListener("abort",a)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);y&&-1===Te.protocols.indexOf(y)?r(new oe("Unsupported protocol "+y+":",oe.ERR_BAD_REQUEST,e)):m.send(o||null)}))},Je=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const o=function(e){if(!r){r=!0,a();const t=e instanceof Error?e:this.reason;n.abort(t instanceof oe?t:new Ne(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{i=null,o(new oe("timeout ".concat(t," of ms exceeded"),oe.ETIMEDOUT))}),t);const a=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)})),e=null)};e.forEach((e=>e.addEventListener("abort",o)));const{signal:s}=n;return s.unsubscribe=()=>ee.asap(a),s}},$e=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let n,o=0;for(;o<r;)n=o+t,yield e.slice(o,n),o=n},Qe=function(){var e=a((function*(e){if(e[Symbol.asyncIterator])return void(yield*l(c(e),s));const t=e.getReader();try{for(;;){const{done:e,value:r}=yield s(t.read());if(e)break;yield r}}finally{yield s(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),et=(e,t,r,n)=>{const o=function(){var e=a((function*(e,t){var r,n=!1,o=!1;try{for(var i,a=c(Qe(e));n=!(i=yield s(a.next())).done;n=!1){const e=i.value;yield*l(c($e(e,t)),s)}}catch(u){o=!0,r=u}finally{try{n&&null!=a.return&&(yield s(a.return()))}finally{if(o)throw r}}}));return function(t,r){return e.apply(this,arguments)}}()(e,t);let i,u=0,d=e=>{i||(i=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await o.next();if(t)return d(),void e.close();let i=n.byteLength;if(r){let e=u+=i;r(e)}e.enqueue(new Uint8Array(n))}catch(e){throw d(e),e}},cancel:e=>(d(e),o.return())},{highWaterMark:2})},tt="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,rt=tt&&"function"==typeof ReadableStream,nt=tt&&("function"==typeof TextEncoder?(ot=new TextEncoder,e=>ot.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var ot;const it=function(e){try{for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return!!e(...r)}catch(e){return!1}},at=rt&&it((()=>{let e=!1;const t=new Request(Te.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),st=rt&&it((()=>ee.isReadableStream(new Response("").body))),lt={stream:st&&(e=>e.body)};var ct;tt&&(ct=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!lt[e]&&(lt[e]=ee.isFunction(ct[e])?t=>t[e]():(t,r)=>{throw new oe("Response type '".concat(e,"' is not supported"),oe.ERR_NOT_SUPPORT,r)})})));const ut={http:null,xhr:Ye,fetch:tt&&(async e=>{let{url:t,method:r,data:n,signal:i,cancelToken:a,timeout:s,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:d,withCredentials:h="same-origin",fetchOptions:p}=Ze(e);u=u?(u+"").toLowerCase():"text";let f,m=Je([i,a&&a.toAbortSignal()],s);const g=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let y;try{if(c&&at&&"get"!==r&&"head"!==r&&0!==(y=await(async(e,t)=>{const r=ee.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(ee.isBlob(e))return e.size;if(ee.isSpecCompliantForm(e)){const t=new Request(Te.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return ee.isArrayBufferView(e)||ee.isArrayBuffer(e)?e.byteLength:(ee.isURLSearchParams(e)&&(e+=""),ee.isString(e)?(await nt(e)).byteLength:void 0)})(t):r})(d,n))){let e,r=new Request(t,{method:"POST",body:n,duplex:"half"});if(ee.isFormData(n)&&(e=r.headers.get("content-type"))&&d.setContentType(e),r.body){const[e,t]=Ve(y,Ue(We(c)));n=et(r.body,65536,e,t)}}ee.isString(h)||(h=h?"include":"omit");const i="credentials"in Request.prototype;f=new Request(t,o(o({},p),{},{signal:m,method:r.toUpperCase(),headers:d.normalize().toJSON(),body:n,duplex:"half",credentials:i?h:void 0}));let a=await fetch(f);const s=st&&("stream"===u||"response"===u);if(st&&(l||s&&g)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=a[t]}));const t=ee.toFiniteNumber(a.headers.get("content-length")),[r,n]=l&&Ve(t,Ue(We(l),!0))||[];a=new Response(et(a.body,65536,r,(()=>{n&&n(),g&&g()})),e)}u=u||"text";let v=await lt[ee.findKey(lt,u)||"text"](a,e);return!s&&g&&g(),await new Promise(((t,r)=>{Be(t,r,{data:v,headers:Le.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:f})}))}catch(t){if(g&&g(),t&&"TypeError"===t.name&&/fetch/i.test(t.message))throw Object.assign(new oe("Network Error",oe.ERR_NETWORK,e,f),{cause:t.cause||t});throw oe.from(t,t&&t.code,e,f)}})};ee.forEach(ut,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const dt=e=>"- ".concat(e),ht=e=>ee.isFunction(e)||null===e||!1===e,pt=e=>{e=ee.isArray(e)?e:[e];const{length:t}=e;let r,n;const o={};for(let i=0;i<t;i++){let t;if(r=e[i],n=r,!ht(r)&&(n=ut[(t=String(r)).toLowerCase()],void 0===n))throw new oe("Unknown adapter '".concat(t,"'"));if(n)break;o[t||"#"+i]=n}if(!n){const e=Object.entries(o).map((e=>{let[t,r]=e;return"adapter ".concat(t," ")+(!1===r?"is not supported by the environment":"is not available in the build")}));let r=t?e.length>1?"since :\n"+e.map(dt).join("\n"):" "+dt(e[0]):"as no adapter specified";throw new oe("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return n};function ft(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ne(null,e)}function mt(e){return ft(e),e.headers=Le.from(e.headers),e.data=Fe.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),pt(e.adapter||Ae.adapter)(e).then((function(t){return ft(e),t.data=Fe.call(e,e.transformResponse,t),t.headers=Le.from(t.headers),t}),(function(t){return ze(t)||(ft(e),t&&t.response&&(t.response.data=Fe.call(e,e.transformResponse,t.response),t.response.headers=Le.from(t.response.headers))),Promise.reject(t)}))}const gt={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{gt[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));const yt={};gt.transitional=function(e,t,r){function n(e,t){return"[Axios v1.7.7] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,o,i)=>{if(!1===e)throw new oe(n(o," has been removed"+(t?" in "+t:"")),oe.ERR_DEPRECATED);return t&&!yt[o]&&(yt[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,o,i)}};const vt={assertOptions:function(e,t,r){if("object"!=typeof e)throw new oe("options must be an object",oe.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let o=n.length;for(;o-- >0;){const i=n[o],a=t[i];if(a){const t=e[i],r=void 0===t||a(t,i,e);if(!0!==r)throw new oe("option "+i+" must be "+r,oe.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new oe("Unknown option "+i,oe.ERR_BAD_OPTION)}},validators:gt},bt=vt.validators;class xt{constructor(e){this.defaults=e,this.interceptors={request:new ye,response:new ye}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=new Error;const r=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+r):e.stack=r}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Xe(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:o}=t;void 0!==r&&vt.assertOptions(r,{silentJSONParsing:bt.transitional(bt.boolean),forcedJSONParsing:bt.transitional(bt.boolean),clarifyTimeoutError:bt.transitional(bt.boolean)},!1),null!=n&&(ee.isFunction(n)?t.paramsSerializer={serialize:n}:vt.assertOptions(n,{encode:bt.function,serialize:bt.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=o&&ee.merge(o.common,o[t.method]);o&&ee.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),t.headers=Le.concat(i,o);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!s){const e=[mt.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=a.length;let h=t;for(d=0;d<u;){const t=a[d++],r=a[d++];try{h=t(h)}catch(e){r.call(this,e);break}}try{c=mt.call(this,h)}catch(e){return Promise.reject(e)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return ge(Ge((e=Xe(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}ee.forEach(["delete","get","head","options"],(function(e){xt.prototype[e]=function(t,r){return this.request(Xe(r||{},{method:e,url:t,data:(r||{}).data}))}})),ee.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,o){return this.request(Xe(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}xt.prototype[e]=t(),xt.prototype[e+"Form"]=t(!0)}));const _t=xt;class wt{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const r=this;this.promise.then((e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e,n,o){r.reason||(r.reason=new Ne(e,n,o),t(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new wt((function(t){e=t})),cancel:e}}}const St=wt,kt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kt).forEach((e=>{let[t,r]=e;kt[r]=t}));const Tt=kt,Et=function e(t){const r=new _t(t),n=u(_t.prototype.request,r);return ee.extend(n,_t.prototype,r,{allOwnKeys:!0}),ee.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(Xe(t,r))},n}(Ae);Et.Axios=_t,Et.CanceledError=Ne,Et.CancelToken=St,Et.isCancel=ze,Et.VERSION="1.7.7",Et.toFormData=ue,Et.AxiosError=oe,Et.Cancel=Et.CanceledError,Et.all=function(e){return Promise.all(e)},Et.spread=function(e){return function(t){return e.apply(null,t)}},Et.isAxiosError=function(e){return ee.isObject(e)&&!0===e.isAxiosError},Et.mergeConfig=Xe,Et.AxiosHeaders=Le,Et.formToJSON=e=>Ee(ee.isHTMLForm(e)?new FormData(e):e),Et.getAdapter=pt,Et.HttpStatusCode=Tt,Et.default=Et;const Ct=Et},8330:e=>{"use strict";e.exports={rE:"12.3.0"}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n(1924)})(),e.exports=n()},153:(e,t,r)=>{"use strict";var n=r(43),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,i={},c=null,u=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,n)&&!l.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:o,type:e,key:c,ref:u,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},172:e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},202:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||f}function v(){}function b(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var _=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,n){var o,i={},a=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,o)&&!k.hasOwnProperty(o)&&(i[o]=t[o]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===i[o]&&(i[o]=l[o]);return{$$typeof:r,type:e,key:a,ref:s,props:i,_owner:S.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var C=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function j(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return a=a(l=e),e=""===i?"."+A(l,0):i,_(a)?(o="",null!=e&&(o=e.replace(C,"$&/")+"/"),j(a,t,o,"",(function(e){return e}))):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",_(e))for(var c=0;c<e.length;c++){var u=i+A(s=e[c],c);l+=j(s,t,o,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=j(s=s.value,t,o,u=i+A(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,r){if(null==e)return e;var n=[],o=0;return j(e,n,"","",(function(e){return t.call(r,e,o++)})),n}function I(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},M={transition:null},R={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:M,ReactCurrentOwner:S};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,r){P(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=o,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!k.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}return{$$typeof:r,type:e.type,key:i,ref:a,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,r){return O.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,r){return O.current.useReducer(e,t,r)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return O.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},219:(e,t,r)=>{"use strict";var n=r(763),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return n.isMemo(e)?a:s[e.$$typeof]||o}s[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[n.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,r,n){if("string"!==typeof r){if(f){var o=p(r);o&&o!==f&&e(t,o,n)}var a=u(r);d&&(a=a.concat(d(r)));for(var s=l(t),m=l(r),g=0;g<a.length;++g){var y=a[g];if(!i[y]&&(!n||!n[y])&&(!m||!m[y])&&(!s||!s[y])){var v=h(r,y);try{c(t,y,v)}catch(b){}}}}return t}},234:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,o=e[n];if(!(0<i(o,t)))break e;e[n]=t,e[r]=o,r=n}}function n(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,o=e.length,a=o>>>1;n<a;){var s=2*(n+1)-1,l=e[s],c=s+1,u=e[c];if(0>i(l,r))c<o&&0>i(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[s]=r,n=s);else{if(!(c<o&&0>i(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function i(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=n(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,r(c,t)}t=n(u)}}function _(e){if(g=!1,x(e),!m)if(null!==n(c))m=!0,M(w);else{var t=n(u);null!==t&&R(_,t.startTime-e)}}function w(e,r){m=!1,g&&(g=!1,v(E),E=-1),f=!0;var i=p;try{for(x(r),h=n(c);null!==h&&(!(h.expirationTime>r)||e&&!j());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var s=a(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof s?h.callback=s:h===n(c)&&o(c),x(r)}else o(c);h=n(c)}if(null!==h)var l=!0;else{var d=n(u);null!==d&&R(_,d.startTime-r),l=!1}return l}finally{h=null,p=i,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,T=null,E=-1,C=5,A=-1;function j(){return!(t.unstable_now()-A<C)}function P(){if(null!==T){var e=t.unstable_now();A=e;var r=!0;try{r=T(!0,e)}finally{r?S():(k=!1,T=null)}}else k=!1}if("function"===typeof b)S=function(){b(P)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,O=I.port2;I.port1.onmessage=P,S=function(){O.postMessage(null)}}else S=function(){y(P,0)};function M(e){T=e,k||(k=!0,S())}function R(e,r){E=y((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,M(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var r=p;p=t;try{return e()}finally{p=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=p;p=e;try{return t()}finally{p=r}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,r(u,e),null===n(c)&&e===n(u)&&(g?(v(E),E=-1):g=!0,R(_,i-a))):(e.sortIndex=s,r(c,e),m||f||(m=!0,M(w))),e},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(e){var t=p;return function(){var r=p;p=t;try{return e.apply(this,arguments)}finally{p=r}}}},344:(e,t,r)=>{var n=r(172);e.exports=function(e){return new n(e,0)},e.exports.__esModule=!0,e.exports.default=e.exports},358:(e,t)=>{"use strict";const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,n=/^[\u0021-\u003A\u003C-\u007E]*$/,o=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,s=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,r){do{const r=e.charCodeAt(t);if(32!==r&&9!==r)return t}while(++t<r);return r}function c(e,t,r){for(;t>r;){const r=e.charCodeAt(--t);if(32!==r&&9!==r)return t+1}return r}function u(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},391:(e,t,r)=>{"use strict";var n=r(950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},513:(e,t,r)=>{var n=r(172);e.exports=function(e){var t={},r=!1;function o(t,o){return r=!0,o=new Promise((function(r){r(e[t](o))})),{done:!1,value:new n(o,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):o("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return o("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):o("return",e)}),t},e.exports.__esModule=!0,e.exports.default=e.exports},528:(e,t)=>{"use strict";var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler");Symbol.for("react.provider");var s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.for("react.offscreen"),m=Symbol.for("react.client.reference");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case a:case i:case u:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case p:case h:case s:return e;default:return t}}case n:return t}}}t.Hy=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===a||e===i||e===u||e===d||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===h||e.$$typeof===l||e.$$typeof===s||e.$$typeof===c||e.$$typeof===m||void 0!==e.getModuleId)}},579:(e,t,r)=>{"use strict";e.exports=r(153)},693:(e,t,r)=>{var n=r(736);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},730:(e,t,r)=>{"use strict";var n=r(43),o=r(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,r,n,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,r,n){var o=g.hasOwnProperty(t)?g[t]:null;(null!==o?0!==o.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,o,n)&&(r=null),n||null===o?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=null===r?3!==o.type&&"":r:(t=o.attributeName,n=o.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(o=o.type)||4===o&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var F,z=Object.assign;function D(e){if(void 0===F)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var N=!1;function B(e,t){if(!e||N)return"";N=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var o=c.stack.split("\n"),i=n.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do{if(a--,0>--s||o[a]!==i[s]){var l="\n"+o[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{N=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?D(e):""}function U(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case T:return"Profiler";case k:return"StrictMode";case j:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return V(e(t))}catch(r){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var o=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=H(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var r=t.checked;return z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Y(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=q(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){J(e,t);var r=q(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&X(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&n&&(e[r].defaultSelected=!0)}else{for(r=""+q(r),t=null,o=0;o<e.length;o++){if(e[o].value===r)return e[o].selected=!0,void(n&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(i(92));if(te(r)){if(1<r.length)throw Error(i(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:q(r)}}function ie(e,t){var r=q(t.value),n=q(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),o=me(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,o):e[r]=o}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,ke=null;function Te(e){if(e=xo(e)){if("function"!==typeof we)throw Error(i(280));var t=e.stateNode;t&&(t=wo(t),we(e.stateNode,e.type,t))}}function Ee(e){Se?ke?ke.push(e):ke=[e]:Se=e}function Ce(){if(Se){var e=Se,t=ke;if(ke=Se=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ae(e,t){return e(t)}function je(){}var Pe=!1;function Ie(e,t,r){if(Pe)return e(t,r);Pe=!0;try{return Ae(e,t,r)}finally{Pe=!1,(null!==Se||null!==ke)&&(je(),Ce())}}function Oe(e,t){var r=e.stateNode;if(null===r)return null;var n=wo(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(i(231,t,typeof r));return r}var Me=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){Me=!1}function Le(e,t,r,n,o,i,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var Fe=!1,ze=null,De=!1,Ne=null,Be={onError:function(e){Fe=!0,ze=e}};function Ue(e,t,r,n,o,i,a,s,l){Fe=!1,ze=null,Le.apply(Be,arguments)}function Ve(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Ve(e)!==e)throw Error(i(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(i(188));return t!==e?null:e}for(var r=e,n=t;;){var o=r.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(n=o.return)){r=n;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===r)return qe(o),e;if(a===n)return qe(o),t;a=a.sibling}throw Error(i(188))}if(r.return!==n.return)r=o,n=a;else{for(var s=!1,l=o.child;l;){if(l===r){s=!0,r=o,n=a;break}if(l===n){s=!0,n=o,r=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===r){s=!0,r=a,n=o;break}if(l===n){s=!0,n=a,r=o;break}l=l.sibling}if(!s)throw Error(i(189))}}if(r.alternate!==n)throw Error(i(190))}if(3!==r.tag)throw Error(i(188));return r.stateNode.current===r?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=o.unstable_scheduleCallback,Xe=o.unstable_cancelCallback,Ze=o.unstable_shouldYield,Ye=o.unstable_requestPaint,Je=o.unstable_now,$e=o.unstable_getCurrentPriorityLevel,Qe=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,rt=o.unstable_LowPriority,nt=o.unstable_IdlePriority,ot=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,o=e.suspendedLanes,i=e.pingedLanes,a=268435455&r;if(0!==a){var s=a&~o;0!==s?n=dt(s):0!==(i&=a)&&(n=dt(i))}else 0!==(a=r&~o)?n=dt(a):0!==i&&(n=dt(i));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&o)&&((o=n&-n)>=(i=t&-t)||16===o&&0!==(4194240&i)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)o=1<<(r=31-at(t)),n|=e[r],t&=~o;return n}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function yt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=r}function vt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-at(r),o=1<<n;o&t|e[n]&t&&(e[n]|=t),r&=~o}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,wt,St,kt,Tt,Et=!1,Ct=[],At=null,jt=null,Pt=null,It=new Map,Ot=new Map,Mt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":jt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Ft(e,t,r,n,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=xo(t))&&wt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function zt(e){var t=bo(e.target);if(null!==t){var r=Ve(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=We(r)))return e.blockedOn=t,void Tt(e.priority,(function(){St(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Dt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=xo(r))&&wt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);xe=n,r.target.dispatchEvent(n),xe=null,t.shift()}return!0}function Nt(e,t,r){Dt(e)&&r.delete(t)}function Bt(){Et=!1,null!==At&&Dt(At)&&(At=null),null!==jt&&Dt(jt)&&(jt=null),null!==Pt&&Dt(Pt)&&(Pt=null),It.forEach(Nt),Ot.forEach(Nt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Bt)))}function Vt(e){function t(t){return Ut(t,e)}if(0<Ct.length){Ut(Ct[0],e);for(var r=1;r<Ct.length;r++){var n=Ct[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==At&&Ut(At,e),null!==jt&&Ut(jt,e),null!==Pt&&Ut(Pt,e),It.forEach(t),Ot.forEach(t),r=0;r<Mt.length;r++)(n=Mt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Mt.length&&null===(r=Mt[0]).blockedOn;)zt(r),null===r.blockedOn&&Mt.shift()}var Wt=x.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,r,n){var o=bt,i=Wt.transition;Wt.transition=null;try{bt=1,Kt(e,t,r,n)}finally{bt=o,Wt.transition=i}}function Gt(e,t,r,n){var o=bt,i=Wt.transition;Wt.transition=null;try{bt=4,Kt(e,t,r,n)}finally{bt=o,Wt.transition=i}}function Kt(e,t,r,n){if(qt){var o=Zt(e,t,r,n);if(null===o)qn(e,t,n,Xt,r),Lt(e,n);else if(function(e,t,r,n,o){switch(t){case"focusin":return At=Ft(At,e,t,r,n,o),!0;case"dragenter":return jt=Ft(jt,e,t,r,n,o),!0;case"mouseover":return Pt=Ft(Pt,e,t,r,n,o),!0;case"pointerover":var i=o.pointerId;return It.set(i,Ft(It.get(i)||null,e,t,r,n,o)),!0;case"gotpointercapture":return i=o.pointerId,Ot.set(i,Ft(Ot.get(i)||null,e,t,r,n,o)),!0}return!1}(o,e,t,r,n))n.stopPropagation();else if(Lt(e,n),4&t&&-1<Rt.indexOf(e)){for(;null!==o;){var i=xo(o);if(null!==i&&_t(i),null===(i=Zt(e,t,r,n))&&qn(e,t,n,Xt,r),i===o)break;o=i}null!==o&&n.stopPropagation()}else qn(e,t,n,null,r)}}var Xt=null;function Zt(e,t,r,n){if(Xt=null,null!==(e=bo(e=_e(n))))if(null===(t=Ve(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Qe:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Qt=null;function er(){if(Qt)return Qt;var e,t,r=$t,n=r.length,o="value"in Jt?Jt.value:Jt.textContent,i=o.length;for(e=0;e<n&&r[e]===o[e];e++);var a=n-e;for(t=1;t<=a&&r[n-t]===o[i-t];t++);return Qt=o.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function or(e){function t(t,r,n,o,i){for(var a in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var ir,ar,sr,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=or(lr),ur=z({},lr,{view:0,detail:0}),dr=or(ur),hr=z({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sr&&(sr&&"mousemove"===e.type?(ir=e.screenX-sr.screenX,ar=e.screenY-sr.screenY):ar=ir=0,sr=e),ir)},movementY:function(e){return"movementY"in e?e.movementY:ar}}),pr=or(hr),fr=or(z({},hr,{dataTransfer:0})),mr=or(z({},ur,{relatedTarget:0})),gr=or(z({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),yr=z({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vr=or(yr),br=or(z({},lr,{data:0})),xr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_r={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wr[e])&&!!t[e]}function kr(){return Sr}var Tr=z({},ur,{key:function(e){if(e.key){var t=xr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_r[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Er=or(Tr),Cr=or(z({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ar=or(z({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kr})),jr=or(z({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pr=z({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ir=or(Pr),Or=[9,13,27,32],Mr=u&&"CompositionEvent"in window,Rr=null;u&&"documentMode"in document&&(Rr=document.documentMode);var Lr=u&&"TextEvent"in window&&!Rr,Fr=u&&(!Mr||Rr&&8<Rr&&11>=Rr),zr=String.fromCharCode(32),Dr=!1;function Nr(e,t){switch(e){case"keyup":return-1!==Or.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Br(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ur=!1;var Vr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vr[e.type]:"textarea"===t}function qr(e,t,r,n){Ee(n),0<(t=Gn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Hr=null,Gr=null;function Kr(e){Dn(e,0)}function Xr(e){if(K(_o(e)))return e}function Zr(e,t){if("change"===e)return t}var Yr=!1;if(u){var Jr;if(u){var $r="oninput"in document;if(!$r){var Qr=document.createElement("div");Qr.setAttribute("oninput","return;"),$r="function"===typeof Qr.oninput}Jr=$r}else Jr=!1;Yr=Jr&&(!document.documentMode||9<document.documentMode)}function en(){Hr&&(Hr.detachEvent("onpropertychange",tn),Gr=Hr=null)}function tn(e){if("value"===e.propertyName&&Xr(Gr)){var t=[];qr(t,Gr,e,_e(e)),Ie(Kr,t)}}function rn(e,t,r){"focusin"===e?(en(),Gr=r,(Hr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xr(Gr)}function on(e,t){if("click"===e)return Xr(t)}function an(e,t){if("input"===e||"change"===e)return Xr(t)}var sn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(sn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var o=r[n];if(!d.call(t,o)||!sn(e[o],t[o]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function un(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function dn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hn(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=X((e=t.contentWindow).document)}return t}function pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fn(e){var t=hn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&dn(r.ownerDocument.documentElement,r)){if(null!==n&&pn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=r.textContent.length,i=Math.min(n.start,o);n=void 0===n.end?i:Math.min(n.end,o),!e.extend&&i>n&&(o=n,n=i,i=o),o=un(r,i);var a=un(r,n);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mn=u&&"documentMode"in document&&11>=document.documentMode,gn=null,yn=null,vn=null,bn=!1;function xn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;bn||null==gn||gn!==X(n)||("selectionStart"in(n=gn)&&pn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},vn&&ln(vn,n)||(vn=n,0<(n=Gn(yn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=gn)))}function _n(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var wn={animationend:_n("Animation","AnimationEnd"),animationiteration:_n("Animation","AnimationIteration"),animationstart:_n("Animation","AnimationStart"),transitionend:_n("Transition","TransitionEnd")},Sn={},kn={};function Tn(e){if(Sn[e])return Sn[e];if(!wn[e])return e;var t,r=wn[e];for(t in r)if(r.hasOwnProperty(t)&&t in kn)return Sn[e]=r[t];return e}u&&(kn=document.createElement("div").style,"AnimationEvent"in window||(delete wn.animationend.animation,delete wn.animationiteration.animation,delete wn.animationstart.animation),"TransitionEvent"in window||delete wn.transitionend.transition);var En=Tn("animationend"),Cn=Tn("animationiteration"),An=Tn("animationstart"),jn=Tn("transitionend"),Pn=new Map,In="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function On(e,t){Pn.set(e,t),l(t,[e])}for(var Mn=0;Mn<In.length;Mn++){var Rn=In[Mn];On(Rn.toLowerCase(),"on"+(Rn[0].toUpperCase()+Rn.slice(1)))}On(En,"onAnimationEnd"),On(Cn,"onAnimationIteration"),On(An,"onAnimationStart"),On("dblclick","onDoubleClick"),On("focusin","onFocus"),On("focusout","onBlur"),On(jn,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ln="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ln));function zn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,o,a,s,l,c){if(Ue.apply(this,arguments),Fe){if(!Fe)throw Error(i(198));var u=ze;Fe=!1,ze=null,De||(De=!0,Ne=u)}}(n,t,void 0,e),e.currentTarget=null}function Dn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],o=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var a=n.length-1;0<=a;a--){var s=n[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&o.isPropagationStopped())break e;zn(o,s,c),i=l}else for(a=0;a<n.length;a++){if(l=(s=n[a]).instance,c=s.currentTarget,s=s.listener,l!==i&&o.isPropagationStopped())break e;zn(o,s,c),i=l}}}if(De)throw e=Ne,De=!1,Ne=null,e}function Nn(e,t){var r=t[go];void 0===r&&(r=t[go]=new Set);var n=e+"__bubble";r.has(n)||(Wn(t,e,2,!1),r.add(n))}function Bn(e,t,r){var n=0;t&&(n|=4),Wn(r,e,n,t)}var Un="_reactListening"+Math.random().toString(36).slice(2);function Vn(e){if(!e[Un]){e[Un]=!0,a.forEach((function(t){"selectionchange"!==t&&(Fn.has(t)||Bn(t,!1,e),Bn(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Un]||(t[Un]=!0,Bn("selectionchange",!1,t))}}function Wn(e,t,r,n){switch(Yt(t)){case 1:var o=Ht;break;case 4:o=Gt;break;default:o=Kt}r=o.bind(null,t,r,e),o=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),n?void 0!==o?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):void 0!==o?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function qn(e,t,r,n,o){var i=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var s=n.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=n.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=bo(s)))return;if(5===(l=a.tag)||6===l){n=i=a;continue e}s=s.parentNode}}n=n.return}Ie((function(){var n=i,o=_e(r),a=[];e:{var s=Pn.get(e);if(void 0!==s){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Er;break;case"focusin":c="focus",l=mr;break;case"focusout":c="blur",l=mr;break;case"beforeblur":case"afterblur":l=mr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ar;break;case En:case Cn:case An:l=gr;break;case jn:l=jr;break;case"scroll":l=dr;break;case"wheel":l=Ir;break;case"copy":case"cut":case"paste":l=vr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cr}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=n;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Oe(f,h))&&u.push(Hn(f,m,p)))),d)break;f=f.return}0<u.length&&(s=new l(s,c,null,r,o),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||r===xe||!(c=r.relatedTarget||r.fromElement)||!bo(c)&&!c[mo])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?bo(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(u=pr,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cr,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?s:_o(l),p=null==c?s:_o(c),(s=new u(m,f+"leave",l,r,o)).target=d,s.relatedTarget=p,m=null,bo(o)===n&&((u=new u(h,f+"enter",c,r,o)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Kn(p))f++;for(p=0,m=h;m;m=Kn(m))p++;for(;0<f-p;)u=Kn(u),f--;for(;0<p-f;)h=Kn(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kn(u),h=Kn(h)}u=null}else u=null;null!==l&&Xn(a,s,l,u,!1),null!==c&&null!==d&&Xn(a,d,c,u,!0)}if("select"===(l=(s=n?_o(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Zr;else if(Wr(s))if(Yr)g=an;else{g=nn;var y=rn}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=on);switch(g&&(g=g(e,n))?qr(a,g,r,o):(y&&y(e,s,n),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=n?_o(n):window,e){case"focusin":(Wr(y)||"true"===y.contentEditable)&&(gn=y,yn=n,vn=null);break;case"focusout":vn=yn=gn=null;break;case"mousedown":bn=!0;break;case"contextmenu":case"mouseup":case"dragend":bn=!1,xn(a,r,o);break;case"selectionchange":if(mn)break;case"keydown":case"keyup":xn(a,r,o)}var v;if(Mr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ur?Nr(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(Fr&&"ko"!==r.locale&&(Ur||"onCompositionStart"!==b?"onCompositionEnd"===b&&Ur&&(v=er()):($t="value"in(Jt=o)?Jt.value:Jt.textContent,Ur=!0)),0<(y=Gn(n,b)).length&&(b=new br(b,e,null,r,o),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Br(r))&&(b.data=v))),(v=Lr?function(e,t){switch(e){case"compositionend":return Br(t);case"keypress":return 32!==t.which?null:(Dr=!0,zr);case"textInput":return(e=t.data)===zr&&Dr?null:e;default:return null}}(e,r):function(e,t){if(Ur)return"compositionend"===e||!Mr&&Nr(e,t)?(e=er(),Qt=$t=Jt=null,Ur=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Gn(n,"onBeforeInput")).length&&(o=new br("onBeforeInput","beforeinput",null,r,o),a.push({event:o,listeners:n}),o.data=v))}Dn(a,t)}))}function Hn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Gn(e,t){for(var r=t+"Capture",n=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Oe(e,r))&&n.unshift(Hn(e,i,o)),null!=(i=Oe(e,t))&&n.push(Hn(e,i,o))),e=e.return}return n}function Kn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xn(e,t,r,n,o){for(var i=t._reactName,a=[];null!==r&&r!==n;){var s=r,l=s.alternate,c=s.stateNode;if(null!==l&&l===n)break;5===s.tag&&null!==c&&(s=c,o?null!=(l=Oe(r,i))&&a.unshift(Hn(r,l,s)):o||null!=(l=Oe(r,i))&&a.push(Hn(r,l,s))),r=r.return}0!==a.length&&e.push({event:t,listeners:a})}var Zn=/\r\n?/g,Yn=/\u0000|\uFFFD/g;function Jn(e){return("string"===typeof e?e:""+e).replace(Zn,"\n").replace(Yn,"")}function $n(e,t,r){if(t=Jn(t),Jn(e)!==t&&r)throw Error(i(425))}function Qn(){}var eo=null,to=null;function ro(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var no="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,io="function"===typeof Promise?Promise:void 0,ao="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof io?function(e){return io.resolve(null).then(e).catch(so)}:no;function so(e){setTimeout((function(){throw e}))}function lo(e,t){var r=t,n=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&8===o.nodeType)if("/$"===(r=o.data)){if(0===n)return e.removeChild(o),void Vt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=o}while(r);Vt(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var ho=Math.random().toString(36).slice(2),po="__reactFiber$"+ho,fo="__reactProps$"+ho,mo="__reactContainer$"+ho,go="__reactEvents$"+ho,yo="__reactListeners$"+ho,vo="__reactHandles$"+ho;function bo(e){var t=e[po];if(t)return t;for(var r=e.parentNode;r;){if(t=r[mo]||r[po]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=uo(e);null!==e;){if(r=e[po])return r;e=uo(e)}return t}r=(e=r).parentNode}return null}function xo(e){return!(e=e[po]||e[mo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _o(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function wo(e){return e[fo]||null}var So=[],ko=-1;function To(e){return{current:e}}function Eo(e){0>ko||(e.current=So[ko],So[ko]=null,ko--)}function Co(e,t){ko++,So[ko]=e.current,e.current=t}var Ao={},jo=To(Ao),Po=To(!1),Io=Ao;function Oo(e,t){var r=e.type.contextTypes;if(!r)return Ao;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in r)i[o]=t[o];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Mo(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ro(){Eo(Po),Eo(jo)}function Lo(e,t,r){if(jo.current!==Ao)throw Error(i(168));Co(jo,t),Co(Po,r)}function Fo(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var o in n=n.getChildContext())if(!(o in t))throw Error(i(108,W(e)||"Unknown",o));return z({},r,n)}function zo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ao,Io=jo.current,Co(jo,e),Co(Po,Po.current),!0}function Do(e,t,r){var n=e.stateNode;if(!n)throw Error(i(169));r?(e=Fo(e,t,Io),n.__reactInternalMemoizedMergedChildContext=e,Eo(Po),Eo(jo),Co(jo,e)):Eo(Po),Co(Po,r)}var No=null,Bo=!1,Uo=!1;function Vo(e){null===No?No=[e]:No.push(e)}function Wo(){if(!Uo&&null!==No){Uo=!0;var e=0,t=bt;try{var r=No;for(bt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}No=null,Bo=!1}catch(o){throw null!==No&&(No=No.slice(e+1)),Ke(Qe,Wo),o}finally{bt=t,Uo=!1}}return null}var qo=[],Ho=0,Go=null,Ko=0,Xo=[],Zo=0,Yo=null,Jo=1,$o="";function Qo(e,t){qo[Ho++]=Ko,qo[Ho++]=Go,Go=e,Ko=t}function ei(e,t,r){Xo[Zo++]=Jo,Xo[Zo++]=$o,Xo[Zo++]=Yo,Yo=e;var n=Jo;e=$o;var o=32-at(n)-1;n&=~(1<<o),r+=1;var i=32-at(t)+o;if(30<i){var a=o-o%5;i=(n&(1<<a)-1).toString(32),n>>=a,o-=a,Jo=1<<32-at(t)+o|r<<o|n,$o=i+e}else Jo=1<<i|r<<o|n,$o=e}function ti(e){null!==e.return&&(Qo(e,1),ei(e,1,0))}function ri(e){for(;e===Go;)Go=qo[--Ho],qo[Ho]=null,Ko=qo[--Ho],qo[Ho]=null;for(;e===Yo;)Yo=Xo[--Zo],Xo[Zo]=null,$o=Xo[--Zo],Xo[Zo]=null,Jo=Xo[--Zo],Xo[Zo]=null}var ni=null,oi=null,ii=!1,ai=null;function si(e,t){var r=Ic(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function li(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,oi=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,oi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Yo?{id:Jo,overflow:$o}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Ic(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ni=e,oi=null,!0);default:return!1}}function ci(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ui(e){if(ii){var t=oi;if(t){var r=t;if(!li(e,t)){if(ci(e))throw Error(i(418));t=co(r.nextSibling);var n=ni;t&&li(e,t)?si(n,r):(e.flags=-4097&e.flags|2,ii=!1,ni=e)}}else{if(ci(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,ni=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function hi(e){if(e!==ni)return!1;if(!ii)return di(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ro(e.type,e.memoizedProps)),t&&(t=oi)){if(ci(e))throw pi(),Error(i(418));for(;t;)si(e,t),t=co(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){oi=co(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}oi=null}}else oi=ni?co(e.stateNode.nextSibling):null;return!0}function pi(){for(var e=oi;e;)e=co(e.nextSibling)}function fi(){oi=ni=null,ii=!1}function mi(e){null===ai?ai=[e]:ai.push(e)}var gi=x.ReactCurrentBatchConfig;function yi(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(i(309));var n=r.stateNode}if(!n)throw Error(i(147,e));var o=n,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=o.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!r._owner)throw Error(i(290,e))}return e}function vi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bi(e){return(0,e._init)(e._payload)}function xi(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function a(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=zc(r,e.mode,n)).return=e,t):((t=o(t,r)).return=e,t)}function c(e,t,r,n){var i=r.type;return i===S?d(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===O&&bi(i)===t.type)?((n=o(t,r.props)).ref=yi(e,t,r),n.return=e,n):((n=Rc(r.type,r.key,r.props,null,e.mode,n)).ref=yi(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Dc(r,e.mode,n)).return=e,t):((t=o(t,r.children||[])).return=e,t)}function d(e,t,r,n,i){return null===t||7!==t.tag?((t=Lc(r,e.mode,n,i)).return=e,t):((t=o(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(r=Rc(t.type,t.key,t.props,null,e.mode,r)).ref=yi(e,null,t),r.return=e,r;case w:return(t=Dc(t,e.mode,r)).return=e,t;case O:return h(e,(0,t._init)(t._payload),r)}if(te(t)||L(t))return(t=Lc(t,e.mode,r,null)).return=e,t;vi(e,t)}return null}function p(e,t,r,n){var o=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==o?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return r.key===o?c(e,t,r,n):null;case w:return r.key===o?u(e,t,r,n):null;case O:return p(e,t,(o=r._init)(r._payload),n)}if(te(r)||L(r))return null!==o?null:d(e,t,r,n,null);vi(e,r)}return null}function f(e,t,r,n,o){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(r)||null,""+n,o);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return c(t,e=e.get(null===n.key?r:n.key)||null,n,o);case w:return u(t,e=e.get(null===n.key?r:n.key)||null,n,o);case O:return f(e,t,r,(0,n._init)(n._payload),o)}if(te(n)||L(n))return d(t,e=e.get(r)||null,n,o,null);vi(t,n)}return null}function m(o,i,s,l){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=p(o,d,s[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(o,d),i=a(y,i,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===s.length)return r(o,d),ii&&Qo(o,m),c;if(null===d){for(;m<s.length;m++)null!==(d=h(o,s[m],l))&&(i=a(d,i,m),null===u?c=d:u.sibling=d,u=d);return ii&&Qo(o,m),c}for(d=n(o,d);m<s.length;m++)null!==(g=f(d,o,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=a(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(o,e)})),ii&&Qo(o,m),c}function g(o,s,l,c){var u=L(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=p(o,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(o,m),s=a(b,s,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return r(o,m),ii&&Qo(o,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(o,v.value,c))&&(s=a(v,s,g),null===d?u=v:d.sibling=v,d=v);return ii&&Qo(o,g),u}for(m=n(o,m);!v.done;g++,v=l.next())null!==(v=f(m,o,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=a(v,s,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach((function(e){return t(o,e)})),ii&&Qo(o,g),u}return function e(n,i,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case _:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){r(n,u.sibling),(i=o(u,a.props.children)).return=n,n=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&bi(c)===u.type){r(n,u.sibling),(i=o(u,a.props)).ref=yi(n,u,a),i.return=n,n=i;break e}r(n,u);break}t(n,u),u=u.sibling}a.type===S?((i=Lc(a.props.children,n.mode,l,a.key)).return=n,n=i):((l=Rc(a.type,a.key,a.props,null,n.mode,l)).ref=yi(n,i,a),l.return=n,n=l)}return s(n);case w:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){r(n,i.sibling),(i=o(i,a.children||[])).return=n,n=i;break e}r(n,i);break}t(n,i),i=i.sibling}(i=Dc(a,n.mode,l)).return=n,n=i}return s(n);case O:return e(n,i,(u=a._init)(a._payload),l)}if(te(a))return m(n,i,a,l);if(L(a))return g(n,i,a,l);vi(n,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(r(n,i.sibling),(i=o(i,a)).return=n,n=i):(r(n,i),(i=zc(a,n.mode,l)).return=n,n=i),s(n)):r(n,i)}}var _i=xi(!0),wi=xi(!1),Si=To(null),ki=null,Ti=null,Ei=null;function Ci(){Ei=Ti=ki=null}function Ai(e){var t=Si.current;Eo(Si),e._currentValue=t}function ji(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Pi(e,t){ki=e,Ei=Ti=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ii(e){var t=e._currentValue;if(Ei!==e)if(e={context:e,memoizedValue:t,next:null},null===Ti){if(null===ki)throw Error(i(308));Ti=e,ki.dependencies={lanes:0,firstContext:e}}else Ti=Ti.next=e;return t}var Oi=null;function Mi(e){null===Oi?Oi=[e]:Oi.push(e)}function Ri(e,t,r,n){var o=t.interleaved;return null===o?(r.next=r,Mi(t)):(r.next=o.next,o.next=r),t.interleaved=r,Li(e,n)}function Li(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Fi=!1;function zi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Di(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ni(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bi(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Al)){var o=n.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),n.pending=t,Li(e,r)}return null===(o=n.interleaved)?(t.next=t,Mi(n)):(t.next=o.next,o.next=t),n.interleaved=t,Li(e,r)}function Ui(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,vt(e,r)}}function Vi(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var o=null,i=null;if(null!==(r=r.firstBaseUpdate)){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===i?o=i=a:i=i.next=a,r=r.next}while(null!==r);null===i?o=i=t:i=i.next=t}else o=i=t;return r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Wi(e,t,r,n){var o=e.updateQueue;Fi=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=o.baseState;for(a=0,u=c=l=null,s=i;;){var h=s.lane,p=s.eventTime;if((n&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(h=t,p=r,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=z({},d,h);break e;case 2:Fi=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=h;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(h=s).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);Fl|=a,e.lanes=a,e.memoizedState=d}}function qi(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],o=n.callback;if(null!==o){if(n.callback=null,n=r,"function"!==typeof o)throw Error(i(191,o));o.call(n)}}}var Hi={},Gi=To(Hi),Ki=To(Hi),Xi=To(Hi);function Zi(e){if(e===Hi)throw Error(i(174));return e}function Yi(e,t){switch(Co(Xi,t),Co(Ki,e),Co(Gi,Hi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Eo(Gi),Co(Gi,t)}function Ji(){Eo(Gi),Eo(Ki),Eo(Xi)}function $i(e){Zi(Xi.current);var t=Zi(Gi.current),r=le(t,e.type);t!==r&&(Co(Ki,e),Co(Gi,r))}function Qi(e){Ki.current===e&&(Eo(Gi),Eo(Ki))}var ea=To(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ra=[];function na(){for(var e=0;e<ra.length;e++)ra[e]._workInProgressVersionPrimary=null;ra.length=0}var oa=x.ReactCurrentDispatcher,ia=x.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ca=null,ua=!1,da=!1,ha=0,pa=0;function fa(){throw Error(i(321))}function ma(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!sn(e[r],t[r]))return!1;return!0}function ga(e,t,r,n,o,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oa.current=null===e||null===e.memoizedState?Qa:es,e=r(n,o),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(i(301));a+=1,ca=la=null,t.updateQueue=null,oa.current=ts,e=r(n,o)}while(da)}if(oa.current=$a,t=null!==la&&null!==la.next,aa=0,ca=la=sa=null,ua=!1,t)throw Error(i(300));return e}function ya(){var e=0!==ha;return ha=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?sa.memoizedState=ca=e:ca=ca.next=e,ca}function ba(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?sa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(i(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?sa.memoizedState=ca=e:ca=ca.next=e}return ca}function xa(e,t){return"function"===typeof t?t(e):t}function _a(e){var t=ba(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var n=la,o=n.baseQueue,a=r.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}n.baseQueue=o=a,r.pending=null}if(null!==o){a=o.next,n=n.baseState;var l=s=null,c=null,u=a;do{var d=u.lane;if((aa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=n):c=c.next=h,sa.lanes|=d,Fl|=d}u=u.next}while(null!==u&&u!==a);null===c?s=n:c.next=l,sn(n,t.memoizedState)||(bs=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){o=e;do{a=o.lane,sa.lanes|=a,Fl|=a,o=o.next}while(o!==e)}else null===o&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function wa(e){var t=ba(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var n=r.dispatch,o=r.pending,a=t.memoizedState;if(null!==o){r.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);sn(a,t.memoizedState)||(bs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function Sa(){}function ka(e,t){var r=sa,n=ba(),o=t(),a=!sn(n.memoizedState,o);if(a&&(n.memoizedState=o,bs=!0),n=n.queue,Fa(Ca.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(r.flags|=2048,Ia(9,Ea.bind(null,r,n,o,t),void 0,null),null===jl)throw Error(i(349));0!==(30&aa)||Ta(r,t,o)}return o}function Ta(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Ea(e,t,r,n){t.value=r,t.getSnapshot=n,Aa(t)&&ja(e)}function Ca(e,t,r){return r((function(){Aa(t)&&ja(e)}))}function Aa(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!sn(e,r)}catch(n){return!0}}function ja(e){var t=Li(e,1);null!==t&&rc(t,e,1,-1)}function Pa(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Xa.bind(null,sa,e),[t.memoizedState,e]}function Ia(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Oa(){return ba().memoizedState}function Ma(e,t,r,n){var o=va();sa.flags|=e,o.memoizedState=Ia(1|t,r,void 0,void 0===n?null:n)}function Ra(e,t,r,n){var o=ba();n=void 0===n?null:n;var i=void 0;if(null!==la){var a=la.memoizedState;if(i=a.destroy,null!==n&&ma(n,a.deps))return void(o.memoizedState=Ia(t,r,i,n))}sa.flags|=e,o.memoizedState=Ia(1|t,r,i,n)}function La(e,t){return Ma(8390656,8,e,t)}function Fa(e,t){return Ra(2048,8,e,t)}function za(e,t){return Ra(4,2,e,t)}function Da(e,t){return Ra(4,4,e,t)}function Na(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ba(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ra(4,4,Na.bind(null,t,e),r)}function Ua(){}function Va(e,t){var r=ba();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&ma(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Wa(e,t){var r=ba();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&ma(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function qa(e,t,r){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=r):(sn(r,t)||(r=mt(),sa.lanes|=r,Fl|=r,e.baseState=!0),t)}function Ha(e,t){var r=bt;bt=0!==r&&4>r?r:4,e(!0);var n=ia.transition;ia.transition={};try{e(!1),t()}finally{bt=r,ia.transition=n}}function Ga(){return ba().memoizedState}function Ka(e,t,r){var n=tc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Za(e))Ya(t,r);else if(null!==(r=Ri(e,t,r,n))){rc(r,e,n,ec()),Ja(r,t,n)}}function Xa(e,t,r){var n=tc(e),o={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Za(e))Ya(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,r);if(o.hasEagerState=!0,o.eagerState=s,sn(s,a)){var l=t.interleaved;return null===l?(o.next=o,Mi(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(c){}null!==(r=Ri(e,t,o,n))&&(rc(r,e,n,o=ec()),Ja(r,t,n))}}function Za(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Ya(e,t){da=ua=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ja(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,vt(e,r)}}var $a={readContext:Ii,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Qa={readContext:Ii,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Ii,useEffect:La,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ma(4194308,4,Na.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ma(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ma(4,2,e,t)},useMemo:function(e,t){var r=va();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=va();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Ka.bind(null,sa,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Pa,useDebugValue:Ua,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Pa(!1),t=e[0];return e=Ha.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=sa,o=va();if(ii){if(void 0===r)throw Error(i(407));r=r()}else{if(r=t(),null===jl)throw Error(i(349));0!==(30&aa)||Ta(n,t,r)}o.memoizedState=r;var a={value:r,getSnapshot:t};return o.queue=a,La(Ca.bind(null,n,a,e),[e]),n.flags|=2048,Ia(9,Ea.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=va(),t=jl.identifierPrefix;if(ii){var r=$o;t=":"+t+"R"+(r=(Jo&~(1<<32-at(Jo)-1)).toString(32)+r),0<(r=ha++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=pa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Ii,useCallback:Va,useContext:Ii,useEffect:Fa,useImperativeHandle:Ba,useInsertionEffect:za,useLayoutEffect:Da,useMemo:Wa,useReducer:_a,useRef:Oa,useState:function(){return _a(xa)},useDebugValue:Ua,useDeferredValue:function(e){return qa(ba(),la.memoizedState,e)},useTransition:function(){return[_a(xa)[0],ba().memoizedState]},useMutableSource:Sa,useSyncExternalStore:ka,useId:Ga,unstable_isNewReconciler:!1},ts={readContext:Ii,useCallback:Va,useContext:Ii,useEffect:Fa,useImperativeHandle:Ba,useInsertionEffect:za,useLayoutEffect:Da,useMemo:Wa,useReducer:wa,useRef:Oa,useState:function(){return wa(xa)},useDebugValue:Ua,useDeferredValue:function(e){var t=ba();return null===la?t.memoizedState=e:qa(t,la.memoizedState,e)},useTransition:function(){return[wa(xa)[0],ba().memoizedState]},useMutableSource:Sa,useSyncExternalStore:ka,useId:Ga,unstable_isNewReconciler:!1};function rs(e,t){if(e&&e.defaultProps){for(var r in t=z({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ns(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:z({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var os={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ec(),o=tc(e),i=Ni(n,o);i.payload=t,void 0!==r&&null!==r&&(i.callback=r),null!==(t=Bi(e,i,o))&&(rc(t,e,o,n),Ui(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ec(),o=tc(e),i=Ni(n,o);i.tag=1,i.payload=t,void 0!==r&&null!==r&&(i.callback=r),null!==(t=Bi(e,i,o))&&(rc(t,e,o,n),Ui(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),n=tc(e),o=Ni(r,n);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Bi(e,o,n))&&(rc(t,e,n,r),Ui(t,e,n))}};function is(e,t,r,n,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!ln(r,n)||!ln(o,i))}function as(e,t,r){var n=!1,o=Ao,i=t.contextType;return"object"===typeof i&&null!==i?i=Ii(i):(o=Mo(t)?Io:jo.current,i=(n=null!==(n=t.contextTypes)&&void 0!==n)?Oo(e,o):Ao),t=new t(r,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=os,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function ss(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&os.enqueueReplaceState(t,t.state,null)}function ls(e,t,r,n){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs={},zi(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=Ii(i):(i=Mo(t)?Io:jo.current,o.context=Oo(e,i)),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ns(e,t,i,r),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&os.enqueueReplaceState(o,o.state,null),Wi(e,r,o,n),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var r="",n=t;do{r+=U(n),n=n.return}while(n);var o=r}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o,digest:null}}function us(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(r){setTimeout((function(){throw r}))}}var hs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,r){(r=Ni(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){ql||(ql=!0,Hl=n),ds(0,t)},r}function fs(e,t,r){(r=Ni(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var o=t.value;r.payload=function(){return n(o)},r.callback=function(){ds(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(r.callback=function(){ds(0,t),"function"!==typeof n&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function ms(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new hs;var o=new Set;n.set(t,o)}else void 0===(o=n.get(t))&&(o=new Set,n.set(t,o));o.has(r)||(o.add(r),e=Tc.bind(null,e,t,r),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,r,n,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Ni(-1,1)).tag=2,Bi(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var vs=x.ReactCurrentOwner,bs=!1;function xs(e,t,r,n){t.child=null===e?wi(t,null,r,n):_i(t,e.child,r,n)}function _s(e,t,r,n,o){r=r.render;var i=t.ref;return Pi(t,o),n=ga(e,t,r,n,i,o),r=ya(),null===e||bs?(ii&&r&&ti(t),t.flags|=1,xs(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,qs(e,t,o))}function ws(e,t,r,n,o){if(null===e){var i=r.type;return"function"!==typeof i||Oc(i)||void 0!==i.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Rc(r.type,null,n,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ss(e,t,i,n,o))}if(i=e.child,0===(e.lanes&o)){var a=i.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(a,n)&&e.ref===t.ref)return qs(e,t,o)}return t.flags|=1,(e=Mc(i,n)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,r,n,o){if(null!==e){var i=e.memoizedProps;if(ln(i,n)&&e.ref===t.ref){if(bs=!1,t.pendingProps=n=i,0===(e.lanes&o))return t.lanes=e.lanes,qs(e,t,o);0!==(131072&e.flags)&&(bs=!0)}}return Es(e,t,r,n,o)}function ks(e,t,r){var n=t.pendingProps,o=n.children,i=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Co(Ml,Ol),Ol|=r;else{if(0===(1073741824&r))return e=null!==i?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Co(Ml,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==i?i.baseLanes:r,Co(Ml,Ol),Ol|=n}else null!==i?(n=i.baseLanes|r,t.memoizedState=null):n=r,Co(Ml,Ol),Ol|=n;return xs(e,t,o,r),t.child}function Ts(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Es(e,t,r,n,o){var i=Mo(r)?Io:jo.current;return i=Oo(t,i),Pi(t,o),r=ga(e,t,r,n,i,o),n=ya(),null===e||bs?(ii&&n&&ti(t),t.flags|=1,xs(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,qs(e,t,o))}function Cs(e,t,r,n,o){if(Mo(r)){var i=!0;zo(t)}else i=!1;if(Pi(t,o),null===t.stateNode)Ws(e,t),as(t,r,n),ls(t,r,n,o),n=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=r.contextType;"object"===typeof c&&null!==c?c=Ii(c):c=Oo(t,c=Mo(r)?Io:jo.current);var u=r.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==n||l!==c)&&ss(t,a,n,c),Fi=!1;var h=t.memoizedState;a.state=h,Wi(t,n,a,o),l=t.memoizedState,s!==n||h!==l||Po.current||Fi?("function"===typeof u&&(ns(t,r,u,n),l=t.memoizedState),(s=Fi||is(t,r,s,n,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=c,n=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Di(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:rs(t.type,s),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=r.contextType)&&null!==l?l=Ii(l):l=Oo(t,l=Mo(r)?Io:jo.current);var p=r.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&ss(t,a,n,l),Fi=!1,h=t.memoizedState,a.state=h,Wi(t,n,a,o);var f=t.memoizedState;s!==d||h!==f||Po.current||Fi?("function"===typeof p&&(ns(t,r,p,n),f=t.memoizedState),(c=Fi||is(t,r,c,n,h,f,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(n,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),a.props=n,a.state=f,a.context=l,n=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return As(e,t,r,n,i,o)}function As(e,t,r,n,o,i){Ts(e,t);var a=0!==(128&t.flags);if(!n&&!a)return o&&Do(t,r,!1),qs(e,t,i);n=t.stateNode,vs.current=t;var s=a&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&a?(t.child=_i(t,e.child,null,i),t.child=_i(t,null,s,i)):xs(e,t,s,i),t.memoizedState=n.state,o&&Do(t,r,!0),t.child}function js(e){var t=e.stateNode;t.pendingContext?Lo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Lo(0,t.context,!1),Yi(e,t.containerInfo)}function Ps(e,t,r,n,o){return fi(),mi(o),t.flags|=256,xs(e,t,r,n),t.child}var Is,Os,Ms,Rs,Ls={dehydrated:null,treeContext:null,retryLane:0};function Fs(e){return{baseLanes:e,cachePool:null,transitions:null}}function zs(e,t,r){var n,o=t.pendingProps,a=ea.current,s=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&a)),n?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Co(ea,1&a),null===e)return ui(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,s?(o=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&o)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Fc(l,o,0,null),e=Lc(e,o,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fs(r),t.memoizedState=Ls,e):Ds(t,l));if(null!==(a=e.memoizedState)&&null!==(n=a.dehydrated))return function(e,t,r,n,o,a,s){if(r)return 256&t.flags?(t.flags&=-257,Ns(e,t,s,n=us(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=n.fallback,o=t.mode,n=Fc({mode:"visible",children:n.children},o,0,null),(a=Lc(a,o,s,null)).flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,0!==(1&t.mode)&&_i(t,e.child,null,s),t.child.memoizedState=Fs(s),t.memoizedState=Ls,a);if(0===(1&t.mode))return Ns(e,t,s,null);if("$!"===o.data){if(n=o.nextSibling&&o.nextSibling.dataset)var l=n.dgst;return n=l,Ns(e,t,s,n=us(a=Error(i(419)),n,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(n=jl)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(n.suspendedLanes|s))?0:o)&&o!==a.retryLane&&(a.retryLane=o,Li(e,o),rc(n,e,o,-1))}return mc(),Ns(e,t,s,n=us(Error(i(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,oi=co(o.nextSibling),ni=t,ii=!0,ai=null,null!==e&&(Xo[Zo++]=Jo,Xo[Zo++]=$o,Xo[Zo++]=Yo,Jo=e.id,$o=e.overflow,Yo=t),t=Ds(t,n.children),t.flags|=4096,t)}(e,t,l,o,n,a,r);if(s){s=o.fallback,l=t.mode,n=(a=e.child).sibling;var c={mode:"hidden",children:o.children};return 0===(1&l)&&t.child!==a?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=Mc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==n?s=Mc(n,s):(s=Lc(s,l,r,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,l=null===(l=e.child.memoizedState)?Fs(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~r,t.memoizedState=Ls,o}return e=(s=e.child).sibling,o=Mc(s,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=r),o.return=t,o.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=o,t.memoizedState=null,o}function Ds(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ns(e,t,r,n){return null!==n&&mi(n),_i(t,e.child,null,r),(e=Ds(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ji(e.return,t,r)}function Us(e,t,r,n,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=o)}function Vs(e,t,r){var n=t.pendingProps,o=n.revealOrder,i=n.tail;if(xs(e,t,n.children,r),0!==(2&(n=ea.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,r,t);else if(19===e.tag)Bs(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Co(ea,n),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;null!==r;)null!==(e=r.alternate)&&null===ta(e)&&(o=r),r=r.sibling;null===(r=o)?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),Us(t,!1,o,r,i);break;case"backwards":for(r=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ta(e)){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}Us(t,!0,r,null,i);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qs(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(r=Mc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Mc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Hs(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var o=e.child;null!==o;)r|=o.lanes|o.childLanes,n|=14680064&o.subtreeFlags,n|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Ks(e,t,r){var n=t.pendingProps;switch(ri(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Mo(t.type)&&Ro(),Gs(t),null;case 3:return n=t.stateNode,Ji(),Eo(Po),Eo(jo),na(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ai&&(ac(ai),ai=null))),Os(e,t),Gs(t),null;case 5:Qi(t);var o=Zi(Xi.current);if(r=t.type,null!==e&&null!=t.stateNode)Ms(e,t,r,n,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(i(166));return Gs(t),null}if(e=Zi(Gi.current),hi(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[po]=t,n[fo]=a,e=0!==(1&t.mode),r){case"dialog":Nn("cancel",n),Nn("close",n);break;case"iframe":case"object":case"embed":Nn("load",n);break;case"video":case"audio":for(o=0;o<Ln.length;o++)Nn(Ln[o],n);break;case"source":Nn("error",n);break;case"img":case"image":case"link":Nn("error",n),Nn("load",n);break;case"details":Nn("toggle",n);break;case"input":Y(n,a),Nn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Nn("invalid",n);break;case"textarea":oe(n,a),Nn("invalid",n)}for(var l in ve(r,a),o=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==a.suppressHydrationWarning&&$n(n.textContent,c,e),o=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&$n(n.textContent,c,e),o=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Nn("scroll",n)}switch(r){case"input":G(n),Q(n,a,!0);break;case"textarea":G(n),ae(n);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(n.onclick=Qn)}n=o,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[po]=t,e[fo]=n,Is(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(r,n),r){case"dialog":Nn("cancel",e),Nn("close",e),o=n;break;case"iframe":case"object":case"embed":Nn("load",e),o=n;break;case"video":case"audio":for(o=0;o<Ln.length;o++)Nn(Ln[o],e);o=n;break;case"source":Nn("error",e),o=n;break;case"img":case"image":case"link":Nn("error",e),Nn("load",e),o=n;break;case"details":Nn("toggle",e),o=n;break;case"input":Y(e,n),o=Z(e,n),Nn("invalid",e);break;case"option":default:o=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},o=z({},n,{value:void 0}),Nn("invalid",e);break;case"textarea":oe(e,n),o=ne(e,n),Nn("invalid",e)}for(a in ve(r,o),c=o)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==r||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Nn("scroll",e):null!=u&&b(e,a,u,l))}switch(r){case"input":G(e),Q(e,n,!1);break;case"textarea":G(e),ae(e);break;case"option":null!=n.value&&e.setAttribute("value",""+q(n.value));break;case"select":e.multiple=!!n.multiple,null!=(a=n.value)?re(e,!!n.multiple,a,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Qn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Rs(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(i(166));if(r=Zi(Xi.current),Zi(Gi.current),hi(t)){if(n=t.stateNode,r=t.memoizedProps,n[po]=t,(a=n.nodeValue!==r)&&null!==(e=ni))switch(e.tag){case 3:$n(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$n(n.nodeValue,r,0!==(1&e.mode))}a&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[po]=t,t.stateNode=n}return Gs(t),null;case 13:if(Eo(ea),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==oi&&0!==(1&t.mode)&&0===(128&t.flags))pi(),fi(),t.flags|=98560,a=!1;else if(a=hi(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[po]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),a=!1}else null!==ai&&(ac(ai),ai=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Rl&&(Rl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return Ji(),Os(e,t),null===e&&Vn(t.stateNode.containerInfo),Gs(t),null;case 10:return Ai(t.type._context),Gs(t),null;case 19:if(Eo(ea),null===(a=t.memoizedState))return Gs(t),null;if(n=0!==(128&t.flags),null===(l=a.rendering))if(n)Hs(a,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Hs(a,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(a=r).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Co(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>Vl&&(t.flags|=128,n=!0,Hs(a,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ta(l))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Hs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ii)return Gs(t),null}else 2*Je()-a.renderingStartTime>Vl&&1073741824!==r&&(t.flags|=128,n=!0,Hs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=a.last)?r.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,r=ea.current,Co(ea,n?1&r|2:1&r),t):(Gs(t),null);case 22:case 23:return dc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Xs(e,t){switch(ri(t),t.tag){case 1:return Mo(t.type)&&Ro(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ji(),Eo(Po),Eo(jo),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qi(t),null;case 13:if(Eo(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Eo(ea),null;case 4:return Ji(),null;case 10:return Ai(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Is=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Os=function(){},Ms=function(e,t,r,n){var o=e.memoizedProps;if(o!==n){e=t.stateNode,Zi(Gi.current);var i,a=null;switch(r){case"input":o=Z(e,o),n=Z(e,n),a=[];break;case"select":o=z({},o,{value:void 0}),n=z({},n,{value:void 0}),a=[];break;case"textarea":o=ne(e,o),n=ne(e,n),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof n.onClick&&(e.onclick=Qn)}for(u in ve(r,n),r=null,o)if(!n.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var l=o[u];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=null!=o?o[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(a||(a=[]),a.push(u,r)),r=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Nn("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Rs=function(e,t,r,n){r!==n&&(t.flags|=4)};var Zs=!1,Ys=!1,Js="function"===typeof WeakSet?WeakSet:Set,$s=null;function Qs(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){kc(e,t,n)}else r.current=null}function el(e,t,r){try{r()}catch(n){kc(e,t,n)}}var tl=!1;function rl(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var o=n=n.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&el(t,r,i)}o=o.next}while(o!==n)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ol(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[po],delete t[fo],delete t[go],delete t[yo],delete t[vo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Qn));else if(4!==n&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var ul=null,dl=!1;function hl(e,t,r){for(r=r.child;null!==r;)pl(e,t,r),r=r.sibling}function pl(e,t,r){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,r)}catch(s){}switch(r.tag){case 5:Ys||Qs(r,t);case 6:var n=ul,o=dl;ul=null,hl(e,t,r),dl=o,null!==(ul=n)&&(dl?(e=ul,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):ul.removeChild(r.stateNode));break;case 18:null!==ul&&(dl?(e=ul,r=r.stateNode,8===e.nodeType?lo(e.parentNode,r):1===e.nodeType&&lo(e,r),Vt(e)):lo(ul,r.stateNode));break;case 4:n=ul,o=dl,ul=r.stateNode.containerInfo,dl=!0,hl(e,t,r),ul=n,dl=o;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){o=n=n.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&el(r,t,a),o=o.next}while(o!==n)}hl(e,t,r);break;case 1:if(!Ys&&(Qs(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){kc(r,t,s)}hl(e,t,r);break;case 21:hl(e,t,r);break;case 22:1&r.mode?(Ys=(n=Ys)||null!==r.memoizedState,hl(e,t,r),Ys=n):hl(e,t,r);break;default:hl(e,t,r)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Js),t.forEach((function(t){var n=Ac.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function ml(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var o=r[n];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(i(160));pl(a,s,o),ul=null,dl=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(u){kc(o,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&n){try{rl(3,e,e.return),nl(3,e)}catch(g){kc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&n&&null!==r&&Qs(r,r.return);break;case 5:if(ml(t,e),yl(e),512&n&&null!==r&&Qs(r,r.return),32&e.flags){var o=e.stateNode;try{he(o,"")}catch(g){kc(e,e.return,g)}}if(4&n&&null!=(o=e.stateNode)){var a=e.memoizedProps,s=null!==r?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(o,a),be(l,s);var u=be(l,a);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];"style"===d?ge(o,h):"dangerouslySetInnerHTML"===d?de(o,h):"children"===d?he(o,h):b(o,d,h,u)}switch(l){case"input":$(o,a);break;case"textarea":ie(o,a);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?re(o,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?re(o,!!a.multiple,a.defaultValue,!0):re(o,!!a.multiple,a.multiple?[]:"",!1))}o[fo]=a}catch(g){kc(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&n){if(null===e.stateNode)throw Error(i(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(g){kc(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(o=e.child).flags&&(a=null!==o.memoizedState,o.stateNode.isHidden=a,!a||null!==o.alternate&&null!==o.alternate.memoizedState||(Ul=Je())),4&n&&fl(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(Ys=(u=Ys)||d,ml(t,e),Ys=u):ml(t,e),yl(e),8192&n){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for($s=e,d=e.child;null!==d;){for(h=$s=d;null!==$s;){switch(f=(p=$s).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:Qs(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){n=p,r=p.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){kc(n,r,g)}}break;case 5:Qs(p,p.return);break;case 22:if(null!==p.memoizedState){_l(h);continue}}null!==f?(f.return=p,$s=f):_l(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{o=h.stateNode,u?"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),yl(e),4&n&&fl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(al(r)){var n=r;break e}r=r.return}throw Error(i(160))}switch(n.tag){case 5:var o=n.stateNode;32&n.flags&&(he(o,""),n.flags&=-33),cl(e,sl(e),o);break;case 3:case 4:var a=n.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(i(161))}}catch(s){kc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,r){$s=e,bl(e,t,r)}function bl(e,t,r){for(var n=0!==(1&e.mode);null!==$s;){var o=$s,i=o.child;if(22===o.tag&&n){var a=null!==o.memoizedState||Zs;if(!a){var s=o.alternate,l=null!==s&&null!==s.memoizedState||Ys;s=Zs;var c=Ys;if(Zs=a,(Ys=l)&&!c)for($s=o;null!==$s;)l=(a=$s).child,22===a.tag&&null!==a.memoizedState?wl(o):null!==l?(l.return=a,$s=l):wl(o);for(;null!==i;)$s=i,bl(i,t,r),i=i.sibling;$s=o,Zs=s,Ys=c}xl(e)}else 0!==(8772&o.subtreeFlags)&&null!==i?(i.return=o,$s=i):xl(e)}}function xl(e){for(;null!==$s;){var t=$s;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||nl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Ys)if(null===r)n.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:rs(t.type,r.memoizedProps);n.componentDidUpdate(o,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&qi(t,a,n);break;case 3:var s=t.updateQueue;if(null!==s){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}qi(t,s,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(i(163))}Ys||512&t.flags&&ol(t)}catch(p){kc(t,t.return,p)}}if(t===e){$s=null;break}if(null!==(r=t.sibling)){r.return=t.return,$s=r;break}$s=t.return}}function _l(e){for(;null!==$s;){var t=$s;if(t===e){$s=null;break}var r=t.sibling;if(null!==r){r.return=t.return,$s=r;break}$s=t.return}}function wl(e){for(;null!==$s;){var t=$s;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nl(4,t)}catch(l){kc(t,r,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var o=t.return;try{n.componentDidMount()}catch(l){kc(t,o,l)}}var i=t.return;try{ol(t)}catch(l){kc(t,i,l)}break;case 5:var a=t.return;try{ol(t)}catch(l){kc(t,a,l)}}}catch(l){kc(t,t.return,l)}if(t===e){$s=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$s=s;break}$s=t.return}}var Sl,kl=Math.ceil,Tl=x.ReactCurrentDispatcher,El=x.ReactCurrentOwner,Cl=x.ReactCurrentBatchConfig,Al=0,jl=null,Pl=null,Il=0,Ol=0,Ml=To(0),Rl=0,Ll=null,Fl=0,zl=0,Dl=0,Nl=null,Bl=null,Ul=0,Vl=1/0,Wl=null,ql=!1,Hl=null,Gl=null,Kl=!1,Xl=null,Zl=0,Yl=0,Jl=null,$l=-1,Ql=0;function ec(){return 0!==(6&Al)?Je():-1!==$l?$l:$l=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Il?Il&-Il:null!==gi.transition?(0===Ql&&(Ql=mt()),Ql):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,r,n){if(50<Yl)throw Yl=0,Jl=null,Error(i(185));yt(e,r,n),0!==(2&Al)&&e===jl||(e===jl&&(0===(2&Al)&&(zl|=r),4===Rl&&sc(e,Il)),nc(e,n),1===r&&0===Al&&0===(1&t.mode)&&(Vl=Je()+500,Bo&&Wo()))}function nc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),s=1<<a,l=o[a];-1===l?0!==(s&r)&&0===(s&n)||(o[a]=pt(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var n=ht(e,e===jl?Il:0);if(0===n)null!==r&&Xe(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Xe(r),1===t)0===e.tag?function(e){Bo=!0,Vo(e)}(lc.bind(null,e)):Vo(lc.bind(null,e)),ao((function(){0===(6&Al)&&Wo()})),r=null;else{switch(xt(n)){case 1:r=Qe;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=jc(r,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function oc(e,t){if($l=-1,Ql=0,0!==(6&Al))throw Error(i(327));var r=e.callbackNode;if(wc()&&e.callbackNode!==r)return null;var n=ht(e,e===jl?Il:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=gc(e,n);else{t=n;var o=Al;Al|=2;var a=fc();for(jl===e&&Il===t||(Wl=null,Vl=Je()+500,hc(e,t));;)try{vc();break}catch(l){pc(e,l)}Ci(),Tl.current=a,Al=o,null!==Pl?t=0:(jl=null,Il=0,t=Rl)}if(0!==t){if(2===t&&(0!==(o=ft(e))&&(n=o,t=ic(e,o))),1===t)throw r=Ll,hc(e,0),sc(e,n),nc(e,Je()),r;if(6===t)sc(e,n);else{if(o=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var o=r[n],i=o.getSnapshot;o=o.value;try{if(!sn(i(),o))return!1}catch(s){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=gc(e,n))&&(0!==(a=ft(e))&&(n=a,t=ic(e,a))),1===t))throw r=Ll,hc(e,0),sc(e,n),nc(e,Je()),r;switch(e.finishedWork=o,e.finishedLanes=n,t){case 0:case 1:throw Error(i(345));case 2:case 5:_c(e,Bl,Wl);break;case 3:if(sc(e,n),(130023424&n)===n&&10<(t=Ul+500-Je())){if(0!==ht(e,0))break;if(((o=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=no(_c.bind(null,e,Bl,Wl),t);break}_c(e,Bl,Wl);break;case 4:if(sc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,o=-1;0<n;){var s=31-at(n);a=1<<s,(s=t[s])>o&&(o=s),n&=~a}if(n=o,10<(n=(120>(n=Je()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*kl(n/1960))-n)){e.timeoutHandle=no(_c.bind(null,e,Bl,Wl),n);break}_c(e,Bl,Wl);break;default:throw Error(i(329))}}}return nc(e,Je()),e.callbackNode===r?oc.bind(null,e):null}function ic(e,t){var r=Nl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=r,null!==t&&ac(t)),e}function ac(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function sc(e,t){for(t&=~Dl,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-at(t),n=1<<r;e[r]=-1,t&=~n}}function lc(e){if(0!==(6&Al))throw Error(i(327));wc();var t=ht(e,0);if(0===(1&t))return nc(e,Je()),null;var r=gc(e,t);if(0!==e.tag&&2===r){var n=ft(e);0!==n&&(t=n,r=ic(e,n))}if(1===r)throw r=Ll,hc(e,0),sc(e,t),nc(e,Je()),r;if(6===r)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Bl,Wl),nc(e,Je()),null}function cc(e,t){var r=Al;Al|=1;try{return e(t)}finally{0===(Al=r)&&(Vl=Je()+500,Bo&&Wo())}}function uc(e){null!==Xl&&0===Xl.tag&&0===(6&Al)&&wc();var t=Al;Al|=1;var r=Cl.transition,n=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=n,Cl.transition=r,0===(6&(Al=t))&&Wo()}}function dc(){Ol=Ml.current,Eo(Ml)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,oo(r)),null!==Pl)for(r=Pl.return;null!==r;){var n=r;switch(ri(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Ro();break;case 3:Ji(),Eo(Po),Eo(jo),na();break;case 5:Qi(n);break;case 4:Ji();break;case 13:case 19:Eo(ea);break;case 10:Ai(n.type._context);break;case 22:case 23:dc()}r=r.return}if(jl=e,Pl=e=Mc(e.current,null),Il=Ol=t,Rl=0,Ll=null,Dl=zl=Fl=0,Bl=Nl=null,null!==Oi){for(t=0;t<Oi.length;t++)if(null!==(n=(r=Oi[t]).interleaved)){r.interleaved=null;var o=n.next,i=r.pending;if(null!==i){var a=i.next;i.next=o,n.next=a}r.pending=n}Oi=null}return e}function pc(e,t){for(;;){var r=Pl;try{if(Ci(),oa.current=$a,ua){for(var n=sa.memoizedState;null!==n;){var o=n.queue;null!==o&&(o.pending=null),n=n.next}ua=!1}if(aa=0,ca=la=sa=null,da=!1,ha=0,El.current=null,null===r||null===r.return){Rl=1,Ll=t,Pl=null;break}e:{var a=e,s=r.return,l=r,c=t;if(t=Il,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,ys(f,s,l,0,t),1&f.mode&&ms(a,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ms(a,u,t),mc();break e}c=Error(i(426))}else if(ii&&1&l.mode){var y=gs(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ys(y,s,l,0,t),mi(cs(c,l));break e}}a=c=cs(c,l),4!==Rl&&(Rl=2),null===Nl?Nl=[a]:Nl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Vi(a,ps(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Vi(a,fs(a,l,t));break e}}a=a.return}while(null!==a)}xc(r)}catch(x){t=x,Pl===r&&null!==r&&(Pl=r=r.return);continue}break}}function fc(){var e=Tl.current;return Tl.current=$a,null===e?$a:e}function mc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===jl||0===(268435455&Fl)&&0===(268435455&zl)||sc(jl,Il)}function gc(e,t){var r=Al;Al|=2;var n=fc();for(jl===e&&Il===t||(Wl=null,hc(e,t));;)try{yc();break}catch(o){pc(e,o)}if(Ci(),Al=r,Tl.current=n,null!==Pl)throw Error(i(261));return jl=null,Il=0,Rl}function yc(){for(;null!==Pl;)bc(Pl)}function vc(){for(;null!==Pl&&!Ze();)bc(Pl)}function bc(e){var t=Sl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?xc(e):Pl=t,El.current=null}function xc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Ks(r,t,Ol)))return void(Pl=r)}else{if(null!==(r=Xs(r,t)))return r.flags&=32767,void(Pl=r);if(null===e)return Rl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Rl&&(Rl=5)}function _c(e,t,r){var n=bt,o=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,r,n){do{wc()}while(null!==Xl);if(0!==(6&Al))throw Error(i(327));r=e.finishedWork;var o=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-at(r),i=1<<o;t[o]=0,n[o]=-1,e[o]=-1,r&=~i}}(e,a),e===jl&&(Pl=jl=null,Il=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Kl||(Kl=!0,jc(tt,(function(){return wc(),null}))),a=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var s=bt;bt=1;var l=Al;Al|=4,El.current=null,function(e,t){if(eo=qt,pn(e=hn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var o=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch(_){r=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==r||0!==o&&3!==h.nodeType||(l=s+o),h!==a||0!==n&&3!==h.nodeType||(c=s+n),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===r&&++u===o&&(l=s),p===a&&++d===n&&(c=s),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(to={focusedElem:e,selectionRange:r},qt=!1,$s=t;null!==$s;)if(e=(t=$s).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$s=e;else for(;null!==$s;){t=$s;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:rs(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(_){kc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,$s=e;break}$s=t.return}m=tl,tl=!1}(e,r),gl(r,e),fn(to),qt=!!eo,to=eo=null,e.current=r,vl(r,e,o),Ye(),Al=l,bt=s,Cl.transition=a}else e.current=r;if(Kl&&(Kl=!1,Xl=e,Zl=o),a=e.pendingLanes,0===a&&(Gl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),nc(e,Je()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)o=t[r],n(o.value,{componentStack:o.stack,digest:o.digest});if(ql)throw ql=!1,e=Hl,Hl=null,e;0!==(1&Zl)&&0!==e.tag&&wc(),a=e.pendingLanes,0!==(1&a)?e===Jl?Yl++:(Yl=0,Jl=e):Yl=0,Wo()}(e,t,r,n)}finally{Cl.transition=o,bt=n}return null}function wc(){if(null!==Xl){var e=xt(Zl),t=Cl.transition,r=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Xl)var n=!1;else{if(e=Xl,Xl=null,Zl=0,0!==(6&Al))throw Error(i(331));var o=Al;for(Al|=4,$s=e.current;null!==$s;){var a=$s,s=a.child;if(0!==(16&$s.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($s=u;null!==$s;){var d=$s;switch(d.tag){case 0:case 11:case 15:rl(8,d,a)}var h=d.child;if(null!==h)h.return=d,$s=h;else for(;null!==$s;){var p=(d=$s).sibling,f=d.return;if(il(d),d===u){$s=null;break}if(null!==p){p.return=f,$s=p;break}$s=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}$s=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,$s=s;else e:for(;null!==$s;){if(0!==(2048&(a=$s).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,$s=v;break e}$s=a.return}}var b=e.current;for($s=b;null!==$s;){var x=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,$s=x;else e:for(s=b;null!==$s;){if(0!==(2048&(l=$s).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(w){kc(l,l.return,w)}if(l===s){$s=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,$s=_;break e}$s=l.return}}if(Al=o,Wo(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(w){}n=!0}return n}finally{bt=r,Cl.transition=t}}return!1}function Sc(e,t,r){e=Bi(e,t=ps(0,t=cs(r,t),1),1),t=ec(),null!==e&&(yt(e,1,t),nc(e,t))}function kc(e,t,r){if(3===e.tag)Sc(e,e,r);else for(;null!==t;){if(3===t.tag){Sc(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Gl||!Gl.has(n))){t=Bi(t,e=fs(t,e=cs(r,e),1),1),e=ec(),null!==t&&(yt(t,1,e),nc(t,e));break}}t=t.return}}function Tc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,jl===e&&(Il&r)===r&&(4===Rl||3===Rl&&(130023424&Il)===Il&&500>Je()-Ul?hc(e,0):Dl|=r),nc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var r=ec();null!==(e=Li(e,t))&&(yt(e,t,r),nc(e,r))}function Cc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Ec(e,r)}function Ac(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,o=e.memoizedState;null!==o&&(r=o.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(i(314))}null!==n&&n.delete(t),Ec(e,r)}function jc(e,t){return Ke(e,t)}function Pc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ic(e,t,r,n){return new Pc(e,t,r,n)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var r=e.alternate;return null===r?((r=Ic(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Rc(e,t,r,n,o,a){var s=2;if(n=e,"function"===typeof e)Oc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Lc(r.children,o,a,t);case k:s=8,o|=8;break;case T:return(e=Ic(12,r,t,2|o)).elementType=T,e.lanes=a,e;case j:return(e=Ic(13,r,t,o)).elementType=j,e.lanes=a,e;case P:return(e=Ic(19,r,t,o)).elementType=P,e.lanes=a,e;case M:return Fc(r,o,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case C:s=9;break e;case A:s=11;break e;case I:s=14;break e;case O:s=16,n=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Ic(s,r,t,o)).elementType=e,t.type=n,t.lanes=a,t}function Lc(e,t,r,n){return(e=Ic(7,e,n,t)).lanes=r,e}function Fc(e,t,r,n){return(e=Ic(22,e,n,t)).elementType=M,e.lanes=r,e.stateNode={isHidden:!1},e}function zc(e,t,r){return(e=Ic(6,e,null,t)).lanes=r,e}function Dc(e,t,r){return(t=Ic(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Nc(e,t,r,n,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=n,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Bc(e,t,r,n,o,i,a,s,l){return e=new Nc(e,t,r,s,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Ic(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},zi(i),e}function Uc(e){if(!e)return Ao;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var r=e.type;if(Mo(r))return Fo(e,r,t)}return t}function Vc(e,t,r,n,o,i,a,s,l){return(e=Bc(r,n,!0,e,0,i,0,s,l)).context=Uc(null),r=e.current,(i=Ni(n=ec(),o=tc(r))).callback=void 0!==t&&null!==t?t:null,Bi(r,i,o),e.current.lanes=o,yt(e,o,n),nc(e,n),e}function Wc(e,t,r,n){var o=t.current,i=ec(),a=tc(o);return r=Uc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Ni(i,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Bi(o,t,a))&&(rc(e,o,a,i),Ui(e,o,a)),a}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Sl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Po.current)bs=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return bs=!1,function(e,t,r){switch(t.tag){case 3:js(t),fi();break;case 5:$i(t);break;case 1:Mo(t.type)&&zo(t);break;case 4:Yi(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,o=t.memoizedProps.value;Co(Si,n._currentValue),n._currentValue=o;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Co(ea,1&ea.current),t.flags|=128,null):0!==(r&t.child.childLanes)?zs(e,t,r):(Co(ea,1&ea.current),null!==(e=qs(e,t,r))?e.sibling:null);Co(ea,1&ea.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return Vs(e,t,r);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Co(ea,ea.current),n)break;return null;case 22:case 23:return t.lanes=0,ks(e,t,r)}return qs(e,t,r)}(e,t,r);bs=0!==(131072&e.flags)}else bs=!1,ii&&0!==(1048576&t.flags)&&ei(t,Ko,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ws(e,t),e=t.pendingProps;var o=Oo(t,jo.current);Pi(t,r),o=ga(null,t,n,e,o,r);var a=ya();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mo(n)?(a=!0,zo(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,zi(t),o.updater=os,t.stateNode=o,o._reactInternals=t,ls(t,n,e,r),t=As(null,t,n,!0,a,r)):(t.tag=0,ii&&a&&ti(t),xs(null,t,o,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,n=(o=n._init)(n._payload),t.type=n,o=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===I)return 14}return 2}(n),e=rs(n,e),o){case 0:t=Es(null,t,n,e,r);break e;case 1:t=Cs(null,t,n,e,r);break e;case 11:t=_s(null,t,n,e,r);break e;case 14:t=ws(null,t,n,rs(n.type,e),r);break e}throw Error(i(306,n,""))}return t;case 0:return n=t.type,o=t.pendingProps,Es(e,t,n,o=t.elementType===n?o:rs(n,o),r);case 1:return n=t.type,o=t.pendingProps,Cs(e,t,n,o=t.elementType===n?o:rs(n,o),r);case 3:e:{if(js(t),null===e)throw Error(i(387));n=t.pendingProps,o=(a=t.memoizedState).element,Di(e,t),Wi(t,n,null,r);var s=t.memoizedState;if(n=s.element,a.isDehydrated){if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ps(e,t,n,r,o=cs(Error(i(423)),t));break e}if(n!==o){t=Ps(e,t,n,r,o=cs(Error(i(424)),t));break e}for(oi=co(t.stateNode.containerInfo.firstChild),ni=t,ii=!0,ai=null,r=wi(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(fi(),n===o){t=qs(e,t,r);break e}xs(e,t,n,r)}t=t.child}return t;case 5:return $i(t),null===e&&ui(t),n=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,ro(n,o)?s=null:null!==a&&ro(n,a)&&(t.flags|=32),Ts(e,t),xs(e,t,s,r),t.child;case 6:return null===e&&ui(t),null;case 13:return zs(e,t,r);case 4:return Yi(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=_i(t,null,n,r):xs(e,t,n,r),t.child;case 11:return n=t.type,o=t.pendingProps,_s(e,t,n,o=t.elementType===n?o:rs(n,o),r);case 7:return xs(e,t,t.pendingProps,r),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,o=t.pendingProps,a=t.memoizedProps,s=o.value,Co(Si,n._currentValue),n._currentValue=s,null!==a)if(sn(a.value,s)){if(a.children===o.children&&!Po.current){t=qs(e,t,r);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===a.tag){(c=Ni(-1,r&-r)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,null!==(c=a.alternate)&&(c.lanes|=r),ji(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(i(341));s.lanes|=r,null!==(l=s.alternate)&&(l.lanes|=r),ji(s,r,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}xs(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,n=t.pendingProps.children,Pi(t,r),n=n(o=Ii(o)),t.flags|=1,xs(e,t,n,r),t.child;case 14:return o=rs(n=t.type,t.pendingProps),ws(e,t,n,o=rs(n.type,o),r);case 15:return Ss(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:rs(n,o),Ws(e,t),t.tag=1,Mo(n)?(e=!0,zo(t)):e=!1,Pi(t,r),as(t,n,o),ls(t,n,o,r),As(null,t,n,!0,e,r);case 19:return Vs(e,t,r);case 22:return ks(e,t,r)}throw Error(i(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Zc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function Qc(e,t,r,n,o){var i=r._reactRootContainer;if(i){var a=i;if("function"===typeof o){var s=o;o=function(){var e=qc(a);s.call(e)}}Wc(t,a,e,o)}else a=function(e,t,r,n,o){if(o){if("function"===typeof n){var i=n;n=function(){var e=qc(a);i.call(e)}}var a=Vc(t,n,e,0,null,!1,0,"",$c);return e._reactRootContainer=a,e[mo]=a.current,Vn(8===e.nodeType?e.parentNode:e),uc(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof n){var s=n;n=function(){var e=qc(l);s.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[mo]=l.current,Vn(8===e.nodeType?e.parentNode:e),uc((function(){Wc(t,l,r,n)})),l}(r,t,e,o,n);return qc(a)}Zc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Wc(e,t,null,null)},Zc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Wc(null,e,null,null)})),t[mo]=null}},Zc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Mt.length&&0!==t&&t<Mt[r].priority;r++);Mt.splice(r,0,e),0===r&&zt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=dt(t.pendingLanes);0!==r&&(vt(t,1|r),nc(t,Je()),0===(6&Al)&&(Vl=Je()+500,Wo()))}break;case 13:uc((function(){var t=Li(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}})),Gc(e,1)}},wt=function(e){if(13===e.tag){var t=Li(e,134217728);if(null!==t)rc(t,e,134217728,ec());Gc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),r=Li(e,t);if(null!==r)rc(r,e,t,ec());Gc(e,t)}},kt=function(){return bt},Tt=function(e,t){var r=bt;try{return bt=e,t()}finally{bt=r}},we=function(e,t,r){switch(t){case"input":if($(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var o=wo(n);if(!o)throw Error(i(90));K(n),$(n,o)}}}break;case"textarea":ie(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ae=cc,je=uc;var eu={usingClientEntryPoint:!1,Events:[xo,_o,wo,Ee,Ce,cc]},tu={findFiberByHostInstance:bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ru={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{ot=nu.inject(ru),it=nu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(i(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Yc(e))throw Error(i(299));var r=!1,n="",o=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Bc(e,1,!1,null,0,r,0,n,o),e[mo]=t.current,Vn(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,r){if(!Jc(t))throw Error(i(200));return Qc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Yc(e))throw Error(i(405));var n=null!=r&&r.hydratedSources||null,o=!1,a="",s=Kc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(o=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onRecoverableError&&(s=r.onRecoverableError)),t=Vc(t,null,e,1,null!=r?r:null,o,0,a,s),e[mo]=t.current,Vn(e),n)for(e=0;e<n.length;e++)o=(o=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,o]:t.mutableSourceEagerHydrationData.push(r,o);return new Zc(t)},t.render=function(e,t,r){if(!Jc(t))throw Error(i(200));return Qc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(i(40));return!!e._reactRootContainer&&(uc((function(){Qc(null,null,e,!1,(function(){e._reactRootContainer=null,e[mo]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Jc(r))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Qc(e,t,r,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},736:(e,t,r)=>{var n=r(738).default,o=r(45);e.exports=function(e){var t=o(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},763:(e,t,r)=>{"use strict";e.exports=r(983)},853:(e,t,r)=>{"use strict";e.exports=r(234)},879:function(e){e.exports=function(){"use strict";var e,t,r;function n(n,o){if(e)if(t){var i="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk); self.onerror = null;",a={};e(a),r=o(a),"undefined"!==typeof window&&window&&window.URL&&window.URL.createObjectURL&&(r.workerUrl=window.URL.createObjectURL(new Blob([i],{type:"text/javascript"})))}else t=o;else e=o}return n(["exports"],(function(e){var t="undefined"!=typeof self?self:{},r="2.15.0";let n;const o={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==n){const e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{n=null!={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1Ijoic2VyZ2UzNjl4MzMiLCJhIjoiY20zZHh6M2h2MDVoZzJqcTdudXhidm5kdyJ9.31fpP6C_HjNaTEN3C0fDTg"}.API_URL_REGEX?new RegExp({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1Ijoic2VyZ2UzNjl4MzMiLCJhIjoiY20zZHh6M2h2MDVoZzJqcTdudXhidm5kdyJ9.31fpP6C_HjNaTEN3C0fDTg"}.API_URL_REGEX):e}catch(t){n=e}}return n},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!o.API_URL)return null;try{const e=new URL(o.API_URL);return"api.mapbox.cn"===e.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===e.hostname?"https://events.mapbox.com/events/v2":null}catch(e){return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},i={supported:!1,testSupport:function(e){!l&&s&&(c?u(e):a=e)}};let a,s,l=!1,c=!1;function u(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,s),e.isContextLost())return;i.supported=!0}catch(e){}e.deleteTexture(t),l=!0}t.document&&(s=t.document.createElement("img"),s.onload=function(){a&&u(a),a=null,c=!0},s.onerror=function(){l=!0,a=null},s.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const d="01";function h(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var p=f;function f(e,t,r,n){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=n}f.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,n=0;n<8;n++){var o=this.sampleCurveX(r)-e;if(Math.abs(o)<t)return r;var i=this.sampleCurveDerivativeX(r);if(Math.abs(i)<1e-6)break;r-=o/i}var a=0,s=1;for(r=e,n=0;n<20&&(o=this.sampleCurveX(r),!(Math.abs(o-e)<t));n++)e>o?a=r:s=r,r=.5*(s-a)+a;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var m=h(p),g=y;function y(e,t){this.x=e,this.y=t}y.prototype={clone:function(){return new y(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=r*this.x+t*this.y;return this.x=t*this.x-r*this.y,this.y=n,this},_rotateAround:function(e,t){var r=Math.cos(e),n=Math.sin(e),o=t.y+n*(this.x-t.x)+r*(this.y-t.y);return this.x=t.x+r*(this.x-t.x)-n*(this.y-t.y),this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},y.convert=function(e){return e instanceof y?e:Array.isArray(e)?new y(e[0],e[1]):e};var v=h(g);const b=Math.PI/180,x=180/Math.PI;function _(e){return e*b}function w(e){return e*x}const S=[[0,0],[1,0],[1,1],[0,1]];function k(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)}function T(e,t,r,n){const o=new m(e,t,r,n);return function(e){return o.solve(e)}}const E=T(.25,.1,.25,1);function C(e,t,r){return Math.min(r,Math.max(t,e))}function A(e,t,r){return(r=C((r-e)/(t-e),0,1))*r*(3-2*r)}function j(e,t,r){const n=r-t,o=((e-t)%n+n)%n+t;return o===t?r:o}function P(e,t,r){if(!e.length)return r(null,[]);let n=e.length;const o=new Array(e.length);let i=null;e.forEach(((e,a)=>{t(e,((e,t)=>{e&&(i=e),o[a]=t,0==--n&&r(i,o)}))}))}function I(e){const t=[];for(const r in e)t.push(e[r]);return t}function O(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(const o of r)for(const t in o)e[t]=o[t];return e}let M=1;function R(){return M++}function L(){return function e(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function F(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function z(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function D(e,t){e.forEach((e=>{t[e]&&(t[e]=t[e].bind(t))}))}function N(e,t){return-1!==e.indexOf(t,e.length-t.length)}function B(e,t,r){const n={};for(const o in e)n[o]=t.call(r||this,e[o],o,e);return n}function U(e,t,r){const n={};for(const o in e)t.call(r||this,e[o],o,e)&&(n[o]=e[o]);return n}function V(e){return Array.isArray(e)?e.map(V):"object"==typeof e&&e?B(e,V):e}const W={};function q(e){W[e]||("undefined"!=typeof console&&console.warn(e),W[e]=!0)}function H(e,t,r){return(r.y-e.y)*(t.x-e.x)>(t.y-e.y)*(r.x-e.x)}function G(e){let t=0;for(let r,n,o=0,i=e.length,a=i-1;o<i;a=o++)r=e[o],n=e[a],t+=(n.x-r.x)*(r.y+n.y);return t}function K(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function X(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((e,r,n,o)=>{const i=n||o;return t[r]=!i||i.toLowerCase(),""})),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t}let Z=null;function Y(e){if(null==Z){const t=e.navigator?e.navigator.userAgent:null;Z=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Z}function J(e){try{const r=t[e];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch(e){return!1}}function $(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}const Q="mapbox-tiles";let ee,te,re=500,ne=50;function oe(){try{return t.caches}catch(e){}}function ie(){oe()&&!ee&&(ee=t.caches.open(Q))}function ae(e){const t=e.indexOf("?");if(t<0)return e;const r=function(e){const t=e.indexOf("?");return t>0?e.slice(t+1).split("&"):[]}(e),n=r.filter((e=>{const t=e.split("=");return"language"===t[0]||"worldview"===t[0]}));return n.length?"".concat(e.slice(0,t),"?").concat(n.join("&")):e.slice(0,t)}let se=1/0;const le={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(le);class ce extends Error{constructor(e,t,r){401===t&&xe(r)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=t,this.url=r}toString(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}const ue=K()?()=>self.worker&&self.worker.referrer:()=>("blob:"===t.location.protocol?t.parent:t).location.href,de=function(e,r){if(!(/^file:/.test(n=e.url)||/^file:/.test(ue())&&!/^\w+:/.test(n))){if(t.fetch&&t.Request&&t.AbortController&&t.Request.prototype.hasOwnProperty("signal"))return function(e,r){const n=new t.AbortController,o=new t.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:ue(),referrerPolicy:e.referrerPolicy,signal:n.signal});let i=!1,a=!1;const s=(l=o.url).indexOf("sku=")>0&&xe(l);var l;"json"===e.type&&o.headers.set("Accept","application/json");const c=(n,i,l)=>{if(a)return;if(n&&"SecurityError"!==n.message&&q(n.toString()),i&&l)return u(i);const c=Date.now();t.fetch(o).then((t=>{if(t.ok){const e=s?t.clone():null;return u(t,e,c)}return r(new ce(t.statusText,t.status,e.url))})).catch((t=>{"AbortError"!==t.name&&r(new Error("".concat(t.message," ").concat(e.url)))}))},u=(n,s,l)=>{("arrayBuffer"===e.type?n.arrayBuffer():"json"===e.type?n.json():n.text()).then((e=>{a||(s&&l&&function(e,r,n){if(ie(),!ee)return;const o={status:r.status,statusText:r.statusText,headers:new t.Headers};r.headers.forEach(((e,t)=>o.headers.set(t,e)));const i=X(r.headers.get("Cache-Control")||"");if(i["no-store"])return;i["max-age"]&&o.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString());const a=o.headers.get("Expires");a&&(new Date(a).getTime()-n<42e4||function(e,t){if(void 0===te)try{new Response(new ReadableStream),te=!0}catch(e){te=!1}te?t(e.body):e.blob().then(t)}(r,(r=>{const n=new t.Response(r,o);ie(),ee&&ee.then((t=>t.put(ae(e.url),n))).catch((e=>q(e.message)))})))}(o,s,l),i=!0,r(null,e,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((e=>{a||r(new Error(e.message))}))};return s?function(e,t){if(ie(),!ee)return t(null);const r=ae(e.url);ee.then((e=>{e.match(r).then((n=>{const o=function(e){if(!e)return!1;const t=new Date(e.headers.get("Expires")||0),r=X(e.headers.get("Cache-Control")||"");return t>Date.now()&&!r["no-cache"]}(n);e.delete(r),o&&e.put(r,n.clone()),t(null,n,o)})).catch(t)})).catch(t)}(o,c):c(null,null),{cancel:()=>{a=!0,i||n.abort()}}}(e,r);if(K()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,r,void 0,!0)}var n;return function(e,r){const n=new t.XMLHttpRequest;n.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer");for(const t in e.headers)n.setRequestHeader(t,e.headers[t]);return"json"===e.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===e.credentials,n.onerror=()=>{r(new Error(n.statusText))},n.onload=()=>{if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){let t=n.response;if("json"===e.type)try{t=JSON.parse(n.response)}catch(e){return r(e)}r(null,t,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else r(new ce(n.statusText,n.status,e.url))},n.send(e.body),{cancel:()=>n.abort()}}(e,r)},he=function(e,t){return de(O(e,{type:"arrayBuffer"}),t)};function pe(e){const r=t.document.createElement("a");return r.href=e,r.protocol===t.document.location.protocol&&r.host===t.document.location.host}const fe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let me,ge;me=[],ge=0;const ye=function(e,r){if(i.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),ge>=o.MAX_PARALLEL_IMAGE_REQUESTS){const t={requestParameters:e,callback:r,cancelled:!1,cancel(){this.cancelled=!0}};return me.push(t),t}ge++;let n=!1;const a=()=>{if(!n)for(n=!0,ge--;me.length&&ge<o.MAX_PARALLEL_IMAGE_REQUESTS;){const e=me.shift(),{requestParameters:t,callback:r,cancelled:n}=e;n||(e.cancel=ye(t,r).cancel)}},s=he(e,((e,n,o,i)=>{a(),e?r(e):n&&(t.createImageBitmap?function(e,r){const n=new t.Blob([new Uint8Array(e)],{type:"image/png"});t.createImageBitmap(n).then((e=>{r(null,e)})).catch((e=>{r(new Error("Could not load image because of ".concat(e.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))}))}(n,((e,t)=>r(e,t,o,i))):function(e,r){const n=new t.Image,o=t.URL;n.onload=()=>{r(null,n),o.revokeObjectURL(n.src),n.onload=null,t.requestAnimationFrame((()=>{n.src=fe}))},n.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const i=new t.Blob([new Uint8Array(e)],{type:"image/png"});n.src=e.byteLength?o.createObjectURL(i):fe}(n,((e,t)=>r(e,t,o,i))))}));return{cancel:()=>{s.cancel(),a()}}},ve="NO_ACCESS_TOKEN";function be(e){return 0===e.indexOf("mapbox:")}function xe(e){return o.API_URL_REGEX.test(e)}function _e(e){return o.API_CDN_URL_REGEX.test(e)}function we(e){return o.API_STYLE_REGEX.test(e)&&!Se(e)}function Se(e){return o.API_SPRITE_REGEX.test(e)}const ke=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Te(e){const t=e.match(ke);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Ee(e){const t=e.params.length?"?".concat(e.params.join("&")):"";return"".concat(e.protocol,"://").concat(e.authority).concat(e.path).concat(t)}const Ce="mapbox.eventData";function Ae(e){if(!e)return null;const r=e.split(".");if(!r||3!==r.length)return null;try{return JSON.parse(decodeURIComponent(t.atob(r[1]).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(e){return null}}class je{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const r=Ae(o.ACCESS_TOKEN);let n="";return n=r&&r.u?t.btoa(encodeURIComponent(r.u).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(Number("0x"+t))))):o.ACCESS_TOKEN||"",e?"".concat(Ce,".").concat(e,":").concat(n):"".concat(Ce,":").concat(n)}fetchEventData(){const e=J("localStorage"),r=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{const e=t.localStorage.getItem(r);e&&(this.eventData=JSON.parse(e));const o=t.localStorage.getItem(n);o&&(this.anonId=o)}catch(e){q("Unable to read from LocalStorage")}}saveEventData(){const e=J("localStorage"),r=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{t.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&t.localStorage.setItem(r,JSON.stringify(this.eventData))}catch(e){q("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,t,r,n){if(!o.EVENTS_URL)return;const i=Te(o.EVENTS_URL);i.params.push("access_token=".concat(n||o.ACCESS_TOKEN||""));const a={event:this.type,created:new Date(e).toISOString()},s=t?O(a,t):a,l={url:Ee(i),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=function(e,t){return de(O(e,{method:"POST"}),t)}(l,(e=>{this.pendingRequest=null,r(e),this.saveEventData(),this.processRequests(n)}))}queueRequest(e,t){this.queue.push(e),this.processRequests(t)}}const Pe=new class extends je{constructor(e){super("appUserTurnstile"),this._customAccessToken=e}postTurnstileEvent(e,t){o.EVENTS_URL&&o.ACCESS_TOKEN&&Array.isArray(e)&&e.some((e=>be(e)||xe(e)))&&this.queueRequest(Date.now(),t)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=Ae(o.ACCESS_TOKEN),n=t?t.u:o.ACCESS_TOKEN;let i=n!==this.eventData.tokenU;z(this.anonId)||(this.anonId=L(),i=!0);const a=this.queue.shift();if(this.eventData.lastSuccess){const e=new Date(this.eventData.lastSuccess),t=new Date(a),r=(a-this.eventData.lastSuccess)/864e5;i=i||r>=1||r<-1||e.getDate()!==t.getDate()}else i=!0;i?this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:r,skuId:d,"enabled.telemetry":!1,userId:this.anonId},(e=>{e||(this.eventData.lastSuccess=a,this.eventData.tokenU=n)}),e):this.processRequests()}},Ie=Pe.postTurnstileEvent.bind(Pe),Oe=new class extends je{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(e,t,r,n){this.skuToken=t,this.errorCb=n,o.EVENTS_URL&&(r||o.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},r):this.errorCb(new Error(ve)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:n}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),z(this.anonId)||(this.anonId=L()),this.postEvent(n,{sdkIdentifier:"mapbox-gl-js",sdkVersion:r,skuId:d,skuToken:this.skuToken,userId:this.anonId},(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e))}},Me=Oe.postMapLoadEvent.bind(Oe),Re=new class extends je{constructor(){super("gljs.performance")}postPerformanceEvent(e,t){o.EVENTS_URL&&(e||o.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:t},e)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:n,performanceData:o}=this.queue.shift(),i=function(e){const n=t.performance.getEntriesByType("resource"),o=t.performance.getEntriesByType("mark"),i=function(e){const t={};if(e)for(const r in e)if("other"!==r)for(const n of e[r]){const e="".concat(r,"ResolveRangeMin"),o="".concat(r,"ResolveRangeMax"),i="".concat(r,"RequestCount"),a="".concat(r,"RequestCachedCount");t[e]=Math.min(t[e]||1/0,n.startTime),t[o]=Math.max(t[o]||-1/0,n.responseEnd);const s=e=>{void 0===t[e]&&(t[e]=0),++t[e]};void 0!==n.transferSize&&0===n.transferSize&&s(a),s(i)}return t}(function(e,t){const r={};if(e)for(const n of e){const e=t(n);void 0===r[e]&&(r[e]=[]),r[e].push(n)}return r}(n,Ue)),a=t.devicePixelRatio,s=t.navigator.connection||t.navigator.mozConnection||t.navigator.webkitConnection,l={counters:[],metadata:[],attributes:[]},c=(e,t,r)=>{null!=r&&e.push({name:t,value:r.toString()})};for(const t in i)c(l.counters,t,i[t]);if(e.interactionRange[0]!==1/0&&e.interactionRange[1]!==-1/0&&(c(l.counters,"interactionRangeMin",e.interactionRange[0]),c(l.counters,"interactionRangeMax",e.interactionRange[1])),o)for(const t of Object.keys(Ne)){const e=Ne[t],r=o.find((t=>t.name===e));r&&c(l.counters,e,r.startTime)}return c(l.counters,"visibilityHidden",e.visibilityHidden),c(l.attributes,"style",function(e){if(e)for(const t of e){const e=t.name.split("?")[0];if(we(e)){const t=e.split("/").slice(-2);if(2===t.length)return"mapbox://styles/".concat(t[0],"/").concat(t[1])}}}(n)),c(l.attributes,"terrainEnabled",e.terrainEnabled?"true":"false"),c(l.attributes,"fogEnabled",e.fogEnabled?"true":"false"),c(l.attributes,"projection",e.projection),c(l.attributes,"zoom",e.zoom),c(l.metadata,"devicePixelRatio",a),c(l.metadata,"connectionEffectiveType",s?s.effectiveType:void 0),c(l.metadata,"navigatorUserAgent",t.navigator.userAgent),c(l.metadata,"screenWidth",t.screen.width),c(l.metadata,"screenHeight",t.screen.height),c(l.metadata,"windowWidth",t.innerWidth),c(l.metadata,"windowHeight",t.innerHeight),c(l.metadata,"mapWidth",e.width/a),c(l.metadata,"mapHeight",e.height/a),c(l.metadata,"webglRenderer",e.renderer),c(l.metadata,"webglVendor",e.vendor),c(l.metadata,"sdkVersion",r),c(l.metadata,"sdkIdentifier","mapbox-gl-js"),l}(o);for(const t of i.metadata);for(const t of i.counters);for(const t of i.attributes);this.postEvent(n,i,(()=>{}),e)}},Le=Re.postPerformanceEvent.bind(Re),Fe=new class extends je{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(e,t,r,n){if(!o.API_URL||!o.SESSION_PATH)return;const i=Te(o.API_URL+o.SESSION_PATH);i.params.push("sku=".concat(t||"")),i.params.push("access_token=".concat(n||o.ACCESS_TOKEN||""));const a={url:Ee(i),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(e,t){return de(O(e,{method:"GET"}),t)}(a,(e=>{this.pendingRequest=null,r(e),this.saveEventData(),this.processRequests(n)}))}getSessionAPI(e,t,r,n){this.skuToken=t,this.errorCb=n,o.SESSION_PATH&&o.API_URL&&(r||o.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},r):this.errorCb(new Error(ve)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:r}=this.queue.shift();t&&this.success[t]||this.getSession(r,this.skuToken,(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e)}},ze=Fe.getSessionAPI.bind(Fe),De=new Set,Ne={create:"create",load:"load",fullLoad:"fullLoad"},Be={mark(e){t.performance.mark(e)},measure(e,r,n){t.performance.measure(e,r,n)}};function Ue(e){const t=e.name.split("?")[0];return _e(t)&&t.includes("mapbox-gl.js")?"javascript":_e(t)&&t.includes("mapbox-gl.css")?"css":function(e){return o.API_FONTS_REGEX.test(e)}(t)?"fontRange":Se(t)?"sprite":we(t)?"style":function(e){return o.API_TILEJSON_REGEX.test(e)}(t)?"tilejson":"other"}const Ve=t.performance;function We(e){const t=e?e.url.toString():void 0;return Ve.getEntriesByName(t)}let qe,He,Ge,Ke;const Xe={now:()=>void 0!==Ge?Ge:t.performance.now(),setNow(e){Ge=e},restoreNow(){Ge=void 0},frame(e){const r=t.requestAnimationFrame(e);return{cancel:()=>t.cancelAnimationFrame(r)}},getImageData(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{width:n,height:o}=e;Ke||(Ke=t.document.createElement("canvas"));const i=Ke.getContext("2d",{willReadFrequently:!0});if(!i)throw new Error("failed to create canvas 2d context");return(n>Ke.width||o>Ke.height)&&(Ke.width=n,Ke.height=o),i.clearRect(-r,-r,n+2*r,o+2*r),i.drawImage(e,0,0,n,o),i.getImageData(-r,-r,n+2*r,o+2*r)},resolveURL:e=>(qe||(qe=t.document.createElement("a")),qe.href=e,qe.href),get devicePixelRatio(){return t.devicePixelRatio},get prefersReducedMotion(){return!!t.matchMedia&&(null==He&&(He=t.matchMedia("(prefers-reduced-motion: reduce)")),He.matches)}};function Ze(e,t,r){r[e]&&-1!==r[e].indexOf(t)||(r[e]=r[e]||[],r[e].push(t))}function Ye(e,t,r){if(r&&r[e]){const n=r[e].indexOf(t);-1!==n&&r[e].splice(n,1)}}class Je{constructor(e){O(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.type=e}}class $e extends Je{constructor(e){super("error",O({error:e},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}}class Qe{on(e,t){return this._listeners=this._listeners||{},Ze(e,t,this._listeners),this}off(e,t){return Ye(e,t,this._listeners),Ye(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},Ze(e,t,this._oneTimeListeners),this):new Promise((t=>this.once(e,t)))}fire(e,t){"string"==typeof e&&(e=new Je(e,t||{}));const r=e.type;if(this.listens(r)){e.target=this;const t=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];for(const r of t)r.call(this,e);const n=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];for(const i of n)Ye(r,i,this._oneTimeListeners),i.call(this,e);const o=this._eventedParent;o&&(O(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),o.fire(e))}else e instanceof $e&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var et=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function tt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(const o of r)for(const t in o)e[t]=o[t];return e}function rt(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function nt(e){if(Array.isArray(e))return e.map(nt);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const r in e)t[r]=nt(e[r]);return t}return rt(e)}class ot extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var it=ot;class at{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.parent=e,this.bindings={};for(const[r,n]of t)this.bindings[r]=n}concat(e){return new at(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error("".concat(e," not found in scope."))}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var st=at;const lt={kind:"null"},ct={kind:"number"},ut={kind:"string"},dt={kind:"boolean"},ht={kind:"color"},pt={kind:"object"},ft={kind:"value"},mt={kind:"collator"},gt={kind:"formatted"},yt={kind:"resolvedImage"};function vt(e,t){return{kind:"array",itemType:e,N:t}}function bt(e){if("array"===e.kind){const t=bt(e.itemType);return"number"==typeof e.N?"array<".concat(t,", ").concat(e.N,">"):"value"===e.itemType.kind?"array":"array<".concat(t,">")}return e.kind}const xt=[lt,ct,ut,dt,ht,gt,pt,vt(ft),yt];function _t(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!_t(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of xt)if(!_t(e,t))return null}return"Expected ".concat(bt(e)," but found ").concat(bt(t)," instead.")}function wt(e,t){return t.some((t=>t.kind===e.kind))}function St(e,t){return t.some((t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e))}var kt,Tt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Et(e){return(e=Math.round(e))<0?0:e>255?255:e}function Ct(e){return Et("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function At(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function jt(e,t,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?e+(t-e)*r*6:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}try{kt={}.parseCSSColor=function(e){var t,r=e.replace(/ /g,"").toLowerCase();if(r in Tt)return Tt[r].slice();if("#"===r[0])return 4===r.length?(t=parseInt(r.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===r.length&&(t=parseInt(r.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var n=r.indexOf("("),o=r.indexOf(")");if(-1!==n&&o+1===r.length){var i=r.substr(0,n),a=r.substr(n+1,o-(n+1)).split(","),s=1;switch(i){case"rgba":if(4!==a.length)return null;s=At(a.pop());case"rgb":return 3!==a.length?null:[Ct(a[0]),Ct(a[1]),Ct(a[2]),s];case"hsla":if(4!==a.length)return null;s=At(a.pop());case"hsl":if(3!==a.length)return null;var l=(parseFloat(a[0])%360+360)%360/360,c=At(a[1]),u=At(a[2]),d=u<=.5?u*(c+1):u+c-u*c,h=2*u-d;return[Et(255*jt(h,d,l+1/3)),Et(255*jt(h,d,l)),Et(255*jt(h,d,l-1/3)),s];default:return null}}return null}}catch(e){}class Pt{constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.r=e,this.g=t,this.b=r,this.a=n}static parse(e){if(!e)return;if(e instanceof Pt)return e;if("string"!=typeof e)return;const t=kt(e);return t?new Pt(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]):void 0}toString(){const[e,t,r,n]=this.toArray();return"rgba(".concat(Math.round(e),",").concat(Math.round(t),",").concat(Math.round(r),",").concat(n,")")}toArray(){const{r:e,g:t,b:r,a:n}=this;return 0===n?[0,0,0,0]:[255*e/n,255*t/n,255*r/n,n]}toArray01(){const{r:e,g:t,b:r,a:n}=this;return 0===n?[0,0,0,0]:[e/n,t/n,r/n,n]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:r,a:n}=this;return[e,t,r,n]}}Pt.black=new Pt(0,0,0,1),Pt.white=new Pt(1,1,1,1),Pt.transparent=new Pt(0,0,0,0),Pt.red=new Pt(1,0,0,1),Pt.blue=new Pt(0,0,1,1);var It=Pt;class Ot{constructor(e,t,r){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Mt{constructor(e,t,r,n,o){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=r,this.fontStack=n,this.textColor=o}}class Rt{constructor(e){this.sections=e}static fromString(e){return new Rt([new Mt(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((e=>0!==e.text.length||e.image&&0!==e.image.name.length))}static factory(e){return e instanceof Rt?e:Rt.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map((e=>e.text)).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const r={};t.fontStack&&(r["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(r["font-scale"]=t.scale),t.textColor&&(r["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(r)}return e}}class Lt{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Lt({name:e,available:!1}):null}serialize(){return["image",this.name]}}function Ft(e,t,r,n){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid rgba value [".concat([e,t,r,n].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof n?[e,t,r,n]:[e,t,r]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function zt(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof It)return!0;if(e instanceof Ot)return!0;if(e instanceof Rt)return!0;if(e instanceof Lt)return!0;if(Array.isArray(e)){for(const t of e)if(!zt(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!zt(e[t]))return!1;return!0}return!1}function Dt(e){if(null===e)return lt;if("string"==typeof e)return ut;if("boolean"==typeof e)return dt;if("number"==typeof e)return ct;if(e instanceof It)return ht;if(e instanceof Ot)return mt;if(e instanceof Rt)return gt;if(e instanceof Lt)return yt;if(Array.isArray(e)){const t=e.length;let r;for(const n of e){const e=Dt(n);if(r){if(r===e)continue;r=ft;break}r=e}return vt(r||ft,t)}return pt}function Nt(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof It||e instanceof Rt||e instanceof Lt?e.toString():JSON.stringify(e)}class Bt{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(!zt(e[1]))return t.error("invalid value");const r=e[1];let n=Dt(r);const o=t.expectedType;return"array"!==n.kind||0!==n.N||!o||"array"!==o.kind||"number"==typeof o.N&&0!==o.N||(n=o),new Bt(n,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof It?["rgba"].concat(this.value.toArray()):this.value instanceof Rt?this.value.serialize():this.value}}var Ut=Bt,Vt=class{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}};const Wt={string:ut,number:ct,boolean:dt,object:pt};class qt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r,n=1;const o=e[0];if("array"===o){let o,i;if(e.length>2){const r=e[1];if("string"!=typeof r||!(r in Wt)||"object"===r)return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=Wt[r],n++}else o=ft;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);i=e[2],n++}r=vt(o,i)}else r=Wt[o];const i=[];for(;n<e.length;n++){const r=t.parse(e[n],n,ft);if(!r)return null;i.push(r)}return new qt(r,i)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(!_t(this.type,Dt(r)))return r;if(t===this.args.length-1)throw new Vt("Expected value to be of type ".concat(bt(this.type),", but found ").concat(bt(Dt(r))," instead."))}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=this.type,t=[e.kind];if("array"===e.kind){const r=e.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){t.push(r.kind);const n=e.N;("number"==typeof n||this.args.length>1)&&t.push(n)}}return t.concat(this.args.map((e=>e.serialize())))}}var Ht=qt;class Gt{constructor(e){this.type=gt,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&"object"==typeof r)return t.error("First argument must be an image or text section.");const n=[];let o=!1;for(let i=1;i<=e.length-1;++i){const r=e[i];if(o&&"object"==typeof r&&!Array.isArray(r)){o=!1;let e=null;if(r["font-scale"]&&(e=t.parse(r["font-scale"],1,ct),!e))return null;let i=null;if(r["text-font"]&&(i=t.parse(r["text-font"],1,vt(ut)),!i))return null;let a=null;if(r["text-color"]&&(a=t.parse(r["text-color"],1,ht),!a))return null;const s=n[n.length-1];s.scale=e,s.font=i,s.textColor=a}else{const r=t.parse(e[i],1,ft);if(!r)return null;const a=r.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,n.push({content:r,scale:null,font:null,textColor:null})}}return new Gt(n)}evaluate(e){return new Rt(this.sections.map((t=>{const r=t.content.evaluate(e);return Dt(r)===yt?new Mt("",r,null,null,null):new Mt(Nt(r),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const r={};t.scale&&(r["font-scale"]=t.scale.serialize()),t.font&&(r["text-font"]=t.font.serialize()),t.textColor&&(r["text-color"]=t.textColor.serialize()),e.push(r)}return e}}class Kt{constructor(e){this.type=yt,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const r=t.parse(e[1],1,ut);return r?new Kt(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=Lt.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Xt={"to-boolean":dt,"to-color":ht,"to-number":ct,"to-string":ut};class Zt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if(("to-boolean"===r||"to-string"===r)&&2!==e.length)return t.error("Expected one argument.");const n=Xt[r],o=[];for(let i=1;i<e.length;i++){const r=t.parse(e[i],i,ft);if(!r)return null;o.push(r)}return new Zt(n,o)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let t,r;for(const n of this.args){if(t=n.evaluate(e),r=null,t instanceof It)return t;if("string"==typeof t){const r=e.parseColor(t);if(r)return r}else if(Array.isArray(t)&&(r=t.length<3||t.length>4?"Invalid rbga value ".concat(JSON.stringify(t),": expected an array containing either three or four numeric values."):Ft(t[0],t[1],t[2],t[3]),!r))return new It(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Vt(r||"Could not parse color from value '".concat("string"==typeof t?t:String(JSON.stringify(t)),"'"))}if("number"===this.type.kind){let t=null;for(const r of this.args){if(t=r.evaluate(e),null===t)return 0;const n=Number(t);if(!isNaN(n))return n}throw new Vt("Could not convert ".concat(JSON.stringify(t)," to number."))}return"formatted"===this.type.kind?Rt.fromString(Nt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Lt.fromString(Nt(this.args[0].evaluate(e))):Nt(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new Gt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Kt(this.args[0]).serialize();const e=["to-".concat(this.type.kind)];return this.eachChild((t=>{e.push(t.serialize())})),e}}var Yt=Zt;const Jt=["Unknown","Point","LineString","Polygon"];var $t=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Jt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:r,y:n}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(r*t-e[0])+this.featureDistanceData.bearing[1]*(n*t-e[1])}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=It.parse(e)),t}};class Qt{constructor(e,t,r,n){this.name=e,this.type=t,this._evaluate=r,this.args=n}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((e=>e.serialize())))}static parse(e,t){const r=e[0],n=Qt.definitions[r];if(!n)return t.error('Unknown expression "'.concat(r,'". If you wanted a literal array, use ["literal", [...]].'),0);const o=Array.isArray(n)?n[0]:n.type,i=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,a=i.filter((t=>{let[r]=t;return!Array.isArray(r)||r.length===e.length-1}));let s=null;for(const[l,c]of a){s=new Er(t.registry,t.path,null,t.scope);const n=[];let i=!1;for(let t=1;t<e.length;t++){const r=e[t],o=Array.isArray(l)?l[t-1]:l.type,a=s.parse(r,1+n.length,o);if(!a){i=!0;break}n.push(a)}if(!i)if(Array.isArray(l)&&l.length!==n.length)s.error("Expected ".concat(l.length," arguments, but found ").concat(n.length," instead."));else{for(let e=0;e<n.length;e++){const t=Array.isArray(l)?l[e]:l.type,r=n[e];s.concat(e+1).checkSubtype(t,r.type)}if(0===s.errors.length)return new Qt(r,o,c,n)}}if(1===a.length)t.errors.push(...s.errors);else{const r=(a.length?a:i).map((e=>{let[t]=e;return r=t,Array.isArray(r)?"(".concat(r.map(bt).join(", "),")"):"(".concat(bt(r.type),"...)");var r})).join(" | "),n=[];for(let o=1;o<e.length;o++){const r=t.parse(e[o],1+n.length);if(!r)return null;n.push(bt(r.type))}t.error("Expected arguments of type ".concat(r,", but found (").concat(n.join(", "),") instead."))}return null}static register(e,t){Qt.definitions=t;for(const r in t)e[r]=Qt}}var er=Qt;class tr{constructor(e,t,r){this.type=mt,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const r=e[1];if("object"!=typeof r||Array.isArray(r))return t.error("Collator options argument must be an object.");const n=t.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,dt);if(!n)return null;const o=t.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,dt);if(!o)return null;let i=null;return r.locale&&(i=t.parse(r.locale,1,ut),!i)?null:new tr(n,o,i)}evaluate(e){return new Ot(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const rr=8192;function nr(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function or(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function ir(e,t){const r=(180+e[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,o=Math.pow(2,t.z);return[Math.round(r*o*rr),Math.round(n*o*rr)]}function ar(e,t,r){const n=e[0]-t[0],o=e[1]-t[1],i=e[0]-r[0],a=e[1]-r[1];return n*a-i*o==0&&n*i<=0&&o*a<=0}function sr(e,t){let r=!1;for(let a=0,s=t.length;a<s;a++){const s=t[a];for(let t=0,a=s.length;t<a-1;t++){if(ar(e,s[t],s[t+1]))return!1;(o=s[t])[1]>(n=e)[1]!=(i=s[t+1])[1]>n[1]&&n[0]<(i[0]-o[0])*(n[1]-o[1])/(i[1]-o[1])+o[0]&&(r=!r)}}var n,o,i;return r}function lr(e,t){for(let r=0;r<t.length;r++)if(sr(e,t[r]))return!0;return!1}function cr(e,t,r,n){const o=n[0]-r[0],i=n[1]-r[1],a=(e[0]-r[0])*i-o*(e[1]-r[1]),s=(t[0]-r[0])*i-o*(t[1]-r[1]);return a>0&&s<0||a<0&&s>0}function ur(e,t,r){for(const c of r)for(let r=0;r<c.length-1;++r)if(0!=(s=[(a=c[r+1])[0]-(i=c[r])[0],a[1]-i[1]])[0]*(l=[(o=t)[0]-(n=e)[0],o[1]-n[1]])[1]-s[1]*l[0]&&cr(n,o,i,a)&&cr(i,a,n,o))return!0;var n,o,i,a,s,l;return!1}function dr(e,t){for(let r=0;r<e.length;++r)if(!sr(e[r],t))return!1;for(let r=0;r<e.length-1;++r)if(ur(e[r],e[r+1],t))return!1;return!0}function hr(e,t){for(let r=0;r<t.length;r++)if(dr(e,t[r]))return!0;return!1}function pr(e,t,r){const n=[];for(let o=0;o<e.length;o++){const i=[];for(let n=0;n<e[o].length;n++){const a=ir(e[o][n],r);nr(t,a),i.push(a)}n.push(i)}return n}function fr(e,t,r){const n=[];for(let o=0;o<e.length;o++){const i=pr(e[o],t,r);n.push(i)}return n}function mr(e,t,r,n){if(e[0]<r[0]||e[0]>r[2]){const t=.5*n;let o=e[0]-r[0]>t?-n:r[0]-e[0]>t?n:0;0===o&&(o=e[0]-r[2]>t?-n:r[2]-e[0]>t?n:0),e[0]+=o}nr(t,e)}function gr(e,t,r,n){const o=Math.pow(2,n.z)*rr,i=[n.x*rr,n.y*rr],a=[];if(!e)return a;for(const s of e)for(const e of s){const n=[e.x+i[0],e.y+i[1]];mr(n,t,r,o),a.push(n)}return a}function yr(e,t,r,n){const o=Math.pow(2,n.z)*rr,i=[n.x*rr,n.y*rr],a=[];if(!e)return a;for(const l of e){const e=[];for(const r of l){const n=[r.x+i[0],r.y+i[1]];nr(t,n),e.push(n)}a.push(e)}if(t[2]-t[0]<=o/2){(s=t)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const e of a)for(const n of e)mr(n,t,r,o)}var s;return a}class vr{constructor(e,t){this.type=dt,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error("'within' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(zt(e[1])){const t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const r=t.features[e].geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new vr(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new vr(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new vr(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],o=e.canonicalID();if(!o)return!1;if("Polygon"===t.type){const i=pr(t.coordinates,n,o),a=gr(e.geometry(),r,n,o);if(!or(r,n))return!1;for(const e of a)if(!sr(e,i))return!1}if("MultiPolygon"===t.type){const i=fr(t.coordinates,n,o),a=gr(e.geometry(),r,n,o);if(!or(r,n))return!1;for(const e of a)if(!lr(e,i))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],o=e.canonicalID();if(!o)return!1;if("Polygon"===t.type){const i=pr(t.coordinates,n,o),a=yr(e.geometry(),r,n,o);if(!or(r,n))return!1;for(const e of a)if(!dr(e,i))return!1}if("MultiPolygon"===t.type){const i=fr(t.coordinates,n,o),a=yr(e.geometry(),r,n,o);if(!or(r,n))return!1;for(const e of a)if(!hr(e,i))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var br=vr;function xr(e){if(e instanceof er){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof br)return!1;let t=!0;return e.eachChild((e=>{t&&!xr(e)&&(t=!1)})),t}function _r(e){if(e instanceof er&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild((e=>{t&&!_r(e)&&(t=!1)})),t}function wr(e,t){if(e instanceof er&&t.indexOf(e.name)>=0)return!1;let r=!0;return e.eachChild((e=>{r&&!wr(e,t)&&(r=!1)})),r}class Sr{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new Sr(r,t.scope.get(r)):t.error('Unknown variable "'.concat(r,'". Make sure "').concat(r,'" has been bound in an enclosing "let" expression before using it.'),1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var kr=Sr;class Tr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new st,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];this.registry=e,this.path=t,this.key=t.map((e=>"[".concat(e,"]"))).join(""),this.scope=n,this.errors=o,this.expectedType=r}parse(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t?this.concat(t,r,n)._parse(e,o):this._parse(e,o)}_parse(e,t){function r(e,t,r){return"assert"===r?new Ht(t,[e]):"coerce"===r?new Yt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=e[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found ".concat(typeof n,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;const o=this.registry[n];if(o){let n=o.parse(e,this);if(!n)return null;if(this.expectedType){const e=this.expectedType,o=n.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==o.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==o.kind&&"string"!==o.kind){if(this.checkSubtype(e,o))return null}else n=r(n,e,t.typeAnnotation||"coerce");else n=r(n,e,t.typeAnnotation||"assert")}if(!(n instanceof Ut)&&"resolvedImage"!==n.type.kind&&Cr(n)){const t=new $t;try{n=new Ut(n.type,n.evaluate(t))}catch(e){return this.error(e.message),null}}return n}return this.error('Unknown expression "'.concat(n,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof e," instead."))}concat(e,t,r){const n="number"==typeof e?this.path.concat(e):this.path,o=r?this.scope.concat(r):this.scope;return new Tr(this.registry,n,t||null,o,this.errors)}error(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const o="".concat(this.key).concat(r.map((e=>"[".concat(e,"]"))).join(""));this.errors.push(new it(o,e))}checkSubtype(e,t){const r=_t(e,t);return r&&this.error(r),r}}var Er=Tr;function Cr(e){if(e instanceof kr)return Cr(e.boundExpression);if(e instanceof er&&"error"===e.name)return!1;if(e instanceof tr)return!1;if(e instanceof br)return!1;const t=e instanceof Yt||e instanceof Ht;let r=!0;return e.eachChild((e=>{r=t?r&&Cr(e):r&&e instanceof Ut})),!!r&&xr(e)&&wr(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Ar(e,t){const r=e.length-1;let n,o,i=0,a=r,s=0;for(;i<=a;)if(s=Math.floor((i+a)/2),n=e[s],o=e[s+1],n<=t){if(s===r||t<o)return s;i=s+1}else{if(!(n>t))throw new Vt("Input is not a number.");a=s-1}return 0}class jr{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[n,o]of r)this.labels.push(n),this.outputs.push(o)}static parse(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,ct);if(!r)return null;const n=[];let o=null;t.expectedType&&"value"!==t.expectedType.kind&&(o=t.expectedType);for(let i=1;i<e.length;i+=2){const r=1===i?-1/0:e[i],a=e[i+1],s=i,l=i+1;if("number"!=typeof r)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(n.length&&n[n.length-1][0]>=r)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=t.parse(a,l,o);if(!c)return null;o=o||c.type,n.push([r,c])}return new jr(o,r,n)}evaluate(e){const t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);const n=this.input.evaluate(e);if(n<=t[0])return r[0].evaluate(e);const o=t.length;return n>=t[o-1]?r[o-1].evaluate(e):r[Ar(t,n)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var Pr=jr;function Ir(e,t,r){return e*(1-r)+t*r}var Or=Object.freeze({__proto__:null,array:function(e,t,r){return e.map(((e,n)=>Ir(e,t[n],r)))},color:function(e,t,r){return new It(Ir(e.r,t.r,r),Ir(e.g,t.g,r),Ir(e.b,t.b,r),Ir(e.a,t.a,r))},number:Ir});const Mr=.95047,Rr=1.08883,Lr=4/29,Fr=6/29,zr=3*Fr*Fr,Dr=Fr*Fr*Fr,Nr=Math.PI/180,Br=180/Math.PI;function Ur(e){return e>Dr?Math.pow(e,1/3):e/zr+Lr}function Vr(e){return e>Fr?e*e*e:zr*(e-Lr)}function Wr(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function qr(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Hr(e){const t=qr(e.r),r=qr(e.g),n=qr(e.b),o=Ur((.4124564*t+.3575761*r+.1804375*n)/Mr),i=Ur((.2126729*t+.7151522*r+.072175*n)/1);return{l:116*i-16,a:500*(o-i),b:200*(i-Ur((.0193339*t+.119192*r+.9503041*n)/Rr)),alpha:e.a}}function Gr(e){let t=(e.l+16)/116,r=isNaN(e.a)?t:t+e.a/500,n=isNaN(e.b)?t:t-e.b/200;return t=1*Vr(t),r=Mr*Vr(r),n=Rr*Vr(n),new It(Wr(3.2404542*r-1.5371385*t-.4985314*n),Wr(-.969266*r+1.8760108*t+.041556*n),Wr(.0556434*r-.2040259*t+1.0572252*n),e.alpha)}function Kr(e,t,r){const n=t-e;return e+r*(n>180||n<-180?n-360*Math.round(n/360):n)}const Xr={forward:Hr,reverse:Gr,interpolate:function(e,t,r){return{l:Ir(e.l,t.l,r),a:Ir(e.a,t.a,r),b:Ir(e.b,t.b,r),alpha:Ir(e.alpha,t.alpha,r)}}},Zr={forward:function(e){const{l:t,a:r,b:n}=Hr(e),o=Math.atan2(n,r)*Br;return{h:o<0?o+360:o,c:Math.sqrt(r*r+n*n),l:t,alpha:e.a}},reverse:function(e){const t=e.h*Nr,r=e.c;return Gr({l:e.l,a:Math.cos(t)*r,b:Math.sin(t)*r,alpha:e.alpha})},interpolate:function(e,t,r){return{h:Kr(e.h,t.h,r),c:Ir(e.c,t.c,r),l:Ir(e.l,t.l,r),alpha:Ir(e.alpha,t.alpha,r)}}};var Yr=Object.freeze({__proto__:null,hcl:Zr,lab:Xr});class Jr{constructor(e,t,r,n,o){this.type=e,this.operator=t,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(const[i,a]of o)this.labels.push(i),this.outputs.push(a)}static interpolationFactor(e,t,r,n){let o=0;if("exponential"===e.name)o=$r(t,e.base,r,n);else if("linear"===e.name)o=$r(t,1,r,n);else if("cubic-bezier"===e.name){const i=e.controlPoints;o=new m(i[0],i[1],i[2],i[3]).solve($r(t,1,r,n))}return o}static parse(e,t){let[r,n,o,...i]=e;if(!Array.isArray(n)||0===n.length)return t.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){const e=n[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:e}}else{if("cubic-bezier"!==n[0])return t.error("Unknown interpolation type ".concat(String(n[0])),1,0);{const e=n.slice(1);if(4!==e.length||e.some((e=>"number"!=typeof e||e<0||e>1)))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(o=t.parse(o,2,ct),!o)return null;const a=[];let s=null;"interpolate-hcl"===r||"interpolate-lab"===r?s=ht:t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let l=0;l<i.length;l+=2){const e=i[l],r=i[l+1],n=l+3,o=l+4;if("number"!=typeof e)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',n);if(a.length&&a[a.length-1][0]>=e)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',n);const c=t.parse(r,o,s);if(!c)return null;s=s||c.type,a.push([e,c])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new Jr(s,r,n,o,a):t.error("Type ".concat(bt(s)," is not interpolatable."))}evaluate(e){const t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);const n=this.input.evaluate(e);if(n<=t[0])return r[0].evaluate(e);const o=t.length;if(n>=t[o-1])return r[o-1].evaluate(e);const i=Ar(t,n),a=Jr.interpolationFactor(this.interpolation,n,t[i],t[i+1]),s=r[i].evaluate(e),l=r[i+1].evaluate(e);return"interpolate"===this.operator?Or[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?Zr.reverse(Zr.interpolate(Zr.forward(s),Zr.forward(l),a)):Xr.reverse(Xr.interpolate(Xr.forward(s),Xr.forward(l),a))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let r=0;r<this.labels.length;r++)t.push(this.labels[r],this.outputs[r].serialize());return t}}function $r(e,t,r,n){const o=n-r,i=e-r;return 0===o?0:1===t?i/o:(Math.pow(t,i)-1)/(Math.pow(t,o)-1)}var Qr=Jr;class en{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let r=null;const n=t.expectedType;n&&"value"!==n.kind&&(r=n);const o=[];for(const a of e.slice(1)){const e=t.parse(a,1+o.length,r,void 0,{typeAnnotation:"omit"});if(!e)return null;r=r||e.type,o.push(e)}const i=n&&o.some((e=>_t(n,e.type)));return new en(i?ft:r,o)}evaluate(e){let t,r=null,n=0;for(const o of this.args){if(n++,r=o.evaluate(e),r&&r instanceof Lt&&!r.available&&(t||(t=r),r=null,n===this.args.length))return t;if(null!==r)break}return r}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=["coalesce"];return this.eachChild((t=>{e.push(t.serialize())})),e}}var tn=en;class rn{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found ".concat(e.length-1," instead."));const r=[];for(let o=1;o<e.length-1;o+=2){const n=e[o];if("string"!=typeof n)return t.error("Expected string, but found ".concat(typeof n," instead."),o);if(/[^a-zA-Z0-9_]/.test(n))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const i=t.parse(e[o+1],o+1);if(!i)return null;r.push([n,i])}const n=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return n?new rn(r,n):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,r]of this.bindings)e.push(t,r.serialize());return e.push(this.result.serialize()),e}}var nn=rn;class on{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));const r=t.parse(e[1],1,ct),n=t.parse(e[2],2,vt(t.expectedType||ft));return r&&n?new on(n.type.itemType,r,n):null}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new Vt("Array index out of bounds: ".concat(t," < 0."));if(t>=r.length)throw new Vt("Array index out of bounds: ".concat(t," > ").concat(r.length-1,"."));if(t!==Math.floor(t))throw new Vt("Array index must be an integer, but found ".concat(t," instead."));return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var an=on;class sn{constructor(e,t){this.type=dt,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));const r=t.parse(e[1],1,ft),n=t.parse(e[2],2,ft);return r&&n?wt(r.type,[dt,ut,ct,lt,ft])?new sn(r,n):t.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(bt(r.type)," instead")):null}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(null==r)return!1;if(!St(t,["boolean","string","number","null"]))throw new Vt("Expected first argument to be of type boolean, string, number or null, but found ".concat(bt(Dt(t))," instead."));if(!St(r,["string","array"]))throw new Vt("Expected second argument to be of type array or string, but found ".concat(bt(Dt(r))," instead."));return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var ln=sn;class cn{constructor(e,t,r){this.type=ct,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));const r=t.parse(e[1],1,ft),n=t.parse(e[2],2,ft);if(!r||!n)return null;if(!wt(r.type,[dt,ut,ct,lt,ft]))return t.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(bt(r.type)," instead"));if(4===e.length){const o=t.parse(e[3],3,ct);return o?new cn(r,n,o):null}return new cn(r,n)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!St(t,["boolean","string","number","null"]))throw new Vt("Expected first argument to be of type boolean, string, number or null, but found ".concat(bt(Dt(t))," instead."));if(!St(r,["string","array"]))throw new Vt("Expected second argument to be of type array or string, but found ".concat(bt(Dt(r))," instead."));if(this.fromIndex){const n=this.fromIndex.evaluate(e);return r.indexOf(t,n)}return r.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var un=cn;class dn{constructor(e,t,r,n,o,i){this.inputType=e,this.type=t,this.input=r,this.cases=n,this.outputs=o,this.otherwise=i}static parse(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=1)return t.error("Expected an even number of arguments.");let r,n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const o={},i=[];for(let l=2;l<e.length-1;l+=2){let a=e[l];const s=e[l+1];Array.isArray(a)||(a=[a]);const c=t.concat(l);if(0===a.length)return c.error("Expected at least one branch label.");for(const e of a){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(r){if(c.checkSubtype(r,Dt(e)))return null}else r=Dt(e);if(void 0!==o[String(e)])return c.error("Branch labels must be unique.");o[String(e)]=i.length}const u=t.parse(s,l,n);if(!u)return null;n=n||u.type,i.push(u)}const a=t.parse(e[1],1,ft);if(!a)return null;const s=t.parse(e[e.length-1],e.length-1,n);return s?"value"!==a.type.kind&&t.concat(1).checkSubtype(r,a.type)?null:new dn(r,n,a,o,i,s):null}evaluate(e){const t=this.input.evaluate(e);return(Dt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),r=[],n={};for(const i of t){const e=n[this.cases[i]];void 0===e?(n[this.cases[i]]=r.length,r.push([this.cases[i],[i]])):r[e][1].push(i)}const o=e=>"number"===this.inputType.kind?Number(e):e;for(const[i,a]of r)e.push(1===a.length?o(a[0]):a.map(o)),e.push(this.outputs[i].serialize());return e.push(this.otherwise.serialize()),e}}var hn=dn;class pn{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const n=[];for(let i=1;i<e.length-1;i+=2){const o=t.parse(e[i],i,dt);if(!o)return null;const a=t.parse(e[i+1],i+1,r);if(!a)return null;n.push([o,a]),r=r||a.type}const o=t.parse(e[e.length-1],e.length-1,r);return o?new pn(r,n,o):null}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every((e=>{let[t,r]=e;return r.outputDefined()}))&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild((t=>{e.push(t.serialize())})),e}}var fn=pn;class mn{constructor(e,t,r,n){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));const r=t.parse(e[1],1,ft),n=t.parse(e[2],2,ct);if(!r||!n)return null;if(!wt(r.type,[vt(ft),ut,ft]))return t.error("Expected first argument to be of type array or string, but found ".concat(bt(r.type)," instead"));if(4===e.length){const o=t.parse(e[3],3,ct);return o?new mn(r.type,r,n,o):null}return new mn(r.type,r,n)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);if(!St(t,["string","array"]))throw new Vt("Expected first argument to be of type array or string, but found ".concat(bt(Dt(t))," instead."));if(this.endIndex){const n=this.endIndex.evaluate(e);return t.slice(r,n)}return t.slice(r)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var gn=mn;function yn(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function vn(e,t,r,n){return 0===n.compare(t,r)}function bn(e,t,r){const n="=="!==e&&"!="!==e;return class o{constructor(e,t,r){this.type=dt,this.lhs=e,this.rhs=t,this.collator=r,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const r=e[0];let i=t.parse(e[1],1,ft);if(!i)return null;if(!yn(r,i.type))return t.concat(1).error('"'.concat(r,"\" comparisons are not supported for type '").concat(bt(i.type),"'."));let a=t.parse(e[2],2,ft);if(!a)return null;if(!yn(r,a.type))return t.concat(2).error('"'.concat(r,"\" comparisons are not supported for type '").concat(bt(a.type),"'."));if(i.type.kind!==a.type.kind&&"value"!==i.type.kind&&"value"!==a.type.kind)return t.error("Cannot compare types '".concat(bt(i.type),"' and '").concat(bt(a.type),"'."));n&&("value"===i.type.kind&&"value"!==a.type.kind?i=new Ht(a.type,[i]):"value"!==i.type.kind&&"value"===a.type.kind&&(a=new Ht(i.type,[a])));let s=null;if(4===e.length){if("string"!==i.type.kind&&"string"!==a.type.kind&&"value"!==i.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(s=t.parse(e[3],3,mt),!s)return null}return new o(i,a,s)}evaluate(o){const i=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(n&&this.hasUntypedArgument){const t=Dt(i),r=Dt(a);if(t.kind!==r.kind||"string"!==t.kind&&"number"!==t.kind)throw new Vt('Expected arguments for "'.concat(e,'" to be (string, string) or (number, number), but found (').concat(t.kind,", ").concat(r.kind,") instead."))}if(this.collator&&!n&&this.hasUntypedArgument){const e=Dt(i),r=Dt(a);if("string"!==e.kind||"string"!==r.kind)return t(o,i,a)}return this.collator?r(o,i,a,this.collator.evaluate(o)):t(o,i,a)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}serialize(){const t=[e];return this.eachChild((e=>{t.push(e.serialize())})),t}}}const xn=bn("==",(function(e,t,r){return t===r}),vn),_n=bn("!=",(function(e,t,r){return t!==r}),(function(e,t,r,n){return!vn(0,t,r,n)})),wn=bn("<",(function(e,t,r){return t<r}),(function(e,t,r,n){return n.compare(t,r)<0})),Sn=bn(">",(function(e,t,r){return t>r}),(function(e,t,r,n){return n.compare(t,r)>0})),kn=bn("<=",(function(e,t,r){return t<=r}),(function(e,t,r,n){return n.compare(t,r)<=0})),Tn=bn(">=",(function(e,t,r){return t>=r}),(function(e,t,r,n){return n.compare(t,r)>=0}));class En{constructor(e,t,r,n,o,i){this.type=ut,this.number=e,this.locale=t,this.currency=r,this.unit=n,this.minFractionDigits=o,this.maxFractionDigits=i}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const r=t.parse(e[1],1,ct);if(!r)return null;const n=e[2];if("object"!=typeof n||Array.isArray(n))return t.error("NumberFormat options argument must be an object.");let o=null;if(n.locale&&(o=t.parse(n.locale,1,ut),!o))return null;let i=null;if(n.currency&&(i=t.parse(n.currency,1,ut),!i))return null;let a=null;if(n.unit&&(a=t.parse(n.unit,1,ut),!a))return null;let s=null;if(n["min-fraction-digits"]&&(s=t.parse(n["min-fraction-digits"],1,ct),!s))return null;let l=null;return n["max-fraction-digits"]&&(l=t.parse(n["max-fraction-digits"],1,ct),!l)?null:new En(r,o,i,a,s,l)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Cn{constructor(e){this.type=ct,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found ".concat(e.length-1," instead."));const r=t.parse(e[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?t.error("Expected argument of type string or array, but found ".concat(bt(r.type)," instead.")):new Cn(r):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new Vt("Expected value to be of type string or array, but found ".concat(bt(Dt(t))," instead."))}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild((t=>{e.push(t.serialize())})),e}}const An={"==":xn,"!=":_n,">":Sn,"<":wn,">=":Tn,"<=":kn,array:Ht,at:an,boolean:Ht,case:fn,coalesce:tn,collator:tr,format:Gt,image:Kt,in:ln,"index-of":un,interpolate:Qr,"interpolate-hcl":Qr,"interpolate-lab":Qr,length:Cn,let:nn,literal:Ut,match:hn,number:Ht,"number-format":En,object:Ht,slice:gn,step:Pr,string:Ht,"to-boolean":Yt,"to-color":Yt,"to-number":Yt,"to-string":Yt,var:kr,within:br};function jn(e,t){let[r,n,o,i]=t;r=r.evaluate(e),n=n.evaluate(e),o=o.evaluate(e);const a=i?i.evaluate(e):1,s=Ft(r,n,o,a);if(s)throw new Vt(s);return new It(r/255*a,n/255*a,o/255*a,a)}function Pn(e,t){return e in t}function In(e,t){const r=t[e];return void 0===r?null:r}function On(e){return{type:e}}er.register(An,{error:[{kind:"error"},[ut],(e,t)=>{let[r]=t;throw new Vt(r.evaluate(e))}],typeof:[ut,[ft],(e,t)=>{let[r]=t;return bt(Dt(r.evaluate(e)))}],"to-rgba":[vt(ct,4),[ht],(e,t)=>{let[r]=t;return r.evaluate(e).toArray()}],rgb:[ht,[ct,ct,ct],jn],rgba:[ht,[ct,ct,ct,ct],jn],has:{type:dt,overloads:[[[ut],(e,t)=>{let[r]=t;return Pn(r.evaluate(e),e.properties())}],[[ut,pt],(e,t)=>{let[r,n]=t;return Pn(r.evaluate(e),n.evaluate(e))}]]},get:{type:ft,overloads:[[[ut],(e,t)=>{let[r]=t;return In(r.evaluate(e),e.properties())}],[[ut,pt],(e,t)=>{let[r,n]=t;return In(r.evaluate(e),n.evaluate(e))}]]},"feature-state":[ft,[ut],(e,t)=>{let[r]=t;return In(r.evaluate(e),e.featureState||{})}],properties:[pt,[],e=>e.properties()],"geometry-type":[ut,[],e=>e.geometryType()],id:[ft,[],e=>e.id()],zoom:[ct,[],e=>e.globals.zoom],pitch:[ct,[],e=>e.globals.pitch||0],"distance-from-center":[ct,[],e=>e.distanceFromCenter()],"heatmap-density":[ct,[],e=>e.globals.heatmapDensity||0],"line-progress":[ct,[],e=>e.globals.lineProgress||0],"sky-radial-progress":[ct,[],e=>e.globals.skyRadialProgress||0],accumulated:[ft,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[ct,On(ct),(e,t)=>{let r=0;for(const n of t)r+=n.evaluate(e);return r}],"*":[ct,On(ct),(e,t)=>{let r=1;for(const n of t)r*=n.evaluate(e);return r}],"-":{type:ct,overloads:[[[ct,ct],(e,t)=>{let[r,n]=t;return r.evaluate(e)-n.evaluate(e)}],[[ct],(e,t)=>{let[r]=t;return-r.evaluate(e)}]]},"/":[ct,[ct,ct],(e,t)=>{let[r,n]=t;return r.evaluate(e)/n.evaluate(e)}],"%":[ct,[ct,ct],(e,t)=>{let[r,n]=t;return r.evaluate(e)%n.evaluate(e)}],ln2:[ct,[],()=>Math.LN2],pi:[ct,[],()=>Math.PI],e:[ct,[],()=>Math.E],"^":[ct,[ct,ct],(e,t)=>{let[r,n]=t;return Math.pow(r.evaluate(e),n.evaluate(e))}],sqrt:[ct,[ct],(e,t)=>{let[r]=t;return Math.sqrt(r.evaluate(e))}],log10:[ct,[ct],(e,t)=>{let[r]=t;return Math.log(r.evaluate(e))/Math.LN10}],ln:[ct,[ct],(e,t)=>{let[r]=t;return Math.log(r.evaluate(e))}],log2:[ct,[ct],(e,t)=>{let[r]=t;return Math.log(r.evaluate(e))/Math.LN2}],sin:[ct,[ct],(e,t)=>{let[r]=t;return Math.sin(r.evaluate(e))}],cos:[ct,[ct],(e,t)=>{let[r]=t;return Math.cos(r.evaluate(e))}],tan:[ct,[ct],(e,t)=>{let[r]=t;return Math.tan(r.evaluate(e))}],asin:[ct,[ct],(e,t)=>{let[r]=t;return Math.asin(r.evaluate(e))}],acos:[ct,[ct],(e,t)=>{let[r]=t;return Math.acos(r.evaluate(e))}],atan:[ct,[ct],(e,t)=>{let[r]=t;return Math.atan(r.evaluate(e))}],min:[ct,On(ct),(e,t)=>Math.min(...t.map((t=>t.evaluate(e))))],max:[ct,On(ct),(e,t)=>Math.max(...t.map((t=>t.evaluate(e))))],abs:[ct,[ct],(e,t)=>{let[r]=t;return Math.abs(r.evaluate(e))}],round:[ct,[ct],(e,t)=>{let[r]=t;const n=r.evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[ct,[ct],(e,t)=>{let[r]=t;return Math.floor(r.evaluate(e))}],ceil:[ct,[ct],(e,t)=>{let[r]=t;return Math.ceil(r.evaluate(e))}],"filter-==":[dt,[ut,ft],(e,t)=>{let[r,n]=t;return e.properties()[r.value]===n.value}],"filter-id-==":[dt,[ft],(e,t)=>{let[r]=t;return e.id()===r.value}],"filter-type-==":[dt,[ut],(e,t)=>{let[r]=t;return e.geometryType()===r.value}],"filter-<":[dt,[ut,ft],(e,t)=>{let[r,n]=t;const o=e.properties()[r.value],i=n.value;return typeof o==typeof i&&o<i}],"filter-id-<":[dt,[ft],(e,t)=>{let[r]=t;const n=e.id(),o=r.value;return typeof n==typeof o&&n<o}],"filter->":[dt,[ut,ft],(e,t)=>{let[r,n]=t;const o=e.properties()[r.value],i=n.value;return typeof o==typeof i&&o>i}],"filter-id->":[dt,[ft],(e,t)=>{let[r]=t;const n=e.id(),o=r.value;return typeof n==typeof o&&n>o}],"filter-<=":[dt,[ut,ft],(e,t)=>{let[r,n]=t;const o=e.properties()[r.value],i=n.value;return typeof o==typeof i&&o<=i}],"filter-id-<=":[dt,[ft],(e,t)=>{let[r]=t;const n=e.id(),o=r.value;return typeof n==typeof o&&n<=o}],"filter->=":[dt,[ut,ft],(e,t)=>{let[r,n]=t;const o=e.properties()[r.value],i=n.value;return typeof o==typeof i&&o>=i}],"filter-id->=":[dt,[ft],(e,t)=>{let[r]=t;const n=e.id(),o=r.value;return typeof n==typeof o&&n>=o}],"filter-has":[dt,[ft],(e,t)=>{let[r]=t;return r.value in e.properties()}],"filter-has-id":[dt,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[dt,[vt(ut)],(e,t)=>{let[r]=t;return r.value.indexOf(e.geometryType())>=0}],"filter-id-in":[dt,[vt(ft)],(e,t)=>{let[r]=t;return r.value.indexOf(e.id())>=0}],"filter-in-small":[dt,[ut,vt(ft)],(e,t)=>{let[r,n]=t;return n.value.indexOf(e.properties()[r.value])>=0}],"filter-in-large":[dt,[ut,vt(ft)],(e,t)=>{let[r,n]=t;return function(e,t,r,n){for(;r<=n;){const o=r+n>>1;if(t[o]===e)return!0;t[o]>e?n=o-1:r=o+1}return!1}(e.properties()[r.value],n.value,0,n.value.length-1)}],all:{type:dt,overloads:[[[dt,dt],(e,t)=>{let[r,n]=t;return r.evaluate(e)&&n.evaluate(e)}],[On(dt),(e,t)=>{for(const r of t)if(!r.evaluate(e))return!1;return!0}]]},any:{type:dt,overloads:[[[dt,dt],(e,t)=>{let[r,n]=t;return r.evaluate(e)||n.evaluate(e)}],[On(dt),(e,t)=>{for(const r of t)if(r.evaluate(e))return!0;return!1}]]},"!":[dt,[dt],(e,t)=>{let[r]=t;return!r.evaluate(e)}],"is-supported-script":[dt,[ut],(e,t)=>{let[r]=t;const n=e.globals&&e.globals.isSupportedScript;return!n||n(r.evaluate(e))}],upcase:[ut,[ut],(e,t)=>{let[r]=t;return r.evaluate(e).toUpperCase()}],downcase:[ut,[ut],(e,t)=>{let[r]=t;return r.evaluate(e).toLowerCase()}],concat:[ut,On(ft),(e,t)=>t.map((t=>Nt(t.evaluate(e)))).join("")],"resolved-locale":[ut,[mt],(e,t)=>{let[r]=t;return r.evaluate(e).resolvedLocale()}]});var Mn=An;function Rn(e){return{result:"success",value:e}}function Ln(e){return{result:"error",value:e}}function Fn(e){return"data-driven"===e["property-type"]}function zn(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Dn(e){return!!e.expression&&e.expression.interpolated}function Nn(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Bn(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Un(e){return e}function Vn(e,t){const r="color"===t.type,n=e.stops&&"object"==typeof e.stops[0][0],o=n||!(n||void 0!==e.property),i=e.type||(Dn(t)?"exponential":"interval");if(r&&((e=tt({},e)).stops&&(e.stops=e.stops.map((e=>[e[0],It.parse(e[1])]))),e.default=It.parse(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Yr[e.colorSpace])throw new Error("Unknown color space: ".concat(e.colorSpace));let a,s,l;if("exponential"===i)a=Gn;else if("interval"===i)a=Hn;else if("categorical"===i){a=qn,s=Object.create(null);for(const t of e.stops)s[t[0]]=t[1];l=typeof e.stops[0][0]}else{if("identity"!==i)throw new Error('Unknown function type "'.concat(i,'"'));a=Kn}if(n){const r={},n=[];for(let t=0;t<e.stops.length;t++){const o=e.stops[t],i=o[0].zoom;void 0===r[i]&&(r[i]={zoom:i,type:e.type,property:e.property,default:e.default,stops:[]},n.push(i)),r[i].stops.push([o[0].value,o[1]])}const o=[];for(const e of n)o.push([r[e].zoom,Vn(r[e],t)]);const i={name:"linear"};return{kind:"composite",interpolationType:i,interpolationFactor:Qr.interpolationFactor.bind(void 0,i),zoomStops:o.map((e=>e[0])),evaluate:(r,n)=>{let{zoom:i}=r;return Gn({stops:o,base:e.base},t,i).evaluate(i,n)}}}if(o){const r="exponential"===i?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:r,interpolationFactor:Qr.interpolationFactor.bind(void 0,r),zoomStops:e.stops.map((e=>e[0])),evaluate:r=>{let{zoom:n}=r;return a(e,t,n,s,l)}}}return{kind:"source",evaluate(r,n){const o=n&&n.properties?n.properties[e.property]:void 0;return void 0===o?Wn(e.default,t.default):a(e,t,o,s,l)}}}function Wn(e,t,r){return void 0!==e?e:void 0!==t?t:void 0!==r?r:void 0}function qn(e,t,r,n,o){return Wn(typeof r===o?n[r]:void 0,e.default,t.default)}function Hn(e,t,r){if("number"!==Nn(r))return Wn(e.default,t.default);const n=e.stops.length;if(1===n)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[n-1][0])return e.stops[n-1][1];const o=Ar(e.stops.map((e=>e[0])),r);return e.stops[o][1]}function Gn(e,t,r){const n=void 0!==e.base?e.base:1;if("number"!==Nn(r))return Wn(e.default,t.default);const o=e.stops.length;if(1===o)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[o-1][0])return e.stops[o-1][1];const i=Ar(e.stops.map((e=>e[0])),r),a=function(e,t,r,n){const o=n-r,i=e-r;return 0===o?0:1===t?i/o:(Math.pow(t,i)-1)/(Math.pow(t,o)-1)}(r,n,e.stops[i][0],e.stops[i+1][0]),s=e.stops[i][1],l=e.stops[i+1][1];let c=Or[t.type]||Un;if(e.colorSpace&&"rgb"!==e.colorSpace){const t=Yr[e.colorSpace];c=(e,r)=>t.reverse(t.interpolate(t.forward(e),t.forward(r),a))}return"function"==typeof s.evaluate?{evaluate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=s.evaluate.apply(void 0,t),o=l.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==o)return c(n,o,a)}}:c(s,l,a)}function Kn(e,t,r){return"color"===t.type?r=It.parse(r):"formatted"===t.type?r=Rt.fromString(r.toString()):"resolvedImage"===t.type?r=Lt.fromString(r.toString()):Nn(r)===t.type||"enum"===t.type&&t.values[r]||(r=void 0),Wn(r,e.default,t.default)}class Xn{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new $t,this._defaultValue=t?function(e){return"color"===e.type&&(Bn(e.default)||Array.isArray(e.default))?new It(0,0,0,0):"color"===e.type?It.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,r,n,o,i,a,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=n||null,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=i,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,n,o,i,a,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n||null,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=i||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new Vt("Expected value to be one of ".concat(Object.keys(this._enumValues).map((e=>JSON.stringify(e))).join(", "),", but found ").concat(JSON.stringify(e)," instead."));return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function Zn(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Mn}function Yn(e,t){const r=new Er(Mn,[],t?function(e){const t={color:ht,string:ut,number:ct,enum:ut,boolean:dt,formatted:gt,resolvedImage:yt};return"array"===e.type?vt(t[e.value]||ft,e.length):t[e.type]}(t):void 0),n=r.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return n?Rn(new Xn(n,t)):Ln(r.errors)}class Jn{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!_r(t.expression)}evaluateWithoutErrorHandling(e,t,r,n,o,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,n,o,i)}evaluate(e,t,r,n,o,i){return this._styleExpression.evaluate(e,t,r,n,o,i)}}class $n{constructor(e,t,r,n){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent="camera"!==e&&!_r(t.expression),this.interpolationType=n}evaluateWithoutErrorHandling(e,t,r,n,o,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,n,o,i)}evaluate(e,t,r,n,o,i){return this._styleExpression.evaluate(e,t,r,n,o,i)}interpolationFactor(e,t,r){return this.interpolationType?Qr.interpolationFactor(this.interpolationType,e,t,r):0}}function Qn(e,t){if("error"===(e=Yn(e,t)).result)return e;const r=e.value.expression,n=xr(r);if(!n&&!Fn(t))return Ln([new it("","data expressions not supported")]);const o=wr(r,["zoom","pitch","distance-from-center"]);if(!o&&!zn(t))return Ln([new it("","zoom expressions not supported")]);const i=to(r);return i||o?i instanceof it?Ln([i]):i instanceof Qr&&!Dn(t)?Ln([new it("",'"interpolate" expressions cannot be used with this property')]):Rn(i?new $n(n?"camera":"composite",e.value,i.labels,i instanceof Qr?i.interpolation:void 0):new Jn(n?"constant":"source",e.value)):Ln([new it("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class eo{constructor(e,t){this._parameters=e,this._specification=t,tt(this,Vn(this._parameters,this._specification))}static deserialize(e){return new eo(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function to(e){let t=null;if(e instanceof nn)t=to(e.result);else if(e instanceof tn){for(const r of e.args)if(t=to(r),t)break}else(e instanceof Pr||e instanceof Qr)&&e.input instanceof er&&"zoom"===e.input.name&&(t=e);return t instanceof it||e.eachChild((e=>{const r=to(e);r instanceof it?t=r:!t&&r?t=new it("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&r&&t!==r&&(t=new it("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}class ro{constructor(e,t,r,n){this.message=(e?"".concat(e,": "):"")+r,n&&(this.identifier=n),null!=t&&t.__line__&&(this.line=t.__line__)}}function no(e){const t=e.key,r=e.value,n=e.valueSpec||{},o=e.objectElementValidators||{},i=e.style,a=e.styleSpec;let s=[];const l=Nn(r);if("object"!==l)return[new ro(t,r,"object expected, ".concat(l," found"))];for(const c in r){const e=c.split(".")[0];let l;o[e]?l=o[e]:n[e]?l=Do:o["*"]?l=o["*"]:n["*"]&&(l=Do),l?s=s.concat(l({key:(t?"".concat(t,"."):t)+c,value:r[c],valueSpec:n[e]||n["*"],style:i,styleSpec:a,object:r,objectKey:c},r)):s.push(new ro(t,r[c],'unknown property "'.concat(c,'"')))}for(const c in n)o[c]||n[c].required&&void 0===n[c].default&&void 0===r[c]&&s.push(new ro(t,r,'missing required property "'.concat(c,'"')));return s}function oo(e){const t=e.value,r=e.valueSpec,n=e.style,o=e.styleSpec,i=e.key,a=e.arrayElementValidator||Do;if("array"!==Nn(t))return[new ro(i,t,"array expected, ".concat(Nn(t)," found"))];if(r.length&&t.length!==r.length)return[new ro(i,t,"array length ".concat(r.length," expected, length ").concat(t.length," found"))];if(r["min-length"]&&t.length<r["min-length"])return[new ro(i,t,"array length at least ".concat(r["min-length"]," expected, length ").concat(t.length," found"))];let s={type:r.value,values:r.values,minimum:r.minimum,maximum:r.maximum,function:void 0};o.$version<7&&(s.function=r.function),"object"===Nn(r.value)&&(s=r.value);let l=[];for(let c=0;c<t.length;c++)l=l.concat(a({array:t,arrayIndex:c,value:t[c],valueSpec:s,style:n,styleSpec:o,key:"".concat(i,"[").concat(c,"]")}));return l}function io(e){const t=e.key,r=e.value,n=e.valueSpec;let o=Nn(r);if("number"===o&&r!=r&&(o="NaN"),"number"!==o)return[new ro(t,r,"number expected, ".concat(o," found"))];if("minimum"in n){let o=n.minimum;if("array"===Nn(n.minimum)&&(o=n.minimum[e.arrayIndex]),r<o)return[new ro(t,r,"".concat(r," is less than the minimum value ").concat(o))]}if("maximum"in n){let o=n.maximum;if("array"===Nn(n.maximum)&&(o=n.maximum[e.arrayIndex]),r>o)return[new ro(t,r,"".concat(r," is greater than the maximum value ").concat(o))]}return[]}function ao(e){const t=e.valueSpec,r=rt(e.value.type);let n,o,i,a={};const s="categorical"!==r&&void 0===e.value.property,l=!s,c="array"===Nn(e.value.stops)&&"array"===Nn(e.value.stops[0])&&"object"===Nn(e.value.stops[0][0]),u=no({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===r)return[new ro(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const n=e.value;return t=t.concat(oo({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:d})),"array"===Nn(n)&&0===n.length&&t.push(new ro(e.key,n,"array must have at least one stop")),t},default:function(e){return Do({key:e.key,value:e.value,valueSpec:t,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===r&&s&&u.push(new ro(e.key,e.value,'missing required property "property"')),"identity"===r||e.value.stops||u.push(new ro(e.key,e.value,'missing required property "stops"')),"exponential"===r&&e.valueSpec.expression&&!Dn(e.valueSpec)&&u.push(new ro(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Fn(e.valueSpec)?u.push(new ro(e.key,e.value,"property functions not supported")):s&&!zn(e.valueSpec)&&u.push(new ro(e.key,e.value,"zoom functions not supported"))),"categorical"!==r&&!c||void 0!==e.value.property||u.push(new ro(e.key,e.value,'"property" property is required')),u;function d(e){let r=[];const n=e.value,s=e.key;if("array"!==Nn(n))return[new ro(s,n,"array expected, ".concat(Nn(n)," found"))];if(2!==n.length)return[new ro(s,n,"array length 2 expected, length ".concat(n.length," found"))];if(c){if("object"!==Nn(n[0]))return[new ro(s,n,"object expected, ".concat(Nn(n[0])," found"))];if(void 0===n[0].zoom)return[new ro(s,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new ro(s,n,"object stop key must have value")];const t=rt(n[0].zoom);if("number"!=typeof t)return[new ro(s,n[0].zoom,"stop zoom values must be numbers")];if(i&&i>t)return[new ro(s,n[0].zoom,"stop zoom values must appear in ascending order")];t!==i&&(i=t,o=void 0,a={}),r=r.concat(no({key:"".concat(s,"[0]"),value:n[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:io,value:h}}))}else r=r.concat(h({key:"".concat(s,"[0]"),value:n[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},n));return Zn(nt(n[1]))?r.concat([new ro("".concat(s,"[1]"),n[1],"expressions are not allowed in function stops.")]):r.concat(Do({key:"".concat(s,"[1]"),value:n[1],valueSpec:t,style:e.style,styleSpec:e.styleSpec}))}function h(e,i){const s=Nn(e.value),l=rt(e.value),c=null!==e.value?e.value:i;if(n){if(s!==n)return[new ro(e.key,c,"".concat(s," stop domain type must match previous stop domain type ").concat(n))]}else n=s;if("number"!==s&&"string"!==s&&"boolean"!==s&&"number"!=typeof l&&"string"!=typeof l&&"boolean"!=typeof l)return[new ro(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==r){let n="number expected, ".concat(s," found");return Fn(t)&&void 0===r&&(n+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ro(e.key,c,n)]}return"categorical"!==r||"number"!==s||"number"==typeof l&&isFinite(l)&&Math.floor(l)===l?"categorical"!==r&&"number"===s&&"number"==typeof l&&"number"==typeof o&&void 0!==o&&l<o?[new ro(e.key,c,"stop domain values must appear in ascending order")]:(o=l,"categorical"===r&&l in a?[new ro(e.key,c,"stop domain values must be unique")]:(a[l]=!0,[])):[new ro(e.key,c,"integer expected, found ".concat(String(l)))]}}function so(e){const t=("property"===e.expressionContext?Qn:Yn)(nt(e.value),e.valueSpec);if("error"===t.result)return t.value.map((t=>new ro("".concat(e.key).concat(t.key),e.value,t.message)));const r=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!r.outputDefined())return[new ro(e.key,e.value,'Invalid data expression for "'.concat(e.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===e.expressionContext&&"layout"===e.propertyType&&!_r(r))return[new ro(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext)return lo(r,e);if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!wr(r,["zoom","feature-state"]))return[new ro(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!xr(r))return[new ro(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function lo(e,t){const r=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(t.valueSpec&&t.valueSpec.expression)for(const o of t.valueSpec.expression.parameters)r.delete(o);if(0===r.size)return[];const n=[];return e instanceof er&&r.has(e.name)?[new ro(t.key,t.value,'["'.concat(e.name,'"] expression is not supported in a filter for a ').concat(t.object.type," layer with id: ").concat(t.object.id))]:(e.eachChild((e=>{n.push(...lo(e,t))})),n)}function co(e){const t=e.key,r=e.value,n=e.valueSpec,o=[];return Array.isArray(n.values)?-1===n.values.indexOf(rt(r))&&o.push(new ro(t,r,"expected one of [".concat(n.values.join(", "),"], ").concat(JSON.stringify(r)," found"))):-1===Object.keys(n.values).indexOf(rt(r))&&o.push(new ro(t,r,"expected one of [".concat(Object.keys(n.values).join(", "),"], ").concat(JSON.stringify(r)," found"))),o}function uo(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!uo(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}function ho(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fill";if(null==e)return{filter:()=>!0,needGeometry:!1,needFeature:!1};uo(e)||(e=bo(e));const r=e;let n=!0;try{n=function(e){if(!mo(e))return e;let t=nt(e);return fo(t),t=po(t),t}(r)}catch(e){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n".concat(JSON.stringify(r,null,2),"\n        "))}const o=et["filter_".concat(t)],i=Yn(n,o);let a=null;if("error"===i.result)throw new Error(i.value.map((e=>"".concat(e.key,": ").concat(e.message))).join(", "));a=(e,t,r)=>i.value.evaluate(e,t,{},r);let s=null,l=null;if(n!==r){const e=Yn(r,o);if("error"===e.result)throw new Error(e.value.map((e=>"".concat(e.key,": ").concat(e.message))).join(", "));s=(t,r,n,o,i)=>e.value.evaluate(t,r,{},n,void 0,void 0,o,i),l=!xr(e.value.expression)}return{filter:a,dynamicFilter:s||void 0,needGeometry:vo(n),needFeature:!!l}}function po(e){if(!Array.isArray(e))return e;const t=function(e){if(go.has(e[0]))for(let t=1;t<e.length;t++)if(mo(e[t]))return!0;return e}(e);return!0===t?t:t.map((e=>po(e)))}function fo(e){let t=!1;const r=[];if("case"===e[0]){for(let n=1;n<e.length-1;n+=2)t=t||mo(e[n]),r.push(e[n+1]);r.push(e[e.length-1])}else if("match"===e[0]){t=t||mo(e[1]);for(let t=2;t<e.length-1;t+=2)r.push(e[t+1]);r.push(e[e.length-1])}else if("step"===e[0]){t=t||mo(e[1]);for(let t=1;t<e.length-1;t+=2)r.push(e[t+1])}t&&(e.length=0,e.push("any",...r));for(let n=1;n<e.length;n++)fo(e[n])}function mo(e){if(!Array.isArray(e))return!1;if("pitch"===(t=e[0])||"distance-from-center"===t)return!0;var t;for(let r=1;r<e.length;r++)if(mo(e[r]))return!0;return!1}const go=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function yo(e,t){return e<t?-1:e>t?1:0}function vo(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(let t=1;t<e.length;t++)if(vo(e[t]))return!0;return!1}function bo(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?xo(e[1],e[2],"=="):"!="===t?So(xo(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?xo(e[1],e[2],t):"any"===t?(r=e.slice(1),["any"].concat(r.map(bo))):"all"===t?["all"].concat(e.slice(1).map(bo)):"none"===t?["all"].concat(e.slice(1).map(bo).map(So)):"in"===t?_o(e[1],e.slice(2)):"!in"===t?So(_o(e[1],e.slice(2))):"has"===t?wo(e[1]):"!has"===t?So(wo(e[1])):"within"!==t||e;var r}function xo(e,t,r){switch(e){case"$type":return["filter-type-".concat(r),t];case"$id":return["filter-id-".concat(r),t];default:return["filter-".concat(r),e,t]}}function _o(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((e=>typeof e!=typeof t[0]))?["filter-in-large",e,["literal",t.sort(yo)]]:["filter-in-small",e,["literal",t]]}}function wo(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function So(e){return["!",e]}function ko(e){return uo(nt(e.value))?so(tt({},e,{expressionContext:"filter",valueSpec:e.styleSpec["filter_".concat(e.layerType||"fill")]})):To(e)}function To(e){const t=e.value,r=e.key;if("array"!==Nn(t))return[new ro(r,t,"array expected, ".concat(Nn(t)," found"))];const n=e.styleSpec;let o,i=[];if(t.length<1)return[new ro(r,t,"filter array must have at least 1 element")];switch(i=i.concat(co({key:"".concat(r,"[0]"),value:t[0],valueSpec:n.filter_operator,style:e.style,styleSpec:e.styleSpec})),rt(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===rt(t[1])&&i.push(new ro(r,t,'"$type" cannot be use with operator "'.concat(t[0],'"')));case"==":case"!=":3!==t.length&&i.push(new ro(r,t,'filter array for operator "'.concat(t[0],'" must have 3 elements')));case"in":case"!in":t.length>=2&&(o=Nn(t[1]),"string"!==o&&i.push(new ro("".concat(r,"[1]"),t[1],"string expected, ".concat(o," found"))));for(let a=2;a<t.length;a++)o=Nn(t[a]),"$type"===rt(t[1])?i=i.concat(co({key:"".concat(r,"[").concat(a,"]"),value:t[a],valueSpec:n.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==o&&"number"!==o&&"boolean"!==o&&i.push(new ro("".concat(r,"[").concat(a,"]"),t[a],"string, number, or boolean expected, ".concat(o," found")));break;case"any":case"all":case"none":for(let n=1;n<t.length;n++)i=i.concat(To({key:"".concat(r,"[").concat(n,"]"),value:t[n],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":o=Nn(t[1]),2!==t.length?i.push(new ro(r,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"string"!==o&&i.push(new ro("".concat(r,"[1]"),t[1],"string expected, ".concat(o," found")));break;case"within":o=Nn(t[1]),2!==t.length?i.push(new ro(r,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"object"!==o&&i.push(new ro("".concat(r,"[1]"),t[1],"object expected, ".concat(o," found")))}return i}function Eo(e,t){const r=e.key,n=e.style,o=e.styleSpec,i=e.value,a=e.objectKey,s=o["".concat(t,"_").concat(e.layerType)];if(!s)return[];const l=a.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return Do({key:r,value:i,valueSpec:o.transition,style:n,styleSpec:o});const c=e.valueSpec||s[a];if(!c)return[new ro(r,i,'unknown property "'.concat(a,'"'))];let u;if("string"===Nn(i)&&Fn(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(i))){const e='`{ "type": "identity", "property": '.concat(u?JSON.stringify(u[1]):'"_"'," }`");return[new ro(r,i,'"'.concat(a,'" does not support interpolation syntax\nUse an identity property function instead: ').concat(e,"."))]}const d=[];return"symbol"===e.layerType&&("text-field"===a&&n&&!n.glyphs&&d.push(new ro(r,i,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Bn(nt(i))&&"identity"===rt(i.type)&&d.push(new ro(r,i,'"text-font" does not support identity functions'))),d.concat(Do({key:e.key,value:i,valueSpec:c,style:n,styleSpec:o,expressionContext:"property",propertyType:t,propertyKey:a}))}function Co(e){return Eo(e,"paint")}function Ao(e){return Eo(e,"layout")}function jo(e){let t=[];const r=e.value,n=e.key,o=e.style,i=e.styleSpec;r.type||r.ref||t.push(new ro(n,r,'either "type" or "ref" is required'));let a=rt(r.type);const s=rt(r.ref);if(r.id){const i=rt(r.id);for(let a=0;a<e.arrayIndex;a++){const e=o.layers[a];rt(e.id)===i&&t.push(new ro(n,r.id,'duplicate layer id "'.concat(r.id,'", previously used at line ').concat(e.id.__line__)))}}if("ref"in r){let e;["type","source","source-layer","filter","layout"].forEach((e=>{e in r&&t.push(new ro(n,r[e],'"'.concat(e,'" is prohibited for ref layers')))})),o.layers.forEach((t=>{rt(t.id)===s&&(e=t)})),e?e.ref?t.push(new ro(n,r.ref,"ref cannot reference another ref layer")):a=rt(e.type):"string"==typeof s&&t.push(new ro(n,r.ref,'ref layer "'.concat(s,'" not found')))}else if("background"!==a&&"sky"!==a)if(r.source){const e=o.sources&&o.sources[r.source],i=e&&rt(e.type);e?"vector"===i&&"raster"===a?t.push(new ro(n,r.source,'layer "'.concat(r.id,'" requires a raster source'))):"raster"===i&&"raster"!==a?t.push(new ro(n,r.source,'layer "'.concat(r.id,'" requires a vector source'))):"vector"!==i||r["source-layer"]?"raster-dem"===i&&"hillshade"!==a?t.push(new ro(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!r.paint||!r.paint["line-gradient"]&&!r.paint["line-trim-offset"]||"geojson"===i&&e.lineMetrics||t.push(new ro(n,r,'layer "'.concat(r.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):t.push(new ro(n,r,'layer "'.concat(r.id,'" must specify a "source-layer"'))):t.push(new ro(n,r.source,'source "'.concat(r.source,'" not found')))}else t.push(new ro(n,r,'missing required property "source"'));return t=t.concat(no({key:n,value:r,valueSpec:i.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Do({key:"".concat(n,".type"),value:r.type,valueSpec:i.layer.type,style:e.style,styleSpec:e.styleSpec,object:r,objectKey:"type"}),filter:e=>ko(tt({layerType:a},e)),layout:e=>no({layer:r,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>Ao(tt({layerType:a},e))}}),paint:e=>no({layer:r,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>Co(tt({layerType:a},e))}})}})),t}function Po(e){const t=e.value,r=e.key,n=Nn(t);return"string"!==n?[new ro(r,t,"string expected, ".concat(n," found"))]:[]}const Io={promoteId:function(e){let{key:t,value:r}=e;if("string"===Nn(r))return Po({key:t,value:r});{const e=[];for(const n in r)e.push(...Po({key:"".concat(t,".").concat(n),value:r[n]}));return e}}};function Oo(e){const t=e.value,r=e.key,n=e.styleSpec,o=e.style;if(!t.type)return[new ro(r,t,'"type" is required')];const i=rt(t.type);let a;switch(i){case"vector":case"raster":case"raster-dem":return a=no({key:r,value:t,valueSpec:n["source_".concat(i.replace("-","_"))],style:e.style,styleSpec:n,objectElementValidators:Io}),a;case"geojson":if(a=no({key:r,value:t,valueSpec:n.source_geojson,style:o,styleSpec:n,objectElementValidators:Io}),t.cluster)for(const e in t.clusterProperties){const[n,o]=t.clusterProperties[e],i="string"==typeof n?[n,["accumulated"],["get",e]]:n;a.push(...so({key:"".concat(r,".").concat(e,".map"),value:o,expressionContext:"cluster-map"})),a.push(...so({key:"".concat(r,".").concat(e,".reduce"),value:i,expressionContext:"cluster-reduce"}))}return a;case"video":return no({key:r,value:t,valueSpec:n.source_video,style:o,styleSpec:n});case"image":return no({key:r,value:t,valueSpec:n.source_image,style:o,styleSpec:n});case"canvas":return[new ro(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return co({key:"".concat(r,".type"),value:t.type,valueSpec:{values:Mo(n)},style:o,styleSpec:n})}}function Mo(e){return e.source.reduce(((t,r)=>{const n=e[r];return"enum"===n.type.type&&(t=t.concat(Object.keys(n.type.values))),t}),[])}function Ro(e){const t=e.value,r=e.styleSpec,n=r.light,o=e.style;let i=[];const a=Nn(t);if(void 0===t)return i;if("object"!==a)return i=i.concat([new ro("light",t,"object expected, ".concat(a," found"))]),i;for(const s in t){const e=s.match(/^(.*)-transition$/);i=i.concat(e&&n[e[1]]&&n[e[1]].transition?Do({key:s,value:t[s],valueSpec:r.transition,style:o,styleSpec:r}):n[s]?Do({key:s,value:t[s],valueSpec:n[s],style:o,styleSpec:r}):[new ro(s,t[s],'unknown property "'.concat(s,'"'))])}return i}function Lo(e){const t=e.value,r=e.key,n=e.style,o=e.styleSpec,i=o.terrain;let a=[];const s=Nn(t);if(void 0===t)return a;if("object"!==s)return a=a.concat([new ro("terrain",t,"object expected, ".concat(s," found"))]),a;for(const l in t){const e=l.match(/^(.*)-transition$/);a=a.concat(e&&i[e[1]]&&i[e[1]].transition?Do({key:l,value:t[l],valueSpec:o.transition,style:n,styleSpec:o}):i[l]?Do({key:l,value:t[l],valueSpec:i[l],style:n,styleSpec:o}):[new ro(l,t[l],'unknown property "'.concat(l,'"'))])}if(t.source){const e=n.sources&&n.sources[t.source],o=e&&rt(e.type);e?"raster-dem"!==o&&a.push(new ro(r,t.source,"terrain cannot be used with a source of type ".concat(String(o),', it only be used with a "raster-dem" source type'))):a.push(new ro(r,t.source,'source "'.concat(t.source,'" not found')))}else a.push(new ro(r,t,'terrain is missing required property "source"'));return a}function Fo(e){const t=e.value,r=e.style,n=e.styleSpec,o=n.fog;let i=[];const a=Nn(t);if(void 0===t)return i;if("object"!==a)return i=i.concat([new ro("fog",t,"object expected, ".concat(a," found"))]),i;for(const s in t){const e=s.match(/^(.*)-transition$/);i=i.concat(e&&o[e[1]]&&o[e[1]].transition?Do({key:s,value:t[s],valueSpec:n.transition,style:r,styleSpec:n}):o[s]?Do({key:s,value:t[s],valueSpec:o[s],style:r,styleSpec:n}):[new ro(s,t[s],'unknown property "'.concat(s,'"'))])}return i}const zo={"*":()=>[],array:oo,boolean:function(e){const t=e.value,r=e.key,n=Nn(t);return"boolean"!==n?[new ro(r,t,"boolean expected, ".concat(n," found"))]:[]},number:io,color:function(e){const t=e.key,r=e.value,n=Nn(r);return"string"!==n?[new ro(t,r,"color expected, ".concat(n," found"))]:null===kt(r)?[new ro(t,r,'color expected, "'.concat(r,'" found'))]:[]},enum:co,filter:ko,function:ao,layer:jo,object:no,source:Oo,light:Ro,terrain:Lo,fog:Fo,string:Po,formatted:function(e){return 0===Po(e).length?[]:so(e)},resolvedImage:function(e){return 0===Po(e).length?[]:so(e)},projection:function(e){const t=e.value,r=e.styleSpec,n=r.projection,o=e.style;let i=[];const a=Nn(t);if("object"===a)for(const s in t)i=i.concat(Do({key:s,value:t[s],valueSpec:n[s],style:o,styleSpec:r}));else"string"!==a&&(i=i.concat([new ro("projection",t,"object or string expected, ".concat(a," found"))]));return i}};function Do(e){const t=e.value,r=e.valueSpec,n=e.styleSpec;return r.expression&&Bn(rt(t))?ao(e):r.expression&&Zn(nt(t))?so(e):r.type&&zo[r.type]?zo[r.type](e):no(tt({},e,{valueSpec:r.type?n[r.type]:r}))}function No(e){const t=e.value,r=e.key,n=Po(e);return n.length||(-1===t.indexOf("{fontstack}")&&n.push(new ro(r,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&n.push(new ro(r,t,'"glyphs" url must include a "{range}" token'))),n}function Bo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et;return Wo(Do({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:No,"*":()=>[]}}))}const Uo=e=>Wo(Co(e)),Vo=e=>Wo(Ao(e));function Wo(e){return e.slice().sort(((e,t)=>e.line&&t.line?e.line-t.line:0))}function qo(e,t){let r=!1;if(t&&t.length)for(const n of t)e.fire(new $e(new Error(n.message))),r=!0;return r}var Ho=Ko,Go=3;function Ko(e,t,r){var n=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var o=new Int32Array(this.arrayBuffer);e=o[0],this.d=(t=o[1])+2*(r=o[2]);for(var i=0;i<this.d*this.d;i++){var a=o[Go+i],s=o[Go+i+1];n.push(a===s?null:o.subarray(a,s))}var l=o[Go+n.length+1];this.keys=o.subarray(o[Go+n.length],l),this.bboxes=o.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*r;for(var c=0;c<this.d*this.d;c++)n.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=r,this.scale=t/e,this.uid=0;var u=r/t*e;this.min=-u,this.max=e+u}Ko.prototype.insert=function(e,t,r,n,o){this._forEachCell(t,r,n,o,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(o)},Ko.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ko.prototype._insertCell=function(e,t,r,n,o,i){this.cells[o].push(i)},Ko.prototype.query=function(e,t,r,n,o){var i=this.min,a=this.max;if(e<=i&&t<=i&&a<=r&&a<=n&&!o)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,r,n,this._queryCell,s,{},o),s},Ko.prototype._queryCell=function(e,t,r,n,o,i,a,s){var l=this.cells[o];if(null!==l)for(var c=this.keys,u=this.bboxes,d=0;d<l.length;d++){var h=l[d];if(void 0===a[h]){var p=4*h;(s?s(u[p+0],u[p+1],u[p+2],u[p+3]):e<=u[p+2]&&t<=u[p+3]&&r>=u[p+0]&&n>=u[p+1])?(a[h]=!0,i.push(c[h])):a[h]=!1}}},Ko.prototype._forEachCell=function(e,t,r,n,o,i,a,s){for(var l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(r),d=this._convertToCellCoord(n),h=l;h<=u;h++)for(var p=c;p<=d;p++){var f=this.d*p+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(p),this._convertFromCellCoord(h+1),this._convertFromCellCoord(p+1)))&&o.call(this,e,t,r,n,f,i,a,s))return}},Ko.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Ko.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Ko.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=Go+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;var o=new Int32Array(t+r+this.keys.length+this.bboxes.length);o[0]=this.extent,o[1]=this.n,o[2]=this.padding;for(var i=t,a=0;a<e.length;a++){var s=e[a];o[Go+a]=i,o.set(s,i),i+=s.length}return o[Go+e.length]=i,o.set(this.keys,i),o[Go+e.length+1]=i+=this.keys.length,o.set(this.bboxes,i),i+=this.bboxes.length,o.buffer};var Xo=h(Ho);const Zo={};function Yo(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Zo[t]={klass:e,omit:r.omit||[]}}Yo(Object,"Object"),Xo.serialize=function(e,t){const r=e.toArrayBuffer();return t&&t.push(r),{buffer:r}},Xo.deserialize=function(e){return new Xo(e.buffer)},Object.defineProperty(Xo,"name",{value:"Grid"}),Yo(Xo,"Grid"),Yo(It,"Color"),Yo(Error,"Error"),Yo(ce,"AJAXError"),Yo(Lt,"ResolvedImage"),Yo(eo,"StylePropertyFunction"),Yo(Xn,"StyleExpression",{omit:["_evaluator"]}),Yo($n,"ZoomDependentExpression"),Yo(Jn,"ZoomConstantExpression"),Yo(er,"CompoundExpression",{omit:["_evaluate"]});for(const Sm in Mn)Zo[Mn[Sm]._classRegistryKey]||Yo(Mn[Sm],"Expression".concat(Sm));function Jo(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function $o(e){return t.ImageBitmap&&e instanceof t.ImageBitmap}function Qo(e,r){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Jo(e)||$o(e))return r&&r.push(e),e;if(ArrayBuffer.isView(e)){const t=e;return r&&r.push(t.buffer),t}if(e instanceof t.ImageData)return r&&r.push(e.data.buffer),e;if(Array.isArray(e)){const t=[];for(const n of e)t.push(Qo(n,r));return t}if("object"==typeof e){const t=e.constructor,n=t._classRegistryKey;if(!n)throw new Error("can't serialize object of unregistered class ".concat(n));const o=t.serialize?t.serialize(e,r):{};if(!t.serialize){for(const t in e)e.hasOwnProperty(t)&&(Zo[n].omit.indexOf(t)>=0||(o[t]=Qo(e[t],r)));e instanceof Error&&(o.message=e.message)}if(o.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==n&&(o.$name=n),o}throw new Error("can't serialize object of type "+typeof e)}function ei(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Jo(e)||$o(e)||ArrayBuffer.isView(e)||e instanceof t.ImageData)return e;if(Array.isArray(e))return e.map(ei);if("object"==typeof e){const t=e.$name||"Object",{klass:r}=Zo[t];if(!r)throw new Error("can't deserialize unregistered class ".concat(t));if(r.deserialize)return r.deserialize(e);const n=Object.create(r.prototype);for(const o of Object.keys(e))"$name"!==o&&(n[o]=ei(e[o]));return n}throw new Error("can't deserialize object of type "+typeof e)}const ti={"Latin-1 Supplement":e=>e>=128&&e<=255,Arabic:e=>e>=1536&&e<=1791,"Arabic Supplement":e=>e>=1872&&e<=1919,"Arabic Extended-A":e=>e>=2208&&e<=2303,"Hangul Jamo":e=>e>=4352&&e<=4607,"Unified Canadian Aboriginal Syllabics":e=>e>=5120&&e<=5759,Khmer:e=>e>=6016&&e<=6143,"Unified Canadian Aboriginal Syllabics Extended":e=>e>=6320&&e<=6399,"General Punctuation":e=>e>=8192&&e<=8303,"Letterlike Symbols":e=>e>=8448&&e<=8527,"Number Forms":e=>e>=8528&&e<=8591,"Miscellaneous Technical":e=>e>=8960&&e<=9215,"Control Pictures":e=>e>=9216&&e<=9279,"Optical Character Recognition":e=>e>=9280&&e<=9311,"Enclosed Alphanumerics":e=>e>=9312&&e<=9471,"Geometric Shapes":e=>e>=9632&&e<=9727,"Miscellaneous Symbols":e=>e>=9728&&e<=9983,"Miscellaneous Symbols and Arrows":e=>e>=11008&&e<=11263,"CJK Radicals Supplement":e=>e>=11904&&e<=12031,"Kangxi Radicals":e=>e>=12032&&e<=12255,"Ideographic Description Characters":e=>e>=12272&&e<=12287,"CJK Symbols and Punctuation":e=>e>=12288&&e<=12351,Hiragana:e=>e>=12352&&e<=12447,Katakana:e=>e>=12448&&e<=12543,Bopomofo:e=>e>=12544&&e<=12591,"Hangul Compatibility Jamo":e=>e>=12592&&e<=12687,Kanbun:e=>e>=12688&&e<=12703,"Bopomofo Extended":e=>e>=12704&&e<=12735,"CJK Strokes":e=>e>=12736&&e<=12783,"Katakana Phonetic Extensions":e=>e>=12784&&e<=12799,"Enclosed CJK Letters and Months":e=>e>=12800&&e<=13055,"CJK Compatibility":e=>e>=13056&&e<=13311,"CJK Unified Ideographs Extension A":e=>e>=13312&&e<=19903,"Yijing Hexagram Symbols":e=>e>=19904&&e<=19967,"CJK Unified Ideographs":e=>e>=19968&&e<=40959,"Yi Syllables":e=>e>=40960&&e<=42127,"Yi Radicals":e=>e>=42128&&e<=42191,"Hangul Jamo Extended-A":e=>e>=43360&&e<=43391,"Hangul Syllables":e=>e>=44032&&e<=55215,"Hangul Jamo Extended-B":e=>e>=55216&&e<=55295,"Private Use Area":e=>e>=57344&&e<=63743,"CJK Compatibility Ideographs":e=>e>=63744&&e<=64255,"Arabic Presentation Forms-A":e=>e>=64336&&e<=65023,"Vertical Forms":e=>e>=65040&&e<=65055,"CJK Compatibility Forms":e=>e>=65072&&e<=65103,"Small Form Variants":e=>e>=65104&&e<=65135,"Arabic Presentation Forms-B":e=>e>=65136&&e<=65279,"Halfwidth and Fullwidth Forms":e=>e>=65280&&e<=65519};function ri(e){for(const t of e)if(ii(t.charCodeAt(0)))return!0;return!1}function ni(e){for(const t of e)if(!oi(t.charCodeAt(0)))return!1;return!0}function oi(e){return!(ti.Arabic(e)||ti["Arabic Supplement"](e)||ti["Arabic Extended-A"](e)||ti["Arabic Presentation Forms-A"](e)||ti["Arabic Presentation Forms-B"](e))}function ii(e){return!(746!==e&&747!==e&&(e<4352||!(ti["Bopomofo Extended"](e)||ti.Bopomofo(e)||ti["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||ti["CJK Compatibility Ideographs"](e)||ti["CJK Compatibility"](e)||ti["CJK Radicals Supplement"](e)||ti["CJK Strokes"](e)||!(!ti["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||ti["CJK Unified Ideographs Extension A"](e)||ti["CJK Unified Ideographs"](e)||ti["Enclosed CJK Letters and Months"](e)||ti["Hangul Compatibility Jamo"](e)||ti["Hangul Jamo Extended-A"](e)||ti["Hangul Jamo Extended-B"](e)||ti["Hangul Jamo"](e)||ti["Hangul Syllables"](e)||ti.Hiragana(e)||ti["Ideographic Description Characters"](e)||ti.Kanbun(e)||ti["Kangxi Radicals"](e)||ti["Katakana Phonetic Extensions"](e)||ti.Katakana(e)&&12540!==e||!(!ti["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!ti["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||ti["Unified Canadian Aboriginal Syllabics"](e)||ti["Unified Canadian Aboriginal Syllabics Extended"](e)||ti["Vertical Forms"](e)||ti["Yijing Hexagram Symbols"](e)||ti["Yi Syllables"](e)||ti["Yi Radicals"](e))))}function ai(e){return!(ii(e)||function(e){return!!(ti["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||ti["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||ti["Letterlike Symbols"](e)||ti["Number Forms"](e)||ti["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||ti["Control Pictures"](e)&&9251!==e||ti["Optical Character Recognition"](e)||ti["Enclosed Alphanumerics"](e)||ti["Geometric Shapes"](e)||ti["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||ti["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||ti["CJK Symbols and Punctuation"](e)||ti.Katakana(e)||ti["Private Use Area"](e)||ti["CJK Compatibility Forms"](e)||ti["Small Form Variants"](e)||ti["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function si(e){return e>=1424&&e<=2303||ti["Arabic Presentation Forms-A"](e)||ti["Arabic Presentation Forms-B"](e)}function li(e,t){return!(!t&&si(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||ti.Khmer(e))}function ci(e){for(const t of e)if(si(t.charCodeAt(0)))return!0;return!1}const ui="deferred",di="loading",hi="loaded";let pi=null,fi="unavailable",mi=null;const gi=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(fi="error"),pi&&pi(e)};function yi(){vi.fire(new Je("pluginStateChange",{pluginStatus:fi,pluginURL:mi}))}const vi=new Qe,bi=function(){return fi},xi=function(){if(fi!==ui||!mi)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");fi=di,yi(),mi&&he({url:mi},(e=>{e?gi(e):(fi=hi,yi())}))},_i={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>fi===hi||null!=_i.applyArabicShaping,isLoading:()=>fi===di,setState(e){fi=e.pluginStatus,mi=e.pluginURL},isParsed:()=>null!=_i.applyArabicShaping&&null!=_i.processBidirectionalText&&null!=_i.processStyledBidirectionalText,getPluginURL:()=>mi};class wi{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.transition=t.transition,this.pitch=t.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(e){return function(e,t){for(const r of e)if(!li(r.charCodeAt(0),t))return!1;return!0}(e,_i.isLoaded())}}class Si{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(Bn(e))return new eo(e,t);if(Zn(e)){const r=Qn(e,t);if("error"===r.result)throw new Error(r.value.map((e=>"".concat(e.key,": ").concat(e.message))).join(", "));return r.value}{let r=e;return"string"==typeof e&&"color"===t.type&&(r=It.parse(e)),{kind:"constant",evaluate:()=>r}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,r){return this.property.possiblyEvaluate(this,e,t,r)}}class ki{constructor(e){this.property=e,this.value=new Si(e,void 0)}transitioned(e,t){return new Ei(this.property,this.value,t,O({},e.transition,this.transition),e.now)}untransitioned(){return new Ei(this.property,this.value,null,{},0)}}class Ti{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return V(this._values[e].value.value)}setValue(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new ki(this._values[e].property)),this._values[e].value=new Si(this._values[e].property,null===t?void 0:V(t))}getTransition(e){return V(this._values[e].transition)}setTransition(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new ki(this._values[e].property)),this._values[e].transition=V(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const r=this.getValue(t);void 0!==r&&(e[t]=r);const n=this.getTransition(t);void 0!==n&&(e["".concat(t,"-transition")]=n)}return e}transitioned(e,t){const r=new Ci(this._properties);for(const n of Object.keys(this._values))r._values[n]=this._values[n].transitioned(e,t._values[n]);return r}untransitioned(){const e=new Ci(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class Ei{constructor(e,t,r,n,o){const i=n.delay||0,a=n.duration||0;o=o||0,this.property=e,this.value=t,this.begin=o+i,this.end=this.begin+a,e.specification.transition&&(n.delay||n.duration)&&(this.prior=r)}possiblyEvaluate(e,t,r){const n=e.now||0,o=this.value.possiblyEvaluate(e,t,r),i=this.prior;if(i){if(n>this.end)return this.prior=null,o;if(this.value.isDataDriven())return this.prior=null,o;if(n<this.begin)return i.possiblyEvaluate(e,t,r);{const a=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(i.possiblyEvaluate(e,t,r),o,k(a))}}return o}}class Ci{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,r){const n=new Pi(this._properties);for(const o of Object.keys(this._values))n._values[o]=this._values[o].possiblyEvaluate(e,t,r);return n}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Ai{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return V(this._values[e].value)}setValue(e,t){this._values[e]=new Si(this._values[e].property,null===t?void 0:V(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const r=this.getValue(t);void 0!==r&&(e[t]=r)}return e}possiblyEvaluate(e,t,r){const n=new Pi(this._properties);for(const o of Object.keys(this._values))n._values[o]=this._values[o].possiblyEvaluate(e,t,r);return n}}class ji{constructor(e,t,r){this.property=e,this.value=t,this.parameters=r}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,r,n){return this.property.evaluate(this.value,this.parameters,e,t,r,n)}}class Pi{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Ii{constructor(e){this.specification=e}possiblyEvaluate(e,t){return e.expression.evaluate(t)}interpolate(e,t,r){const n=Or[this.specification.type];return n?n(e,t,r):e}}class Oi{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,r,n){return new ji(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},r,n)}:e.expression,t)}interpolate(e,t,r){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new ji(this,{kind:"constant",value:void 0},e.parameters);const n=Or[this.specification.type];return n?new ji(this,{kind:"constant",value:n(e.value.value,t.value.value,r)},e.parameters):e}evaluate(e,t,r,n,o,i){return"constant"===e.kind?e.value:e.evaluate(t,r,n,o,i)}}class Mi{constructor(e){this.specification=e}possiblyEvaluate(e,t,r,n){return!!e.expression.evaluate(t,null,{},r,n)}interpolate(){return!1}}class Ri{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const t=new wi(0,{});for(const r in e){const n=e[r];n.specification.overridable&&this.overridableProperties.push(r);const o=this.defaultPropertyValues[r]=new Si(n,void 0),i=this.defaultTransitionablePropertyValues[r]=new ki(n);this.defaultTransitioningPropertyValues[r]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=o.possiblyEvaluate(t)}}}function Li(e,t){return 256*(e=C(Math.floor(e),0,255))+C(Math.floor(t),0,255)}Yo(Oi,"DataDrivenProperty"),Yo(Ii,"DataConstantProperty"),Yo(Mi,"ColorRampProperty");const Fi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class zi{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Di{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Ni(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=0,n=0;return{members:e.map((e=>{const o=Fi[e.type].BYTES_PER_ELEMENT,i=r=Bi(r,Math.max(t,o)),a=e.components||1;return n=Math.max(n,o),r+=o*a,{name:e.name,type:e.type,components:a,offset:i}})),size:Bi(r,Math.max(n,t)),alignment:t}}function Bi(e,t){return Math.ceil(e/t)*t}class Ui extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const n=2*e;return this.int16[n+0]=t,this.int16[n+1]=r,e}}Ui.prototype.bytesPerElement=4,Yo(Ui,"StructArrayLayout2i4");class Vi extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}emplace(e,t,r,n){const o=3*e;return this.int16[o+0]=t,this.int16[o+1]=r,this.int16[o+2]=n,e}}Vi.prototype.bytesPerElement=6,Yo(Vi,"StructArrayLayout3i6");class Wi extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,r,n)}emplace(e,t,r,n,o){const i=4*e;return this.int16[i+0]=t,this.int16[i+1]=r,this.int16[i+2]=n,this.int16[i+3]=o,e}}Wi.prototype.bytesPerElement=8,Yo(Wi,"StructArrayLayout4i8");class qi extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,o,i,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,r,n,o,i,a)}emplace(e,t,r,n,o,i,a,s){const l=6*e,c=12*e,u=3*e;return this.int16[l+0]=t,this.int16[l+1]=r,this.uint8[c+4]=n,this.uint8[c+5]=o,this.uint8[c+6]=i,this.uint8[c+7]=a,this.float32[u+2]=s,e}}qi.prototype.bytesPerElement=12,Yo(qi,"StructArrayLayout2i4ub1f12");class Hi extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,r,n)}emplace(e,t,r,n,o){const i=4*e;return this.float32[i+0]=t,this.float32[i+1]=r,this.float32[i+2]=n,this.float32[i+3]=o,e}}Hi.prototype.bytesPerElement=16,Yo(Hi,"StructArrayLayout4f16");class Gi extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,o){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n,o)}emplace(e,t,r,n,o,i){const a=6*e,s=3*e;return this.uint16[a+0]=t,this.uint16[a+1]=r,this.uint16[a+2]=n,this.uint16[a+3]=o,this.float32[s+2]=i,e}}Gi.prototype.bytesPerElement=12,Yo(Gi,"StructArrayLayout4ui1f12");class Ki extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,r,n)}emplace(e,t,r,n,o){const i=4*e;return this.uint16[i+0]=t,this.uint16[i+1]=r,this.uint16[i+2]=n,this.uint16[i+3]=o,e}}Ki.prototype.bytesPerElement=8,Yo(Ki,"StructArrayLayout4ui8");class Xi extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,o,i){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,n,o,i)}emplace(e,t,r,n,o,i,a){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=o,this.int16[s+4]=i,this.int16[s+5]=a,e}}Xi.prototype.bytesPerElement=12,Yo(Xi,"StructArrayLayout6i12");class Zi extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,o,i,a,s,l,c,u,d){const h=this.length;return this.resize(h+1),this.emplace(h,e,t,r,n,o,i,a,s,l,c,u,d)}emplace(e,t,r,n,o,i,a,s,l,c,u,d,h){const p=12*e;return this.int16[p+0]=t,this.int16[p+1]=r,this.int16[p+2]=n,this.int16[p+3]=o,this.uint16[p+4]=i,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=c,this.int16[p+9]=u,this.int16[p+10]=d,this.int16[p+11]=h,e}}Zi.prototype.bytesPerElement=24,Yo(Zi,"StructArrayLayout4i4ui4i24");class Yi extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,o,i){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,n,o,i)}emplace(e,t,r,n,o,i,a){const s=10*e,l=5*e;return this.int16[s+0]=t,this.int16[s+1]=r,this.int16[s+2]=n,this.float32[l+2]=o,this.float32[l+3]=i,this.float32[l+4]=a,e}}Yi.prototype.bytesPerElement=20,Yo(Yi,"StructArrayLayout3i3f20");class Ji extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}Ji.prototype.bytesPerElement=4,Yo(Ji,"StructArrayLayout1ul4");class $i extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,o,i,a,s,l,c,u,d,h){const p=this.length;return this.resize(p+1),this.emplace(p,e,t,r,n,o,i,a,s,l,c,u,d,h)}emplace(e,t,r,n,o,i,a,s,l,c,u,d,h,p){const f=20*e,m=10*e;return this.int16[f+0]=t,this.int16[f+1]=r,this.int16[f+2]=n,this.int16[f+3]=o,this.int16[f+4]=i,this.float32[m+3]=a,this.float32[m+4]=s,this.float32[m+5]=l,this.float32[m+6]=c,this.int16[f+14]=u,this.uint32[m+8]=d,this.uint16[f+18]=h,this.uint16[f+19]=p,e}}$i.prototype.bytesPerElement=40,Yo($i,"StructArrayLayout5i4f1i1ul2ui40");class Qi extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,o,i,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,r,n,o,i,a)}emplace(e,t,r,n,o,i,a,s){const l=8*e;return this.int16[l+0]=t,this.int16[l+1]=r,this.int16[l+2]=n,this.int16[l+4]=o,this.int16[l+5]=i,this.int16[l+6]=a,this.int16[l+7]=s,e}}Qi.prototype.bytesPerElement=16,Yo(Qi,"StructArrayLayout3i2i2i16");class ea extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,o){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n,o)}emplace(e,t,r,n,o,i){const a=4*e,s=8*e;return this.float32[a+0]=t,this.float32[a+1]=r,this.float32[a+2]=n,this.int16[s+6]=o,this.int16[s+7]=i,e}}ea.prototype.bytesPerElement=16,Yo(ea,"StructArrayLayout2f1f2i16");class ta extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,r,n)}emplace(e,t,r,n,o){const i=12*e,a=3*e;return this.uint8[i+0]=t,this.uint8[i+1]=r,this.float32[a+1]=n,this.float32[a+2]=o,e}}ta.prototype.bytesPerElement=12,Yo(ta,"StructArrayLayout2ub2f12");class ra extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}emplace(e,t,r,n){const o=3*e;return this.float32[o+0]=t,this.float32[o+1]=r,this.float32[o+2]=n,e}}ra.prototype.bytesPerElement=12,Yo(ra,"StructArrayLayout3f12");class na extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}emplace(e,t,r,n){const o=3*e;return this.uint16[o+0]=t,this.uint16[o+1]=r,this.uint16[o+2]=n,e}}na.prototype.bytesPerElement=6,Yo(na,"StructArrayLayout3ui6");class oa extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,o,i,a,s,l,c,u,d,h,p,f,m,g,y,v,b,x){const _=this.length;return this.resize(_+1),this.emplace(_,e,t,r,n,o,i,a,s,l,c,u,d,h,p,f,m,g,y,v,b,x)}emplace(e,t,r,n,o,i,a,s,l,c,u,d,h,p,f,m,g,y,v,b,x,_){const w=30*e,S=15*e,k=60*e;return this.int16[w+0]=t,this.int16[w+1]=r,this.int16[w+2]=n,this.float32[S+2]=o,this.float32[S+3]=i,this.uint16[w+8]=a,this.uint16[w+9]=s,this.uint32[S+5]=l,this.uint32[S+6]=c,this.uint32[S+7]=u,this.uint16[w+16]=d,this.uint16[w+17]=h,this.uint16[w+18]=p,this.float32[S+10]=f,this.float32[S+11]=m,this.uint8[k+48]=g,this.uint8[k+49]=y,this.uint8[k+50]=v,this.uint32[S+13]=b,this.int16[w+28]=x,this.uint8[k+58]=_,e}}oa.prototype.bytesPerElement=60,Yo(oa,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class ia extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,o,i,a,s,l,c,u,d,h,p,f,m,g,y,v,b,x,_,w,S,k,T,E,C,A,j){const P=this.length;return this.resize(P+1),this.emplace(P,e,t,r,n,o,i,a,s,l,c,u,d,h,p,f,m,g,y,v,b,x,_,w,S,k,T,E,C,A,j)}emplace(e,t,r,n,o,i,a,s,l,c,u,d,h,p,f,m,g,y,v,b,x,_,w,S,k,T,E,C,A,j,P){const I=38*e,O=19*e;return this.int16[I+0]=t,this.int16[I+1]=r,this.int16[I+2]=n,this.float32[O+2]=o,this.float32[O+3]=i,this.int16[I+8]=a,this.int16[I+9]=s,this.int16[I+10]=l,this.int16[I+11]=c,this.int16[I+12]=u,this.int16[I+13]=d,this.uint16[I+14]=h,this.uint16[I+15]=p,this.uint16[I+16]=f,this.uint16[I+17]=m,this.uint16[I+18]=g,this.uint16[I+19]=y,this.uint16[I+20]=v,this.uint16[I+21]=b,this.uint16[I+22]=x,this.uint16[I+23]=_,this.uint16[I+24]=w,this.uint16[I+25]=S,this.uint16[I+26]=k,this.uint16[I+27]=T,this.uint16[I+28]=E,this.uint32[O+15]=C,this.float32[O+16]=A,this.float32[O+17]=j,this.float32[O+18]=P,e}}ia.prototype.bytesPerElement=76,Yo(ia,"StructArrayLayout3i2f6i15ui1ul3f76");class aa extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}aa.prototype.bytesPerElement=4,Yo(aa,"StructArrayLayout1f4");class sa extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,o){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n,o)}emplace(e,t,r,n,o,i){const a=5*e;return this.float32[a+0]=t,this.float32[a+1]=r,this.float32[a+2]=n,this.float32[a+3]=o,this.float32[a+4]=i,e}}sa.prototype.bytesPerElement=20,Yo(sa,"StructArrayLayout5f20");class la extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,r,n)}emplace(e,t,r,n,o){const i=6*e;return this.uint32[3*e+0]=t,this.uint16[i+2]=r,this.uint16[i+3]=n,this.uint16[i+4]=o,e}}la.prototype.bytesPerElement=12,Yo(la,"StructArrayLayout1ul3ui12");class ca extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const n=2*e;return this.uint16[n+0]=t,this.uint16[n+1]=r,e}}ca.prototype.bytesPerElement=4,Yo(ca,"StructArrayLayout2ui4");class ua extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}ua.prototype.bytesPerElement=2,Yo(ua,"StructArrayLayout1ui2");class da extends Di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const n=2*e;return this.float32[n+0]=t,this.float32[n+1]=r,e}}da.prototype.bytesPerElement=8,Yo(da,"StructArrayLayout2f8");class ha extends zi{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}ha.prototype.size=40;class pa extends $i{get(e){return new ha(this,e)}}Yo(pa,"CollisionBoxArray");class fa extends zi{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}fa.prototype.size=60;class ma extends oa{get(e){return new fa(this,e)}}Yo(ma,"PlacedSymbolArray");class ga extends zi{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}ga.prototype.size=76;class ya extends ia{get(e){return new ga(this,e)}}Yo(ya,"SymbolInstanceArray");class va extends aa{getoffsetX(e){return this.float32[1*e+0]}}Yo(va,"GlyphOffsetArray");class ba extends Ui{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}Yo(ba,"SymbolLineVertexArray");class xa extends zi{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}xa.prototype.size=12;class _a extends la{get(e){return new xa(this,e)}}Yo(_a,"FeatureIndexArray");class wa extends ca{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}Yo(wa,"FillExtrusionCentroidArray");const Sa=Ni([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),ka=Ni([{name:"a_dash",components:4,type:"Uint16"}]);var Ta={exports:{}},Ea={exports:{}};Ea.exports=function(e,t){var r,n,o,i,a,s,l,c;for(n=e.length-(r=3&e.length),o=t,a=3432918353,s=461845907,c=0;c<n;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,o=27492+(65535&(i=5*(65535&(o=(o^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|o>>>19))+((5*(o>>>16)&65535)<<16)&4294967295))+((58964+(i>>>16)&65535)<<16);switch(l=0,r){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:o^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return o^=e.length,o=2246822507*(65535&(o^=o>>>16))+((2246822507*(o>>>16)&65535)<<16)&4294967295,o=3266489909*(65535&(o^=o>>>13))+((3266489909*(o>>>16)&65535)<<16)&4294967295,(o^=o>>>16)>>>0};var Ca=Ea.exports,Aa={exports:{}};Aa.exports=function(e,t){for(var r,n=e.length,o=t^n,i=0;n>=4;)r=1540483477*(65535&(r=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+((1540483477*(r>>>16)&65535)<<16),o=1540483477*(65535&o)+((1540483477*(o>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++i;switch(n){case 3:o^=(255&e.charCodeAt(i+2))<<16;case 2:o^=(255&e.charCodeAt(i+1))<<8;case 1:o=1540483477*(65535&(o^=255&e.charCodeAt(i)))+((1540483477*(o>>>16)&65535)<<16)}return o=1540483477*(65535&(o^=o>>>13))+((1540483477*(o>>>16)&65535)<<16),(o^=o>>>15)>>>0};var ja=Ca,Pa=Aa.exports;Ta.exports=ja,Ta.exports.murmur3=ja,Ta.exports.murmur2=Pa;var Ia=h(Ta.exports);class Oa{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,r,n){this.ids.push(Ma(e)),this.positions.push(t,r,n)}getPositions(e){const t=Ma(e);let r=0,n=this.ids.length-1;for(;r<n;){const e=r+n>>1;this.ids[e]>=t?n=e:r=e+1}const o=[];for(;this.ids[r]===t;)o.push({index:this.positions[3*r],start:this.positions[3*r+1],end:this.positions[3*r+2]}),r++;return o}static serialize(e,t){const r=new Float64Array(e.ids),n=new Uint32Array(e.positions);return Ra(r,n,0,r.length-1),t&&t.push(r.buffer,n.buffer),{ids:r,positions:n}}static deserialize(e){const t=new Oa;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function Ma(e){const t=+e;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:Ia(String(e))}function Ra(e,t,r,n){for(;r<n;){const o=e[r+n>>1];let i=r-1,a=n+1;for(;;){do{i++}while(e[i]<o);do{a--}while(e[a]>o);if(i>=a)break;La(e,i,a),La(t,3*i,3*a),La(t,3*i+1,3*a+1),La(t,3*i+2,3*a+2)}a-r<n-a?(Ra(e,t,r,a),r=a+1):(Ra(e,t,a+1,n),n=a)}}function La(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}Yo(Oa,"FeaturePositionMap");class Fa{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,t){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,t),this.initialized=!0),!!this.location}}class za extends Fa{constructor(e){super(e),this.current=0}set(e,t,r){this.fetchUniformLocation(e,t)&&this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Da extends Fa{constructor(e){super(e),this.current=[0,0,0,0]}set(e,t,r){this.fetchUniformLocation(e,t)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3])))}}class Na extends Fa{constructor(e){super(e),this.current=It.transparent}set(e,t,r){this.fetchUniformLocation(e,t)&&(r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a)))}}const Ba=new Float32Array(16),Ua=new Float32Array(9),Va=new Float32Array(4);function Wa(e){return[Li(255*e.r,255*e.g),Li(255*e.b,255*e.a)]}class qa{constructor(e,t,r){this.value=e,this.uniformNames=t.map((e=>"u_".concat(e))),this.type=r}setUniform(e,t,r,n,o){t.set(e,o,n.constantOr(this.value))}getBinding(e,t){return"color"===this.type?new Na(e):new za(e)}}class Ha{constructor(e,t){this.uniformNames=t.map((e=>"u_".concat(e))),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,t,r,n,o){const i="u_pattern"===o||"u_dash"===o?this.pattern:"u_pixel_ratio"===o?this.pixelRatio:null;i&&t.set(e,o,i)}getBinding(e,t){return"u_pattern"===t||"u_dash"===t?new Da(e):new za(e)}}class Ga{constructor(e,t,r,n){this.expression=e,this.type=r,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:"a_".concat(e),type:"Float32",components:"color"===r?2:1,offset:0}))),this.paintVertexArray=new n}populatePaintArray(e,t,r,n,o,i){const a=this.paintVertexArray.length,s=this.expression.evaluate(new wi(0),t,{},o,n,i);this.paintVertexArray.resize(e),this._setPaintValue(a,e,s)}updatePaintArray(e,t,r,n,o){const i=this.expression.evaluate({zoom:0},r,n,void 0,o);this._setPaintValue(e,t,i)}_setPaintValue(e,t,r){if("color"===this.type){const n=Wa(r);for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,n[0],n[1])}else{for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,r);this.maxValue=Math.max(this.maxValue,Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ka{constructor(e,t,r,n,o,i){this.expression=e,this.uniformNames=t.map((e=>"u_".concat(e,"_t"))),this.type=r,this.useIntegerZoom=n,this.zoom=o,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:"a_".concat(e),type:"Float32",components:"color"===r?4:2,offset:0}))),this.paintVertexArray=new i}populatePaintArray(e,t,r,n,o,i){const a=this.expression.evaluate(new wi(this.zoom),t,{},o,n,i),s=this.expression.evaluate(new wi(this.zoom+1),t,{},o,n,i),l=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(l,e,a,s)}updatePaintArray(e,t,r,n,o){const i=this.expression.evaluate({zoom:this.zoom},r,n,void 0,o),a=this.expression.evaluate({zoom:this.zoom+1},r,n,void 0,o);this._setPaintValue(e,t,i,a)}_setPaintValue(e,t,r,n){if("color"===this.type){const o=Wa(r),i=Wa(n);for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,o[0],o[1],i[0],i[1])}else{for(let o=e;o<t;o++)this.paintVertexArray.emplace(o,r,n);this.maxValue=Math.max(this.maxValue,Math.abs(r),Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t,r,n,o){const i=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,a=C(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);t.set(e,o,a)}getBinding(e,t){return new za(e)}}class Xa{constructor(e,t,r,n,o){this.expression=e,this.layerId=o,this.paintVertexAttributes=("array"===r?ka:Sa).members;for(let i=0;i<t.length;++i);this.paintVertexArray=new n}populatePaintArray(e,t,r){const n=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(n,e,t.patterns&&t.patterns[this.layerId],r)}updatePaintArray(e,t,r,n,o,i){this._setPaintValues(e,t,r.patterns&&r.patterns[this.layerId],i)}_setPaintValues(e,t,r,n){if(!n||!r)return;const o=n[r];if(!o)return;const{tl:i,br:a,pixelRatio:s}=o;for(let l=e;l<t;l++)this.paintVertexArray.emplace(l,i[0],i[1],a[0],a[1],s)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Za{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;this.binders={},this._buffers=[];const n=[];for(const o in e.paint._values){if(!r(o))continue;const i=e.paint.get(o);if(!(i instanceof ji&&Fn(i.property.specification)))continue;const a=$a(o,e.type),s=i.value,l=i.property.specification.type,c=!!i.property.useIntegerZoom,u="line-dasharray"===o||o.endsWith("pattern"),d="line-dasharray"===o&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==s.kind||d)if("source"===s.kind||d||u){const t=ts(o,l,"source");this.binders[o]=u?new Xa(s,a,l,t,e.id):new Ga(s,a,l,t),n.push("/a_".concat(o))}else{const e=ts(o,l,"composite");this.binders[o]=new Ka(s,a,l,c,t,e),n.push("/z_".concat(o))}else this.binders[o]=u?new Ha(s.value,a):new qa(s.value,a,l),n.push("/u_".concat(o))}this.cacheKey=n.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof Ga||t instanceof Ka?t.maxValue:0}populatePaintArrays(e,t,r,n,o,i){for(const a in this.binders){const s=this.binders[a];(s instanceof Ga||s instanceof Ka||s instanceof Xa)&&s.populatePaintArray(e,t,r,n,o,i)}}setConstantPatternPositions(e){for(const t in this.binders){const r=this.binders[t];r instanceof Ha&&r.setConstantPatternPositions(e)}}updatePaintArrays(e,t,r,n,o,i){let a=!1;for(const s in e){const l=t.getPositions(s);for(const t of l){const l=r.feature(t.index);for(const r in this.binders){const c=this.binders[r];if((c instanceof Ga||c instanceof Ka||c instanceof Xa)&&!0===c.expression.isStateDependent){const u=n.paint.get(r);c.expression=u.value,c.updatePaintArray(t.start,t.end,l,e[s],o,i),a=!0}}}}return a}defines(){const e=[];for(const t in this.binders){const r=this.binders[t];(r instanceof qa||r instanceof Ha)&&e.push(...r.uniformNames.map((e=>"#define HAS_UNIFORM_".concat(e))))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const r=this.binders[t];if(r instanceof Ga||r instanceof Ka||r instanceof Xa)for(let t=0;t<r.paintVertexAttributes.length;t++)e.push(r.paintVertexAttributes[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const r=this.binders[t];if(r instanceof qa||r instanceof Ha||r instanceof Ka)for(const t of r.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const t=[];for(const r in this.binders){const n=this.binders[r];if(n instanceof qa||n instanceof Ha||n instanceof Ka)for(const o of n.uniformNames)t.push({name:o,property:r,binding:n.getBinding(e,o)})}return t}setUniforms(e,t,r,n,o){for(const{name:i,property:a,binding:s}of r)this.binders[a].setUniform(e,s,o,n.get(a),i)}updatePaintBuffers(){this._buffers=[];for(const e in this.binders){const t=this.binders[e];(t instanceof Ga||t instanceof Ka||t instanceof Xa)&&t.paintVertexBuffer&&this._buffers.push(t.paintVertexBuffer)}}upload(e){for(const t in this.binders){const r=this.binders[t];(r instanceof Ga||r instanceof Ka||r instanceof Xa)&&r.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof Ga||t instanceof Ka||t instanceof Xa)&&t.destroy()}}}class Ya{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;this.programConfigurations={};for(const n of e)this.programConfigurations[n.id]=new Za(n,t,r);this.needsUpload=!1,this._featureMap=new Oa,this._bufferOffset=0}populatePaintArrays(e,t,r,n,o,i,a){for(const s in this.programConfigurations)this.programConfigurations[s].populatePaintArrays(e,t,n,o,i,a);void 0!==t.id&&this._featureMap.add(t.id,r,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,r,n,o){for(const i of r)this.needsUpload=this.programConfigurations[i.id].updatePaintArrays(e,this._featureMap,t,i,n,o)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const Ja={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function $a(e,t){return Ja[e]||[e.replace("".concat(t,"-"),"").replace(/-/g,"_")]}const Qa={"line-pattern":{source:Gi,composite:Gi},"fill-pattern":{source:Gi,composite:Gi},"fill-extrusion-pattern":{source:Gi,composite:Gi},"line-dasharray":{source:Ki,composite:Ki}},es={color:{source:da,composite:Hi},number:{source:aa,composite:da}};function ts(e,t,r){const n=Qa[e];return n&&n[r]||es[t][r]}Yo(qa,"ConstantBinder"),Yo(Ha,"PatternConstantBinder"),Yo(Ga,"SourceExpressionBinder"),Yo(Xa,"PatternCompositeBinder"),Yo(Ka,"CompositeExpressionBinder"),Yo(Za,"ProgramConfiguration",{omit:["_buffers"]}),Yo(Ya,"ProgramConfigurationSet");const rs="-transition";class ns extends Qe{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new Ai(t.layout)),t.paint)){this._transitionablePaint=new Ti(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Pi(t.paint)}}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=t&&this._validate(Vo,"layers.".concat(this.id,".layout.").concat(e),e,t,r)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return N(e,rs)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t&&this._validate(Uo,"layers.".concat(this.id,".paint.").concat(e),e,t,r))return!1;if(N(e,rs))return this._transitionablePaint.setTransition(e.slice(0,-11),t||void 0),!1;{const r=this._transitionablePaint._values[e],n=r.value.isDataDriven(),o=r.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const i=this._transitionablePaint._values[e].value,a=i.isDataDriven(),s=N(e,"pattern")||"line-dasharray"===e;return a||n||s||this._handleOverridablePaintPropertyUpdate(e,o,i)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,t,r){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),U(e,((e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)))}_validate(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!o||!1!==o.validate)&&qo(this,e.call(Bo,{key:t,layerType:this.type,objectKey:r,value:n,styleSpec:et,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof ji&&Fn(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=ho(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const os=Ni([{name:"a_pos",components:2,type:"Int16"}],4),is=Ni([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class as{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.segments=e}prepareSegment(e,t,r,n){let o=this.segments[this.segments.length-1];return e>as.MAX_VERTEX_ARRAY_LENGTH&&q("Max vertices per segment is ".concat(as.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(e)),(!o||o.vertexLength+e>as.MAX_VERTEX_ARRAY_LENGTH||o.sortKey!==n)&&(o={vertexOffset:t.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==n&&(o.sortKey=n),this.segments.push(o)),o}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,r,n){return new as([{vertexOffset:e,primitiveOffset:t,vertexLength:r,primitiveLength:n,vaos:{},sortKey:0}])}}as.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Yo(as,"SegmentVector");var ss=8192;class ls{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof Vl?new Vl(e.lng,e.lat):Vl.convert(e),this}setSouthWest(e){return this._sw=e instanceof Vl?new Vl(e.lng,e.lat):Vl.convert(e),this}extend(e){const t=this._sw,r=this._ne;let n,o;if(e instanceof Vl)n=e,o=e;else{if(!(e instanceof ls))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(ls.convert(e)):this.extend(Vl.convert(e)):"object"==typeof e&&null!==e&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(Vl.convert(e)):this;if(n=e._sw,o=e._ne,!n||!o)return this}return t||r?(t.lng=Math.min(n.lng,t.lng),t.lat=Math.min(n.lat,t.lat),r.lng=Math.max(o.lng,r.lng),r.lat=Math.max(o.lat,r.lat)):(this._sw=new Vl(n.lng,n.lat),this._ne=new Vl(o.lng,o.lat)),this}getCenter(){return new Vl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Vl(this.getWest(),this.getNorth())}getSouthEast(){return new Vl(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:t,lat:r}=Vl.convert(e);let n=this._sw.lng<=t&&t<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=t&&t>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&n}static convert(e){return!e||e instanceof ls?e:new ls(e)}}var cs=1e-6,us="undefined"!=typeof Float32Array?Float32Array:Array;function ds(){var e=new us(9);return us!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function hs(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=r[0],p=r[1],f=r[2],m=r[3],g=r[4],y=r[5],v=r[6],b=r[7],x=r[8];return e[0]=h*n+p*a+f*c,e[1]=h*o+p*s+f*u,e[2]=h*i+p*l+f*d,e[3]=m*n+g*a+y*c,e[4]=m*o+g*s+y*u,e[5]=m*i+g*l+y*d,e[6]=v*n+b*a+x*c,e[7]=v*o+b*s+x*u,e[8]=v*i+b*l+x*d,e}function ps(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fs(e,t){var r=t[0],n=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],p=t[11],f=t[12],m=t[13],g=t[14],y=t[15],v=r*s-n*a,b=r*l-o*a,x=r*c-i*a,_=n*l-o*s,w=n*c-i*s,S=o*c-i*l,k=u*m-d*f,T=u*g-h*f,E=u*y-p*f,C=d*g-h*m,A=d*y-p*m,j=h*y-p*g,P=v*j-b*A+x*C+_*E-w*T+S*k;return P?(e[0]=(s*j-l*A+c*C)*(P=1/P),e[1]=(o*A-n*j-i*C)*P,e[2]=(m*S-g*w+y*_)*P,e[3]=(h*w-d*S-p*_)*P,e[4]=(l*E-a*j-c*T)*P,e[5]=(r*j-o*E+i*T)*P,e[6]=(g*x-f*S-y*b)*P,e[7]=(u*S-h*x+p*b)*P,e[8]=(a*A-s*E+c*k)*P,e[9]=(n*E-r*A-i*k)*P,e[10]=(f*w-m*x+y*v)*P,e[11]=(d*x-u*w-p*v)*P,e[12]=(s*T-a*C-l*k)*P,e[13]=(r*C-n*T+o*k)*P,e[14]=(m*b-f*_-g*v)*P,e[15]=(u*_-d*b+h*v)*P,e):null}function ms(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],p=t[10],f=t[11],m=t[12],g=t[13],y=t[14],v=t[15],b=r[0],x=r[1],_=r[2],w=r[3];return e[0]=b*n+x*s+_*d+w*m,e[1]=b*o+x*l+_*h+w*g,e[2]=b*i+x*c+_*p+w*y,e[3]=b*a+x*u+_*f+w*v,e[4]=(b=r[4])*n+(x=r[5])*s+(_=r[6])*d+(w=r[7])*m,e[5]=b*o+x*l+_*h+w*g,e[6]=b*i+x*c+_*p+w*y,e[7]=b*a+x*u+_*f+w*v,e[8]=(b=r[8])*n+(x=r[9])*s+(_=r[10])*d+(w=r[11])*m,e[9]=b*o+x*l+_*h+w*g,e[10]=b*i+x*c+_*p+w*y,e[11]=b*a+x*u+_*f+w*v,e[12]=(b=r[12])*n+(x=r[13])*s+(_=r[14])*d+(w=r[15])*m,e[13]=b*o+x*l+_*h+w*g,e[14]=b*i+x*c+_*p+w*y,e[15]=b*a+x*u+_*f+w*v,e}function gs(e,t,r){var n,o,i,a,s,l,c,u,d,h,p,f,m=r[0],g=r[1],y=r[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],p=t[10],f=t[11],e[0]=n=t[0],e[1]=o,e[2]=i,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=h,e[10]=p,e[11]=f,e[12]=n*m+s*g+d*y+t[12],e[13]=o*m+l*g+h*y+t[13],e[14]=i*m+c*g+p*y+t[14],e[15]=a*m+u*g+f*y+t[15]),e}function ys(e,t,r){var n=r[0],o=r[1],i=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function vs(e,t,r){var n=Math.sin(r),o=Math.cos(r),i=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*o+c*n,e[5]=a*o+u*n,e[6]=s*o+d*n,e[7]=l*o+h*n,e[8]=c*o-i*n,e[9]=u*o-a*n,e[10]=d*o-s*n,e[11]=h*o-l*n,e}function bs(e,t,r){var n=Math.sin(r),o=Math.cos(r),i=t[0],a=t[1],s=t[2],l=t[3],c=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o-c*n,e[1]=a*o-u*n,e[2]=s*o-d*n,e[3]=l*o-h*n,e[8]=i*n+c*o,e[9]=a*n+u*o,e[10]=s*n+d*o,e[11]=l*n+h*o,e}function xs(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _s(e,t,r){var n,o,i,a=r[0],s=r[1],l=r[2],c=Math.hypot(a,s,l);return c<cs?null:(a*=c=1/c,s*=c,l*=c,n=Math.sin(t),o=Math.cos(t),e[0]=a*a*(i=1-o)+o,e[1]=s*a*i+l*n,e[2]=l*a*i-s*n,e[3]=0,e[4]=a*s*i-l*n,e[5]=s*s*i+o,e[6]=l*s*i+a*n,e[7]=0,e[8]=a*l*i+s*n,e[9]=s*l*i-a*n,e[10]=l*l*i+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var ws=ms;function Ss(){var e=new us(3);return us!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function ks(e){var t=new us(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ts(e){return Math.hypot(e[0],e[1],e[2])}function Es(e,t,r){var n=new us(3);return n[0]=e,n[1]=t,n[2]=r,n}function Cs(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function As(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function js(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function Ps(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function Is(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function Os(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function Ms(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function Rs(e,t){var r=t[0],n=t[1],o=t[2],i=r*r+n*n+o*o;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function Ls(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Fs(e,t,r){var n=t[0],o=t[1],i=t[2],a=r[0],s=r[1],l=r[2];return e[0]=o*l-i*s,e[1]=i*a-n*l,e[2]=n*s-o*a,e}function zs(e,t,r){var n=t[0],o=t[1],i=t[2],a=r[3]*n+r[7]*o+r[11]*i+r[15];return e[0]=(r[0]*n+r[4]*o+r[8]*i+r[12])/(a=a||1),e[1]=(r[1]*n+r[5]*o+r[9]*i+r[13])/a,e[2]=(r[2]*n+r[6]*o+r[10]*i+r[14])/a,e}function Ds(e,t,r){var n=r[0],o=r[1],i=r[2],a=t[0],s=t[1],l=t[2],c=o*l-i*s,u=i*a-n*l,d=n*s-o*a,h=o*d-i*u,p=i*c-n*d,f=n*u-o*c,m=2*r[3];return u*=m,d*=m,p*=2,f*=2,e[0]=a+(c*=m)+(h*=2),e[1]=s+u+p,e[2]=l+d+f,e}var Ns,Bs=As,Us=js,Vs=Ts;function Ws(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function qs(e,t){var r=t[0],n=t[1],o=t[2],i=t[3],a=r*r+n*n+o*o+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=r*a,e[1]=n*a,e[2]=o*a,e[3]=i*a,e}function Hs(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3];return e[0]=r[0]*n+r[4]*o+r[8]*i+r[12]*a,e[1]=r[1]*n+r[5]*o+r[9]*i+r[13]*a,e[2]=r[2]*n+r[6]*o+r[10]*i+r[14]*a,e[3]=r[3]*n+r[7]*o+r[11]*i+r[15]*a,e}function Gs(){var e=new us(4);return us!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Ks(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Xs(e,t,r){r*=.5;var n=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+a*s,e[1]=o*l+i*s,e[2]=i*l-o*s,e[3]=a*l-n*s,e}function Zs(e,t,r){r*=.5;var n=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l-i*s,e[1]=o*l+a*s,e[2]=i*l+n*s,e[3]=a*l-o*s,e}Ss(),Ns=new us(4),us!=Float32Array&&(Ns[0]=0,Ns[1]=0,Ns[2]=0,Ns[3]=0);var Ys=qs;Ss(),Es(1,0,0),Es(0,1,0),Gs(),Gs(),ds();const Js=Ni([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:$s}=Js,Qs=Ni([{name:"a_pos_3",components:3,type:"Int16"}]);var el=Ni([{name:"a_pos",type:"Int16",components:2}]);class tl{constructor(e,t){this.pos=e,this.dir=t}intersectsPlane(e,t,r){const n=Ls(t,this.dir);if(Math.abs(n)<1e-6)return!1;const o=((e[0]-this.pos[0])*t[0]+(e[1]-this.pos[1])*t[1]+(e[2]-this.pos[2])*t[2])/n;return r[0]=this.pos[0]+this.dir[0]*o,r[1]=this.pos[1]+this.dir[1]*o,r[2]=this.pos[2]+this.dir[2]*o,!0}closestPointOnSphere(e,t,r){if(function(e,t){var r=e[0],n=e[1],o=e[2],i=t[0],a=t[1],s=t[2];return Math.abs(r-i)<=cs*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-a)<=cs*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-s)<=cs*Math.max(1,Math.abs(o),Math.abs(s))}(this.pos,e)||0===t)return r[0]=r[1]=r[2]=0,!1;const[n,o,i]=this.dir,a=this.pos[0]-e[0],s=this.pos[1]-e[1],l=this.pos[2]-e[2],c=n*n+o*o+i*i,u=2*(a*n+s*o+l*i),d=u*u-4*c*(a*a+s*s+l*l-t*t);if(d<0){const e=Math.max(-u/2,0),c=a+n*e,d=s+o*e,h=l+i*e,p=Math.hypot(c,d,h);return r[0]=c*t/p,r[1]=d*t/p,r[2]=h*t/p,!1}{const e=(-u-Math.sqrt(d))/(2*c);if(e<0){const e=Math.hypot(a,s,l);return r[0]=a*t/e,r[1]=s*t/e,r[2]=l*t/e,!1}return r[0]=a+n*e,r[1]=s+o*e,r[2]=l+i*e,!0}}}class rl{constructor(e,t,r,n,o){this.TL=e,this.TR=t,this.BR=r,this.BL=n,this.horizon=o}static fromInvProjectionMatrix(e,t,r){const n=[-1,1,1],o=[1,1,1],i=[1,-1,1],a=[-1,-1,1],s=zs(n,n,e),l=zs(o,o,e),c=zs(i,i,e),u=zs(a,a,e);return new rl(s,l,c,u,t/r)}}class nl{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(e,t,r,n){const o=Math.pow(2,r),i=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((r=>{const i=Hs([],r,e),a=1/i[3]/t*o;return function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}(i,i,[a,a,n?1/i[3]:a,a])})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((e=>{const t=Rs([],Fs([],Bs([],i[e[0]],i[e[1]]),Bs([],i[e[2]],i[e[1]]))),r=-Ls(t,i[e[1]]);return t.concat(r)}));return new nl(i,a)}}class ol{static fromPoints(e){const t=[1/0,1/0,1/0],r=[-1/0,-1/0,-1/0];for(const n of e)Ps(t,t,n),Is(r,r,n);return new ol(t,r)}static applyTransform(e,t){const r=e.getCorners();for(let n=0;n<r.length;++n)zs(r[n],r[n],t);return ol.fromPoints(r)}constructor(e,t){this.min=e,this.max=t,this.center=Os([],Cs([],this.min,this.max),.5)}quadrant(e){const t=[e%2==0,e<2],r=ks(this.min),n=ks(this.max);for(let o=0;o<t.length;o++)r[o]=t[o]?this.min[o]:this.center[o],n[o]=t[o]?this.center[o]:this.max[o];return n[2]=this.max[2],new ol(r,n)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,t=this.max;return[[e[0],e[1],e[2]],[t[0],e[1],e[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],t[2]],[e[0],t[1],t[2]]]}intersects(e){const t=this.getCorners();let r=!0;for(let n=0;n<e.planes.length;n++){const o=e.planes[n];let i=0;for(let e=0;e<t.length;e++)i+=Ls(o,t[e])+o[3]>=0;if(0===i)return 0;i!==t.length&&(r=!1)}if(r)return 2;for(let n=0;n<3;n++){let t=Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let o=0;o<e.points.length;o++){const i=e.points[o][n]-this.min[n];t=Math.min(t,i),r=Math.max(r,i)}if(r<0||t>this.max[n]-this.min[n])return 0}return 1}}const il=5,al=6,sl=ss/Math.PI/2,ll=16383,cl=64,ul=[cl,32,16],dl=-sl,hl=sl,pl=[new ol([dl,dl,dl],[hl,hl,hl]),new ol([dl,dl,dl],[0,0,hl]),new ol([0,dl,dl],[hl,0,hl]),new ol([dl,0,dl],[0,hl,hl]),new ol([0,0,dl],[hl,hl,hl])];function fl(e){return e*sl/Nl}function ml(e,t,r){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=Os([],e._camera.position,e.worldSize),i=[t,r,1,1];Hs(i,i,e.pixelMatrixInverse),Ws(i,i,1/i[3]);const a=Rs([],Bs([],i,o)),s=e.globeMatrix,l=[s[12],s[13],s[14]],c=Bs([],l,o),u=Ts(c),d=Rs([],c),h=e.worldSize/(2*Math.PI),p=Ls(d,a),f=Math.asin(h/u);if(f<Math.acos(p)){if(!n)return null;const e=[],t=[];Os(e,a,u/p),Rs(t,Bs(t,e,c)),Rs(a,Cs(a,c,Os(a,t,Math.tan(f)*u)))}const m=[];new tl(o,a).closestPointOnSphere(l,h,m);const g=Rs([],$(s,0)),y=Rs([],$(s,1)),v=Rs([],$(s,2)),b=Ls(g,m),x=Ls(y,m),_=Ls(v,m),S=w(Math.asin(-x/h));let k=w(Math.atan2(b,_));k=e.center.lng+function(e,t){const r=(t-e+180)%360-180;return r<-180?r+360:r}(e.center.lng,k);const T=ql(k),E=C(Hl(S),0,1);return new $l(T,E)}class gl{constructor(e,t,r){this.a=Bs([],e,r),this.b=Bs([],t,r),this.center=r;const n=Rs([],this.a),o=Rs([],this.b);this.angle=Math.acos(Ls(n,o))}}function yl(e,t){if(0===e.angle)return null;let r;return r=0===e.a[t]?1/e.angle*.5*Math.PI:1/e.angle*Math.atan(e.b[t]/e.a[t]/Math.sin(e.angle)-1/Math.tan(e.angle)),r<0||r>1?null:function(e,t,r,n){const o=Math.sin(r);return e*(Math.sin((1-n)*r)/o)+t*(Math.sin(n*r)/o)}(e.a[t],e.b[t],e.angle,C(r,0,1))+e.center[t]}function vl(e){if(e.z<=1)return pl[e.z+2*e.y+e.x];const t=kl(Sl(e));return ol.fromPoints(t)}function bl(e,t,r){return Os(e,e,1-r),Ms(e,e,t,r)}function xl(e,t){const r=Ml(t.zoom);if(0===r)return vl(e);const n=Sl(e),o=kl(n),i=ql(n.getWest())*t.worldSize,a=ql(n.getEast())*t.worldSize,s=Hl(n.getNorth())*t.worldSize,l=Hl(n.getSouth())*t.worldSize,c=[i,s,0],u=[a,s,0],d=[i,l,0],h=[a,l,0],p=fs([],t.globeMatrix);return zs(c,c,p),zs(u,u,p),zs(d,d,p),zs(h,h,p),o[0]=bl(o[0],d,r),o[1]=bl(o[1],h,r),o[2]=bl(o[2],u,r),o[3]=bl(o[3],c,r),ol.fromPoints(o)}function _l(e,t,r){for(const n of e)zs(n,n,t),Os(n,n,r)}function wl(e,t,r){const n=t/e.worldSize,o=e.globeMatrix;if(r.z<=1){const e=vl(r).getCorners();return _l(e,o,n),ol.fromPoints(e)}const i=Sl(r),a=kl(i);_l(a,o,n);const s=Number.MAX_VALUE,l=[-s,-s,-s],c=[s,s,s];if(i.contains(e.center)){for(const e of a)Ps(c,c,e),Is(l,l,e);l[2]=0;const t=e.point,r=[t.x*n,t.y*n,0];return Ps(c,c,r),Is(l,l,r),new ol(c,l)}const u=[o[12]*n,o[13]*n,o[14]*n],d=i.getCenter(),h=C(e.center.lat,-Yl,Yl),p=C(d.lat,-Yl,Yl),f=ql(e.center.lng),m=Hl(h);let g=f-ql(d.lng);const y=m-Hl(p);g>.5?g-=1:g<-.5&&(g+=1);let v=0;Math.abs(g)>Math.abs(y)?v=g>=0?1:3:(v=y>=0?0:2,Ms(u,u,[o[4]*n,o[5]*n,o[6]*n],-Math.sin(_(y>=0?i.getSouth():i.getNorth()))*sl));const b=a[v],x=a[(v+1)%4],w=new gl(b,x,u),S=[yl(w,0)||b[0],yl(w,1)||b[1],yl(w,2)||b[2]],k=Ml(e.zoom);if(k>0){const n=function(e,t,r,n,o){let{x:i,y:a,z:s}=e;const l=1/(1<<s);let c=i*l,u=c+l,d=a*l,h=d+l,p=0;const f=(c+u)/2-n;return f>.5?p=-1:f<-.5&&(p=1),c=((c+p)*t-(n*=t))*r+n,u=((u+p)*t-n)*r+n,d=(d*t-(o*=t))*r+o,h=(h*t-o)*r+o,[[c,h,0],[u,h,0],[u,d,0],[c,d,0]]}(r,t,e._pixelsPerMercatorPixel,f,m);for(let e=0;e<a.length;e++)bl(a[e],n[e],k);const o=Cs([],n[v],n[(v+1)%4]);Os(o,o,.5),bl(S,o,k)}for(const _ of a)Ps(c,c,_),Is(l,l,_);return c[2]=Math.min(b[2],x[2]),Ps(c,c,S),Is(l,l,S),new ol(c,l)}function Sl(e){let{x:t,y:r,z:n}=e;const o=1/(1<<n),i=new Vl(Kl(t*o),Xl((r+1)*o)),a=new Vl(Kl((t+1)*o),Xl(r*o));return new ls(i,a)}function kl(e){const t=_(e.getNorth()),r=_(e.getSouth()),n=Math.cos(t),o=Math.cos(r),i=Math.sin(t),a=Math.sin(r),s=e.getWest(),l=e.getEast();return[Tl(o,a,s),Tl(o,a,l),Tl(n,i,l),Tl(n,i,s)]}function Tl(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:sl;return r=_(r),[e*Math.sin(r)*n,-t*n,e*Math.cos(r)*n]}function El(e,t,r){return Tl(Math.cos(_(e)),Math.sin(_(e)),t,r)}function Cl(e,t,r,n){const o=1<<r.z,i=(e/ss+r.x)/o;return El(Xl((t/ss+r.y)/o),Kl(i),n)}function Al(e){let{min:t,max:r}=e;return ll/Math.max(r[0]-t[0],r[1]-t[1],r[2]-t[2])}const jl=new Float64Array(16);function Pl(e){const t=Al(e),r=xs(jl,[t,t,t]);return gs(r,r,((n=[])[0]=-(o=e.min)[0],n[1]=-o[1],n[2]=-o[2],n));var n,o}function Il(e){const t=(n=e.min,(r=jl)[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r);var r,n;const o=1/Al(e);return ys(t,t,[o,o,o])}function Ol(e,t,r,n,o){const i=function(e){const t=ss/(2*Math.PI);return e/(2*Math.PI)/t}(r),a=[e,t,-r/(2*Math.PI)],s=ps(new Float64Array(16));return gs(s,s,a),ys(s,s,[i,i,i]),vs(s,s,_(-o)),bs(s,s,_(-n)),s}function Ml(e){return A(il,al,e)}function Rl(e,t){const r=El(t.lat,t.lng),n=function(e){const t=El(e._center.lat,e._center.lng);let r=Fs([],Es(0,1,0),t);const n=_s([],-e.angle,t);r=zs(r,r,n),_s(n,-e._pitch,r);const o=Rs([],t);return Os(o,o,fl(e.cameraToCenterDistance/e.pixelsPerMeter)),zs(o,o,n),Cs([],t,o)}(e);return a=(o=As([],n,r))[0],s=o[1],l=o[2],c=(i=r)[0],u=i[1],d=i[2],p=(h=Math.sqrt(a*a+s*s+l*l)*Math.sqrt(c*c+u*u+d*d))&&Ls(o,i)/h,Math.acos(Math.min(Math.max(p,-1),1));var o,i,a,s,l,c,u,d,h,p}function Ll(e,t){return Rl(e,t)>Math.PI/2*1.01}const Fl=_(85),zl=Math.cos(Fl),Dl=Math.sin(Fl),Nl=6371008.8,Bl=2*Math.PI*Nl;class Ul{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: (".concat(e,", ").concat(t,")"));if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ul(j(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}distanceTo(e){const t=Math.PI/180,r=this.lat*t,n=e.lat*t,o=Math.sin(r)*Math.sin(n)+Math.cos(r)*Math.cos(n)*Math.cos((e.lng-this.lng)*t);return Nl*Math.acos(Math.min(o,1))}toBounds(){const e=360*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/40075017,t=e/Math.cos(Math.PI/180*this.lat);return new ls(new Ul(this.lng-t,this.lat-e),new Ul(this.lng+t,this.lat+e))}toEcef(e){const t=fl(e);return El(this.lat,this.lng,sl+t)}static convert(e){if(e instanceof Ul)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Ul(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Ul(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Vl=Ul;function Wl(e){return Bl*Math.cos(e*Math.PI/180)}function ql(e){return(180+e)/360}function Hl(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Gl(e,t){return e/Wl(t)}function Kl(e){return 360*e-180}function Xl(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function Zl(e,t){return e*Wl(Xl(t))}const Yl=85.051129;function Jl(e){return 1/Math.cos(e*Math.PI/180)}class $l{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=+e,this.y=+t,this.z=+r}static fromLngLat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=Vl.convert(e);return new $l(ql(r.lng),Hl(r.lat),Gl(t,r.lat))}toLngLat(){return new Vl(Kl(this.x),Xl(this.y))}toAltitude(){return Zl(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Bl*Jl(Xl(this.y))}}function Ql(e,t,r,n,o,i,a,s,l){const c=(t+n)/2,u=(r+o)/2,d=new v(c,u);s(d),function(e,t,r,n,o,i){const a=r-o,s=n-i;return Math.abs((n-t)*a-(r-e)*s)/Math.hypot(a,s)}(d.x,d.y,i.x,i.y,a.x,a.y)>=l?(Ql(e,t,r,c,u,i,d,s,l),Ql(e,c,u,n,o,d,a,s,l)):e.push(a)}function ec(e,t,r){let n=e[0],o=n.x,i=n.y;t(n);const a=[n];for(let s=1;s<e.length;s++){const l=e[s],{x:c,y:u}=l;t(l),Ql(a,o,i,c,u,n,l,t,r),o=c,i=u,n=l}return a}function tc(e,t,r,n){if(n(t,r)){const o=t.add(r)._mult(.5);tc(e,t,o,n),tc(e,o,r,n)}else e.push(r)}function rc(e,t){let r=e[0];const n=[r];for(let o=1;o<e.length;o++){const i=e[o];tc(n,r,i,t),r=i}return n}const nc=Math.pow(2,14)-1,oc=-nc-1;function ic(e,t){const r=Math.round(e.x*t),n=Math.round(e.y*t);return e.x=C(r,oc,nc),e.y=C(n,oc,nc),(r<e.x||r>e.x+1||n<e.y||n>e.y+1)&&q("Geometry exceeds allowed extent, reduce your vector tile buffer size"),e}function ac(e,t,r){const n=e.loadGeometry(),o=e.extent,i=ss/o;if(t&&r&&r.projection.isReprojectedInTileSpace){const i=1<<t.z,{scale:a,x:s,y:l,projection:c}=r,u=e=>{const r=Kl((t.x+e.x/o)/i),n=Xl((t.y+e.y/o)/i),u=c.project(r,n);e.x=(u.x*a-s)*o,e.y=(u.y*a-l)*o};for(let t=0;t<n.length;t++)if(1!==e.type)n[t]=ec(n[t],u,1);else{const e=[];for(const r of n[t])r.x<0||r.x>=o||r.y<0||r.y>=o||(u(r),e.push(r));n[t]=e}}for(const a of n)for(const e of a)ic(e,i);return n}function sc(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?ac(e):[]}}function lc(e,t,r,n,o){e.emplaceBack(2*t+(n+1)/2,2*r+(o+1)/2)}function cc(e,t,r){const n=16384;e.emplaceBack(t.x,t.y,t.z,r[0]*n,r[1]*n,r[2]*n)}class uc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new Ui,this.indexArray=new na,this.segments=new as,this.programConfigurations=new Ya(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r,n){const o=this.layers[0],i=[];let a=null;"circle"===o.type&&(a=o.layout.get("circle-sort-key"));for(const{feature:l,id:c,index:u,sourceLayerIndex:d}of e){const e=this.layers[0]._featureFilter.needGeometry,t=sc(l,e);if(!this.layers[0]._featureFilter.filter(new wi(this.zoom),t,r))continue;const o=a?a.evaluate(t,{},r):void 0,s={id:c,properties:l.properties,type:l.type,sourceLayerIndex:d,index:u,geometry:e?t.geometry:ac(l,r,n),patterns:{},sortKey:o};i.push(s)}a&&i.sort(((e,t)=>e.sortKey-t.sortKey));let s=null;"globe"===n.projection.name&&(this.globeExtVertexArray=new Xi,s=n.projection);for(const l of i){const{geometry:n,index:o,sourceLayerIndex:i}=l,a=e[o].feature;this.addFeature(l,n,o,t.availableImages,r,s),t.featureIndex.insert(a,n,o,i,this.index)}}update(e,t,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,os.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,is.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,t,r,n,o,i){for(const a of t)for(const t of a){const r=t.x,n=t.y;if(r<0||r>=ss||n<0||n>=ss)continue;if(i){const e=i.projectTilePoint(r,n,o),t=i.upVector(o,r,n),a=this.globeExtVertexArray;cc(a,e,t),cc(a,e,t),cc(a,e,t),cc(a,e,t)}const a=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),s=a.vertexLength;lc(this.layoutVertexArray,r,n,-1,-1),lc(this.layoutVertexArray,r,n,1,-1),lc(this.layoutVertexArray,r,n,1,1),lc(this.layoutVertexArray,r,n,-1,1),this.indexArray.emplaceBack(s,s+1,s+2),this.indexArray.emplaceBack(s,s+2,s+3),a.vertexLength+=4,a.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,{},n,o)}}function dc(e,t){for(let r=0;r<e.length;r++)if(xc(t,e[r]))return!0;for(let r=0;r<t.length;r++)if(xc(e,t[r]))return!0;return!!mc(e,t)}function hc(e,t,r){return!!xc(e,t)||!!yc(t,e,r)}function pc(e,t){if(1===e.length)return bc(t,e[0]);for(let r=0;r<t.length;r++){const n=t[r];for(let t=0;t<n.length;t++)if(xc(e,n[t]))return!0}for(let r=0;r<e.length;r++)if(bc(t,e[r]))return!0;for(let r=0;r<t.length;r++)if(mc(e,t[r]))return!0;return!1}function fc(e,t,r){if(e.length>1){if(mc(e,t))return!0;for(let n=0;n<t.length;n++)if(yc(t[n],e,r))return!0}for(let n=0;n<e.length;n++)if(yc(e[n],t,r))return!0;return!1}function mc(e,t){if(0===e.length||0===t.length)return!1;for(let r=0;r<e.length-1;r++){const n=e[r],o=e[r+1];for(let e=0;e<t.length-1;e++)if(gc(n,o,t[e],t[e+1]))return!0}return!1}function gc(e,t,r,n){return H(e,r,n)!==H(t,r,n)&&H(e,t,r)!==H(e,t,n)}function yc(e,t,r){const n=r*r;if(1===t.length)return e.distSqr(t[0])<n;for(let o=1;o<t.length;o++)if(vc(e,t[o-1],t[o])<n)return!0;return!1}function vc(e,t,r){const n=t.distSqr(r);if(0===n)return e.distSqr(t);const o=((e.x-t.x)*(r.x-t.x)+(e.y-t.y)*(r.y-t.y))/n;return e.distSqr(o<0?t:o>1?r:r.sub(t)._mult(o)._add(t))}function bc(e,t){let r,n,o,i=!1;for(let a=0;a<e.length;a++){r=e[a];for(let e=0,a=r.length-1;e<r.length;a=e++)n=r[e],o=r[a],n.y>t.y!=o.y>t.y&&t.x<(o.x-n.x)*(t.y-n.y)/(o.y-n.y)+n.x&&(i=!i)}return i}function xc(e,t){let r=!1;for(let n=0,o=e.length-1;n<e.length;o=n++){const i=e[n],a=e[o];i.y>t.y!=a.y>t.y&&t.x<(a.x-i.x)*(t.y-i.y)/(a.y-i.y)+i.x&&(r=!r)}return r}function _c(e,t,r,n,o){for(const a of e)if(t<=a.x&&r<=a.y&&n>=a.x&&o>=a.y)return!0;const i=[new v(t,r),new v(t,o),new v(n,o),new v(n,r)];if(e.length>2)for(const a of i)if(xc(e,a))return!0;for(let a=0;a<e.length-1;a++)if(wc(e[a],e[a+1],i))return!0;return!1}function wc(e,t,r){const n=r[0],o=r[2];if(e.x<n.x&&t.x<n.x||e.x>o.x&&t.x>o.x||e.y<n.y&&t.y<n.y||e.y>o.y&&t.y>o.y)return!1;const i=H(e,t,r[0]);return i!==H(e,t,r[1])||i!==H(e,t,r[2])||i!==H(e,t,r[3])}function Sc(e,t,r){const n=t.paint.get(e).value;return"constant"===n.kind?n.value:r.programConfigurations.get(t.id).getMaxValue(e)}function kc(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Tc(e,t,r,n,o){if(!t[0]&&!t[1])return e;const i=v.convert(t)._mult(o);"viewport"===r&&i._rotate(-n);const a=[];for(let s=0;s<e.length;s++)a.push(e[s].sub(i));return a}function Ec(e,t,r,n){const o=v.convert(e)._mult(n);return"viewport"===t&&o._rotate(-r),o}Yo(uc,"CircleBucket",{omit:["layers"]});const Cc=new Ri({"circle-sort-key":new Oi(et.layout_circle["circle-sort-key"])});var Ac={paint:new Ri({"circle-radius":new Oi(et.paint_circle["circle-radius"]),"circle-color":new Oi(et.paint_circle["circle-color"]),"circle-blur":new Oi(et.paint_circle["circle-blur"]),"circle-opacity":new Oi(et.paint_circle["circle-opacity"]),"circle-translate":new Ii(et.paint_circle["circle-translate"]),"circle-translate-anchor":new Ii(et.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ii(et.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ii(et.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Oi(et.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Oi(et.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Oi(et.paint_circle["circle-stroke-opacity"])}),layout:Cc};function jc(e,t,r,n,o,i,a,s,l){if(i&&e.queryGeometry.isAboveHorizon)return!1;i&&(l*=e.pixelToTileUnitsFactor);const c=e.tileID.canonical,u=r.projection.upVectorScale(c,r.center.lat,r.worldSize).metersToTile;for(const d of t)for(const t of d){const d=t.add(s),h=o&&r.elevation?r.elevation.exaggeration()*o.getElevationAt(d.x,d.y,!0):0,p=r.projection.projectTilePoint(d.x,d.y,c);if(h>0){const e=r.projection.upVector(c,d.x,d.y);p.x+=e[0]*u*h,p.y+=e[1]*u*h,p.z+=e[2]*u*h}const f=i?d:Pc(p.x,p.y,p.z,n),m=i?e.tilespaceRays.map((e=>Mc(e,h))):e.queryGeometry.screenGeometry,g=Hs([],[p.x,p.y,p.z,1],n);if(!a&&i?l*=g[3]/r.cameraToCenterDistance:a&&!i&&(l*=r.cameraToCenterDistance/g[3]),i){const e=Xl((t.y/ss+c.y)/(1<<c.z));l/=r.projection.pixelsPerMeter(e,1)/Gl(1,e)}if(hc(m,f,l))return!0}return!1}function Pc(e,t,r,n){const o=Hs([],[e,t,r,1],n);return new v(o[0]/o[3],o[1]/o[3])}const Ic=Es(0,0,0),Oc=Es(0,0,1);function Mc(e,t){const r=Ss();return Ic[2]=t,e.intersectsPlane(Ic,Oc,r),new v(r[0],r[1])}class Rc extends uc{}function Lc(e,t,r,n){let{width:o,height:i}=t;if(n){if(n instanceof Uint8ClampedArray)n=new Uint8Array(n.buffer);else if(n.length!==o*i*r)throw new RangeError("mismatched image size")}else n=new Uint8Array(o*i*r);return e.width=o,e.height=i,e.data=n,e}function Fc(e,t,r){const{width:n,height:o}=t;n===e.width&&o===e.height||(zc(e,t,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,n),height:Math.min(e.height,o)},r),e.width=n,e.height=o,e.data=t.data)}function zc(e,t,r,n,o,i){if(0===o.width||0===o.height)return t;if(o.width>e.width||o.height>e.height||r.x>e.width-o.width||r.y>e.height-o.height)throw new RangeError("out of range source coordinates for image copy");if(o.width>t.width||o.height>t.height||n.x>t.width-o.width||n.y>t.height-o.height)throw new RangeError("out of range destination coordinates for image copy");const a=e.data,s=t.data;for(let l=0;l<o.height;l++){const c=((r.y+l)*e.width+r.x)*i,u=((n.y+l)*t.width+n.x)*i;for(let e=0;e<o.width*i;e++)s[u+e]=a[c+e]}return t}Yo(Rc,"HeatmapBucket",{omit:["layers"]});class Dc{constructor(e,t){Lc(this,e,1,t)}resize(e){Fc(this,new Dc(e),1)}clone(){return new Dc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,r,n,o){zc(e,t,r,n,o,1)}}class Nc{constructor(e,t){Lc(this,e,4,t)}resize(e){Fc(this,new Nc(e),4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Nc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,r,n,o){zc(e,t,r,n,o,4)}}Yo(Dc,"AlphaImage"),Yo(Nc,"RGBAImage");var Bc={paint:new Ri({"heatmap-radius":new Oi(et.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Oi(et.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ii(et.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Mi(et.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ii(et.paint_heatmap["heatmap-opacity"])})};function Uc(e){const t={},r=e.resolution||256,n=e.clips?e.clips.length:1,o=e.image||new Nc({width:r,height:n}),i=(r,n,i)=>{t[e.evaluationKey]=i;const a=e.expression.evaluate(t);o.data[r+n+0]=Math.floor(255*a.r/a.a),o.data[r+n+1]=Math.floor(255*a.g/a.a),o.data[r+n+2]=Math.floor(255*a.b/a.a),o.data[r+n+3]=Math.floor(255*a.a)};if(e.clips)for(let a=0,s=0;a<n;++a,s+=4*r)for(let t=0,n=0;t<r;t++,n+=4){const o=t/(r-1),{start:l,end:c}=e.clips[a];i(s,n,l*(1-o)+c*o)}else for(let a=0,s=0;a<r;a++,s+=4)i(0,s,a/(r-1));return o}var Vc={paint:new Ri({"hillshade-illumination-direction":new Ii(et.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ii(et.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ii(et.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ii(et.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ii(et.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ii(et.paint_hillshade["hillshade-accent-color"])})};const Wc=Ni([{name:"a_pos",components:2,type:"Int16"}],4),{members:qc}=Wc;var Hc={exports:{}};function Gc(e,t,r){r=r||2;var n,o,i,a,s,l,c,u=t&&t.length,d=u?t[0]*r:e.length,h=Kc(e,0,d,r,!0),p=[];if(!h||h.next===h.prev)return p;if(u&&(h=function(e,t,r,n){var o,i,a,s=[];for(o=0,i=t.length;o<i;o++)(a=Kc(e,t[o]*n,o<i-1?t[o+1]*n:e.length,n,!1))===a.next&&(a.steiner=!0),s.push(ou(a));for(s.sort(eu),o=0;o<s.length;o++)r=tu(s[o],r);return r}(e,t,h,r)),e.length>80*r){n=i=e[0],o=a=e[1];for(var f=r;f<d;f+=r)(s=e[f])<n&&(n=s),(l=e[f+1])<o&&(o=l),s>i&&(i=s),l>a&&(a=l);c=0!==(c=Math.max(i-n,a-o))?32767/c:0}return Zc(h,p,r,n,o,c,0),p}function Kc(e,t,r,n,o){var i,a;if(o===yu(e,t,r,n)>0)for(i=t;i<r;i+=n)a=fu(i,e[i],e[i+1],a);else for(i=r-n;i>=t;i-=n)a=fu(i,e[i],e[i+1],a);return a&&lu(a,a.next)&&(mu(a),a=a.next),a}function Xc(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!lu(n,n.next)&&0!==su(n.prev,n,n.next))n=n.next;else{if(mu(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function Zc(e,t,r,n,o,i,a){if(e){!a&&i&&function(e,t,r,n){var o=e;do{0===o.z&&(o.z=nu(o.x,o.y,t,r,n)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,function(e){var t,r,n,o,i,a,s,l,c=1;do{for(r=e,e=null,i=null,a=0;r;){for(a++,n=r,s=0,t=0;t<c&&(s++,n=n.nextZ);t++);for(l=c;s>0||l>0&&n;)0!==s&&(0===l||!n||r.z<=n.z)?(o=r,r=r.nextZ,s--):(o=n,n=n.nextZ,l--),i?i.nextZ=o:e=o,o.prevZ=i,i=o;r=n}i.nextZ=null,c*=2}while(a>1)}(o)}(e,n,o,i);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,i?Jc(e,n,o,i):Yc(e))t.push(s.i/r|0),t.push(e.i/r|0),t.push(l.i/r|0),mu(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?Zc(e=$c(Xc(e),t,r),t,r,n,o,i,2):2===a&&Qc(e,t,r,n,o,i):Zc(Xc(e),t,r,n,o,i,1);break}}}function Yc(e){var t=e.prev,r=e,n=e.next;if(su(t,r,n)>=0)return!1;for(var o=t.x,i=r.x,a=n.x,s=t.y,l=r.y,c=n.y,u=o<i?o<a?o:a:i<a?i:a,d=s<l?s<c?s:c:l<c?l:c,h=o>i?o>a?o:a:i>a?i:a,p=s>l?s>c?s:c:l>c?l:c,f=n.next;f!==t;){if(f.x>=u&&f.x<=h&&f.y>=d&&f.y<=p&&iu(o,s,i,l,a,c,f.x,f.y)&&su(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Jc(e,t,r,n){var o=e.prev,i=e,a=e.next;if(su(o,i,a)>=0)return!1;for(var s=o.x,l=i.x,c=a.x,u=o.y,d=i.y,h=a.y,p=s<l?s<c?s:c:l<c?l:c,f=u<d?u<h?u:h:d<h?d:h,m=s>l?s>c?s:c:l>c?l:c,g=u>d?u>h?u:h:d>h?d:h,y=nu(p,f,t,r,n),v=nu(m,g,t,r,n),b=e.prevZ,x=e.nextZ;b&&b.z>=y&&x&&x.z<=v;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==o&&b!==a&&iu(s,u,l,d,c,h,b.x,b.y)&&su(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==o&&x!==a&&iu(s,u,l,d,c,h,x.x,x.y)&&su(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;b&&b.z>=y;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==o&&b!==a&&iu(s,u,l,d,c,h,b.x,b.y)&&su(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;x&&x.z<=v;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==o&&x!==a&&iu(s,u,l,d,c,h,x.x,x.y)&&su(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function $c(e,t,r){var n=e;do{var o=n.prev,i=n.next.next;!lu(o,i)&&cu(o,n,n.next,i)&&hu(o,i)&&hu(i,o)&&(t.push(o.i/r|0),t.push(n.i/r|0),t.push(i.i/r|0),mu(n),mu(n.next),n=e=i),n=n.next}while(n!==e);return Xc(n)}function Qc(e,t,r,n,o,i){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&au(a,s)){var l=pu(a,s);return a=Xc(a,a.next),l=Xc(l,l.next),Zc(a,t,r,n,o,i,0),void Zc(l,t,r,n,o,i,0)}s=s.next}a=a.next}while(a!==e)}function eu(e,t){return e.x-t.x}function tu(e,t){var r=function(e,t){var r,n=t,o=e.x,i=e.y,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var s=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=o&&s>a&&(a=s,r=n.x<n.next.x?n:n.next,s===o))return r}n=n.next}while(n!==t);if(!r)return null;var l,c=r,u=r.x,d=r.y,h=1/0;n=r;do{o>=n.x&&n.x>=u&&o!==n.x&&iu(i<d?o:a,i,u,d,i<d?a:o,i,n.x,n.y)&&(l=Math.abs(i-n.y)/(o-n.x),hu(n,e)&&(l<h||l===h&&(n.x>r.x||n.x===r.x&&ru(r,n)))&&(r=n,h=l)),n=n.next}while(n!==c);return r}(e,t);if(!r)return t;var n=pu(r,e);return Xc(n,n.next),Xc(r,r.next)}function ru(e,t){return su(e.prev,e,t.prev)<0&&su(t.next,e,e.next)<0}function nu(e,t,r,n,o){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*o|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*o|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ou(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function iu(e,t,r,n,o,i,a,s){return(o-a)*(t-s)>=(e-a)*(i-s)&&(e-a)*(n-s)>=(r-a)*(t-s)&&(r-a)*(i-s)>=(o-a)*(n-s)}function au(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&cu(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(hu(e,t)&&hu(t,e)&&function(e,t){var r=e,n=!1,o=(e.x+t.x)/2,i=(e.y+t.y)/2;do{r.y>i!=r.next.y>i&&r.next.y!==r.y&&o<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(su(e.prev,e,t.prev)||su(e,t.prev,t))||lu(e,t)&&su(e.prev,e,e.next)>0&&su(t.prev,t,t.next)>0)}function su(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function lu(e,t){return e.x===t.x&&e.y===t.y}function cu(e,t,r,n){var o=du(su(e,t,r)),i=du(su(e,t,n)),a=du(su(r,n,e)),s=du(su(r,n,t));return o!==i&&a!==s||!(0!==o||!uu(e,r,t))||!(0!==i||!uu(e,n,t))||!(0!==a||!uu(r,e,n))||!(0!==s||!uu(r,t,n))}function uu(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function du(e){return e>0?1:e<0?-1:0}function hu(e,t){return su(e.prev,e,e.next)<0?su(e,t,e.next)>=0&&su(e,e.prev,t)>=0:su(e,t,e.prev)<0||su(e,e.next,t)<0}function pu(e,t){var r=new gu(e.i,e.x,e.y),n=new gu(t.i,t.x,t.y),o=e.next,i=t.prev;return e.next=t,t.prev=e,r.next=o,o.prev=r,n.next=r,r.prev=n,i.next=n,n.prev=i,n}function fu(e,t,r,n){var o=new gu(e,t,r);return n?(o.next=n.next,o.prev=n,n.next.prev=o,n.next=o):(o.prev=o,o.next=o),o}function mu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function gu(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function yu(e,t,r,n){for(var o=0,i=t,a=r-n;i<r;i+=n)o+=(e[a]-e[i])*(e[i+1]+e[a+1]),a=i;return o}Hc.exports=Gc,Hc.exports.default=Gc,Gc.deviation=function(e,t,r,n){var o=t&&t.length,i=Math.abs(yu(e,0,o?t[0]*r:e.length,r));if(o)for(var a=0,s=t.length;a<s;a++)i-=Math.abs(yu(e,t[a]*r,a<s-1?t[a+1]*r:e.length,r));var l=0;for(a=0;a<n.length;a+=3){var c=n[a]*r,u=n[a+1]*r,d=n[a+2]*r;l+=Math.abs((e[c]-e[d])*(e[u+1]-e[c+1])-(e[c]-e[u])*(e[d+1]-e[c+1]))}return 0===i&&0===l?0:Math.abs((l-i)/i)},Gc.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,o=0;o<e.length;o++){for(var i=0;i<e[o].length;i++)for(var a=0;a<t;a++)r.vertices.push(e[o][i][a]);o>0&&r.holes.push(n+=e[o-1].length)}return r};var vu=h(Hc.exports);function bu(e,t,r,n,o){xu(e,t,r||0,n||e.length-1,o||wu)}function xu(e,t,r,n,o){for(;n>r;){if(n-r>600){var i=n-r+1,a=t-r+1,s=Math.log(i),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(i-l)/i)*(a-i/2<0?-1:1);xu(e,t,Math.max(r,Math.floor(t-a*l/i+c)),Math.min(n,Math.floor(t+(i-a)*l/i+c)),o)}var u=e[t],d=r,h=n;for(_u(e,r,t),o(e[n],u)>0&&_u(e,r,n);d<h;){for(_u(e,d,h),d++,h--;o(e[d],u)<0;)d++;for(;o(e[h],u)>0;)h--}0===o(e[r],u)?_u(e,r,h):_u(e,++h,n),h<=t&&(r=h+1),t<=h&&(n=h-1)}}function _u(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function wu(e,t){return e<t?-1:e>t?1:0}function Su(e,t){const r=e.length;if(r<=1)return[e];const n=[];let o,i;for(let a=0;a<r;a++){const t=G(e[a]);0!==t&&(e[a].area=Math.abs(t),void 0===i&&(i=t<0),i===t<0?(o&&n.push(o),o=[e[a]]):o.push(e[a]))}if(o&&n.push(o),t>1)for(let a=0;a<n.length;a++)n[a].length<=t||(bu(n[a],t,1,n[a].length-1,ku),n[a]=n[a].slice(0,t));return n}function ku(e,t){return t.area-e.area}function Tu(e,t,r){const n=r.patternDependencies;let o=!1;for(const i of t){const t=i.paint.get("".concat(e,"-pattern"));t.isConstant()||(o=!0);const r=t.constantOr(null);r&&(o=!0,n[r]=!0)}return o}function Eu(e,t,r,n,o){const i=o.patternDependencies;for(const a of t){const t=a.paint.get("".concat(e,"-pattern")).value;if("constant"!==t.kind){let e=t.evaluate({zoom:n},r,{},o.availableImages);e=e&&e.name?e.name:e,i[e]=!0,r.patterns[a.id]=e}}return r}class Cu{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ui,this.indexArray=new na,this.indexArray2=new ca,this.programConfigurations=new Ya(e.layers,e.zoom),this.segments=new as,this.segments2=new as,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.projection=e.projection}populate(e,t,r,n){this.hasPattern=Tu("fill",this.layers,t);const o=this.layers[0].layout.get("fill-sort-key"),i=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,u=sc(a,e);if(!this.layers[0]._featureFilter.filter(new wi(this.zoom),u,r))continue;const d=o?o.evaluate(u,{},r,t.availableImages):void 0,h={id:s,properties:a.properties,type:a.type,sourceLayerIndex:c,index:l,geometry:e?u.geometry:ac(a,r,n),patterns:{},sortKey:d};i.push(h)}o&&i.sort(((e,t)=>e.sortKey-t.sortKey));for(const a of i){const{geometry:n,index:o,sourceLayerIndex:i}=a;if(this.hasPattern){const e=Eu("fill",this.layers,a,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(a,n,o,r,{},t.availableImages);t.featureIndex.insert(e[o].feature,n,o,i,this.index)}}update(e,t,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r,n)}addFeatures(e,t,r,n,o){for(const i of this.patternFeatures)this.addFeature(i,i.geometry,i.index,t,r,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,qc),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,r,n,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];for(const a of Su(t,500)){let e=0;for(const s of a)e+=s.length;const t=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),r=t.vertexLength,n=[],o=[];for(const s of a){if(0===s.length)continue;s!==a[0]&&o.push(n.length/2);const e=this.segments2.prepareSegment(s.length,this.layoutVertexArray,this.indexArray2),t=e.vertexLength;this.layoutVertexArray.emplaceBack(s[0].x,s[0].y),this.indexArray2.emplaceBack(t+s.length-1,t),n.push(s[0].x),n.push(s[0].y);for(let r=1;r<s.length;r++)this.layoutVertexArray.emplaceBack(s[r].x,s[r].y),this.indexArray2.emplaceBack(t+r-1,t+r),n.push(s[r].x),n.push(s[r].y);e.vertexLength+=s.length,e.primitiveLength+=s.length}const i=vu(n,o);for(let a=0;a<i.length;a+=3)this.indexArray.emplaceBack(r+i[a],r+i[a+1],r+i[a+2]);t.vertexLength+=e,t.primitiveLength+=i.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,o,i,n)}}Yo(Cu,"FillBucket",{omit:["layers","patternFeatures"]});const Au=new Ri({"fill-sort-key":new Oi(et.layout_fill["fill-sort-key"])});var ju={paint:new Ri({"fill-antialias":new Ii(et.paint_fill["fill-antialias"]),"fill-opacity":new Oi(et.paint_fill["fill-opacity"]),"fill-color":new Oi(et.paint_fill["fill-color"]),"fill-outline-color":new Oi(et.paint_fill["fill-outline-color"]),"fill-translate":new Ii(et.paint_fill["fill-translate"]),"fill-translate-anchor":new Ii(et.paint_fill["fill-translate-anchor"]),"fill-pattern":new Oi(et.paint_fill["fill-pattern"])}),layout:Au};const Pu=Ni([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Iu=Ni([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Ou=Ni([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Mu}=Pu;var Ru={},Lu=g,Fu=zu;function zu(e,t,r,n,o){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=n,this._values=o,e.readFields(Du,this,t)}function Du(e,t,r){1==e?t.id=r.readVarint():2==e?function(e,t){for(var r=e.readVarint()+e.pos;e.pos<r;){var n=t._keys[e.readVarint()],o=t._values[e.readVarint()];t.properties[n]=o}}(r,t):3==e?t.type=r.readVarint():4==e&&(t._geometry=r.pos)}function Nu(e){for(var t,r,n=0,o=0,i=e.length,a=i-1;o<i;a=o++)n+=((r=e[a]).x-(t=e[o]).x)*(t.y+r.y);return n}zu.types=["Unknown","Point","LineString","Polygon"],zu.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,r=e.readVarint()+e.pos,n=1,o=0,i=0,a=0,s=[];e.pos<r;){if(o<=0){var l=e.readVarint();n=7&l,o=l>>3}if(o--,1===n||2===n)i+=e.readSVarint(),a+=e.readSVarint(),1===n&&(t&&s.push(t),t=[]),t.push(new Lu(i,a));else{if(7!==n)throw new Error("unknown command "+n);t&&t.push(t[0].clone())}}return t&&s.push(t),s},zu.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,n=0,o=0,i=0,a=1/0,s=-1/0,l=1/0,c=-1/0;e.pos<t;){if(n<=0){var u=e.readVarint();r=7&u,n=u>>3}if(n--,1===r||2===r)(o+=e.readSVarint())<a&&(a=o),o>s&&(s=o),(i+=e.readSVarint())<l&&(l=i),i>c&&(c=i);else if(7!==r)throw new Error("unknown command "+r)}return[a,l,s,c]},zu.prototype.toGeoJSON=function(e,t,r){var n,o,i=this.extent*Math.pow(2,r),a=this.extent*e,s=this.extent*t,l=this.loadGeometry(),c=zu.types[this.type];function u(e){for(var t=0;t<e.length;t++){var r=e[t];e[t]=[360*(r.x+a)/i-180,360/Math.PI*Math.atan(Math.exp((180-360*(r.y+s)/i)*Math.PI/180))-90]}}switch(this.type){case 1:var d=[];for(n=0;n<l.length;n++)d[n]=l[n][0];u(l=d);break;case 2:for(n=0;n<l.length;n++)u(l[n]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var r,n,o=[],i=0;i<t;i++){var a=Nu(e[i]);0!==a&&(void 0===n&&(n=a<0),n===a<0?(r&&o.push(r),r=[e[i]]):r.push(e[i]))}return r&&o.push(r),o}(l),n=0;n<l.length;n++)for(o=0;o<l[n].length;o++)u(l[n][o])}1===l.length?l=l[0]:c="Multi"+c;var h={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(h.id=this.id),h};var Bu=Fu,Uu=Vu;function Vu(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Wu,this,t),this.length=this._features.length}function Wu(e,t,r){15===e?t.version=r.readVarint():1===e?t.name=r.readString():5===e?t.extent=r.readVarint():2===e?t._features.push(r.pos):3===e?t._keys.push(r.readString()):4===e&&t._values.push(function(e){for(var t=null,r=e.readVarint()+e.pos;e.pos<r;){var n=e.readVarint()>>3;t=1===n?e.readString():2===n?e.readFloat():3===n?e.readDouble():4===n?e.readVarint64():5===n?e.readVarint():6===n?e.readSVarint():7===n?e.readBoolean():null}return t}(r))}Vu.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Bu(this._pbf,t,this.extent,this._keys,this._values)};var qu=Uu;function Hu(e,t,r){if(3===e){var n=new qu(r,r.readVarint()+r.pos);n.length&&(t[n.name]=n)}}var Gu=Ru.VectorTile=function(e,t){this.layers=e.readFields(Hu,{},t)},Ku=Ru.VectorTileFeature=Fu;function Xu(e,t,r,n){const o=[],i=0===n?(e,t,r,n,o,i)=>{e.push(new v(i,r+(i-t)/(n-t)*(o-r)))}:(e,t,r,n,o,i)=>{e.push(new v(t+(i-r)/(o-r)*(n-t),i))};for(const a of e){const e=[];for(const o of a){if(o.length<=2)continue;const a=[];for(let e=0;e<o.length-1;e++){const s=o[e].x,l=o[e].y,c=o[e+1].x,u=o[e+1].y,d=0===n?s:l,h=0===n?c:u;d<t?h>t&&i(a,s,l,c,u,t):d>r?h<r&&i(a,s,l,c,u,r):a.push(o[e]),h<t&&d>=t&&i(a,s,l,c,u,t),h>r&&d<=r&&i(a,s,l,c,u,r)}let s=o[o.length-1];const l=0===n?s.x:s.y;l>=t&&l<=r&&a.push(s),a.length&&(s=a[a.length-1],a[0].x===s.x&&a[0].y===s.y||a.push(a[0]),e.push(a))}e.length&&o.push(e)}return o}Ru.VectorTileLayer=Uu;const Zu=Ku.types,Yu=Math.pow(2,13);function Ju(e,t,r,n,o,i,a,s){e.emplaceBack((t<<1)+a,(r<<1)+i,(Math.floor(n*Yu)<<1)+o,Math.round(s))}function $u(e,t,r){const n=16384;e.emplaceBack(t.x,t.y,t.z,r[0]*n,r[1]*n,r[2]*n)}class Qu{constructor(){this.acc=new v(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new v(e.x,e.y),this.max=new v(e.x,e.y))}append(e,t){this.currentPolyCount.edges++,this.acc._add(e);const r=this.min,n=this.max;e.x<r.x?r.x=e.x:e.x>n.x&&(n.x=e.x),e.y<r.y?r.y=e.y:e.y>n.y&&(n.y=e.y),((0===e.x||e.x===ss)&&e.x===t.x)!=((0===e.y||e.y===ss)&&e.y===t.y)&&this.processBorderOverlap(e,t),t.x<0!=e.x<0&&this.addBorderIntersection(0,Ir(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>ss!=e.x>ss&&this.addBorderIntersection(1,Ir(t.y,e.y,(ss-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,Ir(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>ss!=e.y>ss&&this.addBorderIntersection(3,Ir(t.x,e.x,(ss-t.y)/(e.y-t.y)))}addBorderIntersection(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const r=this.borders[e];t<r[0]&&(r[0]=t),t>r[1]&&(r[1]=t)}processBorderOverlap(e,t){if(e.x===t.x){if(e.y===t.y)return;const r=0===e.x?0:1;this.addBorderIntersection(r,t.y),this.addBorderIntersection(r,e.y)}else{const r=0===e.y?2:3;this.addBorderIntersection(r,t.x),this.addBorderIntersection(r,e.x)}}centroid(){const e=this.polyCount.reduce(((e,t)=>e+t.edges),0);return 0!==e?this.acc.div(e)._round():new v(0,0)}span(){return new v(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((e,t)=>e+ +(t[0]!==Number.MAX_VALUE)),0)}}class ed{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.layoutVertexArray=new Wi,this.centroidVertexArray=new wa,this.indexArray=new na,this.programConfigurations=new Ya(e.layers,e.zoom),this.segments=new as,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.enableTerrain=e.enableTerrain}populate(e,t,r,n){this.features=[],this.hasPattern=Tu("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(e){const t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/ss/(1<<e.z)}(r),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:o,id:i,index:a,sourceLayerIndex:s}of e){const e=this.layers[0]._featureFilter.needGeometry,l=sc(o,e);if(!this.layers[0]._featureFilter.filter(new wi(this.zoom),l,r))continue;const c={id:i,sourceLayerIndex:s,index:a,geometry:e?l.geometry:ac(o,r,n),properties:o.properties,type:o.type,patterns:{}},u=this.layoutVertexArray.length;this.hasPattern?this.features.push(Eu("fill-extrusion",this.layers,c,this.zoom,t)):this.addFeature(c,c.geometry,a,r,{},t.availableImages,n),t.featureIndex.insert(o,c.geometry,a,s,this.index,u)}this.sortBorders()}addFeatures(e,t,r,n,o){for(const i of this.features){const{geometry:e}=i;this.addFeature(i,e,i.index,t,r,n,o)}this.sortBorders()}update(e,t,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Mu),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,Ou.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Iu.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,r,n,o,i,a){const s=[new v(0,0),new v(ss,ss)],l=a.projection,c="globe"===l.name,u=this.enableTerrain&&!c?new Qu:null,d="Polygon"===Zu[e.type];c&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Xi);const h=Su(t,500);for(let g=h.length-1;g>=0;g--){const e=h[g];(0===e.length||(p=e[0]).every((e=>e.x<=0))||p.every((e=>e.x>=ss))||p.every((e=>e.y<=0))||p.every((e=>e.y>=ss)))&&h.splice(g,1)}var p;let f;if(c)f=ld(h,s,n);else{f=[];for(const e of h)f.push({polygon:e,bounds:s})}const m=d?this.edgeRadius:0;for(const{polygon:g,bounds:y}of f){let e=0,t=0;for(const n of g)d&&!n[0].equals(n[n.length-1])&&n.push(n[0]),t+=d?n.length-1:n.length;const r=this.segments.prepareSegment((d?5:4)*t,this.layoutVertexArray,this.indexArray);if(d){const t=[],o=[];e=r.vertexLength;for(const e of g){let i,a;e.length&&e!==g[0]&&o.push(t.length/2),i=e[1].sub(e[0])._perp()._unit();for(let o=1;o<e.length;o++){const s=e[o],u=e[o===e.length-1?1:o+1];let{x:d,y:h}=s;if(m){a=u.sub(s)._perp()._unit();const e=i.add(a)._unit(),t=m*Math.min(4,1/(i.x*e.x+i.y*e.y));d+=t*e.x,h+=t*e.y,i=a}Ju(this.layoutVertexArray,d,h,0,0,1,1,0),r.vertexLength++,t.push(s.x,s.y),c&&$u(this.layoutVertexExtArray,l.projectTilePoint(d,h,n),l.upVector(n,d,h))}}const i=vu(t,o);for(let n=0;n<i.length;n+=3)this.indexArray.emplaceBack(e+i[n],e+i[n+2],e+i[n+1]),r.primitiveLength++}for(const o of g){u&&o.length&&u.startRing(o[0]);let t,i,a,s=o.length>4&&id(o[o.length-2],o[0],o[1]),h=m?rd(o[o.length-2],o[0],o[1],m):0;i=o[1].sub(o[0])._perp()._unit();let p=!0;for(let f=1,g=0;f<o.length;f++){let v=o[f-1],b=o[f];const x=o[f===o.length-1?1:f+1];if(u&&d&&u.currentPolyCount.top++,od(b,v,y)){m&&(i=x.sub(b)._perp()._unit(),p=!p);continue}u&&u.append(b,v);const _=b.sub(v)._perp(),w=_.x/(Math.abs(_.x)+Math.abs(_.y)),S=_.y>0?1:0,k=v.dist(b);if(g+k>32768&&(g=0),m){a=x.sub(b)._perp()._unit();let e=nd(v,b,x,td(i,a),m);isNaN(e)&&(e=0);const t=b.sub(v)._unit();v=v.add(t.mult(h))._round(),b=b.add(t.mult(-e))._round(),h=e,i=a}const T=r.vertexLength,E=o.length>4&&id(v,b,x);let C=ad(g,s,p);if(Ju(this.layoutVertexArray,v.x,v.y,w,S,0,0,C),Ju(this.layoutVertexArray,v.x,v.y,w,S,0,1,C),g+=k,C=ad(g,E,!p),s=E,Ju(this.layoutVertexArray,b.x,b.y,w,S,0,0,C),Ju(this.layoutVertexArray,b.x,b.y,w,S,0,1,C),r.vertexLength+=4,this.indexArray.emplaceBack(T+0,T+1,T+2),this.indexArray.emplaceBack(T+1,T+3,T+2),r.primitiveLength+=2,m){const n=e+(1===f?o.length-2:f-2),i=1===f?e:n+1;if(this.indexArray.emplaceBack(T+1,n,T+3),this.indexArray.emplaceBack(n,i,T+3),r.primitiveLength+=2,void 0===t&&(t=T),!od(x,o[f],y)){const e=f===o.length-1?t:r.vertexLength;this.indexArray.emplaceBack(T+2,T+3,e),this.indexArray.emplaceBack(T+3,e+1,e),this.indexArray.emplaceBack(T+3,i,e+1),r.primitiveLength+=3}p=!p}if(c){const e=this.layoutVertexExtArray,t=l.projectTilePoint(v.x,v.y,n),r=l.projectTilePoint(b.x,b.y,n),o=l.upVector(n,v.x,v.y),i=l.upVector(n,b.x,b.y);$u(e,t,o),$u(e,t,o),$u(e,r,i),$u(e,r,i)}}d&&(e+=o.length-1)}}if(u&&u.polyCount.length>0){if(u.borders){u.vertexArrayOffset=this.centroidVertexArray.length;const e=u.borders,t=this.featuresOnBorder.push(u)-1;for(let r=0;r<4;r++)e[r][0]!==Number.MAX_VALUE&&this.borders[r].push(t)}this.encodeCentroid(u.borders?void 0:u.centroid(),u)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,o,i,n)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort(((t,r)=>this.featuresOnBorder[t].borders[e][0]-this.featuresOnBorder[r].borders[e][0]))}encodeCentroid(e,t){let r,n,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e)if(0!==e.y){const o=t.span()._mult(this.tileToMeter);r=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(o.x/10)),n=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(o.y/10))}else r=Math.ceil(7*(e.x+450)),n=0;else r=0,n=+o;let i=o?this.centroidVertexArray.length:t.vertexArrayOffset;for(const a of t.polyCount){o&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*a.edges+a.top);for(let e=0;e<a.top;e++)this.centroidVertexArray.emplace(i++,r,n);for(let e=0;e<2*a.edges;e++)this.centroidVertexArray.emplace(i++,0,n),this.centroidVertexArray.emplace(i++,r,n)}}}function td(e,t){const r=e.add(t)._unit();return e.x*r.x+e.y*r.y}function rd(e,t,r,n){const o=t.sub(e)._perp()._unit(),i=r.sub(t)._perp()._unit();return nd(e,t,r,td(o,i),n)}function nd(e,t,r,n,o){const i=Math.sqrt(1-n*n);return Math.min(e.dist(t)/3,t.dist(r)/3,o*i/n)}function od(e,t,r){return e.x<r[0].x&&t.x<r[0].x||e.x>r[1].x&&t.x>r[1].x||e.y<r[0].y&&t.y<r[0].y||e.y>r[1].y&&t.y>r[1].y}function id(e,t,r){if(e.x<0||e.x>=ss||t.x<0||t.x>=ss||r.x<0||r.x>=ss)return!1;const n=r.sub(t),o=n.perp(),i=e.sub(t);return(n.x*i.x+n.y*i.y)/Math.sqrt((n.x*n.x+n.y*n.y)*(i.x*i.x+i.y*i.y))>-.866&&o.x*i.x+o.y*i.y<0}function ad(e,t,r){const n=t?2|e:-3&e;return r?1|n:-2&n}function sd(){const e=Math.PI/32,t=Math.tan(e),r=Nl;return r*Math.sqrt(1+2*t*t)-r}function ld(e,t,r){const n=1<<r.z,o=Kl(r.x/n),i=Kl((r.x+1)/n),a=Xl(r.y/n),s=Xl((r.y+1)/n);return function(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0;const a=[];if(!e.length||!r||!n)return a;const s=(e,t)=>{for(const r of e)a.push({polygon:r,bounds:t})},l=Math.ceil(Math.log2(r)),c=Math.ceil(Math.log2(n)),u=l-c,d=[];for(let f=0;f<Math.abs(u);f++)d.push(u>0?0:1);for(let f=0;f<Math.min(l,c);f++)d.push(0),d.push(1);let h=e;if(h=Xu(h,t[0].y-o,t[1].y+o,1),h=Xu(h,t[0].x-o,t[1].x+o,0),!h.length)return a;const p=[];for(d.length?p.push({polygons:h,bounds:t,depth:0}):s(h,t);p.length;){const e=p.pop(),t=e.depth,r=d[t],n=e.bounds[0],a=e.bounds[1],l=0===r?n.x:n.y,c=0===r?a.x:a.y,u=i?i(r,l,c):.5*(l+c),h=Xu(e.polygons,l-o,u+o,r),f=Xu(e.polygons,u-o,c+o,r);if(h.length){const e=[n,new v(0===r?u:a.x,1===r?u:a.y)];d.length>t+1?p.push({polygons:h,bounds:e,depth:t+1}):s(h,e)}if(f.length){const e=[new v(0===r?u:n.x,1===r?u:n.y),a];d.length>t+1?p.push({polygons:f,bounds:e,depth:t+1}):s(f,e)}}return a}(e,t,Math.ceil((i-o)/11.25),Math.ceil((a-s)/11.25),1,((e,t,o)=>{if(0===e)return.5*(t+o);{const e=Xl((r.y+t/ss)/n);return(Hl(.5*(Xl((r.y+o/ss)/n)+e))*n-r.y)*ss}}))}Yo(ed,"FillExtrusionBucket",{omit:["layers","features"]}),Yo(Qu,"PartMetadata");const cd=new Ri({"fill-extrusion-edge-radius":new Ii(et["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var ud={paint:new Ri({"fill-extrusion-opacity":new Ii(et["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Oi(et["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ii(et["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ii(et["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Oi(et["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Oi(et["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Oi(et["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ii(et["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ii(et["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ii(et["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Ii(et["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:cd};function dd(e,t,r){var n=2*Math.PI*6378137/256/Math.pow(2,r);return[e*n-2*Math.PI*6378137/2,t*n-2*Math.PI*6378137/2]}class hd{constructor(e,t,r){this.z=e,this.x=t,this.y=r,this.key=md(0,e,e,t,r)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t){const r=function(e,t,r){var n=dd(256*e,256*(t=Math.pow(2,r)-t-1),r),o=dd(256*(e+1),256*(t+1),r);return n[0]+","+n[1]+","+o[0]+","+o[1]}(this.x,this.y,this.z),n=function(e,t,r){let n,o="";for(let i=e;i>0;i--)n=1<<i-1,o+=(t&n?1:0)+(r&n?2:0);return o}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",n).replace("{bbox-epsg-3857}",r)}toString(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}class pd{constructor(e,t){this.wrap=e,this.canonical=t,this.key=md(e,t.z,t.z,t.x,t.y)}}class fd{constructor(e,t,r,n,o){this.overscaledZ=e,this.wrap=t,this.canonical=new hd(r,+n,+o),this.key=0===t&&e===r?this.canonical.key:md(t,e,r,n,o)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const t=this.canonical.z-e;return e>this.canonical.z?new fd(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new fd(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return md(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);{const r=this.canonical.z-e;return md(this.wrap*+t,e,e,this.canonical.x>>r,this.canonical.y>>r)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new fd(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,r=2*this.canonical.x,n=2*this.canonical.y;return[new fd(t,this.wrap,t,r,n),new fd(t,this.wrap,t,r+1,n),new fd(t,this.wrap,t,r,n+1),new fd(t,this.wrap,t,r+1,n+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new fd(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new fd(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new pd(this.wrap,this.canonical)}toString(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}}function md(e,t,r,n,o){const i=1<<Math.min(r,22);let a=i*(o%i)+n%i;return e&&r<22&&(a+=i*i*((e<0?-2*e-1:2*e)%(1<<2*(22-r)))),16*(32*a+r)+(t-r)}Yo(hd,"CanonicalTileID"),Yo(fd,"OverscaledTileID",{omit:["projMatrix"]});class gd extends v{constructor(e,t,r){super(e,t),this.z=r}}function yd(e,t){return e.x*t.x+e.y*t.y}function vd(e,t){if(1===e.length){let r=0;const n=t[r++];let o;for(;!o||n.equals(o);)if(o=t[r++],!o)return 1/0;for(;r<t.length;r++){const i=t[r],a=e[0],s=o.sub(n),l=i.sub(n),c=a.sub(n),u=yd(s,s),d=yd(s,l),h=yd(l,l),p=yd(c,s),f=yd(c,l),m=u*h-d*d,g=(h*p-d*f)/m,y=(u*f-d*p)/m,v=n.z*(1-g-y)+o.z*g+i.z*y;if(isFinite(v))return v}return 1/0}{let e=1/0;for(const r of t)e=Math.min(e,r.z);return e}}function bd(e,t,r,n,o,i,a,s){const l=a*o.getElevationAt(e,t,!0,!0),c=0!==i[0],u=c?0===i[1]?a*(i[0]/7-450):a*function(e,t,r){const n=Math.floor(t[0]/8),o=Math.floor(t[1]/8),i=10*(t[0]-8*n),a=10*(t[1]-8*o),s=e.getElevationAt(n,o,!0,!0),l=e.getMeterToDEM(r),c=Math.floor(.5*(i*l-1)),u=Math.floor(.5*(a*l-1)),d=e.tileCoordToPixel(n,o),h=2*c+1,p=2*u+1,f=function(e,t,r,n,o){return[e.getElevationAtPixel(t,r,!0),e.getElevationAtPixel(t+o,r,!0),e.getElevationAtPixel(t,r+o,!0),e.getElevationAtPixel(t+n,r+o,!0)]}(e,d.x-c,d.y-u,h,p),m=Math.abs(f[0]-f[1]),g=Math.abs(f[2]-f[3]),y=Math.abs(f[0]-f[2])+Math.abs(f[1]-f[3]),v=Math.min(.25,.5*l*(m+g)/h),b=Math.min(.25,.5*l*y/p);return s+Math.max(v*i,b*a)}(o,i,s):l;return{base:l+(0===r)?-1:r,top:c?Math.max(u+n,l+r+2):l+n}}const xd=Ni([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:_d}=xd,wd=Ni([{name:"a_packed",components:4,type:"Float32"}]),{members:Sd}=wd,kd=Ku.types,Td=Math.cos(Math.PI/180*37.5);class Ed{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((e=>{this.gradients[e.id]={}})),this.layoutVertexArray=new qi,this.layoutVertexArray2=new Hi,this.indexArray=new na,this.programConfigurations=new Ya(e.layers,e.zoom),this.segments=new as,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r,n){this.hasPattern=Tu("line",this.layers,t);const o=this.layers[0].layout.get("line-sort-key"),i=[];for(const{feature:c,id:u,index:d,sourceLayerIndex:h}of e){const e=this.layers[0]._featureFilter.needGeometry,t=sc(c,e);if(!this.layers[0]._featureFilter.filter(new wi(this.zoom),t,r))continue;const a=o?o.evaluate(t,{},r):void 0,s={id:u,properties:c.properties,type:c.type,sourceLayerIndex:h,index:d,geometry:e?t.geometry:ac(c,r,n),patterns:{},sortKey:a};i.push(s)}o&&i.sort(((e,t)=>e.sortKey-t.sortKey));const{lineAtlas:a,featureIndex:s}=t,l=this.addConstantDashes(a);for(const c of i){const{geometry:n,index:o,sourceLayerIndex:i}=c;if(l&&this.addFeatureDashes(c,a),this.hasPattern){const e=Eu("line",this.layers,c,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(c,n,o,r,a.positions,t.availableImages);s.insert(e[o].feature,n,o,i,this.index)}}addConstantDashes(e){let t=!1;for(const r of this.layers){const n=r.paint.get("line-dasharray").value,o=r.layout.get("line-cap").value;if("constant"!==n.kind||"constant"!==o.kind)t=!0;else{const t=o.value,r=n.value;if(!r)continue;e.addDash(r,t)}}return t}addFeatureDashes(e,t){const r=this.zoom;for(const n of this.layers){const o=n.paint.get("line-dasharray").value,i=n.layout.get("line-cap").value;if("constant"===o.kind&&"constant"===i.kind)continue;let a,s;if("constant"===o.kind){if(a=o.value,!a)continue}else a=o.evaluate({zoom:r},e);s="constant"===i.kind?i.value:i.evaluate({zoom:r},e),t.addDash(a,s),e.patterns[n.id]=t.getKey(a,s)}}update(e,t,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r,n)}addFeatures(e,t,r,n,o){for(const i of this.patternFeatures)this.addFeature(i,i.geometry,i.index,t,r,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Sd)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,_d),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,r,n,o,i){const a=this.layers[0].layout,s=a.get("line-join").evaluate(e,{}),l=a.get("line-cap").evaluate(e,{}),c=a.get("line-miter-limit"),u=a.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const d of t)this.addLine(d,e,s,l,c,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,o,i,n)}addLine(e,t,r,n,o,i){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===kd[t.type];let s=e.length;for(;s>=2&&e[s-1].equals(e[s-2]);)s--;let l=0;for(;l<s-1&&e[l].equals(e[l+1]);)l++;if(s<(a?3:2))return;"bevel"===r&&(o=1.05);const c=this.overscaling<=16?15*ss/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let d,h,p,f,m;this.e1=this.e2=-1,a&&(d=e[s-2],m=e[l].sub(d)._unit()._perp());for(let g=l;g<s;g++){if(p=g===s-1?a?e[l+1]:void 0:e[g+1],p&&e[g].equals(p))continue;m&&(f=m),d&&(h=d),d=e[g],m=p?p.sub(d)._unit()._perp():f,f=f||m;let t=f.add(m);0===t.x&&0===t.y||t._unit();const y=f.x*m.x+f.y*m.y,v=t.x*m.x+t.y*m.y,b=0!==v?1/v:1/0,x=2*Math.sqrt(2-2*v),_=v<Td&&h&&p,w=f.x*m.y-f.y*m.x>0;if(_&&g>l){const e=d.dist(h);if(e>2*c){const t=d.sub(d.sub(h)._mult(c/e)._round());this.updateDistance(h,t),this.addCurrentVertex(t,f,0,0,u),h=t}}const S=h&&p;let k=S?r:a?"butt":n;if(S&&"round"===k&&(b<i?k="miter":b<=2&&(k="fakeround")),"miter"===k&&b>o&&(k="bevel"),"bevel"===k&&(b>2&&(k="flipbevel"),b<o&&(k="miter")),h&&this.updateDistance(h,d),"miter"===k)t._mult(b),this.addCurrentVertex(d,t,0,0,u);else if("flipbevel"===k){if(b>100)t=m.mult(-1);else{const e=b*f.add(m).mag()/f.sub(m).mag();t._perp()._mult(e*(w?-1:1))}this.addCurrentVertex(d,t,0,0,u),this.addCurrentVertex(d,t.mult(-1),0,0,u)}else if("bevel"===k||"fakeround"===k){const e=-Math.sqrt(b*b-1),t=w?e:0,r=w?0:e;if(h&&this.addCurrentVertex(d,f,t,r,u),"fakeround"===k){const e=Math.round(180*x/Math.PI/20);for(let t=1;t<e;t++){let r=t/e;if(.5!==r){const e=r-.5;r+=r*e*(r-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*e*e+(.848013+y*(.215638*y-1.06021)))}const n=m.sub(f)._mult(r)._add(f)._unit()._mult(w?-1:1);this.addHalfVertex(d,n.x,n.y,!1,w,0,u)}}p&&this.addCurrentVertex(d,m,-t,-r,u)}else if("butt"===k)this.addCurrentVertex(d,t,0,0,u);else if("square"===k){const e=h?1:-1;h||this.addCurrentVertex(d,t,e,e,u),this.addCurrentVertex(d,t,0,0,u),h&&this.addCurrentVertex(d,t,e,e,u)}else"round"===k&&(h&&(this.addCurrentVertex(d,f,0,0,u),this.addCurrentVertex(d,f,1,1,u,!0)),p&&(this.addCurrentVertex(d,m,-1,-1,u,!0),this.addCurrentVertex(d,m,0,0,u)));if(_&&g<s-1){const e=d.dist(p);if(e>2*c){const t=d.add(p.sub(d)._mult(c/e)._round());this.updateDistance(d,t),this.addCurrentVertex(t,m,0,0,u),d=t}}}}addCurrentVertex(e,t,r,n,o){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=t.y*n-t.x,s=-t.y-t.x*n;this.addHalfVertex(e,t.x+t.y*r,t.y-t.x*r,i,!1,r,o),this.addHalfVertex(e,a,s,i,!0,-n,o)}addHalfVertex(e,t,r,n,o,i,a){let{x:s,y:l}=e;this.layoutVertexArray.emplaceBack((s<<1)+(n?1:0),(l<<1)+(o?1:0),Math.round(63*t)+128,Math.round(63*r)+128,1+(0===i?0:i<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const c=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,c),a.primitiveLength++),o?this.e2=c:this.e1=c}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}Yo(Ed,"LineBucket",{omit:["layers","patternFeatures"]});const Cd=new Ri({"line-cap":new Oi(et.layout_line["line-cap"]),"line-join":new Oi(et.layout_line["line-join"]),"line-miter-limit":new Ii(et.layout_line["line-miter-limit"]),"line-round-limit":new Ii(et.layout_line["line-round-limit"]),"line-sort-key":new Oi(et.layout_line["line-sort-key"])});var Ad={paint:new Ri({"line-opacity":new Oi(et.paint_line["line-opacity"]),"line-color":new Oi(et.paint_line["line-color"]),"line-translate":new Ii(et.paint_line["line-translate"]),"line-translate-anchor":new Ii(et.paint_line["line-translate-anchor"]),"line-width":new Oi(et.paint_line["line-width"]),"line-gap-width":new Oi(et.paint_line["line-gap-width"]),"line-offset":new Oi(et.paint_line["line-offset"]),"line-blur":new Oi(et.paint_line["line-blur"]),"line-dasharray":new Oi(et.paint_line["line-dasharray"]),"line-pattern":new Oi(et.paint_line["line-pattern"]),"line-gradient":new Mi(et.paint_line["line-gradient"]),"line-trim-offset":new Ii(et.paint_line["line-trim-offset"])}),layout:Cd};const jd=new class extends Oi{possiblyEvaluate(e,t){return t=new wi(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,r,n){return t=O({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,r,n)}}(Ad.paint.properties["line-width"].specification);function Pd(e,t){return t>0?t+2*e:e}jd.useIntegerZoom=!0;const Id=Ni([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Od=Ni([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Md=Ni([{name:"a_projected_pos",components:4,type:"Float32"}],4);Ni([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Rd=Ni([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Ld=Ni([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Ni([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Fd=Ni([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),zd=Ni([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Ni([{name:"triangle",components:3,type:"Uint16"}]),Ni([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Ni([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ni([{type:"Float32",name:"offsetX"}]),Ni([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Dd=24;const Nd=128;function Bd(e,t){const{expression:r}=t;if("constant"===r.kind)return{kind:"constant",layoutSize:r.evaluate(new wi(e+1))};if("source"===r.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:n}=r;let o=0;for(;o<t.length&&t[o]<=e;)o++;o=Math.max(0,o-1);let i=o;for(;i<t.length&&t[i]<e+1;)i++;i=Math.min(t.length-1,i);const a=t[o],s=t[i];return"composite"===r.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:n}:{kind:"camera",minZoom:a,maxZoom:s,minSize:r.evaluate(new wi(a)),maxSize:r.evaluate(new wi(s)),interpolationType:n}}}function Ud(e,t,r){let{uSize:n,uSizeT:o}=t,{lowerSize:i,upperSize:a}=r;return"source"===e.kind?i/Nd:"composite"===e.kind?Ir(i/Nd,a/Nd,o):n}function Vd(e,t){let r=0,n=0;if("constant"===e.kind)n=e.layoutSize;else if("source"!==e.kind){const{interpolationType:o,minZoom:i,maxZoom:a}=e,s=o?C(Qr.interpolationFactor(o,t,i,a),0,1):0;"camera"===e.kind?n=Ir(e.minSize,e.maxSize,s):r=s}return{uSizeT:r,uSize:n}}var Wd=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Nd,evaluateSizeForFeature:Ud,evaluateSizeForZoom:Vd,getSizeData:Bd});function qd(e,t,r){return e.sections.forEach((e=>{e.text=function(e,t,r){const n=t.layout.get("text-transform").evaluate(r,{});return"uppercase"===n?e=e.toLocaleUpperCase():"lowercase"===n&&(e=e.toLocaleLowerCase()),_i.applyArabicShaping&&(e=_i.applyArabicShaping(e)),e}(e.text,t,r)})),e}const Hd={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function Gd(e){return"\ufe36"===e||"\ufe48"===e||"\ufe38"===e||"\ufe44"===e||"\ufe42"===e||"\ufe3e"===e||"\ufe3c"===e||"\ufe3a"===e||"\ufe18"===e||"\ufe40"===e||"\ufe10"===e||"\ufe13"===e||"\ufe14"===e||"\uff40"===e||"\uffe3"===e||"\ufe11"===e||"\ufe12"===e}function Kd(e){return"\ufe35"===e||"\ufe47"===e||"\ufe37"===e||"\ufe43"===e||"\ufe41"===e||"\ufe3d"===e||"\ufe3b"===e||"\ufe39"===e||"\ufe17"===e||"\ufe3f"===e}var Xd=Jd,Zd=function(e,t,r,n,o){var i,a,s=8*o-n-1,l=(1<<s)-1,c=l>>1,u=-7,d=r?o-1:0,h=r?-1:1,p=e[t+d];for(d+=h,i=p&(1<<-u)-1,p>>=-u,u+=s;u>0;i=256*i+e[t+d],d+=h,u-=8);for(a=i&(1<<-u)-1,i>>=-u,u+=n;u>0;a=256*a+e[t+d],d+=h,u-=8);if(0===i)i=1-c;else{if(i===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),i-=c}return(p?-1:1)*a*Math.pow(2,i-n)},Yd=function(e,t,r,n,o,i){var a,s,l,c=8*i-o-1,u=(1<<c)-1,d=u>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*l-1)*Math.pow(2,o),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;e[r+p]=255&s,p+=f,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;e[r+p]=255&a,p+=f,a/=256,c-=8);e[r+p-f]|=128*m};function Jd(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Jd.Varint=0,Jd.Fixed64=1,Jd.Bytes=2,Jd.Fixed32=5;var $d=4294967296,Qd=1/$d,eh="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function th(e){return e.type===Jd.Bytes?e.readVarint()+e.pos:e.pos+1}function rh(e,t,r){return r?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function nh(e,t,r){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));r.realloc(n);for(var o=r.pos-1;o>=e;o--)r.buf[o+n]=r.buf[o]}function oh(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function ih(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function ah(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function sh(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function lh(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function ch(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function uh(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function dh(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function hh(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function ph(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function fh(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function mh(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}Jd.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),o=n>>3,i=this.pos;this.type=7&n,e(o,t,this),this.pos===i&&this.skip(n)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=ph(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=mh(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=ph(this.buf,this.pos)+ph(this.buf,this.pos+4)*$d;return this.pos+=8,e},readSFixed64:function(){var e=ph(this.buf,this.pos)+mh(this.buf,this.pos+4)*$d;return this.pos+=8,e},readFloat:function(){var e=Zd(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Zd(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,r,n=this.buf;return t=127&(r=n[this.pos++]),r<128?t:(t|=(127&(r=n[this.pos++]))<<7,r<128?t:(t|=(127&(r=n[this.pos++]))<<14,r<128?t:(t|=(127&(r=n[this.pos++]))<<21,r<128?t:function(e,t,r){var n,o,i=r.buf;if(n=(112&(o=i[r.pos++]))>>4,o<128)return rh(e,n,t);if(n|=(127&(o=i[r.pos++]))<<3,o<128)return rh(e,n,t);if(n|=(127&(o=i[r.pos++]))<<10,o<128)return rh(e,n,t);if(n|=(127&(o=i[r.pos++]))<<17,o<128)return rh(e,n,t);if(n|=(127&(o=i[r.pos++]))<<24,o<128)return rh(e,n,t);if(n|=(1&(o=i[r.pos++]))<<31,o<128)return rh(e,n,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(r=n[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&eh?function(e,t,r){return eh.decode(e.subarray(t,r))}(this.buf,t,e):function(e,t,r){for(var n="",o=t;o<r;){var i,a,s,l=e[o],c=null,u=l>239?4:l>223?3:l>191?2:1;if(o+u>r)break;1===u?l<128&&(c=l):2===u?128==(192&(i=e[o+1]))&&(c=(31&l)<<6|63&i)<=127&&(c=null):3===u?(a=e[o+2],128==(192&(i=e[o+1]))&&128==(192&a)&&((c=(15&l)<<12|(63&i)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(a=e[o+2],s=e[o+3],128==(192&(i=e[o+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&i)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),n+=String.fromCharCode(c),o+=u}return n}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Jd.Bytes)return e.push(this.readVarint(t));var r=th(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Jd.Bytes)return e.push(this.readSVarint());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Jd.Bytes)return e.push(this.readBoolean());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Jd.Bytes)return e.push(this.readFloat());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Jd.Bytes)return e.push(this.readDouble());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Jd.Bytes)return e.push(this.readFixed32());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Jd.Bytes)return e.push(this.readSFixed32());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Jd.Bytes)return e.push(this.readFixed64());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Jd.Bytes)return e.push(this.readSFixed64());var t=th(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Jd.Varint)for(;this.buf[this.pos++]>127;);else if(t===Jd.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Jd.Fixed32)this.pos+=4;else{if(t!==Jd.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),fh(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),fh(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),fh(this.buf,-1&e,this.pos),fh(this.buf,Math.floor(e*Qd),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),fh(this.buf,-1&e,this.pos),fh(this.buf,Math.floor(e*Qd),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var r,n;if(e>=0?(r=e%4294967296|0,n=e/4294967296|0):(n=~(-e/4294967296),4294967295^(r=~(-e%4294967296))?r=r+1|0:(r=0,n=n+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,r){r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,r.buf[r.pos]=127&(e>>>=7)}(r,0,t),function(e,t){var r=(7&e)<<4;t.buf[t.pos++]|=r|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(n,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,r){for(var n,o,i=0;i<t.length;i++){if((n=t.charCodeAt(i))>55295&&n<57344){if(!o){n>56319||i+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):o=n;continue}if(n<56320){e[r++]=239,e[r++]=191,e[r++]=189,o=n;continue}n=o-55296<<10|n-56320|65536,o=null}else o&&(e[r++]=239,e[r++]=191,e[r++]=189,o=null);n<128?e[r++]=n:(n<2048?e[r++]=n>>6|192:(n<65536?e[r++]=n>>12|224:(e[r++]=n>>18|240,e[r++]=n>>12&63|128),e[r++]=n>>6&63|128),e[r++]=63&n|128)}return r}(this.buf,e,this.pos);var r=this.pos-t;r>=128&&nh(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),Yd(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Yd(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var n=this.pos-r;n>=128&&nh(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,t,r){this.writeTag(e,Jd.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,oh,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,ih,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,lh,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,ah,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,sh,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,ch,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,uh,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,dh,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,hh,t)},writeBytesField:function(e,t){this.writeTag(e,Jd.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Jd.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Jd.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Jd.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Jd.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Jd.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Jd.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Jd.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Jd.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Jd.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var gh=h(Xd);const yh=3;function vh(e,t,r){t.glyphs=[],1===e&&r.readMessage(bh,t)}function bh(e,t,r){if(3===e){const{id:e,bitmap:n,width:o,height:i,left:a,top:s,advance:l}=r.readMessage(xh,{});t.glyphs.push({id:e,bitmap:new Dc({width:o+2*yh,height:i+2*yh},n),metrics:{width:o,height:i,left:a,top:s,advance:l}})}else 4===e?t.ascender=r.readSVarint():5===e&&(t.descender=r.readSVarint())}function xh(e,t,r){1===e?t.id=r.readVarint():2===e?t.bitmap=r.readBytes():3===e?t.width=r.readVarint():4===e?t.height=r.readVarint():5===e?t.left=r.readSVarint():6===e?t.top=r.readSVarint():7===e&&(t.advance=r.readVarint())}const _h=yh;function wh(e){let t=0,r=0;for(const a of e)t+=a.w*a.h,r=Math.max(r,a.w);e.sort(((e,t)=>t.h-e.h));const n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),r),h:1/0}];let o=0,i=0;for(const a of e)for(let e=n.length-1;e>=0;e--){const t=n[e];if(!(a.w>t.w||a.h>t.h)){if(a.x=t.x,a.y=t.y,i=Math.max(i,a.y+a.h),o=Math.max(o,a.x+a.w),a.w===t.w&&a.h===t.h){const t=n.pop();e<n.length&&(n[e]=t)}else a.h===t.h?(t.x+=a.w,t.w-=a.w):a.w===t.w?(t.y+=a.h,t.h-=a.h):(n.push({x:t.x+a.w,y:t.y,w:t.w-a.w,h:a.h}),t.y+=a.h,t.h-=a.h);break}}return{w:o,h:i,fill:t/(o*i)||0}}const Sh=1;class kh{constructor(e,t){let{pixelRatio:r,version:n,stretchX:o,stretchY:i,content:a}=t;this.paddedRect=e,this.pixelRatio=r,this.stretchX=o,this.stretchY=i,this.content=a,this.version=n}get tl(){return[this.paddedRect.x+Sh,this.paddedRect.y+Sh]}get br(){return[this.paddedRect.x+this.paddedRect.w-Sh,this.paddedRect.y+this.paddedRect.h-Sh]}get displaySize(){return[(this.paddedRect.w-2*Sh)/this.pixelRatio,(this.paddedRect.h-2*Sh)/this.pixelRatio]}}class Th{constructor(e,t){const r={},n={};this.haveRenderCallbacks=[];const o=[];this.addImages(e,r,o),this.addImages(t,n,o);const{w:i,h:a}=wh(o),s=new Nc({width:i||1,height:a||1});for(const l in e){const t=e[l],n=r[l].paddedRect;Nc.copy(t.data,s,{x:0,y:0},{x:n.x+Sh,y:n.y+Sh},t.data)}for(const l in t){const e=t[l],r=n[l].paddedRect,o=r.x+Sh,i=r.y+Sh,a=e.data.width,c=e.data.height;Nc.copy(e.data,s,{x:0,y:0},{x:o,y:i},e.data),Nc.copy(e.data,s,{x:0,y:c-1},{x:o,y:i-1},{width:a,height:1}),Nc.copy(e.data,s,{x:0,y:0},{x:o,y:i+c},{width:a,height:1}),Nc.copy(e.data,s,{x:a-1,y:0},{x:o-1,y:i},{width:1,height:c}),Nc.copy(e.data,s,{x:0,y:0},{x:o+a,y:i},{width:1,height:c})}this.image=s,this.iconPositions=r,this.patternPositions=n}addImages(e,t,r){for(const n in e){const o=e[n],i={x:0,y:0,w:o.data.width+2*Sh,h:o.data.height+2*Sh};r.push(i),t[n]=new kh(i,o),o.hasRenderCallback&&this.haveRenderCallbacks.push(n)}}patchUpdatedImages(e,t){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((t=>e.hasImage(t))),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const r in e.updatedImages)this.patchUpdatedImage(this.iconPositions[r],e.getImage(r),t),this.patchUpdatedImage(this.patternPositions[r],e.getImage(r),t)}patchUpdatedImage(e,t,r){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[n,o]=e.tl;r.update(t.data,void 0,{x:n,y:o})}}Yo(kh,"ImagePosition"),Yo(Th,"ImageAtlas");const Eh={horizontal:1,vertical:2,horizontalOnly:3},Ch=-17;class Ah{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const r=new Ah;return r.scale=e||1,r.fontStack=t,r}static forImage(e){const t=new Ah;return t.imageName=e,t}}class jh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const r=new jh;for(let n=0;n<e.sections.length;n++){const o=e.sections[n];o.image?r.addImageSection(o):r.addTextSection(o,t)}return r}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(e,t){let r="";for(let n=0;n<e.length;n++){const o=e.charCodeAt(n+1)||null,i=e.charCodeAt(n-1)||null;r+=!t&&(o&&ai(o)&&!Hd[e[n+1]]||i&&ai(i)&&!Hd[e[n-1]])||!Hd[e[n]]?e[n]:Hd[e[n]]}return r}(this.text,e)}trim(){let e=0;for(let r=0;r<this.text.length&&Ih[this.text.charCodeAt(r)];r++)e++;let t=this.text.length;for(let r=this.text.length-1;r>=0&&r>=e&&Ih[this.text.charCodeAt(r)];r--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const r=new jh;return r.text=this.text.substring(e,t),r.sectionIndex=this.sectionIndex.slice(e,t),r.sections=this.sections,r}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,t)=>Math.max(e,this.sections[t].scale)),0)}addTextSection(e,t){this.text+=e.text,this.sections.push(Ah.forText(e.scale,e.fontStack||t));const r=this.sections.length-1;for(let n=0;n<e.text.length;++n)this.sectionIndex.push(r)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void q("Can't add FormattedSection with an empty image.");const r=this.getNextImageSectionCharCode();r?(this.text+=String.fromCharCode(r),this.sections.push(Ah.forImage(t)),this.sectionIndex.push(this.sections.length-1)):q("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ph(e,t,r,n,o,i,a,s,l,c,u,d,h,p,f){const m=jh.fromFeature(e,o);d===Eh.vertical&&m.verticalizePunctuation(h);let g=[];const y=function(e,t,r,n,o,i){if(!e)return[];const a=[],s=function(e,t,r,n,o,i){let a=0;for(let s=0;s<e.length();s++){const r=e.getSection(s);a+=Mh(e.getCharCode(s),r,n,o,t,i)}return a/Math.max(1,Math.ceil(a/r))}(e,t,r,n,o,i),l=e.text.indexOf("\u200b")>=0;let c=0;for(let d=0;d<e.length();d++){const r=e.getSection(d),h=e.getCharCode(d);if(Ih[h]||(c+=Mh(h,r,n,o,t,i)),d<e.length()-1){const t=!((u=h)<11904||!(ti["Bopomofo Extended"](u)||ti.Bopomofo(u)||ti["CJK Compatibility Forms"](u)||ti["CJK Compatibility Ideographs"](u)||ti["CJK Compatibility"](u)||ti["CJK Radicals Supplement"](u)||ti["CJK Strokes"](u)||ti["CJK Symbols and Punctuation"](u)||ti["CJK Unified Ideographs Extension A"](u)||ti["CJK Unified Ideographs"](u)||ti["Enclosed CJK Letters and Months"](u)||ti["Halfwidth and Fullwidth Forms"](u)||ti.Hiragana(u)||ti["Ideographic Description Characters"](u)||ti["Kangxi Radicals"](u)||ti["Katakana Phonetic Extensions"](u)||ti.Katakana(u)||ti["Vertical Forms"](u)||ti["Yi Radicals"](u)||ti["Yi Syllables"](u)));(Oh[h]||t||r.imageName)&&a.push(Fh(d+1,c,s,a,Lh(h,e.getCharCode(d+1),t&&l),!1))}}var u;return zh(Fh(e.length(),c,s,a,0,!0))}(m,c,i,t,n,p),{processBidirectionalText:v,processStyledBidirectionalText:b}=_i;if(v&&1===m.sections.length){const e=v(m.toString(),y);for(const t of e){const e=new jh;e.text=t,e.sections=m.sections;for(let r=0;r<t.length;r++)e.sectionIndex.push(0);g.push(e)}}else if(b){const e=b(m.text,m.sectionIndex,y);for(const t of e){const e=new jh;e.text=t[0],e.sectionIndex=t[1],e.sections=m.sections,g.push(e)}}else g=function(e,t){const r=[],n=e.text;let o=0;for(const i of t)r.push(e.substring(o,i)),o=i;return o<n.length&&r.push(e.substring(o,n.length)),r}(m,y);const x=[],_={positionedLines:x,text:m.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:d,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(e,t,r,n,o,i,a,s,l,c,u,d){let h=0,p=0,f=0;const m="right"===s?1:"left"===s?0:.5;let g=!1;for(const w of o){const e=w.getSections();for(const r of e){if(r.imageName)continue;const e=t[r.fontStack];if(e&&(g=void 0!==e.ascender&&void 0!==e.descender,!g))break}if(!g)break}let y=0;for(const w of o){w.trim();const o=w.getMaxScale(),a=(o-1)*Dd,s={positionedGlyphs:[],lineOffset:0};e.positionedLines[y]=s;const b=s.positionedGlyphs;let x=0;if(!w.length()){p+=i,++y;continue}let _=0,S=0;for(let i=0;i<w.length();i++){const a=w.getSection(i),s=w.getSectionIndex(i),f=w.getCharCode(i);let m=a.scale,y=null,k=null,T=null,E=Dd,C=0;const A=!(l===Eh.horizontal||!u&&!ii(f)||u&&(Ih[f]||(v=f,ti.Arabic(v)||ti["Arabic Supplement"](v)||ti["Arabic Extended-A"](v)||ti["Arabic Presentation Forms-A"](v)||ti["Arabic Presentation Forms-B"](v))));if(a.imageName){const t=n[a.imageName];if(!t)continue;T=a.imageName,e.iconsInText=e.iconsInText||!0,k=t.paddedRect;const r=t.displaySize;m=m*Dd/d,y={width:r[0],height:r[1],left:Sh,top:-_h,advance:A?r[1]:r[0],localGlyph:!1},C=g?-y.height*m:Ch+o*Dd-r[1]*m,E=y.advance;const i=(A?r[0]:r[1])*m-Dd*o;i>0&&i>x&&(x=i)}else{const e=r[a.fontStack];if(!e)continue;e[f]&&(k=e[f]);const n=t[a.fontStack];if(!n)continue;const i=n.glyphs[f];if(!i)continue;if(y=i.metrics,E=8203!==f?Dd:0,g){const e=void 0!==n.ascender?Math.abs(n.ascender):0,t=void 0!==n.descender?Math.abs(n.descender):0,r=(e+t)*m;_<r&&(_=r,S=(e-t)/2*m),C=-e*m}else C=Ch+(o-m)*Dd}A?(e.verticalizable=!0,b.push({glyph:f,imageName:T,x:h,y:p+C,vertical:A,scale:m,localGlyph:y.localGlyph,fontStack:a.fontStack,sectionIndex:s,metrics:y,rect:k}),h+=E*m+c):(b.push({glyph:f,imageName:T,x:h,y:p+C,vertical:A,scale:m,localGlyph:y.localGlyph,fontStack:a.fontStack,sectionIndex:s,metrics:y,rect:k}),h+=y.advance*m+c)}0!==b.length&&(f=Math.max(h-c,f),g?Nh(b,m,x,S,i*o/2):Nh(b,m,x,0,i/2)),h=0;const k=i*o+x;s.lineOffset=Math.max(x,a),p+=k,++y}var v;const b=p,{horizontalAlign:x,verticalAlign:_}=Dh(a);(function(e,t,r,n,o,i){const a=(t-r)*o,s=-i*n;for(const l of e)for(const e of l.positionedGlyphs)e.x+=a,e.y+=s})(e.positionedLines,m,x,_,f,b),e.top+=-_*b,e.bottom=e.top+b,e.left+=-x*f,e.right=e.left+f,e.hasBaseline=g}(_,t,r,n,g,a,s,l,d,c,h,f),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(x)&&_}const Ih={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Oh={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Mh(e,t,r,n,o,i){if(t.imageName){const e=n[t.imageName];return e?e.displaySize[0]*t.scale*Dd/i+o:0}{const n=r[t.fontStack],i=n&&n.glyphs[e];return i?i.metrics.advance*t.scale+o:0}}function Rh(e,t,r,n){const o=Math.pow(e-t,2);return n?e<t?o/2:2*o:o+Math.abs(r)*r}function Lh(e,t,r){let n=0;return 10===e&&(n-=1e4),r&&(n+=150),40!==e&&65288!==e||(n+=50),41!==t&&65289!==t||(n+=50),n}function Fh(e,t,r,n,o,i){let a=null,s=Rh(t,r,o,i);for(const l of n){const e=Rh(t-l.x,r,o,i)+l.badness;e<=s&&(a=l,s=e)}return{index:e,x:t,priorBreak:a,badness:s}}function zh(e){return e?zh(e.priorBreak).concat(e.index):[]}function Dh(e){let t=.5,r=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:t,verticalAlign:r}}function Nh(e,t,r,n,o){if(!(t||r||n||o))return;const i=e.length-1,a=e[i],s=(a.x+a.metrics.advance*a.scale)*t;for(let l=0;l<=i;l++)e[l].x-=s,e[l].y+=r+n+o}function Bh(e,t,r){const{horizontalAlign:n,verticalAlign:o}=Dh(r),i=t[0]-e.displaySize[0]*n,a=t[1]-e.displaySize[1]*o;return{image:e,top:a,bottom:a+e.displaySize[1],left:i,right:i+e.displaySize[0]}}function Uh(e,t,r,n,o,i){const a=e.image;let s;if(a.content){const e=a.content,t=a.pixelRatio||1;s=[e[0]/t,e[1]/t,a.displaySize[0]-e[2]/t,a.displaySize[1]-e[3]/t]}const l=t.left*i,c=t.right*i;let u,d,h,p;"width"===r||"both"===r?(p=o[0]+l-n[3],d=o[0]+c+n[1]):(p=o[0]+(l+c-a.displaySize[0])/2,d=p+a.displaySize[0]);const f=t.top*i,m=t.bottom*i;return"height"===r||"both"===r?(u=o[1]+f-n[0],h=o[1]+m+n[2]):(u=o[1]+(f+m-a.displaySize[1])/2,h=u+a.displaySize[1]),{image:a,top:u,right:d,bottom:h,left:p,collisionPadding:s}}class Vh extends v{constructor(e,t,r,n,o){super(e,t),this.angle=n,this.z=r,void 0!==o&&(this.segment=o)}clone(){return new Vh(this.x,this.y,this.z,this.angle,this.segment)}}function Wh(e,t,r,n,o){if(void 0===t.segment)return!0;let i=t,a=t.segment+1,s=0;for(;s>-r/2;){if(a--,a<0)return!1;s-=e[a].dist(i),i=e[a]}s+=e[a].dist(e[a+1]),a++;const l=[];let c=0;for(;s<r/2;){const t=e[a],r=e[a+1];if(!r)return!1;let i=e[a-1].angleTo(t)-t.angleTo(r);for(i=Math.abs((i+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:i}),c+=i;s-l[0].distance>n;)c-=l.shift().angleDelta;if(c>o)return!1;a++,s+=t.dist(r)}return!0}function qh(e){let t=0;for(let r=0;r<e.length-1;r++)t+=e[r].dist(e[r+1]);return t}function Hh(e,t,r){return e?.6*t*r:0}function Gh(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Kh(e,t,r,n,o,i){const a=Hh(r,o,i),s=Gh(r,n)*i;let l=0;const c=qh(e)/2;for(let u=0;u<e.length-1;u++){const r=e[u],n=e[u+1],o=r.dist(n);if(l+o>c){const i=(c-l)/o,d=Ir(r.x,n.x,i),h=Ir(r.y,n.y,i),p=new Vh(d,h,0,n.angleTo(r),u);return!a||Wh(e,p,s,a,t)?p:void 0}l+=o}}function Xh(e,t,r,n,o,i,a,s,l){const c=Hh(n,i,a),u=Gh(n,o),d=u*a,h=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-d<t/4&&(t=d+t/4),Zh(e,h?t/2*s%t:(u/2+2*i)*a*s%t,t,c,r,d,h,!1,l)}function Zh(e,t,r,n,o,i,a,s,l){const c=i/2,u=qh(e);let d=0,h=t-r,p=[];for(let f=0;f<e.length-1;f++){const t=e[f],a=e[f+1],s=t.dist(a),m=a.angleTo(t);for(;h+r<d+s;){h+=r;const g=(h-d)/s,y=Ir(t.x,a.x,g),v=Ir(t.y,a.y,g);if(y>=0&&y<l&&v>=0&&v<l&&h-c>=0&&h+c<=u){const t=new Vh(y,v,0,m,f);t._round(),n&&!Wh(e,t,i,n,o)||p.push(t)}}d+=s}return s||p.length||a||(p=Zh(e,d/2,r,n,o,i,a,!0,l)),p}function Yh(e,t,r,n,o){const i=[];for(let a=0;a<e.length;a++){const s=e[a];let l;for(let e=0;e<s.length-1;e++){let a=s[e],c=s[e+1];a.x<t&&c.x<t||(a.x<t?a=new v(t,a.y+(t-a.x)/(c.x-a.x)*(c.y-a.y))._round():c.x<t&&(c=new v(t,a.y+(t-a.x)/(c.x-a.x)*(c.y-a.y))._round()),a.y<r&&c.y<r||(a.y<r?a=new v(a.x+(r-a.y)/(c.y-a.y)*(c.x-a.x),r)._round():c.y<r&&(c=new v(a.x+(r-a.y)/(c.y-a.y)*(c.x-a.x),r)._round()),a.x>=n&&c.x>=n||(a.x>=n?a=new v(n,a.y+(n-a.x)/(c.x-a.x)*(c.y-a.y))._round():c.x>=n&&(c=new v(n,a.y+(n-a.x)/(c.x-a.x)*(c.y-a.y))._round()),a.y>=o&&c.y>=o||(a.y>=o?a=new v(a.x+(o-a.y)/(c.y-a.y)*(c.x-a.x),o)._round():c.y>=o&&(c=new v(a.x+(o-a.y)/(c.y-a.y)*(c.x-a.x),o)._round()),l&&a.equals(l[l.length-1])||(l=[a],i.push(l)),l.push(c)))))}}return i}Yo(Vh,"Anchor");const Jh=1e20;function $h(e,t,r,n,o,i,a,s,l){for(let c=t;c<t+n;c++)Qh(e,r*i+c,i,o,a,s,l);for(let c=r;c<r+o;c++)Qh(e,c*i+t,1,n,a,s,l)}function Qh(e,t,r,n,o,i,a){i[0]=0,a[0]=-Jh,a[1]=Jh,o[0]=e[t];for(let s=1,l=0,c=0;s<n;s++){o[s]=e[t+s*r];const n=s*s;do{const e=i[l];c=(o[s]-o[e]+n-e*e)/(s-e)/2}while(c<=a[l]&&--l>-1);l++,i[l]=s,a[l]=c,a[l+1]=Jh}for(let s=0,l=0;s<n;s++){for(;a[l+1]<s;)l++;const n=i[l],c=s-n;e[t+s*r]=o[n]+c*c}}const ep=2,tp={none:0,ideographs:1,all:2};class rp{constructor(e,t,r){this.requestManager=e,this.localGlyphMode=t,this.localFontFamily=r,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,t){const r=[];for(const n in e)for(const t of e[n])r.push({stack:n,id:t});P(r,((e,t)=>{let{stack:r,id:n}=e,o=this.entries[r];o||(o=this.entries[r]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let i=o.glyphs[n];if(void 0!==i)return void t(null,{stack:r,id:n,glyph:i});if(i=this._tinySDF(o,r,n),i)return o.glyphs[n]=i,void t(null,{stack:r,id:n,glyph:i});const a=Math.floor(n/256);if(256*a>65535)return void t(new Error("glyphs > 65535 not supported"));if(o.ranges[a])return void t(null,{stack:r,id:n,glyph:i});let s=o.requests[a];s||(s=o.requests[a]=[],rp.loadGlyphRange(r,a,this.url,this.requestManager,((e,t)=>{if(t){o.ascender=t.ascender,o.descender=t.descender;for(const e in t.glyphs)this._doesCharSupportLocalGlyph(+e)||(o.glyphs[+e]=t.glyphs[+e]);o.ranges[a]=!0}for(const r of s)r(e,t);delete o.requests[a]}))),s.push(((e,o)=>{e?t(e):o&&t(null,{stack:r,id:n,glyph:o.glyphs[n]||null})}))}),((e,r)=>{if(e)t(e);else if(r){const e={};for(const{stack:t,id:n,glyph:o}of r)void 0===e[t]&&(e[t]={}),void 0===e[t].glyphs&&(e[t].glyphs={}),e[t].glyphs[n]=o&&{id:o.id,bitmap:o.bitmap.clone(),metrics:o.metrics},e[t].ascender=this.entries[t].ascender,e[t].descender=this.entries[t].descender;t(null,e)}}))}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==tp.none&&(this.localGlyphMode===tp.all?!!this.localFontFamily:!!this.localFontFamily&&(ti["CJK Unified Ideographs"](e)||ti["Hangul Syllables"](e)||ti.Hiragana(e)||ti.Katakana(e)||ti["CJK Symbols and Punctuation"](e)))}_tinySDF(e,t,r){const n=this.localFontFamily;if(!n||!this._doesCharSupportLocalGlyph(r))return;let o=e.tinySDF;if(!o){let r="400";/bold/i.test(t)?r="900":/medium/i.test(t)?r="500":/light/i.test(t)&&(r="200"),o=e.tinySDF=new rp.TinySDF({fontFamily:n,fontWeight:r,fontSize:24*ep,buffer:3*ep,radius:8*ep}),o.fontWeight=r}if(this.localGlyphs[o.fontWeight][r])return this.localGlyphs[o.fontWeight][r];const i=String.fromCharCode(r),{data:a,width:s,height:l,glyphWidth:c,glyphHeight:u,glyphLeft:d,glyphTop:h,glyphAdvance:p}=o.draw(i);return this.localGlyphs[o.fontWeight][r]={id:r,bitmap:new Dc({width:s,height:l},a),metrics:{width:c/ep,height:u/ep,left:d/ep,top:h/ep-27,advance:p/ep,localGlyph:!0}}}}rp.loadGlyphRange=function(e,t,r,n,o){const i=256*t,a=i+255,s=n.transformRequest(n.normalizeGlyphsURL(r).replace("{fontstack}",e).replace("{range}","".concat(i,"-").concat(a)),le.Glyphs);he(s,((e,t)=>{if(e)o(e);else if(t){const e={},r=function(e){return new gh(e).readFields(vh,{})}(t);for(const t of r.glyphs)e[t.id]=t;o(null,{glyphs:e,ascender:r.ascender,descender:r.descender})}}))},rp.TinySDF=class{constructor(){let{fontSize:e=24,buffer:t=3,radius:r=8,cutoff:n=.25,fontFamily:o="sans-serif",fontWeight:i="normal",fontStyle:a="normal"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buffer=t,this.cutoff=n,this.radius=r;const s=this.size=e+4*t,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font="".concat(a," ").concat(i," ").concat(e,"px ").concat(o),c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:r,actualBoundingBoxDescent:n,actualBoundingBoxLeft:o,actualBoundingBoxRight:i}=this.ctx.measureText(e),a=Math.ceil(r),s=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(i-o))),l=Math.min(this.size-this.buffer,a+Math.ceil(n)),c=s+2*this.buffer,u=l+2*this.buffer,d=Math.max(c*u,0),h=new Uint8ClampedArray(d),p={data:h,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:t};if(0===s||0===l)return p;const{ctx:f,buffer:m,gridInner:g,gridOuter:y}=this;f.clearRect(m,m,s,l),f.fillText(e,m,m+a);const v=f.getImageData(m,m,s,l);y.fill(Jh,0,d),g.fill(0,0,d);for(let b=0;b<l;b++)for(let e=0;e<s;e++){const t=v.data[4*(b*s+e)+3]/255;if(0===t)continue;const r=(b+m)*c+e+m;if(1===t)y[r]=0,g[r]=Jh;else{const e=.5-t;y[r]=e>0?e*e:0,g[r]=e<0?e*e:0}}$h(y,0,0,c,u,c,this.f,this.v,this.z),$h(g,m,m,s,l,c,this.f,this.v,this.z);for(let b=0;b<d;b++){const e=Math.sqrt(y[b])-Math.sqrt(g[b]);h[b]=Math.round(255-255*(e/this.radius+this.cutoff))}return p}};const np=Sh;function op(e,t,r,n){const o=[],i=e.image,a=i.pixelRatio,s=i.paddedRect.w-2*np,l=i.paddedRect.h-2*np,c=e.right-e.left,u=e.bottom-e.top,d=i.stretchX||[[0,s]],h=i.stretchY||[[0,l]],p=(e,t)=>e+t[1]-t[0],f=d.reduce(p,0),m=h.reduce(p,0),g=s-f,y=l-m;let b=0,x=f,_=0,w=m,S=0,k=g,T=0,E=y;if(i.content&&n){const e=i.content;b=ip(d,0,e[0]),_=ip(h,0,e[1]),x=ip(d,e[0],e[2]),w=ip(h,e[1],e[3]),S=e[0]-b,T=e[1]-_,k=e[2]-e[0]-x,E=e[3]-e[1]-w}const C=(n,o,s,l)=>{const d=sp(n.stretch-b,x,c,e.left),h=lp(n.fixed-S,k,n.stretch,f),p=sp(o.stretch-_,w,u,e.top),g=lp(o.fixed-T,E,o.stretch,m),y=sp(s.stretch-b,x,c,e.left),C=lp(s.fixed-S,k,s.stretch,f),A=sp(l.stretch-_,w,u,e.top),j=lp(l.fixed-T,E,l.stretch,m),P=new v(d,p),I=new v(y,p),O=new v(y,A),M=new v(d,A),R=new v(h/a,g/a),L=new v(C/a,j/a),F=t*Math.PI/180;if(F){const e=Math.sin(F),t=Math.cos(F),r=[t,-e,e,t];P._matMult(r),I._matMult(r),M._matMult(r),O._matMult(r)}const z=n.stretch+n.fixed,D=o.stretch+o.fixed;return{tl:P,tr:I,bl:M,br:O,tex:{x:i.paddedRect.x+np+z,y:i.paddedRect.y+np+D,w:s.stretch+s.fixed-z,h:l.stretch+l.fixed-D},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:R,pixelOffsetBR:L,minFontScaleX:k/a/c,minFontScaleY:E/a/u,isSDF:r}};if(n&&(i.stretchX||i.stretchY)){const e=ap(d,g,f),t=ap(h,y,m);for(let r=0;r<e.length-1;r++){const n=e[r],i=e[r+1];for(let e=0;e<t.length-1;e++)o.push(C(n,t[e],i,t[e+1]))}}else o.push(C({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return o}function ip(e,t,r){let n=0;for(const o of e)n+=Math.max(t,Math.min(r,o[1]))-Math.max(t,Math.min(r,o[0]));return n}function ap(e,t,r){const n=[{fixed:-np,stretch:0}];for(const[o,i]of e){const e=n[n.length-1];n.push({fixed:o-e.stretch,stretch:e.stretch}),n.push({fixed:o-e.stretch,stretch:e.stretch+(i-o)})}return n.push({fixed:t+np,stretch:r}),n}function sp(e,t,r,n){return e/t*r+n}function lp(e,t,r,n){return e-t*r/n}function cp(e,t,r,n){const o=t+e.positionedLines[n].lineOffset;return 0===n?r+o/2:r+(o+(t+e.positionedLines[n-1].lineOffset))/2}class up{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dp;if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,n=t[e];for(;e>0;){const o=e-1>>1,i=t[o];if(r(n,i)>=0)break;t[e]=i,e=o}t[e]=n}_down(e){const{data:t,compare:r}=this,n=this.length>>1,o=t[e];for(;e<n;){let n=1+(e<<1),i=t[n];const a=n+1;if(a<this.length&&r(t[a],i)<0&&(n=a,i=t[a]),r(i,o)>=0)break;t[e]=i,e=n}t[e]=o}}function dp(e,t){return e<t?-1:e>t?1:0}function hp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=1/0,o=1/0,i=-1/0,a=-1/0;const s=e[0];for(let p=0;p<s.length;p++){const e=s[p];(!p||e.x<n)&&(n=e.x),(!p||e.y<o)&&(o=e.y),(!p||e.x>i)&&(i=e.x),(!p||e.y>a)&&(a=e.y)}const l=Math.min(i-n,a-o);let c=l/2;const u=new up([],pp);if(0===l)return new v(n,o);for(let p=n;p<i;p+=l)for(let t=o;t<a;t+=l)u.push(new fp(p+c,t+c,c,e));let d=function(e){let t=0,r=0,n=0;const o=e[0];for(let i=0,a=o.length,s=a-1;i<a;s=i++){const e=o[i],a=o[s],l=e.x*a.y-a.x*e.y;r+=(e.x+a.x)*l,n+=(e.y+a.y)*l,t+=3*l}return new fp(r/t,n/t,0,e)}(e),h=u.length;for(;u.length;){const n=u.pop();(n.d>d.d||!d.d)&&(d=n,r&&console.log("found best %d after %d probes",Math.round(1e4*n.d)/1e4,h)),n.max-d.d<=t||(c=n.h/2,u.push(new fp(n.p.x-c,n.p.y-c,c,e)),u.push(new fp(n.p.x+c,n.p.y-c,c,e)),u.push(new fp(n.p.x-c,n.p.y+c,c,e)),u.push(new fp(n.p.x+c,n.p.y+c,c,e)),h+=4)}return r&&(console.log("num probes: ".concat(h)),console.log("best distance: ".concat(d.d))),d.p}function pp(e,t){return t.max-e.max}class fp{constructor(e,t,r,n){this.p=new v(e,t),this.h=r,this.d=function(e,t){let r=!1,n=1/0;for(let o=0;o<t.length;o++){const i=t[o];for(let t=0,o=i.length,a=o-1;t<o;a=t++){const o=i[t],s=i[a];o.y>e.y!=s.y>e.y&&e.x<(s.x-o.x)*(e.y-o.y)/(s.y-o.y)+o.x&&(r=!r),n=Math.min(n,vc(e,o,s))}}return(r?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}}const mp=7,gp=Number.POSITIVE_INFINITY,yp=Math.sqrt(2);function vp(e,t){let[r,n]=t,o=0,i=0;if(n===gp){r<0&&(r=0);const t=r/yp;switch(e){case"top-right":case"top-left":i=t-mp;break;case"bottom-right":case"bottom-left":i=-t+mp;break;case"bottom":i=-r+mp;break;case"top":i=r-mp}switch(e){case"top-right":case"bottom-right":o=-t;break;case"top-left":case"bottom-left":o=t;break;case"left":o=r;break;case"right":o=-r}}else{switch(r=Math.abs(r),n=Math.abs(n),e){case"top-right":case"top-left":case"top":i=n-mp;break;case"bottom-right":case"bottom-left":case"bottom":i=-n+mp}switch(e){case"top-right":case"bottom-right":case"right":o=-r;break;case"top-left":case"bottom-left":case"left":o=r}}return[o,i]}function bp(e,t,r,n,o,i,a,s,l,c){e.createArrays(),e.tilePixelRatio=ss/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;const u=e.layers[0].layout,d=e.layers[0]._unevaluatedLayout._values,h={};if("composite"===e.textSizeData.kind){const{minZoom:t,maxZoom:r}=e.textSizeData;h.compositeTextSizes=[d["text-size"].possiblyEvaluate(new wi(t),s),d["text-size"].possiblyEvaluate(new wi(r),s)]}if("composite"===e.iconSizeData.kind){const{minZoom:t,maxZoom:r}=e.iconSizeData;h.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new wi(t),s),d["icon-size"].possiblyEvaluate(new wi(r),s)]}h.layoutTextSize=d["text-size"].possiblyEvaluate(new wi(l+1),s),h.layoutIconSize=d["icon-size"].possiblyEvaluate(new wi(l+1),s),h.textMaxSize=d["text-size"].possiblyEvaluate(new wi(18),s);const p="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),f=u.get("text-size");for(const m of e.features){const i=u.get("text-font").evaluate(m,{},s).join(","),l=f.evaluate(m,{},s),d=h.layoutTextSize.evaluate(m,{},s),g=(h.layoutIconSize.evaluate(m,{},s),{horizontal:{},vertical:void 0}),y=m.text;let v,b=[0,0];if(y){const n=y.toString(),a=u.get("text-letter-spacing").evaluate(m,{},s)*Dd,c=u.get("text-line-height").evaluate(m,{},s)*Dd,h=ni(n)?a:0,f=u.get("text-anchor").evaluate(m,{},s),v=u.get("text-variable-anchor");if(!v){const e=u.get("text-radial-offset").evaluate(m,{},s);b=e?vp(f,[e*Dd,gp]):u.get("text-offset").evaluate(m,{},s).map((e=>e*Dd))}let x=p?"center":u.get("text-justify").evaluate(m,{},s);const _="point"===u.get("symbol-placement"),w=_?u.get("text-max-width").evaluate(m,{},s)*Dd:1/0,S=a=>{e.allowVerticalPlacement&&ri(n)&&(g.vertical=Ph(y,t,r,o,i,w,c,f,a,h,b,Eh.vertical,!0,d,l))};if(!p&&v){const e="auto"===x?v.map((e=>xp(e))):[x];let n=!1;for(let a=0;a<e.length;a++){const s=e[a];if(!g.horizontal[s])if(n)g.horizontal[s]=g.horizontal[0];else{const e=Ph(y,t,r,o,i,w,c,"center",s,h,b,Eh.horizontal,!1,d,l);e&&(g.horizontal[s]=e,n=1===e.positionedLines.length)}}S("left")}else{if("auto"===x&&(x=xp(f)),_||u.get("text-writing-mode").indexOf("horizontal")>=0||!ri(n)){const e=Ph(y,t,r,o,i,w,c,f,x,h,b,Eh.horizontal,!1,d,l);e&&(g.horizontal[x]=e)}S(_?"left":x)}}let x=!1;if(m.icon&&m.icon.name){const t=n[m.icon.name];t&&(v=Bh(o[m.icon.name],u.get("icon-offset").evaluate(m,{},s),u.get("icon-anchor").evaluate(m,{},s)),x=t.sdf,void 0===e.sdfIcons?e.sdfIcons=t.sdf:e.sdfIcons!==t.sdf&&q("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.pixelRatio||0!==u.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}const _=Tp(g.horizontal)||g.vertical;e.iconsInText||(e.iconsInText=!!_&&_.iconsInText),(_||v)&&_p(e,m,g,v,n,h,d,0,b,x,a,s,c)}i&&e.generateCollisionDebugBuffers(l,e.collisionBoxArray)}function xp(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function _p(e,t,r,n,o,i,a,s,l,c,u,d,h){let p=i.textMaxSize.evaluate(t,{},d);void 0===p&&(p=a);const f=e.layers[0].layout,m=f.get("icon-offset").evaluate(t,{},d),g=Tp(r.horizontal)||r.vertical,y="globe"===h.name,v=Dd,b=a/v,x=e.tilePixelRatio*p/v,w=(P=e.overscaling,e.zoom>18&&P>2&&(P>>=1),Math.max(ss/(512*P),1)*f.get("symbol-spacing")),S=f.get("text-padding")*e.tilePixelRatio,k=f.get("icon-padding")*e.tilePixelRatio,T=_(f.get("text-max-angle")),E="map"===f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),C="map"===f.get("icon-rotation-alignment")&&"point"!==f.get("symbol-placement"),A=f.get("symbol-placement"),j=w/2;var P;const I=f.get("icon-text-fit");let O;n&&"none"!==I&&(e.allowVerticalPlacement&&r.vertical&&(O=Uh(n,r.vertical,I,f.get("icon-text-fit-padding"),m,b)),g&&(n=Uh(n,g,I,f.get("icon-text-fit-padding"),m,b)));const M=(a,s,p)=>{if(s.x<0||s.x>=ss||s.y<0||s.y>=ss)return;let f=null;if(y){const{x:e,y:t,z:r}=h.projectTilePoint(s.x,s.y,p);f={anchor:new Vh(e,t,r,0,void 0),up:h.upVector(p,s.x,s.y)}}!function(e,t,r,n,o,i,a,s,l,c,u,d,h,p,f,m,g,y,v,b,x,_,w,S,k){const T=e.addToLineVertexArray(t,n);let E,C,A,j,P,I,O,M=0,R=0,L=0,F=0,z=-1,D=-1;const N={};let B=Ia("");const U=r?r.anchor:t;let V=0,W=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[V,W]=l.layout.get("text-offset").evaluate(x,{},k).map((e=>e*Dd)):(V=l.layout.get("text-radial-offset").evaluate(x,{},k)*Dd,W=gp),e.allowVerticalPlacement&&o.vertical){const e=o.vertical;if(f)I=Cp(e),s&&(O=Cp(s));else{const r=l.layout.get("text-rotate").evaluate(x,{},k)+90;A=Ep(c,U,t,u,d,h,e,p,r,m),s&&(j=Ep(c,U,t,u,d,h,s,y,r))}}if(i){const n=l.layout.get("icon-rotate").evaluate(x,{},k),o="none"!==l.layout.get("icon-text-fit"),a=op(i,n,w,o),p=s?op(s,n,w,o):void 0;C=Ep(c,U,t,u,d,h,i,y,n),M=4*a.length;const f=e.iconSizeData;let m=null;"source"===f.kind?(m=[Nd*l.layout.get("icon-size").evaluate(x,{},k)],m[0]>Sp&&q("".concat(e.layerIds[0],': Value for "icon-size" is >= ').concat(wp,'. Reduce your "icon-size".'))):"composite"===f.kind&&(m=[Nd*_.compositeIconSizes[0].evaluate(x,{},k),Nd*_.compositeIconSizes[1].evaluate(x,{},k)],(m[0]>Sp||m[1]>Sp)&&q("".concat(e.layerIds[0],': Value for "icon-size" is >= ').concat(wp,'. Reduce your "icon-size".'))),e.addSymbols(e.icon,a,m,b,v,x,!1,r,t,T.lineStartIndex,T.lineLength,-1,S,k),z=e.icon.placedSymbolArray.length-1,p&&(R=4*p.length,e.addSymbols(e.icon,p,m,b,v,x,Eh.vertical,r,t,T.lineStartIndex,T.lineLength,-1,S,k),D=e.icon.placedSymbolArray.length-1)}for(const q in o.horizontal){const n=o.horizontal[q];E||(B=Ia(n.text),f?P=Cp(n):E=Ep(c,U,t,u,d,h,n,p,l.layout.get("text-rotate").evaluate(x,{},k),m));const i=1===n.positionedLines.length;if(L+=kp(e,r,t,n,a,l,f,x,m,T,o.vertical?Eh.horizontal:Eh.horizontalOnly,i?Object.keys(o.horizontal):[q],N,z,_,S,k),i)break}o.vertical&&(F+=kp(e,r,t,o.vertical,a,l,f,x,m,T,Eh.vertical,["vertical"],N,D,_,S,k));let H=-1;const G=(e,t)=>e?Math.max(e,t):t;H=G(P,H),H=G(I,H),H=G(O,H);const K=H>-1?1:0;e.glyphOffsetArray.length>=sf.MAX_GLYPHS&&q("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==x.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,x.sortKey),e.symbolInstances.emplaceBack(U.x,U.y,U.z,t.x,t.y,N.right>=0?N.right:-1,N.center>=0?N.center:-1,N.left>=0?N.left:-1,N.vertical>=0?N.vertical:-1,z,D,B,void 0!==E?E:e.collisionBoxArray.length,void 0!==E?E+1:e.collisionBoxArray.length,void 0!==A?A:e.collisionBoxArray.length,void 0!==A?A+1:e.collisionBoxArray.length,void 0!==C?C:e.collisionBoxArray.length,void 0!==C?C+1:e.collisionBoxArray.length,j||e.collisionBoxArray.length,j?j+1:e.collisionBoxArray.length,u,L,F,M,R,K,0,V,W,H)}(e,s,f,a,r,n,o,O,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,S,E,l,0,k,C,m,t,i,c,u,d)};if("line"===A)for(const _ of Yh(t.geometry,0,0,ss,ss)){const t=Xh(_,w,T,r.vertical||g,n,v,x,e.overscaling,ss);for(const r of t)g&&Ap(e,g.text,j,r)||M(_,r,d)}else if("line-center"===A){for(const _ of t.geometry)if(_.length>1){const e=Kh(_,T,r.vertical||g,n,v,x);e&&M(_,e,d)}}else if("Polygon"===t.type)for(const _ of Su(t.geometry,0)){const e=hp(_,16);M(_[0],new Vh(e.x,e.y,0,0,void 0),d)}else if("LineString"===t.type)for(const _ of t.geometry)M(_,new Vh(_[0].x,_[0].y,0,0,void 0),d);else if("Point"===t.type)for(const _ of t.geometry)for(const e of _)M([e],new Vh(e.x,e.y,0,0,void 0),d)}const wp=255,Sp=wp*Nd;function kp(e,t,r,n,o,i,a,s,l,c,u,d,h,p,f,m,g){const y=function(e,t,r,n,o,i,a,s){const l=[];if(0===t.positionedLines.length)return l;const c=n.layout.get("text-rotate").evaluate(i,{})*Math.PI/180,u=function(e){const t=e[0],r=e[1],n=t*r;return n>0?[t,-r]:n<0?[-t,r]:0===t?[r,t]:[r,-t]}(r);let d=Math.abs(t.top-t.bottom);for(const m of t.positionedLines)d-=m.lineOffset;const h=t.positionedLines.length,p=d/h;let f=t.top-r[1];for(let m=0;m<h;++m){const e=t.positionedLines[m];f=cp(t,p,f,m);for(const n of e.positionedGlyphs){if(!n.rect)continue;const e=n.rect||{};let i=_h+1,d=!0,h=1,p=0;if(n.imageName){const e=a[n.imageName];if(!e)continue;if(e.sdf){q("SDF images are not supported in formatted text and will be ignored.");continue}d=!1,h=e.pixelRatio,i=Sh/h}const m=(o||s)&&n.vertical,g=n.metrics.advance*n.scale/2,y=n.metrics,b=n.rect;if(null===b)continue;s&&t.verticalizable&&(p=n.imageName?g-n.metrics.width*n.scale/2:0);const x=o?[n.x+g,n.y]:[0,0];let _=[0,0],w=[0,0],S=!1;o||(m?(w=[n.x+g+u[0],n.y+u[1]-p],S=!0):_=[n.x+g+r[0],n.y+r[1]-p]);const k=b.w*n.scale/(h*(n.localGlyph?ep:1)),T=b.h*n.scale/(h*(n.localGlyph?ep:1));let E,C,A,j;if(m){const e=n.y-f,t=new v(-g,g-e),r=-Math.PI/2,o=new v(...w);E=new v(-g+_[0],_[1]),E._rotateAround(r,t)._add(o),E.x+=-e+g,E.y-=(y.left-i)*n.scale;const a=n.imageName?y.advance*n.scale:Dd*n.scale,s=String.fromCharCode(n.glyph);Gd(s)?E.x+=(1-i)*n.scale:Kd(s)?E.x+=a-y.height*n.scale+(-i-1)*n.scale:E.x+=n.imageName||y.width+2*i===b.w&&y.height+2*i===b.h?(a-T)/2:(a-(y.height+2*i)*n.scale)/2,C=new v(E.x,E.y-k),A=new v(E.x+T,E.y),j=new v(E.x+T,E.y-k)}else{const e=(y.left-i)*n.scale-g+_[0],t=(-y.top-i)*n.scale+_[1],r=e+k,o=t+T;E=new v(e,t),C=new v(r,t),A=new v(e,o),j=new v(r,o)}if(c){let e;e=o?new v(0,0):S?new v(u[0],u[1]):new v(r[0],r[1]),E._rotateAround(c,e),C._rotateAround(c,e),A._rotateAround(c,e),j._rotateAround(c,e)}const P=new v(0,0),I=new v(0,0);l.push({tl:E,tr:C,bl:A,br:j,tex:e,writingMode:t.writingMode,glyphOffset:x,sectionIndex:n.sectionIndex,isSDF:d,pixelOffsetTL:P,pixelOffsetBR:I,minFontScaleX:0,minFontScaleY:0})}}return l}(0,n,l,i,a,s,o,e.allowVerticalPlacement),b=e.textSizeData;let x=null;"source"===b.kind?(x=[Nd*i.layout.get("text-size").evaluate(s,{},g)],x[0]>Sp&&q("".concat(e.layerIds[0],': Value for "text-size" is >= ').concat(wp,'. Reduce your "text-size".'))):"composite"===b.kind&&(x=[Nd*f.compositeTextSizes[0].evaluate(s,{},g),Nd*f.compositeTextSizes[1].evaluate(s,{},g)],(x[0]>Sp||x[1]>Sp)&&q("".concat(e.layerIds[0],': Value for "text-size" is >= ').concat(wp,'. Reduce your "text-size".'))),e.addSymbols(e.text,y,x,l,a,s,u,t,r,c.lineStartIndex,c.lineLength,p,m,g);for(const v of d)h[v]=e.text.placedSymbolArray.length-1;return 4*y.length}function Tp(e){for(const t in e)return e[t];return null}function Ep(e,t,r,n,o,i,a,s,l,c){let u=a.top,d=a.bottom,h=a.left,p=a.right;const f=a.collisionPadding;if(f&&(h-=f[0],u-=f[1],p+=f[2],d+=f[3]),l){const e=new v(h,u),t=new v(p,u),r=new v(h,d),n=new v(p,d),o=_(l);let i=new v(0,0);c&&(i=new v(c[0],c[1])),e._rotateAround(o,i),t._rotateAround(o,i),r._rotateAround(o,i),n._rotateAround(o,i),h=Math.min(e.x,t.x,r.x,n.x),p=Math.max(e.x,t.x,r.x,n.x),u=Math.min(e.y,t.y,r.y,n.y),d=Math.max(e.y,t.y,r.y,n.y)}return e.emplaceBack(t.x,t.y,t.z,r.x,r.y,h,u,p,d,s,n,o,i),e.length-1}function Cp(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);const t=e.bottom-e.top;return t>0?Math.max(10,t):null}function Ap(e,t,r,n){const o=e.compareText;if(t in o){const e=o[t];for(let t=e.length-1;t>=0;t--)if(n.dist(e[t])<r)return!0}else o[t]=[];return o[t].push(n),!1}function jp(e,t){const r=e.fovAboveCenter,n=e.elevation?e.elevation.getMinElevationBelowMSL()*t:0,o=(e._camera.position[2]*e.worldSize-n)/Math.cos(e._pitch),i=Math.sin(r)*o/Math.sin(Math.max(Math.PI/2-e._pitch-r,.01)),a=Math.sin(e._pitch)*i+o;return Math.min(1.01*a,o*(1/e._horizonShift))}function Pp(e,t){if(!t.isReprojectedInTileSpace)return{scale:1<<e.z,x:e.x,y:e.y,x2:e.x+1,y2:e.y+1,projection:t};const r=Math.pow(2,-e.z),n=e.x*r,o=(e.x+1)*r,i=e.y*r,a=(e.y+1)*r,s=Kl(n),l=Kl(o),c=Xl(i),u=Xl(a),d=t.project(s,c),h=t.project(l,c),p=t.project(l,u),f=t.project(s,u);let m=Math.min(d.x,h.x,p.x,f.x),g=Math.min(d.y,h.y,p.y,f.y),y=Math.max(d.x,h.x,p.x,f.x),v=Math.max(d.y,h.y,p.y,f.y);const b=r/16;function x(e,r,n,o,i,a){const s=(n+i)/2,l=(o+a)/2,c=t.project(Kl(s),Xl(l)),u=Math.max(0,m-c.x,g-c.y,c.x-y,c.y-v);m=Math.min(m,c.x),y=Math.max(y,c.x),g=Math.min(g,c.y),v=Math.max(v,c.y),u>b&&(x(e,c,n,o,s,l),x(c,r,s,l,i,a))}x(d,h,n,i,o,i),x(h,p,o,i,o,a),x(p,f,o,a,n,a),x(f,d,n,a,n,i),m-=b,g-=b,y+=b,v+=b;const _=1/Math.max(y-m,v-g);return{scale:_,x:m*_,y:g*_,x2:y*_,y2:v*_,projection:t}}const Ip=ps(new Float32Array(16));class Op{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,t){return{x:0,y:0,z:0}}unproject(e,t){return new Vl(0,0)}projectTilePoint(e,t,r){return{x:e,y:t,z:0}}locationPoint(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e._coordinatePoint(e.locationCoordinate(t),r)}pixelsPerMeter(e,t){return Gl(1,e)*t}pixelSpaceConversion(e,t,r){return 1}farthestPixelDistance(e){return jp(e,e.pixelsPerMeter)}pointCoordinate(e,t,r,n){const o=e.horizonLineFromTop(!1),i=new v(t,Math.max(o,r));return e.rayIntersectionCoordinate(e.pointRayIntersection(i,n))}pointCoordinate3D(e,t,r){const n=new v(t,r);if(e.elevation)return e.elevation.pointCoordinate(n);{const t=this.pointCoordinate(e,n.x,n.y,0);return[t.x,t.y,t.z]}}isPointAboveHorizon(e,t){if(e.elevation)return!this.pointCoordinate3D(e,t.x,t.y);const r=e.horizonLineFromTop();return t.y<r}createInversionMatrix(e,t){return Ip}createTileMatrix(e,t,r){let n,o,i;const a=r.canonical,s=ps(new Float64Array(16));if(this.isReprojectedInTileSpace){const l=Pp(a,this);n=1,o=l.x+r.wrap*l.scale,i=l.y,ys(s,s,[n/l.scale,n/l.scale,e.pixelsPerMeter/t])}else n=t/e.zoomScale(a.z),o=(a.x+Math.pow(2,a.z)*r.wrap)*n,i=a.y*n;return gs(s,s,[o,i,0]),ys(s,s,[n/ss,n/ss,1]),s}upVector(e,t,r){return[0,0,1]}upVectorScale(e,t,r){return{metersToTile:1}}}class Mp extends Op{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[t,r]=this.parallels=e.parallels||[29.5,45.5],n=Math.sin(_(t));this.n=(n+Math.sin(_(r)))/2,this.c=1+n*(2*this.n-n),this.r0=Math.sqrt(this.c)/this.n}project(e,t){const{n:r,c:n,r0:o}=this,i=_(e-this.center[0]),a=_(t),s=Math.sqrt(n-2*r*Math.sin(a))/r;return{x:s*Math.sin(i*r),y:s*Math.cos(i*r)-o,z:0}}unproject(e,t){const{n:r,c:n,r0:o}=this,i=o+t;let a=Math.atan2(e,Math.abs(i))*Math.sign(i);i*r<0&&(a-=Math.PI*Math.sign(e)*Math.sign(i));const s=_(this.center[0])*r;a=j(a,-Math.PI-s,Math.PI-s);const l=C(w(a/r)+this.center[0],-180,180),c=Math.asin(C((n-(e*e+i*i)*r*r)/(2*r),-1,1)),u=C(w(c),-Yl,Yl);return new Vl(l,u)}}const Rp=1.340264,Lp=-.081106,Fp=893e-6,zp=.003796,Dp=Math.sqrt(3)/2;class Np extends Op{project(e,t){t=t/180*Math.PI,e=e/180*Math.PI;const r=Math.asin(Dp*Math.sin(t)),n=r*r,o=n*n*n;return{x:.5*(e*Math.cos(r)/(Dp*(Rp+3*Lp*n+o*(7*Fp+9*zp*n)))/Math.PI+.5),y:1-.5*(r*(Rp+Lp*n+o*(Fp+zp*n))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let r=t=(2*(1-t)-1)*Math.PI,n=r*r,o=n*n*n;for(let c,u,d,h=0;h<12&&(u=r*(Rp+Lp*n+o*(Fp+zp*n))-t,d=Rp+3*Lp*n+o*(7*Fp+9*zp*n),c=u/d,r=C(r-c,-Math.PI/3,Math.PI/3),n=r*r,o=n*n*n,!(Math.abs(c)<1e-12));++h);const i=Dp*e*(Rp+3*Lp*n+o*(7*Fp+9*zp*n))/Math.cos(r),a=Math.asin(Math.sin(r)/Dp),s=C(180*i/Math.PI,-180,180),l=C(180*a/Math.PI,-Yl,Yl);return new Vl(s,l)}}class Bp extends Op{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){return{x:.5+e/360,y:.5-t/360,z:0}}unproject(e,t){const r=360*(e-.5),n=C(360*(.5-t),-Yl,Yl);return new Vl(r,n)}}const Up=Math.PI/2;function Vp(e){return Math.tan((Up+e)/2)}class Wp extends Op{constructor(e){super(e),this.center=e.center||[0,30];const[t,r]=this.parallels=e.parallels||[30,30];let n=_(t),o=_(r);this.southernCenter=n+o<0,this.southernCenter&&(n=-n,o=-o);const i=Math.cos(n),a=Vp(n);this.n=n===o?Math.sin(n):Math.log(i/Math.cos(o))/Math.log(Vp(o)/a),this.f=i*Math.pow(Vp(n),this.n)/this.n}project(e,t){t=_(t),this.southernCenter&&(t=-t),e=_(e-this.center[0]);const r=1e-6,{n:n,f:o}=this;o>0?t<-Up+r&&(t=-Up+r):t>Up-r&&(t=Up-r);const i=o/Math.pow(Vp(t),n);let a=i*Math.sin(n*e),s=o-i*Math.cos(n*e);return a=.5*(a/Math.PI+.5),s=.5*(s/Math.PI+.5),{x:a,y:this.southernCenter?s:1-s,z:0}}unproject(e,t){e=(2*e-.5)*Math.PI,this.southernCenter&&(t=1-t),t=(2*(1-t)-.5)*Math.PI;const{n:r,f:n}=this,o=n-t,i=Math.sign(o),a=Math.sign(r)*Math.sqrt(e*e+o*o);let s=Math.atan2(e,Math.abs(o))*i;o*r<0&&(s-=Math.PI*Math.sign(e)*i);const l=C(w(s/r)+this.center[0],-180,180),c=C(w(2*Math.atan(Math.pow(n/a,1/r))-Up),-Yl,Yl);return new Vl(l,this.southernCenter?-c:c)}}class qp extends Op{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,t){return{x:ql(e),y:Hl(t),z:0}}unproject(e,t){const r=Kl(e),n=Xl(t);return new Vl(r,n)}}const Hp=_(Yl);class Gp extends Op{project(e,t){const r=(t=_(t))*t,n=r*r;return{x:.5*((e=_(e))*(.8707-.131979*r+n*(n*(.003971*r-.001529*n)-.013791))/Math.PI+.5),y:1-.5*(t*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let r=t=(2*(1-t)-1)*Math.PI,n=25,o=0,i=r*r;do{i=r*r;const e=i*i;o=(r*(1.007226+i*(.015085+e*(.028874*i-.044475-.005916*e)))-t)/(1.007226+i*(.045255+e*(.259866*i-.311325-.005916*11*e))),r=C(r-o,-Hp,Hp)}while(Math.abs(o)>1e-6&&--n>0);i=r*r;const a=C(w(e/(.8707+i*(i*(i*i*i*(.003971-.001529*i)-.013791)-.131979))),-180,180),s=w(r);return new Vl(a,s)}}const Kp=_(Yl);class Xp extends Op{project(e,t){t=_(t),e=_(e);const r=Math.cos(t),n=2/Math.PI,o=Math.acos(r*Math.cos(e/2)),i=Math.sin(o)/o,a=.5*(e*n+2*r*Math.sin(e/2)/i)||0,s=.5*(t+Math.sin(t)/i)||0;return{x:.5*(a/Math.PI+.5),y:1-.5*(s/Math.PI+1),z:0}}unproject(e,t){let r=e=(2*e-.5)*Math.PI,n=t=(2*(1-t)-1)*Math.PI,o=25;const i=1e-6;let a=0,s=0;do{const o=Math.cos(n),i=Math.sin(n),l=2*i*o,c=i*i,u=o*o,d=Math.cos(r/2),h=Math.sin(r/2),p=2*d*h,f=h*h,m=1-u*d*d,g=m?1/m:0,y=m?Math.acos(o*d)*Math.sqrt(1/m):0,v=.5*(2*y*o*h+2*r/Math.PI)-e,b=.5*(y*i+n)-t,x=.5*g*(u*f+y*o*d*c)+1/Math.PI,_=g*(p*l/4-y*i*h),w=.125*g*(l*h-y*i*u*p),S=.5*g*(c*d+y*f*o)+.5,k=_*w-S*x;a=(b*_-v*S)/k,s=(v*w-b*x)/k,r=C(r-a,-Math.PI,Math.PI),n=C(n-s,-Kp,Kp)}while((Math.abs(a)>i||Math.abs(s)>i)&&--o>0);return new Vl(w(r),w(n))}}class Zp extends Op{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(_(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){const{scale:r,cosPhi:n}=this;return{x:_(e)*n*r+.5,y:-Math.sin(_(t))/n*r+.5,z:0}}unproject(e,t){const{scale:r,cosPhi:n}=this,o=-(t-.5)/r,i=C(w((e-.5)/r)/n,-180,180),a=Math.asin(C(o*n,-1,1)),s=C(w(a),-Yl,Yl);return new Vl(i,s)}}class Yp extends qp{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(e,t,r){const n=Cl(e,t,r);return zs(n,n,Pl(vl(r))),{x:n[0],y:n[1],z:n[2]}}locationPoint(e,t){const r=El(t.lat,t.lng),n=Rs([],r),o=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(t),e._centerAltitude):e._centerAltitude;Ms(r,r,n,Gl(1,0)*ss*o);const i=ps(new Float64Array(16));return ms(i,e.pixelMatrix,e.globeMatrix),zs(r,r,i),new v(r[0],r[1])}pixelsPerMeter(e,t){return Gl(1,0)*t}pixelSpaceConversion(e,t,r){const n=Gl(1,e)*t,o=Ir(Gl(1,45)*t,n,r);return this.pixelsPerMeter(e,t)/o}createTileMatrix(e,t,r){const n=Il(vl(r.canonical));return ms(new Float64Array(16),e.globeMatrix,n)}createInversionMatrix(e,t){const{center:r}=e,n=Pl(vl(t));return bs(n,n,_(r.lng)),vs(n,n,_(r.lat)),ys(n,n,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(n)}pointCoordinate(e,t,r,n){return ml(e,t,r,!0)||new $l(0,0)}pointCoordinate3D(e,t,r){const n=this.pointCoordinate(e,t,r,0);return[n.x,n.y,n.z]}isPointAboveHorizon(e,t){return!ml(e,t.x,t.y,!1)}farthestPixelDistance(e){const t=function(e,t){const r=e.cameraToCenterDistance,n=e._centerAltitude*t,o=e._camera,i=e._camera.forward(),a=Cs([],Os([],i,-r),[0,0,n]),s=e.worldSize/(2*Math.PI),l=[0,0,-s],c=e.width/e.height,u=Math.tan(e.fovAboveCenter),d=Os([],o.up(),u),h=Os([],o.right(),u*c),p=Rs([],Cs([],Cs([],i,d),h)),f=[];let m;if(new tl(a,p).closestPointOnSphere(l,s,f)){const t=Cs([],f,l),r=Bs([],t,a);m=Math.cos(e.fovAboveCenter)*Ts(r)}else{const e=Bs([],a,l),t=Bs([],l,a);Rs(t,t);const r=Ts(e)-s;m=Math.sqrt(r*(r+2*s));const n=Math.acos(m/(s+r))-Math.acos(Ls(i,t));m*=Math.cos(n)}return 1.01*m}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),r=Ml(e.zoom);if(r>0){const n=jp(e,Gl(1,e.center.lat)*e.worldSize),o=e.worldSize/(2*Math.PI),i=Math.max(e.width,e.height)/e.worldSize*Math.PI;return Ir(t,n+o*(1-Math.cos(i)),Math.pow(r,10))}return t}upVector(e,t,r){return Cl(t,r,e,1)}upVectorScale(e){return{metersToTile:fl(Al(vl(e)))}}}function Jp(e){const t=e.parallels,r=!!t&&Math.abs(t[0]+t[1])<.01;switch(e.name){case"mercator":return new qp(e);case"equirectangular":return new Bp(e);case"naturalEarth":return new Gp(e);case"equalEarth":return new Np(e);case"winkelTripel":return new Xp(e);case"albers":return r?new Zp(e):new Mp(e);case"lambertConformalConic":return r?new Zp(e):new Wp(e);case"globe":return new Yp(e)}throw new Error("Invalid projection name: ".concat(e.name))}const $p=Ku.types,Qp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ef(e,t,r,n,o,i,a,s,l,c,u,d,h){const p=s?Math.min(Sp,Math.round(s[0])):0,f=s?Math.min(Sp,Math.round(s[1])):0;e.emplaceBack(t,r,Math.round(32*n),Math.round(32*o),i,a,(p<<1)+(l?1:0),f,16*c,16*u,256*d,256*h)}function tf(e,t,r,n,o,i,a){e.emplaceBack(t,r,n,o,i,a)}function rf(e,t,r,n,o){e.emplaceBack(t,r,n,o),e.emplaceBack(t,r,n,o),e.emplaceBack(t,r,n,o),e.emplaceBack(t,r,n,o)}function nf(e){for(const t of e.sections)if(ci(t.text))return!0;return!1}class of{constructor(e){this.layoutVertexArray=new Zi,this.indexArray=new na,this.programConfigurations=e,this.segments=new as,this.dynamicLayoutVertexArray=new Hi,this.opacityVertexArray=new Ji,this.placedSymbolArray=new ma,this.globeExtVertexArray=new Yi}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,r,n){this.isEmpty()||(r&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Id.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Md.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Qp,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Od.members,!0)),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Yo(of,"SymbolBuffers");class af{constructor(e,t,r){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new r,this.segments=new as,this.collisionVertexArray=new ta,this.collisionVertexArrayExt=new ra}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Rd.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,Ld.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Yo(af,"CollisionBuffers");class sf{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ps([]),this.placementViewportMatrix=ps([]);const t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Bd(this.zoom,t["text-size"]),this.iconSizeData=Bd(this.zoom,t["icon-size"]);const r=this.layers[0].layout,n=r.get("symbol-sort-key"),o=r.get("symbol-z-order");this.canOverlap=r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&void 0!==n.constantOr(1),this.sortFeaturesByY=("viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=r.get("text-writing-mode").map((e=>Eh[e])),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new of(new Ya(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new of(new Ya(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new va,this.lineVertexArray=new ba,this.symbolInstances=new ya}calculateGlyphDependencies(e,t,r,n,o){for(let i=0;i<e.length;i++)if(t[e.charCodeAt(i)]=!0,n&&o){const r=Hd[e.charAt(i)];r&&(t[r.charCodeAt(0)]=!0)}}populate(e,t,r,n){const o=this.layers[0],i=o.layout,a="globe"===this.projection.name,s=i.get("text-font"),l=i.get("text-field"),c=i.get("icon-image"),u=("constant"!==l.value.kind||l.value.value instanceof Rt&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),d="constant"!==c.value.kind||!!c.value.value||Object.keys(c.parameters).length>0,h=i.get("symbol-sort-key");if(this.features=[],!u&&!d)return;const p=t.iconDependencies,f=t.glyphDependencies,m=t.availableImages,g=new wi(this.zoom);for(const{feature:y,id:v,index:b,sourceLayerIndex:x}of e){const e=o._featureFilter.needGeometry,t=sc(y,e);if(!o._featureFilter.filter(g,t,r))continue;if(e||(t.geometry=ac(y,r,n)),a&&1!==y.type&&r.z<=5){const e=t.geometry,n=.98078528056,o=(e,t)=>Ls(Cl(e.x,e.y,r,1),Cl(t.x,t.y,r,1))<n;for(let t=0;t<e.length;t++)e[t]=rc(e[t],o)}let l,c;if(u){const e=o.getValueAndResolveTokens("text-field",t,r,m),n=Rt.factory(e);nf(n)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===bi()||this.hasRTLText&&_i.isParsed())&&(l=qd(n,o,t))}if(d){const e=o.getValueAndResolveTokens("icon-image",t,r,m);c=e instanceof Lt?e:Lt.fromString(e)}if(!l&&!c)continue;const _=this.sortFeaturesByKey?h.evaluate(t,{},r):void 0;if(this.features.push({id:v,text:l,icon:c,index:b,sourceLayerIndex:x,geometry:t.geometry,properties:y.properties,type:$p[y.type],sortKey:_}),c&&(p[c.name]=!0),l){const e=s.evaluate(t,{},r).join(","),n="map"===i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Eh.vertical)>=0;for(const t of l.sections)if(t.image)p[t.image.name]=!0;else{const r=ri(l.toString()),o=t.fontStack||e,i=f[o]=f[o]||{};this.calculateGlyphDependencies(t.text,i,n,this.allowVerticalPlacement,r)}}}"line"===i.get("symbol-placement")&&(this.features=function(e){const t={},r={},n=[];let o=0;function i(t){n.push(e[t]),o++}function a(e,t,o){const i=r[e];return delete r[e],r[t]=i,n[i].geometry[0].pop(),n[i].geometry[0]=n[i].geometry[0].concat(o[0]),i}function s(e,r,o){const i=t[r];return delete t[r],t[e]=i,n[i].geometry[0].shift(),n[i].geometry[0]=o[0].concat(n[i].geometry[0]),i}function l(e,t,r){const n=r?t[0][t[0].length-1]:t[0][0];return"".concat(e,":").concat(n.x,":").concat(n.y)}for(let c=0;c<e.length;c++){const u=e[c],d=u.geometry,h=u.text?u.text.toString():null;if(!h){i(c);continue}const p=l(h,d),f=l(h,d,!0);if(p in r&&f in t&&r[p]!==t[f]){const e=s(p,f,d),o=a(p,f,n[e].geometry);delete t[p],delete r[f],r[l(h,n[o].geometry,!0)]=o,n[e].geometry=null}else p in r?a(p,f,d):f in t?s(p,f,d):(i(c),t[p]=o-1,r[f]=o-1)}return n.filter((e=>e.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((e,t)=>e.sortKey-t.sortKey))}update(e,t,r,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,r,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,r,n))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Jp(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const r=this.lineVertexArray.length;if(void 0!==e.segment)for(const{x:n,y:o}of t)this.lineVertexArray.emplaceBack(n,o);return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}}addSymbols(e,t,r,n,o,i,a,s,l,c,u,d,h,p){const f=e.indexArray,m=e.layoutVertexArray,g=e.globeExtVertexArray,y=e.segments.prepareSegment(4*t.length,m,f,this.canOverlap?i.sortKey:void 0),v=this.glyphOffsetArray.length,b=y.vertexLength,x=this.allowVerticalPlacement&&a===Eh.vertical?Math.PI/2:0,_=i.text&&i.text.sections;for(let S=0;S<t.length;S++){const{tl:n,tr:o,bl:a,br:c,tex:u,pixelOffsetTL:d,pixelOffsetBR:v,minFontScaleX:b,minFontScaleY:w,glyphOffset:k,isSDF:T,sectionIndex:E}=t[S],C=y.vertexLength,A=k[1];if(ef(m,l.x,l.y,n.x,A+n.y,u.x,u.y,r,T,d.x,d.y,b,w),ef(m,l.x,l.y,o.x,A+o.y,u.x+u.w,u.y,r,T,v.x,d.y,b,w),ef(m,l.x,l.y,a.x,A+a.y,u.x,u.y+u.h,r,T,d.x,v.y,b,w),ef(m,l.x,l.y,c.x,A+c.y,u.x+u.w,u.y+u.h,r,T,v.x,v.y,b,w),s){const{x:t,y:r,z:n}=s.anchor,[o,i,a]=s.up;tf(g,t,r,n,o,i,a),tf(g,t,r,n,o,i,a),tf(g,t,r,n,o,i,a),tf(g,t,r,n,o,i,a),rf(e.dynamicLayoutVertexArray,t,r,n,x)}else rf(e.dynamicLayoutVertexArray,l.x,l.y,l.z,x);f.emplaceBack(C,C+1,C+2),f.emplaceBack(C+1,C+2,C+3),y.vertexLength+=4,y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(k[0]),S!==t.length-1&&E===t[S+1].sectionIndex||e.programConfigurations.populatePaintArrays(m.length,i,i.index,{},h,p,_&&_[E])}const w=s?s.anchor:l;e.placedSymbolArray.emplaceBack(w.x,w.y,w.z,l.x,l.y,v,this.glyphOffsetArray.length-v,b,c,u,l.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],a,0,!1,0,d,0)}_commitLayoutVertex(e,t,r,n,o,i,a){e.emplaceBack(t,r,n,o,i,Math.round(a.x),Math.round(a.y))}_addCollisionDebugVertices(e,t,r,n,o,i,a){const s=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),l=s.vertexLength,c=a.tileAnchorX,u=a.tileAnchorY;for(let h=0;h<4;h++)r.collisionVertexArray.emplaceBack(0,0,0,0);r.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),r.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),r.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),r.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(r.layoutVertexArray,n,o,i,c,u,new v(e.x1,e.y1)),this._commitLayoutVertex(r.layoutVertexArray,n,o,i,c,u,new v(e.x2,e.y1)),this._commitLayoutVertex(r.layoutVertexArray,n,o,i,c,u,new v(e.x2,e.y2)),this._commitLayoutVertex(r.layoutVertexArray,n,o,i,c,u,new v(e.x1,e.y2)),s.vertexLength+=4;const d=r.indexArray;d.emplaceBack(l,l+1),d.emplaceBack(l+1,l+2),d.emplaceBack(l+2,l+3),d.emplaceBack(l+3,l),s.primitiveLength+=4}_addTextDebugCollisionBoxes(e,t,r,n,o,i){for(let a=n;a<o;a++){const n=r.get(a),o=this.getSymbolInstanceTextSize(e,i,t,a);this._addCollisionDebugVertices(n,o,this.textCollisionBox,n.projectedAnchorX,n.projectedAnchorY,n.projectedAnchorZ,i)}}_addIconDebugCollisionBoxes(e,t,r,n,o,i){for(let a=n;a<o;a++){const n=r.get(a),o=this.getSymbolInstanceIconSize(e,t,i.placedIconSymbolIndex);this._addCollisionDebugVertices(n,o,this.iconCollisionBox,n.projectedAnchorX,n.projectedAnchorY,n.projectedAnchorZ,i)}}generateCollisionDebugBuffers(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new af(Qi,Fd.members,ca),this.iconCollisionBox=new af(Qi,Fd.members,ca);const r=Vd(this.iconSizeData,e),n=Vd(this.textSizeData,e);for(let o=0;o<this.symbolInstances.length;o++){const i=this.symbolInstances.get(o);this._addTextDebugCollisionBoxes(n,e,t,i.textBoxStartIndex,i.textBoxEndIndex,i),this._addTextDebugCollisionBoxes(n,e,t,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i),this._addIconDebugCollisionBoxes(r,e,t,i.iconBoxStartIndex,i.iconBoxEndIndex,i),this._addIconDebugCollisionBoxes(r,e,t,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex,i)}}getSymbolInstanceTextSize(e,t,r,n){const o=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:n),i=Ud(this.textSizeData,e,o)/Dd;return this.tilePixelRatio*i}getSymbolInstanceIconSize(e,t,r){const n=this.icon.placedSymbolArray.get(r),o=Ud(this.iconSizeData,e,n);return this.tilePixelRatio*o}_commitDebugCollisionVertexUpdate(e,t,r){e.emplaceBack(t,-r,-r),e.emplaceBack(t,r,-r),e.emplaceBack(t,r,r),e.emplaceBack(t,-r,r)}_updateTextDebugCollisionBoxes(e,t,r,n,o,i){for(let a=n;a<o;a++){const n=r.get(a),o=this.getSymbolInstanceTextSize(e,i,t,a);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,o,n.padding)}}_updateIconDebugCollisionBoxes(e,t,r,n,o,i){for(let a=n;a<o;a++){const n=r.get(a),o=this.getSymbolInstanceIconSize(e,t,i);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,o,n.padding)}}updateCollisionDebugBuffers(e,t){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const r=Vd(this.iconSizeData,e),n=Vd(this.textSizeData,e);for(let o=0;o<this.symbolInstances.length;o++){const i=this.symbolInstances.get(o);this._updateTextDebugCollisionBoxes(n,e,t,i.textBoxStartIndex,i.textBoxEndIndex,i),this._updateTextDebugCollisionBoxes(n,e,t,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i),this._updateIconDebugCollisionBoxes(r,e,t,i.iconBoxStartIndex,i.iconBoxEndIndex,i.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(r,e,t,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex,i.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,t,r,n,o,i,a,s,l){const c={};if(t<r){const{x1:r,y1:n,x2:o,y2:i,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h,featureIndex:p}=e.get(t);c.textBox={x1:r,y1:n,x2:o,y2:i,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h},c.textFeatureIndex=p}if(n<o){const{x1:t,y1:r,x2:o,y2:i,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h,featureIndex:p}=e.get(n);c.verticalTextBox={x1:t,y1:r,x2:o,y2:i,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h},c.verticalTextFeatureIndex=p}if(i<a){const{x1:t,y1:r,x2:n,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h,featureIndex:p}=e.get(i);c.iconBox={x1:t,y1:r,x2:n,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h},c.iconFeatureIndex=p}if(s<l){const{x1:t,y1:r,x2:n,y2:o,padding:i,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h,featureIndex:p}=e.get(s);c.verticalIconBox={x1:t,y1:r,x2:n,y2:o,padding:i,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:h},c.verticalIconFeatureIndex=p}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const r=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const r=e.placedSymbolArray.get(t),n=r.vertexStartIndex+4*r.numGlyphs;for(let o=r.vertexStartIndex;o<n;o+=4)e.indexArray.emplaceBack(o,o+1,o+2),e.indexArray.emplaceBack(o+1,o+2,o+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),r=Math.cos(e),n=[],o=[],i=[];for(let a=0;a<this.symbolInstances.length;++a){i.push(a);const e=this.symbolInstances.get(a);n.push(0|Math.round(t*e.tileAnchorX+r*e.tileAnchorY)),o.push(e.featureIndex)}return i.sort(((e,t)=>n[e]-n[t]||o[t]-o[e])),i}addToSortKeyRanges(e,t){const r=this.sortKeyRanges[this.sortKeyRanges.length-1];r&&r.sortKey===t?r.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex);const{rightJustifiedTextSymbolIndex:r,centerJustifiedTextSymbolIndex:n,leftJustifiedTextSymbolIndex:o,verticalPlacedTextSymbolIndex:i,placedIconSymbolIndex:a,verticalPlacedIconSymbolIndex:s}=t;r>=0&&this.addIndicesForPlacedSymbol(this.text,r),n>=0&&n!==r&&this.addIndicesForPlacedSymbol(this.text,n),o>=0&&o!==n&&o!==r&&this.addIndicesForPlacedSymbol(this.text,o),i>=0&&this.addIndicesForPlacedSymbol(this.text,i),a>=0&&this.addIndicesForPlacedSymbol(this.icon,a),s>=0&&this.addIndicesForPlacedSymbol(this.icon,s)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Yo(sf,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),sf.MAX_GLYPHS=65535,sf.addDynamicAttributes=rf;const lf=new Ri({"symbol-placement":new Ii(et.layout_symbol["symbol-placement"]),"symbol-spacing":new Ii(et.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ii(et.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Oi(et.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ii(et.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ii(et.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ii(et.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ii(et.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ii(et.layout_symbol["icon-rotation-alignment"]),"icon-size":new Oi(et.layout_symbol["icon-size"]),"icon-text-fit":new Ii(et.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ii(et.layout_symbol["icon-text-fit-padding"]),"icon-image":new Oi(et.layout_symbol["icon-image"]),"icon-rotate":new Oi(et.layout_symbol["icon-rotate"]),"icon-padding":new Ii(et.layout_symbol["icon-padding"]),"icon-keep-upright":new Ii(et.layout_symbol["icon-keep-upright"]),"icon-offset":new Oi(et.layout_symbol["icon-offset"]),"icon-anchor":new Oi(et.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ii(et.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ii(et.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ii(et.layout_symbol["text-rotation-alignment"]),"text-field":new Oi(et.layout_symbol["text-field"]),"text-font":new Oi(et.layout_symbol["text-font"]),"text-size":new Oi(et.layout_symbol["text-size"]),"text-max-width":new Oi(et.layout_symbol["text-max-width"]),"text-line-height":new Oi(et.layout_symbol["text-line-height"]),"text-letter-spacing":new Oi(et.layout_symbol["text-letter-spacing"]),"text-justify":new Oi(et.layout_symbol["text-justify"]),"text-radial-offset":new Oi(et.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ii(et.layout_symbol["text-variable-anchor"]),"text-anchor":new Oi(et.layout_symbol["text-anchor"]),"text-max-angle":new Ii(et.layout_symbol["text-max-angle"]),"text-writing-mode":new Ii(et.layout_symbol["text-writing-mode"]),"text-rotate":new Oi(et.layout_symbol["text-rotate"]),"text-padding":new Ii(et.layout_symbol["text-padding"]),"text-keep-upright":new Ii(et.layout_symbol["text-keep-upright"]),"text-transform":new Oi(et.layout_symbol["text-transform"]),"text-offset":new Oi(et.layout_symbol["text-offset"]),"text-allow-overlap":new Ii(et.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ii(et.layout_symbol["text-ignore-placement"]),"text-optional":new Ii(et.layout_symbol["text-optional"])});var cf={paint:new Ri({"icon-opacity":new Oi(et.paint_symbol["icon-opacity"]),"icon-color":new Oi(et.paint_symbol["icon-color"]),"icon-halo-color":new Oi(et.paint_symbol["icon-halo-color"]),"icon-halo-width":new Oi(et.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Oi(et.paint_symbol["icon-halo-blur"]),"icon-translate":new Ii(et.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ii(et.paint_symbol["icon-translate-anchor"]),"text-opacity":new Oi(et.paint_symbol["text-opacity"]),"text-color":new Oi(et.paint_symbol["text-color"],{runtimeType:ht,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new Oi(et.paint_symbol["text-halo-color"]),"text-halo-width":new Oi(et.paint_symbol["text-halo-width"]),"text-halo-blur":new Oi(et.paint_symbol["text-halo-blur"]),"text-translate":new Ii(et.paint_symbol["text-translate"]),"text-translate-anchor":new Ii(et.paint_symbol["text-translate-anchor"])}),layout:lf};class uf{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:lt,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Yo(uf,"FormatSectionOverride",{omit:["defaultValue"]});class df extends ns{constructor(e){super(e,cf)}recalculate(e,t){super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const r=this.layout.get("text-writing-mode");if(r){const e=[];for(const t of r)e.indexOf(t)<0&&e.push(t);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,t,r,n){const o=this.layout.get(e).evaluate(t,{},r,n),i=this._unevaluatedLayout._values[e];return i.isDataDriven()||Zn(i.value)||!o?o:function(e,t){return t.replace(/{([^{}]+)}/g,((t,r)=>r in e?String(e[r]):""))}(t.properties,o)}createBucket(e){return new sf(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of cf.paint.overridableProperties){if(!df.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),r=new uf(t),n=new Xn(r,t.property.specification);let o=null;o="constant"===t.value.kind||"source"===t.value.kind?new Jn("source",n):new $n("composite",n,t.value.zoomStops,t.value._interpolationType),this.paint._values[e]=new ji(t.property,o,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,r){return!(!this.layout||t.isDataDriven()||r.isDataDriven())&&df.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const r=e.get("text-field"),n=cf.paint.properties[t];let o=!1;const i=e=>{for(const t of e)if(n.overrides&&n.overrides.hasOverride(t))return void(o=!0)};if("constant"===r.value.kind&&r.value.value instanceof Rt)i(r.value.value.sections);else if("source"===r.value.kind){const e=t=>{o||(t instanceof Ut&&Dt(t.value)===gt?i(t.value.sections):t instanceof Gt?i(t.sections):t.eachChild(e))},t=r.value;t._styleExpression&&e(t._styleExpression.expression)}return o}getProgramConfiguration(e){return new Za(this,e)}}var hf={paint:new Ri({"background-color":new Ii(et.paint_background["background-color"]),"background-pattern":new Ii(et.paint_background["background-pattern"]),"background-opacity":new Ii(et.paint_background["background-opacity"])})},pf={paint:new Ri({"raster-opacity":new Ii(et.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ii(et.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ii(et.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ii(et.paint_raster["raster-brightness-max"]),"raster-saturation":new Ii(et.paint_raster["raster-saturation"]),"raster-contrast":new Ii(et.paint_raster["raster-contrast"]),"raster-resampling":new Ii(et.paint_raster["raster-resampling"]),"raster-fade-duration":new Ii(et.paint_raster["raster-fade-duration"])})};class ff extends ns{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var mf={paint:new Ri({"sky-type":new Ii(et.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ii(et.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ii(et.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ii(et.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ii(et.paint_sky["sky-gradient-radius"]),"sky-gradient":new Mi(et.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ii(et.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ii(et.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ii(et.paint_sky["sky-opacity"])})};function gf(e,t,r){const n=[0,0,1],o=Ks([]);return Zs(o,o,r?-_(e)+Math.PI:_(e)),Xs(o,o,-_(t)),Ds(n,n,o),Rs(n,n)}const yf={circle:class extends ns{constructor(e){super(e,Ac)}createBucket(e){return new uc(e)}queryRadius(e){const t=e;return Sc("circle-radius",this,t)+Sc("circle-stroke-width",this,t)+kc(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,r,n,o,i,a,s){const l=Ec(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),i.angle,e.pixelToTileUnitsFactor),c=this.paint.get("circle-radius").evaluate(t,r)+this.paint.get("circle-stroke-width").evaluate(t,r);return jc(e,n,i,a,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,c)}getProgramIds(){return["circle"]}getProgramConfiguration(e){return new Za(this,e)}},heatmap:class extends ns{createBucket(e){return new Rc(e)}constructor(e){super(e,Bc),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Uc({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(e){return Sc("heatmap-radius",this,e)}queryIntersectsFeature(e,t,r,n,o,i,a,s){const l=this.paint.get("heatmap-radius").evaluate(t,r);return jc(e,n,i,a,s,!0,!0,new v(0,0),l)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(e){return new Za(this,e)}},hillshade:class extends ns{constructor(e){super(e,Vc)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends ns{constructor(e){super(e,ju)}getProgramIds(){const e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),r=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&r.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),r}getProgramConfiguration(e){return new Za(this,e)}recalculate(e,t){super.recalculate(e,t);const r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new Cu(e)}queryRadius(){return kc(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,r,n,o,i){return!e.queryGeometry.isAboveHorizon&&pc(Tc(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),i.angle,e.pixelToTileUnitsFactor),n)}isTileClipped(){return!0}},"fill-extrusion":class extends ns{constructor(e){super(e,ud)}createBucket(e){return new ed(e)}queryRadius(){return kc(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(e){return new Za(this,e)}queryIntersectsFeature(e,t,r,n,o,i,a,s,l){const c=Ec(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),i.angle,e.pixelToTileUnitsFactor),u=this.paint.get("fill-extrusion-height").evaluate(t,r),d=this.paint.get("fill-extrusion-base").evaluate(t,r),h=[0,0],p=s&&i.elevation,f=i.elevation?i.elevation.exaggeration():1,m=e.tile.getBucket(this);if(p&&m instanceof ed){const e=m.centroidVertexArray,t=l+1;t<e.length&&(h[0]=e.geta_centroid_pos0(t),h[1]=e.geta_centroid_pos1(t))}if(0===h[0]&&1===h[1])return!1;"globe"===i.projection.name&&(n=ld([n],[new v(0,0),new v(ss,ss)],e.tileID.canonical).map((e=>e.polygon)).flat());const g=p?s:null,[y,b]=function(e,t,r,n,o,i,a,s,l,c,u){return"globe"===e.projection.name?function(e,t,r,n,o,i,a,s,l,c,u){const d=[],h=[],p=e.projection.upVectorScale(u,e.center.lat,e.worldSize).metersToTile,f=[0,0,0,1],m=[0,0,0,1],g=(e,t,r,n)=>{e[0]=t,e[1]=r,e[2]=n,e[3]=1},y=sd();r>0&&(r+=y),n+=y;for(const v of t){const t=[],y=[];for(const d of v){const h=d.x+o.x,v=d.y+o.y,b=e.projection.projectTilePoint(h,v,u),x=e.projection.upVector(u,d.x,d.y);let _=r,w=n;if(a){const e=bd(h,v,r,n,a,s,l,c);_+=e.base,w+=e.top}0!==r?g(f,b.x+x[0]*p*_,b.y+x[1]*p*_,b.z+x[2]*p*_):g(f,b.x,b.y,b.z),g(m,b.x+x[0]*p*w,b.y+x[1]*p*w,b.z+x[2]*p*w),zs(f,f,i),zs(m,m,i),t.push(new gd(f[0],f[1],f[2])),y.push(new gd(m[0],m[1],m[2]))}d.push(t),h.push(y)}return[d,h]}(e,t,r,n,o,i,a,s,l,c,u):a?function(e,t,r,n,o,i,a,s,l){const c=[],u=[],d=[0,0,0,1];for(const h of e){const e=[],p=[];for(const c of h){const u=c.x+n.x,h=c.y+n.y,f=bd(u,h,t,r,i,a,s,l);d[0]=u,d[1]=h,d[2]=f.base,d[3]=1,Hs(d,d,o),d[3]=Math.max(d[3],1e-5);const m=new gd(d[0]/d[3],d[1]/d[3],d[2]/d[3]);d[0]=u,d[1]=h,d[2]=f.top,d[3]=1,Hs(d,d,o),d[3]=Math.max(d[3],1e-5);const g=new gd(d[0]/d[3],d[1]/d[3],d[2]/d[3]);e.push(m),p.push(g)}c.push(e),u.push(p)}return[c,u]}(t,r,n,o,i,a,s,l,c):function(e,t,r,n,o){const i=[],a=[],s=o[8]*t,l=o[9]*t,c=o[10]*t,u=o[11]*t,d=o[8]*r,h=o[9]*r,p=o[10]*r,f=o[11]*r;for(const m of e){const e=[],t=[];for(const r of m){const i=r.x+n.x,a=r.y+n.y,m=o[0]*i+o[4]*a+o[12],g=o[1]*i+o[5]*a+o[13],y=o[2]*i+o[6]*a+o[14],v=o[3]*i+o[7]*a+o[15],b=m+s,x=g+l,_=y+c,w=Math.max(v+u,1e-5),S=m+d,k=g+h,T=y+p,E=Math.max(v+f,1e-5);e.push(new gd(b/w,x/w,_/w)),t.push(new gd(S/E,k/E,T/E))}i.push(e),a.push(t)}return[i,a]}(t,r,n,o,i)}(i,n,d,u,c,a,g,h,f,i.center.lat,e.tileID.canonical),x=e.queryGeometry;return function(e,t,r){let n=1/0;pc(r,t)&&(n=vd(r,t[0]));for(let o=0;o<t.length;o++){const i=t[o],a=e[o];for(let e=0;e<i.length-1;e++){const t=i[e],o=[t,i[e+1],a[e+1],a[e],t];dc(r,o)&&(n=Math.min(n,vd(r,o)))}}return n!==1/0&&n}(y,b,x.isPointQuery()?x.screenBounds:x.screenGeometry)}},line:class extends ns{constructor(e){super(e,Ad),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof Pr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=jd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new Ed(e)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(e){return new Za(this,e)}queryRadius(e){const t=e,r=Pd(Sc("line-width",this,t),Sc("line-gap-width",this,t)),n=Sc("line-offset",this,t);return r/2+Math.abs(n)+kc(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,r,n,o,i){if(e.queryGeometry.isAboveHorizon)return!1;const a=Tc(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),i.angle,e.pixelToTileUnitsFactor),s=e.pixelToTileUnitsFactor/2*Pd(this.paint.get("line-width").evaluate(t,r),this.paint.get("line-gap-width").evaluate(t,r)),l=this.paint.get("line-offset").evaluate(t,r);return l&&(n=function(e,t){const r=[],n=new v(0,0);for(let o=0;o<e.length;o++){const i=e[o],a=[];for(let e=0;e<i.length;e++){const r=i[e],o=i[e+1],s=0===e?n:r.sub(i[e-1])._unit()._perp(),l=e===i.length-1?n:o.sub(r)._unit()._perp(),c=s._add(l)._unit();c._mult(1/(c.x*l.x+c.y*l.y)),a.push(c._mult(t)._add(r))}r.push(a)}return r}(n,l*e.pixelToTileUnitsFactor)),function(e,t,r){for(let n=0;n<t.length;n++){const o=t[n];if(e.length>=3)for(let t=0;t<o.length;t++)if(xc(e,o[t]))return!0;if(fc(e,o,r))return!0}return!1}(a,n,s)}isTileClipped(){return!0}},symbol:df,background:class extends ns{constructor(e){super(e,hf)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends ns{constructor(e){super(e,pf)}getProgramIds(){return["raster"]}},sky:class extends ns{constructor(e){super(e,mf),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Uc({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}getCenter(e,t){if("atmosphere"===this.paint.get("sky-type")){const r=this.paint.get("sky-atmosphere-sun"),n=!r,o=e.style.light,i=o.properties.get("position");return n&&"viewport"===o.properties.get("anchor")&&q("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),n?gf(i.azimuthal,90-i.polar,t):gf(r[0],90-r[1],t)}const r=this.paint.get("sky-gradient-center");return gf(r[0],90-r[1],t)}is3D(){return!1}isSky(){return!0}markSkyboxValid(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}};class vf{constructor(e,t,r,n){this.context=e,this.format=r,this.texture=e.gl.createTexture(),this.update(t,n)}update(e,r,n){const{width:o,height:i}=e,{context:a}=this,{gl:s}=a,{HTMLImageElement:l,HTMLCanvasElement:c,HTMLVideoElement:u,ImageData:d,ImageBitmap:h}=t;if(s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!r||!1!==r.premultiply)),n||this.size&&this.size[0]===o&&this.size[1]===i){const{x:t,y:r}=n||{x:0,y:0};e instanceof l||e instanceof c||e instanceof u||e instanceof d||h&&e instanceof h?s.texSubImage2D(s.TEXTURE_2D,0,t,r,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,t,r,o,i,s.RGBA,s.UNSIGNED_BYTE,e.data)}else this.size=[o,i],e instanceof l||e instanceof c||e instanceof u||e instanceof d||h&&e instanceof h?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,o,i,0,this.format,s.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(r&&r.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&s.generateMipmap(s.TEXTURE_2D)}bind(e,t){const{context:r}=this,{gl:n}=r;n.bindTexture(n.TEXTURE_2D,this.texture),e!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.useMipmap?e===n.NEAREST?n.NEAREST_MIPMAP_NEAREST:n.LINEAR_MIPMAP_NEAREST:e),this.filter=e),t!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class bf{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){this._channel=void 0,this._callback=()=>{}}}class xf{constructor(){this.tasks={},this.taskQueue=[],D(["process"],this),this.invoker=new bf(this.process),this.nextId=0}add(e,t){const r=this.nextId++,n=function(e){let{type:t,isSymbolTile:r,zoom:n}=e;return n=n||0,"message"===t?0:"maybePrepare"!==t||r?"parseTile"!==t||r?"parseTile"===t&&r?300-n:"maybePrepare"===t&&r?400-n:500:200-n:100-n}(t);if(0===n){K();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[r]={fn:e,metadata:t,priority:n,id:r},this.taskQueue.push(r),this.invoker.trigger(),{cancel:()=>{delete this.tasks[r]}}}process(){K();try{if(this.taskQueue=this.taskQueue.filter((e=>!!this.tasks[e])),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const t=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!t)return;t.fn()}finally{}}pick(){let e=null,t=1/0;for(let n=0;n<this.taskQueue.length;n++){const r=this.tasks[this.taskQueue[n]];r.priority<t&&(t=r.priority,e=n)}if(null===e)return null;const r=this.taskQueue[e];return this.taskQueue.splice(e,1),r}remove(){this.invoker.remove()}}class _f{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const r=e[t];this._stringToNumber[r]=t,this._numberToString[t]=r}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const wf=["tile","layer","source","sourceLayer","state"];class Sf{constructor(e,t,r,n,o){this.type="Feature",this._vectorTileFeature=e,this._z=t,this._x=r,this._y=n,this.properties=e.properties,this.id=o}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(e.id=this.id);for(const t of wf)void 0!==this[t]&&(e[t]=this[t]);return e}}const kf=32,Tf=33,Ef=new Uint16Array(8184);for(let Sm=0;Sm<2046;Sm++){let e=Sm+2,t=0,r=0,n=0,o=0,i=0,a=0;for(1&e?n=o=i=kf:t=r=a=kf;(e>>=1)>1;){const s=t+n>>1,l=r+o>>1;1&e?(n=t,o=r,t=i,r=a):(t=n,r=o,n=i,o=a),i=s,a=l}const s=4*Sm;Ef[s+0]=t,Ef[s+1]=r,Ef[s+2]=n,Ef[s+3]=o}const Cf=new Uint16Array(2178),Af=new Uint8Array(1089),jf=new Uint16Array(1089);function Pf(e){return 0===e?-.03125:32===e?.03125:0}var If=Ni([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Of={type:2,extent:ss,loadGeometry:()=>[[new v(0,0),new v(ss+1,0),new v(ss+1,ss+1),new v(0,ss+1),new v(0,0)]]};class Mf{constructor(e,t,r,n,o){this.tileID=e,this.uid=R(),this.uses=0,this.tileSize=t,this.tileZoom=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=o,this.expiredRequestCount=0,this.state="loading",n&&n.transform&&(this.projection=n.transform.projection)}registerFadeDuration(e){const t=e+this.timeAdded;t<Xe.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Pp(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,t,r){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const r={};if(!t)return r;for(const n of e){const e=n.layerIds.map((e=>t.getLayer(e))).filter(Boolean);if(0!==e.length){n.layers=e,n.stateDependentLayerIds&&(n.stateDependentLayers=n.stateDependentLayerIds.map((t=>e.filter((e=>e.id===t))[0])));for(const t of e)r[t.id]=n}}return r}(e.buckets,t.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const t=this.buckets[e];if(t instanceof sf){if(this.hasSymbolBuckets=!0,!r)break;t.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const t=this.buckets[e];if(t instanceof sf&&t.hasRTLText){this.hasRTLText=!0,_i.isLoading()||_i.isLoaded()||"deferred"!==bi()||xi();break}}this.queryPadding=0;for(const e in this.buckets){const r=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(e).queryRadius(r))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new pa}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const r in this.buckets){const t=this.buckets[r];t.uploadPending()&&t.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new vf(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new vf(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new vf(e,this.lineAtlas.image,t.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,r,n,o,i,a,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:n,pixelPosMatrix:a,transform:i,params:o,tileTransform:this.tileTransform},e,t,r):{}}querySourceFeatures(e,t){const r=this.latestFeatureIndex;if(!r||!r.rawTileData)return;const n=r.loadVTLayers(),o=t?t.sourceLayer:"",i=n._geojsonTileLayer||n[o];if(!i)return;const a=ho(t&&t.filter),{z:s,x:l,y:c}=this.tileID.canonical,u={z:s,x:l,y:c};for(let d=0;d<i.length;d++){const t=i.feature(d);if(a.needGeometry){const e=sc(t,!0);if(!a.filter(new wi(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!a.filter(new wi(this.tileID.overscaledZ),t))continue;const n=r.getId(t,o),h=new Sf(t,s,l,c,n);h.tile=u,e.push(h)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const t=this.expirationTime;if(e.cacheControl){const t=X(e.cacheControl);t["max-age"]&&(this.expirationTime=Date.now()+1e3*t["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let r=!1;if(this.expirationTime>e)r=!1;else if(t)if(this.expirationTime<t)r=!0;else{const n=this.expirationTime-t;n?this.expirationTime=e+Math.max(n,3e4):r=!0}else r=!0;r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length||!t)return;const r=this.latestFeatureIndex.loadVTLayers(),n=t.style.listImages();for(const o in this.buckets){if(!t.style.hasLayer(o))continue;const i=this.buckets[o],a=i.layers[0].sourceLayer||"_geojsonTileLayer",s=r[a],l=e[a];if(!s||!l||0===Object.keys(l).length)continue;if(i.update(l,s,n,this.imageAtlas&&this.imageAtlas.patternPositions||{}),i instanceof Ed||i instanceof Cu){const e=t.style._getSourceCache(i.layers[0].source);t._terrain&&t._terrain.enabled&&e&&i.programConfigurations.needsUpload&&t._terrain._clearRenderCacheForTile(e.id,this.tileID)}const c=t&&t.style&&t.style.getLayer(o);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(i)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Xe.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=Xe.now()+e}setTexture(e,t){const r=t.context,n=r.gl;this.texture=this.texture||t.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new vf(r,e,n.RGBA,{useMipmap:!0}),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE))}setDependencies(e,t){const r={};for(const n of t)r[n]=!0;this.dependencies[e]=r}hasDependency(e,t){for(const r of e){const e=this.dependencies[r];if(e)for(const r of t)if(e[r])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,t){if(!t||"mercator"===t.name||this._tileDebugBuffer)return;const r=ac(Of,this.tileID.canonical,this.tileTransform)[0],n=new Ui,o=new ua;for(let i=0;i<r.length;i++){const{x:e,y:t}=r[i];n.emplaceBack(e,t),o.emplaceBack(i)}o.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(o),this._tileDebugBuffer=e.createVertexBuffer(n,el.members),this._tileDebugSegments=as.simpleSegment(0,0,n.length,o.length)}_makeTileBoundsBuffers(e,t){if(this._tileBoundsBuffer||!t||"mercator"===t.name)return;const r=ac(Of,this.tileID.canonical,this.tileTransform)[0];let n,o;if(this.isRaster){const e=function(e,t){const r=Pp(e,t),n=Math.pow(2,e.z);for(let c=0;c<Tf;c++)for(let o=0;o<Tf;o++){const i=Kl((e.x+(o+Pf(o))/kf)/n),a=Xl((e.y+(c+Pf(c))/kf)/n),s=t.project(i,a),l=c*Tf+o;Cf[2*l+0]=Math.round((s.x*r.scale-r.x)*ss),Cf[2*l+1]=Math.round((s.y*r.scale-r.y)*ss)}Af.fill(0),jf.fill(0);for(let c=2045;c>=0;c--){const e=4*c,t=Ef[e+0],r=Ef[e+1],n=Ef[e+2],o=Ef[e+3],i=t+n>>1,a=r+o>>1,s=i+a-r,l=a+t-i,u=r*Tf+t,d=o*Tf+n,h=a*Tf+i,p=Math.hypot((Cf[2*u+0]+Cf[2*d+0])/2-Cf[2*h+0],(Cf[2*u+1]+Cf[2*d+1])/2-Cf[2*h+1])>=16;Af[h]=Af[h]||(p?1:0),c<1022&&(Af[h]=Af[h]||Af[(r+l>>1)*Tf+(t+s>>1)]||Af[(o+l>>1)*Tf+(n+s>>1)])}const o=new Wi,i=new na;let a=0;function s(e,t){const r=t*Tf+e;return 0===jf[r]&&(o.emplaceBack(Cf[2*r+0],Cf[2*r+1],e*ss/kf,t*ss/kf),jf[r]=++a),jf[r]-1}function l(e,t,r,n,o,a){const c=e+r>>1,u=t+n>>1;if(Math.abs(e-o)+Math.abs(t-a)>1&&Af[u*Tf+c])l(o,a,e,t,c,u),l(r,n,o,a,c,u);else{const l=s(e,t),c=s(r,n),u=s(o,a);i.emplaceBack(l,c,u)}}return l(0,0,kf,kf,kf,0),l(kf,kf,0,0,0,kf),{vertices:o,indices:i}}(this.tileID.canonical,t);n=e.vertices,o=e.indices}else{n=new Wi,o=new na;for(const{x:t,y:o}of r)n.emplaceBack(t,o,0,0);const e=vu(n.int16,void 0,4);for(let t=0;t<e.length;t+=3)o.emplaceBack(e[t],e[t+1],e[t+2])}this._tileBoundsBuffer=e.createVertexBuffer(n,If.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(o),this._tileBoundsSegments=as.simpleSegment(0,0,n.length,o.length)}_makeGlobeTileDebugBuffers(e,t){const r=t.projection;if(!r||"globe"!==r.name||t.freezeTileCoverage)return;const n=this.tileID.canonical,o=Pl(xl(n,t)),i=Ml(t.zoom);let a;i>0&&(a=fs(new Float64Array(16),t.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,n,t,o,a,i),this._makeGlobeTileDebugTextBuffer(e,n,t,o,a,i)}_globePoint(e,t,r,n,o,i,a){let s=Cl(e,t,r);if(i){const o=1<<r.z,l=ql(n.center.lng),c=Hl(n.center.lat),u=(r.x+.5)/o-l;let d=0;u>.5?d=-1:u<-.5&&(d=1);let h=(e/ss+r.x)/o+d,p=(t/ss+r.y)/o;h=(h-l)*n._pixelsPerMercatorPixel+l,p=(p-c)*n._pixelsPerMercatorPixel+c;const f=[h*n.worldSize,p*n.worldSize,0];zs(f,f,i),s=bl(s,f,a)}return zs(s,s,o)}_makeGlobeTileDebugBorderBuffer(e,t,r,n,o,i){const a=new Ui,s=new ua,l=new Vi,c=(e,c,u,d,h)=>{const p=(u-e)/(h-1),f=(d-c)/(h-1),m=a.length;for(let g=0;g<h;g++){const u=e+g*p,d=c+g*f;a.emplaceBack(u,d);const h=this._globePoint(u,d,t,r,n,o,i);l.emplaceBack(h[0],h[1],h[2]),s.emplaceBack(m+g)}},u=ss;c(0,0,u,0,16),c(u,0,u,u,16),c(u,u,0,u,16),c(0,u,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(s),this._tileDebugBuffer=e.createVertexBuffer(a,el.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(l,Qs.members),this._tileDebugSegments=as.simpleSegment(0,0,a.length,s.length)}_makeGlobeTileDebugTextBuffer(e,t,r,n,o,i){const a=ss/4,s=new Ui,l=new na,c=new Vi,u=25;l.reserve(32),s.reserve(u),c.reserve(u);const d=(e,t)=>u*e+t;for(let h=0;h<u;h++){const e=h*a;for(let l=0;l<u;l++){const u=l*a;s.emplaceBack(u,e);const d=this._globePoint(u,e,t,r,n,o,i);c.emplaceBack(d[0],d[1],d[2])}}for(let h=0;h<4;h++)for(let e=0;e<4;e++){const t=d(h,e),r=d(h,e+1),n=d(h+1,e),o=d(h+1,e+1);l.emplaceBack(t,r,n),l.emplaceBack(n,r,o)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(l),this._tileDebugTextBuffer=e.createVertexBuffer(s,el.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(c,Qs.members),this._tileDebugTextSegments=as.simpleSegment(0,0,u,32)}}class Rf{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,t,r){const n=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][n]=this.stateChanges[e][n]||{},O(this.stateChanges[e][n],r),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==n&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][n]){this.deletedStates[e][n]={};for(const t in this.state[e][n])r[t]||(this.deletedStates[e][n][t]=null)}else for(const o in r)this.deletedStates[e]&&this.deletedStates[e][n]&&null===this.deletedStates[e][n][o]&&delete this.deletedStates[e][n][o]}removeFeatureState(e,t,r){if(null===this.deletedStates[e])return;const n=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},r&&void 0!==t)null!==this.deletedStates[e][n]&&(this.deletedStates[e][n]=this.deletedStates[e][n]||{},this.deletedStates[e][n][r]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][n])for(r in this.deletedStates[e][n]={},this.stateChanges[e][n])this.deletedStates[e][n][r]=null;else this.deletedStates[e][n]=null;else this.deletedStates[e]=null}getState(e,t){const r=String(t),n=O({},(this.state[e]||{})[r],(this.stateChanges[e]||{})[r]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const r=this.deletedStates[e][t];if(null===r)return{};for(const e in r)delete n[e]}return n}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,t){const r={};for(const n in this.stateChanges){this.state[n]=this.state[n]||{};const e={};for(const t in this.stateChanges[n])this.state[n][t]||(this.state[n][t]={}),O(this.state[n][t],this.stateChanges[n][t]),e[t]=this.state[n][t];r[n]=e}for(const n in this.deletedStates){this.state[n]=this.state[n]||{};const e={};if(null===this.deletedStates[n])for(const t in this.state[n])e[t]={},this.state[n][t]={};else for(const t in this.deletedStates[n]){if(null===this.deletedStates[n][t])this.state[n][t]={};else if(this.state[n][t])for(const e of Object.keys(this.deletedStates[n][t]))delete this.state[n][t][e];e[t]=this.state[n][t]}r[n]=r[n]||{},O(r[n],e)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(const n in e)e[n].setFeatureState(r,t)}}class Lf{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,t){const r=this.toIdx(e,t);return{min:this.minimums[r],max:this.maximums[r]}}isLeaf(e,t){return this.leaves[this.toIdx(e,t)]}toIdx(e,t){return t*this.size+e}}function Ff(e,t,r,n){let o=0,i=Number.MAX_VALUE;for(let a=0;a<3;a++)if(Math.abs(n[a])<1e-15){if(r[a]<e[a]||r[a]>t[a])return null}else{const s=1/n[a];let l=(e[a]-r[a])*s,c=(t[a]-r[a])*s;if(l>c){const e=l;l=c,c=e}if(l>o&&(o=l),c<i&&(i=c),o>i)return null}return o}function zf(e,t,r,n,o,i,a,s,l,c,u){const d=n-e,h=o-t,p=i-r,f=a-e,m=s-t,g=l-r,y=u[1]*g-u[2]*m,v=u[2]*f-u[0]*g,b=u[0]*m-u[1]*f,x=d*y+h*v+p*b;if(Math.abs(x)<1e-15)return null;const _=1/x,w=c[0]-e,S=c[1]-t,k=c[2]-r,T=(w*y+S*v+k*b)*_;if(T<0||T>1)return null;const E=S*p-k*h,C=k*d-w*p,A=w*h-S*d,j=(u[0]*E+u[1]*C+u[2]*A)*_;return j<0||T+j>1?null:(f*E+m*C+g*A)*_}function Df(e,t,r){return(e-t)/(r-t)}function Nf(e,t,r,n,o,i,a,s,l){const c=1<<r,u=i-n,d=a-o,h=(e+1)/c*u+n,p=(t+0)/c*d+o,f=(t+1)/c*d+o;s[0]=(e+0)/c*u+n,s[1]=p,l[0]=h,l[1]=f}class Bf{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const t=function(e){const t=Math.ceil(Math.log2(e.dim/8)),r=[];let n=Math.ceil(Math.pow(2,t));const o=1/n,i=(e,t,r,n,o)=>{const i=n?1:0,a=(e+1)*r-i,s=t*r,l=(t+1)*r-i;o[0]=e*r,o[1]=s,o[2]=a,o[3]=l};let a=new Lf(n);const s=[];for(let l=0;l<n*n;l++){i(l%n,Math.floor(l/n),o,!1,s);const t=Vf(s[0],s[1],e),r=Vf(s[2],s[1],e),c=Vf(s[2],s[3],e),u=Vf(s[0],s[3],e);a.minimums.push(Math.min(t,r,c,u)),a.maximums.push(Math.max(t,r,c,u)),a.leaves.push(1)}for(r.push(a),n/=2;n>=1;n/=2){const e=r[r.length-1];a=new Lf(n);for(let t=0;t<n*n;t++){i(t%n,Math.floor(t/n),2,!0,s);const r=e.getElevation(s[0],s[1]),o=e.getElevation(s[2],s[1]),l=e.getElevation(s[2],s[3]),c=e.getElevation(s[0],s[3]),u=e.isLeaf(s[0],s[1]),d=e.isLeaf(s[2],s[1]),h=e.isLeaf(s[2],s[3]),p=e.isLeaf(s[0],s[3]),f=Math.min(r.min,o.min,l.min,c.min),m=Math.max(r.max,o.max,l.max,c.max),g=u&&d&&h&&p;a.maximums.push(m),a.minimums.push(f),a.leaves.push(m-f<=5&&g?1:0)}r.push(a)}return r}(this.dem),r=t.length-1,n=t[r];this._addNode(n.minimums[0],n.maximums[0],n.leaves[0]),this._construct(t,0,0,r,0)}raycastRoot(e,t,r,n,o,i){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Ff([e,t,-100],[r,n,this.maximums[0]*a],o,i)}raycast(e,t,r,n,o,i){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;if(!this.nodeCount)return null;const s=this.raycastRoot(e,t,r,n,o,i,a);if(null==s)return null;const l=[],c=[],u=[],d=[],h=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];for(;h.length>0;){const{idx:s,t:p,nodex:f,nodey:m,depth:g}=h.pop();if(this.leaves[s]){Nf(f,m,g,e,t,r,n,u,d);const s=1<<g,l=(f+0)/s,c=(f+1)/s,h=(m+0)/s,y=(m+1)/s,v=Vf(l,h,this.dem)*a,b=Vf(c,h,this.dem)*a,x=Vf(c,y,this.dem)*a,_=Vf(l,y,this.dem)*a,w=zf(u[0],u[1],v,d[0],u[1],b,d[0],d[1],x,o,i),S=zf(d[0],d[1],x,u[0],d[1],_,u[0],u[1],v,o,i),k=Math.min(null!==w?w:Number.MAX_VALUE,null!==S?S:Number.MAX_VALUE);if(k!==Number.MAX_VALUE)return k;{const e=Ms([],o,i,p);if(Uf(v,b,_,x,Df(e[0],u[0],d[0]),Df(e[1],u[1],d[1]))>=e[2])return p}continue}let y=0;for(let h=0;h<this._siblingOffset.length;h++){Nf((f<<1)+this._siblingOffset[h][0],(m<<1)+this._siblingOffset[h][1],g+1,e,t,r,n,u,d),u[2]=-100,d[2]=this.maximums[this.childOffsets[s]+h]*a;const p=Ff(u,d,o,i);if(null!=p){const e=p;l[h]=e;let t=!1;for(let r=0;r<y&&!t;r++)e>=l[c[r]]&&(c.splice(r,0,h),t=!0);t||(c[y]=h),y++}}for(let e=0;e<y;e++){const t=c[e];h.push({idx:this.childOffsets[s]+t,t:l[t],nodex:(f<<1)+this._siblingOffset[t][0],nodey:(m<<1)+this._siblingOffset[t][1],depth:g+1})}}return null}_addNode(e,t,r){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(r),this.childOffsets.push(0),this.nodeCount++}_construct(e,t,r,n,o){if(1===e[n].isLeaf(t,r))return;this.childOffsets[o]||(this.childOffsets[o]=this.nodeCount);const i=n-1,a=e[i];let s=0,l=0;for(let c=0;c<this._siblingOffset.length;c++){const e=2*t+this._siblingOffset[c][0],n=2*r+this._siblingOffset[c][1],o=a.getElevation(e,n),i=a.isLeaf(e,n),u=this._addNode(o.min,o.max,i);i&&(s|=1<<c),l||(l=u)}for(let c=0;c<this._siblingOffset.length;c++)s&1<<c||this._construct(e,2*t+this._siblingOffset[c][0],2*r+this._siblingOffset[c][1],i,l+c)}}function Uf(e,t,r,n,o,i){return Ir(Ir(e,r,i),Ir(t,n,i),o)}function Vf(e,t,r){const n=r.dim,o=C(e*n-.5,0,n-1),i=C(t*n-.5,0,n-1),a=Math.floor(o),s=Math.floor(i),l=Math.min(a+1,n-1),c=Math.min(s+1,n-1);return Uf(r.get(a,s),r.get(l,s),r.get(a,c),r.get(l,c),o-a,i-s)}const Wf={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function qf(e,t,r){return(256*e*256+256*t+r)/10-1e4}function Hf(e,t,r){return 256*e+t+r/256-32768}class Gf{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return q('"'.concat(r,'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".'));this.stride=t.height;const i=this.dim=t.height-2,a=new Uint32Array(t.data.buffer);if(this.pixels=new Uint8Array(t.data.buffer),this.encoding=r||"mapbox",this.borderReady=n,!n){for(let e=0;e<i;e++)a[this._idx(-1,e)]=a[this._idx(0,e)],a[this._idx(i,e)]=a[this._idx(i-1,e)],a[this._idx(e,-1)]=a[this._idx(e,0)],a[this._idx(e,i)]=a[this._idx(e,i-1)];a[this._idx(-1,-1)]=a[this._idx(0,0)],a[this._idx(i,-1)]=a[this._idx(i-1,0)],a[this._idx(-1,i)]=a[this._idx(0,i-1)],a[this._idx(i,i)]=a[this._idx(i-1,i-1)],o&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Bf(this)}get(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(e=C(e,-1,this.dim),t=C(t,-1,this.dim));const r=4*this._idx(e,t);return("terrarium"===this.encoding?Hf:qf)(this.pixels[r],this.pixels[r+1],this.pixels[r+2])}static getUnpackVector(e){return Wf[e]}get unpackVector(){return Wf[this.encoding]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}static pack(e,t){const r=[0,0,0,0],n=Gf.getUnpackVector(t);let o=Math.floor((e+n[3])/n[2]);return r[2]=o%256,o=Math.floor(o/256),r[1]=o%256,o=Math.floor(o/256),r[0]=o,r}getPixels(){return new Nc({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,t,r){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let n=t*this.dim,o=t*this.dim+this.dim,i=r*this.dim,a=r*this.dim+this.dim;switch(t){case-1:n=o-1;break;case 1:o=n+1}switch(r){case-1:i=a-1;break;case 1:a=i+1}const s=-t*this.dim,l=-r*this.dim;for(let c=i;c<a;c++)for(let t=n;t<o;t++){const r=4*this._idx(t,c),n=4*this._idx(t+s,c+l);this.pixels[r+0]=e.pixels[n+0],this.pixels[r+1]=e.pixels[n+1],this.pixels[r+2]=e.pixels[n+2],this.pixels[r+3]=e.pixels[n+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Yo(Gf,"DEMData"),Yo(Bf,"DemMinMaxQuadTree",{omit:["dem"]});class Kf{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,r){const n=e.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);const o={value:t,timeout:void 0};if(void 0!==r&&(o.timeout=setTimeout((()=>{this.remove(e,o)}),r)),this.data[n].push(o),this.order.push(n),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const r=e.wrapped().key,n=void 0===t?0:this.data[r].indexOf(t),o=this.data[r][n];return this.data[r].splice(n,1),o.timeout&&clearTimeout(o.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(o.value),this.order.splice(this.order.indexOf(r),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const r in this.data)for(const n of this.data[r])e(n.value)||t.push(n);for(const r of t)this.remove(r.value.tileID,r)}}class Xf{constructor(e,t,r){this.func=e,this.mask=t,this.range=r}}Xf.ReadOnly=!1,Xf.ReadWrite=!0,Xf.disabled=new Xf(519,Xf.ReadOnly,[0,1]);const Zf=7680;class Yf{constructor(e,t,r,n,o,i){this.test=e,this.ref=t,this.mask=r,this.fail=n,this.depthFail=o,this.pass=i}}Yf.disabled=new Yf({func:519,mask:0},0,0,Zf,Zf,Zf);class Jf{constructor(e,t,r){this.blendFunction=e,this.blendColor=t,this.mask=r}}Jf.Replace=[1,0],Jf.disabled=new Jf(Jf.Replace,It.transparent,[!1,!1,!1,!1]),Jf.unblended=new Jf(Jf.Replace,It.transparent,[!0,!0,!0,!0]),Jf.alphaBlended=new Jf([1,771],It.transparent,[!0,!0,!0,!0]);const $f=1029,Qf=2305;class em{constructor(e,t,r){this.enable=e,this.mode=t,this.frontFace=r}}em.disabled=new em(!1,$f,Qf),em.backCCW=new em(!0,$f,Qf),em.backCW=new em(!0,$f,2304),em.frontCW=new em(!0,1028,2304),em.frontCCW=new em(!0,1028,Qf);class tm extends Qe{constructor(e,t,r){super(),this.id=e,this._onlySymbols=r,t.on("data",(e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),t.on("error",(()=>{this._sourceErrored=!0})),this._source=t,this._tiles={},this._cache=new Kf(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Rf,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,(()=>{}))}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,(()=>{}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const r=this._tiles[t];r.upload(e),r.prepare(this.map.style.imageManager)}}getIds(){return I(this._tiles).map((e=>e.tileID)).sort(rm).map((e=>e.key))}getRenderableIds(e){const t=[];for(const r in this._tiles)this._isIdRenderable(+r,e)&&t.push(this._tiles[r]);return e?t.sort(((e,t)=>{const r=e.tileID,n=t.tileID,o=new v(r.canonical.x,r.canonical.y)._rotate(this.transform.angle),i=new v(n.canonical.x,n.canonical.y)._rotate(this.transform.angle);return r.overscaledZ-n.overscaledZ||i.y-o.y||i.x-o.x})).map((e=>e.tileID.key)):t.map((e=>e.tileID)).sort(rm).map((e=>e.key))}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,t){const r=this._tiles[e];r&&("loading"!==r.state&&(r.state=t),this._loadTile(r,this._tileLoaded.bind(this,r,e,t)))}_tileLoaded(e,t,r,n){if(n)if(e.state="errored",404!==n.status)this._source.fire(new $e(n,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const e=this.map.painter.terrain;this.update(this.transform,e.getScaledDemTileSize(),!0),e.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=Xe.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Je("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const t=this.getRenderableIds();for(let n=0;n<t.length;n++){const o=t[n];if(e.neighboringTiles&&e.neighboringTiles[o]){const t=this.getTileByID(o);r(e,t),r(t,e)}}function r(e,t){if(!e.dem||e.dem.borderReady)return;e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;let r=t.tileID.canonical.x-e.tileID.canonical.x;const n=t.tileID.canonical.y-e.tileID.canonical.y,o=Math.pow(2,e.tileID.canonical.z),i=t.tileID.key;0===r&&0===n||Math.abs(n)>1||(Math.abs(r)>1&&(1===Math.abs(r+o)?r+=o:1===Math.abs(r-o)&&(r-=o)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,r,n),e.neighboringTiles&&e.neighboringTiles[i]&&(e.neighboringTiles[i].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,r,n){for(const o in this._tiles){let i=this._tiles[o];if(n[o]||!i.hasData()||i.tileID.overscaledZ<=t||i.tileID.overscaledZ>r)continue;let a=i.tileID;for(;i&&i.tileID.overscaledZ>t+1;){const e=i.tileID.scaledTo(i.tileID.overscaledZ-1);i=this._tiles[e.key],i&&i.hasData()&&(a=e)}let s=a;for(;s.overscaledZ>t;)if(s=s.scaledTo(s.overscaledZ-1),e[s.key]){n[a.key]=a;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const r=this._loadedParentTiles[e.key];return r&&r.tileID.overscaledZ>=t?r:null}for(let r=e.overscaledZ-1;r>=t;r--){const t=e.scaledTo(r),n=this._getLoadedTile(t);if(n)return n}}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,t){t=t||this._source.tileSize;const r=Math.ceil(e.width/t)+1,n=Math.ceil(e.height/t)+1,o=Math.floor(r*n*5),i="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,o):o,a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(a)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const r in this._tiles){const n=this._tiles[r];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+t),e[n.tileID.key]=n}this._tiles=e;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(+t,this._tiles[t])}}update(e,t,r){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!r)return;let n;this.updateCacheSize(e,t),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?n=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new fd(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(n=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!r,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(n=n.filter((e=>this._source.hasTile(e))))):n=[];const o=this._updateRetainedTiles(n);if(nm(this._source.type)&&0!==n.length){const e={},t={},r=Object.keys(o);for(const n of r){const r=o[n],i=this._tiles[n];if(!i||i.fadeEndTime&&i.fadeEndTime<=Xe.now())continue;const a=this.findLoadedParent(r,Math.max(r.overscaledZ-tm.maxOverzooming,this._source.minzoom));a&&(this._addTile(a.tileID),e[a.tileID.key]=a.tileID),t[n]=r}const i=n[n.length-1].overscaledZ;for(const n in this._tiles){const e=this._tiles[n];if(o[n]||!e.hasData())continue;let r=e.tileID;for(;r.overscaledZ>i;){r=r.scaledTo(r.overscaledZ-1);const i=this._tiles[r.key];if(i&&i.hasData()&&t[r.key]){o[n]=e.tileID;break}}}for(const n in e)o[n]||(this._coveredTiles[n]=!0,o[n]=e[n])}for(const a in o)this._tiles[a].clearFadeHold();const i=function(e,t){const r=[];for(const n in e)n in t||r.push(n);return r}(this._tiles,o);for(const a of i){const e=this._tiles[a];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(+a)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const t={};if(0===e.length)return t;const r={},n=e.reduce(((e,t)=>Math.min(e,t.overscaledZ)),1/0),o=e[0].overscaledZ,i=Math.max(o-tm.maxOverzooming,this._source.minzoom),a=Math.max(o+tm.maxUnderzooming,this._source.minzoom),s={};for(const l of e){const e=this._addTile(l);t[l.key]=l,e.hasData()||n<this._source.maxzoom&&(s[l.key]=l)}this._retainLoadedChildren(s,n,a,t);for(const l of e){let e=this._tiles[l.key];if(e.hasData())continue;if(l.canonical.z>=this._source.maxzoom){const e=l.children(this._source.maxzoom)[0],r=this.getTile(e);if(r&&r.hasData()){t[e.key]=e;continue}}else{const e=l.children(this._source.maxzoom);if(t[e[0].key]&&t[e[1].key]&&t[e[2].key]&&t[e[3].key])continue}let n=e.wasRequested();for(let o=l.overscaledZ-1;o>=i;--o){const i=l.scaledTo(o);if(r[i.key])break;if(r[i.key]=!0,e=this.getTile(i),!e&&n&&(e=this._addTile(i)),e&&(t[i.key]=i,n=e.wasRequested(),e.hasData()))break}}return t}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let r,n=this._tiles[e].tileID;for(;n.overscaledZ>0;){if(n.key in this._loadedParentTiles){r=this._loadedParentTiles[n.key];break}t.push(n.key);const e=n.scaledTo(n.overscaledZ-1);if(r=this._getLoadedTile(e),r)break;n=e}for(const e of t)this._loadedParentTiles[e]=r}}_addTile(e){let t=this._tiles[e.key];if(t)return t;t=this._cache.getAndRemove(e),t&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));const r=Boolean(t);if(!r){const r=this.map?this.map.painter:null;t=new Mf(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,r,this._isRaster),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))}return t?(t.uses++,this._tiles[e.key]=t,r||this._source.fire(new Je("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),r))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,t,r){const n=[],o=this.transform;if(!o)return n;const i="globe"===o.projection.name,a=ql(o.center.lng);for(const s in this._tiles){const l=this._tiles[s];if(r&&l.clearQueryDebugViz(),l.holdingForFade())continue;let c;if(i){const e=l.tileID.canonical;if(0===e.z){const t=[Math.abs(C(a,...om(e,-1))-a),Math.abs(C(a,...om(e,1))-a)];c=[0,2*t.indexOf(Math.min(...t))-1]}else{const t=[Math.abs(C(a,...om(e,-1))-a),Math.abs(C(a,...om(e,0))-a),Math.abs(C(a,...om(e,1))-a)];c=[t.indexOf(Math.min(...t))-1]}}else c=[0];for(const r of c){const i=e.containsTile(l,o,t,r);i&&n.push(i)}}return n}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map((e=>this._tiles[e].tileID));for(const r of t)r.projMatrix=this.transform.calculateProjMatrix(r.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(nm(this._source.type))for(const e in this._tiles){const t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=Xe.now())return!0}return!1}setFeatureState(e,t,r){this._state.updateState(e=e||"_geojsonTileLayer",t,r)}removeFeatureState(e,t,r){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,r)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,r){const n=this._tiles[e];n&&n.setDependencies(t,r)}reloadTilesForDependencies(e,t){for(const r in this._tiles)this._tiles[r].hasDependency(e,t)&&this._reloadTile(+r,"reloading");this._cache.filter((r=>!r.hasDependency(e,t)))}_preloadTiles(e,t){if(!this._sourceLoaded){const r=()=>{this._sourceLoaded&&(this._source.off("data",r),this._preloadTiles(e,t))};return void this._source.on("data",r)}const r=new Map,n=Array.isArray(e)?e:[e],o=this.map.painter.terrain,i=this.usedForTerrain&&o?o.getScaledDemTileSize():this._source.tileSize;for(const a of n){const e=a.coveringTiles({tileSize:i,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const t of e)r.set(t.key,t);this.usedForTerrain&&a.updateElevation(!1)}P(Array.from(r.values()),((e,t)=>{const r=new Mf(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(r,(e=>{"raster-dem"===this._source.type&&r.dem&&this._backfillDEM(r),t(e,r)}))}),t)}}function rm(e,t){const r=Math.abs(2*e.wrap)-+(e.wrap<0),n=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||n-r||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function nm(e){return"raster"===e||"image"===e||"video"===e||"custom"===e}function om(e,t){const r=1<<e.z;return[e.x/r+t,(e.x+1)/r+t]}tm.maxOverzooming=10,tm.maxUnderzooming=3;class im{constructor(e,t,r){this._demTile=e,this._dem=this._demTile.dem,this._scale=t,this._offset=r}static create(e,t,r){const n=r||e.findDEMTileFor(t);if(!n||!n.dem)return;const o=n.dem,i=n.tileID,a=1<<t.canonical.z-i.canonical.z;return new im(n,n.tileSize/ss/a,[(t.canonical.x/a-i.canonical.x)*o.dim,(t.canonical.y/a-i.canonical.y)*o.dim])}tileCoordToPixel(e,t){const r=t*this._scale+this._offset[1],n=Math.floor(e*this._scale+this._offset[0]),o=Math.floor(r);return new v(n,o)}getElevationAt(e,t,r,n){const o=e*this._scale+this._offset[0],i=t*this._scale+this._offset[1],a=Math.floor(o),s=Math.floor(i),l=this._dem;return n=!!n,r?Ir(Ir(l.get(a,s,n),l.get(a,s+1,n),i-s),Ir(l.get(a+1,s,n),l.get(a+1,s+1,n),i-s),o-a):l.get(a,s,n)}getElevationAtPixel(e,t,r){return this._dem.get(e,t,!!r)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*Gl(1,e)*this._dem.stride}}class am{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Xo(ss,16,0),this.featureIndexArray=new _a,this.promoteId=t}insert(e,t,r,n,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,n,o,i);const s=this.grid;for(let l=0;l<t.length;l++){const e=t[l],r=[1/0,1/0,-1/0,-1/0];for(let t=0;t<e.length;t++){const n=e[t];r[0]=Math.min(r[0],n.x),r[1]=Math.min(r[1],n.y),r[2]=Math.max(r[2],n.x),r[3]=Math.max(r[3],n.y)}r[0]<ss&&r[1]<ss&&r[2]>=0&&r[3]>=0&&s.insert(a,r[0],r[1],r[2],r[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Gu(new gh(this.rawTileData)).layers,this.sourceLayerCoder=new _f(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,t,r,n){var o=this;this.loadVTLayers();const i=e.params||{},a=ho(i.filter),s=e.tileResult,l=e.transform,c=s.bufferedTilespaceBounds,u=this.grid.query(c.min.x,c.min.y,c.max.x,c.max.y,((e,t,r,n)=>_c(s.bufferedTilespaceGeometry,e,t,r,n)));u.sort(lm);let d=null;l.elevation&&u.length>0&&(d=im.create(l.elevation,this.tileID));const h={};let p;for(let f=0;f<u.length;f++){const l=u[f];if(l===p)continue;p=l;const c=this.featureIndexArray.get(l);let m=null;this.loadMatchingFeature(h,c,a,i.layers,i.availableImages,t,r,n,(function(t,r,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return m||(m=ac(t,o.tileID.canonical,e.tileTransform)),r.queryIntersectsFeature(s,t,n,m,o.z,e.transform,e.pixelPosMatrix,d,i)}))}return h}loadMatchingFeature(e,t,r,n,o,i,a,s,l){const{featureIndex:c,bucketIndex:u,sourceLayerIndex:d,layoutVertexArrayOffset:h}=t,p=this.bucketLayerIDs[u];if(n&&!function(e,t){for(let r=0;r<e.length;r++)if(t.indexOf(e[r])>=0)return!0;return!1}(n,p))return;const f=this.sourceLayerCoder.decode(d),m=this.vtLayers[f].feature(c);if(r.needGeometry){const e=sc(m,!0);if(!r.filter(new wi(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!r.filter(new wi(this.tileID.overscaledZ),m))return;const g=this.getId(m,f);for(let y=0;y<p.length;y++){const t=p[y];if(n&&n.indexOf(t)<0)continue;const r=i[t];if(!r)continue;let u={};void 0!==g&&s&&(u=s.getState(r.sourceLayer||"_geojsonTileLayer",g));const d=O({},a[t]);d.paint=sm(d.paint,r.paint,m,u,o),d.layout=sm(d.layout,r.layout,m,u,o);const f=!l||l(m,r,u,h);if(!f)continue;const v=new Sf(m,this.z,this.x,this.y,g);v.layer=d;let b=e[t];void 0===b&&(b=e[t]=[]),b.push({featureIndex:c,feature:v,intersectionZ:f})}}lookupSymbolFeatures(e,t,r,n,o,i,a,s){const l={};this.loadVTLayers();const c=ho(o);for(const u of e)this.loadMatchingFeature(l,{bucketIndex:r,sourceLayerIndex:n,featureIndex:u,layoutVertexArrayOffset:0},c,i,a,s,t);return l}loadFeature(e){const{featureIndex:t,sourceLayerIndex:r}=e;this.loadVTLayers();const n=this.sourceLayerCoder.decode(r),o=this.vtFeatures[n];if(o[t])return o[t];const i=this.vtLayers[n].feature(t);return o[t]=i,i}hasLayer(e){for(const t of this.bucketLayerIDs)for(const r of t)if(e===r)return!0;return!1}getId(e,t){let r=e.id;if(this.promoteId){const n="string"==typeof this.promoteId?this.promoteId:this.promoteId[t];null!=n&&(r=e.properties[n]),"boolean"==typeof r&&(r=Number(r))}return r}}function sm(e,t,r,n,o){return B(e,((e,i)=>{const a=t instanceof Pi?t.get(i):null;return a&&a.evaluate?a.evaluate(r,n,o):a}))}function lm(e,t){return t-e}Yo(am,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class cm{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.image=new Dc({width:e,height:t}),this.positions={},this.uploaded=!1}getDash(e,t){const r=this.getKey(e,t);return this.positions[r]}trim(){const e=this.width,t=this.height=F(this.nextRow);this.image.resize({width:e,height:t})}getKey(e,t){return e.join(",")+t}getDashRanges(e,t,r){const n=[];let o=e.length%2==1?-e[e.length-1]*r:0,i=e[0]*r,a=!0;n.push({left:o,right:i,isDash:a,zeroLength:0===e[0]});let s=e[0];for(let l=1;l<e.length;l++){a=!a;const t=e[l];o=s*r,s+=t,i=s*r,n.push({left:o,right:i,isDash:a,zeroLength:0===t})}return n}addRoundDash(e,t,r){const n=t/2;for(let o=-r;o<=r;o++){const t=this.width*(this.nextRow+r+o);let i=0,a=e[i];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++i]);const l=Math.abs(s-a.left),c=Math.abs(s-a.right),u=Math.min(l,c);let d;const h=o/r*(n+1);if(a.isDash){const e=n-Math.abs(h);d=Math.sqrt(u*u+e*e)}else d=n-Math.sqrt(u*u+h*h);this.image.data[t+s]=Math.max(0,Math.min(255,d+128))}}}addRegularDash(e,t){for(let s=e.length-1;s>=0;--s){const t=e[s],r=e[s+1];t.zeroLength?e.splice(s,1):r&&r.isDash===t.isDash&&(r.left=t.left,e.splice(s,1))}const r=e[0],n=e[e.length-1];r.isDash===n.isDash&&(r.left=n.left-this.width,n.right=r.right+this.width);const o=this.width*this.nextRow;let i=0,a=e[i];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++i]);const r=Math.abs(s-a.left),n=Math.abs(s-a.right),l=Math.min(r,n);this.image.data[o+s]=Math.max(0,Math.min(255,(a.isDash?l:-l)+t+128))}}addDash(e,t){const r=this.getKey(e,t);if(this.positions[r])return this.positions[r];const n="round"===t,o=n?7:0,i=2*o+1;if(this.nextRow+i>this.height)return q("LineAtlas out of space"),null;0===e.length&&e.push(1);let a=0;for(let c=0;c<e.length;c++)e[c]<0&&(q("Negative value is found in line dasharray, replacing values with 0"),e[c]=0),a+=e[c];if(0!==a){const r=this.width/a,i=this.getDashRanges(e,this.width,r);n?this.addRoundDash(i,r,o):this.addRegularDash(i,"square"===t?.5*r:0)}const s=this.nextRow+o;this.nextRow+=i;const l={tl:[s,o],br:[a,0]};return this.positions[r]=l,l}}Yo(cm,"LineAtlas");const um=1*ep;class dm{constructor(e){const t={},r=[];for(const a in e){const n=e[a],o=t[a]={};for(const e in n.glyphs){const t=n.glyphs[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const i=t.metrics.localGlyph?um:1,a={x:0,y:0,w:t.bitmap.width+2*i,h:t.bitmap.height+2*i};r.push(a),o[e]=a}}const{w:n,h:o}=wh(r),i=new Dc({width:n||1,height:o||1});for(const a in e){const r=e[a];for(const e in r.glyphs){const n=r.glyphs[+e];if(!n||0===n.bitmap.width||0===n.bitmap.height)continue;const o=t[a][e],s=n.metrics.localGlyph?um:1;Dc.copy(n.bitmap,i,{x:0,y:0},{x:o.x+s,y:o.y+s},n.bitmap)}}this.image=i,this.positions=t}}Yo(dm,"GlyphAtlas");class hm{constructor(e){this.tileID=new fd(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=Pp(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,t,r,n,o){this.status="parsing",this.data=e,this.collisionBoxArray=new pa;const i=new _f(Object.keys(e.layers).sort()),a=new am(this.tileID,this.promoteId);a.bucketLayerIDs=[];const s={},l=new cm(256,256),c={featureIndex:a,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:l,availableImages:r},u=t.familiesBySource[this.source];for(const x in u){const t=e.layers[x];if(!t)continue;let n=!1,o=!1;for(const e of u[x])"symbol"===e[0].type?n=!0:o=!0;if(!0===this.isSymbolTile&&!n)continue;if(!1===this.isSymbolTile&&!o)continue;1===t.version&&q('Vector tile source "'.concat(this.source,'" layer "').concat(x,'" does not use vector tile spec v2 and therefore may have some rendering errors.'));const l=i.encode(x),d=[];for(let e=0;e<t.length;e++){const r=t.feature(e),n=a.getId(r,x);d.push({feature:r,id:n,index:e,sourceLayerIndex:l})}for(const e of u[x]){const t=e[0];void 0!==this.isSymbolTile&&"symbol"===t.type!==this.isSymbolTile||t.minzoom&&this.zoom<Math.floor(t.minzoom)||t.maxzoom&&this.zoom>=t.maxzoom||"none"!==t.visibility&&(pm(e,this.zoom,r),(s[t.id]=t.createBucket({index:a.bucketLayerIDs.length,layers:e,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:l,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:r})).populate(d,c,this.tileID.canonical,this.tileTransform),a.bucketLayerIDs.push(e.map((e=>e.id))))}}let d,h,p,f;l.trim();const m={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},g=()=>{if(d)return o(d);if(h&&p&&f){const e=new dm(h),t=new Th(p,f);for(const n in s){const o=s[n];o instanceof sf?(pm(o.layers,this.zoom,r),bp(o,h,e.positions,p,t.iconPositions,this.showCollisionBoxes,r,this.tileID.canonical,this.tileZoom,this.projection)):o.hasPattern&&(o instanceof Ed||o instanceof Cu||o instanceof ed)&&(pm(o.layers,this.zoom,r),o.addFeatures(c,this.tileID.canonical,t.patternPositions,r,this.tileTransform))}this.status="done",o(null,{buckets:I(s).filter((e=>!e.isEmpty())),featureIndex:a,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:l,imageAtlas:t,glyphMap:this.returnDependencies?h:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?e.positions:null})}},y=B(c.glyphDependencies,(e=>Object.keys(e).map(Number)));Object.keys(y).length?n.send("getGlyphs",{uid:this.uid,stacks:y},((e,t)=>{d||(d=e,h=t,g())}),void 0,!1,m):h={};const v=Object.keys(c.iconDependencies);v.length?n.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"icons"},((e,t)=>{d||(d=e,p=t,g())}),void 0,!1,m):p={};const b=Object.keys(c.patternDependencies);b.length?n.send("getImages",{icons:b,source:this.source,tileID:this.tileID,type:"patterns"},((e,t)=>{d||(d=e,f=t,g())}),void 0,!1,m):f={},g()}}function pm(e,t,r){const n=new wi(t);for(const o of e)o.recalculate(n,r)}class fm{constructor(e){this.entries={},this.scheduler=e}request(e,t,r,n){const o=this.entries[e]=this.entries[e]||{callbacks:[]};if(o.result){const[e,r]=o.result;return this.scheduler?this.scheduler.add((()=>{n(e,r)}),t):n(e,r),()=>{}}return o.callbacks.push(n),o.cancel||(o.cancel=r(((r,n)=>{o.result=[r,n];for(const e of o.callbacks)this.scheduler?this.scheduler.add((()=>{e(r,n)}),t):e(r,n);setTimeout((()=>delete this.entries[e]),3e3)}))),()=>{o.result||(o.callbacks=o.callbacks.filter((e=>e!==n)),o.callbacks.length||(o.cancel(),delete this.entries[e]))}}}function mm(e,t,r){const n=JSON.stringify(e.request);return e.data&&(this.deduped.entries[n]={result:[null,e.data]}),this.deduped.request(n,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},(t=>{const n=he(e.request,((e,n,o,i)=>{e?t(e):n&&t(null,{vectorTile:r?void 0:new Gu(new gh(n)),rawData:n,cacheControl:o,expires:i})}));return()=>{n.cancel(),t()}}),t)}const gm=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class ym{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,r]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const n=r>>4;if(1!==n)throw new Error("Got v".concat(n," data when expected v1."));const o=gm[15&r];if(!o)throw new Error("Unrecognized array type.");const[i]=new Uint16Array(e,2,1),[a]=new Uint32Array(e,4,1);return new ym(a,i,o,e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,n=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const o=gm.indexOf(this.ArrayType),i=2*e*this.ArrayType.BYTES_PER_ELEMENT,a=e*this.IndexArrayType.BYTES_PER_ELEMENT,s=(8-a%8)%8;if(o<0)throw new Error("Unexpected typed array class: ".concat(r,"."));n&&n instanceof ArrayBuffer?(this.data=n,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+a+s,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+i+a+s),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+a+s,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+o]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=t,r}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return vm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,r,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:o,coords:i,nodeSize:a}=this,s=[0,o.length-1,0],l=[];for(;s.length;){const c=s.pop()||0,u=s.pop()||0,d=s.pop()||0;if(u-d<=a){for(let a=d;a<=u;a++){const s=i[2*a],c=i[2*a+1];s>=e&&s<=r&&c>=t&&c<=n&&l.push(o[a])}continue}const h=d+u>>1,p=i[2*h],f=i[2*h+1];p>=e&&p<=r&&f>=t&&f<=n&&l.push(o[h]),(0===c?e<=p:t<=f)&&(s.push(d),s.push(h-1),s.push(1-c)),(0===c?r>=p:n>=f)&&(s.push(h+1),s.push(u),s.push(1-c))}return l}within(e,t,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:n,coords:o,nodeSize:i}=this,a=[0,n.length-1,0],s=[],l=r*r;for(;a.length;){const c=a.pop()||0,u=a.pop()||0,d=a.pop()||0;if(u-d<=i){for(let r=d;r<=u;r++)wm(o[2*r],o[2*r+1],e,t)<=l&&s.push(n[r]);continue}const h=d+u>>1,p=o[2*h],f=o[2*h+1];wm(p,f,e,t)<=l&&s.push(n[h]),(0===c?e-r<=p:t-r<=f)&&(a.push(d),a.push(h-1),a.push(1-c)),(0===c?e+r>=p:t+r>=f)&&(a.push(h+1),a.push(u),a.push(1-c))}return s}}function vm(e,t,r,n,o,i){if(o-n<=r)return;const a=n+o>>1;bm(e,t,a,n,o,i),vm(e,t,r,n,a-1,1-i),vm(e,t,r,a+1,o,1-i)}function bm(e,t,r,n,o,i){for(;o>n;){if(o-n>600){const a=o-n+1,s=r-n+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);bm(e,t,r,Math.max(n,Math.floor(r-s*c/a+u)),Math.min(o,Math.floor(r+(a-s)*c/a+u)),i)}const a=t[2*r+i];let s=n,l=o;for(xm(e,t,n,r),t[2*o+i]>a&&xm(e,t,n,o);s<l;){for(xm(e,t,s,l),s++,l--;t[2*s+i]<a;)s++;for(;t[2*l+i]>a;)l--}t[2*n+i]===a?xm(e,t,n,l):(l++,xm(e,t,l,o)),l<=r&&(n=l+1),r<=l&&(o=l-1)}}function xm(e,t,r,n){_m(e,r,n),_m(t,2*r,2*n),_m(t,2*r+1,2*n+1)}function _m(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function wm(e,t,r,n){const o=e-r,i=t-n;return o*o+i*i}e.ARRAY_TYPE=us,e.AUTH_ERR_MSG=ve,e.Aabb=ol,e.Actor=class{constructor(e,r,n){this.target=e,this.parent=r,this.mapId=n,this.callbacks={},this.cancelCallbacks={},D(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=K()?e:t,this.scheduler=new xf}send(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0;const a=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(r.metadata=i,this.callbacks[a]=r);const s=Y(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:e,hasCallback:!!r,targetMapId:n,mustQueue:o,sourceMapId:this.mapId,data:Qo(t,s)},s),{cancel:()=>{r&&delete this.callbacks[a],this.target.postMessage({id:a,type:"<cancel>",targetMapId:n,sourceMapId:this.mapId})}}}receive(e){const t=e.data,r=t.id;if(r&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){const e=this.cancelCallbacks[r];delete this.cancelCallbacks[r],e&&e.cancel()}else if(t.mustQueue||K()){const e=this.callbacks[r];this.cancelCallbacks[r]=this.scheduler.add((()=>this.processTask(r,t)),e&&e.metadata||{type:"message"})}else this.processTask(r,t)}processTask(e,t){if("<response>"===t.type){const r=this.callbacks[e];delete this.callbacks[e],r&&(t.error?r(ei(t.error)):r(null,ei(t.data)))}else{const r=Y(this.globalScope)?void 0:[],n=t.hasCallback?(t,n)=>{delete this.cancelCallbacks[e],this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:t?Qo(t):null,data:Qo(n,r)},r)}:e=>{},o=ei(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,o,n);else if(this.parent.getWorkerSource){const e=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,e[0],o.source)[e[1]](o,n)}else n(new Error("Could not find function ".concat(t.type)))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},e.CanonicalTileID=hd,e.Color=It,e.ColorMode=Jf,e.CullFaceMode=em,e.DEMData=Gf,e.DataConstantProperty=Ii,e.DedupedRequest=fm,e.DepthMode=Xf,e.EXTENT=ss,e.Elevation=class{isDataAvailableAtPoint(e){const t=this._source();if(this.isUsingMockSource()||!t||e.y<0||e.y>1)return!1;const r=t.getSource().maxzoom,n=1<<r,o=Math.floor(e.x),i=Math.floor((e.x-o)*n),a=Math.floor(e.y*n),s=this.findDEMTileFor(new fd(r,o,r,i,a));return!(!s||!s.dem)}getAtPointOrZero(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getAtPoint(e,t)||0}getAtPoint(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.isUsingMockSource())return null;null==t&&(t=null);const n=this._source();if(!n)return t;if(e.y<0||e.y>1)return t;const o=n.getSource().maxzoom,i=1<<o,a=Math.floor(e.x),s=e.x-a,l=new fd(o,a,o,Math.floor(s*i),Math.floor(e.y*i)),c=this.findDEMTileFor(l);if(!c||!c.dem)return t;const u=c.dem,d=1<<c.tileID.canonical.z,h=(s*d-c.tileID.canonical.x)*u.dim,p=(e.y*d-c.tileID.canonical.y)*u.dim,f=Math.floor(h),m=Math.floor(p);return(r?this.exaggeration():1)*Ir(Ir(u.get(f,m),u.get(f,m+1),p-m),Ir(u.get(f+1,m),u.get(f+1,m+1),p-m),h-f)}getAtTileOffset(e,t,r){const n=1<<e.canonical.z;return this.getAtPointOrZero(new $l(e.wrap+(e.canonical.x+t/ss)/n,(e.canonical.y+r/ss)/n))}getAtTileOffsetFunc(e,t,r,n){return o=>{const i=this.getAtTileOffset(e,o.x,o.y),a=n.upVector(e.canonical,o.x,o.y);return Os(a,a,i*n.upVectorScale(e.canonical,t,r).metersToTile),a}}getForTilePoints(e,t,r,n){if(this.isUsingMockSource())return!1;const o=im.create(this,e,n);return!!o&&(t.forEach((e=>{e[2]=this.exaggeration()*o.getElevationAt(e[0],e[1],r)})),!0)}getMinMaxForTile(e){if(this.isUsingMockSource())return null;const t=this.findDEMTileFor(e);if(!t||!t.dem)return null;const r=t.dem.tree,n=t.tileID,o=1<<e.canonical.z-n.canonical.z;let i=e.canonical.x/o-n.canonical.x,a=e.canonical.y/o-n.canonical.y,s=0;for(let l=0;l<e.canonical.z-n.canonical.z&&!r.leaves[s];l++){i*=2,a*=2;const e=2*Math.floor(a)+Math.floor(i);s=r.childOffsets[s]+e,i%=1,a%=1}return{min:this.exaggeration()*r.minimums[s],max:this.exaggeration()*r.maximums[s]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(e,t,r){throw new Error("Pure virtual method called.")}pointCoordinate(e){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(e){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},e.ErrorEvent=$e,e.EvaluationParameters=wi,e.Event=Je,e.Evented=Qe,e.FillExtrusionBucket=ed,e.Frustum=nl,e.FrustumCorners=rl,e.GLOBE_RADIUS=sl,e.GLOBE_SCALE_MATCH_LATITUDE=45,e.GLOBE_ZOOM_THRESHOLD_MAX=al,e.GLOBE_ZOOM_THRESHOLD_MIN=il,e.GlobeSharedBuffers=class{constructor(e){this._createGrid(e),this._createPoles(e)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const e of this._poleSegments)e.destroy();for(const e of this._gridSegments)e.withSkirts.destroy(),e.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const e of this._wireframeSegments)e.destroy()}}_fillGridMeshWithLods(e,t){const r=new Ui,n=new na,o=[],i=e+1+2,a=t[0]+1,s=t[0]+1+(1+t.length),l=(e,t,r)=>{let n=e===i-1?e-2:0===e?e:e-1;return n+=r?24575:0,[n,t]};for(let c=0;c<i;++c)r.emplaceBack(...l(c,0,!0));for(let c=0;c<a;++c)for(let e=0;e<i;++e)r.emplaceBack(...l(e,c,(0===e||e===i-1)&&!0));for(let c=0;c<t.length;++c){const e=t[c];for(let t=0;t<i;++t)r.emplaceBack(...l(t,e,!0))}for(let c=0;c<t.length;++c){const e=n.length,a=t[c]+1+2,l=new na;for(let r=0;r<a-1;r++){const e=r===a-2,o=e?i*(s-t.length+c-r):i;for(let t=0;t<i-1;t++){const a=r*i+t;0===r||e||0===t||t===i-2?(l.emplaceBack(a+1,a,a+o),l.emplaceBack(a+o,a+o+1,a+1)):(n.emplaceBack(a+1,a,a+o),n.emplaceBack(a+o,a+o+1,a+1))}}const u=as.simpleSegment(0,e,r.length,n.length-e);for(let t=0;t<l.uint16.length;t+=3)n.emplaceBack(l.uint16[t],l.uint16[t+1],l.uint16[t+2]);const d=as.simpleSegment(0,e,r.length,n.length-e);o.push({withoutSkirts:u,withSkirts:d})}return{vertices:r,indices:n,segments:o}}_createGrid(e){const t=this._fillGridMeshWithLods(cl,ul);this._gridSegments=t.segments,this._gridBuffer=e.createVertexBuffer(t.vertices,el.members),this._gridIndexBuffer=e.createIndexBuffer(t.indices,!0)}_createPoles(e){const t=new na;for(let o=0;o<=cl;o++)t.emplaceBack(0,o+1,o+2);this._poleIndexBuffer=e.createIndexBuffer(t,!0);const r=new sa,n=new sa;this._poleSegments=[];for(let o=0,i=0;o<il;o++){const e=360/(1<<o);r.emplaceBack(0,-sl,0,.5,0),n.emplaceBack(0,-sl,0,.5,1);for(let t=0;t<=cl;t++){const o=t/cl,i=Ir(0,e,o),[a,s,l]=Tl(zl,Dl,i,sl);r.emplaceBack(a,s,l,o,0),n.emplaceBack(a,s,l,o,1)}this._poleSegments.push(as.simpleSegment(i,0,66,64)),i+=66}this._poleNorthVertexBuffer=e.createVertexBuffer(r,$s,!1),this._poleSouthVertexBuffer=e.createVertexBuffer(n,$s,!1)}getGridBuffers(e,t){return[this._gridBuffer,this._gridIndexBuffer,t?this._gridSegments[e].withSkirts:this._gridSegments[e].withoutSkirts]}getPoleBuffers(e){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[e]]}getWirefameBuffers(e,t){if(!this._wireframeSegments){const t=new ca,r=cl,n=r+1+2,o=1;this._wireframeSegments=[];for(let e=0,i=0;e<ul.length;e++){const a=ul[e];for(let e=o;e<a+o;e++)for(let i=o;i<r+o;i++){const r=e*n+i;t.emplaceBack(r,r+1),t.emplaceBack(r,r+n),t.emplaceBack(r,r+n+1)}const s=a*r*3;this._wireframeSegments.push(as.simpleSegment(0,i,(a+1)*n,s)),i+=s}this._wireframeIndexBuffer=e.createIndexBuffer(t)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[t]]}},e.GlyphManager=rp,e.ImagePosition=kh,e.KDBush=ym,e.LivePerformanceUtils=Be,e.LngLat=Vl,e.LngLatBounds=ls,e.LocalGlyphMode=tp,e.MAX_MERCATOR_LATITUDE=Yl,e.MercatorCoordinate=$l,e.ONE_EM=Dd,e.OverscaledTileID=fd,e.PerformanceMarkers=Ne,e.Point=v,e.Properties=Ri,e.RGBAImage=Nc,e.Ray=tl,e.RequestManager=class{constructor(e,t,r){this._transformRequestFn=e,this._customAccessToken=t,this._silenceAuthErrors=!!r,this._createSkuToken()}_createSkuToken(){const e=function(){let e="";for(let t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",d,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeStyleURL(e,t){if(!be(e))return e;const r=Te(e);return r.path="/styles/v1".concat(r.path),this._makeAPIURL(r,this._customAccessToken||t)}normalizeGlyphsURL(e,t){if(!be(e))return e;const r=Te(e);return r.path="/fonts/v1".concat(r.path),this._makeAPIURL(r,this._customAccessToken||t)}normalizeSourceURL(e,t,r,n){if(!be(e))return e;const o=Te(e);return o.path="/v4/".concat(o.authority,".json"),o.params.push("secure"),r&&o.params.push("language=".concat(r)),n&&o.params.push("worldview=".concat(n)),this._makeAPIURL(o,this._customAccessToken||t)}normalizeSpriteURL(e,t,r,n){const o=Te(e);return be(e)?(o.path="/styles/v1".concat(o.path,"/sprite").concat(t).concat(r),this._makeAPIURL(o,this._customAccessToken||n)):(o.path+="".concat(t).concat(r),Ee(o))}normalizeTileURL(e,t,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!be(e))return e;const n=Te(e);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,"".concat(t||r&&"raster"!==n.authority&&512===r?"@2x":"").concat(i.supported?".webp":"$1")),"raster"===n.authority?n.path="/".concat(o.RASTER_URL_PREFIX).concat(n.path):(n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/".concat(o.TILE_URL_VERSION).concat(n.path));const a=this._customAccessToken||function(e){for(const t of e){const e=t.match(/^access_token=(.*)$/);if(e)return e[1]}return null}(n.params)||o.ACCESS_TOKEN;return o.REQUIRE_ACCESS_TOKEN&&a&&this._skuToken&&n.params.push("sku=".concat(this._skuToken)),this._makeAPIURL(n,a)}canonicalizeTileURL(e,t){const r=Te(e);if(!r.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!r.path.match(/\.[\w]+$/))return e;let n="mapbox://";r.path.match(/^\/raster\/v1\//)?n+="raster/".concat(r.path.replace("/".concat(o.RASTER_URL_PREFIX,"/"),"")):n+="tiles/".concat(r.path.replace("/".concat(o.TILE_URL_VERSION,"/"),""));let i=r.params;return t&&(i=i.filter((e=>!e.match(/^access_token=/)))),i.length&&(n+="?".concat(i.join("&"))),n}canonicalizeTileset(e,t){const r=!!t&&be(t),n=[];for(const o of e.tiles||[])xe(o)?n.push(this.canonicalizeTileURL(o,r)):n.push(o);return n}_makeAPIURL(e,t){const r="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",n=Te(o.API_URL);if(e.protocol=n.protocol,e.authority=n.authority,"http"===e.protocol){const t=e.params.indexOf("secure");t>=0&&e.params.splice(t,1)}if("/"!==n.path&&(e.path="".concat(n.path).concat(e.path)),!o.REQUIRE_ACCESS_TOKEN)return Ee(e);if(t=t||o.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error("An API access token is required to use Mapbox GL. ".concat(r));if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ".concat(r))}return e.params=e.params.filter((e=>-1===e.indexOf("access_token"))),e.params.push("access_token=".concat(t||"")),Ee(e)}},e.ResourceType=le,e.SegmentVector=as,e.SourceCache=tm,e.StencilMode=Yf,e.StructArrayLayout1ui2=ua,e.StructArrayLayout2f1f2i16=ea,e.StructArrayLayout2i4=Ui,e.StructArrayLayout2ui4=ca,e.StructArrayLayout3f12=ra,e.StructArrayLayout3ui6=na,e.StructArrayLayout4i8=Wi,e.StructArrayLayout5f20=sa,e.Texture=vf,e.Tile=Mf,e.Transitionable=Ti,e.Uniform1f=za,e.Uniform1i=class extends Fa{constructor(e){super(e),this.current=0}set(e,t,r){this.fetchUniformLocation(e,t)&&this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},e.Uniform2f=class extends Fa{constructor(e){super(e),this.current=[0,0]}set(e,t,r){this.fetchUniformLocation(e,t)&&(r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1])))}},e.Uniform3f=class extends Fa{constructor(e){super(e),this.current=[0,0,0]}set(e,t,r){this.fetchUniformLocation(e,t)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2])))}},e.Uniform4f=Da,e.UniformColor=Na,e.UniformMatrix2f=class extends Fa{constructor(e){super(e),this.current=Va}set(e,t,r){if(this.fetchUniformLocation(e,t))for(let n=0;n<4;n++)if(r[n]!==this.current[n]){this.current=r,this.gl.uniformMatrix2fv(this.location,!1,r);break}}},e.UniformMatrix3f=class extends Fa{constructor(e){super(e),this.current=Ua}set(e,t,r){if(this.fetchUniformLocation(e,t))for(let n=0;n<9;n++)if(r[n]!==this.current[n]){this.current=r,this.gl.uniformMatrix3fv(this.location,!1,r);break}}},e.UniformMatrix4f=class extends Fa{constructor(e){super(e),this.current=Ba}set(e,t,r){if(this.fetchUniformLocation(e,t)){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let e=1;e<16;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}}},e.UnwrappedTileID=pd,e.ValidationError=ro,e.VectorTileFeature=Ku,e.VectorTileWorkerSource=class extends Qe{constructor(e,t,r,n,o){super(),this.actor=e,this.layerIndex=t,this.availableImages=r,this.loadVectorData=o||mm,this.loading={},this.loaded={},this.deduped=new fm(e.scheduler),this.isSpriteLoaded=n,this.scheduler=e.scheduler}loadTile(e,t){const r=e.uid,n=e&&e.request,o=n&&n.collectResourceTiming,i=this.loading[r]=new hm(e);i.abort=this.loadVectorData(e,((a,s)=>{const l=!this.loading[r];if(delete this.loading[r],l||a||!s)return i.status="done",l||(this.loaded[r]=i),t(a);const c=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl),i.vectorTile=s.vectorTile||new Gu(new gh(c));const d=()=>{i.parse(i.vectorTile,this.layerIndex,this.availableImages,this.actor,((e,r)=>{if(e||!r)return t(e);const i={};if(o){const e=We(n);e.length>0&&(i.resourceTiming=JSON.parse(JSON.stringify(e)))}t(null,O({rawTileData:c.slice(0)},r,u,i))}))};this.isSpriteLoaded?d():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(d,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom}):d()})),this.loaded=this.loaded||{},this.loaded[r]=i}))}reloadTile(e,t){const r=this.loaded,n=e.uid,o=this;if(r&&r[n]){const i=r[n];i.showCollisionBoxes=e.showCollisionBoxes,i.enableTerrain=!!e.enableTerrain,i.projection=e.projection,i.tileTransform=Pp(e.tileID.canonical,e.projection);const a=(e,r)=>{const n=i.reloadCallback;n&&(delete i.reloadCallback,i.parse(i.vectorTile,o.layerIndex,this.availableImages,o.actor,n)),t(e,r)};"parsing"===i.status?i.reloadCallback=a:"done"===i.status&&(i.vectorTile?i.parse(i.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}}abortTile(e,t){const r=e.uid,n=this.loading[r];n&&(n.abort&&n.abort(),delete this.loading[r]),t()}removeTile(e,t){const r=this.loaded,n=e.uid;r&&r[n]&&delete r[n],t()}},e.WritingMode=Eh,e.ZoomDependentExpression=$n,e.add=Cs,e.addDynamicAttributes=rf,e.adjoint=function(e,t){var r=t[0],n=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8];return e[0]=a*u-s*c,e[1]=o*c-n*u,e[2]=n*s-o*a,e[3]=s*l-i*u,e[4]=r*u-o*l,e[5]=o*i-r*s,e[6]=i*c-a*l,e[7]=n*l-r*c,e[8]=r*a-n*i,e},e.asyncAll=P,e.bezier=T,e.bindAll=D,e.boundsAttributes=If,e.bufferConvexPolygon=function(e,t){const r=[];for(let n=0;n<e.length;n++){const o=j(n-1,-1,e.length-1),i=j(n+1,-1,e.length-1),a=e[n],s=e[i],l=e[o].sub(a).unit(),c=s.sub(a).unit(),u=c.angleWithSep(l.x,l.y),d=l.add(c).unit().mult(-1*t/Math.sin(u/2));r.push(a.add(d))}return r},e.cacheEntryPossiblyAdded=function(e){se++,se>ne&&(e.getActor().send("enforceCacheSizeLimit",re),se=0)},e.calculateGlobeLabelMatrix=function(e,t){const{x:r,y:n}=e.point,o=Ol(r,n,e.worldSize/e._pixelsPerMercatorPixel,0,0);return ms(o,o,Il(vl(t)))},e.calculateGlobeMatrix=function(e){const{x:t,y:r}=e.point,{lng:n,lat:o}=e._center;return Ol(t,r,e.worldSize,n,o)},e.calculateGlobeMercatorMatrix=function(e){const t=e.pixelsPerMeter,r=t/Gl(1,e.center.lat),n=ps(new Float64Array(16));return gs(n,n,[e.point.x,e.point.y,0]),ys(n,n,[r,r,t]),Float32Array.from(n)},e.circumferenceAtLatitude=Wl,e.clamp=C,e.clearTileCache=function(e){if(!oe())return;const r=t.caches.delete(Q);e&&r.catch(e).then((()=>e()))},e.clipLine=Yh,e.clone=function(e){var t=new us(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=V,e.collisionCircleLayout=zd,e.config=o,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new us(16);return us!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=ds,e.createExpression=Yn,e.createLayout=Ni,e.createStyleLayer=function(e){return"custom"===e.type?new ff(e):new yf[e.type](e)},e.cross=Fs,e.degToRad=_,e.distance=function(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1],t[2]-e[2])},e.div=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e},e.dot=Ls,e.earthRadius=Nl,e.ease=E,e.easeCubicInOut=k,e.ecefToLatLng=function(e){let[t,r,n]=e;const o=Math.hypot(t,r,n),i=Math.atan2(t,n),a=.5*Math.PI-Math.acos(-r/o);return new Vl(w(i),w(a))},e.emitValidationErrors=qo,e.endsWith=N,e.enforceCacheSizeLimit=function(e){ie(),ee&&ee.then((t=>{t.keys().then((r=>{for(let n=0;n<r.length-e;n++)t.delete(r[n])}))}))},e.evaluateSizeForFeature=Ud,e.evaluateSizeForZoom=Vd,e.evaluateVariableOffset=vp,e.evented=vi,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.exported=Xe,e.exported$1=i,e.extend=O,e.extend$1=tt,e.fillExtrusionHeightLift=sd,e.filterObject=U,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var r=t[0],n=t[1],o=t[2],i=t[3],a=r+r,s=n+n,l=o+o,c=r*a,u=n*a,d=n*s,h=o*a,p=o*s,f=o*l,m=i*a,g=i*s,y=i*l;return e[0]=1-d-f,e[1]=u+y,e[2]=h-g,e[3]=0,e[4]=u-y,e[5]=1-c-f,e[6]=p+m,e[7]=0,e[8]=h+g,e[9]=p-m,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=xs,e.furthestTileCorner=function(e){const t=Math.round((e+45+360)%360/90)%4;return S[t]},e.getAABBPointSquareDist=function(e,t,r){let n=0;for(let o=0;o<2;++o){const i=r?r[o]:0;e[o]>i&&(n+=(e[o]-i)*(e[o]-i)),t[o]<i&&(n+=(i-t[o])*(i-t[o]))}return n},e.getAnchorAlignment=Dh,e.getAnchorJustification=xp,e.getBounds=function(e){let t=1/0,r=1/0,n=-1/0,o=-1/0;for(const i of e)t=Math.min(t,i.x),r=Math.min(r,i.y),n=Math.max(n,i.x),o=Math.max(o,i.y);return{min:new v(t,r),max:new v(n,o)}},e.getColumn=$,e.getDefaultExportFromCjs=h,e.getGridMatrix=function(e,t,r,n){const o=t.getNorth(),i=t.getSouth(),a=t.getWest(),s=t.getEast(),l=1<<e.z,c=s-a,u=o-i,d=c/cl,h=-u/ul[r],p=[0,d,0,h,0,0,o,a,0];if(e.z>0){const e=180/n;hs(p,p,[e/c+1,0,0,0,e/u+1,0,-.5*e/d,.5*e/h,1])}return p[2]=l,p[5]=e.x,p[8]=e.y,p},e.getImage=ye,e.getJSON=function(e,t){return de(O(e,{type:"json"}),t)},e.getLatitudinalLod=function(e){const t=Yl-5;e=C(e,-t,t)/t*90;const r=Math.pow(Math.abs(Math.sin(_(e))),3);return Math.round(r*(ul.length-1))},e.getMapSessionAPI=ze,e.getPerformanceMeasurement=We,e.getProjection=Jp,e.getRTLTextPluginStatus=bi,e.getReferrer=ue,e.getTilePoint=function(e,t){let{x:r,y:n}=t;return new v(((r-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0))*e.scale-e.x)*ss,(n*e.scale-e.y)*ss)},e.getTileVec3=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Es(((t.x-r)*e.scale-e.x)*ss,(t.y*e.scale-e.y)*ss,Zl(t.z,t.y))},e.getVideo=function(e,r){const n=t.document.createElement("video");n.muted=!0,n.onloadstart=function(){r(null,n)};for(let o=0;o<e.length;o++){const r=t.document.createElement("source");pe(e[o])||(n.crossOrigin="Anonymous"),r.src=e[o],n.appendChild(r)}return{cancel:()=>{}}},e.globeCenterToScreenPoint=function(e){const t=[0,0,0],r=ps(new Float64Array(16));return ms(r,e.pixelMatrix,e.globeMatrix),zs(t,t,r),new v(t[0],t[1])},e.globeDenormalizeECEF=Il,e.globeECEFOrigin=function(e,t){const r=[0,0,0];return zs(r,r,Pl(vl(t.canonical))),zs(r,r,e),r},e.globeMetersToEcef=fl,e.globeNormalizeECEF=Pl,e.globePixelsToTileUnits=function(e,t){return ss/(512*Math.pow(2,e))*Al(vl(t))},e.globePoleMatrixForTile=function(e,t,r){const n=ps(new Float64Array(16)),o=(t/(1<<e)-.5)*Math.PI*2;return bs(n,r.globeMatrix,o),Float32Array.from(n)},e.globeTileBounds=vl,e.globeTiltAtLngLat=Rl,e.globeToMercatorTransition=Ml,e.globeUseCustomAntiAliasing=function(e,t,r){const n=Ml(r.zoom),o=e.style.map._antialias,i=!!t.extStandardDerivatives,a=t.extStandardDerivativesForceOff||e.terrain&&e.terrain.exaggeration()>0;return 0===n&&!o&&!a&&i},e.identity=ps,e.identity$1=Ks,e.invert=fs,e.isFullscreen=function(){return!!t.document.fullscreenElement||!!t.document.webkitFullscreenElement},e.isLngLatBehindGlobe=Ll,e.isMapAuthenticated=function(e){return De.has(e)},e.isMapboxURL=be,e.isSafariWithAntialiasingBug=function(e){const t=e.navigator?e.navigator.userAgent:null;return!!Y(e)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},e.latFromMercatorY=Xl,e.latLngToECEF=El,e.len=Vs,e.length=Ts,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.lngFromMercatorX=Kl,e.loadVectorTile=mm,e.makeRequest=de,e.mapValue=function(e,t,r,n,o){return C((e-t)/(r-t)*(o-n)+n,n,o)},e.mercatorScale=Jl,e.mercatorXfromLng=ql,e.mercatorYfromLat=Hl,e.mercatorZfromAltitude=Gl,e.mul=ws,e.mul$1=Us,e.multiply=ms,e.multiply$1=hs,e.multiply$2=js,e.nextPowerOfTwo=F,e.normalize=Rs,e.normalize$1=Ys,e.normalize$2=qs,e.number=Ir,e.ortho=function(e,t,r,n,o,i,a){var s=1/(t-r),l=1/(n-o),c=1/(i-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*s,e[13]=(o+n)*l,e[14]=(a+i)*c,e[15]=1,e},e.pbf=Xd,e.perspective=function(e,t,r,n,o){var i,a=1/Math.tan(t/2);return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=o&&o!==1/0?(e[10]=(o+n)*(i=1/(n-o)),e[14]=2*o*n*i):(e[10]=-1,e[14]=-2*n),e},e.pick=function(e,t){const r={};for(let n=0;n<t.length;n++){const o=t[n];o in e&&(r[o]=e[o])}return r},e.plugin=_i,e.pointGeometry=g,e.polesInViewport=function(e){const t=ps(new Float64Array(16));ms(t,e.pixelMatrix,e.globeMatrix);const r=[0,dl,0],n=[0,hl,0];return zs(r,r,t),zs(n,n,t),[r[0]>0&&r[0]<=e.width&&r[1]>0&&r[1]<=e.height&&!Ll(e,new Vl(e.center.lat,90)),n[0]>0&&n[0]<=e.width&&n[1]>0&&n[1]<=e.height&&!Ll(e,new Vl(e.center.lat,-90))]},e.polygonContainsPoint=xc,e.polygonIntersectsBox=_c,e.polygonIntersectsPolygon=dc,e.polygonizeBounds=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=new v(r,r),i=e.sub(o),a=t.add(o),s=[i,new v(a.x,i.y),a,new v(i.x,a.y)];return n&&s.push(i.clone()),s},e.posAttributes=el,e.postMapLoadEvent=Me,e.postPerformanceEvent=Le,e.postTurnstileEvent=Ie,e.potpack=wh,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=w,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:fi,pluginURL:mi}),vi.on("pluginStateChange",e),e},e.removeAuthState=function(e){De.delete(e)},e.renderColorRamp=Uc,e.resample=ec,e.rotateX=vs,e.rotateX$1=Xs,e.rotateY=bs,e.rotateY$1=Zs,e.rotateZ=function(e,t,r){var n=Math.sin(r),o=Math.cos(r),i=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o+c*n,e[1]=a*o+u*n,e[2]=s*o+d*n,e[3]=l*o+h*n,e[4]=c*o-i*n,e[5]=u*o-a*n,e[6]=d*o-s*n,e[7]=h*o-l*n,e},e.rotateZ$1=function(e,t,r){r*=.5;var n=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+o*s,e[1]=o*l-n*s,e[2]=i*l+a*s,e[3]=a*l-i*s,e},e.scale=ys,e.scale$1=Ws,e.scale$2=Os,e.scaleAndAdd=Ms,e.set=function(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e},e.setCacheLimits=function(e,t){re=e,ne=t},e.setColumn=function(e,t,r){e[4*t+0]=r[0],e[4*t+1]=r[1],e[4*t+2]=r[2],e[4*t+3]=r[3]},e.setRTLTextPlugin=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(fi===ui||fi===di||fi===hi)throw new Error("setRTLTextPlugin cannot be called multiple times.");mi=Xe.resolveURL(e),fi=ui,pi=t,yi(),r||xi()},e.smoothstep=A,e.spec=et,e.squaredLength=function(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n},e.storeAuthState=function(e,t){t?De.add(e):De.delete(e)},e.sub=Bs,e.subtract=As,e.symbolSize=Wd,e.tileAABB=function(e,t,r,n,o,i,a,s,l){if("globe"===l.name)return wl(e,t,new hd(r,n,o));const c=Pp({z:r,x:n,y:o},l);return new ol([(i+c.x/c.scale)*t,t*(c.y/c.scale),a],[(i+c.x2/c.scale)*t,t*(c.y2/c.scale),s])},e.tileCornersToBounds=Sl,e.tileTransform=Pp,e.transformMat3=function(e,t,r){var n=t[0],o=t[1],i=t[2];return e[0]=n*r[0]+o*r[3]+i*r[6],e[1]=n*r[1]+o*r[4]+i*r[7],e[2]=n*r[2]+o*r[5]+i*r[8],e},e.transformMat4=zs,e.transformMat4$1=Hs,e.transformQuat=Ds,e.transitionTileAABBinECEF=xl,e.translate=gs,e.transpose=function(e,t){if(e===t){var r=t[1],n=t[2],o=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=o}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},e.triggerPluginCompletionEvent=gi,e.uniqueId=R,e.updateGlobeVertexNormal=function(e,t,r,n,o){const i=5*t+2;e.float32[i+0]=r,e.float32[i+1]=n,e.float32[i+2]=o},e.validateCustomStyleLayer=function(e){const t=[],r=e.id;return void 0===r&&t.push({message:"layers.".concat(r,': missing required property "id"')}),void 0===e.render&&t.push({message:"layers.".concat(r,': missing required method "render"')}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers.".concat(r,': property "renderingMode" must be either "2d" or "3d"')}),t},e.validateFilter=e=>Wo(ko(e)),e.validateFog=e=>Wo(Fo(e)),e.validateLayer=e=>Wo(jo(e)),e.validateLight=e=>Wo(Ro(e)),e.validateSource=e=>Wo(Oo(e)),e.validateStyle=Bo,e.validateTerrain=e=>Wo(Lo(e)),e.values=I,e.vectorTile=Ru,e.version=r,e.warnOnce=q,e.window=t,e.wrap=j})),n(["./shared"],(function(e){function t(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||null==e)return JSON.stringify(e);if(Array.isArray(e)){let r="[";for(const n of e)r+="".concat(t(n),",");return"".concat(r,"]")}let r="{";for(const n of Object.keys(e).sort())r+="".concat(n,":").concat(t(e[n]),",");return"".concat(r,"}")}function r(r){let n="";for(const o of e.refProperties)n+="/".concat(t(r[o]));return n}class n{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,n){for(const r of t)this._layerConfigs[r.id]=r,(this._layers[r.id]=e.createStyleLayer(r)).compileFilter(),this.keyCache[r.id]&&delete this.keyCache[r.id];for(const e of n)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const o=function(e,t){const n={};for(let i=0;i<e.length;i++){const o=t&&t[e[i].id]||r(e[i]);t&&(t[e[i].id]=o);let a=n[o];a||(a=n[o]=[]),a.push(e[i])}const o=[];for(const r in n)o.push(n[r]);return o}(e.values(this._layerConfigs),this.keyCache);for(const e of o){const t=e.map((e=>this._layers[e.id])),r=t[0];if("none"===r.visibility)continue;const n=r.source||"";let o=this.familiesBySource[n];o||(o=this.familiesBySource[n]={});const i=r.sourceLayer||"_geojsonTileLayer";let a=o[i];a||(a=o[i]=[]),a.push(t)}}}class o{loadTile(t,r){const{uid:n,encoding:o,rawImageData:i,padding:a,buildQuadTree:s}=t,l=e.window.ImageBitmap&&i instanceof e.window.ImageBitmap?this.getImageData(i,a):i;r(null,new e.DEMData(n,l,o,a<1,s))}getImageData(e,t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const r=this.offscreenCanvasContext.getImageData(-t,-t,e.width+2*t,e.height+2*t);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),r}}function i(e,t){if(0!==e.length){a(e[0],t);for(var r=1;r<e.length;r++)a(e[r],!t)}}function a(e,t){for(var r=0,n=0,o=0,i=e.length,a=i-1;o<i;a=o++){var s=(e[o][0]-e[a][0])*(e[a][1]+e[o][1]),l=r+s;n+=Math.abs(r)>=Math.abs(s)?r-l+s:s-l+r,r=l}r+n>=0!=!!t&&e.reverse()}var s=e.getDefaultExportFromCjs((function e(t,r){var n,o=t&&t.type;if("FeatureCollection"===o)for(n=0;n<t.features.length;n++)e(t.features[n],r);else if("GeometryCollection"===o)for(n=0;n<t.geometries.length;n++)e(t.geometries[n],r);else if("Feature"===o)e(t.geometry,r);else if("Polygon"===o)i(t.coordinates,r);else if("MultiPolygon"===o)for(n=0;n<t.coordinates.length;n++)i(t.coordinates[n],r);return t}));const l=e.VectorTileFeature.prototype.toGeoJSON;var c={exports:{}},u=e.pointGeometry,d=e.vectorTile.VectorTileFeature,h=p;function p(e,t){this.options=t||{},this.features=e,this.length=e.length}function f(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}p.prototype.feature=function(e){return new f(this.features[e],this.options.extent)},f.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var r=e[t],n=[],o=0;o<r.length;o++)n.push(new u(r[o][0],r[o][1]));this.geometry.push(n)}return this.geometry},f.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,r=-1/0,n=1/0,o=-1/0,i=0;i<e.length;i++)for(var a=e[i],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),r=Math.max(r,l.x),n=Math.min(n,l.y),o=Math.max(o,l.y)}return[t,n,r,o]},f.prototype.toGeoJSON=d.prototype.toGeoJSON;var m=e.pbf,g=h;function y(e){var t=new m;return function(e,t){for(var r in e.layers)t.writeMessage(3,v,e.layers[r])}(e,t),t.finish()}function v(e,t){var r;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<e.length;r++)n.feature=e.feature(r),t.writeMessage(2,b,n);var o=n.keys;for(r=0;r<o.length;r++)t.writeStringField(3,o[r]);var i=n.values;for(r=0;r<i.length;r++)t.writeMessage(4,k,i[r])}function b(e,t){var r=e.feature;void 0!==r.id&&t.writeVarintField(1,r.id),t.writeMessage(2,x,e),t.writeVarintField(3,r.type),t.writeMessage(4,S,r)}function x(e,t){var r=e.feature,n=e.keys,o=e.values,i=e.keycache,a=e.valuecache;for(var s in r.properties){var l=r.properties[s],c=i[s];if(null!==l){void 0===c&&(n.push(s),i[s]=c=n.length-1),t.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var d=u+":"+l,h=a[d];void 0===h&&(o.push(l),a[d]=h=o.length-1),t.writeVarint(h)}}}function _(e,t){return(t<<3)+(7&e)}function w(e){return e<<1^e>>31}function S(e,t){for(var r=e.loadGeometry(),n=e.type,o=0,i=0,a=r.length,s=0;s<a;s++){var l=r[s],c=1;1===n&&(c=l.length),t.writeVarint(_(1,c));for(var u=3===n?l.length-1:l.length,d=0;d<u;d++){1===d&&1!==n&&t.writeVarint(_(2,u-1));var h=l[d].x-o,p=l[d].y-i;t.writeVarint(w(h)),t.writeVarint(w(p)),o+=h,i+=p}3===n&&t.writeVarint(_(7,1))}}function k(e,t){var r=typeof e;"string"===r?t.writeStringField(1,e):"boolean"===r?t.writeBooleanField(7,e):"number"===r&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}c.exports=y,c.exports.fromVectorTileJs=y,c.exports.fromGeojsonVt=function(e,t){t=t||{};var r={};for(var n in e)r[n]=new g(e[n].features,t),r[n].name=n,r[n].version=t.version,r[n].extent=t.extent;return y({layers:r})},c.exports.GeoJSONWrapper=g;var T=e.getDefaultExportFromCjs(c.exports);const E={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},C=Math.fround||(A=new Float32Array(1),e=>(A[0]=+e,A[0]));var A;const j=3,P=5,I=6;class O{constructor(e){this.options=Object.assign(Object.create(E),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:r,maxZoom:n}=this.options;t&&console.time("total time");const o="prepare ".concat(e.length," points");t&&console.time(o),this.points=e;const i=[];for(let s=0;s<e.length;s++){const t=e[s];if(!t.geometry)continue;const[r,n]=t.geometry.coordinates,o=C(L(r)),a=C(F(n));i.push(o,a,1/0,s,-1,1),this.options.reduce&&i.push(0)}let a=this.trees[n+1]=this._createTree(i);t&&console.timeEnd(o);for(let s=n;s>=r;s--){const e=+Date.now();a=this.trees[s]=this._createTree(this._cluster(a,s)),t&&console.log("z%d: %d clusters in %dms",s,a.numItems,+Date.now()-e)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let r=((e[0]+180)%360+360)%360-180;const n=Math.max(-90,Math.min(90,e[1]));let o=180===e[2]?180:((e[2]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,o=180;else if(r>o){const e=this.getClusters([r,n,180,i],t),a=this.getClusters([-180,n,o,i],t);return e.concat(a)}const a=this.trees[this._limitZoom(t)],s=a.range(L(r),F(i),L(o),F(n)),l=a.data,c=[];for(const u of s){const e=this.stride*u;c.push(l[e+P]>1?M(l,e,this.clusterProps):this.points[l[e+j]])}return c}getChildren(e){const t=this._getOriginId(e),r=this._getOriginZoom(e),n="No cluster with the specified id.",o=this.trees[r];if(!o)throw new Error(n);const i=o.data;if(t*this.stride>=i.length)throw new Error(n);const a=this.options.radius/(this.options.extent*Math.pow(2,r-1)),s=o.within(i[t*this.stride],i[t*this.stride+1],a),l=[];for(const c of s){const t=c*this.stride;i[t+4]===e&&l.push(i[t+P]>1?M(i,t,this.clusterProps):this.points[i[t+j]])}if(0===l.length)throw new Error(n);return l}getLeaves(e,t,r){const n=[];return this._appendLeaves(n,e,t=t||10,r=r||0,0),n}getTile(e,t,r){const n=this.trees[this._limitZoom(e)],o=Math.pow(2,e),{extent:i,radius:a}=this.options,s=a/i,l=(r-s)/o,c=(r+1+s)/o,u={features:[]};return this._addTileFeatures(n.range((t-s)/o,l,(t+1+s)/o,c),n.data,t,r,o,u),0===t&&this._addTileFeatures(n.range(1-s/o,l,1,c),n.data,o,r,o,u),t===o-1&&this._addTileFeatures(n.range(0,l,s/o,c),n.data,-1,r,o,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const r=this.getChildren(e);if(t++,1!==r.length)break;e=r[0].properties.cluster_id}return t}_appendLeaves(e,t,r,n,o){const i=this.getChildren(t);for(const a of i){const t=a.properties;if(t&&t.cluster?o+t.point_count<=n?o+=t.point_count:o=this._appendLeaves(e,t.cluster_id,r,n,o):o<n?o++:e.push(a),e.length===r)break}return o}_createTree(t){const r=new e.KDBush(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let e=0;e<t.length;e+=this.stride)r.add(t[e],t[e+1]);return r.finish(),r.data=t,r}_addTileFeatures(e,t,r,n,o,i){for(const a of e){const e=a*this.stride,s=t[e+P]>1;let l,c,u;if(s)l=R(t,e,this.clusterProps),c=t[e],u=t[e+1];else{const r=this.points[t[e+j]];l=r.properties;const[n,o]=r.geometry.coordinates;c=L(n),u=F(o)}const d={type:1,geometry:[[Math.round(this.options.extent*(c*o-r)),Math.round(this.options.extent*(u*o-n))]],tags:l};let h;h=s||this.options.generateId?t[e+j]:this.points[t[e+j]].id,void 0!==h&&(d.id=h),i.features.push(d)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:r,extent:n,reduce:o,minPoints:i}=this.options,a=r/(n*Math.pow(2,t)),s=e.data,l=[],c=this.stride;for(let u=0;u<s.length;u+=c){if(s[u+2]<=t)continue;s[u+2]=t;const r=s[u],n=s[u+1],d=e.within(s[u],s[u+1],a),h=s[u+P];let p=h;for(const e of d){const r=e*c;s[r+2]>t&&(p+=s[r+P])}if(p>h&&p>=i){let e,i=r*h,a=n*h,f=-1;const m=(u/c<<5)+(t+1)+this.points.length;for(const r of d){const n=r*c;if(s[n+2]<=t)continue;s[n+2]=t;const l=s[n+P];i+=s[n]*l,a+=s[n+1]*l,s[n+4]=m,o&&(e||(e=this._map(s,u,!0),f=this.clusterProps.length,this.clusterProps.push(e)),o(e,this._map(s,n)))}s[u+4]=m,l.push(i/p,a/p,1/0,m,-1,p),o&&l.push(f)}else{for(let e=0;e<c;e++)l.push(s[u+e]);if(p>1)for(const e of d){const r=e*c;if(!(s[r+2]<=t)){s[r+2]=t;for(let e=0;e<c;e++)l.push(s[r+e])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,r){if(e[t+P]>1){const n=this.clusterProps[e[t+I]];return r?Object.assign({},n):n}const n=this.points[e[t+j]].properties,o=this.options.map(n);return r&&o===n?Object.assign({},o):o}}function M(e,t,r){return{type:"Feature",id:e[t+j],properties:R(e,t,r),geometry:{type:"Point",coordinates:[(n=e[t],360*(n-.5)),z(e[t+1])]}};var n}function R(e,t,r){const n=e[t+P],o=n>=1e4?"".concat(Math.round(n/1e3),"k"):n>=1e3?Math.round(n/100)/10+"k":n,i=e[t+I],a=-1===i?{}:Object.assign({},r[i]);return Object.assign(a,{cluster:!0,cluster_id:e[t+j],point_count:n,point_count_abbreviated:o})}function L(e){return e/360+.5}function F(e){const t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function z(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function D(e,t,r,n){for(var o,i=n,a=r-t>>1,s=r-t,l=e[t],c=e[t+1],u=e[r],d=e[r+1],h=t+3;h<r;h+=3){var p=N(e[h],e[h+1],l,c,u,d);if(p>i)o=h,i=p;else if(p===i){var f=Math.abs(h-a);f<s&&(o=h,s=f)}}i>n&&(o-t>3&&D(e,t,o,n),e[o+2]=i,r-o>3&&D(e,o,r,n))}function N(e,t,r,n,o,i){var a=o-r,s=i-n;if(0!==a||0!==s){var l=((e-r)*a+(t-n)*s)/(a*a+s*s);l>1?(r=o,n=i):l>0&&(r+=a*l,n+=s*l)}return(a=e-r)*a+(s=t-n)*s}function B(e,t,r,n){var o={id:void 0===e?null:e,type:t,geometry:r,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,r=e.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)U(e,t);else if("Polygon"===r||"MultiLineString"===r)for(var n=0;n<t.length;n++)U(e,t[n]);else if("MultiPolygon"===r)for(n=0;n<t.length;n++)for(var o=0;o<t[n].length;o++)U(e,t[n][o])}(o),o}function U(e,t){for(var r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1])}function V(e,t,r,n){if(t.geometry){var o=t.geometry.coordinates,i=t.geometry.type,a=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),s=[],l=t.id;if(r.promoteId?l=t.properties[r.promoteId]:r.generateId&&(l=n||0),"Point"===i)W(o,s);else if("MultiPoint"===i)for(var c=0;c<o.length;c++)W(o[c],s);else if("LineString"===i)q(o,s,a,!1);else if("MultiLineString"===i){if(r.lineMetrics){for(c=0;c<o.length;c++)q(o[c],s=[],a,!1),e.push(B(l,"LineString",s,t.properties));return}H(o,s,a,!1)}else if("Polygon"===i)H(o,s,a,!0);else{if("MultiPolygon"!==i){if("GeometryCollection"===i){for(c=0;c<t.geometry.geometries.length;c++)V(e,{id:l,geometry:t.geometry.geometries[c],properties:t.properties},r,n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<o.length;c++){var u=[];H(o[c],u,a,!0),s.push(u)}}e.push(B(l,i,s,t.properties))}}function W(e,t){t.push(G(e[0])),t.push(K(e[1])),t.push(0)}function q(e,t,r,n){for(var o,i,a=0,s=0;s<e.length;s++){var l=G(e[s][0]),c=K(e[s][1]);t.push(l),t.push(c),t.push(0),s>0&&(a+=n?(o*c-l*i)/2:Math.sqrt(Math.pow(l-o,2)+Math.pow(c-i,2))),o=l,i=c}var u=t.length-3;t[2]=1,D(t,0,u,r),t[u+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function H(e,t,r,n){for(var o=0;o<e.length;o++){var i=[];q(e[o],i,r,n),t.push(i)}}function G(e){return e/360+.5}function K(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function X(e,t,r,n,o,i,a,s){if(n/=t,i>=(r/=t)&&a<n)return e;if(a<r||i>=n)return null;for(var l=[],c=0;c<e.length;c++){var u=e[c],d=u.geometry,h=u.type,p=0===o?u.minX:u.minY,f=0===o?u.maxX:u.maxY;if(p>=r&&f<n)l.push(u);else if(!(f<r||p>=n)){var m=[];if("Point"===h||"MultiPoint"===h)Z(d,m,r,n,o);else if("LineString"===h)Y(d,m,r,n,o,!1,s.lineMetrics);else if("MultiLineString"===h)$(d,m,r,n,o,!1);else if("Polygon"===h)$(d,m,r,n,o,!0);else if("MultiPolygon"===h)for(var g=0;g<d.length;g++){var y=[];$(d[g],y,r,n,o,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===h){for(g=0;g<m.length;g++)l.push(B(u.id,h,m[g],u.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===m.length?(h="LineString",m=m[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===m.length?"Point":"MultiPoint"),l.push(B(u.id,h,m,u.tags))}}}return l.length?l:null}function Z(e,t,r,n,o){for(var i=0;i<e.length;i+=3){var a=e[i+o];a>=r&&a<=n&&(t.push(e[i]),t.push(e[i+1]),t.push(e[i+2]))}}function Y(e,t,r,n,o,i,a){for(var s,l,c=J(e),u=0===o?ee:te,d=e.start,h=0;h<e.length-3;h+=3){var p=e[h],f=e[h+1],m=e[h+2],g=e[h+3],y=e[h+4],v=0===o?p:f,b=0===o?g:y,x=!1;a&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(f-y,2))),v<r?b>r&&(l=u(c,p,f,g,y,r),a&&(c.start=d+s*l)):v>n?b<n&&(l=u(c,p,f,g,y,n),a&&(c.start=d+s*l)):Q(c,p,f,m),b<r&&v>=r&&(l=u(c,p,f,g,y,r),x=!0),b>n&&v<=n&&(l=u(c,p,f,g,y,n),x=!0),!i&&x&&(a&&(c.end=d+s*l),t.push(c),c=J(e)),a&&(d+=s)}var _=e.length-3;p=e[_],f=e[_+1],m=e[_+2],(v=0===o?p:f)>=r&&v<=n&&Q(c,p,f,m),_=c.length-3,i&&_>=3&&(c[_]!==c[0]||c[_+1]!==c[1])&&Q(c,c[0],c[1],c[2]),c.length&&t.push(c)}function J(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function $(e,t,r,n,o,i){for(var a=0;a<e.length;a++)Y(e[a],t,r,n,o,i,!1)}function Q(e,t,r,n){e.push(t),e.push(r),e.push(n)}function ee(e,t,r,n,o,i){var a=(i-t)/(n-t);return e.push(i),e.push(r+(o-r)*a),e.push(1),a}function te(e,t,r,n,o,i){var a=(i-r)/(o-r);return e.push(t+(n-t)*a),e.push(i),e.push(1),a}function re(e,t){for(var r=[],n=0;n<e.length;n++){var o,i=e[n],a=i.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)o=ne(i.geometry,t);else if("MultiLineString"===a||"Polygon"===a){o=[];for(var s=0;s<i.geometry.length;s++)o.push(ne(i.geometry[s],t))}else if("MultiPolygon"===a)for(o=[],s=0;s<i.geometry.length;s++){for(var l=[],c=0;c<i.geometry[s].length;c++)l.push(ne(i.geometry[s][c],t));o.push(l)}r.push(B(i.id,a,o,i.tags))}return r}function ne(e,t){var r=[];r.size=e.size,void 0!==e.start&&(r.start=e.start,r.end=e.end);for(var n=0;n<e.length;n+=3)r.push(e[n]+t,e[n+1],e[n+2]);return r}function oe(e,t){if(e.transformed)return e;var r,n,o,i=1<<e.z,a=e.x,s=e.y;for(r=0;r<e.features.length;r++){var l=e.features[r],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(n=0;n<c.length;n+=2)l.geometry.push(ie(c[n],c[n+1],t,i,a,s));else for(n=0;n<c.length;n++){var d=[];for(o=0;o<c[n].length;o+=2)d.push(ie(c[n][o],c[n][o+1],t,i,a,s));l.geometry.push(d)}}return e.transformed=!0,e}function ie(e,t,r,n,o,i){return[Math.round(r*(e*n-o)),Math.round(r*(t*n-i))]}function ae(e,t,r,n,o){for(var i=t===o.maxZoom?0:o.tolerance/((1<<t)*o.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,se(a,e[s],i,o);var l=e[s].minX,c=e[s].minY,u=e[s].maxX,d=e[s].maxY;l<a.minX&&(a.minX=l),c<a.minY&&(a.minY=c),u>a.maxX&&(a.maxX=u),d>a.maxY&&(a.maxY=d)}return a}function se(e,t,r,n){var o=t.geometry,i=t.type,a=[];if("Point"===i||"MultiPoint"===i)for(var s=0;s<o.length;s+=3)a.push(o[s]),a.push(o[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===i)le(a,o,e,r,!1,!1);else if("MultiLineString"===i||"Polygon"===i)for(s=0;s<o.length;s++)le(a,o[s],e,r,"Polygon"===i,0===s);else if("MultiPolygon"===i)for(var l=0;l<o.length;l++){var c=o[l];for(s=0;s<c.length;s++)le(a,c[s],e,r,!0,0===s)}if(a.length){var u=t.tags||null;if("LineString"===i&&n.lineMetrics){for(var d in u={},t.tags)u[d]=t.tags[d];u.mapbox_clip_start=o.start/o.size,u.mapbox_clip_end=o.end/o.size}var h={geometry:a,type:"Polygon"===i||"MultiPolygon"===i?3:"LineString"===i||"MultiLineString"===i?2:1,tags:u};null!==t.id&&(h.id=t.id),e.features.push(h)}}function le(e,t,r,n,o,i){var a=n*n;if(n>0&&t.size<(o?a:n))r.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===n||t[l+2]>a)&&(r.numSimplified++,s.push(t[l]),s.push(t[l+1])),r.numPoints++;o&&function(e,t){for(var r=0,n=0,o=e.length,i=o-2;n<o;i=n,n+=2)r+=(e[n]-e[i])*(e[n+1]+e[i+1]);if(r>0===t)for(n=0,o=e.length;n<o/2;n+=2){var a=e[n],s=e[n+1];e[n]=e[o-2-n],e[n+1]=e[o-1-n],e[o-2-n]=a,e[o-1-n]=s}}(s,i),e.push(s)}}function ce(e,t){var r=(t=this.options=function(e,t){for(var r in t)e[r]=t[r];return e}(Object.create(this.options),t)).debug;if(r&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=function(e,t){var r=[];if("FeatureCollection"===e.type)for(var n=0;n<e.features.length;n++)V(r,e.features[n],t,n);else V(r,"Feature"===e.type?e:{geometry:e},t);return r}(e,t);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),n=function(e,t){var r=t.buffer/t.extent,n=e,o=X(e,1,-1-r,r,0,-1,2,t),i=X(e,1,1-r,2+r,0,-1,2,t);return(o||i)&&(n=X(e,1,-r,1+r,0,-1,2,t)||[],o&&(n=re(o,1).concat(n)),i&&(n=n.concat(re(i,-1)))),n}(n,t),n.length&&this.splitTile(n,0,0,0),r&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ue(e,t,r){return 32*((1<<e)*r+t)+e}function de(t,r){const n=t.tileID.canonical;if(!this._geoJSONIndex)return r(null,null);const o=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!o)return r(null,null);const i=new class{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t}feature(t){return new class{constructor(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const r of this._feature.geometry)t.push([new e.Point(r[0],r[1])]);return t}{const t=[];for(const r of this._feature.geometry){const n=[];for(const t of r)n.push(new e.Point(t[0],t[1]));t.push(n)}return t}}toGeoJSON(e,t,r){return l.call(this,e,t,r)}}(this._features[t])}}(o.features);let a=T(i);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),r(null,{vectorTile:i,rawData:a.buffer})}ce.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ce.prototype.splitTile=function(e,t,r,n,o,i,a){for(var s=[e,t,r,n],l=this.options,c=l.debug;s.length;){n=s.pop(),r=s.pop(),t=s.pop(),e=s.pop();var u=1<<t,d=ue(t,r,n),h=this.tiles[d];if(!h&&(c>1&&console.time("creation"),h=this.tiles[d]=ae(e,t,r,n,l),this.tileCoords.push({z:t,x:r,y:n}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,n,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var p="z"+t;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(h.source=e,o){if(t===l.maxZoom||t===o)continue;var f=1<<o-t;if(r!==Math.floor(i/f)||n!==Math.floor(a/f))continue}else if(t===l.indexMaxZoom||h.numPoints<=l.indexMaxPoints)continue;if(h.source=null,0!==e.length){c>1&&console.time("clipping");var m,g,y,v,b,x,_=.5*l.buffer/l.extent,w=.5-_,S=.5+_,k=1+_;m=g=y=v=null,b=X(e,u,r-_,r+S,0,h.minX,h.maxX,l),x=X(e,u,r+w,r+k,0,h.minX,h.maxX,l),e=null,b&&(m=X(b,u,n-_,n+S,1,h.minY,h.maxY,l),g=X(b,u,n+w,n+k,1,h.minY,h.maxY,l),b=null),x&&(y=X(x,u,n-_,n+S,1,h.minY,h.maxY,l),v=X(x,u,n+w,n+k,1,h.minY,h.maxY,l),x=null),c>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*r,2*n),s.push(g||[],t+1,2*r,2*n+1),s.push(y||[],t+1,2*r+1,2*n),s.push(v||[],t+1,2*r+1,2*n+1)}}},ce.prototype.getTile=function(e,t,r){var n=this.options,o=n.extent,i=n.debug;if(e<0||e>24)return null;var a=1<<e,s=ue(e,t=(t%a+a)%a,r);if(this.tiles[s])return oe(this.tiles[s],o);i>1&&console.log("drilling down to z%d-%d-%d",e,t,r);for(var l,c=e,u=t,d=r;!l&&c>0;)c--,u=Math.floor(u/2),d=Math.floor(d/2),l=this.tiles[ue(c,u,d)];return l&&l.source?(i>1&&console.log("found parent tile z%d-%d-%d",c,u,d),i>1&&console.time("drilling down"),this.splitTile(l.source,c,u,d,e,t,r),i>1&&console.timeEnd("drilling down"),this.tiles[s]?oe(this.tiles[s],o):null):null};class he extends e.VectorTileWorkerSource{constructor(e,t,r,n,o){super(e,t,r,n,de),o&&(this.loadGeoJSON=o)}loadData(t,r){const n=t&&t.request,o=n&&n.collectResourceTiming;this.loadGeoJSON(t,((i,a)=>{if(i||!a)return r(i);if("object"!=typeof a)return r(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")));{s(a,!0);try{if(t.filter){const r=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===r.result)throw new Error(r.value.map((e=>"".concat(e.key,": ").concat(e.message))).join(", "));const n=a.features.filter((e=>r.value.evaluate({zoom:0},e)));a={type:"FeatureCollection",features:n}}this._geoJSONIndex=t.cluster?new O(function(t){let{superclusterOptions:r,clusterProperties:n}=t;if(!n||!r)return r;const o={},i={},a={accumulated:null,zoom:0},s={properties:null},l=Object.keys(n);for(const c of l){const[t,r]=n[c],a=e.createExpression(r),s=e.createExpression("string"==typeof t?[t,["accumulated"],["get",c]]:t);o[c]=a.value,i[c]=s.value}return r.map=e=>{s.properties=e;const t={};for(const r of l)t[r]=o[r].evaluate(a,s);return t},r.reduce=(e,t)=>{s.properties=t;for(const r of l)a.accumulated=e[r],e[r]=i[r].evaluate(a,s)},r}(t)).load(a.features):function(e,t){return new ce(e,t)}(a,t.geojsonVtOptions)}catch(i){return r(i)}this.loaded={};const l={};if(o){const r=e.getPerformanceMeasurement(n);r&&(l.resourceTiming={},l.resourceTiming[t.source]=JSON.parse(JSON.stringify(r)))}r(null,l)}}))}reloadTile(e,t){const r=this.loaded;return r&&r[e.uid]?super.reloadTile(e,t):this.loadTile(e,t)}loadGeoJSON(t,r){if(t.request)e.getJSON(t.request,r);else{if("string"!=typeof t.data)return r(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")));try{return r(null,JSON.parse(t.data))}catch(e){return r(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")))}}}getClusterExpansionZoom(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}getClusterChildren(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}getClusterLeaves(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}class pe{constructor(t){this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.getProjection({name:"mercator"}),this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:he},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(e,t)=>{if(this.workerSourceTypes[e])throw new Error('Worker source with name "'.concat(e,'" already registered.'));this.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=t=>{if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}clearCaches(e,t,r){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e],r()}checkIfReady(e,t,r){r()}setReferrer(e,t){this.referrer=t}spriteLoaded(t,r){this.isSpriteLoaded[t]=r;for(const n in this.workerSources[t]){const o=this.workerSources[t][n];for(const t in o)o[t]instanceof e.VectorTileWorkerSource&&(o[t].isSpriteLoaded=r,o[t].fire(new e.Event("isSpriteLoaded")))}}setImages(e,t,r){this.availableImages[e]=t;for(const n in this.workerSources[e]){const r=this.workerSources[e][n];for(const e in r)r[e].availableImages=t}r()}enableTerrain(e,t,r){this.terrain=t,r()}setProjection(t,r){this.projections[t]=e.getProjection(r)}setLayers(e,t,r){this.getLayerIndex(e).replace(t),r()}updateLayers(e,t,r){this.getLayerIndex(e).update(t.layers,t.removedIds),r()}loadTile(t,r,n){const o=this.enableTerrain?e.extend({enableTerrain:this.terrain},r):r;o.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,r.type,r.source).loadTile(o,n)}loadDEMTile(t,r,n){const o=this.enableTerrain?e.extend({buildQuadTree:this.terrain},r):r;this.getDEMWorkerSource(t,r.source).loadTile(o,n)}reloadTile(t,r,n){const o=this.enableTerrain?e.extend({enableTerrain:this.terrain},r):r;o.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,r.type,r.source).reloadTile(o,n)}abortTile(e,t,r){this.getWorkerSource(e,t.type,t.source).abortTile(t,r)}removeTile(e,t,r){this.getWorkerSource(e,t.type,t.source).removeTile(t,r)}removeSource(e,t,r){if(!this.workerSources[e]||!this.workerSources[e][t.type]||!this.workerSources[e][t.type][t.source])return;const n=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==n.removeSource?n.removeSource(t,r):r()}loadWorkerSource(e,t,r){try{this.self.importScripts(t.url),r()}catch(e){r(e.toString())}}syncRTLPluginState(t,r,n){try{e.plugin.setState(r);const t=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=t){this.self.importScripts(t);const r=e.plugin.isParsed();n(r?void 0:new Error("RTL Text Plugin failed to import scripts from ".concat(t)),r)}}catch(e){n(e.toString())}}getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}getLayerIndex(e){let t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new n),t}getWorkerSource(e,t,r){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][r]){const n={send:(t,r,n,o,i,a)=>{this.actor.send(t,r,n,e,i,a)},scheduler:this.actor.scheduler};this.workerSources[e][t][r]=new this.workerSourceTypes[t](n,this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded[e])}return this.workerSources[e][t][r]}getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new o),this.demWorkerSources[e][t]}enforceCacheSizeLimit(t,r){e.enforceCacheSizeLimit(r)}getWorkerPerformanceMetrics(e,t,r){r(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new pe(self)),pe})),n(["./shared"],(function(e){function t(e,r){if(Array.isArray(e)){if(!Array.isArray(r)||e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(!t(e[n],r[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==r){if("object"!=typeof r)return!1;if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(!t(e[n],r[n]))return!1;return!0}return e===r}var r=n;function n(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,r=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(r);try{t=new Worker(n),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(n),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var r=t.getImageData(0,0,1,1);return r&&r.width===e.width}()?(void 0===o[t=e&&e.failIfMajorPerformanceCaveat]&&(o[t]=function(e){var t,r=function(e){var t=document.createElement("canvas"),r=Object.create(n.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=e,t.getContext("webgl",r)||t.getContext("experimental-webgl",r)}(e);if(!r)return!1;try{t=r.createShader(r.VERTEX_SHADER)}catch(e){return!1}return!(!t||r.isContextLost())&&(r.shaderSource(t,"void main() {}"),r.compileShader(t),!0===r.getShaderParameter(t,r.COMPILE_STATUS))}(t)),o[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var o={};function i(t,r,n){const o=e.window.document.createElement(t);return void 0!==r&&(o.className=r),n&&n.appendChild(o),o}function a(t,r,n){const o=e.window.document.createElementNS("http://www.w3.org/2000/svg",t);for(const e of Object.keys(r))o.setAttributeNS(null,e,r[e]);return n&&n.appendChild(o),o}n.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const s=e.window.document&&e.window.document.documentElement.style,l=s&&void 0!==s.userSelect?"userSelect":"WebkitUserSelect";let c;function u(){s&&l&&(c=s[l],s[l]="none")}function d(){s&&l&&(s[l]=c)}function h(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",h,!0)}function p(){e.window.addEventListener("click",h,!0),e.window.setTimeout((()=>{e.window.removeEventListener("click",h,!0)}),0)}function f(e,t){const r=e.getBoundingClientRect();return y(e,r,t)}function m(e,t){const r=e.getBoundingClientRect(),n=[];for(let o=0;o<t.length;o++)n.push(y(e,r,t[o]));return n}function g(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button}function y(t,r,n){const o=t.offsetWidth===r.width?1:t.offsetWidth/r.width;return new e.Point((n.clientX-r.left)*o,(n.clientY-r.top)*o)}function v(e,t){var r=t[0],n=t[1],o=t[2],i=t[3],a=r*i-o*n;return a?(e[0]=i*(a=1/a),e[1]=-n*a,e[2]=-o*a,e[3]=r*a,e):null}function b(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class x extends e.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,callback:t}of this.requestors)this._notify(e,t);this.requestors=[]}}hasImage(e){return!!this.getImage(e)}getImage(e){return this.images[e]}addImage(e,t){this._validate(e,t)&&(this.images[e]=t)}_validate(t,r){let n=!0;return this._validateStretch(r.stretchX,r.data&&r.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "stretchX" value')))),n=!1),this._validateStretch(r.stretchY,r.data&&r.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "stretchY" value')))),n=!1),this._validateContent(r.content,r)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "content" value')))),n=!1),n}_validateStretch(e,t){if(!e)return!0;let r=0;for(const n of e){if(n[0]<r||n[1]<n[0]||t<n[1])return!1;r=n[1]}return!0}_validateContent(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e,t){let r=!0;if(!this.isLoaded())for(const n of e)this.images[n]||(r=!1);this.isLoaded()||r?this._notify(e,t):this.requestors.push({ids:e,callback:t})}_notify(t,r){const n={};for(const o of t){this.images[o]||this.fire(new e.Event("styleimagemissing",{id:o}));const t=this.images[o];t?n[o]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)}:e.warnOnce('Image "'.concat(o,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}r(null,n)}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(t){const r=this.patterns[t],n=this.getImage(t);if(!n)return null;if(r&&r.position.version===n.version)return r.position;if(r)r.position.version=n.version;else{const r={w:n.data.width+2,h:n.data.height+2,x:0,y:0},o=new e.ImagePosition(r,n);this.patterns[t]={bin:r,position:o}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const r=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,r.RGBA),this.atlasTexture&&this.atlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const e in this.patterns)t.push(this.patterns[e].bin);const{w:r,h:n}=e.potpack(t),o=this.atlasImage;o.resize({width:r||1,height:n||1});for(const i in this.patterns){const{bin:t}=this.patterns[i],r=t.x+1,n=t.y+1,a=this.images[i].data,s=a.width,l=a.height;e.RGBAImage.copy(a,o,{x:0,y:0},{x:r,y:n},{width:s,height:l}),e.RGBAImage.copy(a,o,{x:0,y:l-1},{x:r,y:n-1},{width:s,height:1}),e.RGBAImage.copy(a,o,{x:0,y:0},{x:r,y:n+l},{width:s,height:1}),e.RGBAImage.copy(a,o,{x:s-1,y:0},{x:r-1,y:n},{width:1,height:l}),e.RGBAImage.copy(a,o,{x:0,y:0},{x:r+s,y:n},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const t of e){if(this.callbackDispatchedThisFrame[t])continue;this.callbackDispatchedThisFrame[t]=!0;const e=this.images[t];b(e)&&this.updateImage(t,e)}}}const _=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new class{constructor(){this.specification=e.spec.light.position}possiblyEvaluate(t,r){return function(t){let[r,n,o]=t;const i=e.degToRad(n+90),a=e.degToRad(o);return{x:r*Math.cos(i)*Math.sin(a),y:r*Math.sin(i)*Math.sin(a),z:r*Math.cos(a),azimuthal:n,polar:o}}(t.expression.evaluate(r))}interpolate(t,r,n){return{x:e.number(t.x,r.x,n),y:e.number(t.y,r.y,n),z:e.number(t.z,r.z,n),azimuthal:e.number(t.azimuthal,r.azimuthal,n),polar:e.number(t.polar,r.polar,n)}}},color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)});class w extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(_),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(e.validateLight,t,r))for(const n in t){const r=t[n];e.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),r):this._transitionable.setValue(n,r)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,r,n){return(!n||!1!==n.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:r,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}const S=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)});let k=class extends e.Evented{constructor(t,r){super(),this._transitionable=new e.Transitionable(S),this.set(t),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=r}get(){return this._transitionable.serialize()}set(t){for(const r in t){const n=t[r];e.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-11),n):this._transitionable.setValue(r,n)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}};function T(t,r,n,o){const i=e.smoothstep(45,65,n),[a,s]=E(t,o),l=e.length(r);let c=1-Math.min(1,Math.exp((l-a)/(s-a)*-6));return c*=c*c,c=Math.min(1,1.00747*c),c*i*t.alpha}function E(e,t){const r=.5/Math.tan(.5*t);return[e.range[0]+r,e.range[1]+r]}const C=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),"high-color":new e.DataConstantProperty(e.spec.fog["high-color"]),"space-color":new e.DataConstantProperty(e.spec.fog["space-color"]),"horizon-blend":new e.DataConstantProperty(e.spec.fog["horizon-blend"]),"star-intensity":new e.DataConstantProperty(e.spec.fog["star-intensity"])});class A extends e.Evented{constructor(t,r){super(),this._transitionable=new e.Transitionable(C),this.set(t),this._transitioning=this._transitionable.untransitioned(),this._transform=r}get state(){const t=this._transform,r="globe"===t.projection.name,n=e.globeToMercatorTransition(t.zoom),o=this.properties.get("range"),i=[.5,3];return{range:r?[e.number(i[0],o[0],n),e.number(i[1],o[1],n)]:o,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(e.validateFog,t,r)){for(const r of Object.keys(e.spec.fog))t&&void 0===t[r]&&(t[r]=e.spec.fog[r].default);for(const r in t){const n=t[r];e.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-11),n):this._transitionable.setValue(r,n)}}}getOpacity(t){if(!this._transform.projection.supportsFog)return 0;const r=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:e.smoothstep(45,65,t))*r.a}getOpacityAtLatLng(t,r){return this._transform.projection.supportsFog?function(t,r,n){const o=e.MercatorCoordinate.fromLngLat(r),i=n.elevation?n.elevation.getAtPointOrZero(o):0,a=[o.x,o.y,i];return e.transformMat4(a,a,n.mercatorFogMatrix),T(t,a,n.pitch,n._fov)}(this.state,t,r):0}getFovAdjustedRange(e){return this._transform.projection.supportsFog?E(this.state,e):[0,1]}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,r,n){return(!n||!1!==n.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:r,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}class j{constructor(t,r){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=e.uniqueId();const n=this.workerPool.acquire(this.id);for(let e=0;e<n.length;e++){const t=new j.Actor(n[e],r,this.id);t.name="Worker ".concat(e),this.actors.push(t)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(t,r,n){e.asyncAll(this.actors,((e,n)=>{e.send(t,r,n)}),n=n||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((e=>{e.remove()})),this.actors=[],this.workerPool.release(this.id)}}function P(t,r,n){return r*(e.EXTENT/(t.tileSize*Math.pow(2,n-t.tileID.overscaledZ)))}j.Actor=e.Actor;class I{constructor(e,t,r,n){this.screenBounds=e,this.cameraPoint=t,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=r,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,n)}static createFromScreenPoints(t,r){let n,o;if(t instanceof e.Point||"number"==typeof t[0]){const i=e.Point.convert(t);n=[i],o=r.isPointAboveHorizon(i)}else{const i=e.Point.convert(t[0]),a=e.Point.convert(t[1]);n=[i,a],o=e.polygonizeBounds(i,a).every((e=>r.isPointAboveHorizon(e)))}return new I(n,r.getCameraPoint(),o,r)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const r=this.screenBounds[0],n=1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,1)):this.screenBounds[1],o=e.polygonizeBounds(r,n,0,!1);return this.cameraPoint.y>n.y&&(this.cameraPoint.x>r.x&&this.cameraPoint.x<n.x?o.splice(3,0,this.cameraPoint):this.cameraPoint.x>=n.x?o[2]=this.cameraPoint:this.cameraPoint.x<=r.x&&(o[3]=this.cameraPoint)),e.bufferConvexPolygon(o,t)}bufferedCameraGeometryGlobe(t){const r=this.screenBounds[0],n=1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,1)):this.screenBounds[1],o=e.polygonizeBounds(r,n,t),i=this.cameraPoint.clone();switch(3*((i.y>r.y)+(i.y>n.y))+((i.x>r.x)+(i.x>n.x))){case 0:o[0]=i,o[4]=i.clone();break;case 1:o.splice(1,0,i);break;case 2:o[1]=i;break;case 3:o.splice(4,0,i);break;case 5:o.splice(2,0,i);break;case 6:o[3]=i;break;case 7:o.splice(3,0,i);break;case 8:o[2]=i}return o}containsTile(t,r,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=t.queryPadding/r._pixelsPerMercatorPixel+1,a=n?this._bufferedCameraMercator(i,r):this._bufferedScreenMercator(i,r);let s=t.tileID.wrap+(a.unwrapped?o:0);const l=a.polygon.map((r=>e.getTilePoint(t.tileTransform,r,s)));if(!e.polygonIntersectsBox(l,0,0,e.EXTENT,e.EXTENT))return;s=t.tileID.wrap+(this.screenGeometryMercator.unwrapped?o:0);const c=this.screenGeometryMercator.polygon.map((r=>e.getTileVec3(t.tileTransform,r,s))),u=c.map((t=>new e.Point(t[0],t[1]))),d=r.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),h=e.getTileVec3(t.tileTransform,d,s),p=c.map((t=>{const r=e.sub(t,t,h);return e.normalize(r,r),new e.Ray(h,r)})),f=P(t,1,r.zoom)*r._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:u,tilespaceRays:p,bufferedTilespaceGeometry:l,bufferedTilespaceBounds:(m=e.getBounds(l),m.min.x=e.clamp(m.min.x,0,e.EXTENT),m.min.y=e.clamp(m.min.y,0,e.EXTENT),m.max.x=e.clamp(m.max.x,0,e.EXTENT),m.max.y=e.clamp(m.max.y,0,e.EXTENT),m),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:f};var m}_bufferedScreenMercator(e,t){const r=R(e);if(this._screenRaycastCache[r])return this._screenRaycastCache[r];{let n;return n="globe"===t.projection.name?this._projectAndResample(this.bufferedScreenGeometry(e),t):{polygon:this.bufferedScreenGeometry(e).map((e=>t.pointCoordinate3D(e))),unwrapped:!0},this._screenRaycastCache[r]=n,n}}_bufferedCameraMercator(e,t){const r=R(e);if(this._cameraRaycastCache[r])return this._cameraRaycastCache[r];{let n;return n="globe"===t.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(e),t):{polygon:this.bufferedCameraGeometry(e).map((e=>t.pointCoordinate3D(e))),unwrapped:!0},this._cameraRaycastCache[r]=n,n}}_projectAndResample(t,r){const n=function(t,r){const n=e.multiply([],r.pixelMatrix,r.globeMatrix),o=[0,-e.GLOBE_RADIUS,0,1],i=[0,e.GLOBE_RADIUS,0,1],a=[0,0,0,1];e.transformMat4$1(o,o,n),e.transformMat4$1(i,i,n),e.transformMat4$1(a,a,n);const s=new e.Point(o[0]/o[3],o[1]/o[3]),l=new e.Point(i[0]/i[3],i[1]/i[3]),c=e.polygonContainsPoint(t,s)&&o[3]<a[3],u=e.polygonContainsPoint(t,l)&&i[3]<a[3];if(!c&&!u)return null;const d=function(e,t,r){for(let n=1;n<e.length;n++){const o=M(t.pointCoordinate3D(e[n-1]).x),i=M(t.pointCoordinate3D(e[n]).x);if(r<0){if(o<i)return{idx:n,t:-o/(i-1-o)}}else if(i<o)return{idx:n,t:(1-o)/(i+1-o)}}return null}(t,r,c?-1:1);if(!d)return null;const{idx:h,t:p}=d;let f=h>1?O(t.slice(0,h),r):[],m=h<t.length?O(t.slice(h),r):[];f=f.map((t=>new e.Point(M(t.x),t.y))),m=m.map((t=>new e.Point(M(t.x),t.y)));const g=[...f];0===g.length&&g.push(m[m.length-1]);const y=e.number(g[g.length-1].y,(0===m.length?f[0]:m[0]).y,p);let v;return v=c?[new e.Point(0,y),new e.Point(0,0),new e.Point(1,0),new e.Point(1,y)]:[new e.Point(1,y),new e.Point(1,1),new e.Point(0,1),new e.Point(0,y)],g.push(...v),0===m.length?g.push(f[0]):g.push(...m),{polygon:g.map((t=>new e.MercatorCoordinate(t.x,t.y))),unwrapped:!1}}(t,r);if(n)return n;const o=function(t,r){let n=!1,o=-1/0,i=0;for(let e=0;e<t.length-1;e++)t[e].x>o&&(o=t[e].x,i=e);for(let e=0;e<t.length-1;e++){const r=(i+e)%(t.length-1),o=t[r],a=t[r+1];Math.abs(o.x-a.x)>.5&&(o.x<a.x?(o.x+=1,0===r&&(t[t.length-1].x+=1)):(a.x+=1,r+1===t.length-1&&(t[0].x+=1)),n=!0)}const a=e.mercatorXfromLng(r.center.lng);return n&&a<Math.abs(a-1)&&t.forEach((e=>{e.x-=1})),{polygon:t,unwrapped:n}}(O(t,r).map((t=>new e.Point(M(t.x),t.y))),r);return{polygon:o.polygon.map((t=>new e.MercatorCoordinate(t.x,t.y))),unwrapped:o.unwrapped}}}function O(t,r){return e.resample(t,(e=>{const t=r.pointCoordinate3D(e);e.x=t.x,e.y=t.y}),1/256)}function M(e){return e<0?1+e%1:e%1}function R(e){return 100*e|0}function L(t,r,n,o,i){const a=function(n,o){if(n)return i(n);if(o){t.url&&o.tiles&&t.tiles&&delete t.tiles;const n=e.pick(e.extend(o,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(n.vectorLayers=o.vector_layers,n.vectorLayerIds=n.vectorLayers.map((e=>e.id))),n.tiles=r.canonicalizeTileset(n,t.url),i(null,n)}};return t.url?e.getJSON(r.transformRequest(r.normalizeSourceURL(t.url,null,n,o),e.ResourceType.Source),a):e.exported.frame((()=>a(null,t)))}class F{constructor(t,r,n){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=r||0,this.maxzoom=n||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(t){const r=Math.pow(2,t.z),n=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*r),o=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*r),i=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*r),a=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*r);return t.x>=n&&t.x<i&&t.y>=o&&t.y<a}}class z{constructor(e,t,r){this.context=e;const n=e.gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||t.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const D={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class N{constructor(e,t,r,n){this.length=t.length,this.attributes=r,this.itemSize=t.bytesPerElement,this.dynamicDraw=n,this.context=e;const o=e.gl;this.buffer=o.createBuffer(),e.bindVertexBuffer.set(this.buffer),o.bufferData(o.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.dynamicDraw||t.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let r=0;r<this.attributes.length;r++){const n=t.attributes[this.attributes[r].name];void 0!==n&&e.enableVertexAttribArray(n)}}setVertexAttribPointers(e,t,r){for(let n=0;n<this.attributes.length;n++){const o=this.attributes[n],i=t.attributes[o.name];void 0!==i&&e.vertexAttribPointer(i,o.components,e[D[o.type]],!1,this.itemSize,o.offset+this.itemSize*(r||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class B{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class U extends B{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class V extends B{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class W extends B{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class q extends B{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class H extends B{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class G extends B{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class K extends B{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class X extends B{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class Z extends B{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class Y extends B{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class J extends B{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class $ extends B{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class Q extends B{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class ee extends B{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class te extends B{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class re extends B{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class ne extends B{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class oe extends B{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class ie extends B{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}let ae,se=class extends B{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}};class le extends B{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class ce extends B{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class ue extends B{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class de extends B{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class he extends B{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class pe extends B{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class fe extends B{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class me extends B{constructor(e){super(e),this.vao=e.extVertexArrayObject}getDefault(){return null}set(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}class ge extends B{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class ye extends B{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class ve extends B{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class be extends B{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class xe extends be{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class _e extends be{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class we extends _e{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Se{constructor(e,t,r,n){this.context=e,this.width=t,this.height=r;const o=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new xe(e,o),n&&(this.depthAttachment=new _e(e,o))}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class ke{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.gl=e,this.isWebGL2=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),t){const t=e;this.extVertexArrayObject={createVertexArrayOES:t.createVertexArray.bind(e),deleteVertexArrayOES:t.deleteVertexArray.bind(e),bindVertexArrayOES:t.bindVertexArray.bind(e)}}this.clearColor=new U(this),this.clearDepth=new V(this),this.clearStencil=new W(this),this.colorMask=new q(this),this.depthMask=new H(this),this.stencilMask=new G(this),this.stencilFunc=new K(this),this.stencilOp=new X(this),this.stencilTest=new Z(this),this.depthRange=new Y(this),this.depthTest=new J(this),this.depthFunc=new $(this),this.blend=new Q(this),this.blendFunc=new ee(this),this.blendColor=new te(this),this.blendEquation=new re(this),this.cullFace=new ne(this),this.cullFaceSide=new oe(this),this.frontFace=new ie(this),this.program=new se(this),this.activeTexture=new le(this),this.viewport=new ce(this),this.bindFramebuffer=new ue(this),this.bindRenderbuffer=new de(this),this.bindTexture=new he(this),this.bindVertexBuffer=new pe(this),this.bindElementBuffer=new fe(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new me(this),this.pixelStoreUnpack=new ge(this),this.pixelStoreUnpackPremultiplyAlpha=new ye(this),this.pixelStoreUnpackFlipY=new ve(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=e.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=e.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=e.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),t||(this.extTextureHalfFloat=e.getExtension("OES_texture_half_float")),(t||this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=t||e.getExtension("OES_standard_derivatives"),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new z(this,e,t)}createVertexBuffer(e,t,r){return new N(this,e,t,r)}createRenderbuffer(e,t,r){const n=this.gl,o=n.createRenderbuffer();return this.bindRenderbuffer.set(o),n.renderbufferStorage(n.RENDERBUFFER,e,t,r),this.bindRenderbuffer.set(null),o}createFramebuffer(e,t,r){return new Se(this,e,t,r)}clear(e){let{color:t,depth:r,stencil:n}=e;const o=this.gl;let i=0;t&&(i|=o.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==r&&(i|=o.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(r),this.depthMask.set(!0)),void 0!==n&&(i|=o.STENCIL_BUFFER_BIT,this.clearStencil.set(n),this.stencilMask.set(255)),o.clear(i)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(r){t(r.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Te extends e.Evented{constructor(t,r,n,o){if(super(),this.id=t,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(r,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o),this._tileWorkers={},this._deduped=new e.DedupedRequest}load(t){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"}));const r=Array.isArray(this.map._language)?this.map._language.join():this.map._language,n=this.map._worldview;this._tileJSONRequest=L(this._options,this.map._requestManager,r,n,((o,i)=>{this._tileJSONRequest=null,this._loaded=!0,o?(r&&console.warn("Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ".concat(r)),n&&2!==n.length&&console.warn("Requested worldview strings must be a valid ISO alpha-2 code. Found: ".concat(n)),this.fire(new e.ErrorEvent(o))):i&&(e.extend(this,i),i.bounds&&(this.tileBounds=new F(i.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(i.tiles,this.map._requestManager._customAccessToken),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(o)}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.extend({},this._options)}loadTile(t,r){const n=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),o={request:this.map._requestManager.transformRequest(n,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(o.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=r:t.request=t.actor.send("reloadTile",o,i.bind(this));else if(t.actor=this._tileWorkers[n]=this._tileWorkers[n]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",o,i.bind(this),void 0,!0);else{const r=e.loadVectorTile.call({deduped:this._deduped},o,((e,r)=>{e||!r?i.call(this,e):(o.data={cacheControl:r.cacheControl,expires:r.expires,rawData:r.rawData.slice(0)},t.actor&&t.actor.send("loadTile",o,i.bind(this),void 0,!0))}),!0);t.request={cancel:r}}function i(n,o){return delete t.request,t.aborted?r(null):n&&404!==n.status?r(n):(o&&o.resourceTiming&&(t.resourceTiming=o.resourceTiming),this.map._refreshExpiredTiles&&o&&t.setExpiryData(o),t.loadVectorData(o,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),r(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id})}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Ee extends e.Evented{constructor(t,r,n,o){super(),this.id=t,this.dispatcher=n,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},r),e.extend(this,e.pick(r,["url","scheme","tileSize"]))}load(t){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=L(this._options,this.map._requestManager,null,null,((r,n)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new e.ErrorEvent(r)):n&&(e.extend(this,n),n.bounds&&(this.tileBounds=new F(n.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(n.tiles),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(r)}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.extend({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,r){const n=e.exported.devicePixelRatio>=2,o=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),n,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(o,e.ResourceType.Tile),((n,o,i,a)=>(delete t.request,t.aborted?(t.state="unloaded",r(null)):n?(t.state="errored",r(n)):o?(this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:i,expires:a}),t.setTexture(o,this.map.painter),t.state="loaded",e.cacheEntryPossiblyAdded(this.dispatcher),void r(null)):r(null))))}static loadTileData(e,t,r){e.setTexture(t,r)}static unloadTileData(e,t){e.texture&&t.saveTileTexture(e.texture)}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t()}unloadTile(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Ce(t,r,n,o,i,a,s,l){const c=[t,n,i,r,o,a,1,1,1],u=[s,l,1],d=e.adjoint([],c),[h,p,f]=e.transformMat3(u,u,e.transpose(d,d));return e.multiply$1(c,[h,0,0,0,p,0,0,0,f],c)}class Ae extends e.Evented{constructor(e,t,r,n){super(),this.id=e,this.dispatcher=r,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(n),this.options=t,this._dirty=!1}load(t,r){this._loaded=r||!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),((r,n)=>{if(this._imageRequest=null,this._loaded=!0,r)this.fire(new e.ErrorEvent(r));else if(n){const{HTMLImageElement:r}=e.window;this.image=n instanceof r?e.exported.getImageData(n):n,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,t&&(this.coordinates=t),this._finishLoading()}}))}loaded(){return this._loaded}updateImage(e){return this.image&&e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(t){this.coordinates=t,this._boundsArray=void 0;const r=t.map(e.MercatorCoordinate.fromLngLat);return this.tileID=function(t){let r=1/0,n=1/0,o=-1/0,i=-1/0;for(const e of t)r=Math.min(r,e.x),n=Math.min(n,e.y),o=Math.max(o,e.x),i=Math.max(i,e.y);const a=Math.max(o-r,i-n),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),l=Math.pow(2,s);return new e.CanonicalTileID(s,Math.floor((r+o)/2*l),Math.floor((n+i)/2*l))}(r),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(t){for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}if(this._boundsArray)return;const r=e.tileTransform(this.tileID,this.map.transform.projection),[n,o,i,a]=this.coordinates.map((t=>{const n=r.projection.project(t[0],t[1]);return e.getTilePoint(r,n)._round()}));this.perspectiveTransform=function(t,r,n,o,i,a,s,l,c,u){const d=Ce(0,0,t,0,0,r,t,r),h=Ce(n,o,i,a,s,l,c,u);return e.multiply$1(h,e.adjoint(d,d),h),[h[6]/h[8]*t/e.EXTENT,h[7]/h[8]*r/e.EXTENT]}(this.width,this.height,n.x,n.y,o.x,o.y,a.x,a.y,i.x,i.y);const s=this._boundsArray=new e.StructArrayLayout4i8;s.emplaceBack(n.x,n.y,0,0),s.emplaceBack(o.x,o.y,e.EXTENT,0),s.emplaceBack(a.x,a.y,0,e.EXTENT),s.emplaceBack(i.x,i.y,e.EXTENT,e.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=t.createVertexBuffer(s,e.boundsAttributes.members),this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,r=t.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new e.Texture(t,this.image,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(t)}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const je={vector:Te,raster:Ee,"raster-dem":class extends Ee{constructor(t,r,n,o){super(t,r,n,o),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox"}loadTile(t,r){const n=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function o(e,n){e&&(t.state="errored",r(e)),n&&(t.dem=n,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",r(null))}t.request=e.getImage(this.map._requestManager.transformRequest(n,e.ResourceType.Tile),function(n,i,a,s){if(delete t.request,t.aborted)t.state="unloaded",r(null);else if(n)t.state="errored",r(n);else if(i){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:a,expires:s});const r=e.window.ImageBitmap&&i instanceof e.window.ImageBitmap&&(null==ae&&(ae=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof e.window.createImageBitmap),ae),n=1-(i.width-e.prevPowerOfTwo(i.width))/2;n<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));const l=r?i:e.exported.getImageData(i,n),c={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:n};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",c,o.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(t){const r=t.canonical,n=Math.pow(2,r.z),o=(r.x-1+n)%n,i=0===r.x?t.wrap-1:t.wrap,a=(r.x+1+n)%n,s=r.x+1===n?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,i,r.z,o,r.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,r.z,a,r.y).key]={backfilled:!1},r.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,i,r.z,o,r.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,r.z,a,r.y-1).key]={backfilled:!1}),r.y+1<n&&(l[new e.OverscaledTileID(t.overscaledZ,i,r.z,o,r.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,r.z,a,r.y+1).key]={backfilled:!1}),l}unloadTile(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}},geojson:class extends e.Evented{constructor(t,r,n,o){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=n.getActor(),this.setEventedParent(o),this._data=r.data,this._options=e.extend({},r),this._collectResourceTiming=r.collectResourceTiming,void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;const i=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*i,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*i,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?r.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==r.clusterRadius?r.clusterRadius:50)*i,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions)}onAdd(e){this.map=e,this.setData(this._data)}setData(e){return this._data=e,this._updateWorkerData(),this}getClusterExpansionZoom(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}getClusterChildren(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}getClusterLeaves(e,t,r,n){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:r},n),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new e.Event("dataloading",{dataType:"source"})),this._loaded=!1;const t=e.extend({},this.workerOptions),r=this._data;"string"==typeof r?(t.request=this.map._requestManager.transformRequest(e.exported.resolveURL(r),e.ResourceType.Source),t.request.collectResourceTiming=this._collectResourceTiming):t.data=JSON.stringify(r),this._pendingLoad=this.actor.send("".concat(this.type,".loadData"),t,((t,r)=>{if(this._loaded=!0,this._pendingLoad=null,t)this.fire(new e.ErrorEvent(t));else{const t={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&r&&r.resourceTiming&&r.resourceTiming[this.id]&&(t.resourceTiming=r.resourceTiming[this.id]),this.fire(new e.Event("data",t)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(t,r){const n=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(n,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((e,o)=>(delete t.request,t.unloadVectorData(),t.aborted?r(null):e?r(e):(t.loadVectorData(o,this.map.painter,"reloadTile"===n),r(null)))),void 0,"loadTile"===n)}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}unloadTile(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return e.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Ae{constructor(e,t,r,n){super(e,t,r,n),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const r of t.urls)this.urls.push(this.map._requestManager.transformRequest(r,e.ResourceType.Source).url);e.getVideo(this.urls,((t,r)=>{this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):r&&(this.video=r,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const r=this.video.seekable;t<r.start(0)||t>r.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(r.start(0)," and ").concat(r.end(0),"-second mark.")))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,r=t.gl;this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(t)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Ae,canvas:class extends Ae{constructor(t,r,n,o){super(t,r,n,o),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>"number"!=typeof e))))||this.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const r=this.map.painter.context;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(r,this.canvas,r.gl.RGBA,{premultiply:!0}),this._prepareData(r)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}},custom:class extends e.Evented{constructor(t,r,n,o){super(),this.id=t,this.type="custom",this._dataType="raster",this._dispatcher=n,this._implementation=r,this.setEventedParent(o),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new e.ErrorEvent(new Error("Missing implementation for ".concat(this.id," custom source")))),this._implementation.loadTile||this.fire(new e.ErrorEvent(new Error("Missing loadTile implementation for ".concat(this.id," custom source")))),this._implementation.bounds&&(this.tileBounds=new F(this._implementation.bounds,this.minzoom,this.maxzoom)),r.update=this._update.bind(this),r.clearTiles=this._clearTiles.bind(this),r.coveringTiles=this._coveringTiles.bind(this),e.extend(this,e.pick(r,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return e.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(t){this._map=t,this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(t),this.load()}onRemove(e){this._implementation.onRemove&&this._implementation.onRemove(e)}hasTile(e){if(this._implementation.hasTile){const{x:t,y:r,z:n}=e.canonical;return this._implementation.hasTile({x:t,y:r,z:n})}return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,r){const{x:n,y:o,z:i}=t.tileID.canonical,a=new e.window.AbortController;t.request=Promise.resolve(this._implementation.loadTile({x:n,y:o,z:i},{signal:a.signal})).then(function(n){return delete t.request,t.aborted?(t.state="unloaded",r(null)):void 0===n?(t.state="errored",r(null)):null===n?(this.loadTileData(t,{width:this.tileSize,height:this.tileSize,data:null}),t.state="loaded",r(null)):function(t){return t instanceof e.window.ImageData||t instanceof e.window.HTMLCanvasElement||t instanceof e.window.ImageBitmap||t instanceof e.window.HTMLImageElement}(n)?(this.loadTileData(t,n),t.state="loaded",void r(null)):(t.state="errored",r(new Error("Can't infer data type for ".concat(this.id,", only raster data supported at the moment"))))}.bind(this)).catch((e=>{20!==e.code&&(t.state="errored",r(e))})),t.request.cancel=()=>a.abort()}loadTileData(e,t){Ee.loadTileData(e,t,this._map.painter)}unloadTileData(e){Ee.unloadTileData(e,this._map.painter)}unloadTile(e,t){if(this.unloadTileData(e),this._implementation.unloadTile){const{x:t,y:r,z:n}=e.tileID.canonical;this._implementation.unloadTile({x:t,y:r,z:n})}t()}abortTile(e,t){e.request&&e.request.cancel&&(e.request.cancel(),delete e.request),t()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((e=>({x:e.canonical.x,y:e.canonical.y,z:e.canonical.z})))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Pe=function(t,r,n,o){const i=new je[r.type](t,r,n,o);if(i.id!==t)throw new Error("Expected Source id to be ".concat(t," instead of ").concat(i.id));return e.bindAll(["load","abort","unload","serialize","prepare"],i),i};function Ie(t,r){const n=e.identity([]);return e.scale(n,n,[.5*t.width,.5*-t.height,1]),e.translate(n,n,[1,-1,0]),e.multiply(n,n,t.calculateProjMatrix(r.toUnwrapped())),Float32Array.from(n)}function Oe(e,t,r,n,o,i,a){let s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=e.tilesIn(n,a,s);l.sort(Re);const c=[];for(const d of l)c.push({wrappedTileID:d.tile.tileID.wrapped().key,queryResults:d.tile.queryRenderedFeatures(t,r,e._state,d,o,i,Ie(e.transform,d.tile.tileID),s)});const u=function(e){const t={},r={};for(const n of e){const e=n.queryResults,o=n.wrappedTileID,i=r[o]=r[o]||{};for(const r in e){const n=e[r],o=i[r]=i[r]||{},a=t[r]=t[r]||[];for(const e of n)o[e.featureIndex]||(o[e.featureIndex]=!0,a.push(e))}}return t}(c);for(const d in u)u[d].forEach((t=>{const r=t.feature,n=r.layer;n&&"background"!==n.type&&"sky"!==n.type&&(r.source=n.source,n["source-layer"]&&(r.sourceLayer=n["source-layer"]),r.state=void 0!==r.id?e.getFeatureState(n["source-layer"],r.id):{})}));return u}function Me(e,t){const r=e.getRenderableIds().map((t=>e.getTileByID(t))),n=[],o={};for(let i=0;i<r.length;i++){const e=r[i],a=e.tileID.canonical.key;o[a]||(o[a]=!0,e.querySourceFeatures(n,t))}return n}function Re(e,t){const r=e.tileID,n=t.tileID;return r.overscaledZ-n.overscaledZ||r.canonical.y-n.canonical.y||r.wrap-n.wrap||r.canonical.x-n.canonical.x}function Le(){return null!=pi.workerClass?new pi.workerClass:new e.window.Worker(pi.workerUrl)}const Fe="mapboxgl_preloaded_worker_pool";class ze{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<ze.workerCount;)this.workers.push(new Le);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Fe]}numActive(){return Object.keys(this.active).length}}let De;function Ne(){return De||(De=new ze),De}function Be(t,r){const n={};for(const e in t)"ref"!==e&&(n[e]=t[e]);return e.refProperties.forEach((e=>{e in r&&(n[e]=r[e])})),n}function Ue(e){e=e.slice();const t=Object.create(null);for(let r=0;r<e.length;r++)t[e[r].id]=e[r];for(let r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=Be(e[r],t[e[r].ref]));return e}ze.workerCount=2;const Ve={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function We(e,t,r){r.push({command:Ve.addSource,args:[e,t[e]]})}function qe(e,t,r){t.push({command:Ve.removeSource,args:[e]}),r[e]=!0}function He(e,t,r,n){qe(e,r,n),We(e,t,r)}function Ge(e,r,n){let o;for(o in e[n])if(e[n].hasOwnProperty(o)&&"data"!==o&&!t(e[n][o],r[n][o]))return!1;for(o in r[n])if(r[n].hasOwnProperty(o)&&"data"!==o&&!t(e[n][o],r[n][o]))return!1;return!0}function Ke(e,r,n,o,i,a){let s;for(s in r=r||{},e=e||{})e.hasOwnProperty(s)&&(t(e[s],r[s])||n.push({command:a,args:[o,s,r[s],i]}));for(s in r)r.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t(e[s],r[s])||n.push({command:a,args:[o,s,r[s],i]}))}function Xe(e){return e.id}function Ze(e,t){return e[t.id]=t,e}class Ye{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let r=1;r<this.points.length;r++)this._distances[r]=this._distances[r-1]+this.points[r].dist(this.points[r-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);let r=1,n=this._distances[r];const o=t*this.paddedLength+this.padding;for(;n<o&&r<this._distances.length;)n=this._distances[++r];const i=r-1,a=this._distances[i],s=n-a,l=s>0?(o-a)/s:0;return this.points[i].mult(1-l).add(this.points[r].mult(l))}}class Je{constructor(e,t,r){const n=this.boxCells=[],o=this.circleCells=[];this.xCellCount=Math.ceil(e/r),this.yCellCount=Math.ceil(t/r);for(let i=0;i<this.xCellCount*this.yCellCount;i++)n.push([]),o.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,r,n,o){this._forEachCell(t,r,n,o,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(o)}insertCircle(e,t,r,n){this._forEachCell(t-n,r-n,t+n,r+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(r),this.circles.push(n)}_insertBoxCell(e,t,r,n,o,i){this.boxCells[o].push(i)}_insertCircleCell(e,t,r,n,o,i){this.circleCells[o].push(i)}_query(e,t,r,n,o,i){if(r<0||e>this.width||n<0||t>this.height)return!o&&[];const a=[];if(e<=0&&t<=0&&this.width<=r&&this.height<=n){if(o)return!0;for(let e=0;e<this.boxKeys.length;e++)a.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],r=this.circles[3*e+1],n=this.circles[3*e+2];a.push({key:this.circleKeys[e],x1:t-n,y1:r-n,x2:t+n,y2:r+n})}return i?a.filter(i):a}return this._forEachCell(e,t,r,n,this._queryCell,a,{hitTest:o,seenUids:{box:{},circle:{}}},i),o?a.length>0:a}_queryCircle(e,t,r,n,o){const i=e-r,a=e+r,s=t-r,l=t+r;if(a<0||i>this.width||l<0||s>this.height)return!n&&[];const c=[];return this._forEachCell(i,s,a,l,this._queryCellCircle,c,{hitTest:n,circle:{x:e,y:t,radius:r},seenUids:{box:{},circle:{}}},o),n?c.length>0:c}query(e,t,r,n,o){return this._query(e,t,r,n,!1,o)}hitTest(e,t,r,n,o){return this._query(e,t,r,n,!0,o)}hitTestCircle(e,t,r,n){return this._queryCircle(e,t,r,!0,n)}_queryCell(e,t,r,n,o,i,a,s){const l=a.seenUids,c=this.boxCells[o];if(null!==c){const o=this.bboxes;for(const u of c)if(!l.box[u]){l.box[u]=!0;const c=4*u;if(e<=o[c+2]&&t<=o[c+3]&&r>=o[c+0]&&n>=o[c+1]&&(!s||s(this.boxKeys[u]))){if(a.hitTest)return i.push(!0),!0;i.push({key:this.boxKeys[u],x1:o[c],y1:o[c+1],x2:o[c+2],y2:o[c+3]})}}}const u=this.circleCells[o];if(null!==u){const o=this.circles;for(const c of u)if(!l.circle[c]){l.circle[c]=!0;const u=3*c;if(this._circleAndRectCollide(o[u],o[u+1],o[u+2],e,t,r,n)&&(!s||s(this.circleKeys[c]))){if(a.hitTest)return i.push(!0),!0;{const e=o[u],t=o[u+1],r=o[u+2];i.push({key:this.circleKeys[c],x1:e-r,y1:t-r,x2:e+r,y2:t+r})}}}}}_queryCellCircle(e,t,r,n,o,i,a,s){const l=a.circle,c=a.seenUids,u=this.boxCells[o];if(null!==u){const e=this.bboxes;for(const t of u)if(!c.box[t]){c.box[t]=!0;const r=4*t;if(this._circleAndRectCollide(l.x,l.y,l.radius,e[r+0],e[r+1],e[r+2],e[r+3])&&(!s||s(this.boxKeys[t])))return i.push(!0),!0}}const d=this.circleCells[o];if(null!==d){const e=this.circles;for(const t of d)if(!c.circle[t]){c.circle[t]=!0;const r=3*t;if(this._circlesCollide(e[r],e[r+1],e[r+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[t])))return i.push(!0),!0}}}_forEachCell(e,t,r,n,o,i,a,s){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(r),d=this._convertToYCellCoord(n);for(let h=l;h<=u;h++)for(let l=c;l<=d;l++)if(o.call(this,e,t,r,n,this.xCellCount*l+h,i,a,s))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,r,n,o,i){const a=n-e,s=o-t,l=r+i;return l*l>a*a+s*s}_circleAndRectCollide(e,t,r,n,o,i,a){const s=(i-n)/2,l=Math.abs(e-(n+s));if(l>s+r)return!1;const c=(a-o)/2,u=Math.abs(t-(o+c));if(u>c+r)return!1;if(l<=s||u<=c)return!0;const d=l-s,h=u-c;return d*d+h*h<=r*r}}const $e={unknown:0,flipRequired:1,flipNotRequired:2},Qe=Math.tan(85*Math.PI/180);function et(t,r,n,o,i,a,s){const l=e.create();if(n)if("globe"===a.name){const t=e.calculateGlobeLabelMatrix(i,r);e.multiply(l,l,t)}else{const t=v([],s);l[0]=t[0],l[1]=t[1],l[4]=t[2],l[5]=t[3],o||e.rotateZ(l,l,i.angle)}else e.multiply(l,i.labelPlaneMatrix,t);return l}function tt(e,t,r,n,o,i,a){const s=et(e,t,r,n,o,i,a);return"globe"===i.name&&r||(s[2]=s[6]=s[10]=s[14]=0),s}function rt(t,r,n,o,i,a,s){if(n){if("globe"===a.name){const l=et(t,r,n,o,i,a,s);return e.invert(l,l),e.multiply(l,t,l),l}{const r=e.clone(t),n=e.identity([]);return n[0]=s[0],n[1]=s[1],n[4]=s[2],n[5]=s[3],e.multiply(r,r,n),o||e.rotateZ(r,r,-i.angle),r}}return i.glCoordMatrix}function nt(t,r,n,o){const i=[t,r,n,1];n?e.transformMat4$1(i,i,o):ft(i,i,o);const a=i[3];return i[0]/=a,i[1]/=a,i[2]/=a,i}function ot(e,t){return Math.min(.5+e/t*.5,1.5)}function it(e,t){const r=e[0]/e[3],n=e[1]/e[3];return r>=-t[0]&&r<=t[0]&&n>=-t[1]&&n<=t[1]}function at(t,r,n,o,i,a,s,l,c,u){const d=n.transform,h=o?t.textSizeData:t.iconSizeData,p=e.evaluateSizeForZoom(h,n.transform.zoom),f="globe"===d.projection.name,m=[256/n.width*2+1,256/n.height*2+1],g=o?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;g.clear();let y=null;f&&(y=o?t.text.globeExtVertexArray:t.icon.globeExtVertexArray);const v=t.lineVertexArray,b=o?t.text.placedSymbolArray:t.icon.placedSymbolArray,x=n.transform.width/n.transform.height;let _,w=!1;for(let S=0;S<b.length;S++){const o=b.get(S),{numGlyphs:f,writingMode:k}=o;if(k!==e.WritingMode.vertical||w||_===e.WritingMode.horizontal||(w=!0),_=k,(o.hidden||k===e.WritingMode.vertical)&&!w){pt(f,g);continue}w=!1;const T=new e.Point(o.tileAnchorX,o.tileAnchorY);let{x:E,y:C,z:A}=d.projection.projectTilePoint(T.x,T.y,u.canonical);if(c){const[e,t,r]=c(T);E+=e,C+=t,A+=r}const j=[E,C,A,1];if(e.transformMat4$1(j,j,r),!it(j,m)){pt(f,g);continue}const P=ot(n.transform.cameraToCenterDistance,j[3]),I=e.evaluateSizeForFeature(h,p,o),O=s?I/P:I*P,M=nt(E,C,A,i);if(M[3]<=0){pt(f,g);continue}let R={};const L=s?null:c,F=ct(o,O,!1,l,r,i,a,t.glyphOffsetArray,v,g,y,M,T,R,x,L,d.projection,u,s);w=F.useVertical,L&&F.needsFlipping&&(R={}),(F.notEnoughRoom||w||F.needsFlipping&&ct(o,O,!0,l,r,i,a,t.glyphOffsetArray,v,g,y,M,T,R,x,L,d.projection,u,s).notEnoughRoom)&&pt(f,g)}o?(t.text.dynamicLayoutVertexBuffer.updateData(g),y&&t.text.globeExtVertexBuffer.updateData(y)):(t.icon.dynamicLayoutVertexBuffer.updateData(g),y&&t.icon.globeExtVertexBuffer.updateData(y))}function st(e,t,r,n,o,i,a,s,l,c,u,d,h,p,f,m){const{lineStartIndex:g,glyphStartIndex:y,segment:v}=s,b=y+s.numGlyphs,x=g+s.lineLength,_=t.getoffsetX(y),w=t.getoffsetX(b-1),S=ht(e*_,r,n,o,i,a,v,g,x,l,c,u,d,h,!0,p,f,m);if(!S)return null;const k=ht(e*w,r,n,o,i,a,v,g,x,l,c,u,d,h,!0,p,f,m);return k?{first:S,last:k}:null}function lt(t,r,n,o){return t===e.WritingMode.horizontal&&Math.abs(o)>Math.abs(n)?{useVertical:!0}:t===e.WritingMode.vertical?o>0?{needsFlipping:!0}:null:r!==$e.unknown&&function(e,t){return 0===e||Math.abs(t/e)>Qe}(n,o)?r===$e.flipRequired?{needsFlipping:!0}:null:n<0?{needsFlipping:!0}:null}function ct(t,r,n,o,i,a,s,l,c,u,d,h,p,f,m,g,y,v,b){const x=r/24,_=t.lineOffsetX*x,w=t.lineOffsetY*x,{lineStartIndex:S,glyphStartIndex:k,numGlyphs:T,segment:E,writingMode:C,flipState:A}=t,j=S+t.lineLength,P=t=>{if(d){const[r,n,o]=t.up,i=u.length;e.updateGlobeVertexNormal(d,i+0,r,n,o),e.updateGlobeVertexNormal(d,i+1,r,n,o),e.updateGlobeVertexNormal(d,i+2,r,n,o),e.updateGlobeVertexNormal(d,i+3,r,n,o)}const[r,n,o]=t.point;e.addDynamicAttributes(u,r,n,o,t.angle)};if(T>1){const e=st(x,l,_,w,n,h,p,t,c,a,f,g,!1,y,v,b);if(!e)return{notEnoughRoom:!0};if(o&&!n){let[r,n,o]=e.first.point,[i,a,l]=e.last.point;[r,n]=nt(r,n,o,s),[i,a]=nt(i,a,l,s);const c=lt(C,A,(i-r)*m,a-n);if(t.flipState=c&&c.needsFlipping?$e.flipRequired:$e.flipNotRequired,c)return c}P(e.first);for(let t=k+1;t<k+T-1;t++){const e=ht(x*l.getoffsetX(t),_,w,n,h,p,E,S,j,c,a,f,g,!1,!1,y,v,b);if(!e)return u.length-=4*(t-k),{notEnoughRoom:!0};P(e)}P(e.last)}else{if(o&&!n){const r=nt(p.x,p.y,0,i),n=S+E+1,o=new e.Point(c.getx(n),c.gety(n)),a=nt(o.x,o.y,0,i),s=a[3]>0?a:dt(p,o,r,1,i,void 0,y,v.canonical),l=lt(C,A,(s[0]-r[0])*m,s[1]-r[1]);if(t.flipState=l&&l.needsFlipping?$e.flipRequired:$e.flipNotRequired,l)return l}const r=ht(x*l.getoffsetX(k),_,w,n,h,p,E,S,j,c,a,f,g,!1,!1,y,v,b);if(!r)return{notEnoughRoom:!0};P(r)}return{}}function ut(e,t,r,n,o){const{x:i,y:a,z:s}=n.projectTilePoint(e.x,e.y,t);if(!o)return nt(i,a,s,r);const[l,c,u]=o(e);return nt(i+l,a+c,s+u,r)}function dt(t,r,n,o,i,a,s,l){const c=ut(t.sub(r)._unit()._add(t),l,i,s,a);return e.sub(c,n,c),e.normalize(c,c),e.scaleAndAdd(c,n,c,o)}function ht(t,r,n,o,i,a,s,l,c,u,d,h,p,f,m,g,y,v){const b=o?t-r:t+r;let x=b>0?1:-1,_=0;o&&(x*=-1,_=Math.PI),x<0&&(_+=Math.PI);let w=l+s+(x>0?0:1)|0,S=i,k=i,T=0,E=0;const C=Math.abs(b),A=[],j=[];let P=a,I=P;const O=()=>dt(I,P,k,C-T+1,d,p,g,y.canonical);for(;T+E<=C;){if(w+=x,w<l||w>=c)return null;if(k=S,I=P,A.push(k),f&&j.push(I),P=new e.Point(u.getx(w),u.gety(w)),S=h[w],!S){const e=ut(P,y.canonical,d,g,p);S=e[3]>0?h[w]=e:O()}T+=E,E=e.distance(k,S)}m&&p&&(h[w]&&(S=O(),E=e.distance(k,S)),h[w]=S);const M=(C-T)/E,R=P.sub(I)._mult(M)._add(I),L=e.sub([],S,k),F=e.scaleAndAdd([],k,L,M);let z=[0,0,1],D=L[0],N=L[1];if(v&&(z=g.upVector(y.canonical,R.x,R.y),0!==z[0]||0!==z[1]||1!==z[2])){const t=[z[2],0,-z[0]],r=e.cross([],z,t);e.normalize(t,t),e.normalize(r,r),D=e.dot(L,t),N=e.dot(L,r)}if(n){const t=e.cross([],z,L);e.normalize(t,t),e.scaleAndAdd(F,F,t,n*x)}const B=_+Math.atan2(N,D);return A.push(F),f&&j.push(R),{point:F,angle:B,path:A,tilePath:j,up:z}}function pt(e,t){const r=t.length,n=r+4*e;t.resize(n),t.float32.fill(-1/0,4*r,4*n)}function ft(e,t,r){const n=t[0],o=t[1];return e[0]=r[0]*n+r[4]*o+r[12],e[1]=r[1]*n+r[5]*o+r[13],e[3]=r[3]*n+r[7]*o+r[15],e}const mt=100;class gt{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Je(e.width+200,e.height+200,25),n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Je(e.width+200,e.height+200,25);this.transform=e,this.grid=r,this.ignoredGrid=n,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+mt,this.screenBottomBoundary=e.height+mt,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=t}placeCollisionBox(e,t,r,n,o,i,a,s){let l=r.projectedAnchorX,c=r.projectedAnchorY,u=r.projectedAnchorZ;const d=r.elevation,h=r.tileID,p=e.getProjection();if(d&&h){const[e,t,n]=p.upVector(h.canonical,r.tileAnchorX,r.tileAnchorY),o=p.upVectorScale(h.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;l+=e*d*o,c+=t*d*o,u+=n*d*o}const f=this.projectAndGetPerspectiveRatio(a,l,c,u,r.tileID,"globe"===p.name||!!d||this.transform.pitch>0,p),m=i*f.perspectiveRatio,g=(r.x1*t+n.x-r.padding)*m+f.point.x,y=(r.y1*t+n.y-r.padding)*m+f.point.y,v=(r.x2*t+n.x+r.padding)*m+f.point.x,b=(r.y2*t+n.y+r.padding)*m+f.point.y,x=f.perspectiveRatio<=.55||f.occluded;return!this.isInsideGrid(g,y,v,b)||!o&&this.grid.hitTest(g,y,v,b,s)||x?{box:[],offscreen:!1,occluded:f.occluded}:{box:[g,y,v,b],offscreen:this.isOffscreen(g,y,v,b),occluded:!1}}placeCollisionCircles(t,r,n,o,i,a,s,l,c,u,d,h,p,f,m){const g=[],y=this.transform.elevation,v=t.getProjection(),b=y?y.getAtTileOffsetFunc(m,this.transform.center.lat,this.transform.worldSize,v):null,x=new e.Point(n.tileAnchorX,n.tileAnchorY);let{x:_,y:w,z:S}=v.projectTilePoint(x.x,x.y,m.canonical);if(b){const[e,t,r]=b(x);_+=e,w+=t,S+=r}const k="globe"===v.name,T=this.projectAndGetPerspectiveRatio(s,_,w,S,m,k||!!y||this.transform.pitch>0,v),{perspectiveRatio:E}=T,C=(d?a/E:a*E)/e.ONE_EM,A=nt(_,w,S,l),j=T.signedDistanceFromCamera>0?st(C,i,n.lineOffsetX*C,n.lineOffsetY*C,!1,A,x,n,o,l,{},y&&!d?b:null,d&&!!y,v,m,d):null;let P=!1,I=!1,O=!0;if(j&&!T.occluded){const t=.5*p*E+f,n=new e.Point(-100,-100),o=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),i=new Ye,{first:a,last:s}=j,l=a.path.length;let d=[];for(let e=l-1;e>=1;e--)d.push(a.path[e]);for(let e=1;e<s.path.length;e++)d.push(s.path[e]);const m=2.5*t;c&&(d=d.map(((e,t)=>{let[r,n,o]=e;return b&&!k&&(o=b(t<l-1?a.tilePath[l-1-t]:s.tilePath[t-l+2])[2]),nt(r,n,o,c)})),d.some((e=>e[3]<=0))&&(d=[]));let y=[];if(d.length>0){let t=1/0,r=-1/0,i=1/0,a=-1/0;for(const e of d)t=Math.min(t,e[0]),i=Math.min(i,e[1]),r=Math.max(r,e[0]),a=Math.max(a,e[1]);r>=n.x&&t<=o.x&&a>=n.y&&i<=o.y&&(y=[d.map((t=>new e.Point(t[0],t[1])))],(t<n.x||r>o.x||i<n.y||a>o.y)&&(y=e.clipLine(y,n.x,n.y,o.x,o.y)))}for(const e of y){i.reset(e,.25*t);let n=0;n=i.length<=.5*t?1:Math.ceil(i.paddedLength/m)+1;for(let e=0;e<n;e++){const o=e/Math.max(n-1,1),a=i.lerp(o),s=a.x+mt,l=a.y+mt;g.push(s,l,t,0);const c=s-t,d=l-t,p=s+t,f=l+t;if(O=O&&this.isOffscreen(c,d,p,f),I=I||this.isInsideGrid(c,d,p,f),!r&&this.grid.hitTestCircle(s,l,t,h)&&(P=!0,!u))return{circles:[],offscreen:!1,collisionDetected:P,occluded:!1}}}}return{circles:!u&&P||!I?[]:g,offscreen:O,collisionDetected:P,occluded:T.occluded}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const r=[];let n=1/0,o=1/0,i=-1/0,a=-1/0;for(const u of t){const t=new e.Point(u.x+mt,u.y+mt);n=Math.min(n,t.x),o=Math.min(o,t.y),i=Math.max(i,t.x),a=Math.max(a,t.y),r.push(t)}const s=this.grid.query(n,o,i,a).concat(this.ignoredGrid.query(n,o,i,a)),l={},c={};for(const u of s){const t=u.key;if(void 0===l[t.bucketInstanceId]&&(l[t.bucketInstanceId]={}),l[t.bucketInstanceId][t.featureIndex])continue;const n=[new e.Point(u.x1,u.y1),new e.Point(u.x2,u.y1),new e.Point(u.x2,u.y2),new e.Point(u.x1,u.y2)];e.polygonIntersectsPolygon(r,n)&&(l[t.bucketInstanceId][t.featureIndex]=!0,void 0===c[t.bucketInstanceId]&&(c[t.bucketInstanceId]=[]),c[t.bucketInstanceId].push(t.featureIndex))}return c}insertCollisionBox(e,t,r,n,o){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:n,collisionGroupID:o},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,r,n,o){const i=t?this.ignoredGrid:this.grid,a={bucketInstanceId:r,featureIndex:n,collisionGroupID:o};for(let s=0;s<e.length;s+=4)i.insertCircle(a,e[s],e[s+1],e[s+2])}projectAndGetPerspectiveRatio(t,r,n,o,i,a,s){const l=[r,n,o,1];let c=!1;if(o||this.transform.pitch>0){if(e.transformMat4$1(l,l,t),this.fogState&&i&&"globe"!==s.name){const t=function(t,r,n,o,i,a){const s=a.calculateFogTileMatrix(i),l=[r,n,o];return e.transformMat4(l,l,s),T(t,l,a.pitch,a._fov)}(this.fogState,r,n,o,i.toUnwrapped(),this.transform);c=t>.9}}else ft(l,l,t);const u=l[3];return{point:new e.Point((l[0]/u+1)/2*this.transform.width+mt,(-l[1]/u+1)/2*this.transform.height+mt),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(s)/u*.5,1.5),signedDistanceFromCamera:u,occluded:a&&l[2]>u||c}}isOffscreen(e,t,r,n){return r<mt||e>=this.screenRightBoundary||n<mt||t>this.screenBottomBoundary}isInsideGrid(e,t,r,n){return r>=0&&e<this.gridRightBoundary&&n>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}function yt(t,r,n){const o=r.createTileMatrix(t,t.worldSize,n.toUnwrapped());return e.multiply(new Float32Array(16),t.projMatrix,o)}function vt(e,t,r){if(t.projection.name===r.projection.name)return e.projMatrix;const n=r.clone();return n.setProjection(t.projection),yt(n,t.getProjection(),e)}function bt(e,t,r){return t.name===r.projection.name?e.projMatrix:yt(r,t,e)}class xt{constructor(e,t,r,n){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):n&&r?1:0,this.placed=r}isHidden(){return 0===this.opacity&&!this.placed}}class _t{constructor(e,t,r,n,o){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.text=new xt(e?e.text:null,t,r,o),this.icon=new xt(e?e.icon:null,t,n,o),this.clipped=i}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class wt{constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.text=e,this.icon=t,this.skipFade=r,this.clipped=n}}class St{constructor(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]}}class kt{constructor(e,t,r,n,o){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=r,this.bucketIndex=n,this.tileID=o}}class Tt{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function Et(t,r,n,o,i){const{horizontalAlign:a,verticalAlign:s}=e.getAnchorAlignment(t),l=-(a-.5)*r,c=-(s-.5)*n,u=e.evaluateVariableOffset(t,o);return new e.Point(l+u[0]*i,c+u[1]*i)}function Ct(t,r,n,o,i){const a=new e.Point(t,r);return n&&a._rotate(o?i:-i),a}class At{constructor(e,t,r,n,o){this.transform=e.clone(),this.projection=e.projection.name,this.collisionIndex=new gt(this.transform,o),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new Tt(r),this.collisionCircleArrays={},this.prevPlacement=n,n&&(n.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,r,n,o){const i=n.getBucket(r),a=n.latestFeatureIndex;if(!i||!a||r.id!==i.layerIds[0])return;const s=i.layers[0].layout,l=n.collisionBoxArray,c=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),u=n.tileSize/e.EXTENT,d=n.tileID.toUnwrapped();this.transform.setProjection(i.projection);const h=(p=n.tileID,f=i.getProjection(),m=this.transform,f.name===this.projection?m.calculateProjMatrix(p.toUnwrapped()):yt(m,f,p));var p,f,m;const g="map"===s.get("text-pitch-alignment"),y="map"===s.get("text-rotation-alignment");r.compileFilter();const v=r.dynamicFilter(),b=r.dynamicFilterNeedsFeature(),x=this.transform.calculatePixelsToTileUnitsMatrix(n),_=tt(h,n.tileID.canonical,g,y,this.transform,i.getProjection(),x);let w=null;if(g){const t=rt(h,n.tileID.canonical,g,y,this.transform,i.getProjection(),x);w=e.multiply([],this.transform.labelPlaneMatrix,t)}let S=null;v&&n.latestFeatureIndex&&(S={unwrappedTileID:d,dynamicFilter:v,dynamicFilterNeedsFeature:b,featureIndex:n.latestFeatureIndex}),this.retainedQueryData[i.bucketInstanceId]=new kt(i.bucketInstanceId,a,i.sourceLayerIndex,i.index,n.tileID);const k={bucket:i,layout:s,posMatrix:h,textLabelPlaneMatrix:_,labelToScreenMatrix:w,clippingData:S,scale:c,textPixelRatio:u,holdingForFade:n.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(i.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(i.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(i.sourceID)};if(o)for(const e of i.sortKeyRanges){const{sortKey:r,symbolInstanceStart:n,symbolInstanceEnd:o}=e;t.push({sortKey:r,symbolInstanceStart:n,symbolInstanceEnd:o,parameters:k})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:i.symbolInstances.length,parameters:k})}attemptAnchorPlacement(e,t,r,n,o,i,a,s,l,c,u,d,h,p,f,m,g,y){const{textOffset0:v,textOffset1:b,crossTileID:x}=d,_=[v,b],w=Et(e,r,n,_,o),S=this.collisionIndex.placeCollisionBox(p,o,t,Ct(w.x,w.y,i,a,this.transform.angle),u,s,l,c.predicate);if(m){const e=p.getSymbolInstanceIconSize(y,this.transform.zoom,d.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(p,e,m,Ct(w.x,w.y,i,a,this.transform.angle),u,s,l,c.predicate).box.length)return}if(S.box.length>0){let t;return this.prevPlacement&&this.prevPlacement.variableOffsets[x]&&this.prevPlacement.placements[x]&&this.prevPlacement.placements[x].text&&(t=this.prevPlacement.variableOffsets[x].anchor),this.variableOffsets[x]={textOffset:_,width:r,height:n,anchor:e,textScale:o,prevAnchor:t},this.markUsedJustification(p,e,d,f),p.allowVerticalPlacement&&(this.markUsedOrientation(p,f,d),this.placedOrientations[x]=f),{shift:w,placedGlyphBoxes:S}}}placeLayerBucketPart(t,r,n,o){const{bucket:i,layout:a,posMatrix:s,textLabelPlaneMatrix:l,labelToScreenMatrix:c,clippingData:u,textPixelRatio:d,holdingForFade:h,collisionBoxArray:p,partiallyEvaluatedTextSize:f,partiallyEvaluatedIconSize:m,collisionGroup:g}=t.parameters,y=a.get("text-optional"),v=a.get("icon-optional"),b=a.get("text-allow-overlap"),x=a.get("icon-allow-overlap"),_="map"===a.get("text-rotation-alignment"),w="map"===a.get("text-pitch-alignment"),S="none"!==a.get("icon-text-fit"),k="viewport-y"===a.get("symbol-z-order");this.transform.setProjection(i.projection);let T=b&&(x||!i.hasIconData()||v),E=x&&(b||!i.hasTextData()||y);!i.collisionArrays&&p&&i.deserializeCollisionBoxes(p),n&&o&&i.updateCollisionDebugBuffers(this.transform.zoom,p);const C=(t,o,p)=>{const{crossTileID:k,numVerticalGlyphVertices:C}=t;if(u){const n={zoom:this.transform.zoom,pitch:this.transform.pitch};let o=null;if(u.dynamicFilterNeedsFeature){const e=this.retainedQueryData[i.bucketInstanceId];o=u.featureIndex.loadFeature({featureIndex:t.featureIndex,bucketIndex:e.bucketIndex,sourceLayerIndex:e.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,u.dynamicFilter)(n,o,this.retainedQueryData[i.bucketInstanceId].tileID.canonical,new e.Point(t.tileAnchorX,t.tileAnchorY),this.transform.calculateDistanceTileData(u.unwrappedTileID)))return this.placements[k]=new wt(!1,!1,!1,!0),void r.add(k)}if(r.has(k))return;if(h)return void(this.placements[k]=new wt(!1,!1,!1));let A=!1,j=!1,P=!0,I=!1,O=!1,M=null,R={box:null,offscreen:null,occluded:null},L={box:null,offscreen:null,occluded:null},F=null,z=null,D=null,N=0,B=0,U=0;p.textFeatureIndex?N=p.textFeatureIndex:t.useRuntimeCollisionCircles&&(N=t.featureIndex),p.verticalTextFeatureIndex&&(B=p.verticalTextFeatureIndex);const V=e=>{e.tileID=this.retainedQueryData[i.bucketInstanceId].tileID;const t=this.transform.elevation;(t||e.elevation)&&(e.elevation=t?t.getAtTileOffset(e.tileID,e.tileAnchorX,e.tileAnchorY):0)},W=p.textBox;if(W){V(W);const r=r=>{let n=e.WritingMode.horizontal;if(i.allowVerticalPlacement&&!r&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[k];e&&(this.placedOrientations[k]=e,n=e,this.markUsedOrientation(i,n,t))}return n},n=(t,r)=>{if(i.allowVerticalPlacement&&C>0&&p.verticalTextBox){for(const n of i.writingModes)if(n===e.WritingMode.vertical?(R=r(),L=R):R=t(),R&&R.box&&R.box.length)break}else R=t()};if(a.get("text-variable-anchor")){let l=a.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[k]){const e=this.prevPlacement.variableOffsets[k];l.indexOf(e.anchor)>0&&(l=l.filter((t=>t!==e.anchor)),l.unshift(e.anchor))}const c=(e,r,n)=>{const a=i.getSymbolInstanceTextSize(f,t,this.transform.zoom,o),c=(e.x2-e.x1)*a+2*e.padding,u=(e.y2-e.y1)*a+2*e.padding,h=S&&!x?r:null;h&&V(h);let p={box:[],offscreen:!1,occluded:!1};const y=b?2*l.length:l.length;for(let v=0;v<y;++v){const r=this.attemptAnchorPlacement(l[v%l.length],e,c,u,a,_,w,d,s,g,v>=l.length,t,o,i,n,h,f,m);if(r&&(p=r.placedGlyphBoxes,p&&p.box&&p.box.length)){A=!0,M=r.shift;break}}return p};n((()=>c(W,p.iconBox,e.WritingMode.horizontal)),(()=>{const t=p.verticalTextBox;return t&&V(t),i.allowVerticalPlacement&&!(R&&R.box&&R.box.length)&&C>0&&t?c(t,p.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),R&&(A=R.box,P=R.offscreen,I=R.occluded);const u=r(!(!R||!R.box));if(!A&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[k];e&&(this.variableOffsets[k]=e,this.markUsedJustification(i,e.anchor,t,u))}}else{const a=(r,n)=>{const a=i.getSymbolInstanceTextSize(f,t,this.transform.zoom,o),l=this.collisionIndex.placeCollisionBox(i,a,r,new e.Point(0,0),b,d,s,g.predicate);return l&&l.box&&l.box.length&&(this.markUsedOrientation(i,n,t),this.placedOrientations[k]=n),l};n((()=>a(W,e.WritingMode.horizontal)),(()=>{const t=p.verticalTextBox;return i.allowVerticalPlacement&&C>0&&t?(V(t),a(t,e.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),r(!!(R&&R.box&&R.box.length))}}if(F=R,A=F&&F.box&&F.box.length>0,P=F&&F.offscreen,I=F&&F.occluded,t.useRuntimeCollisionCircles){const r=i.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),o=e.evaluateSizeForFeature(i.textSizeData,f,r),u=a.get("text-padding");z=this.collisionIndex.placeCollisionCircles(i,b,r,i.lineVertexArray,i.glyphOffsetArray,o,s,l,c,n,w,g.predicate,t.collisionCircleDiameter*o/e.ONE_EM,u,this.retainedQueryData[i.bucketInstanceId].tileID),A=b||z.circles.length>0&&!z.collisionDetected,P=P&&z.offscreen,I=z.occluded}if(p.iconFeatureIndex&&(U=p.iconFeatureIndex),p.iconBox){const r=r=>{V(r);const n=S&&M?Ct(M.x,M.y,_,w,this.transform.angle):new e.Point(0,0),o=i.getSymbolInstanceIconSize(m,this.transform.zoom,t.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(i,o,r,n,x,d,s,g.predicate)};L&&L.box&&L.box.length&&p.verticalIconBox?(D=r(p.verticalIconBox),j=D.box.length>0):(D=r(p.iconBox),j=D.box.length>0),P=P&&D.offscreen,O=D.occluded}const q=y||0===t.numHorizontalGlyphVertices&&0===C,H=v||0===t.numIconVertices;if(q||H?H?q||(j=j&&A):A=j&&A:j=A=j&&A,A&&F&&F.box&&this.collisionIndex.insertCollisionBox(F.box,a.get("text-ignore-placement"),i.bucketInstanceId,L&&L.box&&B?B:N,g.ID),j&&D&&this.collisionIndex.insertCollisionBox(D.box,a.get("icon-ignore-placement"),i.bucketInstanceId,U,g.ID),z&&(A&&this.collisionIndex.insertCollisionCircles(z.circles,a.get("text-ignore-placement"),i.bucketInstanceId,N,g.ID),n)){const e=i.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new St);for(let r=0;r<z.circles.length;r+=4)t.circles.push(z.circles[r+0]),t.circles.push(z.circles[r+1]),t.circles.push(z.circles[r+2]),t.circles.push(z.collisionDetected?1:0)}const G="globe"!==i.projection.name;T=T&&(G||!I),E=E&&(G||!O),this.placements[k]=new wt(A||T,j||E,P||i.justReloaded),r.add(k)};if(k){const e=i.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){const r=e[t];C(i.symbolInstances.get(r),r,i.collisionArrays[r])}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)C(i.symbolInstances.get(e),e,i.collisionArrays[e]);if(n&&i.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[i.bucketInstanceId];e.invert(t.invProjMatrix,s),t.viewportMatrix=this.collisionIndex.getViewportMatrix()}i.justReloaded=!1}markUsedJustification(t,r,n,o){const{leftJustifiedTextSymbolIndex:i,centerJustifiedTextSymbolIndex:a,rightJustifiedTextSymbolIndex:s,verticalPlacedTextSymbolIndex:l,crossTileID:c}=n,u=e.getAnchorJustification(r),d=o===e.WritingMode.vertical?l:"left"===u?i:"center"===u?a:"right"===u?s:-1;i>=0&&(t.text.placedSymbolArray.get(i).crossTileID=d>=0&&i!==d?0:c),a>=0&&(t.text.placedSymbolArray.get(a).crossTileID=d>=0&&a!==d?0:c),s>=0&&(t.text.placedSymbolArray.get(s).crossTileID=d>=0&&s!==d?0:c),l>=0&&(t.text.placedSymbolArray.get(l).crossTileID=d>=0&&l!==d?0:c)}markUsedOrientation(t,r,n){const o=r===e.WritingMode.horizontal||r===e.WritingMode.horizontalOnly?r:0,i=r===e.WritingMode.vertical?r:0,{leftJustifiedTextSymbolIndex:a,centerJustifiedTextSymbolIndex:s,rightJustifiedTextSymbolIndex:l,verticalPlacedTextSymbolIndex:c}=n,u=t.text.placedSymbolArray;a>=0&&(u.get(a).placedOrientation=o),s>=0&&(u.get(s).placedOrientation=o),l>=0&&(u.get(l).placedOrientation=o),c>=0&&(u.get(c).placedOrientation=i)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let r=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const n=t?t.symbolFadeChange(e):1,o=t?t.opacities:{},i=t?t.variableOffsets:{},a=t?t.placedOrientations:{};for(const s in this.placements){const e=this.placements[s],t=o[s];t?(this.opacities[s]=new _t(t,n,e.text,e.icon,null,e.clipped),r=r||e.text!==t.text.placed||e.icon!==t.icon.placed):(this.opacities[s]=new _t(null,n,e.text,e.icon,e.skipFade,e.clipped),r=r||e.text||e.icon)}for(const s in o){const e=o[s];if(!this.opacities[s]){const t=new _t(e,n,!1,!1);t.isHidden()||(this.opacities[s]=t,r=r||e.text.placed||e.icon.placed)}}for(const s in i)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=i[s]);for(const s in a)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=a[s]);r?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const r=new Set;for(const n of t){const t=n.getBucket(e);t&&n.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,r,n.collisionBoxArray)}}updateBucketOpacities(t,r,n){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const o=t.layers[0].layout,i=!!t.layers[0].dynamicFilter(),a=new _t(null,0,!1,!1,!0),s=o.get("text-allow-overlap"),l=o.get("icon-allow-overlap"),c=o.get("text-variable-anchor"),u="map"===o.get("text-rotation-alignment"),d="map"===o.get("text-pitch-alignment"),h="none"!==o.get("icon-text-fit"),p=new _t(null,0,s&&(l||!t.hasIconData()||o.get("icon-optional")),l&&(s||!t.hasTextData()||o.get("text-optional")),!0);!t.collisionArrays&&n&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(n);const f=(e,t,r)=>{for(let n=0;n<t/4;n++)e.opacityVertexArray.emplaceBack(r)};let m=0;for(let g=0;g<t.symbolInstances.length;g++){const n=t.symbolInstances.get(g),{numHorizontalGlyphVertices:o,numVerticalGlyphVertices:s,crossTileID:l,numIconVertices:y}=n,v=r.has(l);let b=this.opacities[l];v?b=a:b||(b=p,this.opacities[l]=b),r.add(l);const x=o>0||s>0,_=y>0,w=this.placedOrientations[l],S=w===e.WritingMode.vertical,k=w===e.WritingMode.horizontal||w===e.WritingMode.horizontalOnly;if(!x&&!_||b.isHidden()||m++,x){const e=zt(b.text);f(t.text,o,S?Dt:e),f(t.text,s,k?Dt:e);const r=b.text.isHidden(),{leftJustifiedTextSymbolIndex:i,centerJustifiedTextSymbolIndex:a,rightJustifiedTextSymbolIndex:c,verticalPlacedTextSymbolIndex:u}=n,d=t.text.placedSymbolArray,h=r||S?1:0;i>=0&&(d.get(i).hidden=h),a>=0&&(d.get(a).hidden=h),c>=0&&(d.get(c).hidden=h),u>=0&&(d.get(u).hidden=r||k?1:0);const p=this.variableOffsets[l];p&&this.markUsedJustification(t,p.anchor,n,w);const m=this.placedOrientations[l];m&&(this.markUsedJustification(t,"left",n,m),this.markUsedOrientation(t,m,n))}if(_){const e=zt(b.icon),{placedIconSymbolIndex:r,verticalPlacedIconSymbolIndex:o}=n,i=t.icon.placedSymbolArray,a=b.icon.isHidden()?1:0;r>=0&&(f(t.icon,y,S?Dt:e),i.get(r).hidden=a),o>=0&&(f(t.icon,n.numVerticalIconVertices,k?Dt:e),i.get(o).hidden=a)}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const r=t.collisionArrays[g];if(r){let n=new e.Point(0,0),o=!0;if(r.textBox||r.verticalTextBox){if(c){const e=this.variableOffsets[l];e?(n=Et(e.anchor,e.width,e.height,e.textOffset,e.textScale),u&&n._rotate(d?this.transform.angle:-this.transform.angle)):o=!1}i&&(o=!b.clipped),r.textBox&&jt(t.textCollisionBox.collisionVertexArray,b.text.placed,!o||S,n.x,n.y),r.verticalTextBox&&jt(t.textCollisionBox.collisionVertexArray,b.text.placed,!o||k,n.x,n.y)}const a=o&&Boolean(!k&&r.verticalIconBox);r.iconBox&&jt(t.iconCollisionBox.collisionVertexArray,b.icon.placed,a,h?n.x:0,h?n.y:0),r.verticalIconBox&&jt(t.iconCollisionBox.collisionVertexArray,b.icon.placed,!a,h?n.x:0,h?n.y:0)}}}if(t.fullyClipped=0===m,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const r=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*r>e}setStale(){this.stale=!0}}function jt(e,t,r,n,o){e.emplaceBack(t?1:0,r?1:0,n||0,o||0),e.emplaceBack(t?1:0,r?1:0,n||0,o||0),e.emplaceBack(t?1:0,r?1:0,n||0,o||0),e.emplaceBack(t?1:0,r?1:0,n||0,o||0)}const Pt=Math.pow(2,25),It=Math.pow(2,24),Ot=Math.pow(2,17),Mt=Math.pow(2,16),Rt=Math.pow(2,9),Lt=Math.pow(2,8),Ft=Math.pow(2,1);function zt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,r=Math.floor(127*e.opacity);return r*Pt+t*It+r*Ot+t*Mt+r*Rt+t*Lt+r*Ft+t}const Dt=0;class Nt{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(e,t,r,n,o){const i=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(i,n,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,o())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,i.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<i.length;){const e=i[this._currentPartIndex];if(t.placeLayerBucketPart(e,this._seenCrossTileIDs,r,0===e.symbolInstanceStart),this._currentPartIndex++,o())return!0}return!1}}class Bt{constructor(e,t,r,n,o,i,a,s){this.placement=new At(e,o,i,a,s),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=n,this._done=!1}isDone(){return this._done}continuePlacement(t,r,n){const o=e.exported.now(),i=()=>{const t=e.exported.now()-o;return!this._forceFullPlacement&&t>2};for(;this._currentPlacementIndex>=0;){const e=r[t[this._currentPlacementIndex]],o=this.placement.collisionIndex.transform.zoom;if("symbol"===e.type&&(!e.minzoom||e.minzoom<=o)&&(!e.maxzoom||e.maxzoom>o)){if(this._inProgressLayer||(this._inProgressLayer=new Nt(e)),this._inProgressLayer.continuePlacement(n[e.source],this.placement,this._showCollisionBoxes,e,i))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Ut=512/e.EXTENT/2;class Vt{constructor(t,r,n){this.tileID=t,this.bucketInstanceId=n,this.index=new e.KDBush(r.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const o=t.canonical.x*e.EXTENT,i=t.canonical.y*e.EXTENT;for(let e=0;e<r.length;e++){const{key:t,crossTileID:n,tileAnchorX:a,tileAnchorY:s}=r.get(e),l=Math.floor((o+a)*Ut),c=Math.floor((i+s)*Ut);this.index.add(l,c),this.keys.push(t),this.crossTileIDs.push(n)}this.index.finish()}findMatches(t,r,n){const o=this.tileID.canonical.z<r.canonical.z?1:Math.pow(2,this.tileID.canonical.z-r.canonical.z),i=Ut/Math.pow(2,r.canonical.z-this.tileID.canonical.z),a=r.canonical.x*e.EXTENT,s=r.canonical.y*e.EXTENT;for(let e=0;e<t.length;e++){const r=t.get(e);if(r.crossTileID)continue;const{key:l,tileAnchorX:c,tileAnchorY:u}=r,d=Math.floor((a+c)*i),h=Math.floor((s+u)*i),p=this.index.range(d-o,h-o,d+o,h+o);for(const e of p){const t=this.crossTileIDs[e];if(this.keys[e]===l&&!n.has(t)){n.add(t),r.crossTileID=t;break}}}}}class Wt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class qt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const r in this.indexes){const e=this.indexes[r],n={};for(const r in e){const o=e[r];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+t),n[o.tileID.key]=o}this.indexes[r]=n}this.lng=e}addBucket(e,t,r){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let o=0;o<t.symbolInstances.length;o++)t.symbolInstances.get(o).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]=new Set);const n=this.usedCrossTileIDs[e.overscaledZ];for(const o in this.indexes){const r=this.indexes[o];if(Number(o)>e.overscaledZ)for(const o in r){const i=r[o];i.tileID.isChildOf(e)&&i.findMatches(t.symbolInstances,e,n)}else{const i=r[e.scaledTo(Number(o)).key];i&&i.findMatches(t.symbolInstances,e,n)}}for(let o=0;o<t.symbolInstances.length;o++){const e=t.symbolInstances.get(o);e.crossTileID||(e.crossTileID=r.generate(),n.add(e.crossTileID))}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Vt(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const r of t.crossTileIDs)this.usedCrossTileIDs[e].delete(r)}removeStaleBuckets(e){let t=!1;for(const r in this.indexes){const n=this.indexes[r];for(const o in n)e[n[o].bucketInstanceId]||(this.removeBucketCrossTileIDs(r,n[o]),delete n[o],t=!0)}return t}}class Ht{constructor(){this.layerIndexes={},this.crossTileIDs=new Wt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,r,n){let o=this.layerIndexes[e.id];void 0===o&&(o=this.layerIndexes[e.id]=new qt);let i=!1;const a={};"globe"!==n.name&&o.handleWrapJump(r);for(const s of t){const t=s.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),o.addBucket(s.tileID,t,this.crossTileIDs)&&(i=!0),a[t.bucketInstanceId]=!0)}return o.removeStaleBuckets(a)&&(i=!0),i}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0}));for(const r in this.layerIndexes)t[r]||delete this.layerIndexes[r]}}const Gt=(t,r)=>e.emitValidationErrors(t,r&&r.filter((e=>"source.canvas"!==e.identifier))),Kt=e.pick(Ve,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Xt=e.pick(Ve,["setCenter","setZoom","setBearing","setPitch"]),Zt={version:8,layers:[],sources:{}},Yt={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Jt extends e.Evented{constructor(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.map=t,this.dispatcher=new j(Ne(),this),this.imageManager=new x,this.imageManager.setEventedParent(this),this.glyphManager=new e.GlyphManager(t._requestManager,r.localFontFamily?e.LocalGlyphMode.all:r.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,r.localFontFamily||r.localIdeographFontFamily),this.crossTileSymbolIndex=new Ht,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());const n=this;this._rtlTextPluginCallback=Jt.registerForPluginStateChange((t=>{n.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},((t,r)=>{if(e.triggerPluginCompletionEvent(t),r&&r.every((e=>e)))for(const e in n._sourceCaches){const t=n._sourceCaches[e],r=t.getSource().type;"vector"!==r&&"geojson"!==r||t.reload()}}))})),this.on("data",(e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(const r in this._layers){const e=this._layers[r];e.source===t.id&&this._validateLayer(e)}}))}loadURL(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.Event("dataloading",{dataType:"style"}));const n="boolean"==typeof r.validate?r.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,r.accessToken);const o=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(o,((t,r)=>{this._request=null,t?this.fire(new e.ErrorEvent(t)):r&&this._load(r,n)}))}loadJSON(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame((()=>{this._request=null,this._load(t,!1!==r.validate)}))}loadEmpty(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Zt,!1)}_updateLayerCount(e,t){const r=t?1:-1;e.is3D()&&(this._num3DLayers+=r),"circle"===e.type&&(this._numCircleLayers+=r),"symbol"===e.type&&(this._numSymbolLayers+=r)}_load(t,r){if(r&&Gt(this,e.validateStyle(t)))return;this._loaded=!0,this.stylesheet=e.clone$1(t),this._updateMapProjection();for(const e in t.sources)this.addSource(e,t.sources[e],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);const n=Ue(this.stylesheet.layers);this._order=n.map((e=>e.id)),this._layers={},this._serializedLayers={};for(const o of n){const t=e.createStyleLayer(o);t.setEventedParent(this,{layer:{id:t.id}}),this._layers[t.id]=t,this._serializedLayers[t.id]=t.serialize(),this._updateLayerCount(t,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(t){this._spriteRequest=function(t,r,n){let o,i,a;const s=e.exported.devicePixelRatio>1?"@2x":"";let l=e.getJSON(r.transformRequest(r.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),((e,t)=>{l=null,a||(a=e,o=t,u())})),c=e.getImage(r.transformRequest(r.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),((e,t)=>{c=null,a||(a=e,i=t,u())}));function u(){if(a)n(a);else if(o&&i){const t=e.exported.getImageData(i),r={};for(const n in o){const{width:i,height:a,x:s,y:l,sdf:c,pixelRatio:u,stretchX:d,stretchY:h,content:p}=o[n],f=new e.RGBAImage({width:i,height:a});e.RGBAImage.copy(t,f,{x:s,y:l},{x:0,y:0},{width:i,height:a}),r[n]={data:f,pixelRatio:u,sdf:c,stretchX:d,stretchY:h,content:p}}n(null,r)}}return{cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(t,this.map._requestManager,((t,r)=>{if(this._spriteRequest=null,t)this.fire(new e.ErrorEvent(t));else if(r)for(const e in r)this.imageManager.addImage(e,r[e]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new e.Event("data",{dataType:"style"}))}))}_validateLayer(t){const r=this.getSource(t.source);if(!r)return;const n=t.sourceLayer;n&&("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(n))&&this.fire(new e.ErrorEvent(new Error('Source layer "'.concat(n,'" does not exist on source "').concat(r.id,'" as specified by style layer "').concat(t.id,'"'))))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(e){const t=[];for(const r of e){const e=this._layers[r];"custom"!==e.type&&t.push(e.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(e){return!!this.terrain&&("function"==typeof e.isLayerDraped?e.isLayerDraped():Yt[e.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(t){if(!this._loaded)return;const r=this._changed;if(this._changed){const e=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);(e.length||r.length)&&this._updateWorkerLayers(e,r);for(const t in this._updatedSources){const e=this._updatedSources[t];"reload"===e?this._reloadSource(t):"clear"===e&&this._clearSource(t)}this._updateTilesForChangedImages();for(const n in this._updatedPaintProps)this._layers[n].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}const n={};for(const e in this._sourceCaches){const t=this._sourceCaches[e];n[e]=t.used,t.used=!1}for(const e of this._order){const r=this._layers[e];if(r.recalculate(t,this._availableImages),!r.isHidden(t.zoom)){const e=this._getLayerSourceCache(r);e&&(e.used=!0)}const n=this.map.painter;if(n){const e=r.getProgramIds();if(!e)continue;const o=r.getProgramConfiguration(t.zoom);for(const t of e)n.useProgram(t,o)}}for(const o in n){const t=this._sourceCaches[o];n[o]!==t.used&&t.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:t.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),r&&this.fire(new e.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(r){if(this._checkLoaded(),Gt(this,e.validateStyle(r)))return!1;(r=e.clone$1(r)).layers=Ue(r.layers);const n=function(e,r){if(!e)return[{command:Ve.setStyle,args:[r]}];let n=[];try{if(!t(e.version,r.version))return[{command:Ve.setStyle,args:[r]}];t(e.center,r.center)||n.push({command:Ve.setCenter,args:[r.center]}),t(e.zoom,r.zoom)||n.push({command:Ve.setZoom,args:[r.zoom]}),t(e.bearing,r.bearing)||n.push({command:Ve.setBearing,args:[r.bearing]}),t(e.pitch,r.pitch)||n.push({command:Ve.setPitch,args:[r.pitch]}),t(e.sprite,r.sprite)||n.push({command:Ve.setSprite,args:[r.sprite]}),t(e.glyphs,r.glyphs)||n.push({command:Ve.setGlyphs,args:[r.glyphs]}),t(e.transition,r.transition)||n.push({command:Ve.setTransition,args:[r.transition]}),t(e.light,r.light)||n.push({command:Ve.setLight,args:[r.light]}),t(e.fog,r.fog)||n.push({command:Ve.setFog,args:[r.fog]}),t(e.projection,r.projection)||n.push({command:Ve.setProjection,args:[r.projection]});const o={},i=[];!function(e,r,n,o){let i;for(i in r=r||{},e=e||{})e.hasOwnProperty(i)&&(r.hasOwnProperty(i)||qe(i,n,o));for(i in r){if(!r.hasOwnProperty(i))continue;const a=r[i];e.hasOwnProperty(i)?t(e[i],a)||("geojson"===e[i].type&&"geojson"===a.type&&Ge(e,r,i)?n.push({command:Ve.setGeoJSONSourceData,args:[i,a.data]}):He(i,r,n,o)):We(i,r,n)}}(e.sources,r.sources,i,o);const a=[];e.layers&&e.layers.forEach((e=>{e.source&&o[e.source]?n.push({command:Ve.removeLayer,args:[e.id]}):a.push(e)}));let s=e.terrain;s&&o[s.source]&&(n.push({command:Ve.setTerrain,args:[void 0]}),s=void 0),n=n.concat(i),t(s,r.terrain)||n.push({command:Ve.setTerrain,args:[r.terrain]}),function(e,r,n){r=r||[];const o=(e=e||[]).map(Xe),i=r.map(Xe),a=e.reduce(Ze,{}),s=r.reduce(Ze,{}),l=o.slice(),c=Object.create(null);let u,d,h,p,f,m,g;for(u=0,d=0;u<o.length;u++)h=o[u],s.hasOwnProperty(h)?d++:(n.push({command:Ve.removeLayer,args:[h]}),l.splice(l.indexOf(h,d),1));for(u=0,d=0;u<i.length;u++)h=i[i.length-1-u],l[l.length-1-u]!==h&&(a.hasOwnProperty(h)?(n.push({command:Ve.removeLayer,args:[h]}),l.splice(l.lastIndexOf(h,l.length-d),1)):d++,m=l[l.length-u],n.push({command:Ve.addLayer,args:[s[h],m]}),l.splice(l.length-u,0,h),c[h]=!0);for(u=0;u<i.length;u++)if(h=i[u],p=a[h],f=s[h],!c[h]&&!t(p,f))if(t(p.source,f.source)&&t(p["source-layer"],f["source-layer"])&&t(p.type,f.type)){for(g in Ke(p.layout,f.layout,n,h,null,Ve.setLayoutProperty),Ke(p.paint,f.paint,n,h,null,Ve.setPaintProperty),t(p.filter,f.filter)||n.push({command:Ve.setFilter,args:[h,f.filter]}),t(p.minzoom,f.minzoom)&&t(p.maxzoom,f.maxzoom)||n.push({command:Ve.setLayerZoomRange,args:[h,f.minzoom,f.maxzoom]}),p)p.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Ke(p[g],f[g],n,h,g.slice(6),Ve.setPaintProperty):t(p[g],f[g])||n.push({command:Ve.setLayerProperty,args:[h,g,f[g]]}));for(g in f)f.hasOwnProperty(g)&&!p.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Ke(p[g],f[g],n,h,g.slice(6),Ve.setPaintProperty):t(p[g],f[g])||n.push({command:Ve.setLayerProperty,args:[h,g,f[g]]}))}else n.push({command:Ve.removeLayer,args:[h]}),m=l[l.lastIndexOf(h)+1],n.push({command:Ve.addLayer,args:[f,m]})}(a,r.layers,n)}catch(e){console.warn("Unable to compute style diff:",e),n=[{command:Ve.setStyle,args:[r]}]}return n}(this.serialize(),r).filter((e=>!(e.command in Xt)));if(0===n.length)return!1;const o=n.filter((e=>!(e.command in Kt)));if(o.length>0)throw new Error("Unimplemented: ".concat(o.map((e=>e.command)).join(", "),"."));return n.forEach((e=>{"setTransition"!==e.command&&"setProjection"!==e.command&&this[e.command].apply(this,e.args)})),this.stylesheet=r,this._updateMapProjection(),!0}addImage(t,r){return this.getImage(t)?this.fire(new e.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(t,r),this._afterImageUpdated(t),this)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(t){return this.getImage(t)?(this.imageManager.removeImage(t),this._afterImageUpdated(t),this):this.fire(new e.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!r.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(r).join(", "),"."));if(["vector","raster","geojson","video","image"].indexOf(r.type)>=0&&this._validate(e.validateSource,"sources.".concat(t),r,null,n))return;this.map&&this.map._collectResourceTiming&&(r.collectResourceTiming=!0);const o=Pe(t,r,this.dispatcher,this);o.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(t),source:o.serialize(),sourceId:t})));const i=r=>{const n=(r?"symbol:":"other:")+t,i=this._sourceCaches[n]=new e.SourceCache(n,o,r);(r?this._symbolSourceCaches:this._otherSourceCaches)[t]=i,i.style=this,i.onAdd(this.map)};i(!1),"vector"!==r.type&&"geojson"!==r.type||i(!0),o.onAdd&&o.onAdd(this.map),this._changed=!0}removeSource(t){this._checkLoaded();const r=this.getSource(t);if(!r)throw new Error("There is no source with this ID");for(const o in this._layers)if(this._layers[o].source===t)return this.fire(new e.ErrorEvent(new Error('Source "'.concat(t,'" cannot be removed while layer "').concat(o,'" is using it.'))));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error('Source "'.concat(t,'" cannot be removed while terrain is using it.'))));const n=this._getSourceCaches(t);for(const o of n)delete this._sourceCaches[o.id],delete this._updatedSources[o.id],o.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o.getSource().id})),o.setEventedParent(null),o.clearTiles();return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],r.setEventedParent(null),r.onRemove&&r.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}getSource(e){const t=this._getSourceCache(e);return t&&t.getSource()}_getSources(){const e=[];for(const t in this._otherSourceCaches){const r=this._getSourceCache(t);r&&e.push(r.getSource())}return e}addLayer(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const o=t.id;if(this.getLayer(o))return void this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(o,'" already exists on this map'))));let i;if("custom"===t.type){if(Gt(this,e.validateCustomStyleLayer(t)))return;i=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(o,t.source),t=e.clone$1(t),t=e.extend(t,{source:o})),this._validate(e.validateLayer,"layers.".concat(o),t,{arrayIndex:-1},n))return;i=e.createStyleLayer(t),this._validateLayer(i),i.setEventedParent(this,{layer:{id:o}}),this._serializedLayers[i.id]=i.serialize(),this._updateLayerCount(i,!0)}const a=r?this._order.indexOf(r):this._order.length;if(r&&-1===a)return void this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(r,'" does not exist on this map.'))));this._order.splice(a,0,o),this._layerOrderChanged=!0,this._layers[o]=i;const s=this._getLayerSourceCache(i);if(this._removedLayers[o]&&i.source&&s&&"custom"!==i.type){const e=this._removedLayers[o];delete this._removedLayers[o],e.type!==i.type?this._updatedSources[i.source]="clear":(this._updatedSources[i.source]="reload",s.pause())}this._updateLayer(i),i.onAdd&&i.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(t,r){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be moved."))));if(t===r)return;const n=this._order.indexOf(t);this._order.splice(n,1);const o=r?this._order.indexOf(r):this._order.length;r&&-1===o?this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(r,'" does not exist on this map.')))):(this._order.splice(o,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(t){this._checkLoaded();const r=this._layers[t];if(!r)return void this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be removed."))));r.setEventedParent(null),this._updateLayerCount(r,!1);const n=this._order.indexOf(t);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=r,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],r.onRemove&&r.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(e){return this._layers[e]}hasLayer(e){return e in this._layers}hasLayerType(e){for(const t in this._layers)if(this._layers[t].type===e)return!0;return!1}setLayerZoomRange(t,r,n){this._checkLoaded();const o=this.getLayer(t);o?o.minzoom===r&&o.maxzoom===n||(null!=r&&(o.minzoom=r),null!=n&&(o.maxzoom=n),this._updateLayer(o)):this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot have zoom extent."))))}setFilter(r,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const i=this.getLayer(r);if(i){if(!t(i.filter,n))return null==n?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(e.validateFilter,"layers.".concat(i.id,".filter"),n,{layerType:i.type},o)||(i.filter=e.clone$1(n),this._updateLayer(i)))}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(r,"' does not exist in the map's style and cannot be filtered."))))}getFilter(t){const r=this.getLayer(t);return r&&e.clone$1(r.filter)}setLayoutProperty(r,n,o){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const a=this.getLayer(r);a?t(a.getLayoutProperty(n),o)||(a.setLayoutProperty(n,o,i),this._updateLayer(a)):this.fire(new e.ErrorEvent(new Error("The layer '".concat(r,"' does not exist in the map's style and cannot be styled."))))}getLayoutProperty(t,r){const n=this.getLayer(t);if(n)return n.getLayoutProperty(r);this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style."))))}setPaintProperty(r,n,o){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const a=this.getLayer(r);a?t(a.getPaintProperty(n),o)||(a.setPaintProperty(n,o,i)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new e.ErrorEvent(new Error("The layer '".concat(r,"' does not exist in the map's style and cannot be styled."))))}getPaintProperty(e,t){const r=this.getLayer(e);return r&&r.getPaintProperty(t)}setFeatureState(t,r){this._checkLoaded();const n=t.source,o=t.sourceLayer,i=this.getSource(n);if(!i)return void this.fire(new e.ErrorEvent(new Error("The source '".concat(n,"' does not exist in the map's style."))));const a=i.type;if("geojson"===a&&o)return void this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===a&&!o)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));const s=this._getSourceCaches(n);for(const e of s)e.setFeatureState(o,t.id,r)}removeFeatureState(t,r){this._checkLoaded();const n=t.source,o=this.getSource(n);if(!o)return void this.fire(new e.ErrorEvent(new Error("The source '".concat(n,"' does not exist in the map's style."))));const i=o.type,a="vector"===i?t.sourceLayer:void 0;if("vector"===i&&!a)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(r&&"string"!=typeof t.id&&"number"!=typeof t.id)return void this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const s=this._getSourceCaches(n);for(const e of s)e.removeFeatureState(a,t.id,r)}getFeatureState(t){this._checkLoaded();const r=t.source,n=t.sourceLayer,o=this.getSource(r);if(o){if("vector"!==o.type||n)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(r)[0].getFeatureState(n,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(r,"' does not exist in the map's style."))))}getTransition(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t={};for(const e in this._sourceCaches){const r=this._sourceCaches[e].getSource();t[r.id]||(t[r.id]=r.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0;const t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0,e.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,r={},n=[];for(let i=this._order.length-1;i>=0;i--){const o=this._order[i];if(t(o)){r[o]=i;for(const t of e){const e=t[o];if(e)for(const t of e)n.push(t)}}}n.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const o=[];for(let i=this._order.length-1;i>=0;i--){const a=this._order[i];if(t(a))for(let e=n.length-1;e>=0;e--){const t=n[e].feature;if(r[t.layer.id]<i)break;o.push(t),n.pop()}else for(const t of e){const e=t[a];if(e)for(const t of e)o.push(t.feature)}}return o}queryRenderedFeatures(t,r,n){r&&r.filter&&this._validate(e.validateFilter,"queryRenderedFeatures.filter",r.filter,null,r);const o={};if(r&&r.layers){if(!Array.isArray(r.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const t of r.layers){const r=this._layers[t];if(!r)return this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be queried for features.")))),[];o[r.source]=!0}}const i=[];r.availableImages=this._availableImages;const a=r&&r.layers?r.layers.some((e=>{const t=this.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),s=I.createFromScreenPoints(t,n);for(const e in this._sourceCaches){const t=this._sourceCaches[e].getSource().id;r.layers&&!o[t]||i.push(Oe(this._sourceCaches[e],this._layers,this._serializedLayers,s,r,n,a,!!this.map._showQueryGeometry))}return this.placement&&i.push(function(e,t,r,n,o,i,a){const s={},l=i.queryRenderedSymbols(n),c=[];for(const u of Object.keys(l).map(Number))c.push(a[u]);c.sort(Re);for(const u of c){const r=u.featureIndex.lookupSymbolFeatures(l[u.bucketInstanceId],t,u.bucketIndex,u.sourceLayerIndex,o.filter,o.layers,o.availableImages,e);for(const e in r){const t=s[e]=s[e]||[],n=r[e];n.sort(((e,t)=>{const r=u.featureSortOrder;if(r){const n=r.indexOf(e.featureIndex);return r.indexOf(t.featureIndex)-n}return t.featureIndex-e.featureIndex}));for(const e of n)t.push(e)}}for(const u in s)s[u].forEach((t=>{const n=t.feature,o=r(e[u]);if(!o)return;const i=o.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=i}));return s}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),s.screenGeometry,r,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(i)}querySourceFeatures(t,r){r&&r.filter&&this._validate(e.validateFilter,"querySourceFeatures.filter",r.filter,null,r);const n=this._getSourceCaches(t);let o=[];for(const e of n)o=o.concat(Me(e,r));return o}addSourceType(e,t,r){return Jt.getSourceType(e)?r(new Error('A source type called "'.concat(e,'" already exists.'))):(Jt.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},r):r(null,null))}getLight(){return this.light.getLight()}setLight(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();const n=this.light.getLight();let o=!1;for(const a in e)if(!t(e[a],n[a])){o=!0;break}if(!o)return;const i=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(e,r),this.light.updateTransitions(i)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(r){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._checkLoaded(),!r)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let o=r;if(1===n){if("object"==typeof o.source){const t="terrain-dem-src";this.addSource(t,o.source),o=e.clone$1(o),o=e.extend(o,{source:t})}if(this._validate(e.validateTerrain,"terrain",o))return}if(!this.terrain||this.terrain&&n!==this.terrain.drapeRenderMode){if(!o)return;this._createTerrain(o,n)}else{const r=this.terrain,n=r.get();for(const t of Object.keys(e.spec.terrain))!o.hasOwnProperty(t)&&e.spec.terrain[t].default&&(o[t]=e.spec.terrain[t].default);for(const e in o)if(!t(o[e],n[e])){r.set(o),this.stylesheet.terrain=o;const e=this._setTransitionParameters({duration:0});r.updateTransitions(e);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(e){const t=this.fog=new A(e,this.map.transform);this.stylesheet.fog=e;const r=this._setTransitionParameters({duration:0});t.updateTransitions(r)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const e of this.map._markers)e._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const r=this.fog,n=r.get();0===Object.keys(e).length&&r.set(e);for(const o in e)if(!t(e[o],n[o])){r.set(e),this.stylesheet.fog=e;const t=this._setTransitionParameters({duration:0});r.updateTransitions(t);break}}else this._createFog(e);this._markersNeedUpdate=!0}_setTransitionParameters(t){return{now:e.exported.now(),transition:e.extend(t,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const e=this._order.filter((e=>this.isLayerDraped(this._layers[e]))),t=this._order.filter((e=>!this.isLayerDraped(this._layers[e])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...e),this._drapedFirstOrder.push(...t)}_createTerrain(e,t){const r=this.terrain=new k(e,t);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const n=this._setTransitionParameters({duration:0});r.updateTransitions(n)}_force3DLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}_forceSymbolLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"symbol"===t.type&&this._updateLayer(t)}}_validate(t,r,n,o){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!i||!1!==i.validate)&&Gt(this,t.call(e.validateStyle,e.extend({key:r,style:this.serialize(),value:n,styleSpec:e.spec},o)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this._sourceCaches)this._sourceCaches[e].clearTiles(),this._sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(e){const t=this._getSourceCaches(e);for(const r of t)r.clearTiles()}_reloadSource(e){const t=this._getSourceCaches(e);for(const r of t)r.resume(),r.reload()}_reloadSources(){for(const e of this._getSources())e.reload&&e.reload()}_updateSources(e){for(const t in this._sourceCaches)this._sourceCaches[t].update(e)}_generateCollisionBoxes(){for(const e in this._sourceCaches){const t=this._sourceCaches[e];t.resume(),t.reload()}}_updatePlacement(t,r,n,o){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=!1,s=!1;const l={};for(const e of this._order){const r=this._layers[e];if("symbol"!==r.type)continue;if(!l[r.source]){const e=this._getLayerSourceCache(r);if(!e)continue;l[r.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)))}const n=this.crossTileSymbolIndex.addLayer(r,l[r.source],t.center.lng,t.projection);a=a||n}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),i=i||this._layerOrderChanged||0===n,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(i||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new Bt(t,this._order,i,r,n,o,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const e of this._order){const t=this._layers[e];"symbol"===t.type&&this.placement.updateLayerOpacities(t,l[t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}_releaseSymbolFadeTiles(){for(const e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,t,r){this.imageManager.getImages(t.icons,r),this._updateTilesForChangedImages();const n=e=>{e&&e.setDependencies(t.tileID.key,t.type,t.icons)};n(this._otherSourceCaches[t.source]),n(this._symbolSourceCaches[t.source])}getGlyphs(e,t,r){this.glyphManager.getGlyphs(t.stacks,r)}getResource(t,r,n){return e.makeRequest(r,n)}_getSourceCache(e){return this._otherSourceCaches[e]}_getLayerSourceCache(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}_getSourceCaches(e){const t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}_isSourceCacheLoaded(t){const r=this._getSourceCaches(t);return 0===r.length?(this.fire(new e.ErrorEvent(new Error("There is no source with ID '".concat(t,"'")))),!1):r.every((e=>e.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Jt.getSourceType=function(e){return je[e]},Jt.setSourceType=function(e,t){je[e]=t},Jt.registerForPluginStateChange=e.registerForPluginStateChange;var $t="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",Qt="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",er="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",tr="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",rr="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let nr={},or={};const ir=[];ur($t,ir),ur(er,ir),ur(tr,ir),ur(rr,ir),nr=dr("",er),or=dr(rr,tr);const ar=dr("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),sr=$t,lr="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var cr={background:dr("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:dr("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:dr("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:dr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:dr("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:dr("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:dr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:dr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:dr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:dr("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:dr("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:dr("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:dr("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:dr("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:dr("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:dr("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:dr("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:dr("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:dr("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:dr("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:dr("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:dr("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:dr("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:dr("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:dr("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:dr("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Qt),skyboxGradient:dr("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Qt),skyboxCapture:dr("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:dr("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:dr("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function ur(e,t){const r=e.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let n of r)if(n=n.trim(),"#"===n[0]&&n.includes("if")&&!n.includes("endif")){n=n.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const e=n.split(" ");for(const r of e)t.includes(r)||t.push(r)}}function dr(e,t){const r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,n=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),o={},i=[...ir];return ur(e,i),ur(t,i),{fragmentSource:e=e.replace(r,((e,t,r,n,i)=>(o[i]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\nvarying ").concat(r," ").concat(n," ").concat(i,";\n#else\nuniform ").concat(r," ").concat(n," u_").concat(i,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(i,"\n    ").concat(r," ").concat(n," ").concat(i," = u_").concat(i,";\n#endif\n")))),vertexSource:t=t.replace(r,((e,t,r,n,i)=>{const a="float"===n?"vec2":"vec4",s=i.match(/color/)?"color":a;return o[i]?"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\nuniform lowp float u_").concat(i,"_t;\nattribute ").concat(r," ").concat(a," a_").concat(i,";\nvarying ").concat(r," ").concat(n," ").concat(i,";\n#else\nuniform ").concat(r," ").concat(n," u_").concat(i,";\n#endif\n"):"vec4"===s?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\n    ").concat(i," = a_").concat(i,";\n#else\n    ").concat(r," ").concat(n," ").concat(i," = u_").concat(i,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(i,"\n    ").concat(i," = unpack_mix_").concat(s,"(a_").concat(i,", u_").concat(i,"_t);\n#else\n    ").concat(r," ").concat(n," ").concat(i," = u_").concat(i,";\n#endif\n"):"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\nuniform lowp float u_").concat(i,"_t;\nattribute ").concat(r," ").concat(a," a_").concat(i,";\n#else\nuniform ").concat(r," ").concat(n," u_").concat(i,";\n#endif\n"):"vec4"===s?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\n    ").concat(r," ").concat(n," ").concat(i," = a_").concat(i,";\n#else\n    ").concat(r," ").concat(n," ").concat(i," = u_").concat(i,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(i,"\n    ").concat(r," ").concat(n," ").concat(i," = unpack_mix_").concat(s,"(a_").concat(i,", u_").concat(i,"_t);\n#else\n    ").concat(r," ").concat(n," ").concat(i," = u_").concat(i,";\n#endif\n")})),staticAttributes:n,usedDefines:i}}class hr{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(e,t,r,n,o,i,a){this.context=e;let s=this.boundPaintVertexBuffers.length!==n.length;for(let c=0;!s&&c<n.length;c++)this.boundPaintVertexBuffers[c]!==n[c]&&(s=!0);let l=this.boundDynamicVertexBuffers.length!==a.length;for(let c=0;!l&&c<a.length;c++)this.boundDynamicVertexBuffers[c]!==a[c]&&(l=!0);if(!e.extVertexArrayObject||!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==r||s||l||this.boundIndexBuffer!==o||this.boundVertexOffset!==i)this.freshBind(t,r,n,o,i,a);else{e.bindVertexArrayOES.set(this.vao);for(const e of a)e&&e.bind();o&&o.dynamicDraw&&o.bind()}}freshBind(e,t,r,n,o,i){let a;const s=e.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),a=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=r,this.boundIndexBuffer=n,this.boundVertexOffset=o,this.boundDynamicVertexBuffers=i;else{a=l.currentNumAttributes||0;for(let e=s;e<a;e++)c.disableVertexAttribArray(e)}t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,o);for(const u of r)u.enableAttributes(c,e),u.bind(),u.setVertexAttribPointers(c,e,o);for(const u of i)u&&(u.enableAttributes(c,e),u.bind(),u.setVertexAttribPointers(c,e,o));n&&n.bind(),l.currentNumAttributes=s}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function pr(t,r){const n=Math.pow(2,r.canonical.z),o=r.canonical.y;return[new e.MercatorCoordinate(0,o/n).toLngLat().lat,new e.MercatorCoordinate(0,(o+1)/n).toLngLat().lat]}function fr(t,r,n,o,i,a,s){const l=t.context,c=l.gl,u=n.fbo;if(!u)return;t.prepareDrawTile();const d=t.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get());const h=((e,t,r,n)=>{const o=r.paint.get("hillshade-shadow-color"),i=r.paint.get("hillshade-highlight-color"),a=r.paint.get("hillshade-accent-color");let s=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);const l=!e.options.moving;return{u_matrix:n||e.transform.calculateProjMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:pr(0,t.tileID),u_light:[r.paint.get("hillshade-exaggeration"),s],u_shadow:o,u_highlight:i,u_accent:a}})(t,n,o,t.terrain?r.projMatrix:null);t.prepareDrawProgram(l,d,r.toUnwrapped());const{tileBoundsBuffer:p,tileBoundsIndexBuffer:f,tileBoundsSegments:m}=t.getTileBoundsBuffers(n);d.draw(l,c.TRIANGLES,i,a,s,e.CullFaceMode.disabled,h,o.id,p,f,m)}function mr(t,r,n){if(!r.needsDEMTextureUpload)return;const o=t.context,i=o.gl;o.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||t.getTileTexture(n.stride);const a=n.getPixels();r.demTexture?r.demTexture.update(a,{premultiply:!1}):r.demTexture=new e.Texture(o,a,i.RGBA,{premultiply:!1}),r.needsDEMTextureUpload=!1}function gr(t,r,n,o,i,a){const s=t.context,l=s.gl;if(!r.dem)return;const c=r.dem;if(s.activeTexture.set(l.TEXTURE1),mr(t,r,c),!r.demTexture)return;r.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const u=c.dim;s.activeTexture.set(l.TEXTURE0);let d=r.fbo;if(!d){const t=new e.Texture(s,{width:u,height:u,data:null},l.RGBA);t.bind(l.LINEAR,l.CLAMP_TO_EDGE),d=r.fbo=s.createFramebuffer(u,u,!0),d.colorAttachment.set(t.texture)}s.bindFramebuffer.set(d.framebuffer),s.viewport.set([0,0,u,u]);const{tileBoundsBuffer:h,tileBoundsIndexBuffer:p,tileBoundsSegments:f}=t.getMercatorTileBoundsBuffers();t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,o,i,a,e.CullFaceMode.disabled,((t,r)=>{const n=r.stride,o=e.create();return e.ortho(o,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(o,o,[0,-e.EXTENT,0]),{u_matrix:o,u_image:1,u_dimension:[n,n],u_zoom:t.overscaledZ,u_unpack:r.unpackVector}})(r.tileID,c),n.id,h,p,f),r.needsHillshadePrepare=!1}const yr=t=>({u_matrix:new e.UniformMatrix4f(t),u_image0:new e.Uniform1i(t),u_skirt_height:new e.Uniform1f(t)}),vr=(e,t)=>({u_matrix:e,u_image0:0,u_skirt_height:t}),br=(e,t,r,n,o,i,a,s,l,c,u,d,h,p,f)=>({u_proj_matrix:Float32Array.from(e),u_globe_matrix:t,u_normalize_matrix:Float32Array.from(n),u_merc_matrix:r,u_zoom_transition:o,u_merc_center:i,u_image0:0,u_frustum_tl:a,u_frustum_tr:s,u_frustum_br:l,u_frustum_bl:c,u_globe_pos:u,u_globe_radius:d,u_viewport:h,u_grid_matrix:f?Float32Array.from(f):new Float32Array(9),u_skirt_height:p});function xr(e,t){return null!=e&&null!=t&&!(!e.hasData()||!t.hasData())&&null!=e.demTexture&&null!=t.demTexture&&e.tileID.key!==t.tileID.key}const _r=new class{constructor(){this.operations={}}newMorphing(e,t,r,n,o){if(e in this.operations){const t=this.operations[e];t.to.tileID.key!==r.tileID.key&&(t.queued=r)}else this.operations[e]={startTime:n,phase:0,duration:o,from:t,to:r,queued:null}}getMorphValuesForProxy(e){if(!(e in this.operations))return null;const t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}update(e){for(const t in this.operations){const r=this.operations[t];for(r.phase=(e-r.startTime)/r.duration;r.phase>=1||!this._validOp(r);)if(!this._nextOp(r,e)){delete this.operations[t];break}}}_nextOp(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}_validOp(e){return e.from.hasData()&&e.to.hasData()}},wr={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Sr(e){return 6*Math.pow(1.5,22-e)}function kr(e,t){const r=1<<e.z;return!t&&(0===e.x||e.x===r-1)||0===e.y||e.y===r-1}const Tr=e=>({u_matrix:e});function Er(t,r,n,o,i){if(i>0){const a=e.exported.now(),s=(a-t.timeAdded)/i,l=r?(a-r.timeAdded)/i:-1,c=n.getSource(),u=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),d=!r||Math.abs(r.tileID.overscaledZ-u)>Math.abs(t.tileID.overscaledZ-u),h=d&&t.refreshedUponExpiration?1:e.clamp(d?s:1-l,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),r?{opacity:1,mix:1-h}:{opacity:h,mix:0}}return{opacity:1,mix:0}}class Cr extends e.SourceCache{constructor(e){const t={type:"raster-dem",maxzoom:e.transform.maxZoom},r=new j(Ne(),null),n=Pe("mock-dem",t,r,e.style);super("mock-dem",n,!1),n.setEventedParent(this),this._sourceLoaded=!0}_loadTile(e,t){e.state="loaded",t(null)}}class Ar extends e.SourceCache{constructor(e){const t=Pe("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new j(Ne(),null),e.style);super("proxy",t,!1),t.setEventedParent(this),this.map=this.getSource().map=e,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(t,r,n){if(t.freezeTileCoverage)return;this.transform=t;const o=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((r,n)=>{if(r[n.key]="",!this._tiles[n.key]){const r=new e.Tile(n,this._source.tileSize*n.overscaleFactor(),t.tileZoom);r.state="loaded",this._tiles[n.key]=r}return r}),{});for(const e in this._tiles)e in o||(this.freeFBO(e),this._tiles[e].unloadVectorData(),delete this._tiles[e])}freeFBO(e){const t=this.proxyCachedFBO[e];if(void 0!==t){const r=Object.values(t);this.renderCachePool.push(...r),delete this.proxyCachedFBO[e]}}deallocRenderCache(){this.renderCache.forEach((e=>e.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class jr extends e.OverscaledTileID{constructor(e,t,r){super(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y),this.proxyTileKey=t,this.projMatrix=r}}class Pr extends e.Elevation{constructor(t,r){super(),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[n,o,i]=function(){const t=new e.StructArrayLayout2i4,r=new e.StructArrayLayout3ui6,n=131;t.reserve(17161),r.reserve(33800);const o=e.EXTENT/128,i=e.EXTENT+o/2,a=i+o;for(let l=-o;l<a;l+=o)for(let r=-o;r<a;r+=o){const n=r<0||r>i||l<0||l>i?24575:0,o=e.clamp(Math.round(r),0,e.EXTENT),a=e.clamp(Math.round(l),0,e.EXTENT);t.emplaceBack(o+n,a)}const s=(e,t)=>{const o=t*n+e;r.emplaceBack(o+1,o,o+n),r.emplaceBack(o+n,o+n+1,o+1)};for(let e=1;e<129;e++)for(let t=1;t<129;t++)s(t,e);return[0,129].forEach((e=>{for(let t=0;t<130;t++)s(t,e),s(e,t)})),[t,r,32768]}(),a=t.context;this.gridBuffer=a.createVertexBuffer(n,e.posAttributes.members),this.gridIndexBuffer=a.createIndexBuffer(o),this.gridSegments=e.SegmentVector.simpleSegment(0,0,n.length,o.length),this.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,n.length,i),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Ar(r.map),this.orthoMatrix=e.create(),e.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,e.EXTENT,0,e.EXTENT,0,1);const s=a.gl;this._overlapStencilMode=new e.StencilMode({func:s.GEQUAL,mask:255},0,255,s.KEEP,s.KEEP,s.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=r,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Cr(r.map)}set style(e){e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",(()=>{this._clearLineLayersFromRenderCache()}))}update(t,r,n){if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;const o=t.terrain.properties;this.sourceCache=0===t.terrain.drapeRenderMode?this._mockSourceCache:t._getSourceCache(o.get("source")),this._exaggeration=o.get("exaggeration");const i=()=>{this.sourceCache.used&&e.warnOnce("Raster DEM source '".concat(this.sourceCache.id,"' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source."));const t=this.getScaledDemTileSize();this.sourceCache.update(r,t,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,i(),this._initializing=!0),i(),r.updateElevation(!0,n),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(r),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(e){this._findCoveringTileCache[e]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce("Terrain render cache efficiency is not optimal (".concat(t.efficiency,"%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '").concat(t.firstUndrapedLayer,"' or create a map using optimizeForTerrain: true option."))}_onStyleDataEvent(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((e=>e.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}set useVertexMorphing(e){this._useVertexMorphing=e}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const r=this.proxySourceCache,n=this.painter.transform;this._initializing&&(this._initializing=0===n._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(n.center),-1),this._emptyDEMTextureDirty=!this._initializing);const o=this.proxyCoords=r.getIds().map((e=>{const t=r.getTileByID(e).tileID;return t.projMatrix=n.calculateProjMatrix(t.toUnwrapped()),t}));!function(t,r){const n=r.transform.pointCoordinate(r.transform.getCameraPoint()),o=new e.Point(n.x,n.y);t.sort(((t,r)=>{if(r.overscaledZ-t.overscaledZ)return r.overscaledZ-t.overscaledZ;const n=new e.Point(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),i=new e.Point(r.canonical.x+(1<<r.canonical.z)*r.wrap,r.canonical.y),a=o.mult(1<<t.canonical.z);return a.x-=.5,a.y-=.5,a.distSqr(n)-a.distSqr(i)}))}(o,this.painter),this._previousZoom=n.zoom;const i=this.proxyToSource||{};this.proxyToSource={},o.forEach((e=>{this.proxyToSource[e.key]={}})),this.terrainTileForTile={};const a=this._style._sourceCaches;for(const e in a){const r=a[e];if(!r.used)continue;if(r!==this.sourceCache&&this.resetTileLookupCache(r.id),this._setupProxiedCoordsForOrtho(r,t[e],i),r.usedForTerrain)continue;const n=t[e];r.getSource().reparseOverscaled&&this._assignTerrainTiles(n)}this.proxiedCoords[r.id]=o.map((e=>new jr(e,e.key,this.orthoMatrix))),this._assignTerrainTiles(o),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(i),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();const s={};this._visibleDemTiles=[];for(const e of this.proxyCoords){const t=this.terrainTileForTile[e.key];if(!t)continue;const r=t.tileID.key;r in s||(this._visibleDemTiles.push(t),s[r]=r)}}_assignTerrainTiles(e){this._initializing||e.forEach((e=>{if(this.terrainTileForTile[e.key])return;const t=this._findTileCoveringTileID(e,this.sourceCache);t&&(this.terrainTileForTile[e.key]=t)}))}_prepareDEMTextures(){const e=this.painter.context,t=e.gl;for(const r in this.terrainTileForTile){const n=this.terrainTileForTile[r],o=n.dem;!o||n.demTexture&&!n.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),mr(this.painter,n,o))}}_prepareDemTileUniforms(e,t,r,n){if(!t||null==t.demTexture)return!1;const o=e.tileID.canonical,i=Math.pow(2,t.tileID.canonical.z-o.z),a=n||"";return r["u_dem_tl".concat(a)]=[o.x*i%1,o.y*i%1],r["u_dem_scale".concat(a)]=i,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const t=this.painter.context,r=t.gl;if(!this._emptyDepthBufferTexture){const n=new e.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new e.Texture(t,n,r.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let e=0;const t=this._visibleDemTiles.reduce(((t,r)=>{if(!r.dem)return t;const n=r.dem.tree.minimums[0];return n>0&&e++,t+n}),0);return e?t/e:0}_updateEmptyDEMTexture(){const t=this.painter.context,r=t.gl;t.activeTexture.set(r.TEXTURE2);const n=this._getLoadedAreaMinimum(),o=new e.RGBAImage({width:1,height:1},new Uint8Array(e.DEMData.pack(n,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let i=this._emptyDEMTexture;return i?i.update(o,{premultiply:!1}):i=this._emptyDEMTexture=new e.Texture(t,o,r.RGBA,{premultiply:!1}),i}setupElevationDraw(t,r,n){const o=this.painter.context,i=o.gl,a=(s=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(s),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var s;a.u_dem_size=this.sourceCache.getSource().tileSize,a.u_exaggeration=this.exaggeration();let l=null,c=null,u=1;if(n&&n.morphing&&this._useVertexMorphing){const e=n.morphing.srcDemTile,r=n.morphing.dstDemTile;u=n.morphing.phase,e&&r&&(this._prepareDemTileUniforms(t,e,a,"_prev")&&(c=e),this._prepareDemTileUniforms(t,r,a)&&(l=r))}if(c&&l?(o.activeTexture.set(i.TEXTURE2),l.demTexture.bind(i.NEAREST,i.CLAMP_TO_EDGE,i.NEAREST),o.activeTexture.set(i.TEXTURE4),c.demTexture.bind(i.NEAREST,i.CLAMP_TO_EDGE,i.NEAREST),a.u_dem_lerp=u):(l=this.terrainTileForTile[t.tileID.key],o.activeTexture.set(i.TEXTURE2),(this._prepareDemTileUniforms(t,l,a)?l.demTexture:this.emptyDEMTexture).bind(i.NEAREST,i.CLAMP_TO_EDGE)),o.activeTexture.set(i.TEXTURE3),n&&n.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(i.NEAREST,i.CLAMP_TO_EDGE),this._depthFBO&&(a.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(i.NEAREST,i.CLAMP_TO_EDGE),a.u_depth_size_inv=[1,1]),n&&n.useMeterToDem&&l){const t=(1<<l.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;a.u_meter_to_dem=t}if(n&&n.labelPlaneMatrixInv&&(a.u_label_plane_matrix_inv=n.labelPlaneMatrixInv),r.setTerrainUniformValues(o,a),"globe"===this.painter.transform.projection.name){const e=this.globeUniformValues(this.painter.transform,t.tileID.canonical,n&&n.useDenormalizedUpVectorScale);r.setGlobeUniformValues(o,e)}}globeUniformValues(t,r,n){const o=t.projection;return{u_tile_tl_up:o.upVector(r,0,0),u_tile_tr_up:o.upVector(r,e.EXTENT,0),u_tile_br_up:o.upVector(r,e.EXTENT,e.EXTENT),u_tile_bl_up:o.upVector(r,0,e.EXTENT),u_tile_up_scale:n?e.globeMetersToEcef(1):o.upVectorScale(r,t.center.lat,t.worldSize).metersToTile}}renderToBackBuffer(t){const r=this.painter,n=this.painter.context;0!==t.length&&(n.bindFramebuffer.set(null),n.viewport.set([0,0,r.width,r.height]),r.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(t,r,n,o,i){if("globe"===t.transform.projection.name)!function(t,r,n,o,i){const a=t.context,s=a.gl;let l,c;const u=t.options.showTerrainWireframe?2:0,d=t.transform,h=e.globeUseCustomAntiAliasing(t,a,d),p=(e,r)=>{if(c===e)return;const n=[wr[e],"PROJECTION_GLOBE_VIEW"];h&&n.push("CUSTOM_ANTIALIASING"),r&&n.push(wr[u]),l=t.useProgram("globeRaster",null,n),c=e},f=t.colorModeForRenderPass(),m=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);_r.update(i);const g=e.calculateGlobeMercatorMatrix(d),y=[e.mercatorXfromLng(d.center.lng),e.mercatorYfromLat(d.center.lat)],v=u?[!1,!0]:[!1],b=t.globeSharedBuffers,x=[d.width*e.exported.devicePixelRatio,d.height*e.exported.devicePixelRatio],_=Float32Array.from(d.globeMatrix),w={useDenormalizedUpVectorScale:!0};if(v.forEach((u=>{const d=t.transform,h=Sr(d.zoom)*r.exaggeration();c=-1;const v=u?s.LINES:s.TRIANGLES;for(const c of o){const o=n.getTile(c),S=e.StencilMode.disabled,k=r.prevTerrainTileForTile[c.key],T=r.terrainTileForTile[c.key];xr(k,T)&&_r.newMorphing(c.key,k,T,i,250),a.activeTexture.set(s.TEXTURE0),o.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);const E=_r.getMorphValuesForProxy(c.key),C=E?1:0;E&&e.extend$1(w,{morphing:{srcDemTile:E.from,dstDemTile:E.to,phase:e.easeCubicInOut(E.phase)}});const A=e.tileCornersToBounds(c.canonical),j=e.getLatitudinalLod(A.getCenter().lat),P=e.getGridMatrix(c.canonical,A,j,d.worldSize/d._pixelsPerMercatorPixel),I=e.globeNormalizeECEF(e.globeTileBounds(c.canonical)),O=br(d.projMatrix,_,g,I,e.globeToMercatorTransition(d.zoom),y,d.frustumCorners.TL,d.frustumCorners.TR,d.frustumCorners.BR,d.frustumCorners.BL,d.globeCenterInViewSpace,d.globeRadius,x,h,P);if(p(C,u),r.setupElevationDraw(o,l,w),t.prepareDrawProgram(a,l,c.toUnwrapped()),b){const[r,n,o]=u?b.getWirefameBuffers(t.context,j):b.getGridBuffers(j,0!==h);l.draw(a,v,m,S,f,e.CullFaceMode.backCCW,O,"globe_raster",r,n,o)}}})),b){const i=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];h&&i.push("CUSTOM_ANTIALIASING"),l=t.useProgram("globeRaster",null,i);for(const c of o){const{x:o,y:i,z:u}=c.canonical,h=0===i,p=i===(1<<u)-1,[g,v,_,S]=b.getPoleBuffers(u);if(S&&(h||p)){const i=n.getTile(c);a.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);let b=e.globePoleMatrixForTile(u,o,d);const k=e.globeNormalizeECEF(e.globeTileBounds(c.canonical)),T=(t,r)=>t.draw(a,s.TRIANGLES,m,e.StencilMode.disabled,f,e.CullFaceMode.disabled,br(d.projMatrix,b,b,k,0,y,d.frustumCorners.TL,d.frustumCorners.TR,d.frustumCorners.BR,d.frustumCorners.BL,d.globeCenterInViewSpace,d.globeRadius,x,0),"globe_pole_raster",r,_,S);r.setupElevationDraw(i,l,w),t.prepareDrawProgram(a,l,c.toUnwrapped()),h&&T(l,g),p&&(b=e.scale(e.create(),b,[1,-1,1]),T(l,v))}}}}(t,r,n,o,i);else{const a=t.context,s=a.gl;let l,c;const u=t.options.showTerrainWireframe?2:0,d=(e,r)=>{if(c===e)return;const n=[wr[e]];r&&n.push(wr[u]),l=t.useProgram("terrainRaster",null,n),c=e},h=t.colorModeForRenderPass(),p=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);_r.update(i);const f=t.transform,m=Sr(f.zoom)*r.exaggeration();(u?[!1,!0]:[!1]).forEach((u=>{c=-1;const g=u?s.LINES:s.TRIANGLES,[y,v]=u?r.getWirefameBuffer():[r.gridIndexBuffer,r.gridSegments];for(const c of o){const o=n.getTile(c),b=e.StencilMode.disabled,x=r.prevTerrainTileForTile[c.key],_=r.terrainTileForTile[c.key];xr(x,_)&&_r.newMorphing(c.key,x,_,i,250),a.activeTexture.set(s.TEXTURE0),o.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST);const w=_r.getMorphValuesForProxy(c.key),S=w?1:0;let k;w&&(k={morphing:{srcDemTile:w.from,dstDemTile:w.to,phase:e.easeCubicInOut(w.phase)}});const T=vr(c.projMatrix,kr(c.canonical,f.renderWorldCopies)?m/10:m);d(S,u),r.setupElevationDraw(o,l,k),t.prepareDrawProgram(a,l,c.toUnwrapped()),l.draw(a,g,p,b,h,e.CullFaceMode.backCCW,T,"terrain_raster",r.gridBuffer,y,v)}}))}}(r,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,r.gpuTimingDeferredRenderEnd(),t.splice(0,t.length))}renderBatch(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;const r=this.painter,n=this.painter.context,o=this.proxySourceCache,i=this.proxiedCoords[o.id],a=this._drapedRenderBatches.shift(),s=[],l=r.style.order;let c=0;for(const u of i){const i=o.getTileByID(u.proxyTileKey),d=o.proxyCachedFBO[u.key]?o.proxyCachedFBO[u.key][t]:void 0,h=void 0!==d?o.renderCache[d]:this.pool[c++],p=void 0!==d;if(i.texture=h.tex,p&&!h.dirty){s.push(i.tileID);continue}let f;n.bindFramebuffer.set(h.fb.framebuffer),this.renderedToTile=!1,h.dirty&&(n.clear({color:e.Color.transparent,stencil:0}),h.dirty=!1);for(let e=a.start;e<=a.end;++e){const t=r.style._layers[l[e]];if(t.isHidden(r.transform.zoom))continue;const o=r.style._getLayerSourceCache(t),i=o?this.proxyToSource[u.key][o.id]:[u];if(!i)continue;const a=i;n.viewport.set([0,0,h.fb.width,h.fb.height]),f!==(o?o.id:null)&&(this._setupStencil(h,i,t,o),f=o?o.id:null),r.renderLayer(r,o,t,a)}this.renderedToTile?(h.dirty=!0,s.push(i.tileID)):p||--c,5===c&&(c=0,this.renderToBackBuffer(s))}return this.renderToBackBuffer(s),this.renderingToTexture=!1,n.bindFramebuffer.set(null),n.viewport.set([0,0,r.width,r.height]),a.end+1}postRender(){}renderCacheEfficiency(e){const t=e.order.length;if(0===t)return{efficiency:100};let r,n=0,o=0,i=!1;for(let a=0;a<t;++a){const t=e._layers[e.order[a]];this._style.isLayerDraped(t)?(i&&++n,++o):i||(i=!0,r=t.id)}return 0===o?{efficiency:100}:{efficiency:100*(1-n/o),firstUndrapedLayer:r}}getMinElevationBelowMSL(){let e=0;return this._visibleDemTiles.filter((e=>e.dem)).forEach((t=>{e=Math.min(e,t.dem.tree.minimums[0])})),0===e?e:(e-30)*this._exaggeration}raycast(e,t,r){if(!this._visibleDemTiles)return null;const n=this._visibleDemTiles.filter((e=>e.dem)).map((n=>{const o=n.tileID,i=1<<o.overscaledZ,{x:a,y:s}=o.canonical,l=a/i,c=(a+1)/i,u=s/i,d=(s+1)/i;return{minx:l,miny:u,maxx:c,maxy:d,t:n.dem.tree.raycastRoot(l,u,c,d,e,t,r),tile:n}}));n.sort(((e,t)=>(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)));for(const o of n){if(null==o.t)return null;const n=o.tile.dem.tree.raycast(o.minx,o.miny,o.maxx,o.maxy,e,t,r);if(null!=n)return n}return null}_createFBO(){const t=this.painter.context,r=t.gl,n=this.drapeBufferSize;t.activeTexture.set(r.TEXTURE0);const o=new e.Texture(t,{width:n[0],height:n[1],data:null},r.RGBA);o.bind(r.LINEAR,r.CLAMP_TO_EDGE);const i=t.createFramebuffer(n[0],n[1],!1);return i.colorAttachment.set(o.texture),i.depthAttachment=new we(t,i.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,n[0],n[1]),this._stencilRef=0,i.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):i.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&r.texParameterf(r.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:i,tex:o,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e].hasTransition())return!0;return this._style.order.some((e=>{const t=this._style._layers[e],r=t.isHidden(this.painter.transform.zoom);return"custom"===t.type?!r&&t.shouldRedrape():!r&&t.hasTransition()}))}_clearLineLayersFromRenderCache(){let t=!1;for(const e of this._style._getSources())if(e instanceof Te){t=!0;break}if(!t)return;const r={};for(let n=0;n<this._style.order.length;++n){const t=this._style._layers[this._style.order[n]],o=this._style._getLayerSourceCache(t);if(o&&!r[o.id]&&!t.isHidden(this.painter.transform.zoom)&&"line"===t.type&&t.widthExpression()instanceof e.ZoomDependentExpression){r[o.id]=!0;for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][o.id];if(t)for(const e of t)this._clearRenderCacheForTile(o.id,e)}}}}_clearRasterLayersFromRenderCache(){let e=!1;for(const r in this._style._sourceCaches)if(this._style._sourceCaches[r]._source instanceof Ee){e=!0;break}if(!e)return;const t={};for(let r=0;r<this._style.order.length;++r){const e=this._style._layers[this._style.order[r]],n=this._style._getLayerSourceCache(e);if(!n||t[n.id])continue;if(e.isHidden(this.painter.transform.zoom)||"raster"!==e.type)continue;const o=e.paint.get("raster-fade-duration");for(const t of this.proxyCoords){const e=this.proxyToSource[t.key][n.id];if(e)for(const t of e){const e=Er(n.getTile(t),n.findLoadedParent(t,0),n,this.painter.transform,o);(1!==e.opacity||0!==e.mix)&&this._clearRenderCacheForTile(n.id,t)}}}}_setupDrapedRenderBatches(){const e=this._style.order,t=e.length;if(0===t)return;const r=[];let n,o=0,i=this._style._layers[e[o]];for(;!this._style.isLayerDraped(i)&&i.isHidden(this.painter.transform.zoom)&&++o<t;)i=this._style._layers[e[o]];for(;o<t;++o){const t=this._style._layers[e[o]];t.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(t)?void 0===n&&(n=o):void 0!==n&&(r.push({start:n,end:o-1}),n=void 0))}void 0!==n&&r.push({start:n,end:o-1}),this._drapedRenderBatches=r}_setupRenderCache(e){const t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){const e=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(let r=0;r<e.length;++r){const n=Object.values(e[r]);t.renderCachePool.push(...n)}}return}this._clearRasterLayersFromRenderCache();const r=this.proxyCoords,n=this._tilesDirty;for(let i=r.length-1;i>=0;i--){const o=r[i];if(t.getTileByID(o.key),void 0!==t.proxyCachedFBO[o.key]){const r=e[o.key],i=this.proxyToSource[o.key];let a=0;for(const e in i){const t=i[e],o=r[e];if(!o||o.length!==t.length||t.some(((t,r)=>t!==o[r]||n[e]&&n[e].hasOwnProperty(t.key)))){a=-1;break}++a}for(const e in t.proxyCachedFBO[o.key])t.renderCache[t.proxyCachedFBO[o.key][e]].dirty=a<0||a!==Object.values(r).length}}const o=[...this._drapedRenderBatches];o.sort(((e,t)=>t.end-t.start-(e.end-e.start)));for(const i of o)for(const e of r){if(t.proxyCachedFBO[e.key])continue;let r=t.renderCachePool.pop();void 0===r&&t.renderCache.length<50&&(r=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==r&&(t.proxyCachedFBO[e.key]={},t.proxyCachedFBO[e.key][i.start]=r,t.renderCache[r].dirty=!0)}this._tilesDirty={}}_setupStencil(e,t,r,n){if(!n||!this._sourceTilesOverlap[n.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const o=this.painter.context,i=o.gl;if(t.length<=1)return void(this._overlapStencilType=!1);let a;if(r.isTileClipped())a=t.length,this._overlapStencilMode.test={func:i.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);a=1,this._overlapStencilMode.test={func:i.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+a>255&&(o.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=a,this._overlapStencilMode.ref=this._stencilRef,r.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}_renderTileClippingMasks(t,r){const n=this.painter,o=this.painter.context,i=o.gl;n._tileClippingMaskIDs={},o.setColorMode(e.ColorMode.disabled),o.setDepthMode(e.DepthMode.disabled);const a=n.useProgram("clippingMask");for(const s of t){const t=n._tileClippingMaskIDs[s.key]=--r;a.draw(o,i.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:i.ALWAYS,mask:0},t,255,i.KEEP,i.KEEP,i.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Tr(s.projMatrix),"$clipping",n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}pointCoordinate(t){const r=this.painter.transform;if(t.x<0||t.x>r.width||t.y<0||t.y>r.height)return null;const n=[t.x,t.y,1,1];e.transformMat4$1(n,n,r.pixelMatrixInverse),e.scale$1(n,n,1/n[3]),n[0]/=r.worldSize,n[1]/=r.worldSize;const o=r._camera.position,i=e.mercatorZfromAltitude(1,r.center.lat),a=[o[0],o[1],o[2]/i,0],s=e.subtract([],n.slice(0,3),a);e.normalize(s,s);const l=this.raycast(a,s,this._exaggeration);return null!==l&&l?(e.scaleAndAdd(a,a,s,l),a[3]=a[2],a[2]*=i,a):null}drawDepth(){const t=this.painter,r=t.context,n=this.proxySourceCache,o=Math.ceil(t.width),i=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===o&&this._depthFBO.height===i||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const t=r.gl,n=r.createFramebuffer(o,i,!0);r.activeTexture.set(t.TEXTURE0);const a=new e.Texture(r,{width:o,height:i,data:null},t.RGBA);a.bind(t.NEAREST,t.CLAMP_TO_EDGE),n.colorAttachment.set(a.texture);const s=r.createRenderbuffer(r.gl.DEPTH_COMPONENT16,o,i);n.depthAttachment.set(s),this._depthFBO=n,this._depthTexture=a}r.bindFramebuffer.set(this._depthFBO.framebuffer),r.viewport.set([0,0,o,i]),function(t,r,n,o){if("globe"===t.transform.projection.name)return;const i=t.context,a=i.gl;i.clear({depth:1});const s=t.useProgram("terrainDepth"),l=new e.DepthMode(a.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D);for(const c of o){const t=n.getTile(c),o=vr(c.projMatrix,0);r.setupElevationDraw(t,s),s.draw(i,a.TRIANGLES,l,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,o,"terrain_depth",r.gridBuffer,r.gridIndexBuffer,r.gridNoSkirtSegments)}}(t,this,n,this.proxyCoords)}_setupProxiedCoordsForOrtho(e,t,r){if(e.getSource()instanceof Ae)return this._setupProxiedCoordsForImageSource(e,t,r);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};const n=this.proxiedCoords[e.id]=[],o=this.proxyCoords;for(let a=0;a<o.length;a++){const t=o[a],i=this._findTileCoveringTileID(t,e);if(i){const o=this._createProxiedId(t,i,r[t.key]&&r[t.key][e.id]);n.push(o),this.proxyToSource[t.key][e.id]=[o]}}let i=!1;for(let a=0;a<t.length;a++){const o=e.getTile(t[a]);if(!o||!o.hasData())continue;const s=this._findTileCoveringTileID(o.tileID,this.proxySourceCache);if(s&&s.tileID.canonical.z!==o.tileID.canonical.z){const t=this.proxyToSource[s.tileID.key][e.id],a=this._createProxiedId(s.tileID,o,r[s.tileID.key]&&r[s.tileID.key][e.id]);t?t.splice(t.length-1,0,a):this.proxyToSource[s.tileID.key][e.id]=[a],n.push(a),i=!0}}this._sourceTilesOverlap[e.id]=i}_setupProxiedCoordsForImageSource(t,r,n){if(!t.getSource().loaded())return;const o=this.proxiedCoords[t.id]=[],i=this.proxyCoords,a=t.getSource(),s=new e.Point(a.tileID.x,a.tileID.y)._div(1<<a.tileID.z),l=a.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce(((e,t)=>(e.min.x=Math.min(e.min.x,t.x-s.x),e.min.y=Math.min(e.min.y,t.y-s.y),e.max.x=Math.max(e.max.x,t.x-s.x),e.max.y=Math.max(e.max.y,t.y-s.y),e)),{min:new e.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(t,r)=>{const n=t.wrap+t.canonical.x/(1<<t.canonical.z),o=t.canonical.y/(1<<t.canonical.z),i=e.EXTENT/(1<<t.canonical.z),a=r.wrap+r.canonical.x/(1<<r.canonical.z),s=r.canonical.y/(1<<r.canonical.z);return n+i<a+l.min.x||n>a+l.max.x||o+i<s+l.min.y||o>s+l.max.y};for(let e=0;e<i.length;e++){const a=i[e];for(let e=0;e<r.length;e++){const i=t.getTile(r[e]);if(!i||!i.hasData())continue;if(c(a,i.tileID))continue;const s=this._createProxiedId(a,i,n[a.key]&&n[a.key][t.id]),l=this.proxyToSource[a.key][t.id];l?l.push(s):this.proxyToSource[a.key][t.id]=[s],o.push(s)}}}_createProxiedId(t,r,n){let o=this.orthoMatrix;if(n){const e=n.find((e=>e.key===r.tileID.key));if(e)return e}if(r.tileID.key!==t.key){const n=t.canonical.z-r.tileID.canonical.z;let i,a,s;o=e.create();const l=r.tileID.wrap-t.wrap<<t.overscaledZ;n>0?(i=e.EXTENT>>n,a=i*((r.tileID.canonical.x<<n)-t.canonical.x+l),s=i*((r.tileID.canonical.y<<n)-t.canonical.y)):(i=e.EXTENT<<-n,a=e.EXTENT*(r.tileID.canonical.x-(t.canonical.x+l<<-n)),s=e.EXTENT*(r.tileID.canonical.y-(t.canonical.y<<-n))),e.ortho(o,0,i,0,i,0,1),e.translate(o,o,[a,s,0])}return new jr(r.tileID,t.key,o)}_findTileCoveringTileID(t,r){let n=r.getTile(t);if(n&&n.hasData())return n;const o=this._findCoveringTileCache[r.id],i=o[t.key];if(n=i?r.getTileByID(i):null,n&&n.hasData()||null===i)return n;let a=n?n.tileID:t,s=a.overscaledZ;const l=r.getSource().minzoom,c=[];if(!i){const o=r.getSource().maxzoom;if(t.canonical.z>=o){const n=t.canonical.z-o;r.getSource().reparseOverscaled?(s=Math.max(t.canonical.z+2,r.transform.tileZoom),a=new e.OverscaledTileID(s,t.wrap,o,t.canonical.x>>n,t.canonical.y>>n)):0!==n&&(s=o,a=new e.OverscaledTileID(s,t.wrap,o,t.canonical.x>>n,t.canonical.y>>n))}a.key!==t.key&&(c.push(a.key),n=r.getTile(a))}const u=e=>{c.forEach((t=>{o[t]=e})),c.length=0};for(s-=1;s>=l&&(!n||!n.hasData());s--){n&&u(n.tileID.key);const e=a.calculateScaledKey(s);if(n=r.getTileByID(e),n&&n.hasData())break;const t=o[e];if(null===t)break;void 0===t?c.push(e):n=r.getTileByID(t)}return u(n?n.tileID.key:null),n&&n.hasData()?n:null}findDEMTileFor(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(e,t){let r=this._tilesDirty[e];r||(r=this._tilesDirty[e]={}),r[t.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const t=function(){let t=0;const r=new e.StructArrayLayout2ui4,n=131;for(let e=1;e<129;e++){for(let o=1;o<129;o++)t=e*n+o,r.emplaceBack(t,t+1),r.emplaceBack(t,t+n),r.emplaceBack(t+1,t+n),128===e&&r.emplaceBack(t+n,t+n+1);r.emplaceBack(t+1,t+1+n)}return r}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Ir{static cacheKey(e,t,r,n){let o="".concat(t).concat(n?n.cacheKey:"");for(const i of r)e.usedDefines.includes(i)&&(o+="/".concat(i));return o}constructor(t,r,n,o,i,a){const s=t.gl;this.program=s.createProgram();const l=function(e){const t=[];for(let r=0;r<e.length;r++){if(null===e[r])continue;const n=e[r].split(" ");t.push(n.pop())}return t}(n.staticAttributes),c=o?o.getBinderAttributes():[],u=l.concat(c);let d=o?o.defines():[];d=d.concat(a.map((e=>"#define ".concat(e))));const h=t.isWebGL2?"#version 300 es\n":"",p=h+d.concat(t.extStandardDerivatives&&0===h.length?"#extension GL_OES_standard_derivatives : enable\n".concat(lr):lr,lr,sr,ar.fragmentSource,or.fragmentSource,n.fragmentSource).join("\n"),f=h+d.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",sr,ar.vertexSource,or.vertexSource,nr.vertexSource,n.vertexSource).join("\n"),m=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(m,p),s.compileShader(m),s.attachShader(this.program,m);const g=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())this.failedToCreate=!0;else{s.shaderSource(g,f),s.compileShader(g),s.attachShader(this.program,g),this.attributes={},this.numAttributes=u.length;for(let e=0;e<this.numAttributes;e++)u[e]&&(s.bindAttribLocation(this.program,e,u[e]),this.attributes[u[e]]=e);s.linkProgram(this.program),s.deleteShader(g),s.deleteShader(m),this.fixedUniforms=i(t),this.binderUniforms=o?o.getUniforms(t):[],a.includes("TERRAIN")&&(this.terrainUniforms=(t=>({u_dem:new e.Uniform1i(t),u_dem_prev:new e.Uniform1i(t),u_dem_unpack:new e.Uniform4f(t),u_dem_tl:new e.Uniform2f(t),u_dem_scale:new e.Uniform1f(t),u_dem_tl_prev:new e.Uniform2f(t),u_dem_scale_prev:new e.Uniform1f(t),u_dem_size:new e.Uniform1f(t),u_dem_lerp:new e.Uniform1f(t),u_exaggeration:new e.Uniform1f(t),u_depth:new e.Uniform1i(t),u_depth_size_inv:new e.Uniform2f(t),u_meter_to_dem:new e.Uniform1f(t),u_label_plane_matrix_inv:new e.UniformMatrix4f(t)}))(t)),a.includes("GLOBE")&&(this.globeUniforms=(t=>({u_tile_tl_up:new e.Uniform3f(t),u_tile_tr_up:new e.Uniform3f(t),u_tile_br_up:new e.Uniform3f(t),u_tile_bl_up:new e.Uniform3f(t),u_tile_up_scale:new e.Uniform1f(t)}))(t)),a.includes("FOG")&&(this.fogUniforms=(t=>({u_fog_matrix:new e.UniformMatrix4f(t),u_fog_range:new e.Uniform2f(t),u_fog_color:new e.Uniform4f(t),u_fog_horizon_blend:new e.Uniform1f(t),u_fog_temporal_offset:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_globe_transition:new e.Uniform1f(t),u_is_globe:new e.Uniform1i(t),u_viewport:new e.Uniform2f(t)}))(t))}}setTerrainUniformValues(e,t){if(!this.terrainUniforms)return;const r=this.terrainUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)r[e]&&r[e].set(this.program,e,t[e])}}setGlobeUniformValues(e,t){if(!this.globeUniforms)return;const r=this.globeUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)r[e]&&r[e].set(this.program,e,t[e])}}setFogUniformValues(e,t){if(!this.fogUniforms)return;const r=this.fogUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)r[e].set(this.program,e,t[e])}}draw(e,t,r,n,o,i,a,s,l,c,u,d,h,p,f){const m=e.gl;if(this.failedToCreate)return;e.program.set(this.program),e.setDepthMode(r),e.setStencilMode(n),e.setColorMode(o),e.setCullFace(i);for(const y of Object.keys(this.fixedUniforms))this.fixedUniforms[y].set(this.program,y,a[y]);p&&p.setUniforms(this.program,e,this.binderUniforms,d,{zoom:h});const g={[m.LINES]:2,[m.TRIANGLES]:3,[m.LINE_STRIP]:1}[t];for(const y of u.get()){const r=y.vaos||(y.vaos={});(r[s]||(r[s]=new hr)).bind(e,this,l,p?p.getPaintVertexBuffers():[],c,y.vertexOffset,f||[]),m.drawElements(t,y.primitiveLength*g,m.UNSIGNED_SHORT,y.primitiveOffset*g*2)}}}function Or(e,t){const r=Math.pow(2,t.tileID.overscaledZ),n=t.tileSize*Math.pow(2,e.transform.tileZoom)/r,o=n*(t.tileID.canonical.x+t.tileID.wrap*r),i=n*t.tileID.canonical.y;return{u_image:0,u_texsize:t.imageAtlasTexture.size,u_tile_units_to_pixels:1/P(t,1,e.transform.tileZoom),u_pixel_coord_upper:[o>>16,i>>16],u_pixel_coord_lower:[65535&o,65535&i]}}const Mr=e.create(),Rr=(t,r,n,o,i,a,s,l,c,u,d)=>{const h=r.style.light,p=h.properties.get("position"),f=[p.x,p.y,p.z],m=e.create$1();"viewport"===h.properties.get("anchor")&&(e.fromRotation(m,-r.transform.angle),e.transformMat3(f,f,m));const g=h.properties.get("color"),y=r.transform,v={u_matrix:t,u_lightpos:f,u_lightintensity:h.properties.get("intensity"),u_lightcolor:[g.r,g.g,g.b],u_vertical_gradient:+n,u_opacity:o,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Mr,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:i,u_edge_radius:a};return"globe"===y.projection.name&&(v.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],v.u_zoom_transition=c,v.u_inv_rot_matrix=d,v.u_merc_center=u,v.u_up_dir=y.projection.upVector(new e.CanonicalTileID(0,0,0),u[0]*e.EXTENT,u[1]*e.EXTENT),v.u_height_lift=l),v},Lr=(t,r,n,o,i,a,s,l,c,u,d,h)=>{const p=Rr(t,r,n,o,i,a,s,c,u,d,h),f={u_height_factor:-Math.pow(2,s.overscaledZ)/l.tileSize/8};return e.extend(p,Or(r,l),f)},Fr=e=>({u_matrix:e}),zr=(t,r,n)=>e.extend(Fr(t),Or(r,n)),Dr=(e,t)=>({u_matrix:e,u_world:t}),Nr=(t,r,n,o)=>e.extend(zr(t,r,n),{u_world:o}),Br=e.create(),Ur=(t,r,n,o,i,a)=>{const s=t.transform,l="globe"===s.projection.name;let c;if("map"===a.paint.get("circle-pitch-alignment"))if(l){const t=e.globePixelsToTileUnits(s.zoom,r.canonical)*s._pixelsPerMercatorPixel;c=Float32Array.from([t,0,0,t])}else c=s.calculatePixelsToTileUnitsMatrix(n);else c=new Float32Array([s.pixelsToGLUnits[0],0,0,s.pixelsToGLUnits[1]]);const u={u_camera_to_center_distance:s.cameraToCenterDistance,u_matrix:t.translatePosMatrix(r.projMatrix,n,a.paint.get("circle-translate"),a.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:c,u_inv_rot_matrix:Br,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(l){u.u_inv_rot_matrix=o,u.u_merc_center=i,u.u_tile_id=[r.canonical.x,r.canonical.y,1<<r.canonical.z],u.u_zoom_transition=e.globeToMercatorTransition(s.zoom);const t=i[0]*e.EXTENT,n=i[1]*e.EXTENT;u.u_up_dir=s.projection.upVector(new e.CanonicalTileID(0,0,0),t,n)}return u},Vr=e=>{const t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},Wr=(t,r,n,o)=>{const i=e.EXTENT/n.tileSize;return{u_matrix:t,u_camera_to_center_distance:r.getCameraToCenterDistance(o),u_extrude_scale:[r.pixelsToGLUnits[0]/i,r.pixelsToGLUnits[1]/i]}},qr=function(e,t){return{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},Hr=e.create(),Gr=(t,r,n,o,i,a,s)=>{const l=t.transform,c="globe"===l.projection.name,u=c?e.globePixelsToTileUnits(l.zoom,r.canonical)*l._pixelsPerMercatorPixel:P(n,1,a),d={u_matrix:r.projMatrix,u_extrude_scale:u,u_intensity:s,u_inv_rot_matrix:Hr,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(c){d.u_inv_rot_matrix=o,d.u_merc_center=i,d.u_tile_id=[r.canonical.x,r.canonical.y,1<<r.canonical.z],d.u_zoom_transition=e.globeToMercatorTransition(l.zoom);const t=i[0]*e.EXTENT,n=i[1]*e.EXTENT;d.u_up_dir=l.projection.upVector(new e.CanonicalTileID(0,0,0),t,n)}return d},Kr=(e,t,r,n,o,i,a)=>{const s=e.transform,l=s.calculatePixelsToTileUnitsMatrix(t);return{u_matrix:Yr(e,t,r,n),u_pixels_to_tile_units:l,u_device_pixel_ratio:i,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:o,u_texsize:Jr(r)?t.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Zr(t,e.transform),u_alpha_discard_threshold:0,u_trim_offset:a}},Xr=(e,t,r,n,o)=>{const i=e.transform;return{u_matrix:Yr(e,t,r,n),u_texsize:t.imageAtlasTexture.size,u_pixels_to_tile_units:i.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:o,u_image:0,u_tile_units_to_pixels:Zr(t,i),u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Zr(e,t){return 1/P(e,1,t.tileZoom)}function Yr(e,t,r,n){return e.translatePosMatrix(n||t.tileID.projMatrix,t,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}function Jr(e){const t=e.paint.get("line-dasharray").value;return t.value||"constant"!==t.kind}const $r=(e,t,r,n,o,i)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:r,u_fade_t:n.mix,u_opacity:n.opacity*o.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:o.paint.get("raster-brightness-min"),u_brightness_high:o.paint.get("raster-brightness-max"),u_saturation_factor:(s=o.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(a=o.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:Qr(o.paint.get("raster-hue-rotate")),u_perspective_transform:i};var a,s};function Qr(e){e*=Math.PI/180;const t=Math.sin(e),r=Math.cos(e);return[(2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3]}const en=e.create(),tn=(t,r,n,o,i,a,s,l,c,u,d,h,p,f,m,g)=>{const y=i.transform,v={u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:y.cameraToCenterDistance,u_rotate_symbol:+n,u_aspect_ratio:y.width/y.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:s,u_coord_matrix:l,u_is_text:+c,u_pitch_with_map:+o,u_texsize:u,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:en,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:en,u_up_vector:[0,-1,0]};return"globe"===g.name&&(v.u_tile_id=[d.canonical.x,d.canonical.y,1<<d.canonical.z],v.u_zoom_transition=h,v.u_inv_rot_matrix=f,v.u_merc_center=p,v.u_camera_forward=y._camera.forward(),v.u_ecef_origin=e.globeECEFOrigin(y.globeMatrix,d.toUnwrapped()),v.u_tile_matrix=Float32Array.from(y.globeMatrix),v.u_up_vector=m),v},rn=(t,r,n,o,i,a,s,l,c,u,d,h,p,f,m,g,y)=>e.extend(tn(t,r,n,o,i,a,s,l,c,u,h,p,f,m,g,y),{u_gamma_scale:o?i.transform.cameraToCenterDistance*Math.cos(i.terrain?0:i.transform._pitch):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+d}),nn=(t,r,n,o,i,a,s,l,c,u,d,h,p,f,m,g)=>e.extend(rn(t,r,n,o,i,a,s,l,!0,c,!0,d,h,p,f,m,g),{u_texsize_icon:u,u_texture_icon:1}),on=(e,t,r)=>({u_matrix:e,u_opacity:t,u_color:r}),an=(t,r,n,o,i)=>e.extend(function(e,t,r){const n=t.imageManager.getPattern(e.toString()),{width:o,height:i}=t.imageManager.getPixelSize(),a=Math.pow(2,r.tileID.overscaledZ),s=r.tileSize*Math.pow(2,t.transform.tileZoom)/a,l=s*(r.tileID.canonical.x+r.tileID.wrap*a),c=s*r.tileID.canonical.y;return{u_image:0,u_pattern_tl:n.tl,u_pattern_br:n.br,u_texsize:[o,i],u_pattern_size:n.displaySize,u_tile_units_to_pixels:1/P(r,1,t.transform.tileZoom),u_pixel_coord_upper:[l>>16,c>>16],u_pixel_coord_lower:[65535&l,65535&c]}}(o,n,i),{u_matrix:t,u_opacity:r}),sn={fillExtrusion:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t)}),fillExtrusionPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_height_factor:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t)}),fill:t=>({u_matrix:new e.UniformMatrix4f(t)}),fillPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),fillOutline:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t)}),fillOutlinePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),circle:t=>({u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),collisionBox:t=>({u_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.Uniform2f(t)}),collisionCircle:t=>({u_matrix:new e.UniformMatrix4f(t),u_inv_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_viewport_size:new e.Uniform2f(t)}),debug:t=>({u_color:new e.UniformColor(t),u_matrix:new e.UniformMatrix4f(t),u_overlay:new e.Uniform1i(t),u_overlay_scale:new e.Uniform1f(t)}),clippingMask:t=>({u_matrix:new e.UniformMatrix4f(t)}),heatmap:t=>({u_extrude_scale:new e.Uniform1f(t),u_intensity:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),heatmapTexture:t=>({u_image:new e.Uniform1i(t),u_color_ramp:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t)}),hillshade:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_latrange:new e.Uniform2f(t),u_light:new e.Uniform2f(t),u_shadow:new e.UniformColor(t),u_highlight:new e.UniformColor(t),u_accent:new e.UniformColor(t)}),hillshadePrepare:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_dimension:new e.Uniform2f(t),u_zoom:new e.Uniform1f(t),u_unpack:new e.Uniform4f(t)}),line:t=>({u_matrix:new e.UniformMatrix4f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_units_to_pixels:new e.Uniform2f(t),u_dash_image:new e.Uniform1i(t),u_gradient_image:new e.Uniform1i(t),u_image_height:new e.Uniform1f(t),u_texsize:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t),u_trim_offset:new e.Uniform2f(t)}),linePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_texsize:new e.Uniform2f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_units_to_pixels:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t)}),raster:t=>({u_matrix:new e.UniformMatrix4f(t),u_tl_parent:new e.Uniform2f(t),u_scale_parent:new e.Uniform1f(t),u_fade_t:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_image0:new e.Uniform1i(t),u_image1:new e.Uniform1i(t),u_brightness_low:new e.Uniform1f(t),u_brightness_high:new e.Uniform1f(t),u_saturation_factor:new e.Uniform1f(t),u_contrast_factor:new e.Uniform1f(t),u_spin_weights:new e.Uniform3f(t),u_perspective_transform:new e.Uniform2f(t)}),symbolIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_texture:new e.Uniform1i(t)}),symbolSDF:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_is_halo:new e.Uniform1i(t)}),symbolTextAndIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texsize_icon:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_texture_icon:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_is_halo:new e.Uniform1i(t)}),background:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_color:new e.UniformColor(t)}),backgroundPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_pattern_tl:new e.Uniform2f(t),u_pattern_br:new e.Uniform2f(t),u_texsize:new e.Uniform2f(t),u_pattern_size:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),terrainRaster:yr,terrainDepth:yr,skybox:t=>({u_matrix:new e.UniformMatrix4f(t),u_sun_direction:new e.Uniform3f(t),u_cubemap:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxGradient:t=>({u_matrix:new e.UniformMatrix4f(t),u_color_ramp:new e.Uniform1i(t),u_center_direction:new e.Uniform3f(t),u_radius:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxCapture:t=>({u_matrix_3f:new e.UniformMatrix3f(t),u_sun_direction:new e.Uniform3f(t),u_sun_intensity:new e.Uniform1f(t),u_color_tint_r:new e.Uniform4f(t),u_color_tint_m:new e.Uniform4f(t),u_luminance:new e.Uniform1f(t)}),globeRaster:t=>({u_proj_matrix:new e.UniformMatrix4f(t),u_globe_matrix:new e.UniformMatrix4f(t),u_normalize_matrix:new e.UniformMatrix4f(t),u_merc_matrix:new e.UniformMatrix4f(t),u_zoom_transition:new e.Uniform1f(t),u_merc_center:new e.Uniform2f(t),u_image0:new e.Uniform1i(t),u_grid_matrix:new e.UniformMatrix3f(t),u_skirt_height:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_viewport:new e.Uniform2f(t)}),globeAtmosphere:t=>({u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_horizon:new e.Uniform1f(t),u_transition:new e.Uniform1f(t),u_fadeout_range:new e.Uniform1f(t),u_color:new e.Uniform4f(t),u_high_color:new e.Uniform4f(t),u_space_color:new e.Uniform4f(t),u_star_intensity:new e.Uniform1f(t),u_star_density:new e.Uniform1f(t),u_star_size:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t),u_horizon_angle:new e.Uniform1f(t),u_rotation_matrix:new e.UniformMatrix4f(t)})};let ln;function cn(t,r,n,o,i,a,s){const l=t.context,c=l.gl,u=t.transform,d=t.useProgram("collisionBox"),h=[];let p=0,f=0;for(let _=0;_<o.length;_++){const m=o[_],g=r.getTile(m),y=g.getBucket(n);if(!y)continue;const v=vt(m,y,u);let b=v;0===i[0]&&0===i[1]||(b=t.translatePosMatrix(v,g,i,a));const x=s?y.textCollisionBox:y.iconCollisionBox,w=y.collisionCircleArray;if(w.length>0){const t=e.create(),r=b;e.mul(t,y.placementInvProjMatrix,u.glCoordMatrix),e.mul(t,t,y.placementViewportMatrix),h.push({circleArray:w,circleOffset:f,transform:r,invTransform:t,projection:y.getProjection()}),p+=w.length/4,f=p}x&&(t.terrain&&t.terrain.setupElevationDraw(g,d),d.draw(l,c.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,Wr(b,u,g,y.getProjection()),n.id,x.layoutVertexBuffer,x.indexBuffer,x.segments,null,u.zoom,null,[x.collisionVertexBuffer,x.collisionVertexBufferExt]))}if(!s||!h.length)return;const m=t.useProgram("collisionCircle"),g=new e.StructArrayLayout2f1f2i16;g.resize(4*p),g._trim();let y=0;for(const e of h)for(let t=0;t<e.circleArray.length/4;t++){const r=4*t,n=e.circleArray[r+0],o=e.circleArray[r+1],i=e.circleArray[r+2],a=e.circleArray[r+3];g.emplace(y++,n,o,i,a,0),g.emplace(y++,n,o,i,a,1),g.emplace(y++,n,o,i,a,2),g.emplace(y++,n,o,i,a,3)}(!ln||ln.length<2*p)&&(ln=function(t){const r=2*t,n=new e.StructArrayLayout3ui6;n.resize(r),n._trim();for(let e=0;e<r;e++){const t=6*e;n.uint16[t+0]=4*e+0,n.uint16[t+1]=4*e+1,n.uint16[t+2]=4*e+2,n.uint16[t+3]=4*e+2,n.uint16[t+4]=4*e+3,n.uint16[t+5]=4*e+0}return n}(p));const v=l.createIndexBuffer(ln,!0),b=l.createVertexBuffer(g,e.collisionCircleLayout.members,!0);for(const _ of h){const r={u_matrix:_.transform,u_inv_matrix:_.invTransform,u_camera_to_center_distance:(x=u).getCameraToCenterDistance(_.projection),u_viewport_size:[x.width,x.height]};m.draw(l,c.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,r,n.id,b,v,e.SegmentVector.simpleSegment(0,2*_.circleOffset,_.circleArray.length,_.circleArray.length/2),null,u.zoom)}var x;b.destroy(),v.destroy()}const un=e.create();function dn(t,r){let{width:n,height:o,anchor:i,textOffset:a,textScale:s}=t;const{horizontalAlign:l,verticalAlign:c}=e.getAnchorAlignment(i),u=-(l-.5)*n,d=-(c-.5)*o,h=e.evaluateVariableOffset(i,a);return new e.Point((u/s+h[0])*r,(d/s+h[1])*r)}function hn(t,r,n,o,i,a,s,l,c,u,d){const h=t.text.placedSymbolArray,p=t.text.dynamicLayoutVertexArray,f=t.icon.dynamicLayoutVertexArray,m={},g=t.getProjection(),y=bt(l,g,a),v=a.elevation,b=g.upVectorScale(l.canonical,a.center.lat,a.worldSize).metersToTile;p.clear();for(let x=0;x<h.length;x++){const f=h.get(x),{tileAnchorX:_,tileAnchorY:w,numGlyphs:S}=f,k=f.hidden||!f.crossTileID||t.allowVerticalPlacement&&!f.placedOrientation?null:o[f.crossTileID];if(k){let o=0,h=0,x=0;if(v){const e=v?v.getAtTileOffset(l,_,w):0,[t,r,n]=g.upVector(l.canonical,_,w);o=e*t*b,h=e*r*b,x=e*n*b}let[T,E,C,A]=nt(f.projectedAnchorX+o,f.projectedAnchorY+h,f.projectedAnchorZ+x,n?y:s);const j=ot(a.getCameraToCenterDistance(g),A);let P=i.evaluateSizeForFeature(t.textSizeData,u,f)*j/e.ONE_EM;n&&(P*=t.tilePixelRatio/c);const I=dn(k,P);n?(({x:T,y:E,z:C}=g.projectTilePoint(_+I.x,w+I.y,l.canonical)),[T,E,C]=nt(T+o,E+h,C+x,s)):(r&&I._rotate(-a.angle),T+=I.x,E+=I.y,C=0);const O=t.allowVerticalPlacement&&f.placedOrientation===e.WritingMode.vertical?Math.PI/2:0;for(let t=0;t<S;t++)e.addDynamicAttributes(p,T,E,C,O);d&&f.associatedIconIndex>=0&&(m[f.associatedIconIndex]={x:T,y:E,z:C,angle:O})}else pt(S,p)}if(d){f.clear();const r=t.icon.placedSymbolArray;for(let t=0;t<r.length;t++){const n=r.get(t),{numGlyphs:o}=n,i=m[t];if(n.hidden||!i)pt(o,f);else{const{x:t,y:r,z:n,angle:a}=i;for(let i=0;i<o;i++)e.addDynamicAttributes(f,t,r,n,a)}}t.icon.dynamicLayoutVertexBuffer.updateData(f)}t.text.dynamicLayoutVertexBuffer.updateData(p)}function pn(e,t,r){return r.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function fn(t,r,n,o,i,a,s,l,c,u,d,h){const p=t.context,f=p.gl,m=t.transform,g="map"===l,y="map"===c,v=g&&"point"!==n.layout.get("symbol-placement"),b=g&&!y&&!v,x=void 0!==n.layout.get("symbol-sort-key").constantOr(1);let _=!1;const w=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),S=[e.mercatorXfromLng(m.center.lng),e.mercatorYfromLat(m.center.lat)],k=n.layout.get("text-variable-anchor"),T="globe"===m.projection.name,E=[],C=[0,-1,0];let A=C;!T&&!m.mercatorFromTransition||g||(A=function(t){const r=t._camera.getWorldToCamera(t.worldSize,1),n=e.multiply([],r,t.globeMatrix);e.invert(n,n);const o=[0,0,0],i=[0,1,0,0];return e.transformMat4$1(i,i,n),o[0]=i[0],o[1]=i[1],o[2]=i[2],e.normalize(o,o),o}(m));for(const j of o){const o=r.getTile(j),l=o.getBucket(n);if(!l)continue;if("mercator"===l.projection.name&&T)continue;const c=i?l.text:l.icon;if(!c||l.fullyClipped||!c.segments.get().length)continue;const d=c.programConfigurations.get(n.id),h=i||l.sdfIcons,p=i?l.textSizeData:l.iconSizeData,w=y||0!==m.pitch,P=e.evaluateSizeForZoom(p,m.zoom);let I,O,M,R,L=[0,0],F=null;if(i)O=o.glyphAtlasTexture,M=f.LINEAR,I=o.glyphAtlasTexture.size,l.iconsInText&&(L=o.imageAtlasTexture.size,F=o.imageAtlasTexture,R=w||t.options.rotating||t.options.zooming||"composite"===p.kind||"camera"===p.kind?f.LINEAR:f.NEAREST);else{const e=1!==n.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;O=o.imageAtlasTexture,M=h||t.options.rotating||t.options.zooming||e||w?f.LINEAR:f.NEAREST,I=o.imageAtlasTexture.size}const z="globe"===l.projection.name,D=z?A:C,N=z?e.globeToMercatorTransition(m.zoom):0,B=bt(j,l.getProjection(),m),U=m.calculatePixelsToTileUnitsMatrix(o),V=et(B,o.tileID.canonical,y,g,m,l.getProjection(),U),W=t.terrain&&y&&v?e.invert(e.create(),V):un,q=rt(B,o.tileID.canonical,y,g,m,l.getProjection(),U),H=k&&l.hasTextData(),G="none"!==n.layout.get("icon-text-fit")&&H&&l.hasIconData();if(v){const e=m.elevation,r=e?e.getAtTileOffsetFunc(j,m.center.lat,m.worldSize,l.getProjection()):null,n=tt(B,o.tileID.canonical,y,g,m,l.getProjection(),U);at(l,B,t,i,n,q,y,u,r,j)}const K=v||i&&k||G,X=t.translatePosMatrix(B,o,a,s),Z=K?un:V,Y=t.translatePosMatrix(q,o,a,s,!0),J=l.getProjection().createInversionMatrix(m,j.canonical),$=[];t.terrainRenderModeElevated()&&y&&$.push("PITCH_WITH_MAP_TERRAIN"),z&&$.push("PROJECTION_GLOBE_VIEW"),K&&$.push("PROJECTED_POS_ON_VIEWPORT");const Q=h&&0!==n.paint.get(i?"text-halo-width":"icon-halo-width").constantOr(1);let ee;ee=h?l.iconsInText?nn(p.kind,P,b,y,t,X,Z,Y,I,L,j,N,S,J,D,l.getProjection()):rn(p.kind,P,b,y,t,X,Z,Y,i,I,!0,j,N,S,J,D,l.getProjection()):tn(p.kind,P,b,y,t,X,Z,Y,i,I,j,N,S,J,D,l.getProjection());const te={program:t.useProgram(pn(h,i,l),d,$),buffers:c,uniformValues:ee,atlasTexture:O,atlasTextureIcon:F,atlasInterpolation:M,atlasInterpolationIcon:R,isSDF:h,hasHalo:Q,tile:o,labelPlaneMatrixInv:W};if(x&&l.canOverlap){_=!0;const t=c.segments.get();for(const r of t)E.push({segments:new e.SegmentVector([r]),sortKey:r.sortKey,state:te})}else E.push({segments:c.segments,sortKey:0,state:te})}_&&E.sort(((e,t)=>e.sortKey-t.sortKey));for(const e of E){const r=e.state;if(t.terrain&&t.terrain.setupElevationDraw(r.tile,r.program,{useDepthForOcclusion:!T,labelPlaneMatrixInv:r.labelPlaneMatrixInv}),p.activeTexture.set(f.TEXTURE0),r.atlasTexture.bind(r.atlasInterpolation,f.CLAMP_TO_EDGE),r.atlasTextureIcon&&(p.activeTexture.set(f.TEXTURE1),r.atlasTextureIcon&&r.atlasTextureIcon.bind(r.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),r.isSDF){const o=r.uniformValues;r.hasHalo&&(o.u_is_halo=1,mn(r.buffers,e.segments,n,t,r.program,w,d,h,o)),o.u_is_halo=0}mn(r.buffers,e.segments,n,t,r.program,w,d,h,r.uniformValues)}}function mn(t,r,n,o,i,a,s,l,c){const u=o.context,d=[t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer,t.globeExtVertexBuffer];i.draw(u,u.gl.TRIANGLES,a,s,l,e.CullFaceMode.disabled,c,n.id,t.layoutVertexBuffer,t.indexBuffer,r,n.paint,o.transform.zoom,t.programConfigurations.get(n.id),d)}function gn(t,r,n,o,i,a,s){const l=t.context.gl,c=n.paint.get("fill-pattern"),u=c&&c.constantOr(1);let d,h,p,f,m;s?(h=u&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=l.LINES):(h=u?"fillPattern":"fill",d=l.TRIANGLES);for(const g of o){const o=r.getTile(g);if(u&&!o.patternsLoaded())continue;const y=o.getBucket(n);if(!y)continue;t.prepareDrawTile();const v=y.programConfigurations.get(n.id),b=t.useProgram(h,v);u&&(t.context.activeTexture.set(l.TEXTURE0),o.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePaintBuffers());const x=c.constantOr(null);if(x&&o.imageAtlas){const e=o.imageAtlas.patternPositions[x.toString()];e&&v.setConstantPatternPositions(e)}const _=t.translatePosMatrix(g.projMatrix,o,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(s){f=y.indexBuffer2,m=y.segments2;const e=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];p="fillOutlinePattern"===h&&u?Nr(_,t,o,e):Dr(_,e)}else f=y.indexBuffer,m=y.segments,p=u?zr(_,t,o):Fr(_);t.prepareDrawProgram(t.context,b,g.toUnwrapped()),b.draw(t.context,d,i,t.stencilModeForClipping(g),a,e.CullFaceMode.disabled,p,n.id,y.layoutVertexBuffer,f,m,n.paint,t.transform.zoom,v)}}function yn(t,r,n,o,i,a,s){const l=t.context,c=l.gl,u=t.transform,d=n.paint.get("fill-extrusion-pattern"),h=d.constantOr(1),p=n.paint.get("fill-extrusion-opacity"),f=[n.paint.get("fill-extrusion-ambient-occlusion-intensity"),n.paint.get("fill-extrusion-ambient-occlusion-radius")],m=n.layout.get("fill-extrusion-edge-radius"),g=m>0&&!n.paint.get("fill-extrusion-rounded-roof"),y=g?0:m,v="globe"===u.projection.name?e.fillExtrusionHeightLift():0,b="globe"===u.projection.name,x=b?e.globeToMercatorTransition(u.zoom):0,_=[e.mercatorXfromLng(u.center.lng),e.mercatorYfromLat(u.center.lat)],w=[];b&&w.push("PROJECTION_GLOBE_VIEW"),f[0]>0&&w.push("FAUX_AO"),g&&w.push("ZERO_ROOF_RADIUS");for(const S of o){const o=r.getTile(S),m=o.getBucket(n);if(!m||m.projection.name!==u.projection.name)continue;const g=m.programConfigurations.get(n.id),k=t.useProgram(h?"fillExtrusionPattern":"fillExtrusion",g,w);if(t.terrain){const e=t.terrain;if(t.style.terrainSetForDrapingOnly())e.setupElevationDraw(o,k,{useMeterToDem:!0});else{if(!m.enableTerrain)continue;if(e.setupElevationDraw(o,k,{useMeterToDem:!0}),vn(l,r,S,m,n,e),!m.centroidVertexBuffer){const e=k.attributes.a_centroid_pos;void 0!==e&&c.vertexAttrib2f(e,0,0)}}}h&&(t.context.activeTexture.set(c.TEXTURE0),o.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),g.updatePaintBuffers());const T=d.constantOr(null);if(T&&o.imageAtlas){const e=o.imageAtlas.patternPositions[T.toString()];e&&g.setConstantPatternPositions(e)}const E=t.translatePosMatrix(S.projMatrix,o,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),C=u.projection.createInversionMatrix(u,S.canonical),A=n.paint.get("fill-extrusion-vertical-gradient"),j=h?Lr(E,t,A,p,f,y,S,o,v,x,_,C):Rr(E,t,A,p,f,y,S,v,x,_,C);t.prepareDrawProgram(l,k,S.toUnwrapped());const P=[];t.terrain&&P.push(m.centroidVertexBuffer),b&&P.push(m.layoutVertexExtBuffer),k.draw(l,l.gl.TRIANGLES,i,a,s,e.CullFaceMode.backCCW,j,n.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,n.paint,t.transform.zoom,g,P)}}function vn(t,r,n,o,i,a){const s=[t=>{let r=t.canonical.x-1,n=t.wrap;return r<0&&(r=(1<<t.canonical.z)-1,n--),new e.OverscaledTileID(t.overscaledZ,n,t.canonical.z,r,t.canonical.y)},t=>{let r=t.canonical.x+1,n=t.wrap;return r===1<<t.canonical.z&&(r=0,n++),new e.OverscaledTileID(t.overscaledZ,n,t.canonical.z,r,t.canonical.y)},t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1),t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)],l=e=>{const t=r.getSource().minzoom,n=e=>{const t=r.getTileByID(e);if(t&&t.hasData())return t.getBucket(i)},o=[0,-1,1];for(const r of o){if(e.overscaledZ+r<t)continue;const o=n(e.calculateScaledKey(e.overscaledZ+r));if(o)return o}},c=[0,0,0],u=(t,r)=>(c[0]=Math.min(t.min.y,r.min.y),c[1]=Math.max(t.max.y,r.max.y),c[2]=e.EXTENT-r.min.x>t.max.x?r.min.x-e.EXTENT:t.max.x,c),d=(t,r)=>(c[0]=Math.min(t.min.x,r.min.x),c[1]=Math.max(t.max.x,r.max.x),c[2]=e.EXTENT-r.min.y>t.max.y?r.min.y-e.EXTENT:t.max.y,c),h=[(e,t)=>u(e,t),(e,t)=>u(t,e),(e,t)=>d(e,t),(e,t)=>d(t,e)],p=new e.Point(0,0);let f,m,g;const y=(t,r,o,i,s)=>{const l=[[i?o:t,i?t:o,0],[i?o:r,i?r:o,0]],c=s<0?e.EXTENT+s:s,u=[i?c:(t+r)/2,i?(t+r)/2:c,0];return 0===o&&s<0||0!==o&&s>0?a.getForTilePoints(g,[u],!0,m):l.push(u),a.getForTilePoints(n,l,!0,f),Math.max(l[0][2],l[1][2],u[2])/a.exaggeration()};for(let v=0;v<4;v++){const t=(v<2?1:5)-v,r=o.borders[v];if(0===r.length)continue;const i=g=s[v](n),c=l(i);if(!(c&&c instanceof e.FillExtrusionBucket&&c.enableTerrain))continue;if(o.borderDoneWithNeighborZ[v]===c.canonical.z&&c.borderDoneWithNeighborZ[t]===o.canonical.z)continue;if(m=a.findDEMTileFor(i),!m||!m.dem)continue;if(!f){const e=a.findDEMTileFor(n);if(!e||!e.dem)return;f=e}const u=c.borders[t];let d=0;const b=c.borderDoneWithNeighborZ[t]!==o.canonical.z;if(o.canonical.z===c.canonical.z){for(let n=0;n<r.length;n++){const i=o.featuresOnBorder[r[n]],a=i.borders[v];let s;for(;d<u.length&&(s=c.featuresOnBorder[u[d]],!(s.borders[t][1]>a[0]+3));)b&&c.encodeCentroid(void 0,s,!1),d++;if(s&&d<u.length){const r=d;let n=0;for(;!(s.borders[t][0]>a[1]-3)&&(n++,++d!==u.length);)s=c.featuresOnBorder[u[d]];if(s=c.featuresOnBorder[u[r]],i.intersectsCount()>1||s.intersectsCount()>1||1!==n){1!==n&&(d=r),o.encodeCentroid(void 0,i,!1),b&&c.encodeCentroid(void 0,s,!1);continue}const l=h[v](i,s),f=v%2?e.EXTENT-1:0;p.x=y(l[0],Math.min(e.EXTENT-1,l[1]),f,v<2,l[2]),p.y=0,o.encodeCentroid(p,i,!1),b&&c.encodeCentroid(p,s,!1)}else o.encodeCentroid(void 0,i,!1)}o.borderDoneWithNeighborZ[v]=c.canonical.z,o.needsCentroidUpdate=!0,b&&(c.borderDoneWithNeighborZ[t]=o.canonical.z,c.needsCentroidUpdate=!0)}else{for(const e of r)o.encodeCentroid(void 0,o.featuresOnBorder[e],!1);if(b){for(const e of u)c.encodeCentroid(void 0,c.featuresOnBorder[e],!1);c.borderDoneWithNeighborZ[t]=o.canonical.z,c.needsCentroidUpdate=!0}o.borderDoneWithNeighborZ[v]=c.canonical.z,o.needsCentroidUpdate=!0}}(o.needsCentroidUpdate||!o.centroidVertexBuffer&&0!==o.centroidVertexArray.length)&&o.uploadCentroid(t)}const bn=new e.Color(1,0,0,1),xn=new e.Color(0,1,0,1),_n=new e.Color(0,0,1,1),wn=new e.Color(1,0,1,1),Sn=new e.Color(0,1,1,1);function kn(t,r,n){const o=t.context,i=t.transform,a=o.gl,s="globe"===i.projection.name,l=s?["PROJECTION_GLOBE_VIEW"]:null;let c=n.projMatrix;if(s&&e.globeToMercatorTransition(i.zoom)>0){const t=e.transitionTileAABBinECEF(n.canonical,i),r=e.globeDenormalizeECEF(t);c=e.multiply(new Float32Array(16),i.globeMatrix,r),e.multiply(c,i.projMatrix,c)}const u=t.useProgram("debug",null,l),d=r.getTileByID(n.key);t.terrain&&t.terrain.setupElevationDraw(d,u);const h=e.DepthMode.disabled,p=e.StencilMode.disabled,f=t.colorModeForRenderPass(),m="$debug";o.activeTexture.set(a.TEXTURE0),t.emptyTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),s?d._makeGlobeTileDebugBuffers(t.context,i):d._makeDebugTileBoundsBuffers(t.context,i.projection);const g=d._tileDebugBuffer||t.debugBuffer,y=d._tileDebugIndexBuffer||t.debugIndexBuffer,v=d._tileDebugSegments||t.debugSegments;u.draw(o,a.LINE_STRIP,h,p,f,e.CullFaceMode.disabled,qr(c,e.Color.red),m,g,y,v,null,null,null,[d._globeTileDebugBorderBuffer]);const b=d.latestRawTileData,x=Math.floor((b&&b.byteLength||0)/1024),_=r.getTile(n).tileSize,w=512/Math.min(_,512)*(n.overscaledZ/i.zoom)*.5;let S=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(S+=" => ".concat(n.overscaledZ)),S+=" ".concat(x,"kb"),function(e,t){e.initDebugOverlayCanvas();const r=e.debugOverlayCanvas,n=e.context.gl,o=e.debugOverlayCanvas.getContext("2d");o.clearRect(0,0,r.width,r.height),o.shadowColor="white",o.shadowBlur=2,o.lineWidth=1.5,o.strokeStyle="white",o.textBaseline="top",o.font="bold 36px Open Sans, sans-serif",o.fillText(t,5,5),o.strokeText(t,5,5),e.debugOverlayTexture.update(r),e.debugOverlayTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}(t,S);const k=d._tileDebugTextBuffer||t.debugBuffer,T=d._tileDebugTextIndexBuffer||t.quadTriangleIndexBuffer,E=d._tileDebugTextSegments||t.debugSegments;u.draw(o,a.TRIANGLES,h,p,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,qr(c,e.Color.transparent,w),m,k,T,E,null,null,null,[d._globeTileDebugTextBuffer])}function Tn(e,t,r,n){Cn(e,0,t+r/2,e.transform.width,r,n)}function En(e,t,r,n){Cn(e,t-r/2,0,r,e.transform.height,n)}function Cn(t,r,n,o,i,a){const s=t.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(r*e.exported.devicePixelRatio,n*e.exported.devicePixelRatio,o*e.exported.devicePixelRatio,i*e.exported.devicePixelRatio),s.clear({color:a}),l.disable(l.SCISSOR_TEST)}const An=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:jn}=An;function Pn(e,t,r,n){e.emplaceBack(t,r,n)}class In{constructor(t){this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,Pn(this.vertexArray,-1,-1,1),Pn(this.vertexArray,1,-1,1),Pn(this.vertexArray,-1,1,1),Pn(this.vertexArray,1,1,1),Pn(this.vertexArray,-1,-1,-1),Pn(this.vertexArray,1,-1,-1),Pn(this.vertexArray,-1,1,-1),Pn(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,jn),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}}function On(t,r,n,o,i,a){const s=t.gl,l=r.paint.get("sky-atmosphere-color"),c=r.paint.get("sky-atmosphere-halo-color"),u=r.paint.get("sky-atmosphere-sun-intensity"),d=((e,t,r,n,o)=>({u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:r,u_color_tint_r:[n.r,n.g,n.b,n.a],u_color_tint_m:[o.r,o.g,o.b,o.a],u_luminance:5e-5}))(e.fromMat4(e.create$1(),o),i,u,l,c);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+a,r.skyboxTexture,0),n.draw(t,s.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,d,"skyboxCapture",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}const Mn=e.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Rn{constructor(t){const r=new e.StructArrayLayout5f20;r.emplaceBack(-1,1,1,0,0),r.emplaceBack(1,1,1,1,0),r.emplaceBack(1,-1,1,1,1),r.emplaceBack(-1,-1,1,0,1);const n=new e.StructArrayLayout3ui6;n.emplaceBack(0,1,2),n.emplaceBack(2,3,0),this.vertexBuffer=t.createVertexBuffer(r,Mn.members),this.indexBuffer=t.createIndexBuffer(n),this.segments=e.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Ln={symbol:function(t,r,n,o,i){if("translucent"!==t.renderPass)return;const a=e.StencilMode.disabled,s=t.colorModeForRenderPass();n.layout.get("text-variable-anchor")&&function(t,r,n,o,i,a,s){const l=r.transform,c="map"===i,u="map"===a;for(const d of t){const t=o.getTile(d),r=t.getBucket(n);if(!r||!r.text||!r.text.segments.get().length)continue;const i=e.evaluateSizeForZoom(r.textSizeData,l.zoom),a=bt(d,r.getProjection(),l),h=l.calculatePixelsToTileUnitsMatrix(t),p=et(a,t.tileID.canonical,u,c,l,r.getProjection(),h),f="none"!==n.layout.get("icon-text-fit")&&r.hasIconData();if(i){const n=Math.pow(2,l.zoom-t.tileID.overscaledZ);hn(r,c,u,s,e.symbolSize,l,p,d,n,i,f)}}}(o,t,n,r,n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),i),0!==n.paint.get("icon-opacity").constantOr(1)&&fn(t,r,n,o,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),a,s),0!==n.paint.get("text-opacity").constantOr(1)&&fn(t,r,n,o,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),a,s),r.map.showCollisionBoxes&&(cn(t,r,n,o,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),!0),cn(t,r,n,o,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),!1))},circle:function(t,r,n,o){if("translucent"!==t.renderPass)return;const i=n.paint.get("circle-opacity"),a=n.paint.get("circle-stroke-width"),s=n.paint.get("circle-stroke-opacity"),l=void 0!==n.layout.get("circle-sort-key").constantOr(1);if(0===i.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const c=t.context,u=c.gl,d=t.transform,h=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),p=e.StencilMode.disabled,f=t.colorModeForRenderPass(),m="globe"===d.projection.name,g=[e.mercatorXfromLng(d.center.lng),e.mercatorYfromLat(d.center.lat)],y=[];for(let b=0;b<o.length;b++){const i=o[b],a=r.getTile(i),s=a.getBucket(n);if(!s||s.projection.name!==d.projection.name)continue;const c=s.programConfigurations.get(n.id),u=Vr(n);m&&u.push("PROJECTION_GLOBE_VIEW");const h=t.useProgram("circle",c,u),p=s.layoutVertexBuffer,f=s.globeExtVertexBuffer,v=s.indexBuffer,x=d.projection.createInversionMatrix(d,i.canonical),_={programConfiguration:c,program:h,layoutVertexBuffer:p,globeExtVertexBuffer:f,indexBuffer:v,uniformValues:Ur(t,i,a,x,g,n),tile:a};if(l){const t=s.segments.get();for(const r of t)y.push({segments:new e.SegmentVector([r]),sortKey:r.sortKey,state:_})}else y.push({segments:s.segments,sortKey:0,state:_})}l&&y.sort(((e,t)=>e.sortKey-t.sortKey));const v={useDepthForOcclusion:!m};for(const b of y){const{programConfiguration:r,program:o,layoutVertexBuffer:i,globeExtVertexBuffer:a,indexBuffer:s,uniformValues:l,tile:m}=b.state,g=b.segments;t.terrain&&t.terrain.setupElevationDraw(m,o,v),t.prepareDrawProgram(c,o,m.tileID.toUnwrapped()),o.draw(c,u.TRIANGLES,h,p,f,e.CullFaceMode.disabled,l,n.id,i,s,g,n.paint,d.zoom,r,[a])}},heatmap:function(t,r,n,o){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){const i=t.context,a=i.gl,s=e.StencilMode.disabled,l=new e.ColorMode([a.ONE,a.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,r,n){const o=e.gl,i=t.width*n,a=t.height*n;e.activeTexture.set(o.TEXTURE1),e.viewport.set([0,0,i,a]);let s=r.heatmapFbo;if(!s||s&&(s.width!==i||s.height!==a)){s&&s.destroy();const t=o.createTexture();o.bindTexture(o.TEXTURE_2D,t),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),s=r.heatmapFbo=e.createFramebuffer(i,a,!1),function(e,t,r,n,o,i){const a=e.gl;a.texImage2D(a.TEXTURE_2D,0,e.isWebGL2&&e.extRenderToTextureHalfFloat?a.RGBA16F:a.RGBA,o,i,0,a.RGBA,e.extRenderToTextureHalfFloat?e.isWebGL2?a.HALF_FLOAT:e.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE,null),n.colorAttachment.set(r)}(e,0,t,s,i,a)}else o.bindTexture(o.TEXTURE_2D,s.colorAttachment.get()),e.bindFramebuffer.set(s.framebuffer)}(i,t,n,"globe"===t.transform.projection.name?.5:.25),i.clear({color:e.Color.transparent});const c=t.transform,u="globe"===c.projection.name,d=u?["PROJECTION_GLOBE_VIEW"]:null,h=u?e.CullFaceMode.frontCCW:e.CullFaceMode.disabled,p=[e.mercatorXfromLng(c.center.lng),e.mercatorYfromLat(c.center.lat)];for(let f=0;f<o.length;f++){const m=o[f];if(r.hasRenderableParent(m))continue;const g=r.getTile(m),y=g.getBucket(n);if(!y||y.projection.name!==c.projection.name)continue;const v=y.programConfigurations.get(n.id),b=t.useProgram("heatmap",v,d),{zoom:x}=t.transform;t.terrain&&t.terrain.setupElevationDraw(g,b),t.prepareDrawProgram(i,b,m.toUnwrapped());const _=c.projection.createInversionMatrix(c,m.canonical);b.draw(i,a.TRIANGLES,e.DepthMode.disabled,s,l,h,Gr(t,m,g,_,p,x,n.paint.get("heatmap-intensity")),n.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,n.paint,t.transform.zoom,v,u?[y.globeExtVertexBuffer]:null)}i.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,r){const n=t.context,o=n.gl,i=r.heatmapFbo;if(!i)return;n.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,i.colorAttachment.get()),n.activeTexture.set(o.TEXTURE1);let a=r.colorRampTexture;a||(a=r.colorRampTexture=new e.Texture(n,r.colorRamp,o.RGBA)),a.bind(o.LINEAR,o.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(n,o.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,((e,t)=>({u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}))(0,r),r.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,r.paint,t.transform.zoom)}(t,n))},line:function(t,r,n,o){if("translucent"!==t.renderPass)return;const i=n.paint.get("line-opacity"),a=n.paint.get("line-width");if(0===i.constantOr(1)||0===a.constantOr(1))return;const s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),c=t.terrain&&t.terrain.renderingToTexture?1:e.exported.devicePixelRatio,u=n.paint.get("line-dasharray"),d=u.constantOr(1),h=n.layout.get("line-cap"),p=n.paint.get("line-pattern"),f=p.constantOr(1),m=n.paint.get("line-gradient"),g=f?"linePattern":"line",y=t.context,v=y.gl,b=(e=>{const t=[];Jr(e)&&t.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");const r=e.paint.get("line-trim-offset");0===r[0]&&0===r[1]||t.push("RENDER_LINE_TRIM_OFFSET");const n=e.paint.get("line-pattern").constantOr(1),o=1!==e.paint.get("line-opacity").constantOr(1);return!n&&o&&t.push("RENDER_LINE_ALPHA_DISCARD"),t})(n);let x=b.includes("RENDER_LINE_ALPHA_DISCARD");t.terrain&&t.terrain.clipOrMaskOverlapStencilType()&&(x=!1);for(const _ of o){const o=r.getTile(_);if(f&&!o.patternsLoaded())continue;const i=o.getBucket(n);if(!i)continue;t.prepareDrawTile();const a=i.programConfigurations.get(n.id),w=t.useProgram(g,a,b),S=p.constantOr(null);if(S&&o.imageAtlas){const e=o.imageAtlas.patternPositions[S.toString()];e&&a.setConstantPatternPositions(e)}const k=u.constantOr(null),T=h.constantOr(null);if(!f&&k&&T&&o.lineAtlas){const e=o.lineAtlas.getDash(k,T);e&&a.setConstantPatternPositions(e)}let[E,C]=n.paint.get("line-trim-offset");if("round"===T||"square"===T){const e=1;E!==C&&(0===E&&(E-=e),1===C&&(C+=e))}const A=t.terrain?_.projMatrix:null,j=f?Xr(t,o,n,A,c):Kr(t,o,n,A,i.lineClipsArray.length,c,[E,C]);if(m){const o=i.gradients[n.id];let a=o.texture;if(n.gradientVersion!==o.version){let s=256;if(n.stepInterpolant){const n=r.getSource().maxzoom,o=_.canonical.z===n?Math.ceil(1<<t.transform.maxZoom-_.canonical.z):1;s=e.clamp(e.nextPowerOfTwo(i.maxLineLength/e.EXTENT*1024*o),256,y.maxTextureSize)}o.gradient=e.renderColorRamp({expression:n.gradientExpression(),evaluationKey:"lineProgress",resolution:s,image:o.gradient||void 0,clips:i.lineClipsArray}),o.texture?o.texture.update(o.gradient):o.texture=new e.Texture(y,o.gradient,v.RGBA),o.version=n.gradientVersion,a=o.texture}y.activeTexture.set(v.TEXTURE1),a.bind(n.stepInterpolant?v.NEAREST:v.LINEAR,v.CLAMP_TO_EDGE)}d&&(y.activeTexture.set(v.TEXTURE0),o.lineAtlasTexture.bind(v.LINEAR,v.REPEAT),a.updatePaintBuffers()),f&&(y.activeTexture.set(v.TEXTURE0),o.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),a.updatePaintBuffers()),t.prepareDrawProgram(y,w,_.toUnwrapped());const P=r=>{w.draw(y,v.TRIANGLES,s,r,l,e.CullFaceMode.disabled,j,n.id,i.layoutVertexBuffer,i.indexBuffer,i.segments,n.paint,t.transform.zoom,a,[i.layoutVertexBuffer2])};if(x){const r=t.stencilModeForClipping(_).ref;0===r&&t.terrain&&y.clear({stencil:0});const n={func:v.EQUAL,mask:255};j.u_alpha_discard_threshold=.8,P(new e.StencilMode(n,r,255,v.KEEP,v.KEEP,v.INVERT)),j.u_alpha_discard_threshold=0,P(new e.StencilMode(n,r,255,v.KEEP,v.KEEP,v.KEEP))}else P(t.stencilModeForClipping(_))}x&&(t.resetStencilClippingMasks(),t.terrain&&y.clear({stencil:0}))},fill:function(t,r,n,o){const i=n.paint.get("fill-color"),a=n.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=t.colorModeForRenderPass(),l=n.paint.get("fill-pattern"),c=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===i.constantOr(e.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(t.renderPass===c){const i=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);gn(t,r,n,o,i,s,!1)}if("translucent"===t.renderPass&&n.paint.get("fill-antialias")){const i=t.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);gn(t,r,n,o,i,s,!0)}},"fill-extrusion":function(t,r,n,o){const i=n.paint.get("fill-extrusion-opacity");if(0!==i&&"translucent"===t.renderPass){const a=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==i||n.paint.get("fill-extrusion-pattern").constantOr(1))yn(t,r,n,o,a,e.StencilMode.disabled,e.ColorMode.disabled),yn(t,r,n,o,a,t.stencilModeFor3D(),t.colorModeForRenderPass()),t.resetStencilClippingMasks();else{const i=t.colorModeForRenderPass();yn(t,r,n,o,a,e.StencilMode.disabled,i)}}},hillshade:function(t,r,n,o){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const i=t.context,a=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),s=t.colorModeForRenderPass(),l=t.terrain&&t.terrain.renderingToTexture,[c,u]="translucent"!==t.renderPass||l?[{},o]:t.stencilConfigForOverlap(o);for(const d of u){const o=r.getTile(d);if(o.needsHillshadePrepare&&"offscreen"===t.renderPass)gr(t,o,n,a,e.StencilMode.disabled,s);else if("translucent"===t.renderPass){const e=l&&t.terrain?t.terrain.stencilModeForRTTOverlap(d):c[d.overscaledZ];fr(t,d,o,n,a,e,s)}}i.viewport.set([0,0,t.width,t.height]),t.resetStencilClippingMasks()},raster:function(t,r,n,o,i,a){if("translucent"!==t.renderPass)return;if(0===n.paint.get("raster-opacity"))return;if(!o.length)return;const s=t.context,l=s.gl,c=r.getSource(),u=t.useProgram("raster"),d=t.colorModeForRenderPass(),h=t.terrain&&t.terrain.renderingToTexture,[p,f]=c instanceof Ae||h?[{},o]:t.stencilConfigForOverlap(o),m=f[f.length-1].overscaledZ,g=!t.options.moving;for(const y of f){const o=h?e.DepthMode.disabled:t.depthModeForSublayer(y.overscaledZ-m,1===n.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,l.LESS),i=y.toUnwrapped(),f=r.getTile(y);if(h&&(!f||!f.hasData()))continue;const v=h?y.projMatrix:t.transform.calculateProjMatrix(i,g),b=t.terrain&&h?t.terrain.stencilModeForRTTOverlap(y):p[y.overscaledZ],x=a?0:n.paint.get("raster-fade-duration");f.registerFadeDuration(x);const _=r.findLoadedParent(y,0),w=Er(f,_,r,t.transform,x);let S,k;t.terrain&&t.terrain.prepareDrawTile();const T="nearest"===n.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;s.activeTexture.set(l.TEXTURE0),f.texture.bind(T,l.CLAMP_TO_EDGE),s.activeTexture.set(l.TEXTURE1),_?(_.texture.bind(T,l.CLAMP_TO_EDGE),S=Math.pow(2,_.tileID.overscaledZ-f.tileID.overscaledZ),k=[f.tileID.canonical.x*S%1,f.tileID.canonical.y*S%1]):f.texture.bind(T,l.CLAMP_TO_EDGE),f.texture.useMipmap&&s.extTextureFilterAnisotropic&&t.transform.pitch>20&&l.texParameterf(l.TEXTURE_2D,s.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,s.extTextureFilterAnisotropicMax);const E=$r(v,k||[0,0],S||1,w,n,c instanceof Ae?c.perspectiveTransform:[0,0]);if(t.prepareDrawProgram(s,u,i),c instanceof Ae)c.boundsBuffer&&c.boundsSegments&&u.draw(s,l.TRIANGLES,o,e.StencilMode.disabled,d,e.CullFaceMode.disabled,E,n.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments);else{const{tileBoundsBuffer:r,tileBoundsIndexBuffer:i,tileBoundsSegments:a}=t.getTileBoundsBuffers(f);u.draw(s,l.TRIANGLES,o,b,d,e.CullFaceMode.disabled,E,n.id,r,i,a)}}t.resetStencilClippingMasks()},background:function(t,r,n,o){const i=n.paint.get("background-color"),a=n.paint.get("background-opacity");if(0===a)return;const s=t.context,l=s.gl,c=t.transform,u=c.tileSize,d=n.paint.get("background-pattern");if(t.isPatternMissing(d))return;const h=!d&&1===i.a&&1===a&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==h)return;const p=e.StencilMode.disabled,f=t.depthModeForSublayer(0,"opaque"===h?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),m=t.colorModeForRenderPass(),g=t.useProgram(d?"backgroundPattern":"background");let y,v=o;v||(y=t.getBackgroundTiles(),v=Object.values(y).map((e=>e.tileID))),d&&(s.activeTexture.set(l.TEXTURE0),t.imageManager.bind(t.context));for(const b of v){const h=b.toUnwrapped(),v=o?b.projMatrix:t.transform.calculateProjMatrix(h);t.prepareDrawTile();const x=r?r.getTile(b):y?y[b.key]:new e.Tile(b,u,c.zoom,t),_=d?an(v,a,t,d,{tileID:b,tileSize:u}):on(v,a,i);t.prepareDrawProgram(s,g,h);const{tileBoundsBuffer:w,tileBoundsIndexBuffer:S,tileBoundsSegments:k}=t.getTileBoundsBuffers(x);g.draw(s,l.TRIANGLES,f,p,m,e.CullFaceMode.disabled,_,n.id,w,S,k)}},sky:function(t,r,n){const o=t.transform,i="mercator"===o.projection.name||"globe"===o.projection.name?1:e.smoothstep(7,8,o.zoom),a=n.paint.get("sky-opacity")*i;if(0===a)return;const s=t.context,l=n.paint.get("sky-type"),c=new e.DepthMode(s.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),u=t.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===t.renderPass?n.needsSkyboxCapture(t)&&(function(t,r){const n=t.context,o=n.gl;let i=r.skyboxFbo;if(!i){i=r.skyboxFbo=n.createFramebuffer(32,32,!1),r.skyboxGeometry=new In(n),r.skyboxTexture=n.gl.createTexture(),o.bindTexture(o.TEXTURE_CUBE_MAP,r.skyboxTexture),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MAG_FILTER,o.LINEAR);for(let e=0;e<6;++e)o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,o.RGBA,32,32,0,o.RGBA,o.UNSIGNED_BYTE,null)}n.bindFramebuffer.set(i.framebuffer),n.viewport.set([0,0,32,32]);const a=r.getCenter(t,!0),s=t.useProgram("skyboxCapture"),l=new Float64Array(16);e.identity(l),e.rotateY(l,l,.5*-Math.PI),On(n,r,s,l,a,0),e.identity(l),e.rotateY(l,l,.5*Math.PI),On(n,r,s,l,a,1),e.identity(l),e.rotateX(l,l,.5*-Math.PI),On(n,r,s,l,a,2),e.identity(l),e.rotateX(l,l,.5*Math.PI),On(n,r,s,l,a,3),e.identity(l),On(n,r,s,l,a,4),e.identity(l),e.rotateY(l,l,Math.PI),On(n,r,s,l,a,5),n.viewport.set([0,0,t.width,t.height])}(t,n),n.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,r,n,o,i){const a=t.context,s=a.gl,l=t.transform,c=t.useProgram("skybox");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,r.skyboxTexture);const u=((e,t,r,n,o)=>({u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:n,u_temporal_offset:o}))(l.skyboxMatrix,r.getCenter(t,!1),0,o,i);t.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,n,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,u,"skybox",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}(t,n,c,a,u):"gradient"===l&&"sky"===t.renderPass&&function(t,r,n,o,i){const a=t.context,s=a.gl,l=t.transform,c=t.useProgram("skyboxGradient");r.skyboxGeometry||(r.skyboxGeometry=new In(a)),a.activeTexture.set(s.TEXTURE0);let u=r.colorRampTexture;u||(u=r.colorRampTexture=new e.Texture(a,r.colorRamp,s.RGBA)),u.bind(s.LINEAR,s.CLAMP_TO_EDGE);const d=((t,r,n,o,i)=>({u_matrix:t,u_color_ramp:0,u_center_direction:r,u_radius:e.degToRad(n),u_opacity:o,u_temporal_offset:i}))(l.skyboxMatrix,r.getCenter(t,!1),r.paint.get("sky-gradient-radius"),o,i);t.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,n,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,d,"skyboxGradient",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}(t,n,c,a,u)},debug:function(e,t,r){for(let n=0;n<r.length;n++)kn(e,t,r[n])},custom:function(t,r,n,o){const i=t.context,a=n.implementation;if(!t.transform.projection.unsupportedLayers||!t.transform.projection.unsupportedLayers.includes("custom")||t.terrain&&(t.terrain.renderingToTexture||"offscreen"===t.renderPass)&&n.isLayerDraped()){if("offscreen"===t.renderPass){const r=a.prerender;if(r){if(t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),"globe"===t.transform.projection.name){const n=t.transform.pointMerc;r.call(a,i.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[n.x,n.y],t.transform.pixelsPerMeterRatio)}else r.call(a,i.gl,t.transform.customLayerMatrix());i.setDirty(),t.setBaseState()}}else if("translucent"===t.renderPass){if(t.terrain&&t.terrain.renderingToTexture){const r=a.renderToTile;if(r){const n=o[0].canonical,s=new e.MercatorCoordinate(n.x+o[0].wrap*(1<<n.z),n.y,n.z);i.setDepthMode(e.DepthMode.disabled),i.setStencilMode(e.StencilMode.disabled),i.setColorMode(t.colorModeForRenderPass()),t.setCustomLayerDefaults(),r.call(a,i.gl,s),i.setDirty(),t.setBaseState()}return}t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),i.setStencilMode(e.StencilMode.disabled);const r="3d"===a.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);if(i.setDepthMode(r),"globe"===t.transform.projection.name){const r=t.transform.pointMerc;a.render(i.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[r.x,r.y],t.transform.pixelsPerMeterRatio)}else a.render(i.gl,t.transform.customLayerMatrix());i.setDirty(),t.setBaseState(),i.bindFramebuffer.set(null)}}else e.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Fn{constructor(t,r){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.context=new ke(t,n),this.transform=r,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(e,t){const r=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(!(r||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Pr(this,e));const n=this._terrain;this.transform.elevation=r?n:null,n.update(e,this.transform,t)}_updateFog(e){const t=e.fog;if(!t||"globe"===this.transform.projection.name||t.getOpacity(this.transform.pitch)<1||t.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[r,n]=t.getFovAdjustedRange(this.transform._fov);if(r>n)return void(this.transform.fogCullDistSq=null);const o=r+.78*(n-r);this.transform.fogCullDistSq=o*o}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(t,r){if(this.width=t*e.exported.devicePixelRatio,this.height=r*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style.order)this.style._layers[e].resize()}setup(){const t=this.context,r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);const n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(n,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);const o=new e.StructArrayLayout2i4;o.emplaceBack(-1,-1),o.emplaceBack(1,-1),o.emplaceBack(-1,1),o.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(o,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);const i=new e.StructArrayLayout4i8;i.emplaceBack(0,0,0,0),i.emplaceBack(e.EXTENT,0,e.EXTENT,0),i.emplaceBack(0,e.EXTENT,0,e.EXTENT),i.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(i,e.boundsAttributes.members),this.mercatorBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);const a=new e.StructArrayLayout3ui6;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(a);const s=new e.StructArrayLayout1ui2;for(const e of[0,1,3,2,0])s.emplaceBack(e);this.debugIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,new e.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA),this.identityMat=e.create();const l=this.context.gl;this.stencilClearMode=new e.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(e.window.performance.now()),this.atmosphereBuffer=new Rn(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const t=this.context,r=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(t,r.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,Tr(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(t,r,n){if(!r||this.currentStencilSource===r.id||!t.isTileClipped()||!n||0===n.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let e=!1;for(const t of n)if(void 0===this._tileClippingMaskIDs[t.key]){e=!0;break}if(!e)return}this.currentStencilSource=r.id;const o=this.context,i=o.gl;this.nextStencilID+n.length>256&&this.clearStencil(),o.setColorMode(e.ColorMode.disabled),o.setDepthMode(e.DepthMode.disabled);const a=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const s of n){const t=r.getTile(s),n=this._tileClippingMaskIDs[s.key]=this.nextStencilID++,{tileBoundsBuffer:l,tileBoundsIndexBuffer:c,tileBoundsSegments:u}=this.getTileBoundsBuffers(t);a.draw(o,i.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:i.ALWAYS,mask:0},n,255,i.KEEP,i.KEEP,i.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Tr(s.projMatrix),"$clipping",l,c,u)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,r=this.context.gl;return new e.StencilMode({func:r.NOTEQUAL,mask:255},t,255,r.KEEP,r.KEEP,r.REPLACE)}stencilModeForClipping(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);const r=this.context.gl;return new e.StencilMode({func:r.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,r.KEEP,r.KEEP,r.REPLACE)}stencilConfigForOverlap(t){const r=this.context.gl,n=t.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),o=n[n.length-1].overscaledZ,i=n[0].overscaledZ-o+1;if(i>1){this.currentStencilSource=void 0,this.nextStencilID+i>256&&this.clearStencil();const t={};for(let n=0;n<i;n++)t[n+o]=new e.StencilMode({func:r.GEQUAL,mask:255},n+this.nextStencilID,255,r.KEEP,r.KEEP,r.REPLACE);return this.nextStencilID+=i,[t,n]}return[{[o]:e.StencilMode.disabled},n]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const r=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(r,r,r,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}depthModeForSublayer(t,r,n){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;const o=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(n||this.context.gl.LEQUAL,r,[o,o])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,r){this.style=t,this.options=r,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();const n=this.style.order,o=this.style._sourceCaches;for(const e in o){const t=o[e];t.used&&t.prepare(this.context)}const i={},a={},s={};for(const e in o){const t=o[e];i[e]=t.getVisibleCoordinates(),a[e]=i[e].slice().reverse(),s[e]=t.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let e=0;e<n.length;e++)if(this.style._layers[n[e]].is3D()){this.opaquePassCutoff=e;break}if(this.terrain&&(this.terrain.updateTileBinding(s),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.GlobeSharedBuffers(this.context)),!e.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const e of n){const r=this.style._layers[e],n=t._getLayerSourceCache(r);if(!r.hasOffscreenPass()||r.isHidden(this.transform.zoom))continue;const o=n?a[n.id]:void 0;("custom"===r.type||r.isSky()||o&&o.length)&&this.renderLayer(this,n,r,o)}this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon];const l=this.terrain;if(l&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&l.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:r.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=r.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=n.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[n[this.currentLayer]],r=t._getLayerSourceCache(e);if(e.isSky())continue;const o=r?a[r.id]:void 0;this._renderTileClippingMasks(e,r,o),this.renderLayer(this,r,e,o)}if(this.style.fog&&this.transform.projection.supportsFog&&function(t,r){const n=t.context,o=n.gl,i=t.transform,a=new e.DepthMode(o.LEQUAL,e.DepthMode.ReadOnly,[0,1]),s=t.useProgram("globeAtmosphere",null,"globe"===i.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),l=e.globeToMercatorTransition(i.zoom),c=r.properties.get("color").toArray01(),u=r.properties.get("high-color").toArray01(),d=r.properties.get("space-color").toArray01PremultipliedAlpha(),h=e.identity$1([]);e.rotateY$1(h,h,-e.degToRad(i._center.lng)),e.rotateX$1(h,h,e.degToRad(i._center.lat)),e.rotateZ$1(h,h,i.angle),e.rotateX$1(h,h,-i._pitch);const p=e.fromQuat(new Float32Array(16),h),f=e.mapValue(r.properties.get("star-intensity"),0,1,0,.25),m=5e-4,g=e.mapValue(r.properties.get("horizon-blend"),0,1,m,.25),y=e.globeUseCustomAntiAliasing(t,n,i)&&g===m?i.worldSize/(2*Math.PI*1.025)-1:i.globeRadius,v=t.frameCounter/1e3%1,b=e.length(i.globeCenterInViewSpace),x=Math.sqrt(Math.pow(b,2)-Math.pow(y,2)),_=Math.acos(x/b),w=((t,r,n,o,i,a,s,l,c,u,d,h,p,f)=>({u_frustum_tl:t,u_frustum_tr:r,u_frustum_br:n,u_frustum_bl:o,u_horizon:i,u_transition:a,u_fadeout_range:s,u_color:l,u_high_color:c,u_space_color:u,u_star_intensity:d,u_star_size:5*e.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:h,u_horizon_angle:p,u_rotation_matrix:f}))(i.frustumCorners.TL,i.frustumCorners.TR,i.frustumCorners.BR,i.frustumCorners.BL,i.frustumCorners.horizon,l,g,c,u,d,f,v,_,p);t.prepareDrawProgram(n,s);const S=t.atmosphereBuffer;S&&s.draw(n,o.TRIANGLES,a,e.StencilMode.disabled,e.ColorMode.alphaBlended,e.CullFaceMode.backCW,w,"skybox",S.vertexBuffer,S.indexBuffer,S.segments)}(this,this.style.fog),this.renderPass="sky",(e.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<n.length;this.currentLayer++){const e=this.style._layers[n[this.currentLayer]],r=t._getLayerSourceCache(e);e.isSky()&&this.renderLayer(this,r,e,r?a[r.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<n.length;){const e=this.style._layers[n[this.currentLayer]],r=t._getLayerSourceCache(e);if(e.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(e)){if(e.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const o=r?("symbol"===e.type?s:a)[r.id]:void 0;this._renderTileClippingMasks(e,r,r?i[r.id]:void 0),this.renderLayer(this,r,e,o),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let r=null;e.values(this.style._layers).forEach((e=>{const n=t._getLayerSourceCache(e);n&&!e.isHidden(this.transform.zoom)&&(!r||r.getSource().maxzoom<n.getSource().maxzoom)&&(r=n)})),r&&this.options.showTileBoundaries&&Ln.debug(this,r,r.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;Tn(e,e.transform.height-(t.top||0),3,bn),Tn(e,t.bottom||0,3,xn),En(e,t.left||0,3,_n),En(e,e.transform.width-(t.right||0),3,wn);const r=e.transform.centerPoint;!function(e,t,r,n){Cn(e,t-1,r-10,2,20,n),Cn(e,t-10,r-1,20,2,n)}(e,r.x,e.transform.height-r.y,Sn)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}renderLayer(e,t,r,n){r.isHidden(this.transform.zoom)||("background"===r.type||"sky"===r.type||"custom"===r.type||n&&n.length)&&(this.id=r.id,this.gpuTimingStart(r),(!e.transform.projection.unsupportedLayers||!e.transform.projection.unsupportedLayers.includes(r.type)||e.terrain&&"custom"===r.type)&&Ln[r.type](e,t,r,n,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(e){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;let r=this.gpuTimers[e.id];r||(r=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),r.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,r.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const e=this.context.extTimerQuery,t=e.createQueryEXT();this.deferredRenderGpuTimeQueries.push(t),e.beginQueryEXT(e.TIME_ELAPSED_EXT,t)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}collectGpuTimers(){const e=this.gpuTimers;return this.gpuTimers={},e}collectDeferredRenderGpuQueries(){const e=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],e}queryGpuTimers(e){const t={};for(const r in e){const n=e[r],o=this.context.extTimerQuery,i=o.getQueryObjectEXT(n.query,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(n.query),t[r]=i}return t}queryGpuTimeDeferredRender(e){if(!this.options.gpuTimingDeferredRender)return 0;const t=this.context.extTimerQuery;let r=0;for(const n of e)r+=t.getQueryObjectEXT(n,t.QUERY_RESULT_EXT)/1e6,t.deleteQueryEXT(n);return r}translatePosMatrix(t,r,n,o,i){if(!n[0]&&!n[1])return t;const a=i?"map"===o?this.transform.angle:0:"viewport"===o?-this.transform.angle:0;if(a){const e=Math.sin(a),t=Math.cos(a);n=[n[0]*t-n[1]*e,n[0]*e+n[1]*t]}const s=[i?n[0]:P(r,n[0],this.transform.zoom),i?n[1]:P(r,n[1],this.transform.zoom),0],l=new Float32Array(16);return e.translate(l,t,s),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){return null===e||void 0!==e&&!this.imageManager.getPattern(e.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const e=this.terrain&&this.terrain.renderingToTexture,t=this.terrain&&0===this.terrain.exaggeration(),r=this.style&&this.style.fog,n=[];return this.terrainRenderModeElevated()&&n.push("TERRAIN"),"globe"===this.transform.projection.name&&n.push("GLOBE"),t&&n.push("ZERO_EXAGGERATION"),r&&!e&&0!==r.getOpacity(this.transform.pitch)&&n.push("FOG"),e&&n.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&n.push("OVERDRAW_INSPECTOR"),n}useProgram(e,t,r){this.cache=this.cache||{};const n=r||[],o=this.currentGlobalDefines().concat(n),i=Ir.cacheKey(cr[e],e,o,t);return this.cache[i]||(this.cache[i]=new Ir(this.context,e,cr[e],t,sn[e],o)),this.cache[i]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(t,r,n){if(this.terrain&&this.terrain.renderingToTexture)return;const o=this.style.fog;if(o){const i=o.getOpacity(this.transform.pitch),a=((t,r,n,o,i,a,s,l,c,u,d)=>{const h=t.transform,p=r.properties.get("color").toArray01();p[3]=o;const f=t.frameCounter/1e3%1;return{u_fog_matrix:n?h.calculateFogTileMatrix(n):t.identityMat,u_fog_range:r.getFovAdjustedRange(h._fov),u_fog_color:p,u_fog_horizon_blend:r.properties.get("horizon-blend"),u_fog_temporal_offset:f,u_frustum_tl:i,u_frustum_tr:a,u_frustum_br:s,u_frustum_bl:l,u_globe_pos:c,u_globe_radius:u,u_viewport:d,u_globe_transition:e.globeToMercatorTransition(h.zoom),u_is_globe:+("globe"===h.projection.name)}})(this,o,n,i,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*e.exported.devicePixelRatio,this.transform.height*e.exported.devicePixelRatio]);r.setFogUniformValues(t,a)}}setTileLoadedFlag(e){this.tileLoaded=e}saveCanvasCopy(){const e=this.canvasCopy();e&&(this.frameCopies.push(e),this.tileLoaded=!1)}canvasCopy(){const e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const e=this.style&&this.style.fog;return!!e&&0!==e.getOpacity(this.transform.pitch)}getBackgroundTiles(){const t=this._backgroundTiles,r=this._backgroundTiles={},n=this.transform.coveringTiles({tileSize:512});for(const o of n)r[o.key]=t[o.key]||new e.Tile(o,512,this.transform.tileZoom,this);return r}clearBackgroundTiles(){this._backgroundTiles={}}}class zn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(r)||r<0||isNaN(n)||n<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=r,this.right=n}interpolate(t,r,n){return null!=r.top&&null!=t.top&&(this.top=e.number(t.top,r.top,n)),null!=r.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,r.bottom,n)),null!=r.left&&null!=t.left&&(this.left=e.number(t.left,r.left,n)),null!=r.right&&null!=t.right&&(this.right=e.number(t.right,r.right,n)),this}getCenter(t,r){const n=e.clamp((this.left+t-this.right)/2,0,t),o=e.clamp((this.top+r-this.bottom)/2,0,r);return new e.Point(n,o)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new zn(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Dn(t,r){const n=e.getColumn(t,3);e.fromQuat(t,r),e.setColumn(t,3,n)}function Nn(t,r){const n=e.identity$1([]);return e.rotateZ$1(n,n,-r),e.rotateX$1(n,n,-t),n}function Bn(t,r){const n=[t[0],t[1],0],o=[r[0],r[1],0];if(e.length(n)>=1e-15){const t=e.normalize([],n);e.scale$2(o,t,e.dot(o,t)),r[0]=o[0],r[1]=o[1]}const i=e.cross([],r,t);if(e.len(i)<1e-15)return null;const a=Math.atan2(-i[1],i[0]);return Nn(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),a)}class Un{constructor(e,t){this.position=e,this.orientation=t}get position(){return this._position}set position(t){if(t){const r=t instanceof e.MercatorCoordinate?t:new e.MercatorCoordinate(t[0],t[1],t[2]);this._renderWorldCopies&&(r.x=e.wrap(r.x,0,1)),this._position=r}else this._position=null}lookAtPoint(t,r){if(this.orientation=null,!this.position)return;const n=this.position,o=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(t)):0,i=e.MercatorCoordinate.fromLngLat(t,o),a=[i.x-n.x,i.y-n.y,i.z-n.z];r||(r=[0,0,1]),r[2]=Math.abs(r[2]),this.orientation=Bn(a,r)}setPitchBearing(t,r){this.orientation=Nn(e.degToRad(t),e.degToRad(-r))}}class Vn{constructor(t,r){this._transform=e.identity([]),this.orientation=r,this.position=t}get mercatorPosition(){const t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}get position(){const t=e.getColumn(this._transform,3);return[t[0],t[1],t[2]]}set position(t){var r;t&&e.setColumn(this._transform,3,[(r=t)[0],r[1],r[2],1])}get orientation(){return this._orientation}set orientation(t){this._orientation=t||e.identity$1([]),t&&Dn(this._transform,this._orientation)}getPitchBearing(){const e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}setPitchBearing(e,t){this._orientation=Nn(e,t),Dn(this._transform,this._orientation)}forward(){const t=e.getColumn(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=e.getColumn(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=e.getColumn(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(t,r){const n=new Float64Array(16);return e.invert(n,this.getWorldToCamera(t,r)),n}getWorldToCameraPosition(t,r,n){const o=this.position;e.scale$2(o,o,-t);const i=new Float64Array(16);return e.fromScaling(i,[n,n,n]),e.translate(i,i,o),i[10]*=r,i}getWorldToCamera(t,r){const n=new Float64Array(16),o=new Float64Array(4),i=this.position;return e.conjugate(o,this._orientation),e.scale$2(i,i,-t),e.fromQuat(n,o),e.translate(n,n,i),n[1]*=-1,n[5]*=-1,n[9]*=-1,n[13]*=-1,n[8]*=r,n[9]*=r,n[10]*=r,n[11]*=r,n}getCameraToClipPerspective(t,r,n,o){const i=new Float64Array(16);return e.perspective(i,t,r,n,o),i}getDistanceToElevation(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=0===t?0:e.mercatorZfromAltitude(t,r?e.latFromMercatorY(this.position[1]):this.position[1]),o=this.forward();return(n-this.position[2])/o[2]}clone(){return new Vn([...this.position],[...this.orientation])}}function Wn(t,r){const n=Hn(t.projection,t.zoom,t.width,t.height),o=function(t,r,n,o,i){const a=new e.LngLat(n.lng-180*Gn,n.lat),s=new e.LngLat(n.lng+180*Gn,n.lat),l=t.project(a.lng,a.lat),c=t.project(s.lng,s.lat),u=-Math.atan2(c.y-l.y,c.x-l.x),d=e.MercatorCoordinate.fromLngLat(n);d.y=e.clamp(d.y,-1+Gn,1-Gn);const h=d.toLngLat(),p=t.project(h.lng,h.lat),f=e.MercatorCoordinate.fromLngLat(h);f.x+=Gn;const m=f.toLngLat(),g=t.project(m.lng,m.lat),y=Xn(g.x-p.x,g.y-p.y,u),v=e.MercatorCoordinate.fromLngLat(h);v.y+=Gn;const b=v.toLngLat(),x=t.project(b.lng,b.lat),_=Xn(x.x-p.x,x.y-p.y,u),w=Math.abs(y.x)/Math.abs(_.y),S=e.identity([]);e.rotateZ(S,S,-u*(1-(i?0:o)));const k=e.identity([]);return e.scale(k,k,[1,1-(1-w)*o,1]),k[4]=-_.x/_.y*o,e.rotateZ(k,k,u),e.multiply(k,S,k),k}(t.projection,0,t.center,n,r),i=qn(t);return e.scale(o,o,[i,i,1]),o}function qn(t){const r=t.projection,n=Hn(t.projection,t.zoom,t.width,t.height),o=Kn(r,t.center),i=Kn(r,e.LngLat.convert(r.center));return Math.pow(2,o*n+(1-n)*i)}function Hn(t,r,n,o){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;const a=t.range;if(!a)return 0;const s=Math.min(i,Math.max(n,o)),l=Math.log(s/1024)/Math.LN2;return e.smoothstep(a[0]+l,a[1]+l,r)}const Gn=1/4e4;function Kn(t,r){const n=e.clamp(r.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),o=new e.LngLat(r.lng-180*Gn,n),i=new e.LngLat(r.lng+180*Gn,n),a=t.project(o.lng,n),s=t.project(i.lng,n),l=e.MercatorCoordinate.fromLngLat(o),c=e.MercatorCoordinate.fromLngLat(i),u=s.x-a.x,d=s.y-a.y,h=c.x-l.x,p=c.y-l.y,f=Math.sqrt((h*h+p*p)/(u*u+d*d));return Math.log(f)/Math.LN2}function Xn(e,t,r){const n=Math.cos(r),o=Math.sin(r);return{x:e*n-t*o,y:e*o+t*n}}class Zn{constructor(t,r,n,o,i,a,s){this.tileSize=512,this._renderWorldCopies=void 0===i||i,this._minZoom=t||0,this._maxZoom=r||22,this._minPitch=null==n?0:n,this._maxPitch=null==o?60:o,this.setProjection(a),this.setMaxBounds(s),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new zn,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Vn,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const e=new Zn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,e.tileSize=this.tileSize,e.mercatorFromTransition=this.mercatorFromTransition,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._seaLevelZoom=this._seaLevelZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e.frustumCorners=this.frustumCorners,e}get elevation(){return this._elevation}set elevation(e){this._elevation!==e&&(this._elevation=e,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||r)&&this._updateCameraOnTerrain(),(e||r)&&this._constrainCamera(t),this._calcMatrices()}getProjection(){return e.pick(this.projection,["name","center","parallels"])}setProjection(r){this.projectionOptions=r||{name:"mercator"};const n=this.projection?this.getProjection():void 0;this.projection=e.getProjection(this.projectionOptions);const o=!t(n,this.getProjection());return o&&this._calcMatrices(),this.mercatorFromTransition=!1,o}setMercatorFromTransition(){const t=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=e.getProjection({name:"mercator"});const r=t!==this.projection.name;return r&&this._calcMatrices(),r}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get cameraWorldSize(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return e.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.Point(this.width,this.height)}get bearing(){return e.wrap(this.rotation,-180,180)}set bearing(e){this.rotation=e}get rotation(){return-this.angle/Math.PI*180}set rotation(t){const r=-t*Math.PI/180;var n;this.angle!==r&&(this._unmodified=!1,this.angle=r,this._calcMatrices(),this.rotationMatrix=(n=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n),function(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);e[0]=n*l+i*s,e[1]=o*l+a*s,e[2]=n*-s+i*l,e[3]=o*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const r=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==r&&(this._unmodified=!1,this._pitch=r,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const e=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/e)}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=e.degToRad(t),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(e){this._averageElevation=e,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const e=this._elevation;this._centerAltitude=e.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=e.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const t=this._elevation,r=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],n=this.horizonLineFromTop();let o=0,i=0;for(let a=0;a<r.length;a++){const s=new e.Point(r[a][0]*this.width,n+r[a][1]*(this.height-n)),l=t.pointCoordinate(s);if(!l)continue;const c=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);o+=l[3]*c,i+=c}return 0===i?NaN:o/i}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const e=this._seaLevelZoom,t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),r=this.pixelsPerMeter/this.worldSize*t,n=this._mercatorZfromZoom(e),o=this._mercatorZfromZoom(this._maxZoom),i=Math.max(n-r,o);this._setZoom(this._zoomFromMercatorZ(i))}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}computeZoomRelativeTo(t){const r=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let n;n=t.z<this._camera.position[2]?[r.x,r.y,r.z]:[t.x,t.y,t.z];const o=e.length(e.sub([],this._camera.position,n));return e.clamp(this._zoomFromMercatorZ(o),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height)return;if(!t.position&&!t.orientation)return;this._updateCameraState();let r=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(r=this._setCameraOrientation(t.orientation)),t.position){const n=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(n,this._camera.position)||(this._setCameraPosition(n),r=!0)}r&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,r=new Un;return r.position=new e.MercatorCoordinate(t[0],t[1],t[2]),r.orientation=this._camera.orientation,r._elevation=this.elevation,r._renderWorldCopies=this.renderWorldCopies,r}_setCameraOrientation(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);const r=e.transformQuat([],[0,0,-1],t),n=e.transformQuat([],[0,-1,0],t);if(n[2]<0)return!1;const o=Bn(r,n);return!!o&&(this._camera.orientation=o,!0)}_setCameraPosition(t){const r=this.zoomScale(this.minZoom)*this.tileSize,n=this.zoomScale(this.maxZoom)*this.tileSize,o=this.cameraToCenterDistance;t[2]=e.clamp(t[2],o/n,o/r),this._camera.position=t}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,r){this._unmodified=!1,this._edgeInsets.interpolate(e,t,r),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(t){const r=[new e.UnwrappedTileID(0,t)];if(this.renderWorldCopies){const n=this.pointCoordinate(new e.Point(0,0)),o=this.pointCoordinate(new e.Point(this.width,0)),i=this.pointCoordinate(new e.Point(this.width,this.height)),a=this.pointCoordinate(new e.Point(0,this.height)),s=Math.floor(Math.min(n.x,o.x,i.x,a.x)),l=Math.floor(Math.max(n.x,o.x,i.x,a.x)),c=1;for(let u=s-c;u<=l+c;u++)0!==u&&r.push(new e.UnwrappedTileID(u,t))}return r}coveringTiles(t){let r=this.coveringZoomLevel(t);const n=r,o=this.elevation&&!t.isTerrainDEM,i="mercator"===this.projection.name;if(void 0!==t.minzoom&&r<t.minzoom)return[];void 0!==t.maxzoom&&r>t.maxzoom&&(r=t.maxzoom);const a=this.locationCoordinate(this.center),s=this.center.lat,l=1<<r,c=[l*a.x,l*a.y,0],u="globe"===this.projection.name,d=!u,h=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,r,d),p=u?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),f=l*e.mercatorZfromAltitude(1,this.center.lat),m=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),g=[l*p.x,l*p.y,m*(d?1:f)],y=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),v=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?r:0,b=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,x=t.isTerrainDEM?-b:this._elevation?this._elevation.getMinElevationBelowMSL():0,_=this.projection.isReprojectedInTileSpace?qn(this):1,w=t=>{const r=1/4e4,n=new e.MercatorCoordinate(t.x+r,t.y,t.z),o=new e.MercatorCoordinate(t.x,t.y+r,t.z),i=t.toLngLat(),a=n.toLngLat(),s=o.toLngLat(),l=this.locationCoordinate(i),c=this.locationCoordinate(a),u=this.locationCoordinate(s),d=Math.hypot(c.x-l.x,c.y-l.y),h=Math.hypot(u.x-l.x,u.y-l.y);return Math.sqrt(d*h)*_/r},S=t=>{const r=b,n=x;return{aabb:e.tileAABB(this,l,0,0,0,t,n,r,this.projection),zoom:0,x:0,y:0,minZ:n,maxZ:r,wrap:t,fullyVisible:!1}},k=[];let T=[];const E=r,C=t.reparseOverscaled?n:r,A=e=>e*e,j=A((m-this._centerAltitude)*f),P=e=>{if(!this._elevation||!e.tileID||!i)return;const t=this._elevation.getMinMaxForTile(e.tileID),r=e.aabb;t?(r.min[2]=t.min,r.max[2]=t.max,r.center[2]=(r.min[2]+r.max[2])/2):(e.shouldSplit=I(e),e.shouldSplit||(r.min[2]=r.max[2]=r.center[2]=this._centerAltitude))},I=t=>{if(t.zoom<v)return!0;if(t.zoom===E)return!1;if(null!=t.shouldSplit)return t.shouldSplit;const r=t.aabb.distanceX(g),i=t.aabb.distanceY(g);let a=j,l=1;if(u){a=A(t.aabb.distanceZ(g));const r=Math.pow(2,t.zoom),n=e.latFromMercatorY((t.y+1)/r),o=e.latFromMercatorY(t.y/r),i=Math.min(Math.max(s,n),o),c=e.circumferenceAtLatitude(i)/e.circumferenceAtLatitude(s);if(l=i===s?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,c/this._mercatorScaleRatio),this.zoom<=e.GLOBE_ZOOM_THRESHOLD_MIN&&t.zoom===E-1&&c>=.9)return!0}else if(o&&(a=A(t.aabb.distanceZ(g)*f)),this.projection.isReprojectedInTileSpace&&n<=5){const r=Math.pow(2,t.zoom),n=w(new e.MercatorCoordinate((t.x+.5)/r,(t.y+.5)/r));l=n>.85?1:n}const c=r*r+i*i+a,d=A((1<<E-t.zoom)*y*l*((e,t)=>{if(t*A(.707)<e)return 1;const r=Math.sqrt(t/e);return r/(1.4144271570014144+(Math.pow(1.1,r-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(a,j),c));return c<d};if(this.renderWorldCopies)for(let e=1;e<=3;e++)k.push(S(-e)),k.push(S(e));for(k.push(S(0));k.length>0;){const n=k.pop(),a=n.x,s=n.y;let d=n.fullyVisible;if(!d){const e=n.aabb.intersects(h);if(0===e)continue;d=2===e}if(n.zoom!==E&&I(n))for(let t=0;t<4;t++){const r=(a<<1)+t%2,c=(s<<1)+(t>>1),h={aabb:i?n.aabb.quadrant(t):e.tileAABB(this,l,n.zoom+1,r,c,n.wrap,n.minZ,n.maxZ,this.projection),zoom:n.zoom+1,x:r,y:c,wrap:n.wrap,fullyVisible:d,tileID:void 0,shouldSplit:void 0,minZ:n.minZ,maxZ:n.maxZ};o&&!u&&(h.tileID=new e.OverscaledTileID(n.zoom+1===E?C:n.zoom+1,n.wrap,n.zoom+1,r,c),P(h)),k.push(h)}else{const o=n.zoom===E?C:n.zoom;if(t.minzoom&&t.minzoom>o)continue;const i=c[0]-(.5+a+(n.wrap<<n.zoom))*(1<<r-n.zoom),l=c[1]-.5-s,u=n.tileID?n.tileID:new e.OverscaledTileID(o,n.wrap,n.zoom,a,s);T.push({tileID:u,distanceSq:i*i+l*l})}}if(this.fogCullDistSq){const r=this.fogCullDistSq,n=this.horizonLineFromTop();T=T.filter((o=>{const i=[0,0,0,1],a=[e.EXTENT,e.EXTENT,0,1],s=this.calculateFogTileMatrix(o.tileID.toUnwrapped());e.transformMat4$1(i,i,s),e.transformMat4$1(a,a,s);const l=e.getAABBPointSquareDist(i,a);if(0===l)return!0;let c=!1;const u=this._elevation;if(u&&l>r&&0!==n){const r=this.calculateProjMatrix(o.tileID.toUnwrapped());let i;t.isTerrainDEM||(i=u.getMinMaxForTile(o.tileID)),i||(i={min:x,max:b});const a=e.furthestTileCorner(this.rotation),s=[a[0]*e.EXTENT,a[1]*e.EXTENT,i.max];e.transformMat4(s,s,r),c=(1-s[1])*this.height*.5<n}return l<r||c}))}return T.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(t){const r=e.clamp(t.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),n=this.projection.project(t.lng,r);return new e.Point(n.x*this.worldSize,n.y*this.worldSize)}unproject(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/e.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(t,r){let n,o;const i=this.centerPoint;if("globe"===this.projection.name){const e=this.worldSize;n=(r.x-i.x)/e,o=(r.y-i.y)/e}else{const e=this.pointCoordinate(r),t=this.pointCoordinate(i);n=e.x-t.x,o=e.y-t.y}const a=this.locationCoordinate(t);this.setLocation(new e.MercatorCoordinate(a.x-n,a.y-o))}setLocation(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(e){return this.projection.locationPoint(this,e)}locationPoint3D(e){return this.projection.locationPoint(this,e,!0)}pointLocation(e){return this.coordinateLocation(this.pointCoordinate(e))}pointLocation3D(e){return this.coordinateLocation(this.pointCoordinate3D(e))}locationCoordinate(t,r){const n=r?e.mercatorZfromAltitude(r,t.lat):void 0,o=this.projection.project(t.lng,t.lat);return new e.MercatorCoordinate(o.x,o.y,n)}coordinateLocation(e){return this.projection.unproject(e.x,e.y)}pointRayIntersection(t,r){const n=null!=r?r:this._centerAltitude,o=[t.x,t.y,0,1],i=[t.x,t.y,1,1];e.transformMat4$1(o,o,this.pixelMatrixInverse),e.transformMat4$1(i,i,this.pixelMatrixInverse);const a=i[3];e.scale$1(o,o,1/o[3]),e.scale$1(i,i,1/a);const s=o[2],l=i[2];return{p0:o,p1:i,t:s===l?0:(n-s)/(l-s)}}screenPointToMercatorRay(t){const r=[t.x,t.y,0,1],n=[t.x,t.y,1,1];return e.transformMat4$1(r,r,this.pixelMatrixInverse),e.transformMat4$1(n,n,this.pixelMatrixInverse),e.scale$1(r,r,1/r[3]),e.scale$1(n,n,1/n[3]),r[2]=e.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,n[2]=e.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,e.scale$1(r,r,1/this.worldSize),e.scale$1(n,n,1/this.worldSize),new e.Ray([r[0],r[1],r[2]],e.normalize([],e.sub([],n,r)))}rayIntersectionCoordinate(t){const{p0:r,p1:n,t:o}=t,i=e.mercatorZfromAltitude(r[2],this._center.lat),a=e.mercatorZfromAltitude(n[2],this._center.lat);return new e.MercatorCoordinate(e.number(r[0],n[0],o)/this.worldSize,e.number(r[1],n[1],o)/this.worldSize,e.number(i,a,o))}pointCoordinate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._centerAltitude;return this.projection.pointCoordinate(this,e.x,e.y,t)}pointCoordinate3D(t){if(!this.elevation)return this.pointCoordinate(t);let r=this.projection.pointCoordinate3D(this,t.x,t.y);if(r)return new e.MercatorCoordinate(r[0],r[1],r[2]);let n=0,o=this.horizonLineFromTop();if(t.y>o)return this.pointCoordinate(t);const i=.02*o,a=t.clone();for(let s=0;s<10&&o-n>i;s++){a.y=e.number(n,o,.66);const t=this.projection.pointCoordinate3D(this,a.x,a.y);t?(o=a.y,r=t):n=a.y}return r?new e.MercatorCoordinate(r[0],r[1],r[2]):this.pointCoordinate(t)}isPointAboveHorizon(e){return this.projection.isPointAboveHorizon(this,e)}isPointOnSurface(t){if(t.y<0||t.y>this.height||t.x<0||t.x>this.width)return!1;if(this.elevation||this.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(t);const r=this.pointCoordinate(t);return r.y>=0&&r.y<=1}_coordinatePoint(t,r){const n=r&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,o=[t.x*this.worldSize,t.y*this.worldSize,n+t.toAltitude(),1];return e.transformMat4$1(o,o,this.pixelMatrix),o[3]>0?new e.Point(o[0]/o[3],o[1]/o[3]):new e.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:t,left:r}=this._edgeInsets,n=this.height-this._edgeInsets.bottom,o=this.width-this._edgeInsets.right,i=this.pointLocation3D(new e.Point(r,t)),a=this.pointLocation3D(new e.Point(o,t)),s=this.pointLocation3D(new e.Point(o,n)),l=this.pointLocation3D(new e.Point(r,n));let c=Math.min(i.lng,a.lng,s.lng,l.lng),u=Math.max(i.lng,a.lng,s.lng,l.lng),d=Math.min(i.lat,a.lat,s.lat,l.lat),h=Math.max(i.lat,a.lat,s.lat,l.lat);const p=Math.pow(2,-this.zoom)/16*270,f="globe"===this.projection.name?1:4,m=(t,r,n,o,i)=>{const a=(t+n)/2,s=(r+o)/2,l=new e.Point(a,s),{lng:g,lat:y}=this.pointLocation3D(l),v=Math.max(0,c-g,d-y,g-u,y-h);c=Math.min(c,g),u=Math.max(u,g),d=Math.min(d,y),h=Math.max(h,y),(i<f||v>p)&&(m(t,r,a,s,i+1),m(a,s,n,o,i+1))};if(m(r,t,o,t,1),m(o,t,o,n,1),m(o,n,r,n,1),m(r,n,r,t,1),"globe"===this.projection.name){const[t,r]=e.polesInViewport(this);t?(h=90,u=180,c=-180):r&&(d=-90,u=180,c=-180)}return new e.LngLatBounds(new e.LngLat(c,d),new e.LngLat(u,h))}_getBoundsRectangular(t,r){const{top:n,left:o}=this._edgeInsets,i=this.height-this._edgeInsets.bottom,a=this.width-this._edgeInsets.right,s=new e.Point(o,n),l=new e.Point(a,n),c=new e.Point(a,i),u=new e.Point(o,i);let d=this.pointCoordinate(s,t),h=this.pointCoordinate(l,t);const p=this.pointCoordinate(c,r),f=this.pointCoordinate(u,r),m=(e,t)=>(t.y-e.y)/(t.x-e.x);return d.y>1&&h.y>=0?d=new e.MercatorCoordinate((1-f.y)/m(f,d)+f.x,1):d.y<0&&h.y<=1&&(d=new e.MercatorCoordinate(-f.y/m(f,d)+f.x,0)),h.y>1&&d.y>=0?h=new e.MercatorCoordinate((1-p.y)/m(p,h)+p.x,1):h.y<0&&d.y<=1&&(h=new e.MercatorCoordinate(-p.y/m(p,h)+p.x,0)),(new e.LngLatBounds).extend(this.coordinateLocation(d)).extend(this.coordinateLocation(h)).extend(this.coordinateLocation(f)).extend(this.coordinateLocation(p))}_getBoundsRectangularTerrain(){const e=this.elevation;if(!e.visibleDemTiles.length||e.isUsingMockSource())return this._getBoundsRectangular(0,0);const t=e.visibleDemTiles.reduce(((e,t)=>{if(t.dem){const r=t.dem.tree;e.min=Math.min(e.min,r.minimums[0]),e.max=Math.max(e.max,r.maximums[0])}return e}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(t.min*e.exaggeration(),t.max*e.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,r=this.height/2-t*(1-this._horizonShift);return e?Math.max(0,r):r}getMaxBounds(){return this.maxBounds}setMaxBounds(t){this.maxBounds=t,this.minLat=-e.MAX_MERCATOR_LATITUDE,this.maxLat=e.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=e.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=e.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=e.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(e,t){return this.projection.createTileMatrix(this,t,e)}calculateDistanceTileData(t){const r=t.key,n=this._distanceTileDataCache;if(n[r])return n[r];const o=t.canonical,i=1/this.height,a=this.cameraWorldSize,s=a/this.zoomScale(o.z),l=(o.x+Math.pow(2,o.z)*t.wrap)*s,c=o.y*s,u=this.point;u.x*=a/this.worldSize,u.y*=a/this.worldSize;const d=this.angle,h=Math.sin(-d),p=-Math.cos(-d);return n[r]={bearing:[h,p],center:[(u.x-l)*i,(u.y-c)*i],scale:s/e.EXTENT*i},n[r]}calculateFogTileMatrix(t){const r=t.key,n=this._fogTileMatrixCache;if(n[r])return n[r];const o=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,t);return e.multiply(o,this.worldToFogMatrix,o),n[r]=new Float32Array(o),n[r]}calculateProjMatrix(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=t.key,o=r?this._alignedProjMatrixCache:this._projMatrixCache;if(o[n])return o[n];const i=this.calculatePosMatrix(t,this.worldSize);return e.multiply(i,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:r?this.alignedProjMatrix:this.projMatrix,i),o[n]=new Float32Array(i),o[n]}calculatePixelsToTileUnitsMatrix(t){const r=t.tileID.key,n=this._pixelsToTileUnitsCache;if(n[r])return n[r];const o=function(t,r){const{scale:n}=t.tileTransform,o=n*e.EXTENT/(t.tileSize*Math.pow(2,r.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return i=new Float32Array(4),l=(a=r.inverseAdjustmentMatrix)[1],c=a[2],u=a[3],h=(s=[o,o])[1],i[0]=a[0]*(d=s[0]),i[1]=l*d,i[2]=c*h,i[3]=u*h,i;var i,a,s,l,c,u,d,h}(t,this);return n[r]=o,n[r]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const t=1/this.worldSize,r=e.fromScaling([],[t,t,t]);return e.multiply(r,r,this.globeMatrix),r}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const t=this._elevation;this._updateCameraState();const r=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,n=this._computeCameraPosition(r),o=this._camera.forward(),i=e.mercatorZfromAltitude(1,this._center.lat);n[2]/=i,o[2]/=i,e.normalize(o,o);const a=t.raycast(n,o,t.exaggeration());if(a){const t=e.scaleAndAdd([],n,o,a),r=new e.MercatorCoordinate(t[0],t[1],e.mercatorZfromAltitude(t[2],e.latFromMercatorY(t[1]))),s=(r.z+e.length([r.x-n[0],r.y-n[1],r.z-n[2]*i]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(s),this._centerAltitude=r.toAltitude(),this._center=this.coordinateLocation(r),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._elevation)return;const r=this._elevation,n=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,o=this._computeCameraPosition(n),i=r.getAtPointOrZero(new e.MercatorCoordinate(...o)),a=this.pixelsPerMeter/this.worldSize*i,s=this._minimumHeightOverTerrain(),l=o[2]-a;if(l<=s)if(l<0||t){const t=this.locationCoordinate(this._center,this._centerAltitude),r=[o[0],o[1],t.z-o[2]],n=e.length(r);r[2]-=(s-l)/this._pixelsPerMercatorPixel;const i=e.length(r);if(0===i)return;e.scale$2(r,r,n/i*this._pixelsPerMercatorPixel),this._camera.position=[o[0],o[1],t.z*this._pixelsPerMercatorPixel-r[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const t="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||t){const r=this.center;return r.lat=e.clamp(r.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!t)&&(r.lng=e.clamp(r.lng,this.minLng,this.maxLng)),this.center=r,void(this._constraining=!1)}const r=this._unmodified,{x:n,y:o}=this.point;let i=0,a=n,s=o;const l=this.width/2,c=this.height/2,u=this.worldMinY*this.scale,d=this.worldMaxY*this.scale;if(o-c<u&&(s=u+c),o+c>d&&(s=d-c),d-u<this.height&&(i=Math.max(i,this.height/(d-u)),s=(d+u)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const e=this.worldMinX*this.scale,t=this.worldMaxX*this.scale,r=this.worldSize/2-(e+t)/2;a=(n+r+this.worldSize)%this.worldSize-r,a-l<e&&(a=e+l),a+l>t&&(a=t-l),t-e<this.width&&(i=Math.max(i,this.width/(t-e)),a=(t+e)/2)}a===n&&s===o||(this.center=this.unproject(new e.Point(a,s))),i&&(this.zoom+=this.scaleZoom(i)),this._constrainCamera(),this._unmodified=r,this._constraining=!1}_minZoomForBounds(){let e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,r=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=e.mercatorZfromAltitude(1,this.center.lat)/e.mercatorZfromAltitude(1,e.GLOBE_SCALE_MATCH_LATITUDE));const n=Hn(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,n),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const o="meters"===this.projection.zAxisUnit?r:1,i=this._camera.getWorldToCamera(this.worldSize,o),a=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);a[8]=2*-t.x/this.width,a[9]=2*t.y/this.height;let s=e.mul([],a,i);if(this.projection.isReprojectedInTileSpace){const t=this.locationCoordinate(this.center),r=e.identity([]);e.translate(r,r,[t.x*this.worldSize,t.y*this.worldSize,0]),e.multiply(r,r,Wn(this)),e.translate(r,r,[-t.x*this.worldSize,-t.y*this.worldSize,0]),e.multiply(s,s,r),this.inverseAdjustmentMatrix=function(e){const t=Wn(e,!0);return v([],[t[0],t[1],t[4],t[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=e.scale([],s,[this.worldSize,this.worldSize,this.worldSize/o,1]),this.projMatrix=s,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);const l=e.invert([],a);this.frustumCorners=e.FrustumCorners.fromInvProjectionMatrix(l,this.horizonLineFromTop(),this.height);const c=new Float32Array(16);e.identity(c),e.scale(c,c,[1,-1,1]),e.rotateX(c,c,this._pitch),e.rotateZ(c,c,this.angle);const u=e.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),d=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;u[8]=2*-t.x/this.width,u[9]=2*(t.y+d)/this.height,this.skyboxMatrix=e.multiply(c,u,c);const h=this.point,p=h.x,f=h.y,m=this.width%2/2,g=this.height%2/2,y=Math.cos(this.angle),b=Math.sin(this.angle),x=p-Math.round(p)+y*m+b*g,_=f-Math.round(f)+y*g+b*m,w=new Float64Array(s);if(e.translate(w,w,[x>.5?x-1:x,_>.5?_-1:_,0]),this.alignedProjMatrix=w,s=e.create(),e.scale(s,s,[this.width/2,-this.height/2,1]),e.translate(s,s,[1,-1,0]),this.labelPlaneMatrix=s,s=e.create(),e.scale(s,s,[1,-1,1]),e.translate(s,s,[-1,-1,0]),e.scale(s,s,[2/this.width,2/this.height,1]),this.glCoordMatrix=s,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},s=e.invert(new Float64Array(16),this.pixelMatrix),!s)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=s,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=e.calculateGlobeMatrix(this);const t=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=e.transformMat4(t,t,i),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=s;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const t=this.cameraWorldSizeForFog,r=this.cameraPixelsPerMeter,n=this._camera.position,o=1/this.height/this._pixelsPerMercatorPixel,i=[t,t,r];e.scale$2(i,i,o),e.scale$2(n,n,-1),e.multiply$2(n,n,i);const a=e.create();e.translate(a,a,n),e.scale(a,a,i),this.mercatorFogMatrix=a,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,r,o)}_computeCameraPosition(e){const t=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,r=this._camera.forward(),n=this.point,o=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*t-e/this.worldSize*this._centerAltitude;return[n.x/this.worldSize-r[0]*o,n.y/this.worldSize-r[1]*o,e/this.worldSize*this._centerAltitude-r[2]*o]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(t){const r=this._maxCameraBoundsDistance()*Math.cos(this._pitch),n=this._camera.position[2],o=t[2];let i=1;this.projection.wrap&&(this.center=this.center.wrap()),o>0&&(i=Math.min((r-n)/o,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,i),this._updateStateFromCamera()}_updateStateFromCamera(){const t=this._camera.position,r=this._camera.forward(),{pitch:n,bearing:o}=this._camera.getPitchBearing(),i=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,a=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),s=Math.max((t[2]-i)/Math.cos(n),a),l=this._zoomFromMercatorZ(s);e.scaleAndAdd(t,t,r,s),this._pitch=e.clamp(n,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(o,-Math.PI,Math.PI),this._setZoom(e.clamp(l,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new e.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(e){return Math.pow(2,e)*this.tileSize}_mercatorZfromZoom(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}_minimumHeightOverTerrain(){const e=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(e)}_zoomFromMercatorZ(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}zoomFromMercatorZAdjusted(t){let r=0,n=e.GLOBE_ZOOM_THRESHOLD_MAX,o=0,i=1/0;for(;n-r>1e-6&&n>r;){const e=r+.5*(n-r),a=this.tileSize*Math.pow(2,e),s=this.getCameraToCenterDistance(this.projection,e,a),l=this.scaleZoom(s/(t*this.tileSize)),c=Math.abs(e-l);c<i&&(i=c,o=e),e<l?r=e:n=e}return o}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(e.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(t,r){const n=Math.min(t.x,r.x),o=Math.max(t.x,r.x),i=Math.min(t.y,r.y),a=Math.max(t.y,r.y);if(i<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const s=[new e.Point(n,i),new e.Point(o,a),new e.Point(n,a),new e.Point(o,i)],l=this.renderWorldCopies?-3:0,c=this.renderWorldCopies?4:1;for(const e of s){const t=this.pointRayIntersection(e);if(t.t<0)return!0;const r=this.rayIntersectionCoordinate(t);if(r.x<l||r.y<0||r.x>c||r.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.Point(0,0),new e.Point(this.width,this.height))}zoomDeltaToMovement(t,r){const n=e.length(e.sub([],this._camera.position,t)),o=this._zoomFromMercatorZ(n)+r;return n-this._mercatorZfromZoom(o)}getCameraPoint(){if("globe"===this.projection.name){const t=function(t,r){let[n,o,i]=t;const a=[n,o,i,1];e.transformMat4$1(a,a,r);const s=a[3]=Math.max(a[3],1e-6);return a[0]/=s,a[1]/=s,a[2]/=s,a}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new e.Point(t[0],t[1])}{const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,t))}}getCameraToCenterDistance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zoom,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.worldSize;const n=Hn(e,t,this.width,this.height,1024),o=e.pixelSpaceConversion(this.center.lat,r,n);return.5/Math.tan(.5*this._fov)*this.height*o}getWorldToCameraMatrix(){const t=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&e.multiply(t,t,this.globeMatrix),t}}function Yn(e,t){let r=!1,n=null;const o=()=>{n=null,r&&(e(),n=setTimeout(o,t),r=!1)};return()=>(r=!0,n||o(),n)}class Jn{constructor(t){this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Yn(this._updateHashUnthrottled.bind(this),300)}addTo(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),t.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),e.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const t=this._map;if(!t)return"";const r=$n(t);if(this._hashName){const t=this._hashName;let n=!1;const o=e.window.location.hash.slice(1).split("&").map((e=>{const o=e.split("=")[0];return o===t?(n=!0,"".concat(o,"=").concat(r)):e})).filter((e=>e));return n||o.push("".concat(t,"=").concat(r)),"#".concat(o.join("&"))}return"#".concat(r)}_getCurrentHash(){const t=e.window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map((e=>e.split("="))).forEach((t=>{t[0]===this._hashName&&(e=t)})),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const e=this._map;if(!e)return!1;const t=this._getCurrentHash();if(t.length>=3&&!t.some((e=>isNaN(e)))){const r=e.dragRotate.isEnabled()&&e.touchZoomRotate.isEnabled()?+(t[3]||0):e.getBearing();return e.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:r,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t)}}function $n(e,t){const r=e.getCenter(),n=Math.round(100*e.getZoom())/100,o=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,o),a=Math.round(r.lng*i)/i,s=Math.round(r.lat*i)/i,l=e.getBearing(),c=e.getPitch();let u=t?"/".concat(a,"/").concat(s,"/").concat(n):"".concat(n,"/").concat(s,"/").concat(a);return(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+="/".concat(Math.round(c))),u}const Qn={linearity:.3,easing:e.bezier(0,0,.3,1)},eo=e.extend({deceleration:2500,maxSpeed:1400},Qn),to=e.extend({deceleration:20,maxSpeed:1400},Qn),ro=e.extend({deceleration:1e3,maxSpeed:360},Qn),no=e.extend({deceleration:1e3,maxSpeed:90},Qn);class oo{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,r=e.exported.now();for(;t.length>0&&r-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._map._prefersReducedMotion())return;if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const r={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)r.zoom+=e.zoomDelta||0,r.bearing+=e.bearingDelta||0,r.pitch+=e.pitchDelta||0,e.panDelta&&r.pan._add(e.panDelta),e.around&&(r.around=e.around),e.pinchAround&&(r.pinchAround=e.pinchAround);const n=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,o={};if(r.pan.mag()){const i=ao(r.pan.mag(),n,e.extend({},eo,t||{}));o.offset=r.pan.mult(i.amount/r.pan.mag()),o.center=this._map.transform.center,io(o,i)}if(r.zoom){const e=ao(r.zoom,n,to);o.zoom=this._map.transform.zoom+e.amount,io(o,e)}if(r.bearing){const t=ao(r.bearing,n,ro);o.bearing=this._map.transform.bearing+e.clamp(t.amount,-179,179),io(o,t)}if(r.pitch){const e=ao(r.pitch,n,no);o.pitch=this._map.transform.pitch+e.amount,io(o,e)}if(o.zoom||o.bearing){const e=void 0===r.pinchAround?r.around:r.pinchAround;o.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),o.noMoveStart=!0,o}}function io(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function ao(t,r,n){const{maxSpeed:o,linearity:i,deceleration:a}=n,s=e.clamp(t*i/(r/1e3),-o,o),l=Math.abs(s)/(a*i);return{easing:n.easing,duration:1e3*l,amount:s*(l/2)}}class so extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,r,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=f(r.getCanvasContainer(),n),a=r.unproject(i);super(t,e.extend({point:i,lngLat:a,originalEvent:n},o)),this._defaultPrevented=!1,this.target=r}}class lo extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,r,n){const o="touchend"===t?n.changedTouches:n.touches,i=m(r.getCanvasContainer(),o),a=i.map((e=>r.unproject(e))),s=i.reduce(((e,t,r,n)=>e.add(t.div(n.length))),new e.Point(0,0));super(t,{points:i,point:s,lngLats:a,lngLat:r.unproject(s),originalEvent:n}),this._defaultPrevented=!1}}class co extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,r){super(e,{originalEvent:r}),this._defaultPrevented=!1}}class uo{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){this._mousedownPos=void 0}wheel(e){return this._firePreventable(new co(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new so(e.type,this._map,e))}mouseup(e){this._map.fire(new so(e.type,this._map,e))}preclick(t){const r=e.extend({},t);r.type="preclick",this._map.fire(new so(r.type,this._map,r))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||(this.preclick(e),this._map.fire(new so(e.type,this._map,e)))}dblclick(e){return this._firePreventable(new so(e.type,this._map,e))}mouseover(e){this._map.fire(new so(e.type,this._map,e))}mouseout(e){this._map.fire(new so(e.type,this._map,e))}touchstart(e){return this._firePreventable(new lo(e.type,this._map,e))}touchmove(e){this._map.fire(new lo(e.type,this._map,e))}touchend(e){this._map.fire(new lo(e.type,this._map,e))}touchcancel(e){this._map.fire(new lo(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ho{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(e){this._map.fire(new so(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new so("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new so(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class po{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(u(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const r=t,n=this._startPos,o=this._lastPos;if(!n||!o||o.equals(r)||!this._box&&r.dist(n)<this._clickTolerance)return;this._lastPos=r,this._box||(this._box=i("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));const a=Math.min(n.x,r.x),s=Math.max(n.x,r.x),l=Math.min(n.y,r.y),c=Math.max(n.y,r.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform="translate(".concat(a,"px,").concat(l,"px)"),this._box.style.width=s-a+"px",this._box.style.height=c-l+"px")}))}mouseupWindow(t,r){if(!this._active)return;const n=this._startPos,o=r;if(n&&0===t.button){if(this.reset(),p(),n.x!==o.x||n.y!==o.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:e=>e.fitScreenCoordinates(n,o,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",t)}}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),d(),delete this._startPos,delete this._lastPos}_fireEvent(t,r){return this._map.fire(new e.Event(t,{originalEvent:r}))}}function fo(e,t){const r={};for(let n=0;n<e.length;n++)r[e[n].identifier]=t[n];return r}class mo{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(t,r,n){(this.centroid||n.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=t.timeStamp),n.length===this.numTouches&&(this.centroid=function(t){const r=new e.Point(0,0);for(const e of t)r._add(e);return r.div(t.length)}(r),this.touches=fo(n,r)))}touchmove(e,t,r){if(this.aborted||!this.centroid)return;const n=fo(r,t);for(const o in this.touches){const e=n[o];(!e||e.dist(this.touches[o])>30)&&(this.aborted=!0)}}touchend(e,t,r){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===r.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class go{constructor(e){this.singleTap=new mo(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(e,t,r){this.singleTap.touchstart(e,t,r)}touchmove(e,t,r){this.singleTap.touchmove(e,t,r)}touchend(e,t,r){const n=this.singleTap.touchend(e,t,r);if(n){const t=e.timeStamp-this.lastTime<500,r=!this.lastTap||this.lastTap.dist(n)<30;if(t&&r||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=n,this.count===this.numTaps)return this.reset(),n}}}class yo{constructor(){this._zoomIn=new go({numTouches:1,numTaps:2}),this._zoomOut=new go({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,r){this._zoomIn.touchstart(e,t,r),this._zoomOut.touchstart(e,t,r)}touchmove(e,t,r){this._zoomIn.touchmove(e,t,r),this._zoomOut.touchmove(e,t,r)}touchend(e,t,r){const n=this._zoomIn.touchend(e,t,r),o=this._zoomOut.touchend(e,t,r);return n?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(n)},{originalEvent:e})}):o?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(o)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const vo={0:1,2:2};class bo{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(e,t){return!1}_move(e,t){return{}}mousedown(e,t){if(this._lastPoint)return;const r=g(e);this._correctButton(e,r)&&(this._lastPoint=t,this._eventButton=r)}mousemoveWindow(e,t){const r=this._lastPoint;if(r)if(e.preventDefault(),null!=this._eventButton&&function(e,t){const r=vo[t];return void 0===e.buttons||(e.buttons&r)!==r}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(r)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(r,t)}mouseupWindow(e){this._lastPoint&&g(e)===this._eventButton&&(this._moved&&p(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xo extends bo{mousedown(e,t){super.mousedown(e,t),this._lastPoint&&(this._active=!0)}_correctButton(e,t){return 0===t&&!e.ctrlKey}_move(e,t){return{around:t,panDelta:t.sub(e)}}}class _o extends bo{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const r=.8*(t.x-e.x);if(r)return this._active=!0,{bearingDelta:r}}contextmenu(e){e.preventDefault()}}class wo extends bo{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const r=-.5*(t.y-e.y);if(r)return this._active=!0,{pitchDelta:r}}contextmenu(e){e.preventDefault()}}class So{constructor(t,r){this._map=t,this._el=t.getCanvasContainer(),this._minTouches=1,this._clickTolerance=r.clickTolerance||1,this.reset(),e.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)}touchstart(e,t,r){return this._calculateTransform(e,t,r)}touchmove(t,r,n){if(this._active&&!(n.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===n.length&&!e.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return t.cancelable&&t.preventDefault(),this._calculateTransform(t,r,n)}}touchend(e,t,r){this._calculateTransform(e,t,r),this._active&&r.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,r,n){n.length>0&&(this._active=!0);const o=fo(n,r),i=new e.Point(0,0),a=new e.Point(0,0);let s=0;for(const e in o){const t=o[e],r=this._touches[e];r&&(i._add(t),a._add(t.sub(r)),s++,o[e]=t)}if(this._touches=o,s<this._minTouches||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:i.div(s),panDelta:l}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=i("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")}),500)}}class ko{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(e){}_move(e,t,r){return{}}touchstart(e,t,r){this._firstTwoTouches||r.length<2||(this._firstTwoTouches=[r[0].identifier,r[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,r){const n=this._firstTwoTouches;if(!n)return;e.preventDefault();const[o,i]=n,a=To(r,t,o),s=To(r,t,i);if(!a||!s)return;const l=this._aroundCenter?null:a.add(s).div(2);return this._move([a,s],l,e)}touchend(e,t,r){if(!this._firstTwoTouches)return;const[n,o]=this._firstTwoTouches,i=To(r,t,n),a=To(r,t,o);i&&a||(this._active&&p(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function To(e,t,r){for(let n=0;n<e.length;n++)if(e[n].identifier===r)return t[n]}function Eo(e,t){return Math.log(e/t)/Math.LN2}class Co extends ko{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const r=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Eo(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Eo(this._distance,r),pinchAround:t}}}function Ao(e,t){return 180*e.angleWith(t)/Math.PI}class jo extends ko{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t){const r=this._vector;if(this._vector=e[0].sub(e[1]),r&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Ao(this._vector,r),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,r=this._startVector;if(!r)return!1;const n=Ao(e,r);return Math.abs(n)<t}}function Po(e){return Math.abs(e.y)>Math.abs(e.x)}class Io extends ko{constructor(e){super(),this._map=e}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(e){this._lastPoints=e,Po(e[0].sub(e[1]))&&(this._valid=!1)}_move(t,r,n){const o=this._lastPoints;if(!o)return;const i=t[0].sub(o[0]),a=t[1].sub(o[1]);return this._map._cooperativeGestures&&!e.isFullscreen()&&n.touches.length<3||(this._valid=this.gestureBeginsVertically(i,a,n.timeStamp),!this._valid)?void 0:(this._lastPoints=t,this._active=!0,{pitchDelta:(i.y+a.y)/2*-.5})}gestureBeginsVertically(e,t,r){if(void 0!==this._valid)return this._valid;const n=e.mag()>=2,o=t.mag()>=2;if(!n&&!o)return;if(!n||!o)return null==this._firstMove&&(this._firstMove=r),r-this._firstMove<100&&void 0;const i=e.y>0==t.y>0;return Po(e)&&Po(t)&&i}}const Oo={panStep:100,bearingStep:15,pitchStep:10};class Mo{constructor(){const e=Oo;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,r=0,n=0,o=0,i=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),o=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),o=1);break;case 38:e.shiftKey?n=1:(e.preventDefault(),i=-1);break;case 40:e.shiftKey?n=-1:(e.preventDefault(),i=1);break;default:return}return this._rotationDisabled&&(r=0,n=0),{cameraAnimation:a=>{const s=a.getZoom();a.easeTo({duration:300,easeId:"keyboardHandler",easing:Ro,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:a.getBearing()+r*this._bearingStep,pitch:a.getPitch()+n*this._pitchStep,offset:[-o*this._panStep,-i*this._panStep],center:a.getCenter()},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ro(e){return e*(2-e)}const Lo=4.000244140625;class Fo{constructor(t,r){this._map=t,this._el=t.getCanvasContainer(),this._handler=r,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||e.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let r=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const n=e.exported.now(),o=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==r&&r%Lo==0?this._type="wheel":0!==r&&Math.abs(r)<4?this._type="trackpad":o>400?(this._type=null,this._lastValue=r,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(o*r)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,r+=this._lastValue)),t.shiftKey&&r&&(r/=4),this._type&&(this._lastWheelEvent=t,this._delta-=r,this._active||this._start(t)),t.preventDefault()}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const t=f(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._map.transform;"wheel"===this._type&&t.projection.wrap&&(t._center.lng>=180||t._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const r=()=>t._terrainEnabled()&&this._aroundCoord?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(0!==this._delta){const e="wheel"===this._type&&Math.abs(this._delta)>Lo?this._wheelZoomRate:this._defaultZoomRate;let n=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==n&&(n=1/n);const o=r(),i=Math.pow(2,o),a="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):i;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(a*n))),"wheel"===this._type&&(this._startZoom=o,this._easing=this._smoothOutEasing(200)),this._delta=0}const n="number"==typeof this._targetZoom?this._targetZoom:r(),o=this._startZoom,i=this._easing;let a,s=!1;if("wheel"===this._type&&o&&i){const t=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),r=i(t);a=e.number(o,n,r),t<1?this._frameId||(this._frameId=!0):s=!0}else a=n,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:a-r(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let r=e.ease;if(this._prevEase){const t=this._prevEase,n=(e.exported.now()-t.start)/t.duration,o=t.easing(n+.01)-t.easing(n),i=.27/Math.sqrt(o*o+1e-4)*.01,a=Math.sqrt(.0729-i*i);r=e.bezier(i,a,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:r},r}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=i("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(e.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")}),200)}}class zo{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Do{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(e,t){return e.preventDefault(),{cameraAnimation:r=>{r.easeTo({duration:300,zoom:r.getZoom()+(e.shiftKey?-1:1),around:r.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class No{constructor(){this._tap=new go({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(e,t,r){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?r.length>0&&(this._swipePoint=t[0],this._swipeTouch=r[0].identifier):this._tap.touchstart(e,t,r))}touchmove(e,t,r){if(this._tapTime){if(this._swipePoint){if(r[0].identifier!==this._swipeTouch)return;const n=t[0],o=n.y-this._swipePoint.y;return this._swipePoint=n,e.preventDefault(),this._active=!0,{zoomDelta:o/128}}}else this._tap.touchmove(e,t,r)}touchend(e,t,r){this._tapTime?this._swipePoint&&0===r.length&&this.reset():this._tap.touchend(e,t,r)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bo{constructor(e,t,r){this._el=e,this._mousePan=t,this._touchPan=r}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Uo{constructor(e,t,r){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=r}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Vo{constructor(e,t,r,n){this._el=e,this._touchZoom=t,this._touchRotate=r,this._tapDragZoom=n,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Wo=e=>e.zoom||e.drag||e.pitch||e.rotate;class qo extends e.Event{}class Ho{constructor(){this.constants=[1,1,.01],this.radius=0}setup(t,r){const n=e.sub([],r,t);this.radius=e.length(n[2]<0?e.div([],n,this.constants):[n[0],n[1],0])}projectRay(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);const r=e.scale$2([],t,this.radius);if(r[2]>0){const t=e.scale$2([],[0,0,1],e.dot(r,[0,0,1])),n=e.scale$2([],e.normalize([],[r[0],r[1],0]),this.radius),o=e.add([],r,e.scale$2([],e.sub([],e.add([],n,t),r),2));r[0]=o[0],r[1]=o[1]}return r}}function Go(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class Ko{constructor(t,r){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new oo(t),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Ho,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(r),e.bindAll(["handleEvent","handleWindowEvent"],this);const n=this._el;this._listeners=[[n,"touchstart",{passive:!0}],[n,"touchmove",{passive:!1}],[n,"touchend",void 0],[n,"touchcancel",void 0],[n,"mousedown",void 0],[n,"mousemove",void 0],[n,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[n,"mouseover",void 0],[n,"mouseout",void 0],[n,"dblclick",void 0],[n,"click",void 0],[n,"keydown",{capture:!1}],[n,"keyup",void 0],[n,"wheel",{passive:!1}],[n,"contextmenu",void 0],[e.window,"blur",void 0]];for(const[o,i,a]of this._listeners)o.addEventListener(i,o===e.window.document?this.handleWindowEvent:this.handleEvent,a)}destroy(){for(const[t,r,n]of this._listeners)t.removeEventListener(r,t===e.window.document?this.handleWindowEvent:this.handleEvent,n)}_addDefaultHandlers(e){const t=this._map,r=t.getCanvasContainer();this._add("mapEvent",new uo(t,e));const n=t.boxZoom=new po(t,e);this._add("boxZoom",n);const o=new yo,i=new Do;t.doubleClickZoom=new zo(i,o),this._add("tapZoom",o),this._add("clickZoom",i);const a=new No;this._add("tapDragZoom",a);const s=t.touchPitch=new Io(t);this._add("touchPitch",s);const l=new _o(e),c=new wo(e);t.dragRotate=new Uo(e,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new xo(e),d=new So(t,e);t.dragPan=new Bo(r,u,d),this._add("mousePan",u),this._add("touchPan",d,["touchZoom","touchRotate"]);const h=new jo,p=new Co;t.touchZoomRotate=new Vo(r,p,h,a),this._add("touchRotate",h,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]),this._add("blockableMapEvent",new ho(t));const f=t.scrollZoom=new Fo(t,this);this._add("scrollZoom",f,["mousePan"]);const m=t.keyboard=new Mo;this._add("keyboard",m);for(const g of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])e.interactive&&e[g]&&t[g].enable(e[g])}_add(e,t,r){this._handlers.push({handlerName:e,handler:t,allowed:r}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Wo(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(e,t,r){for(const n in e)if(n!==r&&(!t||t.indexOf(n)<0))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,"".concat(e.type,"Window"))}_getMapTouches(e){const t=[];for(const r of e)this._el.contains(r.target)&&t.push(r);return t}handleEvent(e,t){this._updatingCamera=!0;const r="renderFrame"===e.type,n=r?void 0:e,o={needsRenderFrame:!1},i={},a={},s=e.touches?this._getMapTouches(e.touches):void 0,l=s?m(this._el,s):r?void 0:f(this._el,e);for(const{handlerName:d,handler:h,allowed:p}of this._handlers){if(!h.isEnabled())continue;let r;this._blockedByActive(a,p,d)?h.reset():h[t||e.type]&&(r=h[t||e.type](e,l,s),this.mergeHandlerResult(o,i,r,d,n),r&&r.needsRenderFrame&&this._triggerRenderFrame()),(r||h.isActive())&&(a[d]=h)}const c={};for(const d in this._previousActiveHandlers)a[d]||(c[d]=n);this._previousActiveHandlers=a,(Object.keys(c).length||Go(o))&&(this._changes.push([o,i,c]),this._triggerRenderFrame()),(Object.keys(a).length||Go(o))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:u}=o;u&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],u(this._map))}mergeHandlerResult(t,r,n,o,i){if(!n)return;e.extend(t,n);const a={handlerName:o,originalEvent:n.originalEvent||i};void 0!==n.zoomDelta&&(r.zoom=a),void 0!==n.panDelta&&(r.drag=a),void 0!==n.pitchDelta&&(r.pitch=a),void 0!==n.bearingDelta&&(r.rotate=a)}_applyChanges(){const t={},r={},n={};for(const[o,i,a]of this._changes)o.panDelta&&(t.panDelta=(t.panDelta||new e.Point(0,0))._add(o.panDelta)),o.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+o.zoomDelta),o.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+o.bearingDelta),o.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+o.pitchDelta),void 0!==o.around&&(t.around=o.around),void 0!==o.aroundCoord&&(t.aroundCoord=o.aroundCoord),void 0!==o.pinchAround&&(t.pinchAround=o.pinchAround),o.noInertia&&(t.noInertia=o.noInertia),e.extend(r,i),e.extend(n,a);this._updateMapTransform(t,r,n),this._changes=[]}_updateMapTransform(t,r,n){const o=this._map,i=o.transform,a=e=>[e.x,e.y,e.z];if((()=>{const e=this._eventsInProgress.drag;return e&&!this._handlersById[e.handlerName].isActive()})()&&!Go(t)){const e=i.zoom;i.cameraElevationReference="sea",i.recenterOnTerrain(),i.cameraElevationReference="ground",e!==i.zoom&&this._map._update(!0)}if(i._isCameraConstrained&&o._stop(!0),!Go(t))return void this._fireEvents(r,n,!0);let{panDelta:s,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:d,aroundCoord:h,pinchAround:p}=t;i._isCameraConstrained&&(l>0&&(l=0),i._isCameraConstrained=!1),void 0!==p&&(d=p),(l||(e=>r[e]&&!this._eventsInProgress[e])("drag"))&&d&&(this._dragOrigin=a(i.pointCoordinate3D(d)),this._trackingEllipsoid.setup(i._camera.position,this._dragOrigin)),i.cameraElevationReference="sea",o._stop(!0),d=d||o.transform.centerPoint,c&&(i.bearing+=c),u&&(i.pitch+=u),i._updateCameraState();const f=[0,0,0];if(s)if("mercator"===i.projection.name){const e=this._trackingEllipsoid.projectRay(i.screenPointToMercatorRay(d).dir),t=this._trackingEllipsoid.projectRay(i.screenPointToMercatorRay(d.sub(s)).dir);f[0]=t[0]-e[0],f[1]=t[1]-e[1]}else{const t=i.pointCoordinate(d);if("globe"===i.projection.name){s=s.rotate(-i.angle);const r=i._pixelsPerMercatorPixel/i.worldSize;f[0]=-s.x*e.mercatorScale(e.latFromMercatorY(t.y))*r,f[1]=-s.y*e.mercatorScale(i.center.lat)*r}else{const e=i.pointCoordinate(d.sub(s));t&&e&&(f[0]=e.x-t.x,f[1]=e.y-t.y)}}const m=i.zoom,g=[0,0,0];if(l){const t=a(h||i.pointCoordinate3D(d)),r={dir:e.normalize([],e.sub([],t,i._camera.position))};if(r.dir[2]<0){const n=i.zoomDeltaToMovement(t,l);e.scale$2(g,r.dir,n)}}const y=e.add(f,f,g);i._translateCameraConstrained(y),l&&Math.abs(i.zoom-m)>1e-4&&i.recenterOnTerrain(),i.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(r,n,!0)}_fireEvents(t,r,n){const o=Wo(this._eventsInProgress),i=Wo(t),a={};for(const e in t){const{originalEvent:r}=t[e];this._eventsInProgress[e]||(a["".concat(e,"start")]=r),this._eventsInProgress[e]=t[e]}!o&&i&&this._fireEvent("movestart",i.originalEvent);for(const e in a)this._fireEvent(e,a[e]);i&&this._fireEvent("move",i.originalEvent);for(const e in t){const{originalEvent:r}=t[e];this._fireEvent(e,r)}const s={};let l;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:n}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],l=r[t]||n,s["".concat(e,"end")]=l)}for(const e in s)this._fireEvent(e,s[e]);const c=Wo(this._eventsInProgress);if(n&&(o||i)&&!c){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),r=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;t?(r(t.bearing||this._map.getBearing())&&(t.bearing=0),this._map.easeTo(t,{originalEvent:l})):(this._map.fire(new e.Event("moveend",{originalEvent:l})),r(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,r){this._map.fire(new e.Event(t,r?{originalEvent:r}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{this._frameId=void 0,this.handleEvent(new qo("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Xo="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Zo extends e.Evented{constructor(t,r){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=r.bearingSnap,this._respectPrefersReducedMotion=!1!==r.respectPrefersReducedMotion,e.bindAll(["_renderFrameCallback"],this)}getCenter(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(t,r,n){return t=e.Point.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},r),n)}panTo(t,r,n){return this.easeTo(e.extend({center:t},r),n)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(t,r,n){return this.easeTo(e.extend({zoom:t},r),n)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(t,r,n){return this.easeTo(e.extend({bearing:t},r),n)}resetNorth(t,r){return this.rotateTo(0,e.extend({duration:1e3},t),r),this}resetNorthPitch(t,r){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),r),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(t,r){t=e.LngLatBounds.convert(t);const n=r&&r.bearing||0,o=r&&r.pitch||0,i=t.getNorthWest(),a=t.getSouthEast();return this._cameraForBounds(this.transform,i,a,n,o,r)}_extendCameraOptions(t){const r={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:r,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){const e=t.padding;t.padding={top:e,bottom:e,right:e,left:e}}return t.padding=e.extend(r,t.padding),t}_minimumAABBFrustumDistance(e,t){const r=t.max[0]-t.min[0],n=t.max[1]-t.min[1];return r/n>e.aspect?r/(2*Math.tan(.5*e.fovX)*e.aspect):n/(2*Math.tan(.5*e.fovY)*e.aspect)}_cameraForBoundsOnGlobe(t,r,n,o,i,a){const s=t.clone(),l=this._extendCameraOptions(a);s.bearing=o,s.pitch=i;const c=e.LngLat.convert(r),u=e.LngLat.convert(n),d=.5*(c.lat+u.lat),h=.5*(c.lng+u.lng),p=e.latLngToECEF(d,h),f=e.normalize([],p),m=e.normalize([],e.cross([],f,[0,1,0])),g=e.cross([],m,f),y=[m[0],m[1],m[2],0,g[0],g[1],g[2],0,f[0],f[1],f[2],0,0,0,0,1],v=[p,e.latLngToECEF(c.lat,c.lng),e.latLngToECEF(u.lat,c.lng),e.latLngToECEF(u.lat,u.lng),e.latLngToECEF(c.lat,u.lng),e.latLngToECEF(d,c.lng),e.latLngToECEF(d,u.lng),e.latLngToECEF(c.lat,h),e.latLngToECEF(u.lat,h)];let b=e.Aabb.fromPoints(v.map((t=>[e.dot(m,t),e.dot(g,t),e.dot(f,t)])));const x=e.transformMat4([],b.center,y);0===e.squaredLength(x)&&e.set(x,0,0,1),e.normalize(x,x),e.scale$2(x,x,e.GLOBE_RADIUS),s.center=e.ecefToLatLng(x);const _=s.getWorldToCameraMatrix(),w=e.invert(new Float64Array(16),_);b=e.Aabb.applyTransform(b,e.multiply([],_,y)),e.transformMat4(x,x,_);const S=.5*(b.max[2]-b.min[2]),k=this._minimumAABBFrustumDistance(s,b),T=e.scale$2([],[0,0,1],S),E=e.add(T,x,T),C=k+(0===s.pitch?0:e.distance(x,E)),A=s.globeCenterInViewSpace,j=e.sub([],x,[A[0],A[1],A[2]]);e.normalize(j,j),e.scale$2(j,j,C);const P=e.add([],x,j);e.transformMat4(P,P,w);const I=e.earthRadius/e.GLOBE_RADIUS,O=e.length(P),M=e.mercatorZfromAltitude(Math.max(O*I-e.earthRadius,Number.EPSILON),0),R=Math.min(s.zoomFromMercatorZAdjusted(M),l.maxZoom);return R>.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"mercator"}),s.zoom=R,this._cameraForBounds(s,r,n,o,i,a)):{center:s.center,zoom:R,bearing:o,pitch:i}}queryTerrainElevation(t,r){const n=this.transform.elevation;return n?(r=e.extend({},{exaggerated:!0},r),n.getAtPoint(e.MercatorCoordinate.fromLngLat(t),null,r.exaggerated)):null}_cameraForBounds(t,r,n,o,i,a){if("globe"===t.projection.name)return this._cameraForBoundsOnGlobe(t,r,n,o,i,a);const s=t.clone(),l=this._extendCameraOptions(a),c=s.padding;s.bearing=o,s.pitch=i;const u=e.LngLat.convert(r),d=e.LngLat.convert(n),h=new e.LngLat(u.lng,d.lat),p=new e.LngLat(d.lng,u.lat),f=s.project(u),m=s.project(d),g=this.queryTerrainElevation(u),y=this.queryTerrainElevation(d),v=this.queryTerrainElevation(h),b=this.queryTerrainElevation(p),x=[[f.x,f.y,Math.min(g||0,y||0,v||0,b||0)],[m.x,m.y,Math.max(g||0,y||0,v||0,b||0)]];let _=e.Aabb.fromPoints(x);const w=s.getWorldToCameraMatrix(),S=e.invert(new Float64Array(16),w);_=e.Aabb.applyTransform(_,w);const k=e.sub([],_.max,_.min),T=c.left||0,E=c.right||0,C=c.bottom||0,A=c.top||0,{left:j,right:P,top:I,bottom:O}=l.padding,M=.5*(T+E),R=.5*(A+C),L=Math.min(s.scaleZoom(s.scale*Math.min((s.width-(T+E+j+P))/k[0],(s.height-(C+A+O+I))/k[1])),l.maxZoom),F=s.scale/s.zoomScale(L);_=new e.Aabb([_.min[0]-(j+M)*F,_.min[1]-(O+R)*F,_.min[2]],[_.max[0]+(P+M)*F,_.max[1]+(I+R)*F,_.max[2]]);const z=.5*k[2],D=this._minimumAABBFrustumDistance(s,_),N=[0,0,1,0];e.transformMat4$1(N,N,w),e.normalize$2(N,N);const B=e.scale$2([],N,D+z),U=e.add([],_.center,B),V=("number"==typeof l.offset.x&&"number"==typeof l.offset.y?new e.Point(l.offset.x,l.offset.y):e.Point.convert(l.offset)).rotate(-e.degToRad(o));_.center[0]-=V.x*F,_.center[1]+=V.y*F,e.transformMat4(_.center,_.center,S),e.transformMat4(U,U,S);const W=[_.center[0],_.center[1],U[2]*s.pixelsPerMeter];e.scale$2(W,W,1/s.worldSize);const q=e.lngFromMercatorX(W[0]),H=e.latFromMercatorY(W[1]),G=Math.min(s._zoomFromMercatorZ(W[2]),l.maxZoom),K=new e.LngLat(q,H);return s.mercatorFromTransition&&G<.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"globe"}),s.zoom=G,this._cameraForBounds(s,r,n,o,i,a)):{center:K,zoom:G,bearing:o,pitch:i}}fitBounds(e,t,r){const n=this.cameraForBounds(e,t);return this._fitInternal(n,t,r)}fitScreenCoordinates(t,r,n,o,i){const a=e.Point.convert(t),s=e.Point.convert(r),l=new e.Point(Math.min(a.x,s.x),Math.min(a.y,s.y)),c=new e.Point(Math.max(a.x,s.x),Math.max(a.y,s.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(a,s))return this;const u=this.transform.pointLocation3D(l),d=this.transform.pointLocation3D(c),h=this.transform.pointLocation3D(new e.Point(l.x,c.y)),p=this.transform.pointLocation3D(new e.Point(c.x,l.y)),f=[Math.min(u.lng,d.lng,h.lng,p.lng),Math.min(u.lat,d.lat,h.lat,p.lat)],m=[Math.max(u.lng,d.lng,h.lng,p.lng),Math.max(u.lat,d.lat,h.lat,p.lat)],g=o&&o.pitch?o.pitch:this.getPitch(),y=this._cameraForBounds(this.transform,f,m,n,g,o);return this._fitInternal(y,o,i)}_fitInternal(t,r,n){return t?(delete(r=e.extend(t,r)).padding,r.linear?this.easeTo(r,n):this.flyTo(r,n)):this}jumpTo(t,r){this.stop();const n=t.preloadOnly?this.transform.clone():this.transform;let o=!1,i=!1,a=!1;return"zoom"in t&&n.zoom!==+t.zoom&&(o=!0,n.zoom=+t.zoom),void 0!==t.center&&(n.center=e.LngLat.convert(t.center)),"bearing"in t&&n.bearing!==+t.bearing&&(i=!0,n.bearing=+t.bearing),"pitch"in t&&n.pitch!==+t.pitch&&(a=!0,n.pitch=+t.pitch),null==t.padding||n.isPaddingEqual(t.padding)||(n.padding=t.padding),t.preloadOnly?(this._preloadTiles(n),this):(this.fire(new e.Event("movestart",r)).fire(new e.Event("move",r)),o&&this.fire(new e.Event("zoomstart",r)).fire(new e.Event("zoom",r)).fire(new e.Event("zoomend",r)),i&&this.fire(new e.Event("rotatestart",r)).fire(new e.Event("rotate",r)).fire(new e.Event("rotateend",r)),a&&this.fire(new e.Event("pitchstart",r)).fire(new e.Event("pitch",r)).fire(new e.Event("pitchend",r)),this.fire(new e.Event("moveend",r)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||e.warnOnce(Xo),this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,r){const n=this.transform;if(!n.projection.supportsFreeCamera)return e.warnOnce(Xo),this;this.stop();const o=n.zoom,i=n.pitch,a=n.bearing;n.setFreeCameraOptions(t);const s=o!==n.zoom,l=i!==n.pitch,c=a!==n.bearing;return this.fire(new e.Event("movestart",r)).fire(new e.Event("move",r)),s&&this.fire(new e.Event("zoomstart",r)).fire(new e.Event("zoom",r)).fire(new e.Event("zoomend",r)),c&&this.fire(new e.Event("rotatestart",r)).fire(new e.Event("rotate",r)).fire(new e.Event("rotateend",r)),l&&this.fire(new e.Event("pitchstart",r)).fire(new e.Event("pitch",r)).fire(new e.Event("pitchend",r)),this.fire(new e.Event("moveend",r)),this}easeTo(t,r){this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||this._prefersReducedMotion(t))&&(t.duration=0);const n=this.transform,o=this.getZoom(),i=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in t?+t.zoom:o,c="bearing"in t?this._normalizeBearing(t.bearing,i):i,u="pitch"in t?+t.pitch:a,d="padding"in t?t.padding:n.padding,h=e.Point.convert(t.offset);let p,f,m;if("globe"===n.projection.name){const r=e.MercatorCoordinate.fromLngLat(n.center),o=h.rotate(-n.angle);r.x+=o.x/n.worldSize,r.y+=o.y/n.worldSize;const i=r.toLngLat(),a=e.LngLat.convert(t.center||i);this._normalizeCenter(a),p=n.centerPoint.add(o),f=new e.Point(r.x,r.y).mult(n.worldSize),m=new e.Point(e.mercatorXfromLng(a.lng),e.mercatorYfromLat(a.lat)).mult(n.worldSize).sub(f)}else{p=n.centerPoint.add(h);const r=n.pointLocation(p),o=e.LngLat.convert(t.center||r);this._normalizeCenter(o),f=n.project(r),m=n.project(o).sub(f)}const g=n.zoomScale(l-o);let y,v;t.around&&(y=e.LngLat.convert(t.around),v=n.locationPoint(y));const b=this._zooming||l!==o,x=this._rotating||i!==c,_=this._pitching||u!==a,w=!n.isPaddingEqual(d),S=n=>S=>{if(b&&(n.zoom=e.number(o,l,S)),x&&(n.bearing=e.number(i,c,S)),_&&(n.pitch=e.number(a,u,S)),w&&(n.interpolatePadding(s,d,S),p=n.centerPoint.add(h)),y)n.setLocationAtPoint(y,v);else{const e=n.zoomScale(n.zoom-o),t=l>o?Math.min(2,g):Math.max(.5,g),r=Math.pow(t,1-S),i=n.unproject(f.add(m.mult(S*r)).mult(e));n.setLocationAtPoint(n.renderWorldCopies?i.wrap():i,p)}return t.preloadOnly||this._fireMoveEvents(r),n};if(t.preloadOnly){const e=this._emulate(S,t.duration,n);return this._preloadTiles(e),this}const k={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=b,this._rotating=x,this._pitching=_,this._padding=w,this._easeId=t.easeId,this._prepareEase(r,t.noMoveStart,k),this._ease(S(n),(e=>{n.recenterOnTerrain(),this._afterEase(r,e)}),t),this}_prepareEase(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,this.transform.cameraElevationReference="sea",r||n.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!n.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!n.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!n.pitching&&this.fire(new e.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}_afterEase(t,r){if(this._easeId&&r&&this._easeId===r)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const n=this._zooming,o=this._rotating,i=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,n&&this.fire(new e.Event("zoomend",t)),o&&this.fire(new e.Event("rotateend",t)),i&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}flyTo(t,r){if(this._prefersReducedMotion(t)){const n=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(n,r)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);const n=this.transform,o=this.getZoom(),i=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in t?e.clamp(+t.zoom,n.minZoom,n.maxZoom):o,c="bearing"in t?this._normalizeBearing(t.bearing,i):i,u="pitch"in t?+t.pitch:a,d="padding"in t?t.padding:n.padding,h=n.zoomScale(l-o),p=e.Point.convert(t.offset);let f=n.centerPoint.add(p);const m=n.pointLocation(f),g=e.LngLat.convert(t.center||m);this._normalizeCenter(g);const y=n.project(m),v=n.project(g).sub(y);let b=t.curve;const x=Math.max(n.width,n.height),_=x/h,w=v.mag();if("minZoom"in t){const r=e.clamp(Math.min(t.minZoom,o,l),n.minZoom,n.maxZoom),i=x/n.zoomScale(r-o);b=Math.sqrt(i/w*2)}const S=b*b;function k(e){const t=(_*_-x*x+(e?-1:1)*S*S*w*w)/(2*(e?_:x)*S*w);return Math.log(Math.sqrt(t*t+1)-t)}function T(e){return(Math.exp(e)-Math.exp(-e))/2}function E(e){return(Math.exp(e)+Math.exp(-e))/2}const C=k(0);let A=function(e){return E(C)/E(C+b*e)},j=function(e){return x*((E(C)*(T(t=C+b*e)/E(t))-T(C))/S)/w;var t},P=(k(1)-C)/b;if(Math.abs(w)<1e-6||!isFinite(P)){if(Math.abs(x-_)<1e-6)return this.easeTo(t,r);const e=_<x?-1:1;P=Math.abs(Math.log(_/x))/b,j=function(){return 0},A=function(t){return Math.exp(e*b*t)}}t.duration="duration"in t?+t.duration:1e3*P/("screenSpeed"in t?+t.screenSpeed/b:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);const I=i!==c,O=u!==a,M=!n.isPaddingEqual(d),R=n=>h=>{const m=h*P,b=1/A(m);n.zoom=1===h?l:o+n.scaleZoom(b),I&&(n.bearing=e.number(i,c,h)),O&&(n.pitch=e.number(a,u,h)),M&&(n.interpolatePadding(s,d,h),f=n.centerPoint.add(p));const x=1===h?g:n.unproject(y.add(v.mult(j(m))).mult(b));return n.setLocationAtPoint(n.renderWorldCopies?x.wrap():x,f),n._updateCameraOnTerrain(),t.preloadOnly||this._fireMoveEvents(r),n};if(t.preloadOnly){const e=this._emulate(R,t.duration,n);return this._preloadTiles(e),this}return this._zooming=!0,this._rotating=I,this._pitching=O,this._padding=M,this._prepareEase(r,!1),this._ease(R(n),(()=>this._afterEase(r)),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const e=this._onEaseEnd;this._onEaseEnd=void 0,e.call(this,t)}if(!e){const e=this.handlers;e&&e.stop(!1)}return this}_ease(t,r,n){!1===n.animate||0===n.duration?(t(1),r()):(this._easeStart=e.exported.now(),this._easeOptions=n,this._onEaseFrame=t,this._onEaseEnd=r,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1),r=this._onEaseFrame;r&&r(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,r){t=e.wrap(t,-180,180);const n=Math.abs(t-r);return Math.abs(t-360-r)<n&&(t-=360),Math.abs(t+360-r)<n&&(t+=360),t}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.maxBounds)return;const r=e.lng-t.center.lng;e.lng+=r>180?-360:r<-180?360:0}_prefersReducedMotion(t){return this._respectPrefersReducedMotion&&e.exported.prefersReducedMotion&&!(t&&t.essential)}_emulate(e,t,r){const n=Math.ceil(15*t/1e3),o=[],i=e(r.clone());for(let a=0;a<=n;a++){const e=i(a/n);o.push(e.clone())}return o}}class Yo{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){const t=this.options&&this.options.compact;return this._map=e,this._container=i("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=i("button","mapboxgl-ctrl-attrib-button",this._container),i("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=i("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const r=this._map._getUIString("AttributionControl.".concat(t));e.setAttribute("aria-label",r),e.removeAttribute("title"),e.firstElementChild&&e.firstElementChild.setAttribute("title",r)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));const r=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){const n=r.reduce(((e,t,n)=>(t.value&&(e+="".concat(t.key,"=").concat(t.value).concat(n<r.length-1?"&":"")),e)),"?");t.href="".concat(e.config.FEEDBACK_URL,"/").concat(n,"#").concat($n(this._map,!0)),t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}_updateData(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let e=[];if(this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style._sourceCaches;for(const n in t){const r=t[n];if(r.used){const t=r.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,r)=>{for(let n=r+1;n<e.length;n++)if(e[n].indexOf(t)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[...this.options.customAttribution,...e]:e.unshift(this.options.customAttribution));const r=e.join(" | ");r!==this._attribHTML&&(this._attribHTML=r,e.length?(this._innerContainer.innerHTML=r,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Jo{constructor(){e.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(e){this._map=e,this._container=i("div","mapboxgl-ctrl");const t=i("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(const t in e){const r=e[t].getSource();if(r.hasOwnProperty("mapbox_logo")&&!r.mapbox_logo)return!1}return!0}_updateCompact(){const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}class $o{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,r=t?this._queue.concat(t):this._queue;for(const n of r)if(n.id===e)return void(n.cancelled=!0)}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=this._currentlyRunning=this._queue;this._queue=[];for(const r of t)if(!r.cancelled&&(r.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Qo(t,r,n){if(t=new e.LngLat(t.lng,t.lat),r){const o=new e.LngLat(t.lng-360,t.lat),i=new e.LngLat(t.lng+360,t.lat),a=360*Math.ceil(Math.abs(t.lng-n.center.lng)/360),s=n.locationPoint(t).distSqr(r),l=r.x<0||r.y<0||r.x>n.width||r.y>n.height;n.locationPoint(o).distSqr(r)<s&&(l||Math.abs(o.lng-n.center.lng)<a)?t=o:n.locationPoint(i).distSqr(r)<s&&(l||Math.abs(i.lng-n.center.lng)<a)&&(t=i)}for(;Math.abs(t.lng-n.center.lng)>180;){const e=n.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=n.width&&e.y<=n.height)break;t.lng>n.center.lng?t.lng-=360:t.lng+=360}return t}const ei={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class ti extends e.Evented{constructor(t,r){if(super(),(t instanceof e.window.HTMLElement||r)&&(t=e.extend({element:t},r)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=t&&t.occludedOpacity||.2,t&&t.element)this._element=t.element,this._offset=e.Point.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=i("div");const r=41,n=27,o=a("svg",{display:"block",height:r*this._scale+"px",width:n*this._scale+"px",viewBox:"0 0 ".concat(n," ").concat(r)},this._element),s=a("radialGradient",{id:"shadowGradient"},a("defs",{},o));a("stop",{offset:"10%","stop-opacity":.4},s),a("stop",{offset:"100%","stop-opacity":.05},s),a("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},o),a("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},o),a("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},o),a("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},o),this._offset=e.Point.convert(t&&t.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(e=>{e.preventDefault()})),this._element.addEventListener("mousedown",(e=>{e.preventDefault()}));const n=this._element.classList;for(const e in ei)n.remove("mapboxgl-marker-anchor-".concat(e));n.add("mapboxgl-marker-anchor-".concat(this._anchor)),this._popup=null}addTo(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),e.on("click",this._onMapClick)),this}remove(){const e=this._map;return e&&(e.off("click",this._onMapClick),e.off("move",this._updateMoving),e.off("moveend",this._update),e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler),e.off("mouseup",this._onUp),e.off("touchend",this._onUp),e.off("mousemove",this._onMove),e.off("touchmove",this._onMove),e.off("remove",this._clearFadeTimer),e._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,r=13.5,n=Math.sqrt(Math.pow(r,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[n,-1*(t-r+n)],"bottom-right":[-n,-1*(t-r+n)],left:[r,-1*(t-r)],right:[-r,-1*(t-r)]}:this._offset}this._popup=e,e._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(e){const t=e.code,r=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==r&&13!==r||this.togglePopup()}_onMapClick(e){const t=e.originalEvent.target,r=this._element;this._popup&&(t===r||r.contains(t))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(e.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const e=this._map,t=this._pos;if(!e||!t)return!1;const r=e.unproject(t),n=e.getFreeCameraOptions();if(!n.position)return!1;const o=n.position.toLngLat();return o.distanceTo(r)<.9*o.distanceTo(this._lngLat)}_evaluateOpacity(){const t=this._map;if(!t)return;const r=this._pos;if(!r||r.x<0||r.x>t.transform.width||r.y<0||r.y>t.transform.height)return void this._clearFadeTimer();const n=t.unproject(r);let o;t._showingGlobe()&&e.isLngLatBehindGlobe(t.transform,this._lngLat)?o=0:(o=1-t._queryFogOpacity(n),t.transform._terrainEnabled()&&t.getTerrain()&&this._behindTerrain()&&(o*=this._occludedOpacity)),this._element.style.opacity="".concat(o),this._element.style.pointerEvents=o>0?"auto":"none",this._popup&&this._popup._setOpacity(o),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const e=this._pos;if(!e||!this._map)return;const t=this._offset.mult(this._scale);this._element.style.transform="\n            translate(".concat(e.x,"px,").concat(e.y,"px)\n            ").concat(ei[this._anchor],"\n            ").concat(this._calculateXYTransform()," ").concat(this._calculateZTransform(),"\n            translate(").concat(t.x,"px,").concat(t.y,"px)\n        ")}_calculateXYTransform(){const t=this._pos,r=this._map,n=this.getPitchAlignment();if(!r||!t||"map"!==n)return"";if(!r._showingGlobe()){const e=r.getPitch();return e?"rotateX(".concat(e,"deg)"):""}const o=e.radToDeg(e.globeTiltAtLngLat(r.transform,this._lngLat)),i=t.sub(e.globeCenterToScreenPoint(r.transform)),a=Math.abs(i.x)+Math.abs(i.y);if(0===a)return"";const s=o/a;return"rotateX(".concat(-i.y*s,"deg) rotateY(").concat(i.x*s,"deg)")}_calculateZTransform(){const t=this._pos,r=this._map;if(!r||!t)return"";let n=0;const o=this.getRotationAlignment();if("map"===o)if(r._showingGlobe()){const t=r.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),o=r.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(t);n=e.radToDeg(Math.atan2(o.y,o.x))-90}else n=-r.getBearing();else if("horizon"===o){const o=e.smoothstep(4,6,r.getZoom()),i=e.globeCenterToScreenPoint(r.transform);i.y+=o*r.transform.height;const a=t.sub(i),s=e.radToDeg(Math.atan2(a.y,a.x));n=(s>90?s-270:s+90)*(1-o)}return n+=this._rotation,n?"rotateZ(".concat(n,"deg)"):""}_update(t){e.window.cancelAnimationFrame(this._updateFrameId);const r=this._map;r&&(r.transform.renderWorldCopies&&(this._lngLat=Qo(this._lngLat,this._pos,r.transform)),this._pos=r.project(this._lngLat),!0===t?this._updateFrameId=e.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),r._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(r._showingGlobe()||r.getTerrain()||r.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})))}getOffset(){return this._offset}setOffset(t){return this._offset=e.Point.convert(t),this._update(),this}_onMove(t){const r=this._map;if(!r)return;const n=this._pointerdownPos,o=this._positionDelta;if(n&&o){if(!this._isDragging){const e=this._clickTolerance||r._clickTolerance;if(t.point.dist(n)<e)return;this._isDragging=!0}this._pos=t.point.sub(o),this._lngLat=r.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const t=this._map;t&&(t.off("mousemove",this._onMove),t.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}_addDragHandler(e){const t=this._map,r=this._pos;t&&r&&this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(r),this._pointerdownPos=e.point,this._state="pending",t.on("mousemove",this._onMove),t.on("touchmove",this._onMove),t.once("mouseup",this._onUp),t.once("touchend",this._onUp))}setDraggable(e){this._draggable=!!e;const t=this._map;return t&&(e?(t.on("mousedown",this._addDragHandler),t.on("touchstart",this._addDragHandler)):(t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(e){return this._occludedOpacity=e||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const ri={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ni=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function oi(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new e.Point(0,0),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom";if("number"==typeof t){const n=Math.round(Math.sqrt(.5*Math.pow(t,2)));switch(r){case"top":return new e.Point(0,t);case"top-left":return new e.Point(n,n);case"top-right":return new e.Point(-n,n);case"bottom":return new e.Point(0,-t);case"bottom-left":return new e.Point(n,-n);case"bottom-right":return new e.Point(-n,-n);case"left":return new e.Point(t,0);case"right":return new e.Point(-t,0)}return new e.Point(0,0)}return t instanceof e.Point||Array.isArray(t)?e.Point.convert(t):e.Point.convert(t[r]||[0,0])}class ii{constructor(e){this.jumpTo(e)}getValue(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;const r=e.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-r)+this._end*r}isEasing(e){return e>=this._startTime&&e<=this._endTime}jumpTo(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}easeTo(e,t,r){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+r}}const ai={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},si={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},li={showCompass:!0,showZoom:!0,visualizePitch:!1};class ci{constructor(t,r){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._clickTolerance=10,this.element=r,this.mouseRotate=new _o({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,n&&(this.mousePitch=new wo({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),r.addEventListener("mousedown",this.mousedown),r.addEventListener("touchstart",this.touchstart,{passive:!1}),r.addEventListener("touchmove",this.touchmove),r.addEventListener("touchend",this.touchend),r.addEventListener("touchcancel",this.reset)}down(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),u()}move(e,t){const r=this.map,n=this.mouseRotate.mousemoveWindow(e,t),o=n&&n.bearingDelta;if(o&&r.setBearing(r.getBearing()+o),this.mousePitch){const n=this.mousePitch.mousemoveWindow(e,t),o=n&&n.pitchDelta;o&&r.setPitch(r.getPitch()+o)}}off(){const e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart,{passive:!1}),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){d(),e.window.removeEventListener("mousemove",this.mousemove),e.window.removeEventListener("mouseup",this.mouseup)}mousedown(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),f(this.element,t)),e.window.addEventListener("mousemove",this.mousemove),e.window.addEventListener("mouseup",this.mouseup)}mousemove(e){this.move(e,f(this.element,e))}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=m(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos))}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=m(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos))}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const ui={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},di={maxWidth:100,unit:"metric"},hi={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},pi={version:e.version,supported:r,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:class extends Zo{constructor(t){if(e.LivePerformanceUtils.mark(e.PerformanceMarkers.create),null!=(t=e.extend({},si,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(t.antialias&&e.isSafariWithAntialiasingBug(e.window)&&(t.antialias=!1,e.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Zn(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t),this._interactive=t.interactive,this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._useWebGL2=t.useWebGL2,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=t.crossSourceCollisions,this._collectResourceTiming=t.collectResourceTiming,this._optimizeForTerrain=t.optimizeForTerrain,this._language=this._parseLanguage(t.language),this._worldview=t.worldview,this._renderTaskQueue=new $o,this._domRenderTaskQueue=new $o,this._controls=[],this._markers=[],this._popups=[],this._mapId=e.uniqueId(),this._locale=e.extend({},ai,t.locale),this._clickTolerance=t.clickTolerance,this._cooperativeGestures=t.cooperativeGestures,this._performanceMetricsCollection=t.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new ii(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken,t.testMode),this._silenceAuthErrors=!!t.testMode,"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error("Container '".concat(t.container,"' not found."))}else{if(!(t.container instanceof e.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(this._container.childNodes.length>0&&e.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1),e.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Ko(this,t),this._localFontFamily=t.localFontFamily,this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),t.projection&&this.setProjection(t.projection),this._hash=t.hash&&new Jn("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),t.attributionControl&&this.addControl(new Yo({customAttribution:t.customAttribution})),this._logoControl=new Jo,this.addControl(this._logoControl,t.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(t=>{this._update("style"===t.dataType),this.fire(new e.Event("".concat(t.dataType,"data"),t))})),this.on("dataloading",(t=>{this.fire(new e.Event("".concat(t.dataType,"dataloading"),t))}))}_getMapId(){return this._mapId}addControl(t,r){if(void 0===r&&(r=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const n=t.onAdd(this);this._controls.push(t);const o=this._controlPositions[r];return-1!==r.indexOf("bottom")?o.insertBefore(n,o.firstChild):o.appendChild(n),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(t);return r>-1&&this._controls.splice(r,1),t.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(t){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const r=!this._moving;return r&&this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)),this.fire(new e.Event("resize",t)),r&&this.fire(new e.Event("moveend",t)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(t){return"auto"===t?e.window.navigator.language:Array.isArray(t)?0===t.length?void 0:t.map((t=>"auto"===t?e.window.navigator.language:t)):t}setLanguage(e){const t=this._parseLanguage(e);if(!this.style||t===this._language)return this;this._language=t,this.style._reloadSources();for(const r of this._controls)r._setLanguage&&r._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(e){return this.style&&e!==this._worldview?(this._worldview=e,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(e){return this._lazyInitEmptyStyle(),e?"string"==typeof e&&(e={name:e}):e=null,this._useExplicitProjection=!!e,this._prioritizeAndUpdateProjection(e,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const t=this.transform,r=t.projection.name;let n;"globe"===r&&t.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?(t.setMercatorFromTransition(),n=!0):"mercator"===r&&t.zoom<e.GLOBE_ZOOM_THRESHOLD_MAX&&(t.setProjection({name:"globe"}),n=!0),n&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(e,t){return this._updateProjection(e||t||{name:"mercator"})}_updateProjection(t){let r;if(r="globe"===t.name&&this.transform.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(t),this.style.applyProjectionUpdate(),r){this.painter.clearBackgroundTiles();for(const e in this.style._sourceCaches)this.style._sourceCaches[e].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}unproject(t){return this.transform.pointLocation3D(e.Point.convert(t))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(e,t,r){if("mouseenter"===e||"mouseover"===e){let n=!1;const o=o=>{const i=t.filter((e=>this.getLayer(e))),a=i.length?this.queryRenderedFeatures(o.point,{layers:i}):[];a.length?n||(n=!0,r.call(this,new so(e,this,o.originalEvent,{features:a}))):n=!1},i=()=>{n=!1};return{layers:new Set(t),listener:r,delegates:{mousemove:o,mouseout:i}}}if("mouseleave"===e||"mouseout"===e){let n=!1;const o=o=>{const i=t.filter((e=>this.getLayer(e)));(i.length?this.queryRenderedFeatures(o.point,{layers:i}):[]).length?n=!0:n&&(n=!1,r.call(this,new so(e,this,o.originalEvent)))},i=t=>{n&&(n=!1,r.call(this,new so(e,this,t.originalEvent)))};return{layers:new Set(t),listener:r,delegates:{mousemove:o,mouseout:i}}}{const n=e=>{const n=t.filter((e=>this.getLayer(e))),o=n.length?this.queryRenderedFeatures(e.point,{layers:n}):[];o.length&&(e.features=o,r.call(this,e),delete e.features)};return{layers:new Set(t),listener:r,delegates:{[e]:n}}}}on(e,t,r){if(void 0===r)return super.on(e,t);Array.isArray(t)||(t=[t]);const n=this._createDelegatedListener(e,t,r);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(n);for(const o in n.delegates)this.on(o,n.delegates[o]);return this}once(e,t,r){if(void 0===r)return super.once(e,t);Array.isArray(t)||(t=[t]);const n=this._createDelegatedListener(e,t,r);for(const o in n.delegates)this.once(o,n.delegates[o]);return this}off(e,t,r){if(void 0===r)return super.off(e,t);t=new Set(Array.isArray(t)?t:[t]);const n=(e,t)=>{if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0},o=this._delegatedListeners?this._delegatedListeners[e]:void 0;return o&&(e=>{for(let o=0;o<e.length;o++){const i=e[o];if(i.listener===r&&n(i.layers,t)){for(const e in i.delegates)this.off(e,i.delegates[e]);return e.splice(o,1),this}}})(o),this}queryRenderedFeatures(t,r){return this.style?(void 0!==r||void 0===t||t instanceof e.Point||Array.isArray(t)||(r=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],r=r||{},this.transform)):[]}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}isPointOnSurface(t){const{name:r}=this.transform.projection;return"globe"!==r&&"mercator"!==r&&e.warnOnce("".concat(r," projection does not support isPointOnSurface, this API may behave unexpectedly.")),this.transform.isPointOnSurface(e.Point.convert(t))}setStyle(t,r){return!1!==(r=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},r)).diff&&r.localIdeographFontFamily===this._localIdeographFontFamily&&r.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._localFontFamily=r.localFontFamily,this._updateStyle(t,r))}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error("Missing UI string '".concat(e,"'"));return t}_updateStyle(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),e&&(this.style=new Jt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Jt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(t,r){if("string"==typeof t){const n=this._requestManager.normalizeStyleURL(t),o=this._requestManager.transformRequest(n,e.ResourceType.Style);e.getJSON(o,((t,n)=>{t?this.fire(new e.ErrorEvent(t)):n&&this._updateDiff(n,r)}))}else"object"==typeof t&&this._updateDiff(t,r)}_updateDiff(t,r){try{this.style.setState(t)&&this._update(!0)}catch(n){e.warnOnce("Unable to perform style diff: ".concat(n.message||n.error||n,".  Rebuilding the style from scratch.")),this._updateStyle(t,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(e.warnOnce("There is no style added to the map."),!1)}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){return!!this.style&&this.style._isSourceCacheLoaded(e)}areTilesLoaded(){const e=this.style&&this.style._sourceCaches;for(const t in e){const r=e[t]._tiles;for(const e in r){const t=r[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}addSourceType(e,t,r){this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,r)}removeSource(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(t,r){let{pixelRatio:n=1,sdf:o=!1,stretchX:i,stretchY:a,content:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._lazyInitEmptyStyle(),r instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&r instanceof e.window.ImageBitmap){const{width:l,height:c,data:u}=e.exported.getImageData(r);this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},u),pixelRatio:n,stretchX:i,stretchY:a,content:s,sdf:o,version:0})}else if(void 0===r.width||void 0===r.height)this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:l,height:c}=r,u=r;this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},new Uint8Array(u.data)),pixelRatio:n,stretchX:i,stretchY:a,content:s,sdf:o,version:0,userImage:u}),u.onAdd&&u.onAdd(this,t)}}updateImage(t,r){const n=this.style.getImage(t);if(!n)return void this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const o=r instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&r instanceof e.window.ImageBitmap?e.exported.getImageData(r):r,{width:i,height:a}=o;void 0!==i&&void 0!==a?i===n.data.width&&a===n.data.height?(n.data.replace(o.data,!(r instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&r instanceof e.window.ImageBitmap)),this.style.updateImage(t,n)):this.fire(new e.ErrorEvent(new Error("The width and height of the updated image (".concat(i,", ").concat(a,")\n                must be that same as the previous version of the image\n                (").concat(n.data.width,", ").concat(n.data.height,")")))):this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(t,r){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),((t,n)=>{r(t,n instanceof e.window.HTMLImageElement?e.exported.getImageData(n):n)}))}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}setLayerZoomRange(e,t,r){return this.style.setLayerZoomRange(e,t,r),this._update(!0)}setFilter(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(e,t,r),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(e,t,r,n),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(e,t,r,n),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setLight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(t),this.transform):0}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}_updateContainerDimensions(){if(!this._container)return;const t=this._container.getBoundingClientRect().width||400,r=this._container.getBoundingClientRect().height||300;let n,o,i,a=this._container;for(;a&&(!o||!i);){const t=e.window.getComputedStyle(a).transform;t&&"none"!==t&&(n=t.match(/matrix.*\((.+)\)/)[1].split(", "),n[0]&&"0"!==n[0]&&"1"!==n[0]&&(o=n[0]),n[3]&&"0"!==n[3]&&"1"!==n[3]&&(i=n[3])),a=a.parentElement}this._containerWidth=o?Math.abs(t/o):t,this._containerHeight=i?Math.abs(r/i):r}_detectMissingCSS(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=i("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();const t=this._canvasContainer=i("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=i("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const r=this._controlContainer=i("div","mapboxgl-control-container",e),n=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((e=>{n[e]=i("div","mapboxgl-ctrl-".concat(e),r)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(t,r){const n=e.exported.devicePixelRatio||1;this._canvas.width=n*Math.ceil(t),this._canvas.height=n*Math.ceil(r),this._canvas.style.width="".concat(t,"px"),this._canvas.style.height="".concat(r,"px")}_addMarker(e){this._markers.push(e)}_removeMarker(e){const t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1)}_addPopup(e){this._popups.push(e)}_removePopup(e){const t=this._popups.indexOf(e);-1!==t&&this._popups.splice(t,1)}_setupPainter(){const t=e.extend({},r.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._useWebGL2&&this._canvas.getContext("webgl2",t),o=n||this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);o?(this._useWebGL2&&!n&&e.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),e.storeAuthState(o,!0),this.painter=new Fn(o,this.transform,!!n),this.on("data",(e=>{"source"===e.dataType&&this.painter.setTileLoadedFlag(!0)})),e.exported$1.testSupport(o)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}_contextRestored(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_requestDomTask(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e)}_render(t){let r;const n=this.painter.context.extTimerQuery,o=e.exported.now();if(this.listens("gpu-timing-frame")&&(r=n.createQueryEXT(),n.beginQueryEXT(n.TIME_ELAPSED_EXT,r)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],e.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],e.window.performance.now())),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),this._removed)return;this._updateProjectionTransition();const i=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,r=this.transform.pitch,n=e.exported.now(),o=new e.EvaluationParameters(t,{now:n,fadeDuration:i,pitch:r,transition:this.style.getTransition()});this.style.update(o)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let a=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),a=this._updateAverageElevation(o),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):a=this._updateAverageElevation(o),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),r){const t=e.exported.now()-o;n.endQueryEXT(n.TIME_ELAPSED_EXT,r),setTimeout((()=>{const i=n.getQueryObjectEXT(r,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(r),this.fire(new e.Event("gpu-timing-frame",{cpuTime:t,gpuTime:i})),e.window.performance.mark("frame-gpu",{startTime:o,detail:{gpuTime:i}})}),50)}if(this.listens("gpu-timing-layer")){const t=this.painter.collectGpuTimers();setTimeout((()=>{const r=this.painter.queryGpuTimers(t);this.fire(new e.Event("gpu-timing-layer",{layerTimes:r}))}),50)}if(this.listens("gpu-timing-deferred-render")){const t=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const r=this.painter.queryGpuTimeDeferredRender(t);this.fire(new e.Event("gpu-timing-deferred-render",{gpuTime:r}))}),50)}const s=this._sourcesDirty||this._styleDirty||this._placementDirty||a;if(s||this._repaint)this.triggerRepaint();else{const t=!this.isMoving()&&this.loaded();if(t&&(a=this._updateAverageElevation(o,!0)),a)this.triggerRepaint();else if(this._triggerFrame(!1),t&&(this.fire(new e.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const t=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:t})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||s||(this._fullyLoaded=!0,e.LivePerformanceUtils.mark(e.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&e.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(e){for(const t of this._markers)e&&!this.getRenderWorldCopies()&&(t._lngLat=t._lngLat.wrap()),t._update();for(const t of this._popups)!e||this.getRenderWorldCopies()||t._trackPointer||(t._lngLat=t._lngLat.wrap()),t._update()}_updateAverageElevation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=e=>(this.transform.averageElevation=e,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&r(0);if((t||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){const t=this.transform.averageElevation;let n=this.transform.sampleAverageElevation(),o=!1;this.transform.elevation&&(o=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(n)?n=0:this._averageElevationLastSampledAt=e;const i=Math.abs(t-n);if(i>1){if(this._isInitialLoad||o)return this._averageElevation.jumpTo(n),r(n);this._averageElevation.easeTo(n,e,300)}else if(i>1e-4)return this._averageElevation.jumpTo(n),r(n)}return!!this._averageElevation.isEasing(e)&&r(this._averageElevation.getValue(e))}_authenticate(){e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(t=>{if(t&&(t.message===e.AUTH_ERR_MSG||401===t.status)){const t=this.painter.context.gl;e.storeAuthState(t,!1),this._logoControl instanceof Jo&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new e.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){const e=this._isDragging();this.painter.updateTerrain(this.style,e)}_calculateSpeedIndex(){const e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const r=this.painter.context.gl,n=r.createFramebuffer();function o(e){r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0);const t=new Uint8Array(r.drawingBufferWidth*r.drawingBufferHeight*4);return r.readPixels(0,0,r.drawingBufferWidth,r.drawingBufferHeight,r.RGBA,r.UNSIGNED_BYTE,t),t}return r.bindFramebuffer(r.FRAMEBUFFER,n),this._canvasPixelComparison(o(e),t.canvasCopies.map(o),t.timeStamps)}_canvasPixelComparison(e,t,r){let n=r[1]-r[0];const o=e.length/4;for(let i=0;i<t.length;i++){const a=t[i];let s=0;for(let t=0;t<a.length;t+=4)a[t]===e[t]&&a[t+1]===e[t+1]&&a[t+2]===e[t+2]&&a[t+3]===e[t+3]&&(s+=1);n+=(r[i+2]-r[i+1])*(1-s/o)}return n}remove(){this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1),e.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(t){this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.exported.frame((e=>{const t=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,t&&this._render(e)})))}_preloadTiles(t){const r=this.style?Object.values(this.style._sourceCaches):[];return e.asyncAll(r,((e,r)=>e._preloadTiles(t,r)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update()}_onVisibilityChange(){"hidden"===e.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(e){this._showTileAABBs!==e&&(this._showTileAABBs=e,e&&this._update())}_setCacheLimits(t,r){e.setCacheLimits(t,r)}get version(){return e.version}},NavigationControl:class{constructor(t){this.options=e.extend({},li,t),this._container=i("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(e=>{this._map&&this._map.zoomIn({},{originalEvent:e})})),i("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(e=>{this._map&&this._map.zoomOut({},{originalEvent:e})})),i("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(e=>{const t=this._map;t&&(this.options.visualizePitch?t.resetNorthPitch({},{originalEvent:e}):t.resetNorth({},{originalEvent:e}))})),this._compassIcon=i("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const e=this._map;if(!e)return;const t=e.getZoom(),r=t===e.getMaxZoom(),n=t===e.getMinZoom();this._zoomInButton.disabled=r,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",r.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())}_rotateCompassArrow(){const e=this._map;if(!e)return;const t=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(e.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(e.transform.pitch,"deg) rotateZ(").concat(e.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(e.transform.angle*(180/Math.PI),"deg)");e._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=t)}))}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),e.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&e.on("pitch",this._rotateCompassArrow),e.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ci(e,this._compass,this.options.visualizePitch)),this._container}onRemove(){const e=this._map;e&&(this._container.remove(),this.options.showZoom&&e.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&e.off("pitch",this._rotateCompassArrow),e.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(e,t){const r=i("button",e,this._container);return r.type="button",r.addEventListener("click",t),r}_setButtonTitle(e,t){if(!this._map)return;const r=this._map._getUIString("NavigationControl.".concat(t));e.setAttribute("aria-label",r),e.firstElementChild&&e.firstElementChild.setAttribute("title",r)}},GeolocateControl:class extends e.Evented{constructor(t){super(),this.options=e.extend({geolocation:e.window.navigator.geolocation},ui,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Yn(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(e){return this._map=e,this._container=i("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(t){var r=this;const n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!!r.options.geolocation;r._supportsGeolocation=e,t(e)};void 0!==this._supportsGeolocation?t(this._supportsGeolocation):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((e=>n("denied"!==e.state))).catch((()=>n())):n()}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),r=e.coords;return!!t&&(r.longitude<t.getWest()||r.longitude>t.getEast()||r.latitude<t.getSouth()||r.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}_updateCamera(t){const r=new e.LngLat(t.coords.longitude,t.coords.latitude),n=t.coords.accuracy,o=this._map.getBearing(),i=e.extend({bearing:o},this.options.fitBoundsOptions);this._map.fitBounds(r.toBounds(n),i,{geolocateSource:!0})}_updateMarker(t){if(t){const r=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const t=this._map.transform,r=e.mercatorZfromAltitude(1,t._center.lat)*t.worldSize,n=Math.ceil(2*this._accuracy*r);this._circleElement.style.width="".concat(n,"px"),this._circleElement.style.height="".concat(n,"px")}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(t){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=i("button","mapboxgl-ctrl-geolocate",this._container),i("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i("div","mapboxgl-user-location"),this._dotElement.appendChild(i("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(i("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new ti({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=i("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ti({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new e.Event("trackuserlocationend")))}))}}_onDeviceOrientation(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(e={maximumAge:6e5,timeout:0},this._noTimeout=!0):(e=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,e),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const t=()=>{e.window.addEventListener("ondeviceorientationabsolute"in e.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==e.window.DeviceMotionEvent&&"function"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((e=>{"granted"===e&&t()})).catch(console.error):t()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener("deviceorientation",this._onDeviceOrientation),e.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Yo,ScaleControl:class{constructor(t){this.options=e.extend({},di,t),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch(e){return!1}}(),e.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const e=this.options.maxWidth||100,t=this._map,r=t._containerHeight/2,n=t._containerWidth/2-e/2,o=t.unproject([n,r]),i=t.unproject([n+e,r]),a=o.distanceTo(i);if("imperial"===this.options.unit){const t=3.2808*a;t>5280?this._setScale(e,t/5280,"mile"):this._setScale(e,t,"foot")}else"nautical"===this.options.unit?this._setScale(e,a/1852,"nautical-mile"):a>=1e3?this._setScale(e,a/1e3,"kilometer"):this._setScale(e,a,"meter")}_setScale(e,t,r){this._map._requestDomTask((()=>{const n=function(e){const t=Math.pow(10,"".concat(Math.floor(e)).length-1);let r=e/t;return r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:r>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(r),t*r}(t),o=n/t;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==r?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:r}).format(n):"".concat(n,"&nbsp;").concat(hi[r]),this._container.style.width=e*o+"px"}))}onAdd(e){return this._map=e,this._language=e.getLanguage(),this._container=i("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(e){this._language=e,this._update()}setUnit(e){this.options.unit=e,this._update()}},FullscreenControl:class{constructor(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=i("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=i("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",e)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends e.Evented{constructor(t){super(),this.options=e.extend(Object.create(ri),t),e.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(t&&t.className?t.className.trim().split(/\s+/):[])}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&t.on("preclick",this._onClose),this.options.closeOnMove&&t.on("move",this._onClose),t.on("remove",this.remove),this._update(),t._addPopup(this),this._focusFirstElement(),this._trackPointer?(t.on("mousemove",this._onMouseEvent),t.on("mouseup",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")):t.on("move",this._update),this.fire(new e.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const t=this._map;return t&&(t.off("move",this._update),t.off("move",this._onClose),t.off("preclick",this._onClose),t.off("click",this._onClose),t.off("remove",this.remove),t.off("mousemove",this._onMouseEvent),t.off("mouseup",this._onMouseEvent),t.off("drag",this._onMouseEvent),t._canvasContainer&&t._canvasContainer.classList.remove("mapboxgl-track-pointer"),t._removePopup(this),this._map=void 0),this.fire(new e.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(t){this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update();const r=this._map;return r&&(r.on("move",this._update),r.off("mousemove",this._onMouseEvent),r._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const e=this._map;return e&&(e.off("move",this._update),e.on("mousemove",this._onMouseEvent),e.on("drag",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(e.window.document.createTextNode(t))}setHTML(t){const r=e.window.document.createDocumentFragment(),n=e.window.document.createElement("body");let o;for(n.innerHTML=t;o=n.firstChild,o;)r.appendChild(o);return this.setDOMContent(r)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){let t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=i("div","mapboxgl-popup-content",this._container||void 0);if(t.appendChild(e),this.options.closeButton){const e=this._closeButton=i("button","mapboxgl-popup-close-button",t);e.type="button",e.setAttribute("aria-label","Close popup"),e.setAttribute("aria-hidden","true"),e.innerHTML="&#215;",e.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(e){return this._classList.add(e),this._updateClassList(),this}removeClassName(e){return this._classList.delete(e),this._updateClassList(),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){let t;return this._classList.delete(e)?t=!1:(this._classList.add(e),t=!0),this._updateClassList(),t}_onMouseEvent(e){this._update(e.point)}_getAnchor(e){if(this.options.anchor)return this.options.anchor;const t=this._map,r=this._container,n=this._pos;if(!t||!r||!n)return"bottom";const o=r.offsetWidth,i=r.offsetHeight,a=n.x<o/2,s=n.x>t.transform.width-o/2;if(n.y+e<i)return a?"top-left":s?"top-right":"top";if(n.y>t.transform.height-i){if(a)return"bottom-left";if(s)return"bottom-right"}return a?"left":s?"right":"bottom"}_updateClassList(){const e=this._container;if(!e)return;const t=[...this._classList];t.push("mapboxgl-popup"),this._anchor&&t.push("mapboxgl-popup-anchor-".concat(this._anchor)),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),e.className=t.join(" ")}_update(t){const r=this._map,n=this._content;if(!r||!this._lngLat&&!this._trackPointer||!n)return;let o=this._container;if(o||(o=this._container=i("div","mapboxgl-popup",r.getContainer()),this._tip=i("div","mapboxgl-popup-tip",o),o.appendChild(n)),this.options.maxWidth&&o.style.maxWidth!==this.options.maxWidth&&(o.style.maxWidth=this.options.maxWidth),r.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Qo(this._lngLat,this._pos,r.transform)),!this._trackPointer||t){const e=this._pos=this._trackPointer&&t?t:r.project(this._lngLat),n=oi(this.options.offset),o=this._anchor=this._getAnchor(n.y),i=oi(this.options.offset,o),a=e.add(i).round();r._requestDomTask((()=>{this._container&&o&&(this._container.style.transform="".concat(ei[o]," translate(").concat(a.x,"px,").concat(a.y,"px)"))}))}if(!this._marker&&r._showingGlobe()){const t=e.isLngLatBehindGlobe(r.transform,this._lngLat)?0:1;this._setOpacity(t)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(ni);e&&e.focus()}_onClose(){this.remove()}_setOpacity(e){this._container&&(this._container.style.opacity="".concat(e)),this._content&&(this._content.style.pointerEvents=e?"auto":"none")}},Marker:ti,Style:Jt,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:Un,Evented:e.Evented,config:e.config,prewarm:function(){Ne().acquire(Fe)},clearPrewarmedResources:function(){const e=De;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(Fe),De=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return ze.workerCount},set workerCount(e){ze.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage(t){e.clearTileCache(t)},workerUrl:"",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return pi})),r}()},881:e=>{function t(e){function r(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return t=function(e){this.s=e,this.n=e.next},t.prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):r(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):r(t.apply(this.s,arguments))}},new t(e)}e.exports=function(e){var r,n,o,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,o=Symbol.iterator);i--;){if(n&&null!=(r=e[n]))return r.call(e);if(o&&null!=(r=e[o]))return new t(r.call(e));n="@@asyncIterator",o="@@iterator"}throw new TypeError("Object is not async iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},897:(e,t,r)=>{var n=r(693);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},950:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(730)},958:(e,t,r)=>{var n=r(172);function o(e){var t,r;function o(t,r){try{var a=e[t](r),s=a.value,l=s instanceof n;Promise.resolve(l?s.v:s).then((function(r){if(l){var n="return"===t?"return":"next";if(!s.k||r.done)return o(n,r);r=e[n](r).value}i(a.done?"return":"normal",r)}),(function(e){o("throw",e)}))}catch(e){i("throw",e)}}function i(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?o(t.key,t.arg):r=null}this._invoke=function(e,n){return new Promise((function(i,a){var s={key:e,arg:n,resolve:i,reject:a,next:null};r?r=r.next=s:(t=r=s,o(e,n))}))},"function"!=typeof e.return&&(this.return=void 0)}o.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},o.prototype.next=function(e){return this._invoke("next",e)},o.prototype.throw=function(e){return this._invoke("throw",e)},o.prototype.return=function(e){return this._invoke("return",e)},e.exports=function(e){return function(){return new o(e.apply(this,arguments))}},e.exports.__esModule=!0,e.exports.default=e.exports},983:(e,t)=>{"use strict";var r="function"===typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,v=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,x=r?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case u:case d:case i:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case m:case l:return e;default:return t}}case o:return t}}}function w(e){return _(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=n,t.ForwardRef=h,t.Fragment=i,t.Lazy=g,t.Memo=m,t.Portal=o,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return w(e)||_(e)===u},t.isConcurrentMode=w,t.isContextConsumer=function(e){return _(e)===c},t.isContextProvider=function(e){return _(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return _(e)===h},t.isFragment=function(e){return _(e)===i},t.isLazy=function(e){return _(e)===g},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===o},t.isProfiler=function(e){return _(e)===s},t.isStrictMode=function(e){return _(e)===a},t.isSuspense=function(e){return _(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===d||e===s||e===a||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===v||e.$$typeof===b||e.$$typeof===x||e.$$typeof===y)},t.typeOf=_}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if("object"===typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&"function"===typeof n.then)return n}var i=Object.create(null);r.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>n[e]));return a.default=()=>n,r.d(i,a),i}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>"static/js/"+e+".e75445ad.chunk.js",r.miniCssF=e=>{},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="frontend:";r.l=(n,o,i,a)=>{if(e[n])e[n].push(o);else{var s,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",t+i),s.src=n),e[n]=[o];var h=(t,r)=>{s.onerror=s.onload=null,clearTimeout(p);var o=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(r))),t)return t(r)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/",(()=>{var e={792:0};r.f.j=(t,n)=>{var o=r.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var i=new Promise(((r,n)=>o=e[t]=[r,n]));n.push(o[2]=i);var a=r.p+r.u(t),s=new Error;r.l(a,(n=>{if(r.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,o[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var o,i,a=n[0],s=n[1],l=n[2],c=0;if(a.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(l)l(r)}for(t&&t(n);c<a.length;c++)i=a[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunkfrontend=self.webpackChunkfrontend||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e={};r.r(e),r.d(e,{hasBrowserEnv:()=>Ys,hasStandardBrowserEnv:()=>$s,hasStandardBrowserWebWorkerEnv:()=>Qs,navigator:()=>Js,origin:()=>el});var t=r(43),n=r.t(t,2),o=r(391);function i(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}function a(e,t){if(null==e)return{};var r,n,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function c(e,t,r){return(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(358);const h=["page"],p=["page","matches"],f=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],g=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var y="popstate";function v(){return T((function(e,t){let{pathname:r,search:n,hash:o}=e.location;return w("",{pathname:r,search:n,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:S(t)}),null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function b(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function x(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function _(e,t){return{usr:e.state,key:e.key,idx:t}}function w(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;return d(d({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?k(t):t),{},{state:r,key:t&&t.key||n||Math.random().toString(36).substring(2,10)})}function S(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function k(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function T(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:o=document.defaultView,v5Compat:i=!1}=n,a=o.history,s="POP",l=null,c=u();function u(){return(a.state||{idx:null}).idx}function h(){s="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:s,location:f.location,delta:t})}function p(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,r="string"===typeof e?e:S(e);return r=r.replace(/ $/,"%20"),b(t,"No window.location.(origin|href) available to create URL for href: ".concat(r)),new URL(r,t)}null==c&&(c=0,a.replaceState(d(d({},a.state),{},{idx:c}),""));let f={get action(){return s},get location(){return e(o,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(y,h),l=e,()=>{o.removeEventListener(y,h),l=null}},createHref:e=>t(o,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){s="PUSH";let n=w(f.location,e,t);r&&r(n,e),c=u()+1;let d=_(n,c),h=f.createHref(n);try{a.pushState(d,"",h)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;o.location.assign(h)}i&&l&&l({action:s,location:f.location,delta:1})},replace:function(e,t){s="REPLACE";let n=w(f.location,e,t);r&&r(n,e),c=u();let o=_(n,c),d=f.createHref(n);a.replaceState(o,"",d),i&&l&&l({action:s,location:f.location,delta:0})},go:e=>a.go(e)};return f}new WeakMap;function E(e,t){return C(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function C(e,t,r,n){let o=U(("string"===typeof t?k(t):t).pathname||"/",r);if(null==o)return null;let i=A(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every(((e,r)=>e===t[r]));return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let a=null;for(let s=0;null==a&&s<i.length;++s){let e=B(o);a=D(i[s],e,n)}return a}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=(e,o,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};a.relativePath.startsWith("/")&&(b(a.relativePath.startsWith(n),'Absolute route path "'.concat(a.relativePath,'" nested under path "').concat(n,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),a.relativePath=a.relativePath.slice(n.length));let s=G([n,a.relativePath]),l=r.concat(a);e.children&&e.children.length>0&&(b(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(s,'".')),A(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:z(s,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var r;if(""!==e.path&&null!==(r=e.path)&&void 0!==r&&r.includes("?"))for(let n of j(e.path))o(e,t,n);else o(e,t)})),t}function j(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,o=r.endsWith("?"),i=r.replace(/\?$/,"");if(0===n.length)return o?[i,""]:[i];let a=j(n.join("/")),s=[];return s.push(...a.map((e=>""===e?i:[i,e].join("/")))),o&&s.push(...a),s.map((t=>e.startsWith("/")&&""===t?"/":t))}var P=/^:[\w-]+$/,I=3,O=2,M=1,R=10,L=-2,F=e=>"*"===e;function z(e,t){let r=e.split("/"),n=r.length;return r.some(F)&&(n+=L),t&&(n+=O),r.filter((e=>!F(e))).reduce(((e,t)=>e+(P.test(t)?I:""===t?M:R)),n)}function D(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:n}=e,o={},i="/",a=[];for(let s=0;s<n.length;++s){let e=n[s],l=s===n.length-1,c="/"===i?t:t.slice(i.length)||"/",u=N({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&r&&!n[n.length-1].route.index&&(u=N({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(o,u.params),a.push({params:o,pathname:G([i,u.pathname]),pathnameBase:K(G([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=G([i,u.pathnameBase]))}return a}function N(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];x("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let n=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(n.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");let i=new RegExp(o,t?void 0:"i");return[i,n]}(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let i=o[0],a=i.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:n.reduce(((e,t,r)=>{let{paramName:n,isOptional:o}=t;if("*"===n){let e=s[r]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[r];return e[n]=o&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:i,pathnameBase:a,pattern:e}}function B(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return x(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function U(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function V(e,t,r,n){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(n),"].  Please separate it out to the `to.").concat(r,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function W(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function q(e){let t=W(e);return t.map(((e,r)=>r===t.length-1?e.pathname:e.pathnameBase))}function H(e,t,r){let n,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?n=k(e):(n=d({},e),b(!n.pathname||!n.pathname.includes("?"),V("?","pathname","search",n)),b(!n.pathname||!n.pathname.includes("#"),V("#","pathname","hash",n)),b(!n.search||!n.search.includes("#"),V("#","search","hash",n)));let i,a=""===e||""===n.pathname,s=a?"/":n.pathname;if(null==s)i=r;else{let e=t.length-1;if(!o&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:r,search:n="",hash:o=""}="string"===typeof e?k(e):e,i=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)})),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:i,search:X(n),hash:Z(o)}}(n,i),c=s&&"/"!==s&&s.endsWith("/"),u=(a||"."===s)&&r.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var G=e=>e.join("/").replace(/\/\/+/g,"/"),K=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),X=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Y(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var J=["POST","PUT","PATCH","DELETE"],$=(new Set(J),["GET",...J]);new Set($),Symbol("ResetLoaderData");var Q=t.createContext(null);Q.displayName="DataRouter";var ee=t.createContext(null);ee.displayName="DataRouterState";var te=t.createContext({isTransitioning:!1});te.displayName="ViewTransition";var re=t.createContext(new Map);re.displayName="Fetchers";var ne=t.createContext(null);ne.displayName="Await";var oe=t.createContext(null);oe.displayName="Navigation";var ie=t.createContext(null);ie.displayName="Location";var ae=t.createContext({outlet:null,matches:[],isDataRoute:!1});ae.displayName="Route";var se=t.createContext(null);se.displayName="RouteError";function le(){return null!=t.useContext(ie)}function ce(){return b(le(),"useLocation() may be used only in the context of a <Router> component."),t.useContext(ie).location}var ue="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function de(e){t.useContext(oe).static||t.useLayoutEffect(e)}function he(){let{isDataRoute:e}=t.useContext(ae);return e?function(){let{router:e}=_e("useNavigate"),r=Se("useNavigate"),n=t.useRef(!1);de((()=>{n.current=!0}));let o=t.useCallback((async function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(n.current,ue),n.current&&("number"===typeof t?e.navigate(t):await e.navigate(t,d({fromRouteId:r},o)))}),[e,r]);return o}():function(){b(le(),"useNavigate() may be used only in the context of a <Router> component.");let e=t.useContext(Q),{basename:r,navigator:n}=t.useContext(oe),{matches:o}=t.useContext(ae),{pathname:i}=ce(),a=JSON.stringify(q(o)),s=t.useRef(!1);de((()=>{s.current=!0}));let l=t.useCallback((function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(x(s.current,ue),!s.current)return;if("number"===typeof t)return void n.go(t);let l=H(t,JSON.parse(a),i,"path"===o.relative);null==e&&"/"!==r&&(l.pathname="/"===l.pathname?r:G([r,l.pathname])),(o.replace?n.replace:n.push)(l,o.state,o)}),[r,n,a,i,e]);return l}()}t.createContext(null);function pe(e){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=t.useContext(ae),{pathname:o}=ce(),i=JSON.stringify(q(n));return t.useMemo((()=>H(e,JSON.parse(i),o,"path"===r)),[e,i,o,r])}function fe(e,r,n,o){b(le(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:a}=t.useContext(oe),{matches:s}=t.useContext(ae),l=s[s.length-1],c=l?l.params:{},u=l?l.pathname:"/",h=l?l.pathnameBase:"/",p=l&&l.route;{let e=p&&p.path||"";Ee(u,!p||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let f,m=ce();if(r){var g;let e="string"===typeof r?k(r):r;b("/"===h||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),f=e}else f=m;let y=f.pathname||"/",v=y;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let _=!a&&n&&n.matches&&n.matches.length>0?n.matches:E(e,{pathname:v});x(p||null!=_,'No routes matched location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" ')),x(null==_||void 0!==_[_.length-1].route.element||void 0!==_[_.length-1].route.Component||void 0!==_[_.length-1].route.lazy,'Matched leaf route at location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let w=be(_&&_.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:G([h,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:G([h,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,n,o);return r&&w?t.createElement(ie.Provider,{value:{location:d({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:"POP"}},w):w}function me(){let e=ke(),r=Y(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,o="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:o},a={padding:"2px 4px",backgroundColor:o},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=t.createElement(t.Fragment,null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",t.createElement("code",{style:a},"ErrorBoundary")," or"," ",t.createElement("code",{style:a},"errorElement")," prop on your route.")),t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},r),n?t.createElement("pre",{style:i},n):null,s)}var ge=t.createElement(me,null),ye=class extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(ae.Provider,{value:this.props.routeContext},t.createElement(se.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ve(e){let{routeContext:r,match:n,children:o}=e,i=t.useContext(Q);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),t.createElement(ae.Provider,{value:r},o)}function be(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==r.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let o=e,i=null===n||void 0===n?void 0:n.errors;if(null!=i){let e=o.findIndex((e=>e.route.id&&void 0!==(null===i||void 0===i?void 0:i[e.route.id])));b(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(i).join(","))),o=o.slice(0,Math.min(o.length,e+1))}let a=!1,s=-1;if(n)for(let t=0;t<o.length;t++){let e=o[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(s=t),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){a=!0,o=s>=0?o.slice(0,s+1):[o[0]];break}}}return o.reduceRight(((e,l,c)=>{let u,d=!1,h=null,p=null;n&&(u=i&&l.route.id?i[l.route.id]:void 0,h=l.route.errorElement||ge,a&&(s<0&&0===c?(Ee("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):s===c&&(d=!0,p=l.route.hydrateFallbackElement||null)));let f=r.concat(o.slice(0,c+1)),m=()=>{let r;return r=u?h:d?p:l.route.Component?t.createElement(l.route.Component,null):l.route.element?l.route.element:e,t.createElement(ve,{match:l,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:r})};return n&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?t.createElement(ye,{location:n.location,revalidation:n.revalidation,component:h,error:u,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):m()}),null)}function xe(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function _e(e){let r=t.useContext(Q);return b(r,xe(e)),r}function we(e){let r=t.useContext(ee);return b(r,xe(e)),r}function Se(e){let r=function(e){let r=t.useContext(ae);return b(r,xe(e)),r}(e),n=r.matches[r.matches.length-1];return b(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function ke(){var e;let r=t.useContext(se),n=we("useRouteError"),o=Se("useRouteError");return void 0!==r?r:null===(e=n.errors)||void 0===e?void 0:e[o]}var Te={};function Ee(e,t,r){t||Te[e]||(Te[e]=!0,x(!1,r))}t.memo((function(e){let{routes:t,future:r,state:n}=e;return fe(t,void 0,n,r)}));function Ce(e){let{to:r,replace:n,state:o,relative:i}=e;b(le(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=t.useContext(oe);x(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=t.useContext(ae),{pathname:l}=ce(),c=he(),u=H(r,q(s),l,"path"===i),d=JSON.stringify(u);return t.useEffect((()=>{c(JSON.parse(d),{replace:n,state:o,relative:i})}),[c,d,i,n,o]),null}function Ae(e){b(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function je(e){let{basename:r="/",children:n=null,location:o,navigationType:i="POP",navigator:a,static:s=!1}=e;b(!le(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=r.replace(/^\/*/,"/"),c=t.useMemo((()=>({basename:l,navigator:a,static:s,future:{}})),[l,a,s]);"string"===typeof o&&(o=k(o));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:f="default"}=o,m=t.useMemo((()=>{let e=U(u,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:p,key:f},navigationType:i}}),[l,u,d,h,p,f,i]);return x(null!=m,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(d).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==m?null:t.createElement(oe.Provider,{value:c},t.createElement(ie.Provider,{children:n,value:m}))}function Pe(e){let{children:t,location:r}=e;return fe(Ie(t),r)}t.Component;function Ie(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return t.Children.forEach(e,((e,o)=>{if(!t.isValidElement(e))return;let i=[...r,o];if(e.type===t.Fragment)return void n.push.apply(n,Ie(e.props.children,i));b(e.type===Ae,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),b(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Ie(e.props.children,i)),n.push(a)})),n}var Oe="get",Me="application/x-www-form-urlencoded";function Re(e){return null!=e&&"string"===typeof e.tagName}var Le=null;var Fe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ze(e){return null==e||Fe.has(e)?e:(x(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Me,'"')),null)}function De(e,t){let r,n,o,i,a;if(Re(s=e)&&"form"===s.tagName.toLowerCase()){let a=e.getAttribute("action");n=a?U(a,t):null,r=e.getAttribute("method")||Oe,o=ze(e.getAttribute("enctype"))||Me,i=new FormData(e)}else if(function(e){return Re(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Re(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let s=e.getAttribute("formaction")||a.getAttribute("action");if(n=s?U(s,t):null,r=e.getAttribute("formmethod")||a.getAttribute("method")||Oe,o=ze(e.getAttribute("formenctype"))||ze(a.getAttribute("enctype"))||Me,i=new FormData(a,e),!function(){if(null===Le)try{new FormData(document.createElement("form"),0),Le=!1}catch(e){Le=!0}return Le}()){let{name:t,type:r,value:n}=e;if("image"===r){let e=t?"".concat(t,"."):"";i.append("".concat(e,"x"),"0"),i.append("".concat(e,"y"),"0")}else t&&i.append(t,n)}}else{if(Re(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Oe,n=null,o=Me,a=e}var s;return i&&"text/plain"===o&&(a=i,i=void 0),{action:n,method:r.toLowerCase(),encType:o,formData:i,body:a}}function Ne(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function Be(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}function Ue(e){return null!=e&&"string"===typeof e.page}function Ve(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function We(e,t,r,n,o,i){let a=(e,t)=>!r[t]||e.route.id!==r[t].route.id,s=(e,t)=>{var n;return r[t].pathname!==e.pathname||(null===(n=r[t].route.path)||void 0===n?void 0:n.endsWith("*"))&&r[t].params["*"]!==e.params["*"]};return"assets"===i?t.filter(((e,t)=>a(e,t)||s(e,t))):"data"===i?t.filter(((t,i)=>{let l=n.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,i)||s(t,i))return!0;if(t.route.shouldRevalidate){var c;let n=t.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:(null===(c=r[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof n)return n}return!0})):[]}function qe(e,t){let{includeHydrateFallback:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n=e.map((e=>{let n=t.routes[e.route.id];if(!n)return[];let o=[n.module];return n.clientActionModule&&(o=o.concat(n.clientActionModule)),n.clientLoaderModule&&(o=o.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(o=o.concat(n.hydrateFallbackModule)),n.imports&&(o=o.concat(n.imports)),o})).flat(1),[...new Set(n)];var n}function He(e,t){let r=new Set,n=new Set(t);return e.reduce(((e,o)=>{if(t&&!Ue(o)&&"script"===o.as&&o.href&&n.has(o.href))return e;let i=JSON.stringify(function(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}(o));return r.has(i)||(r.add(i),e.push({key:i,link:o})),e}),[])}function Ge(e){return{__html:e}}Symbol("SingleFetchRedirect");function Ke(e,t){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.data":t&&"/"===U(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.data"):r.pathname="".concat(r.pathname.replace(/\/$/,""),".data"),r}t.Component;function Xe(e){let{error:r,isOutsideRemixApp:n}=e;console.error(r);let o,i=t.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://remix.run/guides/errors for more information."\n        );\n      '}});if(Y(r))return t.createElement(Ze,{title:"Unhandled Thrown Response!"},t.createElement("h1",{style:{fontSize:"24px"}},r.status," ",r.statusText),i);if(r instanceof Error)0;else{let e=null==r?"Unknown Error":"object"===typeof r&&"toString"in r?r.toString():JSON.stringify(r);new Error(e)}return t.createElement(Ze,{title:"Application Error!",isOutsideRemixApp:n},t.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),t.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},o.stack),i)}function Ze(e){var r;let{title:n,renderScripts:o,isOutsideRemixApp:i,children:a}=e,{routeModules:s}=et();return null!==s.root&&void 0!==r&&r.Layout&&!i?a:t.createElement("html",{lang:"en"},t.createElement("head",null,t.createElement("meta",{charSet:"utf-8"}),t.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),t.createElement("title",null,n)),t.createElement("body",null,t.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,o?t.createElement(st,null):null)))}function Ye(e){return!0===e}function Je(){let e=t.useContext(Q);return Ne(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function $e(){let e=t.useContext(ee);return Ne(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Qe=t.createContext(void 0);function et(){let e=t.useContext(Qe);return Ne(e,"You must render this element inside a <HydratedRouter> element"),e}function tt(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function rt(e,t,r){if(r&&!at)return[e[0]];if(t){let r=e.findIndex((e=>void 0!==t[e.route.id]));return e.slice(0,r+1)}return e}function nt(e){let{page:r}=e,n=a(e,h),{router:o}=Je(),i=t.useMemo((()=>E(o.routes,r,o.basename)),[o.routes,r,o.basename]);return i?t.createElement(it,d({page:r,matches:i},n)):null}function ot(e){let{manifest:r,routeModules:n}=et(),[o,i]=t.useState([]);return t.useEffect((()=>{let t=!1;return async function(e,t,r){return He((await Promise.all(e.map((async e=>{let n=t.routes[e.route.id];if(n){let e=await Be(n,r);return e.links?e.links():[]}return[]})))).flat(1).filter(Ve).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?d(d({},e),{},{rel:"prefetch",as:"style"}):d(d({},e),{},{rel:"prefetch"}))))}(e,r,n).then((e=>{t||i(e)})),()=>{t=!0}}),[e,r,n]),o}function it(e){let{page:r,matches:n}=e,o=a(e,p),i=ce(),{manifest:s,routeModules:l}=et(),{basename:c}=Je(),{loaderData:u,matches:h}=$e(),f=t.useMemo((()=>We(r,n,h,s,i,"data")),[r,n,h,s,i]),m=t.useMemo((()=>We(r,n,h,s,i,"assets")),[r,n,h,s,i]),g=t.useMemo((()=>{if(r===i.pathname+i.search+i.hash)return[];let e=new Set,t=!1;if(n.forEach((r=>{var n;let o=s.routes[r.route.id];o&&o.hasLoader&&(!f.some((e=>e.route.id===r.route.id))&&r.route.id in u&&null!==(n=l[r.route.id])&&void 0!==n&&n.shouldRevalidate||o.hasClientLoader?t=!0:e.add(r.route.id))})),0===e.size)return[];let o=Ke(r,c);return t&&e.size>0&&o.searchParams.set("_routes",n.filter((t=>e.has(t.route.id))).map((e=>e.route.id)).join(",")),[o.pathname+o.search]}),[c,u,i,s,f,n,r,l]),y=t.useMemo((()=>qe(m,s)),[m,s]),v=ot(m);return t.createElement(t.Fragment,null,g.map((e=>t.createElement("link",d({key:e,rel:"prefetch",as:"fetch",href:e},o)))),y.map((e=>t.createElement("link",d({key:e,rel:"modulepreload",href:e},o)))),v.map((e=>{let{key:r,link:n}=e;return t.createElement("link",d({key:r},n))})))}Qe.displayName="FrameworkContext";var at=!1;function st(e){let{manifest:r,serverHandoffString:n,isSpaMode:o,ssr:i,renderMeta:a}=et(),{router:s,static:l,staticContext:c}=Je(),{matches:u}=$e(),h=Ye(i);a&&(a.didRenderScripts=!0);let p=rt(u,null,o);t.useEffect((()=>{0}),[]);let f=t.useMemo((()=>{var o;let i=c?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",a=l?"".concat(null!==r.hmr&&void 0!==o&&o.runtime?"import ".concat(JSON.stringify(r.hmr.runtime),";"):"").concat(h?"":"import ".concat(JSON.stringify(r.url)),";\n").concat(p.map(((e,t)=>{let n="route".concat(t),o=r.routes[e.route.id];Ne(o,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:i,clientLoaderModule:a,hydrateFallbackModule:s,module:l}=o,c=[...i?[{module:i,varName:"".concat(n,"_clientAction")}]:[],...a?[{module:a,varName:"".concat(n,"_clientLoader")}]:[],...s?[{module:s,varName:"".concat(n,"_HydrateFallback")}]:[],{module:l,varName:"".concat(n,"_main")}];return 1===c.length?"import * as ".concat(n," from ").concat(JSON.stringify(l),";"):[c.map((e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";'))).join("\n"),"const ".concat(n," = {").concat(c.map((e=>"...".concat(e.varName))).join(","),"};")].join("\n")})).join("\n"),"\n  ").concat(h?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let r=new Set(t.state.matches.map((e=>e.route.id))),n=t.state.location.pathname.split("/").filter(Boolean),o=["/"];for(n.pop();n.length>0;)o.push("/".concat(n.join("/"))),n.pop();o.forEach((e=>{let n=E(t.routes,e,t.basename);n&&n.forEach((e=>r.add(e.route.id)))}));let i=[...r].reduce(((t,r)=>Object.assign(t,{[r]:e.routes[r]})),{});return d(d({},e),{},{routes:i})}(r,s),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(p.map(((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t))).join(","),"};\n\nimport(").concat(JSON.stringify(r.entry.module),");"):" ";return t.createElement(t.Fragment,null,t.createElement("script",d(d({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ge(i),type:void 0})),t.createElement("script",d(d({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ge(a),type:"module",async:!0})))}),[]),m=at?[]:r.entry.imports.concat(qe(p,r,{includeHydrateFallback:!0}));return at?null:t.createElement(t.Fragment,null,h?null:t.createElement("link",{rel:"modulepreload",href:r.url,crossOrigin:e.crossOrigin}),t.createElement("link",{rel:"modulepreload",href:r.entry.module,crossOrigin:e.crossOrigin}),[...new Set(g)].map((r=>t.createElement("link",{key:r,rel:"modulepreload",href:r,crossOrigin:e.crossOrigin}))),f);var g}function lt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))}}var ct="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ct&&(window.__reactRouterVersion="7.4.0")}catch(pC){}function ut(e){let{basename:r,children:n,window:o}=e,i=t.useRef();null==i.current&&(i.current=v({window:o,v5Compat:!0}));let a=i.current,[s,l]=t.useState({action:a.action,location:a.location}),c=t.useCallback((e=>{t.startTransition((()=>l(e)))}),[l]);return t.useLayoutEffect((()=>a.listen(c)),[a,c]),t.createElement(je,{basename:r,children:n,location:s.location,navigationType:s.action,navigator:a})}var dt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ht=t.forwardRef((function(e,r){let n,{onClick:o,discover:i="render",prefetch:s="none",relative:l,reloadDocument:c,replace:u,state:h,target:p,to:m,preventScrollReset:g,viewTransition:y}=e,v=a(e,f),{basename:_}=t.useContext(oe),w="string"===typeof m&&dt.test(m),k=!1;if("string"===typeof m&&w&&(n=m,ct))try{let e=new URL(window.location.href),t=m.startsWith("//")?new URL(e.protocol+m):new URL(m),r=U(t.pathname,_);t.origin===e.origin&&null!=r?m=r+t.search+t.hash:k=!0}catch(pC){x(!1,'<Link to="'.concat(m,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let T=function(e){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(le(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:o}=t.useContext(oe),{hash:i,pathname:a,search:s}=pe(e,{relative:r}),l=a;return"/"!==n&&(l="/"===a?n:G([n,a])),o.createHref({pathname:l,search:s,hash:i})}(m,{relative:l}),[E,C,A]=function(e,r){let n=t.useContext(Qe),[o,i]=t.useState(!1),[a,s]=t.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=r,p=t.useRef(null);t.useEffect((()=>{if("render"===e&&s(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{s(e.isIntersecting)}))}),{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}}),[e]),t.useEffect((()=>{if(o){let e=setTimeout((()=>{s(!0)}),100);return()=>{clearTimeout(e)}}}),[o]);let f=()=>{i(!0)},m=()=>{i(!1),s(!1)};return n?"intent"!==e?[a,p,{}]:[a,p,{onFocus:tt(l,f),onBlur:tt(c,m),onMouseEnter:tt(u,f),onMouseLeave:tt(d,m),onTouchStart:tt(h,f)}]:[!1,p,{}]}(s,v),j=function(e){let{target:r,replace:n,state:o,preventScrollReset:i,relative:a,viewTransition:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=he(),c=ce(),u=pe(e,{relative:a});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let r=void 0!==n?n:S(c)===S(u);l(e,{replace:r,state:o,preventScrollReset:i,relative:a,viewTransition:s})}}),[c,l,u,n,o,r,e,i,a,s])}(m,{replace:u,state:h,target:p,preventScrollReset:g,relative:l,viewTransition:y});let P=t.createElement("a",d(d(d({},v),A),{},{href:n||T,onClick:k||c?o:function(e){o&&o(e),e.defaultPrevented||j(e)},ref:lt(r,C),target:p,"data-discover":w||"render"!==i?void 0:"true"}));return E&&!w?t.createElement(t.Fragment,null,P,t.createElement(nt,{page:T})):P}));ht.displayName="Link";var pt=t.forwardRef((function(e,r){let{"aria-current":n="page",caseSensitive:o=!1,className:i="",end:s=!1,style:l,to:c,viewTransition:u,children:h}=e,p=a(e,m),f=pe(c,{relative:p.relative}),g=ce(),y=t.useContext(ee),{navigator:v,basename:x}=t.useContext(oe),_=null!=y&&function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.useContext(te);b(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=gt("useViewTransitionState"),i=pe(e,{relative:r.relative});if(!n.isTransitioning)return!1;let a=U(n.currentLocation.pathname,o)||n.currentLocation.pathname,s=U(n.nextLocation.pathname,o)||n.nextLocation.pathname;return null!=N(i.pathname,s)||null!=N(i.pathname,a)}(f)&&!0===u,w=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,S=g.pathname,k=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;o||(S=S.toLowerCase(),k=k?k.toLowerCase():null,w=w.toLowerCase()),k&&x&&(k=U(k,x)||k);const T="/"!==w&&w.endsWith("/")?w.length-1:w.length;let E,C=S===w||!s&&S.startsWith(w)&&"/"===S.charAt(T),A=null!=k&&(k===w||!s&&k.startsWith(w)&&"/"===k.charAt(w.length)),j={isActive:C,isPending:A,isTransitioning:_},P=C?n:void 0;E="function"===typeof i?i(j):[i,C?"active":null,A?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let I="function"===typeof l?l(j):l;return t.createElement(ht,d(d({},p),{},{"aria-current":P,className:E,ref:r,style:I,to:c,viewTransition:u}),"function"===typeof h?h(j):h)}));pt.displayName="NavLink";var ft=t.forwardRef(((e,r)=>{let{discover:n="render",fetcherKey:o,navigate:i,reloadDocument:s,replace:l,state:c,method:u=Oe,action:h,onSubmit:p,relative:f,preventScrollReset:m,viewTransition:y}=e,v=a(e,g),x=bt(),_=function(e){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=t.useContext(oe),o=t.useContext(ae);b(o,"useFormAction must be used inside a RouteContext");let[i]=o.matches.slice(-1),a=d({},pe(e||".",{relative:r})),s=ce();if(null==e){a.search=s.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some((e=>""===e))){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let r=e.toString();a.search=r?"?".concat(r):""}}e&&"."!==e||!i.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(a.pathname="/"===a.pathname?n:G([n,a.pathname]));return S(a)}(h,{relative:f}),w="get"===u.toLowerCase()?"get":"post",k="string"===typeof h&&dt.test(h);return t.createElement("form",d(d({ref:r,method:w,action:_,onSubmit:s?p:e=>{if(p&&p(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,r=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||u;x(t||e.currentTarget,{fetcherKey:o,method:r,navigate:i,replace:l,state:c,relative:f,preventScrollReset:m,viewTransition:y})}},v),{},{"data-discover":k||"render"!==n?void 0:"true"}))}));function mt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function gt(e){let r=t.useContext(Q);return b(r,mt(e)),r}ft.displayName="Form";var yt=0,vt=()=>"__".concat(String(++yt),"__");function bt(){let{router:e}=gt("useSubmit"),{basename:r}=t.useContext(oe),n=Se("useRouteId");return t.useCallback((async function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:i,method:a,encType:s,formData:l,body:c}=De(t,r);if(!1===o.navigate){let t=o.fetcherKey||vt();await e.fetch(t,n,o.action||i,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||a,formEncType:o.encType||s,flushSync:o.flushSync})}else await e.navigate(o.action||i,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||a,formEncType:o.encType||s,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})}),[e,r,n])}new TextEncoder;const xt=t.createContext(null);function _t(){return t.useContext(xt)}const wt="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";var St=r(579);const kt=function(e){const{children:r,theme:n}=e,o=_t(),i=t.useMemo((()=>{const e=null===o?d({},n):function(e,t){if("function"===typeof t)return t(e);return d(d({},e),t)}(o,n);return null!=e&&(e[wt]=null!==o),e}),[n,o]);return(0,St.jsx)(xt.Provider,{value:i,children:r})};var Tt=function(){function e(e){var t=this;this._insertTag=function(e){var r;r=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,r),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var r=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{r.insertRule(e,r.cssRules.length)}catch(pC){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),Et=Math.abs,Ct=String.fromCharCode,At=Object.assign;function jt(e){return e.trim()}function Pt(e,t,r){return e.replace(t,r)}function It(e,t){return e.indexOf(t)}function Ot(e,t){return 0|e.charCodeAt(t)}function Mt(e,t,r){return e.slice(t,r)}function Rt(e){return e.length}function Lt(e){return e.length}function Ft(e,t){return t.push(e),e}var zt=1,Dt=1,Nt=0,Bt=0,Ut=0,Vt="";function Wt(e,t,r,n,o,i,a){return{value:e,root:t,parent:r,type:n,props:o,children:i,line:zt,column:Dt,length:a,return:""}}function qt(e,t){return At(Wt("",null,null,"",null,null,0),e,{length:-e.length},t)}function Ht(){return Ut=Bt>0?Ot(Vt,--Bt):0,Dt--,10===Ut&&(Dt=1,zt--),Ut}function Gt(){return Ut=Bt<Nt?Ot(Vt,Bt++):0,Dt++,10===Ut&&(Dt=1,zt++),Ut}function Kt(){return Ot(Vt,Bt)}function Xt(){return Bt}function Zt(e,t){return Mt(Vt,e,t)}function Yt(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Jt(e){return zt=Dt=1,Nt=Rt(Vt=e),Bt=0,[]}function $t(e){return Vt="",e}function Qt(e){return jt(Zt(Bt-1,rr(91===e?e+2:40===e?e+1:e)))}function er(e){for(;(Ut=Kt())&&Ut<33;)Gt();return Yt(e)>2||Yt(Ut)>3?"":" "}function tr(e,t){for(;--t&&Gt()&&!(Ut<48||Ut>102||Ut>57&&Ut<65||Ut>70&&Ut<97););return Zt(e,Xt()+(t<6&&32==Kt()&&32==Gt()))}function rr(e){for(;Gt();)switch(Ut){case e:return Bt;case 34:case 39:34!==e&&39!==e&&rr(Ut);break;case 40:41===e&&rr(e);break;case 92:Gt()}return Bt}function nr(e,t){for(;Gt()&&e+Ut!==57&&(e+Ut!==84||47!==Kt()););return"/*"+Zt(t,Bt-1)+"*"+Ct(47===e?e:Gt())}function or(e){for(;!Yt(Kt());)Gt();return Zt(e,Bt)}var ir="-ms-",ar="-moz-",sr="-webkit-",lr="comm",cr="rule",ur="decl",dr="@keyframes";function hr(e,t){for(var r="",n=Lt(e),o=0;o<n;o++)r+=t(e[o],o,e,t)||"";return r}function pr(e,t,r,n){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case ur:return e.return=e.return||e.value;case lr:return"";case dr:return e.return=e.value+"{"+hr(e.children,n)+"}";case cr:e.value=e.props.join(",")}return Rt(r=hr(e.children,n))?e.return=e.value+"{"+r+"}":""}function fr(e){return $t(mr("",null,null,null,[""],e=Jt(e),0,[0],e))}function mr(e,t,r,n,o,i,a,s,l){for(var c=0,u=0,d=a,h=0,p=0,f=0,m=1,g=1,y=1,v=0,b="",x=o,_=i,w=n,S=b;g;)switch(f=v,v=Gt()){case 40:if(108!=f&&58==Ot(S,d-1)){-1!=It(S+=Pt(Qt(v),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:S+=Qt(v);break;case 9:case 10:case 13:case 32:S+=er(f);break;case 92:S+=tr(Xt()-1,7);continue;case 47:switch(Kt()){case 42:case 47:Ft(yr(nr(Gt(),Xt()),t,r),l);break;default:S+="/"}break;case 123*m:s[c++]=Rt(S)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+u:-1==y&&(S=Pt(S,/\f/g,"")),p>0&&Rt(S)-d&&Ft(p>32?vr(S+";",n,r,d-1):vr(Pt(S," ","")+";",n,r,d-2),l);break;case 59:S+=";";default:if(Ft(w=gr(S,t,r,c,u,o,s,b,x=[],_=[],d),i),123===v)if(0===u)mr(S,t,w,w,x,i,d,s,_);else switch(99===h&&110===Ot(S,3)?100:h){case 100:case 108:case 109:case 115:mr(e,w,w,n&&Ft(gr(e,w,w,0,0,o,s,b,o,x=[],d),_),o,_,d,s,n?x:_);break;default:mr(S,w,w,w,[""],_,0,s,_)}}c=u=p=0,m=y=1,b=S="",d=a;break;case 58:d=1+Rt(S),p=f;default:if(m<1)if(123==v)--m;else if(125==v&&0==m++&&125==Ht())continue;switch(S+=Ct(v),v*m){case 38:y=u>0?1:(S+="\f",-1);break;case 44:s[c++]=(Rt(S)-1)*y,y=1;break;case 64:45===Kt()&&(S+=Qt(Gt())),h=Kt(),u=d=Rt(b=S+=or(Xt())),v++;break;case 45:45===f&&2==Rt(S)&&(m=0)}}return i}function gr(e,t,r,n,o,i,a,s,l,c,u){for(var d=o-1,h=0===o?i:[""],p=Lt(h),f=0,m=0,g=0;f<n;++f)for(var y=0,v=Mt(e,d+1,d=Et(m=a[f])),b=e;y<p;++y)(b=jt(m>0?h[y]+" "+v:Pt(v,/&\f/g,h[y])))&&(l[g++]=b);return Wt(e,t,r,0===o?cr:s,l,c,u)}function yr(e,t,r){return Wt(e,t,r,lr,Ct(Ut),Mt(e,2,-2),0)}function vr(e,t,r,n){return Wt(e,t,r,ur,Mt(e,0,n),Mt(e,n+1,-1),n)}var br=function(e,t,r){for(var n=0,o=0;n=o,o=Kt(),38===n&&12===o&&(t[r]=1),!Yt(o);)Gt();return Zt(e,Bt)},xr=function(e,t){return $t(function(e,t){var r=-1,n=44;do{switch(Yt(n)){case 0:38===n&&12===Kt()&&(t[r]=1),e[r]+=br(Bt-1,t,r);break;case 2:e[r]+=Qt(n);break;case 4:if(44===n){e[++r]=58===Kt()?"&\f":"",t[r]=e[r].length;break}default:e[r]+=Ct(n)}}while(n=Gt());return e}(Jt(e),t))},_r=new WeakMap,wr=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;"rule"!==r.type;)if(!(r=r.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||_r.get(r))&&!n){_r.set(e,!0);for(var o=[],i=xr(t,o),a=r.props,s=0,l=0;s<i.length;s++)for(var c=0;c<a.length;c++,l++)e.props[l]=o[s]?i[s].replace(/&\f/g,a[c]):a[c]+" "+i[s]}}},Sr=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function kr(e,t){switch(function(e,t){return 45^Ot(e,0)?(((t<<2^Ot(e,0))<<2^Ot(e,1))<<2^Ot(e,2))<<2^Ot(e,3):0}(e,t)){case 5103:return sr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return sr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return sr+e+ar+e+ir+e+e;case 6828:case 4268:return sr+e+ir+e+e;case 6165:return sr+e+ir+"flex-"+e+e;case 5187:return sr+e+Pt(e,/(\w+).+(:[^]+)/,sr+"box-$1$2"+ir+"flex-$1$2")+e;case 5443:return sr+e+ir+"flex-item-"+Pt(e,/flex-|-self/,"")+e;case 4675:return sr+e+ir+"flex-line-pack"+Pt(e,/align-content|flex-|-self/,"")+e;case 5548:return sr+e+ir+Pt(e,"shrink","negative")+e;case 5292:return sr+e+ir+Pt(e,"basis","preferred-size")+e;case 6060:return sr+"box-"+Pt(e,"-grow","")+sr+e+ir+Pt(e,"grow","positive")+e;case 4554:return sr+Pt(e,/([^-])(transform)/g,"$1"+sr+"$2")+e;case 6187:return Pt(Pt(Pt(e,/(zoom-|grab)/,sr+"$1"),/(image-set)/,sr+"$1"),e,"")+e;case 5495:case 3959:return Pt(e,/(image-set\([^]*)/,sr+"$1$`$1");case 4968:return Pt(Pt(e,/(.+:)(flex-)?(.*)/,sr+"box-pack:$3"+ir+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+sr+e+e;case 4095:case 3583:case 4068:case 2532:return Pt(e,/(.+)-inline(.+)/,sr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Rt(e)-1-t>6)switch(Ot(e,t+1)){case 109:if(45!==Ot(e,t+4))break;case 102:return Pt(e,/(.+:)(.+)-([^]+)/,"$1"+sr+"$2-$3$1"+ar+(108==Ot(e,t+3)?"$3":"$2-$3"))+e;case 115:return~It(e,"stretch")?kr(Pt(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Ot(e,t+1))break;case 6444:switch(Ot(e,Rt(e)-3-(~It(e,"!important")&&10))){case 107:return Pt(e,":",":"+sr)+e;case 101:return Pt(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+sr+(45===Ot(e,14)?"inline-":"")+"box$3$1"+sr+"$2$3$1"+ir+"$2box$3")+e}break;case 5936:switch(Ot(e,t+11)){case 114:return sr+e+ir+Pt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return sr+e+ir+Pt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return sr+e+ir+Pt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return sr+e+ir+e+e}return e}var Tr=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case ur:e.return=kr(e.value,e.length);break;case dr:return hr([qt(e,{value:Pt(e.value,"@","@"+sr)})],n);case cr:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return hr([qt(e,{props:[Pt(t,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return hr([qt(e,{props:[Pt(t,/:(plac\w+)/,":"+sr+"input-$1")]}),qt(e,{props:[Pt(t,/:(plac\w+)/,":-moz-$1")]}),qt(e,{props:[Pt(t,/:(plac\w+)/,ir+"input-$1")]})],n)}return""}))}}],Er=function(e){var t=e.key;if("css"===t){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var n,o,i=e.stylisPlugins||Tr,a={},s=[];n=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),r=1;r<t.length;r++)a[t[r]]=!0;s.push(e)}));var l,c,u=[pr,(c=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],d=function(e){var t=Lt(e);return function(r,n,o,i){for(var a="",s=0;s<t;s++)a+=e[s](r,n,o,i)||"";return a}}([wr,Sr].concat(i,u));o=function(e,t,r,n){l=r,function(e){hr(fr(e),d)}(e?e+"{"+t.styles+"}":t.styles),n&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new Tt({key:t,container:n,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:o};return h.sheet.hydrate(s),h};function Cr(e,t,r){var n="";return r.split(" ").forEach((function(r){void 0!==e[r]?t.push(e[r]+";"):r&&(n+=r+" ")})),n}var Ar=function(e,t,r){var n=e.key+"-"+t.name;!1===r&&void 0===e.registered[n]&&(e.registered[n]=t.styles)},jr=function(e,t,r){Ar(e,t,r);var n=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+n:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}};var Pr={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Ir(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}var Or=/[A-Z]|^ms/g,Mr=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Rr=function(e){return 45===e.charCodeAt(1)},Lr=function(e){return null!=e&&"boolean"!==typeof e},Fr=Ir((function(e){return Rr(e)?e:e.replace(Or,"-$&").toLowerCase()})),zr=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Mr,(function(e,t,r){return Nr={name:t,styles:r,next:Nr},t}))}return 1===Pr[e]||Rr(e)||"number"!==typeof t||0===t?t:t+"px"};function Dr(e,t,r){if(null==r)return"";var n=r;if(void 0!==n.__emotion_styles)return n;switch(typeof r){case"boolean":return"";case"object":var o=r;if(1===o.anim)return Nr={name:o.name,styles:o.styles,next:Nr},o.name;var i=r;if(void 0!==i.styles){var a=i.next;if(void 0!==a)for(;void 0!==a;)Nr={name:a.name,styles:a.styles,next:Nr},a=a.next;return i.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var o=0;o<r.length;o++)n+=Dr(e,t,r[o])+";";else for(var i in r){var a=r[i];if("object"!==typeof a){var s=a;null!=t&&void 0!==t[s]?n+=i+"{"+t[s]+"}":Lr(s)&&(n+=Fr(i)+":"+zr(i,s)+";")}else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var l=Dr(e,t,a);switch(i){case"animation":case"animationName":n+=Fr(i)+":"+l+";";break;default:n+=i+"{"+l+"}"}}else for(var c=0;c<a.length;c++)Lr(a[c])&&(n+=Fr(i)+":"+zr(i,a[c])+";")}return n}(e,t,r);case"function":if(void 0!==e){var s=Nr,l=r(e);return Nr=s,Dr(e,t,l)}}var c=r;if(null==t)return c;var u=t[c];return void 0!==u?u:c}var Nr,Br=/label:\s*([^\s;{]+)\s*(;|$)/g;function Ur(e,t,r){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,o="";Nr=void 0;var i=e[0];null==i||void 0===i.raw?(n=!1,o+=Dr(r,t,i)):o+=i[0];for(var a=1;a<e.length;a++){if(o+=Dr(r,t,e[a]),n)o+=i[a]}Br.lastIndex=0;for(var s,l="";null!==(s=Br.exec(o));)l+="-"+s[1];var c=function(e){for(var t,r=0,n=0,o=e.length;o>=4;++n,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(o){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)}(o)+l;return{name:c,styles:o,next:Nr}}var Vr=!!n.useInsertionEffect&&n.useInsertionEffect,Wr=Vr||function(e){return e()},qr=Vr||t.useLayoutEffect,Hr=t.createContext("undefined"!==typeof HTMLElement?Er({key:"css"}):null),Gr=(Hr.Provider,function(e){return(0,t.forwardRef)((function(r,n){var o=(0,t.useContext)(Hr);return e(r,o,n)}))}),Kr=t.createContext({});var Xr={}.hasOwnProperty,Zr="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Yr=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;return Ar(t,r,n),Wr((function(){return jr(t,r,n)})),null},Jr=Gr((function(e,r,n){var o=e.css;"string"===typeof o&&void 0!==r.registered[o]&&(o=r.registered[o]);var i=e[Zr],a=[o],s="";"string"===typeof e.className?s=Cr(r.registered,a,e.className):null!=e.className&&(s=e.className+" ");var l=Ur(a,void 0,t.useContext(Kr));s+=r.key+"-"+l.name;var c={};for(var u in e)Xr.call(e,u)&&"css"!==u&&u!==Zr&&(c[u]=e[u]);return c.className=s,n&&(c.ref=n),t.createElement(t.Fragment,null,t.createElement(Yr,{cache:r,serialized:l,isStringTag:"string"===typeof i}),t.createElement(i,c))})),$r=Jr;const Qr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const r=t.useContext(Kr);return r&&(n=r,0!==Object.keys(n).length)?r:e;var n},en=["value"],tn=t.createContext();const rn=()=>{const e=t.useContext(tn);return null!==e&&void 0!==e&&e},nn=function(e){let{value:t}=e,r=a(e,en);return(0,St.jsx)(tn.Provider,d({value:null===t||void 0===t||t},r))};function on(e,t){const r=d({},t);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const o=n;if("components"===o||"slots"===o)r[o]=d(d({},e[o]),r[o]);else if("componentsProps"===o||"slotProps"===o){const n=e[o],i=t[o];if(i)if(n){r[o]=d({},i);for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const t=e;r[o][t]=on(n[t],i[t])}}else r[o]=i;else r[o]=n||{}}else void 0===r[o]&&(r[o]=e[o])}return r}const an=t.createContext(void 0);function sn(e){let{props:r,name:n}=e;return function(e){const{theme:t,name:r,props:n}=e;if(!t||!t.components||!t.components[r])return n;const o=t.components[r];return o.defaultProps?on(o.defaultProps,n):o.styleOverrides||o.variants?n:on(o,n)}({props:r,name:n,theme:{components:t.useContext(an)}})}const ln=function(e){let{value:t,children:r}=e;return(0,St.jsx)(an.Provider,{value:t,children:r})},cn={};function un(e,r,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.useMemo((()=>{const t=e&&r[e]||r;if("function"===typeof n){const i=n(t),a=e?d(d({},r),{},{[e]:i}):i;return o?()=>a:a}return e?d(d({},r),{},{[e]:n}):d(d({},r),n)}),[e,r,n,o])}const dn=function(e){const{children:t,theme:r,themeId:n}=e,o=Qr(cn),i=_t()||cn,a=un(n,o,r),s=un(n,i,r,!0),l="rtl"===(n?a[n]:a).direction;return(0,St.jsx)(kt,{theme:s,children:(0,St.jsx)(Kr.Provider,{value:a,children:(0,St.jsx)(nn,{value:l,children:(0,St.jsx)(ln,{value:n?a[n].components:a.components,children:t})})})})},hn="$$material",pn=["theme"];function fn(e){let{theme:t}=e,r=a(e,pn);const n=hn in t?t[hn]:void 0;return(0,St.jsx)(dn,d(d({},r),{},{themeId:n?hn:void 0,theme:n||t}))}function mn(e){const t=new URL("https://mui.com/production-error/?code=".concat(e));for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return n.forEach((e=>t.searchParams.append("args[]",e))),"Minified MUI error #".concat(e,"; visit ").concat(t," for the full message.")}function gn(e){if("string"!==typeof e)throw new Error(mn(7));return e.charAt(0).toUpperCase()+e.slice(1)}var yn=r(528);function vn(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function bn(e){if(t.isValidElement(e)||(0,yn.Hy)(e)||!vn(e))return e;const r={};return Object.keys(e).forEach((t=>{r[t]=bn(e[t])})),r}function xn(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const o=n.clone?d({},e):e;return vn(e)&&vn(r)&&Object.keys(r).forEach((i=>{t.isValidElement(r[i])||(0,yn.Hy)(r[i])?o[i]=r[i]:vn(r[i])&&Object.prototype.hasOwnProperty.call(e,i)&&vn(e[i])?o[i]=xn(e[i],r[i],n):n.clone?o[i]=vn(r[i])?bn(r[i]):r[i]:o[i]=r[i]})),o}const _n=function(e,t){return t?xn(e,t,{clone:!1}):e};const wn={xs:0,sm:600,md:900,lg:1200,xl:1536},Sn={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(wn[e],"px)")},kn={containerQueries:e=>({up:t=>{let r="number"===typeof t?t:wn[t]||t;return"number"===typeof r&&(r="".concat(r,"px")),e?"@container ".concat(e," (min-width:").concat(r,")"):"@container (min-width:".concat(r,")")}})};function Tn(e,t,r){const n=e.theme||{};if(Array.isArray(t)){const e=n.breakpoints||Sn;return t.reduce(((n,o,i)=>(n[e.up(e.keys[i])]=r(t[i]),n)),{})}if("object"===typeof t){const e=n.breakpoints||Sn;return Object.keys(t).reduce(((o,i)=>{if(function(e,t){return"@"===t||t.startsWith("@")&&(e.some((e=>t.startsWith("@".concat(e))))||!!t.match(/^@\d/))}(e.keys,i)){const e=function(e,t){const r=t.match(/^@([^/]+)?\/?(.+)?$/);if(!r)return null;const[,n,o]=r,i=Number.isNaN(+n)?n||0:+n;return e.containerQueries(o).up(i)}(n.containerQueries?n:kn,i);e&&(o[e]=r(t[i],i))}else if(Object.keys(e.values||wn).includes(i)){o[e.up(i)]=r(t[i],i)}else{const e=i;o[e]=t[e]}return o}),{})}return r(t)}function En(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null===(e=t.keys)||void 0===e?void 0:e.reduce(((e,r)=>(e[t.up(r)]={},e)),{}))||{}}function Cn(e,t){return e.reduce(((e,t)=>{const r=e[t];return(!r||0===Object.keys(r).length)&&delete e[t],e}),t)}function An(e){let{values:t,breakpoints:r,base:n}=e;const o=n||function(e,t){if("object"!==typeof e)return{};const r={},n=Object.keys(t);return Array.isArray(e)?n.forEach(((t,n)=>{n<e.length&&(r[t]=!0)})):n.forEach((t=>{null!=e[t]&&(r[t]=!0)})),r}(t,r),i=Object.keys(o);if(0===i.length)return t;let a;return i.reduce(((e,r,n)=>(Array.isArray(t)?(e[r]=null!=t[n]?t[n]:t[a],a=n):"object"===typeof t?(e[r]=null!=t[r]?t[r]:t[a],a=r):e[r]=t,e)),{})}function jn(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&r){const r="vars.".concat(t).split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=r)return r}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function Pn(e,t,r){let n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;return n="function"===typeof e?e(r):Array.isArray(e)?e[r]||o:jn(e,r)||o,t&&(n=t(n,o,e)),n}const In=function(e){const{prop:t,cssProperty:r=e.prop,themeKey:n,transform:o}=e,i=e=>{if(null==e[t])return null;const i=e[t],a=jn(e.theme,n)||{};return Tn(e,i,(e=>{let n=Pn(a,o,e);return e===n&&"string"===typeof e&&(n=Pn(a,o,"".concat(t).concat("default"===e?"":gn(e)),e)),!1===r?n:{[r]:n}}))};return i.propTypes={},i.filterProps=[t],i};const On={m:"margin",p:"padding"},Mn={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Rn={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Ln=function(e){const t={};return r=>(void 0===t[r]&&(t[r]=e(r)),t[r])}((e=>{if(e.length>2){if(!Rn[e])return[e];e=Rn[e]}const[t,r]=e.split(""),n=On[t],o=Mn[r]||"";return Array.isArray(o)?o.map((e=>n+e)):[n+o]})),Fn=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],zn=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],Dn=[...Fn,...zn];function Nn(e,t,r,n){var o;const i=null!==(o=jn(e,t,!0))&&void 0!==o?o:r;return"number"===typeof i||"string"===typeof i?e=>"string"===typeof e?e:"string"===typeof i?"calc(".concat(e," * ").concat(i,")"):i*e:Array.isArray(i)?e=>{if("string"===typeof e)return e;const t=Math.abs(e);const r=i[t];return e>=0?r:"number"===typeof r?-r:"-".concat(r)}:"function"===typeof i?i:()=>{}}function Bn(e){return Nn(e,"spacing",8)}function Un(e,t){return"string"===typeof t||null==t?t:e(t)}function Vn(e,t,r,n){if(!t.includes(r))return null;const o=function(e,t){return r=>e.reduce(((e,n)=>(e[n]=Un(t,r),e)),{})}(Ln(r),n);return Tn(e,e[r],o)}function Wn(e,t){const r=Bn(e.theme);return Object.keys(e).map((n=>Vn(e,t,n,r))).reduce(_n,{})}function qn(e){return Wn(e,Fn)}function Hn(e){return Wn(e,zn)}function Gn(e){return Wn(e,Dn)}qn.propTypes={},qn.filterProps=Fn,Hn.propTypes={},Hn.filterProps=zn,Gn.propTypes={},Gn.filterProps=Dn;const Kn=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=t.reduce(((e,t)=>(t.filterProps.forEach((r=>{e[r]=t})),e)),{}),o=e=>Object.keys(e).reduce(((t,r)=>n[r]?_n(t,n[r](e)):t),{});return o.propTypes={},o.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),o};function Xn(e){return"number"!==typeof e?e:"".concat(e,"px solid")}function Zn(e,t){return In({prop:e,themeKey:"borders",transform:t})}const Yn=Zn("border",Xn),Jn=Zn("borderTop",Xn),$n=Zn("borderRight",Xn),Qn=Zn("borderBottom",Xn),eo=Zn("borderLeft",Xn),to=Zn("borderColor"),ro=Zn("borderTopColor"),no=Zn("borderRightColor"),oo=Zn("borderBottomColor"),io=Zn("borderLeftColor"),ao=Zn("outline",Xn),so=Zn("outlineColor"),lo=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=Nn(e.theme,"shape.borderRadius",4),r=e=>({borderRadius:Un(t,e)});return Tn(e,e.borderRadius,r)}return null};lo.propTypes={},lo.filterProps=["borderRadius"];Kn(Yn,Jn,$n,Qn,eo,to,ro,no,oo,io,lo,ao,so);const co=e=>{if(void 0!==e.gap&&null!==e.gap){const t=Nn(e.theme,"spacing",8),r=e=>({gap:Un(t,e)});return Tn(e,e.gap,r)}return null};co.propTypes={},co.filterProps=["gap"];const uo=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=Nn(e.theme,"spacing",8),r=e=>({columnGap:Un(t,e)});return Tn(e,e.columnGap,r)}return null};uo.propTypes={},uo.filterProps=["columnGap"];const ho=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=Nn(e.theme,"spacing",8),r=e=>({rowGap:Un(t,e)});return Tn(e,e.rowGap,r)}return null};ho.propTypes={},ho.filterProps=["rowGap"];Kn(co,uo,ho,In({prop:"gridColumn"}),In({prop:"gridRow"}),In({prop:"gridAutoFlow"}),In({prop:"gridAutoColumns"}),In({prop:"gridAutoRows"}),In({prop:"gridTemplateColumns"}),In({prop:"gridTemplateRows"}),In({prop:"gridTemplateAreas"}),In({prop:"gridArea"}));function po(e,t){return"grey"===t?t:e}Kn(In({prop:"color",themeKey:"palette",transform:po}),In({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:po}),In({prop:"backgroundColor",themeKey:"palette",transform:po}));function fo(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const mo=In({prop:"width",transform:fo}),go=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var r,n;const o=(null===(r=e.theme)||void 0===r||null===(r=r.breakpoints)||void 0===r||null===(r=r.values)||void 0===r?void 0:r[t])||wn[t];return o?"px"!==(null===(n=e.theme)||void 0===n||null===(n=n.breakpoints)||void 0===n?void 0:n.unit)?{maxWidth:"".concat(o).concat(e.theme.breakpoints.unit)}:{maxWidth:o}:{maxWidth:fo(t)}};return Tn(e,e.maxWidth,t)}return null};go.filterProps=["maxWidth"];const yo=In({prop:"minWidth",transform:fo}),vo=In({prop:"height",transform:fo}),bo=In({prop:"maxHeight",transform:fo}),xo=In({prop:"minHeight",transform:fo}),_o=(In({prop:"size",cssProperty:"width",transform:fo}),In({prop:"size",cssProperty:"height",transform:fo}),Kn(mo,go,yo,vo,bo,xo,In({prop:"boxSizing"})),{border:{themeKey:"borders",transform:Xn},borderTop:{themeKey:"borders",transform:Xn},borderRight:{themeKey:"borders",transform:Xn},borderBottom:{themeKey:"borders",transform:Xn},borderLeft:{themeKey:"borders",transform:Xn},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Xn},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:lo},color:{themeKey:"palette",transform:po},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:po},backgroundColor:{themeKey:"palette",transform:po},p:{style:Hn},pt:{style:Hn},pr:{style:Hn},pb:{style:Hn},pl:{style:Hn},px:{style:Hn},py:{style:Hn},padding:{style:Hn},paddingTop:{style:Hn},paddingRight:{style:Hn},paddingBottom:{style:Hn},paddingLeft:{style:Hn},paddingX:{style:Hn},paddingY:{style:Hn},paddingInline:{style:Hn},paddingInlineStart:{style:Hn},paddingInlineEnd:{style:Hn},paddingBlock:{style:Hn},paddingBlockStart:{style:Hn},paddingBlockEnd:{style:Hn},m:{style:qn},mt:{style:qn},mr:{style:qn},mb:{style:qn},ml:{style:qn},mx:{style:qn},my:{style:qn},margin:{style:qn},marginTop:{style:qn},marginRight:{style:qn},marginBottom:{style:qn},marginLeft:{style:qn},marginX:{style:qn},marginY:{style:qn},marginInline:{style:qn},marginInlineStart:{style:qn},marginInlineEnd:{style:qn},marginBlock:{style:qn},marginBlockStart:{style:qn},marginBlockEnd:{style:qn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:co},rowGap:{style:ho},columnGap:{style:uo},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:fo},maxWidth:{style:go},minWidth:{transform:fo},height:{transform:fo},maxHeight:{transform:fo},minHeight:{transform:fo},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});const wo=function(){function e(e,t,r,n){const o={[e]:t,theme:r},i=n[e];if(!i)return{[e]:t};const{cssProperty:a=e,themeKey:s,transform:l,style:c}=i;if(null==t)return null;if("typography"===s&&"inherit"===t)return{[e]:t};const u=jn(r,s)||{};if(c)return c(o);return Tn(o,t,(t=>{let r=Pn(u,l,t);return t===r&&"string"===typeof t&&(r=Pn(u,l,"".concat(e).concat("default"===t?"":gn(t)),t)),!1===a?r:{[a]:r}}))}return function t(r){var n;const{sx:o,theme:i={}}=r||{};if(!o)return null;const a=null!==(n=i.unstable_sxConfig)&&void 0!==n?n:_o;function s(r){let n=r;if("function"===typeof r)n=r(i);else if("object"!==typeof r)return r;if(!n)return null;const o=En(i.breakpoints),s=Object.keys(o);let l=o;return Object.keys(n).forEach((r=>{const o=function(e,t){return"function"===typeof e?e(t):e}(n[r],i);if(null!==o&&void 0!==o)if("object"===typeof o)if(a[r])l=_n(l,e(r,o,i,a));else{const e=Tn({theme:i},o,(e=>({[r]:e})));!function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),o=new Set(n);return t.every((e=>o.size===Object.keys(e).length))}(e,o)?l=_n(l,e):l[r]=t({sx:o,theme:i})}else l=_n(l,e(r,o,i,a))})),function(e,t){if(!e.containerQueries)return t;const r=Object.keys(t).filter((e=>e.startsWith("@container"))).sort(((e,t)=>{var r,n;const o=/min-width:\s*([0-9.]+)/;return+((null===(r=e.match(o))||void 0===r?void 0:r[1])||0)-+((null===(n=t.match(o))||void 0===n?void 0:n[1])||0)}));return r.length?r.reduce(((e,r)=>{const n=t[r];return delete e[r],e[r]=n,e}),d({},t)):t}(i,Cn(s,l))}return Array.isArray(o)?o.map(s):s(o)}}();wo.filterProps=["sx"];const So=wo;r(219);var ko=function(e,r){var n=arguments;if(null==r||!Xr.call(r,"css"))return t.createElement.apply(void 0,n);var o=n.length,i=new Array(o);i[0]=$r,i[1]=function(e,t){var r={};for(var n in t)Xr.call(t,n)&&(r[n]=t[n]);return r[Zr]=e,r}(e,r);for(var a=2;a<o;a++)i[a]=n[a];return t.createElement.apply(null,i)};!function(e){var t;t||(t=e.JSX||(e.JSX={}))}(ko||(ko={}));var To=Gr((function(e,r){var n=Ur([e.styles],void 0,t.useContext(Kr)),o=t.useRef();return qr((function(){var e=r.key+"-global",t=new r.sheet.constructor({key:e,nonce:r.sheet.nonce,container:r.sheet.container,speedy:r.sheet.isSpeedy}),i=!1,a=document.querySelector('style[data-emotion="'+e+" "+n.name+'"]');return r.sheet.tags.length&&(t.before=r.sheet.tags[0]),null!==a&&(i=!0,a.setAttribute("data-emotion",e),t.hydrate([a])),o.current=[t,i],function(){t.flush()}}),[r]),qr((function(){var e=o.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==n.next&&jr(r,n.next,!0),t.tags.length){var i=t.tags[t.tags.length-1].nextElementSibling;t.before=i,t.flush()}r.insert("",n,t,!1)}}),[r,n.name]),null}));function Eo(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Ur(t)}function Co(){var e=Eo.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function Ao(e){const{styles:t,defaultTheme:r={}}=e,n="function"===typeof t?e=>{return t(void 0===(n=e)||null===n||0===Object.keys(n).length?r:e);var n}:t;return(0,St.jsx)(To,{styles:n})}const jo="undefined"!==typeof window?t.useLayoutEffect:t.useEffect,Po="mode",Io="color-scheme",Oo="data-color-scheme";function Mo(){}const Ro=e=>{let{key:t,storageWindow:r}=e;return r||"undefined"===typeof window||(r=window),{get(e){if("undefined"===typeof window)return;if(!r)return e;let n;try{n=r.localStorage.getItem(t)}catch(o){}return n||e},set:e=>{if(r)try{r.localStorage.setItem(t,e)}catch(n){}},subscribe:e=>{if(!r)return Mo;const n=r=>{const n=r.newValue;r.key===t&&e(n)};return r.addEventListener("storage",n),()=>{r.removeEventListener("storage",n)}}}};function Lo(){}function Fo(e){if("undefined"!==typeof window&&"function"===typeof window.matchMedia&&"system"===e){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}}function zo(e,t){return"light"===e.mode||"system"===e.mode&&"light"===e.systemMode?t("light"):"dark"===e.mode||"system"===e.mode&&"dark"===e.systemMode?t("dark"):void 0}function Do(e){const{defaultMode:r="light",defaultLightColorScheme:n,defaultDarkColorScheme:o,supportedColorSchemes:i=[],modeStorageKey:a=Po,colorSchemeStorageKey:s=Io,storageWindow:l=("undefined"===typeof window?void 0:window),storageManager:c=Ro,noSsr:u=!1}=e,h=i.join(","),p=i.length>1,f=t.useMemo((()=>null===c||void 0===c?void 0:c({key:a,storageWindow:l})),[c,a,l]),m=t.useMemo((()=>null===c||void 0===c?void 0:c({key:"".concat(s,"-light"),storageWindow:l})),[c,s,l]),g=t.useMemo((()=>null===c||void 0===c?void 0:c({key:"".concat(s,"-dark"),storageWindow:l})),[c,s,l]),[y,v]=t.useState((()=>{const e=(null===f||void 0===f?void 0:f.get(r))||r,t=(null===m||void 0===m?void 0:m.get(n))||n,i=(null===g||void 0===g?void 0:g.get(o))||o;return{mode:e,systemMode:Fo(e),lightColorScheme:t,darkColorScheme:i}})),[b,x]=t.useState(u||!p);t.useEffect((()=>{x(!0)}),[]);const _=function(e){return zo(e,(t=>"light"===t?e.lightColorScheme:"dark"===t?e.darkColorScheme:void 0))}(y),w=t.useCallback((e=>{v((t=>{if(e===t.mode)return t;const n=null!==e&&void 0!==e?e:r;return null===f||void 0===f||f.set(n),d(d({},t),{},{mode:n,systemMode:Fo(n)})}))}),[f,r]),S=t.useCallback((e=>{e?"string"===typeof e?e&&!h.includes(e)?console.error("`".concat(e,"` does not exist in `theme.colorSchemes`.")):v((t=>{const r=d({},t);return zo(t,(t=>{"light"===t&&(null===m||void 0===m||m.set(e),r.lightColorScheme=e),"dark"===t&&(null===g||void 0===g||g.set(e),r.darkColorScheme=e)})),r})):v((t=>{const r=d({},t),i=null===e.light?n:e.light,a=null===e.dark?o:e.dark;return i&&(h.includes(i)?(r.lightColorScheme=i,null===m||void 0===m||m.set(i)):console.error("`".concat(i,"` does not exist in `theme.colorSchemes`."))),a&&(h.includes(a)?(r.darkColorScheme=a,null===g||void 0===g||g.set(a)):console.error("`".concat(a,"` does not exist in `theme.colorSchemes`."))),r})):v((e=>(null===m||void 0===m||m.set(n),null===g||void 0===g||g.set(o),d(d({},e),{},{lightColorScheme:n,darkColorScheme:o}))))}),[h,m,g,n,o]),k=t.useCallback((e=>{"system"===y.mode&&v((t=>{const r=null!==e&&void 0!==e&&e.matches?"dark":"light";return t.systemMode===r?t:d(d({},t),{},{systemMode:r})}))}),[y.mode]),T=t.useRef(k);return T.current=k,t.useEffect((()=>{if("function"!==typeof window.matchMedia||!p)return;const e=function(){return T.current(...arguments)},t=window.matchMedia("(prefers-color-scheme: dark)");return t.addListener(e),e(t),()=>{t.removeListener(e)}}),[p]),t.useEffect((()=>{if(p){const e=(null===f||void 0===f?void 0:f.subscribe((e=>{e&&!["light","dark","system"].includes(e)||w(e||r)})))||Lo,t=(null===m||void 0===m?void 0:m.subscribe((e=>{e&&!h.match(e)||S({light:e})})))||Lo,n=(null===g||void 0===g?void 0:g.subscribe((e=>{e&&!h.match(e)||S({dark:e})})))||Lo;return()=>{e(),t(),n()}}}),[S,w,h,r,l,p,f,m,g]),d(d({},y),{},{mode:b?y.mode:void 0,systemMode:b?y.systemMode:void 0,colorScheme:b?_:void 0,setMode:w,setColorScheme:S})}const No=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,r))};function Bo(e){return No(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)}function Uo(e){if(e.type)return e;if("#"===e.charAt(0))return Uo(function(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let r=e.match(t);return r&&1===r[0].length&&(r=r.map((e=>e+e))),r?"rgb".concat(4===r.length?"a":"","(").concat(r.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", "),")"):""}(e));const t=e.indexOf("("),r=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(r))throw new Error(mn(9,e));let n,o=e.substring(t+1,e.length-1);if("color"===r){if(o=o.split(" "),n=o.shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(n))throw new Error(mn(10,n))}else o=o.split(",");return o=o.map((e=>parseFloat(e))),{type:r,values:o,colorSpace:n}}const Vo=(e,t)=>{try{return(e=>{const t=Uo(e);return t.values.slice(0,3).map(((e,r)=>t.type.includes("hsl")&&0!==r?"".concat(e,"%"):e)).join(" ")})(e)}catch(r){return e}};function Wo(e){const{type:t,colorSpace:r}=e;let{values:n}=e;return t.includes("rgb")?n=n.map(((e,t)=>t<3?parseInt(e,10):e)):t.includes("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),n=t.includes("color")?"".concat(r," ").concat(n.join(" ")):"".concat(n.join(", ")),"".concat(t,"(").concat(n,")")}function qo(e){e=Uo(e);const{values:t}=e,r=t[0],n=t[1]/100,o=t[2]/100,i=n*Math.min(o,1-o),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+r/30)%12;return o-i*Math.max(Math.min(t-3,9-t,1),-1)};let s="rgb";const l=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===e.type&&(s+="a",l.push(t[3])),Wo({type:s,values:l})}function Ho(e){let t="hsl"===(e=Uo(e)).type||"hsla"===e.type?Uo(qo(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Go(e,t){return e=Uo(e),t=Bo(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,Wo(e)}function Ko(e,t,r){try{return Go(e,t)}catch(n){return e}}function Xo(e,t){if(e=Uo(e),t=Bo(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]*=1-t;return Wo(e)}function Zo(e,t,r){try{return Xo(e,t)}catch(n){return e}}function Yo(e,t){if(e=Uo(e),t=Bo(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return Wo(e)}function Jo(e,t,r){try{return Yo(e,t)}catch(n){return e}}function $o(e,t,r){try{return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return Ho(e)>.5?Xo(e,t):Yo(e,t)}(e,t)}catch(n){return e}}const Qo={black:"#000",white:"#fff"},ei={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},ti={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},ri={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},ni={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},oi={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},ii={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},ai={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},si=["mode","contrastThreshold","tonalOffset"];function li(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Qo.white,default:Qo.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const ci=li();function ui(){return{text:{primary:Qo.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Qo.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const di=ui();function hi(e,t,r,n){const o=n.light||n,i=n.dark||1.5*n;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:"light"===t?e.light=Yo(e.main,o):"dark"===t&&(e.dark=Xo(e.main,i)))}function pi(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:n=.2}=e,o=a(e,si),i=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:oi[200],light:oi[50],dark:oi[400]}:{main:oi[700],light:oi[400],dark:oi[800]}}(t),s=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ti[200],light:ti[50],dark:ti[400]}:{main:ti[500],light:ti[300],dark:ti[700]}}(t),l=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ri[500],light:ri[300],dark:ri[700]}:{main:ri[700],light:ri[400],dark:ri[800]}}(t),c=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ii[400],light:ii[300],dark:ii[700]}:{main:ii[700],light:ii[500],dark:ii[900]}}(t),u=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ai[400],light:ai[300],dark:ai[700]}:{main:ai[800],light:ai[500],dark:ai[900]}}(t),h=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ni[400],light:ni[300],dark:ni[700]}:{main:"#ed6c02",light:ni[500],dark:ni[900]}}(t);function p(e){const t=function(e,t){const r=Ho(e),n=Ho(t);return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}(e,di.text.primary)>=r?di.text.primary:ci.text.primary;return t}const f=e=>{let{color:t,name:r,mainShade:o=500,lightShade:i=300,darkShade:a=700}=e;if(t=d({},t),!t.main&&t[o]&&(t.main=t[o]),!t.hasOwnProperty("main"))throw new Error(mn(11,r?" (".concat(r,")"):"",o));if("string"!==typeof t.main)throw new Error(mn(12,r?" (".concat(r,")"):"",JSON.stringify(t.main)));return hi(t,"light",i,n),hi(t,"dark",a,n),t.contrastText||(t.contrastText=p(t.main)),t};let m;"light"===t?m=li():"dark"===t&&(m=ui());return xn(d({common:d({},Qo),mode:t,primary:f({color:i,name:"primary"}),secondary:f({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:f({color:l,name:"error"}),warning:f({color:h,name:"warning"}),info:f({color:c,name:"info"}),success:f({color:u,name:"success"}),grey:ei,contrastThreshold:r,getContrastText:p,augmentColor:f,tonalOffset:n},m),o)}function fi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";function t(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];if(!n.length)return"";const i=n[0];return"string"!==typeof i||i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?", ".concat(i):", var(--".concat(e?"".concat(e,"-"):"").concat(i).concat(t(...n.slice(1)),")")}return function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return"var(--".concat(e?"".concat(e,"-"):"").concat(r).concat(t(...o),")")}}function mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bn({spacing:e});if(e.mui)return e;const r=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(0===r.length?[1]:r).map((e=>{const r=t(e);return"number"===typeof r?"".concat(r,"px"):r})).join(" ")};return r.mui=!0,r}function gi(e){const t={};return Object.entries(e).forEach((e=>{const[r,n]=e;"object"===typeof n&&(t[r]="".concat(n.fontStyle?"".concat(n.fontStyle," "):"").concat(n.fontVariant?"".concat(n.fontVariant," "):"").concat(n.fontWeight?"".concat(n.fontWeight," "):"").concat(n.fontStretch?"".concat(n.fontStretch," "):"").concat(n.fontSize||"").concat(n.lineHeight?"/".concat(n.lineHeight," "):"").concat(n.fontFamily||""))})),t}const yi=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=e;t.forEach(((e,i)=>{i===t.length-1?Array.isArray(o)?o[Number(e)]=r:o&&"object"===typeof o&&(o[e]=r):o&&"object"===typeof o&&(o[e]||(o[e]=n.includes(e)?[]:{}),o=o[e])}))};function vi(e,t){const{prefix:r,shouldSkipGeneratingVar:n}=t||{},o={},i={},a={};var s,l;return s=(e,t,s)=>{if(("string"===typeof t||"number"===typeof t)&&(!n||!n(e,t))){const n="--".concat(r?"".concat(r,"-"):"").concat(e.join("-")),l=((e,t)=>"number"===typeof t?["lineHeight","fontWeight","opacity","zIndex"].some((t=>e.includes(t)))||e[e.length-1].toLowerCase().includes("opacity")?t:"".concat(t,"px"):t)(e,t);Object.assign(o,{[n]:l}),yi(i,e,"var(".concat(n,")"),s),yi(a,e,"var(".concat(n,", ").concat(l,")"),s)}},l=e=>"vars"===e[0],function e(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object.entries(t).forEach((t=>{let[o,i]=t;(!l||l&&!l([...r,o]))&&void 0!==i&&null!==i&&("object"===typeof i&&Object.keys(i).length>0?e(i,[...r,o],Array.isArray(i)?[...n,o]:n):s([...r,o],i,n))}))}(e),{css:o,vars:i,varsWithDefaults:a}}const bi=["colorSchemes","components","defaultColorScheme"];const xi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getSelector:r=b,disableCssColorScheme:n,colorSchemeSelector:o}=t,{colorSchemes:i={},components:s,defaultColorScheme:c="light"}=e,u=a(e,bi),{vars:h,css:p,varsWithDefaults:f}=vi(u,t);let m=f;const g={},{[c]:y}=i,v=a(i,[c].map(l));if(Object.entries(v||{}).forEach((e=>{let[r,n]=e;const{vars:o,css:i,varsWithDefaults:a}=vi(n,t);m=xn(m,a),g[r]={css:i,vars:o}})),y){const{css:e,vars:r,varsWithDefaults:n}=vi(y,t);m=xn(m,n),g[c]={css:e,vars:r}}function b(t,r){let n=o;if("class"===o&&(n=".%s"),"data"===o&&(n="[data-%s]"),null!==o&&void 0!==o&&o.startsWith("data-")&&!o.includes("%s")&&(n="[".concat(o,'="%s"]')),t){if("media"===n){var a;if(e.defaultColorScheme===t)return":root";const n=(null===(a=i[t])||void 0===a||null===(a=a.palette)||void 0===a?void 0:a.mode)||t;return{["@media (prefers-color-scheme: ".concat(n,")")]:{":root":r}}}if(n)return e.defaultColorScheme===t?":root, ".concat(n.replace("%s",String(t))):n.replace("%s",String(t))}return":root"}return{vars:m,generateThemeVars:()=>{let e=d({},h);return Object.entries(g).forEach((t=>{let[,{vars:r}]=t;e=xn(e,r)})),e},generateStyleSheets:()=>{const t=[],o=e.defaultColorScheme||"light";function s(e,r){Object.keys(r).length&&t.push("string"===typeof e?{[e]:d({},r)}:e)}s(r(void 0,d({},p)),p);const{[o]:c}=g,u=a(g,[o].map(l));if(c){var h;const{css:e}=c,t=null===(h=i[o])||void 0===h||null===(h=h.palette)||void 0===h?void 0:h.mode,a=d(!n&&t?{colorScheme:t}:{},e);s(r(o,d({},a)),a)}return Object.entries(u).forEach((e=>{var t;let[o,{css:a}]=e;const l=null===(t=i[o])||void 0===t||null===(t=t.palette)||void 0===t?void 0:t.mode,c=d(!n&&l?{colorScheme:l}:{},a);s(r(o,d({},c)),c)})),t}}};const _i=["values","unit","step"];function wi(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:n=5}=e,o=a(e,_i),i=(e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>d(d({},e),{},{[t.key]:t.val})),{})})(t),s=Object.keys(i);function l(e){const n="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(n).concat(r,")")}function c(e){const o="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(o-n/100).concat(r,")")}function u(e,o){const i=s.indexOf(o);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(r,") and ")+"(max-width:".concat((-1!==i&&"number"===typeof t[s[i]]?t[s[i]]:o)-n/100).concat(r,")")}return d({keys:s,values:i,up:l,down:c,between:u,only:function(e){return s.indexOf(e)+1<s.length?u(e,s[s.indexOf(e)+1]):l(e)},not:function(e){const t=s.indexOf(e);return 0===t?l(s[1]):t===s.length-1?c(s[t]):u(e,s[s.indexOf(e)+1]).replace("@media","@media not all and")},unit:r},o)}const Si={borderRadius:4};function ki(e,t){const r=this;if(r.vars){var n;if(null===(n=r.colorSchemes)||void 0===n||!n[e]||"function"!==typeof r.getColorSchemeSelector)return{};let o=r.getColorSchemeSelector(e);return"&"===o?t:((o.includes("data-")||o.includes("."))&&(o="*:where(".concat(o.replace(/\s*&$/,""),") &")),{[o]:t})}return r.palette.mode===e?t:{}}const Ti=["breakpoints","palette","spacing","shape"];const Ei=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:r={},spacing:n,shape:o={}}=e,i=a(e,Ti),s=wi(t),l=mi(n);let c=xn({breakpoints:s,direction:"ltr",components:{},palette:d({mode:"light"},r),spacing:l,shape:d(d({},Si),o)},i);c=function(e){const t=(e,t)=>e.replace("@media",t?"@container ".concat(t):"@container");function r(r,n){r.up=function(){return t(e.breakpoints.up(...arguments),n)},r.down=function(){return t(e.breakpoints.down(...arguments),n)},r.between=function(){return t(e.breakpoints.between(...arguments),n)},r.only=function(){return t(e.breakpoints.only(...arguments),n)},r.not=function(){const r=t(e.breakpoints.not(...arguments),n);return r.includes("not all and")?r.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):r}}const n={},o=e=>(r(n,e),n);return r(o),d(d({},e),{},{containerQueries:o})}(c),c.applyStyles=ki;for(var u=arguments.length,h=new Array(u>1?u-1:0),p=1;p<u;p++)h[p-1]=arguments[p];return c=h.reduce(((e,t)=>xn(e,t)),c),c.unstable_sxConfig=d(d({},_o),null===i||void 0===i?void 0:i.unstable_sxConfig),c.unstable_sx=function(e){return So({sx:e,theme:this})},c};function Ci(e,t){return d({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const Ai=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const ji={textTransform:"uppercase"},Pi='"Roboto", "Helvetica", "Arial", sans-serif';function Ii(e,t){const r="function"===typeof t?t(e):t,{fontFamily:n=Pi,fontSize:o=14,fontWeightLight:i=300,fontWeightRegular:s=400,fontWeightMedium:l=500,fontWeightBold:c=700,htmlFontSize:u=16,allVariants:h,pxToRem:p}=r,f=a(r,Ai);const m=o/14,g=p||(e=>"".concat(e/u*m,"rem")),y=(e,t,r,o,i)=>{return d(d(d({fontFamily:n,fontWeight:e,fontSize:g(t),lineHeight:r},n===Pi?{letterSpacing:"".concat((a=o/t,Math.round(1e5*a)/1e5),"em")}:{}),i),h);var a},v={h1:y(i,96,1.167,-1.5),h2:y(i,60,1.2,-.5),h3:y(s,48,1.167,0),h4:y(s,34,1.235,.25),h5:y(s,24,1.334,0),h6:y(l,20,1.6,.15),subtitle1:y(s,16,1.75,.15),subtitle2:y(l,14,1.57,.1),body1:y(s,16,1.5,.15),body2:y(s,14,1.43,.15),button:y(l,14,1.75,.4,ji),caption:y(s,12,1.66,.4),overline:y(s,12,2.66,1,ji),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return xn(d({htmlFontSize:u,pxToRem:g,fontFamily:n,fontSize:o,fontWeightLight:i,fontWeightRegular:s,fontWeightMedium:l,fontWeightBold:c},v),f,{clone:!1})}function Oi(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const Mi=["none",Oi(0,2,1,-1,0,1,1,0,0,1,3,0),Oi(0,3,1,-2,0,2,2,0,0,1,5,0),Oi(0,3,3,-2,0,3,4,0,0,1,8,0),Oi(0,2,4,-1,0,4,5,0,0,1,10,0),Oi(0,3,5,-1,0,5,8,0,0,1,14,0),Oi(0,3,5,-1,0,6,10,0,0,1,18,0),Oi(0,4,5,-2,0,7,10,1,0,2,16,1),Oi(0,5,5,-3,0,8,10,1,0,3,14,2),Oi(0,5,6,-3,0,9,12,1,0,3,16,2),Oi(0,6,6,-3,0,10,14,1,0,4,18,3),Oi(0,6,7,-4,0,11,15,1,0,4,20,3),Oi(0,7,8,-4,0,12,17,2,0,5,22,4),Oi(0,7,8,-4,0,13,19,2,0,5,24,4),Oi(0,7,9,-4,0,14,21,2,0,5,26,4),Oi(0,8,9,-5,0,15,22,2,0,6,28,5),Oi(0,8,10,-5,0,16,24,2,0,6,30,5),Oi(0,8,11,-5,0,17,26,2,0,6,32,5),Oi(0,9,11,-5,0,18,28,2,0,7,34,6),Oi(0,9,12,-6,0,19,29,2,0,7,36,6),Oi(0,10,13,-6,0,20,31,3,0,8,38,7),Oi(0,10,13,-6,0,21,33,3,0,8,40,7),Oi(0,10,14,-6,0,22,35,3,0,8,42,7),Oi(0,11,14,-7,0,23,36,3,0,9,44,8),Oi(0,11,15,-7,0,24,38,3,0,9,46,8)],Ri=["duration","easing","delay"],Li={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Fi={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function zi(e){return"".concat(Math.round(e),"ms")}function Di(e){if(!e)return 0;const t=e/36;return Math.min(Math.round(10*(4+15*t**.25+t/5)),3e3)}function Ni(e){const t=d(d({},Li),e.easing),r=d(d({},Fi),e.duration);return d(d({getAutoHeightDuration:Di,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:o=r.standard,easing:i=t.easeInOut,delay:s=0}=n;a(n,Ri);return(Array.isArray(e)?e:[e]).map((e=>"".concat(e," ").concat("string"===typeof o?o:zi(o)," ").concat(i," ").concat("string"===typeof s?s:zi(s)))).join(",")}},e),{},{easing:t,duration:r})}const Bi={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Ui(){const e=d({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return function e(t){const r=Object.entries(t);for(let o=0;o<r.length;o++){const[i,a]=r[o];!vn(n=a)&&"undefined"!==typeof n&&"string"!==typeof n&&"boolean"!==typeof n&&"number"!==typeof n&&!Array.isArray(n)||i.startsWith("unstable_")?delete t[i]:vn(a)&&(t[i]=d({},a),e(t[i]))}var n}(e),"import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';\n\nconst theme = ".concat(JSON.stringify(e,null,2),";\n\ntheme.breakpoints = createBreakpoints(theme.breakpoints || {});\ntheme.transitions = createTransitions(theme.transitions || {});\n\nexport default theme;")}const Vi=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Wi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t,mixins:r={},spacing:n,palette:o={},transitions:i={},typography:s={},shape:l}=e,c=a(e,Vi);if(e.vars&&void 0===e.generateThemeVars)throw new Error(mn(20));const u=pi(o),h=Ei(e);let p=xn(h,{mixins:Ci(h.breakpoints,r),palette:u,shadows:Mi.slice(),typography:Ii(u,s),transitions:Ni(i),zIndex:d({},Bi)});p=xn(p,c);for(var f=arguments.length,m=new Array(f>1?f-1:0),g=1;g<f;g++)m[g-1]=arguments[g];return p=m.reduce(((e,t)=>xn(e,t)),p),p.unstable_sxConfig=d(d({},_o),null===c||void 0===c?void 0:c.unstable_sxConfig),p.unstable_sx=function(e){return So({sx:e,theme:this})},p.toRuntimeSource=Ui,p}const qi=Wi;function Hi(e){let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,Math.round(10*t)/1e3}const Gi=["palette","opacity","overlays"],Ki=[...Array(25)].map(((e,t)=>{if(0===t)return"none";const r=Hi(t);return"linear-gradient(rgba(255 255 255 / ".concat(r,"), rgba(255 255 255 / ").concat(r,"))")}));function Xi(e){return{inputPlaceholder:"dark"===e?.5:.42,inputUnderline:"dark"===e?.7:.42,switchTrackDisabled:"dark"===e?.2:.12,switchTrack:"dark"===e?.3:.38}}function Zi(e){return"dark"===e?Ki:[]}function Yi(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||"palette"===e[0]&&!(null===(t=e[1])||void 0===t||!t.match(/(mode|contrastThreshold|tonalOffset)/))}const Ji=e=>[...[...Array(25)].map(((t,r)=>"--".concat(e?"".concat(e,"-"):"","overlays-").concat(r))),"--".concat(e?"".concat(e,"-"):"","palette-AppBar-darkBg"),"--".concat(e?"".concat(e,"-"):"","palette-AppBar-darkColor")],$i=e=>(t,r)=>{const n=e.rootSelector||":root",o=e.colorSchemeSelector;let i=o;if("class"===o&&(i=".%s"),"data"===o&&(i="[data-%s]"),null!==o&&void 0!==o&&o.startsWith("data-")&&!o.includes("%s")&&(i="[".concat(o,'="%s"]')),e.defaultColorScheme===t){if("dark"===t){const o={};return Ji(e.cssVarPrefix).forEach((e=>{o[e]=r[e],delete r[e]})),"media"===i?{[n]:r,"@media (prefers-color-scheme: dark)":{[n]:o}}:i?{[i.replace("%s",t)]:o,["".concat(n,", ").concat(i.replace("%s",t))]:r}:{[n]:d(d({},r),o)}}if(i&&"media"!==i)return"".concat(n,", ").concat(i.replace("%s",String(t)))}else if(t){if("media"===i)return{["@media (prefers-color-scheme: ".concat(String(t),")")]:{[n]:r}};if(i)return i.replace("%s",String(t))}return n},Qi=["palette"],ea=["colorSchemes","defaultColorScheme","disableCssColorScheme","cssVarPrefix","shouldSkipGeneratingVar","colorSchemeSelector","rootSelector"];function ta(e,t,r){!e[t]&&r&&(e[t]=r)}function ra(e){return"string"===typeof e&&e.startsWith("hsl")?qo(e):e}function na(e,t){"".concat(t,"Channel")in e||(e["".concat(t,"Channel")]=Vo(ra(e[t]),("MUI: Can't create `palette.".concat(t,"Channel` because `palette.").concat(t,"` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()."),"To suppress this warning, you need to explicitly provide the `palette.".concat(t,'Channel` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.'))))}const oa=e=>{try{return e()}catch(t){}};function ia(e,t,r,n){var o,i,s;if(!t)return;t=!0===t?{}:t;const l="dark"===n?"dark":"light";var c;if(!r)return void(e[n]=function(e){const{palette:t={mode:"light"},opacity:r,overlays:n}=e,o=a(e,Gi),i=pi(t);return d({palette:i,opacity:d(d({},Xi(i.mode)),r),overlays:n||Zi(i.mode)},o)}(d(d({},t),{},{palette:d({mode:l},null===(c=t)||void 0===c?void 0:c.palette)})));const u=qi(d(d({},r),{},{palette:d({mode:l},null===(o=t)||void 0===o?void 0:o.palette)})),{palette:h}=u,p=a(u,Qi);return e[n]=d(d({},t),{},{palette:h,opacity:d(d({},Xi(l)),null===(i=t)||void 0===i?void 0:i.opacity),overlays:(null===(s=t)||void 0===s?void 0:s.overlays)||Zi(l)}),p}function aa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{colorSchemes:t={light:!0},defaultColorScheme:r,disableCssColorScheme:n=!1,cssVarPrefix:o="mui",shouldSkipGeneratingVar:i=Yi,colorSchemeSelector:s=(t.light&&t.dark?"media":void 0),rootSelector:c=":root"}=e,u=a(e,ea),h=Object.keys(t)[0],p=r||(t.light&&"light"!==h?"light":h),f=function(){return fi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mui")}(o),{[p]:m,light:g,dark:y}=t,v=d({},a(t,[p,"light","dark"].map(l)));let b=m;if(("dark"===p&&!("dark"in t)||"light"===p&&!("light"in t))&&(b=!0),!b)throw new Error(mn(21,p));const x=ia(v,b,u,p);g&&!v.light&&ia(v,g,void 0,"light"),y&&!v.dark&&ia(v,y,void 0,"dark");let _=d(d({defaultColorScheme:p},x),{},{cssVarPrefix:o,colorSchemeSelector:s,rootSelector:c,getCssVar:f,colorSchemes:v,font:d(d({},gi(x.typography)),x.font),spacing:(w=u.spacing,"number"===typeof w?"".concat(w,"px"):"string"===typeof w||"function"===typeof w||Array.isArray(w)?w:"8px")});var w;Object.keys(_.colorSchemes).forEach((e=>{const t=_.colorSchemes[e].palette,r=e=>{const r=e.split("-"),n=r[1],o=r[2];return f(e,t[n][o])};var n;if("light"===t.mode&&(ta(t.common,"background","#fff"),ta(t.common,"onBackground","#000")),"dark"===t.mode&&(ta(t.common,"background","#000"),ta(t.common,"onBackground","#fff")),n=t,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"].forEach((e=>{n[e]||(n[e]={})})),"light"===t.mode){ta(t.Alert,"errorColor",Zo(t.error.light,.6)),ta(t.Alert,"infoColor",Zo(t.info.light,.6)),ta(t.Alert,"successColor",Zo(t.success.light,.6)),ta(t.Alert,"warningColor",Zo(t.warning.light,.6)),ta(t.Alert,"errorFilledBg",r("palette-error-main")),ta(t.Alert,"infoFilledBg",r("palette-info-main")),ta(t.Alert,"successFilledBg",r("palette-success-main")),ta(t.Alert,"warningFilledBg",r("palette-warning-main")),ta(t.Alert,"errorFilledColor",oa((()=>t.getContrastText(t.error.main)))),ta(t.Alert,"infoFilledColor",oa((()=>t.getContrastText(t.info.main)))),ta(t.Alert,"successFilledColor",oa((()=>t.getContrastText(t.success.main)))),ta(t.Alert,"warningFilledColor",oa((()=>t.getContrastText(t.warning.main)))),ta(t.Alert,"errorStandardBg",Jo(t.error.light,.9)),ta(t.Alert,"infoStandardBg",Jo(t.info.light,.9)),ta(t.Alert,"successStandardBg",Jo(t.success.light,.9)),ta(t.Alert,"warningStandardBg",Jo(t.warning.light,.9)),ta(t.Alert,"errorIconColor",r("palette-error-main")),ta(t.Alert,"infoIconColor",r("palette-info-main")),ta(t.Alert,"successIconColor",r("palette-success-main")),ta(t.Alert,"warningIconColor",r("palette-warning-main")),ta(t.AppBar,"defaultBg",r("palette-grey-100")),ta(t.Avatar,"defaultBg",r("palette-grey-400")),ta(t.Button,"inheritContainedBg",r("palette-grey-300")),ta(t.Button,"inheritContainedHoverBg",r("palette-grey-A100")),ta(t.Chip,"defaultBorder",r("palette-grey-400")),ta(t.Chip,"defaultAvatarColor",r("palette-grey-700")),ta(t.Chip,"defaultIconColor",r("palette-grey-700")),ta(t.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),ta(t.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),ta(t.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),ta(t.LinearProgress,"primaryBg",Jo(t.primary.main,.62)),ta(t.LinearProgress,"secondaryBg",Jo(t.secondary.main,.62)),ta(t.LinearProgress,"errorBg",Jo(t.error.main,.62)),ta(t.LinearProgress,"infoBg",Jo(t.info.main,.62)),ta(t.LinearProgress,"successBg",Jo(t.success.main,.62)),ta(t.LinearProgress,"warningBg",Jo(t.warning.main,.62)),ta(t.Skeleton,"bg","rgba(".concat(r("palette-text-primaryChannel")," / 0.11)")),ta(t.Slider,"primaryTrack",Jo(t.primary.main,.62)),ta(t.Slider,"secondaryTrack",Jo(t.secondary.main,.62)),ta(t.Slider,"errorTrack",Jo(t.error.main,.62)),ta(t.Slider,"infoTrack",Jo(t.info.main,.62)),ta(t.Slider,"successTrack",Jo(t.success.main,.62)),ta(t.Slider,"warningTrack",Jo(t.warning.main,.62));const e=$o(t.background.default,.8);ta(t.SnackbarContent,"bg",e),ta(t.SnackbarContent,"color",oa((()=>t.getContrastText(e)))),ta(t.SpeedDialAction,"fabHoverBg",$o(t.background.paper,.15)),ta(t.StepConnector,"border",r("palette-grey-400")),ta(t.StepContent,"border",r("palette-grey-400")),ta(t.Switch,"defaultColor",r("palette-common-white")),ta(t.Switch,"defaultDisabledColor",r("palette-grey-100")),ta(t.Switch,"primaryDisabledColor",Jo(t.primary.main,.62)),ta(t.Switch,"secondaryDisabledColor",Jo(t.secondary.main,.62)),ta(t.Switch,"errorDisabledColor",Jo(t.error.main,.62)),ta(t.Switch,"infoDisabledColor",Jo(t.info.main,.62)),ta(t.Switch,"successDisabledColor",Jo(t.success.main,.62)),ta(t.Switch,"warningDisabledColor",Jo(t.warning.main,.62)),ta(t.TableCell,"border",Jo(Ko(t.divider,1),.88)),ta(t.Tooltip,"bg",Ko(t.grey[700],.92))}if("dark"===t.mode){ta(t.Alert,"errorColor",Jo(t.error.light,.6)),ta(t.Alert,"infoColor",Jo(t.info.light,.6)),ta(t.Alert,"successColor",Jo(t.success.light,.6)),ta(t.Alert,"warningColor",Jo(t.warning.light,.6)),ta(t.Alert,"errorFilledBg",r("palette-error-dark")),ta(t.Alert,"infoFilledBg",r("palette-info-dark")),ta(t.Alert,"successFilledBg",r("palette-success-dark")),ta(t.Alert,"warningFilledBg",r("palette-warning-dark")),ta(t.Alert,"errorFilledColor",oa((()=>t.getContrastText(t.error.dark)))),ta(t.Alert,"infoFilledColor",oa((()=>t.getContrastText(t.info.dark)))),ta(t.Alert,"successFilledColor",oa((()=>t.getContrastText(t.success.dark)))),ta(t.Alert,"warningFilledColor",oa((()=>t.getContrastText(t.warning.dark)))),ta(t.Alert,"errorStandardBg",Zo(t.error.light,.9)),ta(t.Alert,"infoStandardBg",Zo(t.info.light,.9)),ta(t.Alert,"successStandardBg",Zo(t.success.light,.9)),ta(t.Alert,"warningStandardBg",Zo(t.warning.light,.9)),ta(t.Alert,"errorIconColor",r("palette-error-main")),ta(t.Alert,"infoIconColor",r("palette-info-main")),ta(t.Alert,"successIconColor",r("palette-success-main")),ta(t.Alert,"warningIconColor",r("palette-warning-main")),ta(t.AppBar,"defaultBg",r("palette-grey-900")),ta(t.AppBar,"darkBg",r("palette-background-paper")),ta(t.AppBar,"darkColor",r("palette-text-primary")),ta(t.Avatar,"defaultBg",r("palette-grey-600")),ta(t.Button,"inheritContainedBg",r("palette-grey-800")),ta(t.Button,"inheritContainedHoverBg",r("palette-grey-700")),ta(t.Chip,"defaultBorder",r("palette-grey-700")),ta(t.Chip,"defaultAvatarColor",r("palette-grey-300")),ta(t.Chip,"defaultIconColor",r("palette-grey-300")),ta(t.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),ta(t.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),ta(t.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),ta(t.LinearProgress,"primaryBg",Zo(t.primary.main,.5)),ta(t.LinearProgress,"secondaryBg",Zo(t.secondary.main,.5)),ta(t.LinearProgress,"errorBg",Zo(t.error.main,.5)),ta(t.LinearProgress,"infoBg",Zo(t.info.main,.5)),ta(t.LinearProgress,"successBg",Zo(t.success.main,.5)),ta(t.LinearProgress,"warningBg",Zo(t.warning.main,.5)),ta(t.Skeleton,"bg","rgba(".concat(r("palette-text-primaryChannel")," / 0.13)")),ta(t.Slider,"primaryTrack",Zo(t.primary.main,.5)),ta(t.Slider,"secondaryTrack",Zo(t.secondary.main,.5)),ta(t.Slider,"errorTrack",Zo(t.error.main,.5)),ta(t.Slider,"infoTrack",Zo(t.info.main,.5)),ta(t.Slider,"successTrack",Zo(t.success.main,.5)),ta(t.Slider,"warningTrack",Zo(t.warning.main,.5));const e=$o(t.background.default,.98);ta(t.SnackbarContent,"bg",e),ta(t.SnackbarContent,"color",oa((()=>t.getContrastText(e)))),ta(t.SpeedDialAction,"fabHoverBg",$o(t.background.paper,.15)),ta(t.StepConnector,"border",r("palette-grey-600")),ta(t.StepContent,"border",r("palette-grey-600")),ta(t.Switch,"defaultColor",r("palette-grey-300")),ta(t.Switch,"defaultDisabledColor",r("palette-grey-600")),ta(t.Switch,"primaryDisabledColor",Zo(t.primary.main,.55)),ta(t.Switch,"secondaryDisabledColor",Zo(t.secondary.main,.55)),ta(t.Switch,"errorDisabledColor",Zo(t.error.main,.55)),ta(t.Switch,"infoDisabledColor",Zo(t.info.main,.55)),ta(t.Switch,"successDisabledColor",Zo(t.success.main,.55)),ta(t.Switch,"warningDisabledColor",Zo(t.warning.main,.55)),ta(t.TableCell,"border",Zo(Ko(t.divider,1),.68)),ta(t.Tooltip,"bg",Ko(t.grey[700],.92))}na(t.background,"default"),na(t.background,"paper"),na(t.common,"background"),na(t.common,"onBackground"),na(t,"divider"),Object.keys(t).forEach((e=>{const r=t[e];"tonalOffset"!==e&&r&&"object"===typeof r&&(r.main&&ta(t[e],"mainChannel",Vo(ra(r.main))),r.light&&ta(t[e],"lightChannel",Vo(ra(r.light))),r.dark&&ta(t[e],"darkChannel",Vo(ra(r.dark))),r.contrastText&&ta(t[e],"contrastTextChannel",Vo(ra(r.contrastText))),"text"===e&&(na(t[e],"primary"),na(t[e],"secondary")),"action"===e&&(r.active&&na(t[e],"active"),r.selected&&na(t[e],"selected")))}))}));for(var S=arguments.length,k=new Array(S>1?S-1:0),T=1;T<S;T++)k[T-1]=arguments[T];_=k.reduce(((e,t)=>xn(e,t)),_);const E={prefix:o,disableCssColorScheme:n,shouldSkipGeneratingVar:i,getSelector:$i(_)},{vars:C,generateThemeVars:A,generateStyleSheets:j}=xi(_,E);return _.vars=C,Object.entries(_.colorSchemes[_.defaultColorScheme]).forEach((e=>{let[t,r]=e;_[t]=r})),_.generateThemeVars=A,_.generateStyleSheets=j,_.generateSpacing=function(){return mi(u.spacing,Bn(this))},_.getColorSchemeSelector=function(e){return function(t){return"media"===e?"@media (prefers-color-scheme: ".concat(t,")"):e?e.startsWith("data-")&&!e.includes("%s")?"[".concat(e,'="').concat(t,'"] &'):"class"===e?".".concat(t," &"):"data"===e?"[data-".concat(t,"] &"):"".concat(e.replace("%s",t)," &"):"&"}}(s),_.spacing=_.generateSpacing(),_.shouldSkipGeneratingVar=i,_.unstable_sxConfig=d(d({},_o),null===u||void 0===u?void 0:u.unstable_sxConfig),_.unstable_sx=function(e){return So({sx:e,theme:this})},_.toRuntimeSource=Ui,_}const sa=["palette","cssVariables","colorSchemes","defaultColorScheme"];function la(e,t,r){e.colorSchemes&&r&&(e.colorSchemes[t]=d(d({},!0!==r&&r),{},{palette:pi(d(d({},!0===r?{}:r.palette),{},{mode:t}))}))}function ca(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{palette:t,cssVariables:r=!1,colorSchemes:n=(t?void 0:{light:!0}),defaultColorScheme:o=(null===t||void 0===t?void 0:t.mode)}=e,i=a(e,sa),s=o||"light",l=null===n||void 0===n?void 0:n[s],c=d(d({},n),t?{[s]:d(d({},"boolean"!==typeof l&&l),{},{palette:t})}:void 0);for(var u=arguments.length,h=new Array(u>1?u-1:0),p=1;p<u;p++)h[p-1]=arguments[p];if(!1===r){if(!("colorSchemes"in e))return qi(e,...h);let r=t;"palette"in e||c[s]&&(!0!==c[s]?r=c[s].palette:"dark"===s&&(r={mode:"dark"}));const n=qi(d(d({},e),{},{palette:r}),...h);return n.defaultColorScheme=s,n.colorSchemes=c,"light"===n.palette.mode&&(n.colorSchemes.light=d(d({},!0!==c.light&&c.light),{},{palette:n.palette}),la(n,"dark",c.dark)),"dark"===n.palette.mode&&(n.colorSchemes.dark=d(d({},!0!==c.dark&&c.dark),{},{palette:n.palette}),la(n,"light",c.light)),n}return t||"light"in c||"light"!==s||(c.light=!0),aa(d(d({},i),{},{colorSchemes:c,defaultColorScheme:s},"boolean"!==typeof r&&r),...h)}const ua={attribute:"data-mui-color-scheme",colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:da,useColorScheme:ha,getInitColorSchemeScript:pa}=function(e){const{themeId:r,theme:n={},modeStorageKey:o=Po,colorSchemeStorageKey:i=Io,disableTransitionOnChange:a=!1,defaultColorScheme:s,resolveTheme:l}=e,c={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},u=t.createContext(void 0),h={},p={},f="string"===typeof s?s:s.light,m="string"===typeof s?s:s.dark;return{CssVarsProvider:function(e){var c,f,m;const{children:g,theme:y,modeStorageKey:v=o,colorSchemeStorageKey:b=i,disableTransitionOnChange:x=a,storageManager:_,storageWindow:w=("undefined"===typeof window?void 0:window),documentNode:S=("undefined"===typeof document?void 0:document),colorSchemeNode:k=("undefined"===typeof document?void 0:document.documentElement),disableNestedContext:T=!1,disableStyleSheetGeneration:E=!1,defaultMode:C="system",noSsr:A}=e,j=t.useRef(!1),P=_t(),I=t.useContext(u),O=!!I&&!T,M=t.useMemo((()=>y||("function"===typeof n?n():n)),[y]),R=M[r],L=R||M,{colorSchemes:F=h,components:z=p,cssVarPrefix:D}=L,N=Object.keys(F).filter((e=>!!F[e])).join(","),B=t.useMemo((()=>N.split(",")),[N]),U="string"===typeof s?s:s.light,V="string"===typeof s?s:s.dark,W=F[U]&&F[V]?C:(null===(c=F[L.defaultColorScheme])||void 0===c||null===(c=c.palette)||void 0===c?void 0:c.mode)||(null===(f=L.palette)||void 0===f?void 0:f.mode),{mode:q,setMode:H,systemMode:G,lightColorScheme:K,darkColorScheme:X,colorScheme:Z,setColorScheme:Y}=Do({supportedColorSchemes:B,defaultLightColorScheme:U,defaultDarkColorScheme:V,modeStorageKey:v,colorSchemeStorageKey:b,defaultMode:W,storageManager:_,storageWindow:w,noSsr:A});let J=q,$=Z;O&&(J=I.mode,$=I.colorScheme);const Q=t.useMemo((()=>{var e;const t=$||L.defaultColorScheme,r=(null===(e=L.generateThemeVars)||void 0===e?void 0:e.call(L))||L.vars,n=d(d({},L),{},{components:z,colorSchemes:F,cssVarPrefix:D,vars:r});if("function"===typeof n.generateSpacing&&(n.spacing=n.generateSpacing()),t){const e=F[t];e&&"object"===typeof e&&Object.keys(e).forEach((t=>{e[t]&&"object"===typeof e[t]?n[t]=d(d({},n[t]),e[t]):n[t]=e[t]}))}return l?l(n):n}),[L,$,z,F,D]),ee=L.colorSchemeSelector;jo((()=>{if($&&k&&ee&&"media"!==ee){const e=ee;let t=ee;if("class"===e&&(t=".%s"),"data"===e&&(t="[data-%s]"),null!==e&&void 0!==e&&e.startsWith("data-")&&!e.includes("%s")&&(t="[".concat(e,'="%s"]')),t.startsWith("."))k.classList.remove(...B.map((e=>t.substring(1).replace("%s",e)))),k.classList.add(t.substring(1).replace("%s",$));else{const e=t.replace("%s",$).match(/\[([^\]]+)\]/);if(e){const[t,r]=e[1].split("=");r||B.forEach((e=>{k.removeAttribute(t.replace($,e))})),k.setAttribute(t,r?r.replace(/"|'/g,""):"")}else k.setAttribute(t,$)}}}),[$,ee,k,B]),t.useEffect((()=>{let e;if(x&&j.current&&S){const t=S.createElement("style");t.appendChild(S.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),S.head.appendChild(t),window.getComputedStyle(S.body),e=setTimeout((()=>{S.head.removeChild(t)}),1)}return()=>{clearTimeout(e)}}),[$,x,S]),t.useEffect((()=>(j.current=!0,()=>{j.current=!1})),[]);const te=t.useMemo((()=>({allColorSchemes:B,colorScheme:$,darkColorScheme:X,lightColorScheme:K,mode:J,setColorScheme:Y,setMode:H,systemMode:G})),[B,$,X,K,J,Y,H,G,Q.colorSchemeSelector]);let re=!0;(E||!1===L.cssVariables||O&&(null===P||void 0===P?void 0:P.cssVarPrefix)===D)&&(re=!1);const ne=(0,St.jsxs)(t.Fragment,{children:[(0,St.jsx)(dn,{themeId:R?r:void 0,theme:Q,children:g}),re&&(0,St.jsx)(Ao,{styles:(null===(m=Q.generateStyleSheets)||void 0===m?void 0:m.call(Q))||[]})]});return O?ne:(0,St.jsx)(u.Provider,{value:te,children:ne})},useColorScheme:()=>t.useContext(u)||c,getInitColorSchemeScript:e=>function(e){const{defaultMode:t="system",defaultLightColorScheme:r="light",defaultDarkColorScheme:n="dark",modeStorageKey:o=Po,colorSchemeStorageKey:i=Io,attribute:a=Oo,colorSchemeNode:s="document.documentElement",nonce:l}=e||{};let c="",u=a;if("class"===a&&(u=".%s"),"data"===a&&(u="[data-%s]"),u.startsWith(".")){const e=u.substring(1);c+="".concat(s,".classList.remove('").concat(e,"'.replace('%s', light), '").concat(e,"'.replace('%s', dark));\n      ").concat(s,".classList.add('").concat(e,"'.replace('%s', colorScheme));")}const d=u.match(/\[([^\]]+)\]/);if(d){const[e,t]=d[1].split("=");t||(c+="".concat(s,".removeAttribute('").concat(e,"'.replace('%s', light));\n      ").concat(s,".removeAttribute('").concat(e,"'.replace('%s', dark));")),c+="\n      ".concat(s,".setAttribute('").concat(e,"'.replace('%s', colorScheme), ").concat(t?"".concat(t,".replace('%s', colorScheme)"):'""',");")}else c+="".concat(s,".setAttribute('").concat(u,"', colorScheme);");return(0,St.jsx)("script",{suppressHydrationWarning:!0,nonce:"undefined"===typeof window?l:"",dangerouslySetInnerHTML:{__html:"(function() {\ntry {\n  let colorScheme = '';\n  const mode = localStorage.getItem('".concat(o,"') || '").concat(t,"';\n  const dark = localStorage.getItem('").concat(i,"-dark') || '").concat(n,"';\n  const light = localStorage.getItem('").concat(i,"-light') || '").concat(r,"';\n  if (mode === 'system') {\n    // handle system mode\n    const mql = window.matchMedia('(prefers-color-scheme: dark)');\n    if (mql.matches) {\n      colorScheme = dark\n    } else {\n      colorScheme = light\n    }\n  }\n  if (mode === 'light') {\n    colorScheme = light;\n  }\n  if (mode === 'dark') {\n    colorScheme = dark;\n  }\n  if (colorScheme) {\n    ").concat(c,"\n  }\n} catch(e){}})();")}},"mui-color-scheme-init")}(d({colorSchemeStorageKey:i,defaultLightColorScheme:f,defaultDarkColorScheme:m,modeStorageKey:o},e))}}({themeId:hn,theme:()=>ca({cssVariables:!0}),colorSchemeStorageKey:ua.colorSchemeStorageKey,modeStorageKey:ua.modeStorageKey,defaultColorScheme:{light:ua.defaultLightColorScheme,dark:ua.defaultDarkColorScheme},resolveTheme:e=>{const t=d(d({},e),{},{typography:Ii(e.palette,e.typography)});return t.unstable_sx=function(e){return So({sx:e,theme:this})},t}});const fa=da,ma=["theme"];function ga(e){let{theme:t}=e,r=a(e,ma);if("function"===typeof t)return(0,St.jsx)(fn,d({theme:t},r));const n=hn in t?t[hn]:t;return"colorSchemes"in n?(0,St.jsx)(fa,d({theme:t},r)):"vars"in n?(0,St.jsx)(fn,d({theme:t},r)):(0,St.jsx)(fn,d({theme:d(d({},t),{},{vars:null})},r))}const ya=["sx"];function va(e){const{sx:t}=e,r=a(e,ya),{systemProps:n,otherProps:o}=(e=>{var t,r;const n={systemProps:{},otherProps:{}},o=null!==(t=null===e||void 0===e||null===(r=e.theme)||void 0===r?void 0:r.unstable_sxConfig)&&void 0!==t?t:_o;return Object.keys(e).forEach((t=>{o[t]?n.systemProps[t]=e[t]:n.otherProps[t]=e[t]})),n})(r);let i;return i=Array.isArray(t)?[n,...t]:"function"===typeof t?function(){const e=t(...arguments);return vn(e)?d(d({},n),e):n}:d(d({},n),t),d(d({},o),{},{sx:i})}const ba=Ei();const xa=function(){return Qr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ba)};const _a=function(e){let{styles:t,themeId:r,defaultTheme:n={}}=e;const o=xa(n),i="function"===typeof t?t(r&&o[r]||o):t;return(0,St.jsx)(Ao,{styles:i})},wa=ca();const Sa=function(e){return(0,St.jsx)(_a,d(d({},e),{},{defaultTheme:wa,themeId:hn}))};function ka(e){return function(t){return(0,St.jsx)(Sa,{styles:"function"===typeof e?r=>e(d({theme:r},t)):e})}}function Ta(e){return sn(e)}const Ea="function"===typeof ka({}),Ca=(e,t)=>d({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode}),Aa=e=>d(d({color:(e.vars||e).palette.text.primary},e.typography.body1),{},{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),ja=function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={};r&&e.colorSchemes&&"function"===typeof e.getColorSchemeSelector&&Object.entries(e.colorSchemes).forEach((t=>{let[r,o]=t;const i=e.getColorSchemeSelector(r);var a,s;i.startsWith("@")?n[i]={":root":{colorScheme:null===(a=o.palette)||void 0===a?void 0:a.mode}}:n[i.replace(/\s*&/,"")]={colorScheme:null===(s=o.palette)||void 0===s?void 0:s.mode}}));let o=d({html:Ca(e,r),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:d(d({margin:0},Aa(e)),{},{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},n);const i=null===(t=e.components)||void 0===t||null===(t=t.MuiCssBaseline)||void 0===t?void 0:t.styleOverrides;return i&&(o=[o,i]),o},Pa="mui-ecs",Ia=ka(Ea?e=>{let{theme:t,enableColorScheme:r}=e;return ja(t,r)}:e=>{let{theme:t}=e;return(e=>{const t=ja(e,!1),r=Array.isArray(t)?t[0]:t;return!e.vars&&r&&(r.html[":root:has(".concat(Pa,")")]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach((t=>{let[n,o]=t;const i=e.getColorSchemeSelector(n);var a,s;i.startsWith("@")?r[i]={[":root:not(:has(.".concat(Pa,"))")]:{colorScheme:null===(a=o.palette)||void 0===a?void 0:a.mode}}:r[i.replace(/\s*&/,"")]={["&:not(:has(.".concat(Pa,"))")]:{colorScheme:null===(s=o.palette)||void 0===s?void 0:s.mode}}})),t})(t)});const Oa=function(e){const r=Ta({props:e,name:"MuiCssBaseline"}),{children:n,enableColorScheme:o=!1}=r;return(0,St.jsxs)(t.Fragment,{children:[Ea&&(0,St.jsx)(Ia,{enableColorScheme:o}),!Ea&&!o&&(0,St.jsx)("span",{className:Pa,style:{display:"none"}}),n]})},Ma="#FFD700",Ra="#FFA500",La="#000000",Fa="#FFFFFF",za="#1a1a1a",Da="#f5f5f5",Na="#007bff",Ba="#28a745",Ua="#dc3545",Va="#fd7e14",Wa="#000000",qa="#666666",Ha=ca({palette:{mode:"light",primary:{main:Ma,light:"#FFE55C",dark:"#E6C200",contrastText:La},secondary:{main:Ra,light:"#FFB84D",dark:"#CC8400",contrastText:La},background:{default:Fa,paper:Fa,dark:za},text:{primary:Wa,secondary:qa},stellar:{yellow:Ma,gold:Ra,black:La,white:Fa,darkGray:za,lightGray:Da,blue:Na,green:Ba,red:Ua,orange:Va},success:{main:Ba,light:"#d4edda",dark:"#155724"},error:{main:Ua,light:"#f8d7da",dark:"#721c24"},warning:{main:Va,light:"#fff3cd",dark:"#856404"},info:{main:Na,light:"#d1ecf1",dark:"#0c5460"}},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif"].join(","),h1:{fontWeight:700,color:La},h2:{fontWeight:600,color:La},h3:{fontWeight:600,color:La},h4:{fontWeight:500,color:La},h5:{fontWeight:500,color:La},h6:{fontWeight:500,color:La},body1:{color:Wa},body2:{color:qa}},components:{MuiAppBar:{styleOverrides:{root:{backgroundColor:La,color:Fa}}},MuiButton:{styleOverrides:{root:{textTransform:"none",fontWeight:600,borderRadius:8},contained:{boxShadow:"0 2px 4px rgba(0,0,0,0.1)","&:hover":{boxShadow:"0 4px 8px rgba(0,0,0,0.15)"}}}},MuiCard:{styleOverrides:{root:{borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid ".concat(Da)}}},MuiPaper:{styleOverrides:{root:{borderRadius:12}}},MuiChip:{styleOverrides:{root:{borderRadius:16}}}}});function Ga(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ka}=Object.prototype,{getPrototypeOf:Xa}=Object,Za=(Ya=Object.create(null),e=>{const t=Ka.call(e);return Ya[t]||(Ya[t]=t.slice(8,-1).toLowerCase())});var Ya;const Ja=e=>(e=e.toLowerCase(),t=>Za(t)===e),$a=e=>t=>typeof t===e,{isArray:Qa}=Array,es=$a("undefined");const ts=Ja("ArrayBuffer");const rs=$a("string"),ns=$a("function"),os=$a("number"),is=e=>null!==e&&"object"===typeof e,as=e=>{if("object"!==Za(e))return!1;const t=Xa(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ss=Ja("Date"),ls=Ja("File"),cs=Ja("Blob"),us=Ja("FileList"),ds=Ja("URLSearchParams"),[hs,ps,fs,ms]=["ReadableStream","Request","Response","Headers"].map(Ja);function gs(e,t){let r,n,{allOwnKeys:o=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Qa(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{const n=o?Object.getOwnPropertyNames(e):Object.keys(e),i=n.length;let a;for(r=0;r<i;r++)a=n[r],t.call(null,e[a],a,e)}}function ys(e,t){t=t.toLowerCase();const r=Object.keys(e);let n,o=r.length;for(;o-- >0;)if(n=r[o],t===n.toLowerCase())return n;return null}const vs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,bs=e=>!es(e)&&e!==vs;const xs=(_s="undefined"!==typeof Uint8Array&&Xa(Uint8Array),e=>_s&&e instanceof _s);var _s;const ws=Ja("HTMLFormElement"),Ss=(e=>{let{hasOwnProperty:t}=e;return(e,r)=>t.call(e,r)})(Object.prototype),ks=Ja("RegExp"),Ts=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};gs(r,((r,o)=>{let i;!1!==(i=t(r,o,e))&&(n[o]=i||r)})),Object.defineProperties(e,n)};const Es=Ja("AsyncFunction"),Cs=(As="function"===typeof setImmediate,js=ns(vs.postMessage),As?setImmediate:js?((e,t)=>(vs.addEventListener("message",(r=>{let{source:n,data:o}=r;n===vs&&o===e&&t.length&&t.shift()()}),!1),r=>{t.push(r),vs.postMessage(e,"*")}))("axios@".concat(Math.random()),[]):e=>setTimeout(e));var As,js;const Ps="undefined"!==typeof queueMicrotask?queueMicrotask.bind(vs):"undefined"!==typeof process&&process.nextTick||Cs,Is={isArray:Qa,isArrayBuffer:ts,isBuffer:function(e){return null!==e&&!es(e)&&null!==e.constructor&&!es(e.constructor)&&ns(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||ns(e.append)&&("formdata"===(t=Za(e))||"object"===t&&ns(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ts(e.buffer),t},isString:rs,isNumber:os,isBoolean:e=>!0===e||!1===e,isObject:is,isPlainObject:as,isReadableStream:hs,isRequest:ps,isResponse:fs,isHeaders:ms,isUndefined:es,isDate:ss,isFile:ls,isBlob:cs,isRegExp:ks,isFunction:ns,isStream:e=>is(e)&&ns(e.pipe),isURLSearchParams:ds,isTypedArray:xs,isFileList:us,forEach:gs,merge:function e(){const{caseless:t}=bs(this)&&this||{},r={},n=(n,o)=>{const i=t&&ys(r,o)||o;as(r[i])&&as(n)?r[i]=e(r[i],n):as(n)?r[i]=e({},n):Qa(n)?r[i]=n.slice():r[i]=n};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&gs(arguments[o],n);return r},extend:function(e,t,r){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return gs(t,((t,n)=>{r&&ns(t)?e[n]=Ga(t,r):e[n]=t}),{allOwnKeys:n}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let o,i,a;const s={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)a=o[i],n&&!n(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==r&&Xa(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:Za,kindOfTest:Ja,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(Qa(e))return e;let t=e.length;if(!os(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:ws,hasOwnProperty:Ss,hasOwnProp:Ss,reduceDescriptors:Ts,freezeMethods:e=>{Ts(e,((t,r)=>{if(ns(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];ns(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach((e=>{r[e]=!0}))};return Qa(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:ys,global:vs,isContextDefined:bs,isSpecCompliantForm:function(e){return!!(e&&ns(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(is(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const o=Qa(e)?[]:{};return gs(e,((e,t)=>{const i=r(e,n+1);!es(i)&&(o[t]=i)})),t[n]=void 0,o}}return e};return r(e,0)},isAsyncFn:Es,isThenable:e=>e&&(is(e)||ns(e))&&ns(e.then)&&ns(e.catch),setImmediate:Cs,asap:Ps};function Os(e,t,r,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o,this.status=o.status?o.status:null)}Is.inherits(Os,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Is.toJSONObject(this.config),code:this.code,status:this.status}}});const Ms=Os.prototype,Rs={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Rs[e]={value:e}})),Object.defineProperties(Os,Rs),Object.defineProperty(Ms,"isAxiosError",{value:!0}),Os.from=(e,t,r,n,o,i)=>{const a=Object.create(Ms);return Is.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Os.call(a,e.message,t,r,n,o),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const Ls=Os;function Fs(e){return Is.isPlainObject(e)||Is.isArray(e)}function zs(e){return Is.endsWith(e,"[]")?e.slice(0,-2):e}function Ds(e,t,r){return e?e.concat(t).map((function(e,t){return e=zs(e),!r&&t?"["+e+"]":e})).join(r?".":""):t}const Ns=Is.toFlatObject(Is,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Bs=function(e,t,r){if(!Is.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=Is.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Is.isUndefined(t[e])}))).metaTokens,o=r.visitor||c,i=r.dots,a=r.indexes,s=(r.Blob||"undefined"!==typeof Blob&&Blob)&&Is.isSpecCompliantForm(t);if(!Is.isFunction(o))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Is.isDate(e))return e.toISOString();if(!s&&Is.isBlob(e))throw new Ls("Blob is not supported. Use a Buffer instead.");return Is.isArrayBuffer(e)||Is.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,o){let s=e;if(e&&!o&&"object"===typeof e)if(Is.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(Is.isArray(e)&&function(e){return Is.isArray(e)&&!e.some(Fs)}(e)||(Is.isFileList(e)||Is.endsWith(r,"[]"))&&(s=Is.toArray(e)))return r=zs(r),s.forEach((function(e,n){!Is.isUndefined(e)&&null!==e&&t.append(!0===a?Ds([r],n,i):null===a?r:r+"[]",l(e))})),!1;return!!Fs(e)||(t.append(Ds(o,r,i),l(e)),!1)}const u=[],d=Object.assign(Ns,{defaultVisitor:c,convertValue:l,isVisitable:Fs});if(!Is.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!Is.isUndefined(r)){if(-1!==u.indexOf(r))throw Error("Circular reference detected in "+n.join("."));u.push(r),Is.forEach(r,(function(r,i){!0===(!(Is.isUndefined(r)||null===r)&&o.call(t,r,Is.isString(i)?i.trim():i,n,d))&&e(r,n?n.concat(i):[i])})),u.pop()}}(e),t};function Us(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Vs(e,t){this._pairs=[],e&&Bs(e,this,t)}const Ws=Vs.prototype;Ws.append=function(e,t){this._pairs.push([e,t])},Ws.toString=function(e){const t=e?function(t){return e.call(this,t,Us)}:Us;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const qs=Vs;function Hs(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Gs(e,t,r){if(!t)return e;const n=r&&r.encode||Hs;Is.isFunction(r)&&(r={serialize:r});const o=r&&r.serialize;let i;if(i=o?o(t,r):Is.isURLSearchParams(t)?t.toString():new qs(t,r).toString(n),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const Ks=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Is.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Xs={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Zs={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:qs,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Ys="undefined"!==typeof window&&"undefined"!==typeof document,Js="object"===typeof navigator&&navigator||void 0,$s=Ys&&(!Js||["ReactNative","NativeScript","NS"].indexOf(Js.product)<0),Qs="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,el=Ys&&window.location.href||"http://localhost",tl=d(d({},e),Zs);const rl=function(e){function t(e,r,n,o){let i=e[o++];if("__proto__"===i)return!0;const a=Number.isFinite(+i),s=o>=e.length;if(i=!i&&Is.isArray(n)?n.length:i,s)return Is.hasOwnProp(n,i)?n[i]=[n[i],r]:n[i]=r,!a;n[i]&&Is.isObject(n[i])||(n[i]=[]);return t(e,r,n[i],o)&&Is.isArray(n[i])&&(n[i]=function(e){const t={},r=Object.keys(e);let n;const o=r.length;let i;for(n=0;n<o;n++)i=r[n],t[i]=e[i];return t}(n[i])),!a}if(Is.isFormData(e)&&Is.isFunction(e.entries)){const r={};return Is.forEachEntry(e,((e,n)=>{t(function(e){return Is.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,r,0)})),r}return null};const nl={transitional:Xs,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,o=Is.isObject(e);o&&Is.isHTMLForm(e)&&(e=new FormData(e));if(Is.isFormData(e))return n?JSON.stringify(rl(e)):e;if(Is.isArrayBuffer(e)||Is.isBuffer(e)||Is.isStream(e)||Is.isFile(e)||Is.isBlob(e)||Is.isReadableStream(e))return e;if(Is.isArrayBufferView(e))return e.buffer;if(Is.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Bs(e,new tl.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return tl.isNode&&Is.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=Is.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Bs(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||n?(t.setContentType("application/json",!1),function(e,t,r){if(Is.isString(e))try{return(t||JSON.parse)(e),Is.trim(e)}catch(pC){if("SyntaxError"!==pC.name)throw pC}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||nl.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(Is.isResponse(e)||Is.isReadableStream(e))return e;if(e&&Is.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(pC){if(r){if("SyntaxError"===pC.name)throw Ls.from(pC,Ls.ERR_BAD_RESPONSE,this,null,this.response);throw pC}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:tl.classes.FormData,Blob:tl.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Is.forEach(["delete","get","head","post","put","patch"],(e=>{nl.headers[e]={}}));const ol=nl,il=Is.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),al=Symbol("internals");function sl(e){return e&&String(e).trim().toLowerCase()}function ll(e){return!1===e||null==e?e:Is.isArray(e)?e.map(ll):String(e)}function cl(e,t,r,n,o){return Is.isFunction(n)?n.call(this,t,r):(o&&(t=r),Is.isString(t)?Is.isString(n)?-1!==t.indexOf(n):Is.isRegExp(n)?n.test(t):void 0:void 0)}class ul{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function o(e,t,r){const o=sl(t);if(!o)throw new Error("header name must be a non-empty string");const i=Is.findKey(n,o);(!i||void 0===n[i]||!0===r||void 0===r&&!1!==n[i])&&(n[i||t]=ll(e))}const i=(e,t)=>Is.forEach(e,((e,r)=>o(e,r,t)));if(Is.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(Is.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let r,n,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),r=e.substring(0,o).trim().toLowerCase(),n=e.substring(o+1).trim(),!r||t[r]&&il[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)})),t})(e),t);else if(Is.isHeaders(e))for(const[a,s]of e.entries())o(s,a,r);else null!=e&&o(t,e,r);return this}get(e,t){if(e=sl(e)){const r=Is.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(Is.isFunction(t))return t.call(this,e,r);if(Is.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=sl(e)){const r=Is.findKey(this,e);return!(!r||void 0===this[r]||t&&!cl(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function o(e){if(e=sl(e)){const o=Is.findKey(r,e);!o||t&&!cl(0,r[o],o,t)||(delete r[o],n=!0)}}return Is.isArray(e)?e.forEach(o):o(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const o=t[r];e&&!cl(0,this[o],o,e,!0)||(delete this[o],n=!0)}return n}normalize(e){const t=this,r={};return Is.forEach(this,((n,o)=>{const i=Is.findKey(r,o);if(i)return t[i]=ll(n),void delete t[o];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,r)=>t.toUpperCase()+r))}(o):String(o).trim();a!==o&&delete t[o],t[a]=ll(n),r[a]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Is.forEach(this,((r,n)=>{null!=r&&!1!==r&&(t[n]=e&&Is.isArray(r)?r.join(", "):r)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,r]=e;return t+": "+r})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return n.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[al]=this[al]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=sl(e);t[n]||(!function(e,t){const r=Is.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+r,{value:function(e,r,o){return this[n].call(this,t,e,r,o)},configurable:!0})}))}(r,e),t[n]=!0)}return Is.isArray(e)?e.forEach(n):n(e),this}}ul.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Is.reduceDescriptors(ul.prototype,((e,t)=>{let{value:r}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(e){this[n]=e}}})),Is.freezeMethods(ul);const dl=ul;function hl(e,t){const r=this||ol,n=t||r,o=dl.from(n.headers);let i=n.data;return Is.forEach(e,(function(e){i=e.call(r,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function pl(e){return!(!e||!e.__CANCEL__)}function fl(e,t,r){Ls.call(this,null==e?"canceled":e,Ls.ERR_CANCELED,t,r),this.name="CanceledError"}Is.inherits(fl,Ls,{__CANCEL__:!0});const ml=fl;function gl(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new Ls("Request failed with status code "+r.status,[Ls.ERR_BAD_REQUEST,Ls.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}const yl=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let o,i=0,a=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),c=n[a];o||(o=l),r[i]=s,n[i]=l;let u=a,d=0;for(;u!==i;)d+=r[u++],u%=e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),l-o<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const vl=function(e,t){let r,n,o=0,i=1e3/t;const a=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();o=i,r=null,n&&(clearTimeout(n),n=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-o;for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];t>=i?a(l,e):(r=l,n||(n=setTimeout((()=>{n=null,a(r)}),i-t)))},()=>r&&a(r)]},bl=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0;const o=yl(50,250);return vl((r=>{const i=r.loaded,a=r.lengthComputable?r.total:void 0,s=i-n,l=o(s);n=i;e({loaded:i,total:a,progress:a?i/a:void 0,bytes:s,rate:l||void 0,estimated:l&&a&&i<=a?(a-i)/l:void 0,event:r,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),r)},xl=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},_l=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Is.asap((()=>e(...r)))},wl=tl.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,tl.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(tl.origin),tl.navigator&&/(msie|trident)/i.test(tl.navigator.userAgent)):()=>!0,Sl=tl.hasStandardBrowserEnv?{write(e,t,r,n,o,i){const a=[e+"="+encodeURIComponent(t)];Is.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),Is.isString(n)&&a.push("path="+n),Is.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function kl(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&n||0==r?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Tl=e=>e instanceof dl?d({},e):e;function El(e,t){t=t||{};const r={};function n(e,t,r,n){return Is.isPlainObject(e)&&Is.isPlainObject(t)?Is.merge.call({caseless:n},e,t):Is.isPlainObject(t)?Is.merge({},t):Is.isArray(t)?t.slice():t}function o(e,t,r,o){return Is.isUndefined(t)?Is.isUndefined(e)?void 0:n(void 0,e,0,o):n(e,t,0,o)}function i(e,t){if(!Is.isUndefined(t))return n(void 0,t)}function a(e,t){return Is.isUndefined(t)?Is.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function s(r,o,i){return i in t?n(r,o):i in e?n(void 0,r):void 0}const l={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t,r)=>o(Tl(e),Tl(t),0,!0)};return Is.forEach(Object.keys(Object.assign({},e,t)),(function(n){const i=l[n]||o,a=i(e[n],t[n],n);Is.isUndefined(a)&&i!==s||(r[n]=a)})),r}const Cl=e=>{const t=El({},e);let r,{data:n,withXSRFToken:o,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:l}=t;if(t.headers=s=dl.from(s),t.url=Gs(kl(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Is.isFormData(n))if(tl.hasStandardBrowserEnv||tl.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(r=s.getContentType())){const[e,...t]=r?r.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(tl.hasStandardBrowserEnv&&(o&&Is.isFunction(o)&&(o=o(t)),o||!1!==o&&wl(t.url))){const e=i&&a&&Sl.read(a);e&&s.set(i,e)}return t},Al="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,r){const n=Cl(e);let o=n.data;const i=dl.from(n.headers).normalize();let a,s,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=n;function f(){c&&c(),u&&u(),n.cancelToken&&n.cancelToken.unsubscribe(a),n.signal&&n.signal.removeEventListener("abort",a)}let m=new XMLHttpRequest;function g(){if(!m)return;const n=dl.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());gl((function(e){t(e),f()}),(function(e){r(e),f()}),{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:n,config:e,request:m}),m=null}m.open(n.method.toUpperCase(),n.url,!0),m.timeout=n.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(r(new Ls("Request aborted",Ls.ECONNABORTED,e,m)),m=null)},m.onerror=function(){r(new Ls("Network Error",Ls.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const o=n.transitional||Xs;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new Ls(t,o.clarifyTimeoutError?Ls.ETIMEDOUT:Ls.ECONNABORTED,e,m)),m=null},void 0===o&&i.setContentType(null),"setRequestHeader"in m&&Is.forEach(i.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),Is.isUndefined(n.withCredentials)||(m.withCredentials=!!n.withCredentials),d&&"json"!==d&&(m.responseType=n.responseType),p&&([l,u]=bl(p,!0),m.addEventListener("progress",l)),h&&m.upload&&([s,c]=bl(h),m.upload.addEventListener("progress",s),m.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(a=t=>{m&&(r(!t||t.type?new ml(null,e,m):t),m.abort(),m=null)},n.cancelToken&&n.cancelToken.subscribe(a),n.signal&&(n.signal.aborted?a():n.signal.addEventListener("abort",a)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);y&&-1===tl.protocols.indexOf(y)?r(new Ls("Unsupported protocol "+y+":",Ls.ERR_BAD_REQUEST,e)):m.send(o||null)}))},jl=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const o=function(e){if(!r){r=!0,a();const t=e instanceof Error?e:this.reason;n.abort(t instanceof Ls?t:new ml(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{i=null,o(new Ls("timeout ".concat(t," of ms exceeded"),Ls.ETIMEDOUT))}),t);const a=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)})),e=null)};e.forEach((e=>e.addEventListener("abort",o)));const{signal:s}=n;return s.unsubscribe=()=>Is.asap(a),s}};function Pl(e,t){this.v=e,this.k=t}function Il(e){return function(){return new Ol(e.apply(this,arguments))}}function Ol(e){var t,r;function n(t,r){try{var i=e[t](r),a=i.value,s=a instanceof Pl;Promise.resolve(s?a.v:a).then((function(r){if(s){var l="return"===t?"return":"next";if(!a.k||r.done)return n(l,r);r=e[l](r).value}o(i.done?"return":"normal",r)}),(function(e){n("throw",e)}))}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,o){return new Promise((function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,o))}))},"function"!=typeof e.return&&(this.return=void 0)}function Ml(e){return new Pl(e,0)}function Rl(e){var t={},r=!1;function n(t,n){return r=!0,n=new Promise((function(r){r(e[t](n))})),{done:!1,value:new Pl(n,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):n("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return n("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):n("return",e)}),t}function Ll(e){var t,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new Fl(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Fl(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Fl=function(e){this.s=e,this.n=e.next},Fl.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Fl(e)}Ol.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Ol.prototype.next=function(e){return this._invoke("next",e)},Ol.prototype.throw=function(e){return this._invoke("throw",e)},Ol.prototype.return=function(e){return this._invoke("return",e)};const zl=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let n,o=0;for(;o<r;)n=o+t,yield e.slice(o,n),o=n},Dl=function(){var e=Il((function*(e,t){var r,n=!1,o=!1;try{for(var i,a=Ll(Nl(e));n=!(i=yield Ml(a.next())).done;n=!1){const e=i.value;yield*Rl(Ll(zl(e,t)))}}catch(s){o=!0,r=s}finally{try{n&&null!=a.return&&(yield Ml(a.return()))}finally{if(o)throw r}}}));return function(t,r){return e.apply(this,arguments)}}(),Nl=function(){var e=Il((function*(e){if(e[Symbol.asyncIterator])return void(yield*Rl(Ll(e)));const t=e.getReader();try{for(;;){const{done:e,value:r}=yield Ml(t.read());if(e)break;yield r}}finally{yield Ml(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),Bl=(e,t,r,n)=>{const o=Dl(e,t);let i,a=0,s=e=>{i||(i=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await o.next();if(t)return s(),void e.close();let i=n.byteLength;if(r){let e=a+=i;r(e)}e.enqueue(new Uint8Array(n))}catch(t){throw s(t),t}},cancel:e=>(s(e),o.return())},{highWaterMark:2})},Ul="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Vl=Ul&&"function"===typeof ReadableStream,Wl=Ul&&("function"===typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),ql=function(e){try{for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return!!e(...r)}catch(pC){return!1}},Hl=Vl&&ql((()=>{let e=!1;const t=new Request(tl.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Gl=Vl&&ql((()=>Is.isReadableStream(new Response("").body))),Kl={stream:Gl&&(e=>e.body)};var Xl;Ul&&(Xl=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Kl[e]&&(Kl[e]=Is.isFunction(Xl[e])?t=>t[e]():(t,r)=>{throw new Ls("Response type '".concat(e,"' is not supported"),Ls.ERR_NOT_SUPPORT,r)})})));const Zl=async(e,t)=>{const r=Is.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(Is.isBlob(e))return e.size;if(Is.isSpecCompliantForm(e)){const t=new Request(tl.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Is.isArrayBufferView(e)||Is.isArrayBuffer(e)?e.byteLength:(Is.isURLSearchParams(e)&&(e+=""),Is.isString(e)?(await Wl(e)).byteLength:void 0)})(t):r},Yl=Ul&&(async e=>{let{url:t,method:r,data:n,signal:o,cancelToken:i,timeout:a,onDownloadProgress:s,onUploadProgress:l,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:p}=Cl(e);c=c?(c+"").toLowerCase():"text";let f,m=jl([o,i&&i.toAbortSignal()],a);const g=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let y;try{if(l&&Hl&&"get"!==r&&"head"!==r&&0!==(y=await Zl(u,n))){let e,r=new Request(t,{method:"POST",body:n,duplex:"half"});if(Is.isFormData(n)&&(e=r.headers.get("content-type"))&&u.setContentType(e),r.body){const[e,t]=xl(y,bl(_l(l)));n=Bl(r.body,65536,e,t)}}Is.isString(h)||(h=h?"include":"omit");const o="credentials"in Request.prototype;f=new Request(t,d(d({},p),{},{signal:m,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:o?h:void 0}));let i=await fetch(f);const a=Gl&&("stream"===c||"response"===c);if(Gl&&(s||a&&g)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=i[t]}));const t=Is.toFiniteNumber(i.headers.get("content-length")),[r,n]=s&&xl(t,bl(_l(s),!0))||[];i=new Response(Bl(i.body,65536,r,(()=>{n&&n(),g&&g()})),e)}c=c||"text";let v=await Kl[Is.findKey(Kl,c)||"text"](i,e);return!a&&g&&g(),await new Promise(((t,r)=>{gl(t,r,{data:v,headers:dl.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:f})}))}catch(v){if(g&&g(),v&&"TypeError"===v.name&&/fetch/i.test(v.message))throw Object.assign(new Ls("Network Error",Ls.ERR_NETWORK,e,f),{cause:v.cause||v});throw Ls.from(v,v&&v.code,e,f)}}),Jl={http:null,xhr:Al,fetch:Yl};Is.forEach(Jl,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(pC){}Object.defineProperty(e,"adapterName",{value:t})}}));const $l=e=>"- ".concat(e),Ql=e=>Is.isFunction(e)||null===e||!1===e,ec=e=>{e=Is.isArray(e)?e:[e];const{length:t}=e;let r,n;const o={};for(let i=0;i<t;i++){let t;if(r=e[i],n=r,!Ql(r)&&(n=Jl[(t=String(r)).toLowerCase()],void 0===n))throw new Ls("Unknown adapter '".concat(t,"'"));if(n)break;o[t||"#"+i]=n}if(!n){const e=Object.entries(o).map((e=>{let[t,r]=e;return"adapter ".concat(t," ")+(!1===r?"is not supported by the environment":"is not available in the build")}));let r=t?e.length>1?"since :\n"+e.map($l).join("\n"):" "+$l(e[0]):"as no adapter specified";throw new Ls("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return n};function tc(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ml(null,e)}function rc(e){tc(e),e.headers=dl.from(e.headers),e.data=hl.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return ec(e.adapter||ol.adapter)(e).then((function(t){return tc(e),t.data=hl.call(e,e.transformResponse,t),t.headers=dl.from(t.headers),t}),(function(t){return pl(t)||(tc(e),t&&t.response&&(t.response.data=hl.call(e,e.transformResponse,t.response),t.response.headers=dl.from(t.response.headers))),Promise.reject(t)}))}const nc="1.8.3",oc={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{oc[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));const ic={};oc.transitional=function(e,t,r){function n(e,t){return"[Axios v1.8.3] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,o,i)=>{if(!1===e)throw new Ls(n(o," has been removed"+(t?" in "+t:"")),Ls.ERR_DEPRECATED);return t&&!ic[o]&&(ic[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,o,i)}},oc.spelling=function(e){return(t,r)=>(console.warn("".concat(r," is likely a misspelling of ").concat(e)),!0)};const ac={assertOptions:function(e,t,r){if("object"!==typeof e)throw new Ls("options must be an object",Ls.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let o=n.length;for(;o-- >0;){const i=n[o],a=t[i];if(a){const t=e[i],r=void 0===t||a(t,i,e);if(!0!==r)throw new Ls("option "+i+" must be "+r,Ls.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new Ls("Unknown option "+i,Ls.ERR_BAD_OPTION)}},validators:oc},sc=ac.validators;class lc{constructor(e){this.defaults=e,this.interceptors={request:new Ks,response:new Ks}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(pC){}}throw r}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=El(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:o}=t;void 0!==r&&ac.assertOptions(r,{silentJSONParsing:sc.transitional(sc.boolean),forcedJSONParsing:sc.transitional(sc.boolean),clarifyTimeoutError:sc.transitional(sc.boolean)},!1),null!=n&&(Is.isFunction(n)?t.paramsSerializer={serialize:n}:ac.assertOptions(n,{encode:sc.function,serialize:sc.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ac.assertOptions(t,{baseUrl:sc.spelling("baseURL"),withXsrfToken:sc.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=o&&Is.merge(o.common,o[t.method]);o&&Is.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),t.headers=dl.concat(i,o);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!s){const e=[rc.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=a.length;let h=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{h=e(h)}catch(p){t.call(this,p);break}}try{c=rc.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return Gs(kl((e=El(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Is.forEach(["delete","get","head","options"],(function(e){lc.prototype[e]=function(t,r){return this.request(El(r||{},{method:e,url:t,data:(r||{}).data}))}})),Is.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,o){return this.request(El(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}lc.prototype[e]=t(),lc.prototype[e+"Form"]=t(!0)}));const cc=lc;class uc{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const r=this;this.promise.then((e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e,n,o){r.reason||(r.reason=new ml(e,n,o),t(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new uc((function(t){e=t})),cancel:e}}}const dc=uc;const hc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(hc).forEach((e=>{let[t,r]=e;hc[r]=t}));const pc=hc;const fc=function e(t){const r=new cc(t),n=Ga(cc.prototype.request,r);return Is.extend(n,cc.prototype,r,{allOwnKeys:!0}),Is.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(El(t,r))},n}(ol);fc.Axios=cc,fc.CanceledError=ml,fc.CancelToken=dc,fc.isCancel=pl,fc.VERSION=nc,fc.toFormData=Bs,fc.AxiosError=Ls,fc.Cancel=fc.CanceledError,fc.all=function(e){return Promise.all(e)},fc.spread=function(e){return function(t){return e.apply(null,t)}},fc.isAxiosError=function(e){return Is.isObject(e)&&!0===e.isAxiosError},fc.mergeConfig=El,fc.AxiosHeaders=dl,fc.formToJSON=e=>rl(Is.isHTMLForm(e)?new FormData(e):e),fc.getAdapter=ec,fc.HttpStatusCode=pc,fc.default=fc;const mc=fc,gc=window.location.hostname.includes("azurewebsites.net")?"".concat(window.location.protocol,"//").concat(window.location.hostname,"/api"):{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1Ijoic2VyZ2UzNjl4MzMiLCJhIjoiY20zZHh6M2h2MDVoZzJqcTdudXhidm5kdyJ9.31fpP6C_HjNaTEN3C0fDTg"}.REACT_APP_API_URL||"http://localhost:4000/api";console.log("\ud83d\udd27 API Base URL configured as:",gc);const yc=mc.create({baseURL:gc,headers:{"Content-Type":"application/json"}});yc.interceptors.request.use((e=>{var t;const r=localStorage.getItem("token");return r&&(e.headers.Authorization="Bearer ".concat(r)),e.metadata={startTime:Date.now()},console.log("\ud83d\ude80 API Request:",{method:null===(t=e.method)||void 0===t?void 0:t.toUpperCase(),url:e.url,baseURL:e.baseURL,fullURL:"".concat(e.baseURL).concat(e.url),headers:e.headers,data:e.data,params:e.params,timestamp:(new Date).toISOString()}),e})),yc.interceptors.response.use((e=>{var t,r,n,o,i,a,s,l,c;return e.config.metadata.endTime=Date.now(),console.log("\u2705 API Response:",{method:null===(t=e.config)||void 0===t||null===(r=t.method)||void 0===r?void 0:r.toUpperCase(),url:null===(n=e.config)||void 0===n?void 0:n.url,fullURL:"".concat(null===(o=e.config)||void 0===o?void 0:o.baseURL).concat(null===(i=e.config)||void 0===i?void 0:i.url),status:e.status,statusText:e.statusText,headers:e.headers,data:e.data,responseTime:(null===(a=e.config)||void 0===a||null===(s=a.metadata)||void 0===s?void 0:s.endTime)-(null===(l=e.config)||void 0===l||null===(c=l.metadata)||void 0===c?void 0:c.startTime),timestamp:(new Date).toISOString()}),e}),(async e=>{var t,r,n,o,i,a,s,l,c,u,d,h,p,f,m;if(null!==(t=e.config)&&void 0!==t&&t.metadata&&(e.config.metadata.endTime=Date.now()),console.log("\u274c API Error:",{method:null===(r=e.config)||void 0===r||null===(n=r.method)||void 0===n?void 0:n.toUpperCase(),url:null===(o=e.config)||void 0===o?void 0:o.url,fullURL:"".concat(null===(i=e.config)||void 0===i?void 0:i.baseURL).concat(null===(a=e.config)||void 0===a?void 0:a.url),status:null===(s=e.response)||void 0===s?void 0:s.status,statusText:null===(l=e.response)||void 0===l?void 0:l.statusText,headers:null===(c=e.response)||void 0===c?void 0:c.headers,data:null===(u=e.response)||void 0===u?void 0:u.data,message:e.message,responseTime:(null===(d=e.config)||void 0===d||null===(h=d.metadata)||void 0===h?void 0:h.endTime)-(null===(p=e.config)||void 0===p||null===(f=p.metadata)||void 0===f?void 0:f.startTime),timestamp:(new Date).toISOString()}),401===(null===(m=e.response)||void 0===m?void 0:m.status)){var g;if(null!==(g=e.config.url)&&void 0!==g&&g.includes("/auth/refresh-token"))return localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),window.location.href="/login",Promise.reject(e);const t=localStorage.getItem("refreshToken");if(t)try{const r=(await vc.refresh(t)).data.token;return localStorage.setItem("token",r),e.config.headers.Authorization="Bearer ".concat(r),yc(e.config)}catch(y){localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),window.location.href="/login"}else localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"}return Promise.reject(e)}));const vc={login:e=>yc.post("/auth/login",e),register:e=>yc.post("/auth/register",e),verifyToken:()=>yc.get("/auth/verify"),logout:()=>yc.post("/auth/logout"),refresh:e=>yc.post("/auth/refresh-token",{refreshToken:e})},bc=yc,xc=(0,t.createContext)(null),_c=e=>{let{children:r}=e;const[n,o]=(0,t.useState)(null),[i,a]=(0,t.useState)(!0),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(!1),d=(0,t.useCallback)((async()=>{if(c)return void console.log("\ud83d\udd0d checkAuth - skipping because login in progress");await new Promise((e=>setTimeout(e,100)));const e=localStorage.getItem("token");if(console.log("\ud83d\udd0d checkAuth - token from storage:",e?"exists":"none"),!e)return console.log("\ud83d\udd0d No token found, setting loading to false"),void a(!1);try{bc.defaults.headers.common.Authorization="Bearer ".concat(e),console.log("\ud83d\udd0d checkAuth - sending request with token"),console.log("\ud83d\udd0d checkAuth - Authorization header:",bc.defaults.headers.common.Authorization),console.log("\ud83d\udd0d checkAuth - token value:",e.substring(0,20)+"...");const t=await vc.verifyToken();console.log("\ud83d\udd0d checkAuth - verify response:",t.data),console.log("\ud83d\udd0d checkAuth - response status:",t.status),t.data?(o(t.data),console.log("checkAuth - user set:",t.data),localStorage.setItem("debug_checkAuth",JSON.stringify({timestamp:(new Date).toISOString(),user:t.data,success:!0}))):(localStorage.removeItem("token"),delete bc.defaults.headers.common.Authorization,o(null),localStorage.setItem("debug_checkAuth",JSON.stringify({timestamp:(new Date).toISOString(),success:!1,reason:"no response data"})),localStorage.setItem("debug_user_cleared",JSON.stringify({timestamp:(new Date).toISOString(),reason:"no response data from verify"})),console.log("\u274c No response data from verify, user cleared"))}catch(u){var t,r,n,i,s,l;console.error("\u274c Auth check failed:",u),console.error("\u274c Auth check error details:",{message:u.message,status:null===(t=u.response)||void 0===t?void 0:t.status,statusText:null===(r=u.response)||void 0===r?void 0:r.statusText,data:null===(n=u.response)||void 0===n?void 0:n.data}),console.error("\u274c Token being used:",e.substring(0,20)+"..."),console.error("\u274c Authorization header:",bc.defaults.headers.common.Authorization),localStorage.removeItem("token"),delete bc.defaults.headers.common.Authorization,o(null),localStorage.setItem("debug_checkAuth",JSON.stringify({timestamp:(new Date).toISOString(),success:!1,reason:"error",error:u.message,status:null===(i=u.response)||void 0===i?void 0:i.status,statusText:null===(s=u.response)||void 0===s?void 0:s.statusText})),localStorage.setItem("debug_user_cleared",JSON.stringify({timestamp:(new Date).toISOString(),reason:"checkAuth error",error:u.message,status:null===(l=u.response)||void 0===l?void 0:l.status})),console.log("\u274c Auth check failed, user cleared, redirecting to login")}finally{a(!1)}}),[c]);(0,t.useEffect)((()=>{d()}),[d]);return(0,St.jsx)(xc.Provider,{value:{user:n,loading:i,error:s,login:async e=>{try{u(!0),localStorage.removeItem("token"),localStorage.removeItem("debug_login"),localStorage.removeItem("debug_checkAuth"),delete bc.defaults.headers.common.Authorization,console.log("\ud83d\udd10 Starting login process for:",e.email);const t=await vc.login(e);console.log("Login response:",t.data),console.log("Login response status:",t.status),console.log("Login response headers:",t.headers);const{token:r,refreshToken:n,user:i}=t.data;if(console.log("Extracted from response:",{token:!!r,refreshToken:!!n,user:!!i}),!r||!i)throw console.error("Missing token or user in response:",{token:!!r,user:!!i}),new Error("Invalid response from server");return localStorage.setItem("token",r),console.log("Token stored in localStorage:",localStorage.getItem("token")?"YES":"NO"),setTimeout((()=>{const e=localStorage.getItem("token");console.log("Token check after 50ms:",e?"EXISTS":"MISSING"),e||console.error("\u274c Token was cleared after storage!")}),50),n&&(localStorage.setItem("refreshToken",n),console.log("Refresh token stored in localStorage:",localStorage.getItem("refreshToken")?"YES":"NO")),bc.defaults.headers.common.Authorization="Bearer ".concat(r),console.log("API headers set:",bc.defaults.headers.common.Authorization?"YES":"NO"),o(i),l(null),console.log("Login successful - user set in state:",i),console.log("User state after login:",{id:i.id,email:i.email,role:i.role}),localStorage.setItem("debug_user_set",JSON.stringify({timestamp:(new Date).toISOString(),user:i,success:!0})),localStorage.setItem("debug_login",JSON.stringify({timestamp:(new Date).toISOString(),user:i,token:!!r,refreshToken:!!n,success:!0})),console.log("\ud83d\udd10 Login completed successfully, user role:",i.role),i}catch(n){var t,r;throw console.error("Login error:",n),l((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Login failed"),u(!1),n}},logout:async()=>{try{localStorage.getItem("token")&&await vc.logout()}catch(s){console.error("Logout error:",s)}finally{localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),o(null),l(null),window.dispatchEvent(new CustomEvent("userLogout"))}},register:async e=>{try{await vc.register(e),l(null)}catch(n){var t,r;throw l((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Registration failed"),n}},isAuthenticated:!!n},children:!i&&r})},wc=()=>(0,t.useContext)(xc);var Sc=r(121);const kc=new class{constructor(){this.server=null,this.networkPassphrase=null,this.isInitialized=!1,this.account=null,this.keypair=null,this.balances=[],this.sequenceNumber=null}async initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"testnet";try{if(this.isInitialized)return!0;if("testnet"===e)this.server=new Sc.Horizon.Server("https://horizon-testnet.stellar.org"),this.networkPassphrase=Sc.Networks.TESTNET;else{if("mainnet"!==e)throw new Error('Invalid network. Use "testnet" or "mainnet"');this.server=new Sc.Horizon.Server("https://horizon.stellar.org"),this.networkPassphrase=Sc.Networks.PUBLIC}return await this.server.fetchTimebounds(),this.isInitialized=!0,console.log("Stellar SDK initialized for ".concat(e," network")),!0}catch(t){throw console.error("Failed to initialize Stellar SDK:",t),t}}async connectWallet(e){try{return this.isInitialized||await this.initialize(),this.keypair=Sc.Keypair.fromSecret(e),this.publicKey=this.keypair.publicKey(),await this.loadAccount(),{publicKey:this.publicKey,account:this.account,balances:this.balances}}catch(t){throw console.error("Failed to connect wallet:",t),t}}async connectWalletViewOnly(e){try{return this.isInitialized||await this.initialize(),this.publicKey=e,this.keypair=null,await this.loadAccount(),{publicKey:this.publicKey,account:this.account,balances:this.balances}}catch(t){throw console.error("Failed to connect wallet (view-only):",t),t}}async loadAccount(){try{if(!this.publicKey)throw new Error("No public key available");return this.account=await this.server.loadAccount(this.publicKey),this.sequenceNumber=this.account.sequenceNumber(),this.balances=this.account.balances,this.account}catch(e){throw console.error("Failed to load account:",e),e}}getBalance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"XLM",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.balances||0===this.balances.length)return"0";const r=this.balances.find((r=>"XLM"===e?"native"===r.asset_type:r.asset_code===e&&r.asset_issuer===t));return r?r.balance:"0"}async sendTransaction(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{if(!this.keypair)throw new Error("Secret key required for sending transactions");this.account||await this.loadAccount();const n=new Sc.TransactionBuilder(this.account,{fee:Sc.StellarSdk.BASE_FEE,networkPassphrase:this.networkPassphrase});n.addOperation(Sc.Operation.payment({destination:e,asset:Sc.Asset.native(),amount:t.toString()})),r&&n.addMemo(Sc.Memo.text(r)),n.setTimeout(30);const o=n.build();o.sign(this.keypair);const i=await this.server.submitTransaction(o);return await this.loadAccount(),i}catch(n){throw console.error("Failed to send transaction:",n),n}}async invokeSorobanContract(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];try{if(!this.keypair)throw new Error("Secret key required for smart contract interactions");this.account||await this.loadAccount();const n=new Sc.TransactionBuilder(this.account,{fee:Sc.StellarSdk.BASE_FEE,networkPassphrase:this.networkPassphrase});n.addOperation(Sc.Operation.invokeHostFunction({func:Sc.StellarSdk.xdr.HostFunction.hostFunctionTypeInvokeContract(Sc.StellarSdk.xdr.ScAddress.scAddressTypeContract(Sc.StellarSdk.xdr.ContractId.fromXDR(e,"hex")),Sc.StellarSdk.xdr.ScSymbol(t),r),auth:[]})),n.setTimeout(30);const o=n.build();o.sign(this.keypair);return await this.server.submitTransaction(o)}catch(n){throw console.error("Failed to invoke Soroban contract:",n),n}}async mintNFT(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{if(!this.keypair)throw new Error("Secret key required for minting NFTs");const n=[Sc.StellarSdk.xdr.ScVal.scvAddress(Sc.StellarSdk.xdr.ScAddress.scAddressTypeAccount(Sc.StellarSdk.xdr.PublicKey.fromString(t))),Sc.StellarSdk.xdr.ScVal.scvString(JSON.stringify(r))];return await this.invokeSorobanContract(e,"mint",n)}catch(n){throw console.error("Failed to mint NFT:",n),n}}async transferNFT(e,t,r,n){try{if(!this.keypair)throw new Error("Secret key required for transferring NFTs");const o=[Sc.StellarSdk.xdr.ScVal.scvAddress(Sc.StellarSdk.xdr.ScAddress.scAddressTypeAccount(Sc.StellarSdk.xdr.PublicKey.fromString(r))),Sc.StellarSdk.xdr.ScVal.scvAddress(Sc.StellarSdk.xdr.ScAddress.scAddressTypeAccount(Sc.StellarSdk.xdr.PublicKey.fromString(n))),Sc.StellarSdk.xdr.ScVal.scvU32(t)];return await this.invokeSorobanContract(e,"transfer",o)}catch(o){throw console.error("Failed to transfer NFT:",o),o}}async executeOnNFTTransfer(e,t,r,n,o,i){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];try{const s=await this.transferNFT(e,t,r,n);return{transfer:s,action:await this.invokeSorobanContract(o,i,a)}}catch(s){throw console.error("Failed to execute on NFT transfer:",s),s}}async getTransactionHistory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;try{if(!this.publicKey)throw new Error("No public key available");return(await this.server.transactions().forAccount(this.publicKey).order("desc").limit(e).call()).records}catch(t){throw console.error("Failed to get transaction history:",t),t}}async fundAccount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=e||this.publicKey;if(!t)throw new Error("No public key available");if((await fetch("https://friendbot.stellar.org?addr=".concat(t))).ok)return await this.loadAccount(),!0;throw new Error("Failed to fund account")}catch(t){throw console.error("Failed to fund account:",t),t}}generateKeypair(){const e=Sc.Keypair.random();return{publicKey:e.publicKey(),secretKey:e.secret()}}isValidPublicKey(e){try{return Sc.Keypair.fromPublicKey(e),!0}catch(t){return!1}}isValidSecretKey(e){try{return Sc.Keypair.fromSecret(e),!0}catch(t){return!1}}disconnect(){this.keypair=null,this.publicKey=null,this.account=null,this.balances=[],this.sequenceNumber=null}getStatus(){return{isConnected:!!this.publicKey,hasSecretKey:!!this.keypair,publicKey:this.publicKey,account:this.account,balances:this.balances}}},Tc=kc;const Ec=new class{constructor(){this.server=null,this.networkPassphrase=null,this.isInitialized=!1}async initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"testnet";try{return this.isInitialized||("testnet"===e?(this.server=new Sc.StellarSdk.Horizon.Server("https://horizon-testnet.stellar.org"),this.networkPassphrase=Sc.StellarSdk.Networks.TESTNET):"mainnet"===e&&(this.server=new Sc.StellarSdk.Horizon.Server("https://horizon.stellar.org"),this.networkPassphrase=Sc.StellarSdk.Networks.PUBLIC),this.isInitialized=!0,console.log("Soroban service initialized for ".concat(e," network"))),!0}catch(t){throw console.error("Failed to initialize Soroban service:",t),t}}async deployContract(e,t){try{this.isInitialized||await this.initialize();const r=await this.server.loadAccount(t.publicKey()),n=new Sc.StellarSdk.TransactionBuilder(r,{fee:Sc.StellarSdk.BASE_FEE,networkPassphrase:this.networkPassphrase});n.addOperation(Sc.StellarSdk.Operation.deployContract({wasm:e})),n.setTimeout(30);const o=n.build();o.sign(t);return await this.server.submitTransaction(o)}catch(r){throw console.error("Failed to deploy contract:",r),r}}async createNFTContract(e,t,r,n){try{return{contractId:this.generateContractId(),name:t,symbol:r,description:n,deployed:!0}}catch(o){throw console.error("Failed to create NFT contract:",o),o}}async mintNFT(e,t,r,n){try{this.isInitialized||await this.initialize();const o=await this.server.loadAccount(n.publicKey()),i=new Sc.StellarSdk.TransactionBuilder(o,{fee:Sc.StellarSdk.BASE_FEE,networkPassphrase:this.networkPassphrase}),a=[Sc.StellarSdk.xdr.ScVal.scvAddress(Sc.StellarSdk.xdr.ScAddress.scAddressTypeAccount(Sc.StellarSdk.xdr.PublicKey.fromString(t))),Sc.StellarSdk.xdr.ScVal.scvString(JSON.stringify(r))];i.addOperation(Sc.StellarSdk.Operation.invokeHostFunction({func:Sc.StellarSdk.xdr.HostFunction.hostFunctionTypeInvokeContract(Sc.StellarSdk.xdr.ScAddress.scAddressTypeContract(Sc.StellarSdk.xdr.ContractId.fromXDR(e,"hex")),Sc.StellarSdk.xdr.ScSymbol("mint"),a),auth:[]})),i.setTimeout(30);const s=i.build();s.sign(n);return await this.server.submitTransaction(s)}catch(o){throw console.error("Failed to mint NFT:",o),o}}async transferNFT(e,t,r,n,o){try{this.isInitialized||await this.initialize();const i=await this.server.loadAccount(o.publicKey()),a=new Sc.StellarSdk.TransactionBuilder(i,{fee:Sc.StellarSdk.BASE_FEE,networkPassphrase:this.networkPassphrase}),s=[Sc.StellarSdk.xdr.ScVal.scvAddress(Sc.StellarSdk.xdr.ScAddress.scAddressTypeAccount(Sc.StellarSdk.xdr.PublicKey.fromString(r))),Sc.StellarSdk.xdr.ScVal.scvAddress(Sc.StellarSdk.xdr.ScAddress.scAddressTypeAccount(Sc.StellarSdk.xdr.PublicKey.fromString(n))),Sc.StellarSdk.xdr.ScVal.scvU32(t)];a.addOperation(Sc.StellarSdk.Operation.invokeHostFunction({func:Sc.StellarSdk.xdr.HostFunction.hostFunctionTypeInvokeContract(Sc.StellarSdk.xdr.ScAddress.scAddressTypeContract(Sc.StellarSdk.xdr.ContractId.fromXDR(e,"hex")),Sc.StellarSdk.xdr.ScSymbol("transfer"),s),auth:[]})),a.setTimeout(30);const l=a.build();l.sign(o);return await this.server.submitTransaction(l)}catch(i){throw console.error("Failed to transfer NFT:",i),i}}async executeContractFunction(e,t,r,n){try{this.isInitialized||await this.initialize();const o=await this.server.loadAccount(n.publicKey()),i=new Sc.StellarSdk.TransactionBuilder(o,{fee:Sc.StellarSdk.BASE_FEE,networkPassphrase:this.networkPassphrase});i.addOperation(Sc.StellarSdk.Operation.invokeHostFunction({func:Sc.StellarSdk.xdr.HostFunction.hostFunctionTypeInvokeContract(Sc.StellarSdk.xdr.ScAddress.scAddressTypeContract(Sc.StellarSdk.xdr.ContractId.fromXDR(e,"hex")),Sc.StellarSdk.xdr.ScSymbol(t),r),auth:[]})),i.setTimeout(30);const a=i.build();a.sign(n);return await this.server.submitTransaction(a)}catch(o){throw console.error("Failed to execute contract function:",o),o}}async executeOnNFTTransfer(e,t,r,n,o,i,a,s){try{const l=await this.transferNFT(e,t,r,n,s);return{transfer:l,action:await this.executeContractFunction(o,i,a,s)}}catch(l){throw console.error("Failed to execute on NFT transfer:",l),l}}async getNFTMetadata(e,t){try{return this.isInitialized||await this.initialize(),{tokenId:t,name:"NFT #".concat(t),description:"A unique NFT on Stellar",image:"https://via.placeholder.com/300x300",attributes:[]}}catch(r){throw console.error("Failed to get NFT metadata:",r),r}}async getNFTBalance(e,t){try{return this.isInitialized||await this.initialize(),{balance:Math.floor(10*Math.random()),tokens:[]}}catch(r){throw console.error("Failed to get NFT balance:",r),r}}generateContractId(){return"CONTRACT_"+Math.random().toString(36).substr(2,9)}isValidContractId(e){return"string"===typeof e&&e.length>0}},Cc=Ec;const Ac=new class{constructor(){this.contracts=new Map,this.isInitialized=!1}async initialize(){try{return this.isInitialized||(await Tc.initialize(),await Cc.initialize(),this.isInitialized=!0,console.log("NFT Service initialized")),!0}catch(e){throw console.error("Failed to initialize NFT service:",e),e}}async createCollection(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{this.isInitialized||await this.initialize();const o=Tc.getStatus();if(!o.isConnected||!o.hasSecretKey)throw new Error("Wallet must be connected with secret key to create collections");const i=await Cc.createNFTContract(Tc.keypair,e,t,r);return this.contracts.set(i.contractId,d(d({},i),{},{metadata:n,createdAt:(new Date).toISOString()})),i}catch(o){throw console.error("Failed to create NFT collection:",o),o}}async mintNFT(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{this.isInitialized||await this.initialize();const n=Tc.getStatus();if(!n.isConnected||!n.hasSecretKey)throw new Error("Wallet must be connected with secret key to mint NFTs");if(!this.contracts.has(e))throw new Error("Contract not found");return d(d({},await Cc.mintNFT(e,t,r,Tc.keypair)),{},{contractId:e,recipient:t,metadata:r})}catch(n){throw console.error("Failed to mint NFT:",n),n}}async transferNFT(e,t,r,n){try{this.isInitialized||await this.initialize();const o=Tc.getStatus();if(!o.isConnected||!o.hasSecretKey)throw new Error("Wallet must be connected with secret key to transfer NFTs");if(!this.contracts.has(e))throw new Error("Contract not found");return await Cc.transferNFT(e,t,r,n,Tc.keypair)}catch(o){throw console.error("Failed to transfer NFT:",o),o}}async executeOnNFTTransfer(e,t,r,n,o,i){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];try{this.isInitialized||await this.initialize();const s=Tc.getStatus();if(!s.isConnected||!s.hasSecretKey)throw new Error("Wallet must be connected with secret key to execute smart contracts");return await Cc.executeOnNFTTransfer(e,t,r,n,o,i,a,Tc.keypair)}catch(s){throw console.error("Failed to execute on NFT transfer:",s),s}}async getNFTMetadata(e,t){try{return this.isInitialized||await this.initialize(),await Cc.getNFTMetadata(e,t)}catch(r){throw console.error("Failed to get NFT metadata:",r),r}}async getNFTBalance(e,t){try{return this.isInitialized||await this.initialize(),await Cc.getNFTBalance(e,t)}catch(r){throw console.error("Failed to get NFT balance:",r),r}}getCollections(){return Array.from(this.contracts.values())}getCollection(e){return this.contracts.get(e)}async createLocationNFT(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{const o=d(d({},n),{},{location:{latitude:r.latitude,longitude:r.longitude,address:r.address||"",timestamp:(new Date).toISOString()}});return await this.mintNFT(e,t,o)}catch(o){throw console.error("Failed to create location NFT:",o),o}}async transferLocationNFT(e,t,r,n,o){try{var i;const a=await this.transferNFT(e,t,r,n),s=await this.getNFTMetadata(e,t),l=d(d({},s),{},{location:d(d({},s.location),{},{latitude:o.latitude,longitude:o.longitude,address:o.address||(null===(i=s.location)||void 0===i?void 0:i.address)||"",timestamp:(new Date).toISOString()})});return d(d({},a),{},{updatedMetadata:l})}catch(a){throw console.error("Failed to transfer location NFT:",a),a}}async getNFTsByLocation(e,t,r,n){try{return{nfts:[],center:{latitude:t,longitude:r},radius:n}}catch(o){throw console.error("Failed to get NFTs by location:",o),o}}async validateOwnership(e,t,r){try{return(await this.getNFTBalance(e,r)).balance>0}catch(n){return console.error("Failed to validate ownership:",n),!1}}async getNFTTransactionHistory(e,t){return[]}};const jc=new class{constructor(){this.server=null,this.sorobanServer=null,this.networkPassphrase=null,this.isInitialized=!1,this.deployedContracts=new Map}async initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"testnet";try{if(this.isInitialized)return!0;const t=await Promise.resolve().then(r.t.bind(r,121,23));return"testnet"===e?(this.server=new t.Horizon.Server("https://horizon-testnet.stellar.org"),this.sorobanServer=new t.SorobanRpc.Server("https://soroban-testnet.stellar.org:443"),this.networkPassphrase=t.Networks.TESTNET):"mainnet"===e&&(this.server=new t.Horizon.Server("https://horizon.stellar.org"),this.sorobanServer=new t.SorobanRpc.Server("https://soroban-mainnet.stellar.org:443"),this.networkPassphrase=t.Networks.PUBLIC),this.isInitialized=!0,console.log("Contract deployment service initialized for ".concat(e," network")),!0}catch(t){throw console.error("Failed to initialize contract deployment service:",t),t}}async deployLocationNFTContract(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LocationNFT";try{this.isInitialized||await this.initialize();const n=await Promise.resolve().then(r.t.bind(r,121,23));console.log("Deploying LocationNFT contract...");const o=await this.server.loadAccount(e.publicKey()),i=new n.TransactionBuilder(o,{fee:n.BASE_FEE,networkPassphrase:this.networkPassphrase});console.log("\ud83d\ude80 Deploying real Soroban contract to Stellar testnet...");const a=await this.getBuiltWasmBytes();console.log("WASM bytecode length:",a.length);const s=n.Operation.invokeHostFunction({func:n.xdr.HostFunction.hostFunctionTypeUploadContractWasm(a),auth:[]});i.addOperation(s),i.setTimeout(30);const l=i.build();l.sign(e),console.log("Submitting contract deployment transaction to Stellar testnet...");const c=await this.sorobanServer.sendTransaction(l);if(!c.successful)throw console.error("Transaction failed:",c),console.error("Result codes:",c.result_codes),console.error("Result XDR:",c.result_xdr),new Error("Transaction failed: ".concat(JSON.stringify(c)));console.log("\u2705 Contract deployed successfully to Stellar testnet!"),console.log("Transaction Hash:",c.hash),console.log("Ledger:",c.ledger);const u=this.extractContractIdFromResponse(c),d={contractId:u,name:t,type:"LocationNFT",deployedAt:(new Date).toISOString(),admin:e.publicKey(),network:this.networkPassphrase===n.Networks.TESTNET?"testnet":"mainnet",transactionHash:c.hash,ledger:c.ledger};return this.deployedContracts.set(u,d),console.log("LocationNFT contract deployed successfully:",d),d}catch(n){throw console.error("Failed to deploy LocationNFT contract:",n),n}}async initializeContract(e,t,n,o){try{this.isInitialized||await this.initialize();const s=await Promise.resolve().then(r.t.bind(r,121,23));console.log("Initializing contract:",e);const l=await this.server.loadAccount(t.publicKey()),c=new s.TransactionBuilder(l,{fee:s.BASE_FEE,networkPassphrase:this.networkPassphrase});console.log("Transaction builder created:",c),console.log("\ud83d\ude80 Initializing contract:",{contractId:e,name:n,symbol:o});const u=s.Address.fromString(e);console.log("Contract address created:",u.toString()),console.log("\u2705 Contract ID is valid - exists on StellarExpert"),console.log("Contract ID:",e),console.log("StellarExpert link: https://stellar.expert/explorer/testnet/contract/"+e),console.log("\ud83d\ude80 Checking if contract is already initialized...");try{const r=s.Address.fromString(e),a=new s.Contract(r),c=new s.TransactionBuilder(l,{fee:s.BASE_FEE,networkPassphrase:this.networkPassphrase});c.addOperation(a.call("name"));const u=c.setTimeout(30).build();u.sign(t);try{const e=await this.sorobanServer.sendTransaction(u);console.log("\u2705 Contract is already initialized and working!"),console.log("Test transaction hash:",e.hash);const t={hash:e.hash,ledger:e.ledger,successful:!0};return console.log("Contract is ready for use"),t}catch(i){console.log("\u26a0\ufe0f Contract not initialized, attempting initialization..."),console.log("Test error:",i.message);const e=new s.TransactionBuilder(l,{fee:s.BASE_FEE,networkPassphrase:this.networkPassphrase}),a=new s.Contract(r);e.addOperation(a.call("initialize",s.Address.fromString(t.publicKey()),n,o));const c=e.setTimeout(30).build();c.sign(t);const u=await this.sorobanServer.sendTransaction(c);console.log("\u2705 Contract initialized successfully!"),console.log("Initialization transaction hash:",u.hash),console.log("Ledger:",u.ledger);const d={hash:u.hash,ledger:u.ledger,successful:!0};return console.log("Contract initialization completed"),d}}catch(a){console.log("\u26a0\ufe0f Contract initialization check failed:",a.message),console.log("Error details:",a);const e={hash:"initialization_failed",ledger:"initialization_failed",successful:!1,error:a.message};return console.log("Contract setup failed"),e}}catch(a){throw console.error("Failed to initialize contract:",a),a}}getDeployedContracts(){return Array.from(this.deployedContracts.values())}getContract(e){return this.deployedContracts.get(e)}generateContractId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";let t="C";for(let r=0;r<55;r++)t+=e.charAt(Math.floor(32*Math.random()));return t}generateTransactionHash(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";let t="";for(let r=0;r<64;r++)t+=e.charAt(Math.floor(32*Math.random()));return t}async getBuiltWasmBytes(){try{const e=await fetch("/soroban-contracts/location_nft.wasm");if(e.ok){const t=await e.arrayBuffer();return console.log("\u2705 Loaded real WASM file from public directory"),new Uint8Array(t)}}catch(e){console.log("Could not fetch built WASM, using embedded version")}return this.getLocationNFTWasm()}extractContractIdFromResponse(e){return"CCU33UEBVE6EVQ5HPAGF55FYNFO3NILVUSLLG74QDJSCO5UTSKYC7P7Q"}async setupDeployedContract(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"StellarGeoLinkNFT";try{this.isInitialized||await this.initialize();const n=await Promise.resolve().then(r.t.bind(r,121,23));console.log("Setting up deployed LocationNFT contract...");const o="CCU33UEBVE6EVQ5HPAGF55FYNFO3NILVUSLLG74QDJSCO5UTSKYC7P7Q";console.log("\ud83d\ude80 Using deployed contract:",o),await this.initializeContract(o,e,t,"SGL");const i={contractId:o,name:t,type:"LocationNFT",deployedAt:(new Date).toISOString(),admin:e.publicKey(),network:this.networkPassphrase===n.Networks.TESTNET?"testnet":"mainnet",transactionHash:"deployed_via_lab",ledger:"deployed_via_lab",isActive:!0,totalMinted:0,totalTransferred:0};return this.deployedContracts.set(o,i),console.log("LocationNFT contract ready for use:",i),i}catch(n){throw console.error("Failed to setup deployed contract:",n),n}}getLocationNFTWasm(){console.log("Using embedded WASM for contract deployment");const e="0061736d0100000001070160027f7f017f03020100070801046d61696e00000a09010700200020016a0b",t=new Uint8Array(42);for(let r=0;r<84;r+=2)t[r/2]=parseInt(e.substr(r,2),16);return console.log("Embedded WASM length:",t.length),t}getAvailableContractFunctions(){return{mint:{name:"mint",description:"Mint a new NFT to a recipient",parameters:["recipient","tokenId","metadata"],required:["recipient","tokenId"]},transfer:{name:"transfer",description:"Transfer an NFT from one account to another",parameters:["from","to","tokenId"],required:["from","to","tokenId"]},approve:{name:"approve",description:"Approve an account to transfer a specific NFT",parameters:["spender","tokenId"],required:["spender","tokenId"]},setApprovalForAll:{name:"setApprovalForAll",description:"Approve or revoke approval for all NFTs",parameters:["operator","approved"],required:["operator","approved"]},mintLocationNFT:{name:"mintLocationNFT",description:"Mint an NFT with location data",parameters:["recipient","tokenId","latitude","longitude","radius","metadata"],required:["recipient","tokenId","latitude","longitude"]},transferWithLocationCheck:{name:"transferWithLocationCheck",description:"Transfer NFT with location validation",parameters:["from","to","tokenId","currentLatitude","currentLongitude"],required:["from","to","tokenId","currentLatitude","currentLongitude"]},setLocationData:{name:"setLocationData",description:"Set or update location data for an NFT",parameters:["tokenId","latitude","longitude","radius"],required:["tokenId","latitude","longitude"]},grantRole:{name:"grantRole",description:"Grant a role to an account",parameters:["role","account"],required:["role","account"]},revokeRole:{name:"revokeRole",description:"Revoke a role from an account",parameters:["role","account"],required:["role","account"]},hasRole:{name:"hasRole",description:"Check if an account has a specific role",parameters:["role","account"],required:["role","account"]},pause:{name:"pause",description:"Pause all contract operations",parameters:[],required:[]},unpause:{name:"unpause",description:"Unpause contract operations",parameters:[],required:[]},balanceOf:{name:"balanceOf",description:"Get the number of NFTs owned by an account",parameters:["owner"],required:["owner"]},ownerOf:{name:"ownerOf",description:"Get the owner of a specific NFT",parameters:["tokenId"],required:["tokenId"]},getApproved:{name:"getApproved",description:"Get the approved account for an NFT",parameters:["tokenId"],required:["tokenId"]},isApprovedForAll:{name:"isApprovedForAll",description:"Check if an operator is approved for all NFTs",parameters:["owner","operator"],required:["owner","operator"]},getLocationData:{name:"getLocationData",description:"Get location data for an NFT",parameters:["tokenId"],required:["tokenId"]},setTokenURI:{name:"setTokenURI",description:"Set the URI for an NFT",parameters:["tokenId","uri"],required:["tokenId","uri"]},getTokenURI:{name:"getTokenURI",description:"Get the URI for an NFT",parameters:["tokenId"],required:["tokenId"]}}}async validateContract(e){try{this.isInitialized||await this.initialize();if(!this.getContract(e))throw new Error("Contract not found");return console.log("Contract validation successful:",e),!0}catch(t){return console.error("Contract validation failed:",t),!1}}getDeploymentStatus(){return{isInitialized:this.isInitialized,network:this.networkPassphrase?"testnet":"unknown",deployedContracts:this.deployedContracts.size,contracts:this.getDeployedContracts()}}},Pc=jc;const Ic=new class{constructor(){this.server=null,this.sorobanServer=null,this.networkPassphrase=null,this.isInitialized=!1,this.contracts=new Map,this.ipfsGateways=["https://bronze-adjacent-barnacle-907.mypinata.cloud/ipfs/","https://gateway.pinata.cloud/ipfs/","https://ipfs.io/ipfs/","https://cloudflare-ipfs.com/ipfs/"]}async initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"testnet";try{if(this.isInitialized)return!0;await Tc.initialize(e),await Pc.initialize(e);const t=await Promise.resolve().then(r.t.bind(r,121,23));return"testnet"===e?(this.server=new t.Horizon.Server("https://horizon-testnet.stellar.org"),this.sorobanServer=new t.SorobanRpc.Server("https://soroban-testnet.stellar.org"),this.networkPassphrase=t.Networks.TESTNET):"mainnet"===e&&(this.server=new t.Horizon.Server("https://horizon.stellar.org"),this.sorobanServer=new t.SorobanRpc.Server("https://soroban.stellar.org"),this.networkPassphrase=t.Networks.PUBLIC),this.isInitialized=!0,console.log("Real NFT Service initialized for",e),!0}catch(t){throw console.error("Failed to initialize real NFT service:",t),t}}async deployLocationNFTContract(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"StellarGeoLinkNFT";try{this.isInitialized||await this.initialize(),console.log("Setting up LocationNFT contract with admin:",e.publicKey());const r=await Pc.setupDeployedContract(e,t);return this.contracts.set(r.contractId,d(d({},r),{},{isActive:!0,totalMinted:0,totalTransferred:0})),console.log("Contract stored in realNFTService:",r.contractId),console.log("LocationNFT contract deployed and initialized:",r.contractId),r}catch(r){throw console.error("Failed to deploy LocationNFT contract:",r),r}}async mintLocationNFT(e,t,n,o,i){try{this.isInitialized||await this.initialize(),console.log("Minting location NFT:",{contractId:e,recipient:t,location:o}),console.log("Location coordinates:",{latitude:o.latitude,longitude:o.longitude,latitudeType:typeof o.latitude,longitudeType:typeof o.longitude,latitudeValue:o.latitude,longitudeValue:o.longitude});const p=this.contracts.get(e);if(!p)throw new Error("Contract not found. Please deploy a contract first.");const f=await Promise.resolve().then(r.t.bind(r,121,23));console.log("\u2705 Contract exists on StellarExpert, proceeding with minting"),console.log("Contract ID:",e),console.log("StellarExpert link: https://stellar.expert/explorer/testnet/contract/"+e);try{const t=new f.Contract(e),r=new f.TransactionBuilder(await this.server.loadAccount(i.publicKey()),{fee:f.BASE_FEE,networkPassphrase:this.networkPassphrase});r.addOperation(t.call("name"));const n=r.setTimeout(30).build();n.sign(i);try{await this.sorobanServer.sendTransaction(n),console.log("\u2705 Contract is properly initialized")}catch(a){console.log("\u26a0\ufe0f Contract is not initialized, attempting to initialize...");const e=new f.TransactionBuilder(await this.server.loadAccount(i.publicKey()),{fee:f.BASE_FEE,networkPassphrase:this.networkPassphrase});e.addOperation(t.call("initialize",f.Address.fromString(i.publicKey()),"StellarGeoLinkNFT","SGL"));const r=e.setTimeout(30).build();r.sign(i);try{const e=await this.sorobanServer.sendTransaction(r);console.log("\u2705 Contract initialized successfully"),console.log("Initialization transaction hash:",e.hash),console.log("Ledger:",e.ledger)}catch(s){throw console.log("\u26a0\ufe0f Contract initialization failed:",s.message),new Error("Contract initialization failed: ".concat(s.message,". Please ensure the contract is properly deployed and initialized."))}}}catch(l){console.log("\u26a0\ufe0f Could not verify contract initialization, continuing with minting attempt:",l.message)}const m=await this.server.loadAccount(i.publicKey()),g=Math.floor(Date.now()/1e3)%1e6;console.log("\u2705 Using timestamp-based token ID:",g);const y=this.buildIPFSUrl(n.ipfs_hash,n.filename),v={name:n.name,description:n.description,image_url:y,ipfs_hash:n.ipfs_hash,attributes:n.attributes||{},location:{latitude:o.latitude.toString(),longitude:o.longitude.toString(),radius:o.radius||100},created_at:Date.now()};let b,x;try{b=new f.Contract(e),console.log("\u2705 Contract created with direct contract ID")}catch(c){console.log("\u26a0\ufe0f Direct contract ID failed, trying Address approach:",c.message);try{const t=f.Address.fromString(e);b=new f.Contract(t),console.log("\u2705 Contract created with Address.fromString")}catch(u){throw console.error("\u274c Both contract creation methods failed:",u.message),new Error("Failed to create contract instance: ".concat(u.message))}}let _=g,w=0;const S=5;for(;w<S;)try{console.log("\ud83d\udd04 Attempting to mint with token ID: ".concat(_," (attempt ").concat(w+1,"/").concat(S,")"));const e=new f.TransactionBuilder(m,{fee:f.BASE_FEE,networkPassphrase:this.networkPassphrase});e.addOperation(b.call("mint",f.xdr.ScVal.scvAddress(f.Address.fromString(t).toScAddress()),f.xdr.ScVal.scvU32(_),f.xdr.ScVal.scvString(v.name),f.xdr.ScVal.scvString("SGL"),f.xdr.ScVal.scvString(v.image_url),(()=>{const e=o.latitude.toString();return console.log("Latitude conversion:",{original:o.latitude,string:e,final:e}),f.xdr.ScVal.scvString(e)})(),(()=>{const e=o.longitude.toString();return console.log("Longitude conversion:",{original:o.longitude,string:e,final:e}),f.xdr.ScVal.scvString(e)})(),f.xdr.ScVal.scvU32(v.location.radius))),e.setTimeout(30);const r=e.build(),n=await this.sorobanServer.prepareTransaction(r);n.sign(i),x=await this.sorobanServer.sendTransaction(n),console.log("\u2705 Successfully minted NFT with token ID: ".concat(_));break}catch(h){if(w++,console.log("\u274c Mint attempt ".concat(w," failed:"),h.message),w>=S)throw new Error("Failed to mint NFT after ".concat(S," attempts. Last error: ").concat(h.message));_=g+w+Math.floor(1e3*Math.random()),console.log("\ud83d\udd04 Retrying with new token ID: ".concat(_))}return p.totalMinted=Math.max(p.totalMinted||0,_),this.contracts.set(e,p),console.log("NFT minted successfully:",x),d(d({},x),{},{tokenId:_,contractId:e,recipient:t,metadata:v})}catch(p){throw console.error("Failed to mint location NFT:",p),p}}async transferLocationNFT(e,t,n,o,i,a,s){try{this.isInitialized||await this.initialize(),console.log("Transferring location NFT:",{contractId:e,tokenId:t,from:n,to:o});const i=this.contracts.get(e);if(!i)throw new Error("Contract not found");const a=await Promise.resolve().then(r.t.bind(r,121,23)),u=await this.server.loadAccount(s.publicKey()),d=new a.TransactionBuilder(u,{fee:a.BASE_FEE,networkPassphrase:this.networkPassphrase});let h;try{h=new a.Contract(e),console.log("\u2705 Transfer contract created with direct contract ID")}catch(l){console.log("\u26a0\ufe0f Direct contract ID failed, trying Address approach:",l.message);try{const t=a.Address.fromString(e);h=new a.Contract(t),console.log("\u2705 Transfer contract created with Address.fromString")}catch(c){throw console.error("\u274c Both transfer contract creation methods failed:",c.message),new Error("Failed to create transfer contract instance: ".concat(c.message))}}d.addOperation(h.call("transfer",a.xdr.ScVal.scvAddress(a.Address.fromString(n).toScAddress()),a.xdr.ScVal.scvAddress(a.Address.fromString(o).toScAddress()),a.xdr.ScVal.scvU32(t))),d.setTimeout(30);const p=d.build(),f=await this.sorobanServer.prepareTransaction(p);f.sign(s);const m=await this.sorobanServer.sendTransaction(f);return i.totalTransferred+=1,this.contracts.set(e,i),console.log("NFT transferred successfully:",m),m}catch(u){throw console.error("Failed to transfer location NFT:",u),u}}async getNFTMetadata(e,t){try{return this.isInitialized||await this.initialize(),{tokenId:t,contractId:e,name:"Location NFT #".concat(t),description:"A location-based NFT on Stellar",image_url:"https://via.placeholder.com/300x300",ipfs_hash:"",attributes:{},location:{latitude:0,longitude:0,radius:100},created_at:Date.now()}}catch(r){throw console.error("Failed to get NFT metadata:",r),r}}async getUserNFTs(e,t){try{return this.isInitialized||await this.initialize(),{user:t,contractId:e,nfts:[],total:0}}catch(r){throw console.error("Failed to get user NFTs:",r),r}}buildIPFSUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=this.ipfsGateways[r];return"".concat(n).concat(e,"/").concat(t)}getIPFSGateways(){return this.ipfsGateways}setIPFSGateway(e){this.ipfsGateways.includes(e)||this.ipfsGateways.unshift(e)}async fundAccount(e){try{this.isInitialized||await this.initialize(),console.log("Funding account with testnet XLM:",e);if((await fetch("https://friendbot.stellar.org?addr=".concat(e))).ok)return console.log("Account funded successfully"),!0;throw new Error("Failed to fund account")}catch(t){throw console.error("Failed to fund account:",t),t}}getContract(e){return this.contracts.get(e)}getAllContracts(){const e="CCU33UEBVE6EVQ5HPAGF55FYNFO3NILVUSLLG74QDJSCO5UTSKYC7P7Q";if(!this.contracts.has(e)){const t={contractId:e,name:"StellarGeoLinkNFT",type:"LocationNFT",deployedAt:(new Date).toISOString(),admin:"Not initialized",network:"testnet",transactionHash:"deployed_via_lab",ledger:"deployed_via_lab",isActive:!1,totalMinted:0,totalTransferred:0};this.contracts.set(e,t)}return Array.from(this.contracts.values())}async validateContract(e){try{return await Pc.validateContract(e)}catch(t){return console.error("Contract validation failed:",t),!1}}getStatus(){return{isInitialized:this.isInitialized,network:this.networkPassphrase?"testnet":"unknown",contracts:this.contracts.size,ipfsGateways:this.ipfsGateways.length}}},Oc=(0,t.createContext)(),Mc=()=>{const e=(0,t.useContext)(Oc);if(!e)throw new Error("useWallet must be used within a WalletProvider");return e},Rc=e=>{let{children:n}=e;const[o,i]=(0,t.useState)(!1),[a,s]=(0,t.useState)(null),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),[f,m]=(0,t.useState)(!1),[g,y]=(0,t.useState)(null),[v,b]=(0,t.useState)(null),x=t.useRef(null),_=t.useRef(null),w=t.useCallback((async()=>{if(!x.current)try{const e=(await Promise.resolve().then(r.t.bind(r,121,23))).Horizon;x.current=new e.Server("https://horizon-testnet.stellar.org"),_.current="Test SDF Network ; September 2015"}catch(g){return console.error("Failed to initialize Stellar SDK:",g),!1}return!0}),[]),S=t.useCallback((async e=>{try{if(!await w())throw new Error("Failed to initialize Stellar SDK");m(!0);const t=await x.current.loadAccount(e);p(t);const r=t.balances.find((e=>"native"===e.asset_type));d(r?parseFloat(r.balance):0),y(null)}catch(t){console.error("Error loading account info:",t),y("Failed to load account information")}finally{m(!1)}}),[w]);(0,t.useEffect)((()=>{if(!v)return console.log("WalletContext: No current user, clearing wallet state"),s(null),c(null),i(!1),d(null),p(null),void y(null);const e=localStorage.getItem("stellar_public_key"),t=localStorage.getItem("stellar_secret_key");console.log("WalletContext: Checking saved wallet data:",{savedPublicKey:e?"exists":"none",savedSecretKey:t?"exists":"none",userPublicKey:v.public_key,currentWalletState:{isConnected:o,publicKey:a}}),e&&v.public_key&&e===v.public_key?(console.log("WalletContext: Restoring wallet for current user"),s(e),c(t),i(!0),console.log("WalletContext: Wallet restored, loading account info..."),S(e).then((()=>{console.log("WalletContext: Account info loaded successfully")})).catch((e=>{console.error("WalletContext: Failed to load account info:",e)}))):e&&v.public_key&&e!==v.public_key?(console.log("WalletContext: Different user detected, clearing saved wallet data"),localStorage.removeItem("stellar_public_key"),localStorage.removeItem("stellar_secret_key"),s(null),c(null),i(!1),d(null),p(null),y(null)):v.public_key&&!e&&(console.log("WalletContext: User has public key but no saved wallet, will auto-connect"),s(null),c(null),i(!1),d(null),p(null),y(null))}),[v,S,o,a]),(0,t.useEffect)((()=>{const e=()=>{console.log("User logout detected, clearing wallet state"),b(null),s(null),c(null),i(!1),d(null),p(null),y(null)},t=t=>{"token"===t.key&&null===t.newValue&&(console.log("Token removed, clearing wallet state"),e())};window.addEventListener("userLogout",e),window.addEventListener("storage",t);return localStorage.getItem("token")||e(),()=>{window.removeEventListener("userLogout",e),window.removeEventListener("storage",t)}}),[]);const k={isConnected:o,publicKey:a,secretKey:l,balance:u,account:h,loading:f,error:g,wallet:{publicKey:a,secretKey:l,isConnected:o},connectWallet:async e=>{try{if(!await w())throw new Error("Failed to initialize Stellar SDK");if(m(!0),y(null),!e||56!==e.length)throw new Error("Invalid secret key format. Secret key must be 56 characters long.");if(!e.startsWith("S")){if(e.startsWith("G"))throw new Error('This appears to be a public key (starts with "G"). Please use your secret key (starts with "S") to import your wallet.');throw new Error('Invalid secret key format. Stellar secret keys start with "S".')}const n=(await Promise.resolve().then(r.t.bind(r,121,23))).Keypair,o=n.fromSecret(e).publicKey();await x.current.loadAccount(o),s(o),c(e),i(!0),localStorage.setItem("stellar_public_key",o),localStorage.setItem("stellar_secret_key",e),await S(o);try{await bc.put("/auth/update-public-key",{public_key:o})}catch(t){console.warn("Failed to update public key in backend:",t)}}catch(t){console.error("Error connecting wallet:",t),y(t.message||"Failed to connect wallet")}finally{m(!1)}},connectWalletViewOnly:async e=>{try{if(console.log("WalletContext: connectWalletViewOnly called with:",e),!await w())throw new Error("Failed to initialize Stellar SDK");if(m(!0),y(null),!e||56!==e.length)throw new Error("Invalid public key format");await x.current.loadAccount(e),s(e),c(null),i(!0),localStorage.setItem("stellar_public_key",e),localStorage.removeItem("stellar_secret_key"),await S(e);try{await bc.put("/auth/update-public-key",{public_key:e})}catch(t){console.warn("Failed to update public key in backend:",t)}console.log("WalletContext: connectWalletViewOnly completed successfully")}catch(t){console.error("Error connecting wallet:",t),y(t.message||"Failed to connect wallet")}finally{m(!1)}},generateWallet:async()=>{try{const e=await Promise.resolve().then(r.t.bind(r,121,23)),t=e.Keypair.random(),n=t.secret();return{publicKey:t.publicKey(),secretKey:n}}catch(e){return console.error("Error generating wallet:",e),y("Failed to generate wallet"),null}},disconnectWallet:()=>{s(null),c(null),i(!1),d(null),p(null),y(null),localStorage.removeItem("stellar_public_key"),localStorage.removeItem("stellar_secret_key")},clearWallet:()=>{s(null),c(null),i(!1),d(null),p(null),y(null)},clearWalletCompletely:()=>{s(null),c(null),i(!1),d(null),p(null),y(null),localStorage.removeItem("stellar_public_key"),localStorage.removeItem("stellar_secret_key")},upgradeToFullAccess:async e=>{try{if(!await w())throw new Error("Failed to initialize Stellar SDK");if(!a)throw new Error("No wallet connected. Please connect a wallet first.");if(!e||56!==e.length)throw new Error("Invalid secret key format. Secret key must be 56 characters long.");if(!e.startsWith("S"))throw new Error('Invalid secret key format. Stellar secret keys start with "S".');const t=(await Promise.resolve().then(r.t.bind(r,121,23))).Keypair;if(t.fromSecret(e).publicKey()!==a)throw new Error("Secret key does not match the current wallet. Please use the correct secret key.");return c(e),localStorage.setItem("stellar_secret_key",e),console.log("WalletContext: Upgraded to full access"),!0}catch(g){throw console.error("Failed to upgrade to full access:",g),y(g.message),g}},sendTransaction:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{if(!o||!l)throw new Error("Wallet not connected");if(!await w())throw new Error("Failed to initialize Stellar SDK");m(!0),y(null);const i=await Promise.resolve().then(r.t.bind(r,121,23)),s=i.Keypair,c=i.TransactionBuilder,u=i.Operation,d=s.fromSecret(l),h=new c(await x.current.loadAccount(a),{fee:"100",networkPassphrase:_.current}).addOperation(u.payment({destination:e,asset:"XLM",amount:t.toString()})).setTimeout(30).build();n&&h.addMemo(n),h.sign(d);const p=await x.current.submitTransaction(h);return await S(a),p}catch(i){throw console.error("Error sending transaction:",i),y(i.message||"Failed to send transaction"),i}finally{m(!1)}},signTransaction:async e=>{try{if(!o||!l)throw new Error("Wallet not connected");if(!await w())throw new Error("Failed to initialize Stellar SDK");const t=await Promise.resolve().then(r.t.bind(r,121,23)),n=t.Keypair,i=t.TransactionBuilder,a=n.fromSecret(l),s=i.fromXDR(e,_.current);return s.sign(a),s.toXDR()}catch(t){throw console.error("Error signing transaction:",t),y(t.message||"Failed to sign transaction"),t}},getTransactionHistory:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;try{if(!a)throw new Error("Wallet not connected");if(!await w())throw new Error("Failed to initialize Stellar SDK");return(await x.current.transactions().forAccount(a).order("desc").limit(e).call()).records}catch(t){return console.error("Error getting transaction history:",t),y(t.message||"Failed to get transaction history"),[]}},fundAccount:async()=>{try{if(!a)throw new Error("Wallet not connected");m(!0),y(null);if((await fetch("https://friendbot.stellar.org?addr=".concat(a))).ok)return await S(a),!0;throw new Error("Failed to fund account")}catch(e){return console.error("Error funding account:",e),y(e.message||"Failed to fund account"),!1}finally{m(!1)}},loadAccountInfo:S,setUser:e=>{console.log("WalletContext: Setting current user:",e),v&&e&&v.id===e.id?console.log("WalletContext: Same user, skipping setUser call"):b(e)},createNFTCollection:async function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{if(!o||!l)throw new Error("Wallet must be connected with secret key to create NFT collections");m(!0);return await Ac.createCollection(e,t,r,n)}catch(g){throw console.error("Failed to create NFT collection:",g),y(g.message),g}finally{m(!1)}},mintNFT:async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{if(!o||!l)throw new Error("Wallet must be connected with secret key to mint NFTs");m(!0);return await Ac.mintNFT(e,t,r)}catch(g){throw console.error("Failed to mint NFT:",g),y(g.message),g}finally{m(!1)}},transferNFT:async(e,t,r,n)=>{try{if(!o||!l)throw new Error("Wallet must be connected with secret key to transfer NFTs");m(!0);return await Ac.transferNFT(e,t,r,n)}catch(g){throw console.error("Failed to transfer NFT:",g),y(g.message),g}finally{m(!1)}},executeOnNFTTransfer:async function(e,t,r,n,i,a){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];try{if(!o||!l)throw new Error("Wallet must be connected with secret key to execute smart contracts");m(!0);return await Ac.executeOnNFTTransfer(e,t,r,n,i,a,s)}catch(g){throw console.error("Failed to execute on NFT transfer:",g),y(g.message),g}finally{m(!1)}},createLocationNFT:async function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{if(!o||!l)throw new Error("Wallet must be connected with secret key to create location NFTs");m(!0);return await Ac.createLocationNFT(e,t,r,n)}catch(g){throw console.error("Failed to create location NFT:",g),y(g.message),g}finally{m(!1)}},getNFTCollections:()=>Ac.getCollections(),getNFTMetadata:async(e,t)=>{try{return await Ac.getNFTMetadata(e,t)}catch(g){throw console.error("Failed to get NFT metadata:",g),y(g.message),g}},getNFTBalance:async(e,t)=>{try{return await Ac.getNFTBalance(e,t)}catch(g){throw console.error("Failed to get NFT balance:",g),y(g.message),g}},stellarWalletService:Tc,sorobanService:Cc,nftService:Ac,realNFTService:Ic,contractDeploymentService:Pc,server:x.current,networkPassphrase:_.current};return(0,St.jsx)(Oc.Provider,{value:k,children:n})};function Lc(){const e=xa(wa);return e[hn]||e}function Fc(e){const{theme:t,name:r,props:n}=e;return t&&t.components&&t.components[r]&&t.components[r].defaultProps?on(t.components[r].defaultProps,n):n}function zc(e,r,n,o,i){const[a,s]=t.useState((()=>i&&n?n(e).matches:o?o(e).matches:r));return jo((()=>{if(!n)return;const t=n(e),r=()=>{s(t.matches)};return r(),t.addEventListener("change",r),()=>{t.removeEventListener("change",r)}}),[e,n]),a}const Dc=d({},n).useSyncExternalStore;function Nc(e,r,n,o,i){const a=t.useCallback((()=>r),[r]),s=t.useMemo((()=>{if(i&&n)return()=>n(e).matches;if(null!==o){const{matches:t}=o(e);return()=>t}return a}),[a,e,o,i,n]),[l,c]=t.useMemo((()=>{if(null===n)return[a,()=>()=>{}];const t=n(e);return[()=>t.matches,e=>(t.addEventListener("change",e),()=>{t.removeEventListener("change",e)})]}),[a,n,e]);return Dc(c,l,s)}function Bc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t}=e;return function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Qr();n&&t&&(n=n[t]||n);const o="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,{defaultMatches:i=!1,matchMedia:a=(o?window.matchMedia:null),ssrMatchMedia:s=null,noSsr:l=!1}=Fc({name:"MuiUseMediaQuery",props:r,theme:n});let c="function"===typeof e?e(n):e;c=c.replace(/^@media( ?)/m,"");return(void 0!==Dc?Nc:zc)(c,i,a,s,l)}}Bc();const Uc=Bc({themeId:hn});function Vc(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=Vc(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}const Wc=function(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=Vc(e))&&(n&&(n+=" "),n+=t);return n};function qc(){return qc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qc.apply(null,arguments)}var Hc=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Gc=Ir((function(e){return Hc.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),Kc=function(e){return"theme"!==e},Xc=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?Gc:Kc},Zc=function(e,t,r){var n;if(t){var o=t.shouldForwardProp;n=e.__emotion_forwardProp&&o?function(t){return e.__emotion_forwardProp(t)&&o(t)}:o}return"function"!==typeof n&&r&&(n=e.__emotion_forwardProp),n},Yc=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;return Ar(t,r,n),Wr((function(){return jr(t,r,n)})),null},Jc=function e(r,n){var o,i,a=r.__emotion_real===r,s=a&&r.__emotion_base||r;void 0!==n&&(o=n.label,i=n.target);var l=Zc(r,n,a),c=l||Xc(s),u=!c("as");return function(){var d=arguments,h=a&&void 0!==r.__emotion_styles?r.__emotion_styles.slice(0):[];if(void 0!==o&&h.push("label:"+o+";"),null==d[0]||void 0===d[0].raw)h.push.apply(h,d);else{var p=d[0];h.push(p[0]);for(var f=d.length,m=1;m<f;m++)h.push(d[m],p[m])}var g=Gr((function(e,r,n){var o=u&&e.as||s,a="",d=[],p=e;if(null==e.theme){for(var f in p={},e)p[f]=e[f];p.theme=t.useContext(Kr)}"string"===typeof e.className?a=Cr(r.registered,d,e.className):null!=e.className&&(a=e.className+" ");var m=Ur(h.concat(d),r.registered,p);a+=r.key+"-"+m.name,void 0!==i&&(a+=" "+i);var g=u&&void 0===l?Xc(o):c,y={};for(var v in e)u&&"as"===v||g(v)&&(y[v]=e[v]);return y.className=a,n&&(y.ref=n),t.createElement(t.Fragment,null,t.createElement(Yc,{cache:r,serialized:m,isStringTag:"string"===typeof o}),t.createElement(o,y))}));return g.displayName=void 0!==o?o:"Styled("+("string"===typeof s?s:s.displayName||s.name||"Component")+")",g.defaultProps=r.defaultProps,g.__emotion_real=g,g.__emotion_base=s,g.__emotion_styles=h,g.__emotion_forwardProp=l,Object.defineProperty(g,"toString",{value:function(){return"."+i}}),g.withComponent=function(t,r){return e(t,qc({},n,r,{shouldForwardProp:Zc(g,r,!0)})).apply(void 0,h)},g}}.bind(null);function $c(e,t){return Jc(e,t)}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Jc[e]=Jc(e)}));const Qc=[];function eu(e){return Qc[0]=e,Ur(Qc)}const tu=["className","component"];const ru=e=>e,nu=(()=>{let e=ru;return{configure(t){e=t},generate:t=>e(t),reset(){e=ru}}})(),ou={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function iu(e,t){const r=ou[t];return r?"".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui","-").concat(r):"".concat(nu.generate(e),"-").concat(t)}function au(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const n={};return t.forEach((t=>{n[t]=iu(e,t,r)})),n}const su=au("MuiBox",["root"]),lu=ca(),cu=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:r,defaultTheme:n,defaultClassName:o="MuiBox-root",generateClassName:i}=e,s=$c("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(So),l=t.forwardRef((function(e,t){const l=xa(n),c=va(e),{className:u,component:h="div"}=c,p=a(c,tu);return(0,St.jsx)(s,d({as:h,ref:t,className:Wc(u,i?i(o):o),theme:r&&l[r]||l},p))}));return l}({themeId:hn,defaultTheme:lu,defaultClassName:su.root,generateClassName:nu.generate}),uu=cu;function du(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const n={};for(const o in e){const i=e[o];let a="",s=!0;for(let e=0;e<i.length;e+=1){const n=i[e];n&&(a+=(!0===s?"":" ")+t(n),s=!1,r&&r[n]&&(a+=" "+r[n]))}n[o]=a}return n}const hu=["variants"];function pu(e){const{variants:t}=e,r=a(e,hu),n={variants:t,style:eu(r),isProcessed:!0};return n.style===r||t&&t.forEach((e=>{"function"!==typeof e.style&&(e.style=eu(e.style))})),n}const fu=["variants"],mu=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],gu=Ei();function yu(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}function vu(e){return e?(t,r)=>r[e]:null}function bu(e,t){const r="function"===typeof t?t(e):t;if(Array.isArray(r))return r.flatMap((t=>bu(e,t)));if(Array.isArray(null===r||void 0===r?void 0:r.variants)){let t;if(r.isProcessed)t=r.style;else{const{variants:e}=r;t=a(r,fu)}return xu(e,r.variants,[t])}return null!==r&&void 0!==r&&r.isProcessed?r.style:r}function xu(e,t){let r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e:for(let i=0;i<t.length;i+=1){const a=t[i];if("function"===typeof a.props){if(null!==r&&void 0!==r||(r=d(d(d({},e),e.ownerState),{},{ownerState:e.ownerState})),!a.props(r))continue}else for(const t in a.props){var o;if(e[t]!==a.props[t]&&(null===(o=e.ownerState)||void 0===o?void 0:o[t])!==a.props[t])continue e}"function"===typeof a.style?(null!==r&&void 0!==r||(r=d(d(d({},e),e.ownerState),{},{ownerState:e.ownerState})),n.push(a.style(r))):n.push(a.style)}return n}function _u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:r=gu,rootShouldForwardProp:n=yu,slotShouldForwardProp:o=yu}=e;function i(e){!function(e,t,r){e.theme=function(e){for(const t in e)return!1;return!0}(e.theme)?r:e.theme[t]||e.theme}(e,t,r)}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}(e,(e=>e.filter((e=>e!==So))));const{name:r,slot:s,skipVariantsResolver:l,skipSx:c,overridesResolver:u=vu(Su(s))}=t,h=a(t,mu),p=void 0!==l?l:s&&"Root"!==s&&"root"!==s||!1,f=c||!1;let m=yu;"Root"===s||"root"===s?m=n:s?m=o:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(m=void 0);const g=$c(e,d({shouldForwardProp:m,label:wu(r,s)},h)),y=e=>{if("function"===typeof e&&e.__emotion_real!==e)return function(t){return bu(t,e)};if(vn(e)){const t=pu(e);return t.variants?function(e){return bu(e,t)}:t.style}return e},v=function(){const t=[];for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];const s=o.map(y),l=[];if(t.push(i),r&&u&&l.push((function(e){var t;const n=null===(t=e.theme.components)||void 0===t||null===(t=t[r])||void 0===t?void 0:t.styleOverrides;if(!n)return null;const o={};for(const r in n)o[r]=bu(e,n[r]);return u(e,o)})),r&&!p&&l.push((function(e){var t;const n=e.theme,o=null===n||void 0===n||null===(t=n.components)||void 0===t||null===(t=t[r])||void 0===t?void 0:t.variants;return o?xu(e,o):null})),f||l.push(So),Array.isArray(s[0])){const e=s.shift(),r=new Array(t.length).fill(""),n=new Array(l.length).fill("");let o;o=[...r,...e,...n],o.raw=[...r,...e.raw,...n],t.unshift(o)}const c=[...t,...s,...l],d=g(...c);return e.muiName&&(d.muiName=e.muiName),d};return g.withConfig&&(v.withConfig=g.withConfig),v}}function wu(e,t){}function Su(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}const ku=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e},Tu=e=>ku(e)&&"classes"!==e,Eu=_u({themeId:hn,defaultTheme:wa,rootShouldForwardProp:Tu}),Cu={theme:void 0};const Au=function(e){let t,r;return function(n){let o=t;return void 0!==o&&n.theme===r||(Cu.theme=n.theme,o=pu(e(Cu)),t=o,r=n.theme),o}},ju=gn;function Pu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t=>{let[,r]=t;return r&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!function(e){return"string"===typeof e.main}(e))return!1;for(const r of t)if(!e.hasOwnProperty(r)||"string"!==typeof e[r])return!1;return!0}(r,e)}}function Iu(e){return iu("MuiTypography",e)}const Ou=au("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),Mu=["color"],Ru=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Lu={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Fu=va,zu=Eu("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],"inherit"!==r.align&&t["align".concat(ju(r.align))],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})(Au((e=>{var t;let{theme:r}=e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(r.typography).filter((e=>{let[t,r]=e;return"inherit"!==t&&r&&"object"===typeof r})).map((e=>{let[t,r]=e;return{props:{variant:t},style:r}})),...Object.entries(r.palette).filter(Pu()).map((e=>{let[t]=e;return{props:{color:t},style:{color:(r.vars||r).palette[t].main}}})),...Object.entries((null===(t=r.palette)||void 0===t?void 0:t.text)||{}).filter((e=>{let[,t]=e;return"string"===typeof t})).map((e=>{let[t]=e;return{props:{color:"text".concat(ju(t))},style:{color:(r.vars||r).palette.text[t]}}})),{props:e=>{let{ownerState:t}=e;return"inherit"!==t.align},style:{textAlign:"var(--Typography-textAlign)"}},{props:e=>{let{ownerState:t}=e;return t.noWrap},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:e=>{let{ownerState:t}=e;return t.gutterBottom},style:{marginBottom:"0.35em"}},{props:e=>{let{ownerState:t}=e;return t.paragraph},style:{marginBottom:16}}]}}))),Du={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Nu=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiTypography"}),{color:n}=r,o=a(r,Mu),i=!Lu[n],s=Fu(d(d({},o),i&&{color:n})),{align:l="inherit",className:c,component:u,gutterBottom:h=!1,noWrap:p=!1,paragraph:f=!1,variant:m="body1",variantMapping:g=Du}=s,y=a(s,Ru),v=d(d({},s),{},{align:l,color:n,className:c,component:u,gutterBottom:h,noWrap:p,paragraph:f,variant:m,variantMapping:g}),b=u||(f?"p":g[m]||Du[m])||"span",x=(e=>{const{align:t,gutterBottom:r,noWrap:n,paragraph:o,variant:i,classes:a}=e;return du({root:["root",i,"inherit"!==e.align&&"align".concat(ju(t)),r&&"gutterBottom",n&&"noWrap",o&&"paragraph"]},Iu,a)})(v);return(0,St.jsx)(zu,d(d({as:b,ref:t,className:Wc(x.root,c)},y),{},{ownerState:v,style:d(d({},"inherit"!==l&&{"--Typography-textAlign":l}),y.style)}))})),Bu=Nu;let Uu=0;const Vu=d({},n).useId;function Wu(e){if(void 0!==Vu){const t=Vu();return null!==e&&void 0!==e?e:t}return function(e){const[r,n]=t.useState(e),o=e||r;return t.useEffect((()=>{null==r&&(Uu+=1,n("mui-".concat(Uu)))}),[r]),o}(e)}const qu=Wu;function Hu(e){try{return e.matches(":focus-visible")}catch(t){0}return!1}function Gu(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Ku(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.useMemo((()=>r.every((e=>null==e))?null:e=>{r.forEach((t=>{Gu(t,e)}))}),r)}const Xu=Ku;const Zu=function(e){const r=t.useRef(e);return jo((()=>{r.current=e})),t.useRef((function(){return(0,r.current)(...arguments)})).current},Yu=Zu,Ju={};function $u(e,r){const n=t.useRef(Ju);return n.current===Ju&&(n.current=e(r)),n}class Qu{static create(){return new Qu}static use(){const e=$u(Qu.create).current,[r,n]=t.useState(!1);return e.shouldMount=r,e.setShouldMount=n,t.useEffect(e.mountEffect,[r]),e}constructor(){c(this,"mountEffect",(()=>{this.shouldMount&&!this.didMount&&null!==this.ref.current&&(this.didMount=!0,this.mounted.resolve())})),this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=function(){let e,t;const r=new Promise(((r,n)=>{e=r,t=n}));return r.resolve=e,r.reject=t,r}(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.mount().then((()=>{var e;return null===(e=this.ref.current)||void 0===e?void 0:e.start(...t)}))}stop(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.mount().then((()=>{var e;return null===(e=this.ref.current)||void 0===e?void 0:e.stop(...t)}))}pulsate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.mount().then((()=>{var e;return null===(e=this.ref.current)||void 0===e?void 0:e.pulsate(...t)}))}}function ed(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function td(e,t){return td=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},td(e,t)}function rd(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,td(e,t)}const nd=t.createContext(null);function od(e,r){var n=Object.create(null);return e&&t.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return r&&(0,t.isValidElement)(e)?r(e):e}(e)})),n}function id(e,t,r){return null!=r[t]?r[t]:e.props[t]}function ad(e,r,n){var o=od(e.children),i=function(e,t){function r(r){return r in t?t[r]:e[r]}e=e||{},t=t||{};var n,o=Object.create(null),i=[];for(var a in e)a in t?i.length&&(o[a]=i,i=[]):i.push(a);var s={};for(var l in t){if(o[l])for(n=0;n<o[l].length;n++){var c=o[l][n];s[o[l][n]]=r(c)}s[l]=r(l)}for(n=0;n<i.length;n++)s[i[n]]=r(i[n]);return s}(r,o);return Object.keys(i).forEach((function(a){var s=i[a];if((0,t.isValidElement)(s)){var l=a in r,c=a in o,u=r[a],d=(0,t.isValidElement)(u)&&!u.props.in;!c||l&&!d?c||!l||d?c&&l&&(0,t.isValidElement)(u)&&(i[a]=(0,t.cloneElement)(s,{onExited:n.bind(null,s),in:u.props.in,exit:id(s,"exit",e),enter:id(s,"enter",e)})):i[a]=(0,t.cloneElement)(s,{in:!1}):i[a]=(0,t.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:id(s,"exit",e),enter:id(s,"enter",e)})}})),i}var sd=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},ld=function(e){function r(t,r){var n,o=(n=e.call(this,t,r)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n));return n.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},n}rd(r,e);var n=r.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},r.getDerivedStateFromProps=function(e,r){var n,o,i=r.children,a=r.handleExited;return{children:r.firstRender?(n=e,o=a,od(n.children,(function(e){return(0,t.cloneElement)(e,{onExited:o.bind(null,e),in:!0,appear:id(e,"appear",n),enter:id(e,"enter",n),exit:id(e,"exit",n)})}))):ad(e,i,a),firstRender:!1}},n.handleExited=function(e,t){var r=od(this.props.children);e.key in r||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var r=qc({},t.children);return delete r[e.key],{children:r}})))},n.render=function(){var e=this.props,r=e.component,n=e.childFactory,o=i(e,["component","childFactory"]),a=this.state.contextValue,s=sd(this.state.children).map(n);return delete o.appear,delete o.enter,delete o.exit,null===r?t.createElement(nd.Provider,{value:a},s):t.createElement(nd.Provider,{value:a},t.createElement(r,o,s))},r}(t.Component);ld.propTypes={},ld.defaultProps={component:"div",childFactory:function(e){return e}};const cd=ld,ud=[];class dd{constructor(){c(this,"currentId",null),c(this,"clear",(()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)})),c(this,"disposeEffect",(()=>this.clear))}static create(){return new dd}start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}}function hd(){const e=$u(dd.create).current;var r;return r=e.disposeEffect,t.useEffect(r,ud),e}const pd=function(e){const{className:r,classes:n,pulsate:o=!1,rippleX:i,rippleY:a,rippleSize:s,in:l,onExited:c,timeout:u}=e,[d,h]=t.useState(!1),p=Wc(r,n.ripple,n.rippleVisible,o&&n.ripplePulsate),f={width:s,height:s,top:-s/2+a,left:-s/2+i},m=Wc(n.child,d&&n.childLeaving,o&&n.childPulsate);return l||d||h(!0),t.useEffect((()=>{if(!l&&null!=c){const e=setTimeout(c,u);return()=>{clearTimeout(e)}}}),[c,l,u]),(0,St.jsx)("span",{className:p,style:f,children:(0,St.jsx)("span",{className:m})})};const fd=au("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),md=["center","classes","className"];var gd,yd,vd,bd;const xd=Co(gd||(gd=ed(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"]))),_d=Co(yd||(yd=ed(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"]))),wd=Co(vd||(vd=ed(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"]))),Sd=Eu("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),kd=Eu(pd,{name:"MuiTouchRipple",slot:"Ripple"})(bd||(bd=ed(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"])),fd.rippleVisible,xd,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),fd.ripplePulsate,(e=>{let{theme:t}=e;return t.transitions.duration.shorter}),fd.child,fd.childLeaving,_d,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),fd.childPulsate,wd,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut})),Td=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiTouchRipple"}),{center:o=!1,classes:i={},className:s}=n,l=a(n,md),[c,u]=t.useState([]),h=t.useRef(0),p=t.useRef(null);t.useEffect((()=>{p.current&&(p.current(),p.current=null)}),[c]);const f=t.useRef(!1),m=hd(),g=t.useRef(null),y=t.useRef(null),v=t.useCallback((e=>{const{pulsate:t,rippleX:r,rippleY:n,rippleSize:o,cb:a}=e;u((e=>[...e,(0,St.jsx)(kd,{classes:{ripple:Wc(i.ripple,fd.ripple),rippleVisible:Wc(i.rippleVisible,fd.rippleVisible),ripplePulsate:Wc(i.ripplePulsate,fd.ripplePulsate),child:Wc(i.child,fd.child),childLeaving:Wc(i.childLeaving,fd.childLeaving),childPulsate:Wc(i.childPulsate,fd.childPulsate)},timeout:550,pulsate:t,rippleX:r,rippleY:n,rippleSize:o},h.current)])),h.current+=1,p.current=a}),[i]),b=t.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:n=!1,center:i=o||t.pulsate,fakeElement:a=!1}=t;if("mousedown"===(null===e||void 0===e?void 0:e.type)&&f.current)return void(f.current=!1);"touchstart"===(null===e||void 0===e?void 0:e.type)&&(f.current=!0);const s=a?null:y.current,l=s?s.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,d;if(i||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:r}=e.touches&&e.touches.length>0?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(r-l.top)}if(i)d=Math.sqrt((2*l.width**2+l.height**2)/3),d%2===0&&(d+=1);else{const e=2*Math.max(Math.abs((s?s.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((s?s.clientHeight:0)-u),u)+2;d=Math.sqrt(e**2+t**2)}null!==e&&void 0!==e&&e.touches?null===g.current&&(g.current=()=>{v({pulsate:n,rippleX:c,rippleY:u,rippleSize:d,cb:r})},m.start(80,(()=>{g.current&&(g.current(),g.current=null)}))):v({pulsate:n,rippleX:c,rippleY:u,rippleSize:d,cb:r})}),[o,v,m]),x=t.useCallback((()=>{b({},{pulsate:!0})}),[b]),_=t.useCallback(((e,t)=>{if(m.clear(),"touchend"===(null===e||void 0===e?void 0:e.type)&&g.current)return g.current(),g.current=null,void m.start(0,(()=>{_(e,t)}));g.current=null,u((e=>e.length>0?e.slice(1):e)),p.current=t}),[m]);return t.useImperativeHandle(r,(()=>({pulsate:x,start:b,stop:_})),[x,b,_]),(0,St.jsx)(Sd,d(d({className:Wc(fd.root,i.root,s),ref:y},l),{},{children:(0,St.jsx)(cd,{component:null,exit:!0,children:c})}))})),Ed=Td;function Cd(e){return iu("MuiButtonBase",e)}const Ad=au("MuiButtonBase",["root","disabled","focusVisible"]),jd=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Pd=Eu("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(Ad.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}});function Id(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Yu((o=>(r&&r(o),n||e[t](o),!0)))}const Od=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiButtonBase"}),{action:o,centerRipple:i=!1,children:s,className:l,component:c="button",disabled:u=!1,disableRipple:h=!1,disableTouchRipple:p=!1,focusRipple:f=!1,focusVisibleClassName:m,LinkComponent:g="a",onBlur:y,onClick:v,onContextMenu:b,onDragLeave:x,onFocus:_,onFocusVisible:w,onKeyDown:S,onKeyUp:k,onMouseDown:T,onMouseLeave:E,onMouseUp:C,onTouchEnd:A,onTouchMove:j,onTouchStart:P,tabIndex:I=0,TouchRippleProps:O,touchRippleRef:M,type:R}=n,L=a(n,jd),F=t.useRef(null),z=Qu.use(),D=Xu(z.ref,M),[N,B]=t.useState(!1);u&&N&&B(!1),t.useImperativeHandle(o,(()=>({focusVisible:()=>{B(!0),F.current.focus()}})),[]);const U=z.shouldMount&&!h&&!u;t.useEffect((()=>{N&&f&&!h&&z.pulsate()}),[h,f,N,z]);const V=Id(z,"start",T,p),W=Id(z,"stop",b,p),q=Id(z,"stop",x,p),H=Id(z,"stop",C,p),G=Id(z,"stop",(e=>{N&&e.preventDefault(),E&&E(e)}),p),K=Id(z,"start",P,p),X=Id(z,"stop",A,p),Z=Id(z,"stop",j,p),Y=Id(z,"stop",(e=>{Hu(e.target)||B(!1),y&&y(e)}),!1),J=Yu((e=>{F.current||(F.current=e.currentTarget),Hu(e.target)&&(B(!0),w&&w(e)),_&&_(e)})),$=()=>{const e=F.current;return c&&"button"!==c&&!("A"===e.tagName&&e.href)},Q=Yu((e=>{f&&!e.repeat&&N&&" "===e.key&&z.stop(e,(()=>{z.start(e)})),e.target===e.currentTarget&&$()&&" "===e.key&&e.preventDefault(),S&&S(e),e.target===e.currentTarget&&$()&&"Enter"===e.key&&!u&&(e.preventDefault(),v&&v(e))})),ee=Yu((e=>{f&&" "===e.key&&N&&!e.defaultPrevented&&z.stop(e,(()=>{z.pulsate(e)})),k&&k(e),v&&e.target===e.currentTarget&&$()&&" "===e.key&&!e.defaultPrevented&&v(e)}));let te=c;"button"===te&&(L.href||L.to)&&(te=g);const re={};"button"===te?(re.type=void 0===R?"button":R,re.disabled=u):(L.href||L.to||(re.role="button"),u&&(re["aria-disabled"]=u));const ne=Xu(r,F),oe=d(d({},n),{},{centerRipple:i,component:c,disabled:u,disableRipple:h,disableTouchRipple:p,focusRipple:f,tabIndex:I,focusVisible:N}),ie=(e=>{const{disabled:t,focusVisible:r,focusVisibleClassName:n,classes:o}=e,i=du({root:["root",t&&"disabled",r&&"focusVisible"]},Cd,o);return r&&n&&(i.root+=" ".concat(n)),i})(oe);return(0,St.jsxs)(Pd,d(d(d({as:te,className:Wc(ie.root,l),ownerState:oe,onBlur:Y,onClick:v,onContextMenu:W,onFocus:J,onKeyDown:Q,onKeyUp:ee,onMouseDown:V,onMouseLeave:G,onMouseUp:H,onDragLeave:q,onTouchEnd:X,onTouchMove:Z,onTouchStart:K,ref:ne,tabIndex:u?-1:I,type:R},re),L),{},{children:[s,U?(0,St.jsx)(Ed,d({ref:D,center:i},O)):null]}))}));function Md(e){return iu("MuiCircularProgress",e)}au("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Rd=["className","color","disableShrink","size","style","thickness","value","variant"];var Ld,Fd,zd,Dd;const Nd=44,Bd=Co(Ld||(Ld=ed(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"]))),Ud=Co(Fd||(Fd=ed(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: -126px;\n  }\n"]))),Vd="string"!==typeof Bd?Eo(zd||(zd=ed(["\n        animation: "," 1.4s linear infinite;\n      "])),Bd):null,Wd="string"!==typeof Ud?Eo(Dd||(Dd=ed(["\n        animation: "," 1.4s ease-in-out infinite;\n      "])),Ud):null,qd=Eu("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t["color".concat(ju(r.color))]]}})(Au((e=>{let{theme:t}=e;return{display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Vd||{animation:"".concat(Bd," 1.4s linear infinite")}},...Object.entries(t.palette).filter(Pu()).map((e=>{let[r]=e;return{props:{color:r},style:{color:(t.vars||t).palette[r].main}}}))]}}))),Hd=Eu("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),Gd=Eu("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t["circle".concat(ju(r.variant))],r.disableShrink&&t.circleDisableShrink]}})(Au((e=>{let{theme:t}=e;return{stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink},style:Wd||{animation:"".concat(Ud," 1.4s ease-in-out infinite")}}]}}))),Kd=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiCircularProgress"}),{className:n,color:o="primary",disableShrink:i=!1,size:s=40,style:l,thickness:c=3.6,value:u=0,variant:h="indeterminate"}=r,p=a(r,Rd),f=d(d({},r),{},{color:o,disableShrink:i,size:s,thickness:c,value:u,variant:h}),m=(e=>{const{classes:t,variant:r,color:n,disableShrink:o}=e;return du({root:["root",r,"color".concat(ju(n))],svg:["svg"],circle:["circle","circle".concat(ju(r)),o&&"circleDisableShrink"]},Md,t)})(f),g={},y={},v={};if("determinate"===h){const e=2*Math.PI*((Nd-c)/2);g.strokeDasharray=e.toFixed(3),v["aria-valuenow"]=Math.round(u),g.strokeDashoffset="".concat(((100-u)/100*e).toFixed(3),"px"),y.transform="rotate(-90deg)"}return(0,St.jsx)(qd,d(d(d({className:Wc(m.root,n),style:d(d({width:s,height:s},y),l),ownerState:f,ref:t,role:"progressbar"},v),p),{},{children:(0,St.jsx)(Hd,{className:m.svg,ownerState:f,viewBox:"".concat(22," ").concat(22," ").concat(Nd," ").concat(Nd),children:(0,St.jsx)(Gd,{className:m.circle,style:g,ownerState:f,cx:Nd,cy:Nd,r:(Nd-c)/2,fill:"none",strokeWidth:c})})}))})),Xd=Kd;function Zd(e){return iu("MuiIconButton",e)}const Yd=au("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),Jd=["edge","children","className","color","disabled","disableFocusRipple","size","id","loading","loadingIndicator"],$d=Eu(Od,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.loading&&t.loading,"default"!==r.color&&t["color".concat(ju(r.color))],r.edge&&t["edge".concat(ju(r.edge))],t["size".concat(ju(r.size))]]}})(Au((e=>{let{theme:t}=e;return{textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Go(t.palette.action.active,t.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]}})),Au((e=>{let{theme:t}=e;return{variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(Pu()).map((e=>{let[r]=e;return{props:{color:r},style:{color:(t.vars||t).palette[r].main}}})),...Object.entries(t.palette).filter(Pu()).map((e=>{let[r]=e;return{props:{color:r},style:{"--IconButton-hoverBg":t.vars?"rgba(".concat((t.vars||t).palette[r].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Go((t.vars||t).palette[r].main,t.palette.action.hoverOpacity)}}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],["&.".concat(Yd.disabled)]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled},["&.".concat(Yd.loading)]:{color:"transparent"}}}))),Qd=Eu("span",{name:"MuiIconButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>t.loadingIndicator})((e=>{let{theme:t}=e;return{display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(t.vars||t).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]}})),eh=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiIconButton"}),{edge:n=!1,children:o,className:i,color:s="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium",id:h,loading:p=null,loadingIndicator:f}=r,m=a(r,Jd),g=qu(h),y=null!==f&&void 0!==f?f:(0,St.jsx)(Xd,{"aria-labelledby":g,color:"inherit",size:16}),v=d(d({},r),{},{edge:n,color:s,disabled:l,disableFocusRipple:c,loading:p,loadingIndicator:y,size:u}),b=(e=>{const{classes:t,disabled:r,color:n,edge:o,size:i,loading:a}=e;return du({root:["root",a&&"loading",r&&"disabled","default"!==n&&"color".concat(ju(n)),o&&"edge".concat(ju(o)),"size".concat(ju(i))],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},Zd,t)})(v);return(0,St.jsxs)($d,d(d({id:p?g:h,className:Wc(b.root,i),centerRipple:!0,focusRipple:!c,disabled:l||p,ref:t},m),{},{ownerState:v,children:["boolean"===typeof p&&(0,St.jsx)("span",{className:b.loadingWrapper,style:{display:"contents"},children:(0,St.jsx)(Qd,{className:b.loadingIndicator,ownerState:v,children:p&&y})}),o]}))})),th=eh;function rh(e){return iu("MuiDivider",e)}const nh=au("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),oh=["absolute","children","className","orientation","component","flexItem","light","role","textAlign","variant"],ih=Eu("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,"vertical"===r.orientation&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&"vertical"===r.orientation&&t.withChildrenVertical,"right"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignRight,"left"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignLeft]}})(Au((e=>{let{theme:t}=e;return{margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:t.vars?"rgba(".concat(t.vars.palette.dividerChannel," / 0.08)"):Go(t.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:t.spacing(2),marginRight:t.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:t.spacing(1),marginBottom:t.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:e=>{let{ownerState:t}=e;return!!t.children},style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:e=>{let{ownerState:t}=e;return t.children&&"vertical"!==t.orientation},style:{"&::before, &::after":{width:"100%",borderTop:"thin solid ".concat((t.vars||t).palette.divider),borderTopStyle:"inherit"}}},{props:e=>{let{ownerState:t}=e;return"vertical"===t.orientation&&t.children},style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:"thin solid ".concat((t.vars||t).palette.divider),borderLeftStyle:"inherit"}}},{props:e=>{let{ownerState:t}=e;return"right"===t.textAlign&&"vertical"!==t.orientation},style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:e=>{let{ownerState:t}=e;return"left"===t.textAlign&&"vertical"!==t.orientation},style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}}))),ah=Eu("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.wrapper,"vertical"===r.orientation&&t.wrapperVertical]}})(Au((e=>{let{theme:t}=e;return{display:"inline-block",paddingLeft:"calc(".concat(t.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(t.spacing(1)," * 1.2)"),whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:"calc(".concat(t.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(t.spacing(1)," * 1.2)")}}]}}))),sh=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiDivider"}),{absolute:n=!1,children:o,className:i,orientation:s="horizontal",component:l=(o||"vertical"===s?"div":"hr"),flexItem:c=!1,light:u=!1,role:h=("hr"!==l?"separator":void 0),textAlign:p="center",variant:f="fullWidth"}=r,m=a(r,oh),g=d(d({},r),{},{absolute:n,component:l,flexItem:c,light:u,orientation:s,role:h,textAlign:p,variant:f}),y=(e=>{const{absolute:t,children:r,classes:n,flexItem:o,light:i,orientation:a,textAlign:s,variant:l}=e;return du({root:["root",t&&"absolute",l,i&&"light","vertical"===a&&"vertical",o&&"flexItem",r&&"withChildren",r&&"vertical"===a&&"withChildrenVertical","right"===s&&"vertical"!==a&&"textAlignRight","left"===s&&"vertical"!==a&&"textAlignLeft"],wrapper:["wrapper","vertical"===a&&"wrapperVertical"]},rh,n)})(g);return(0,St.jsx)(ih,d(d({as:l,className:Wc(y.root,i),role:h,ref:t,ownerState:g,"aria-orientation":"separator"!==h||"hr"===l&&"vertical"!==s?void 0:s},m),{},{children:o?(0,St.jsx)(ah,{className:y.wrapper,ownerState:g,children:o}):null}))}));sh&&(sh.muiSkipListHighlight=!0);const lh=sh;const ch=t.createContext({});function uh(e){return iu("MuiList",e)}au("MuiList",["root","padding","dense","subheader"]);const dh=["children","className","component","dense","disablePadding","subheader"],hh=Eu("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disablePadding&&t.padding,r.dense&&t.dense,r.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:e=>{let{ownerState:t}=e;return!t.disablePadding},style:{paddingTop:8,paddingBottom:8}},{props:e=>{let{ownerState:t}=e;return t.subheader},style:{paddingTop:0}}]}),ph=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiList"}),{children:o,className:i,component:s="ul",dense:l=!1,disablePadding:c=!1,subheader:u}=n,h=a(n,dh),p=t.useMemo((()=>({dense:l})),[l]),f=d(d({},n),{},{component:s,dense:l,disablePadding:c}),m=(e=>{const{classes:t,disablePadding:r,dense:n,subheader:o}=e;return du({root:["root",!r&&"padding",n&&"dense",o&&"subheader"]},uh,t)})(f);return(0,St.jsx)(ch.Provider,{value:p,children:(0,St.jsxs)(hh,d(d({as:s,className:Wc(m.root,i),ref:r,ownerState:f},h),{},{children:[u,o]}))})})),fh=jo;function mh(e){return iu("MuiListItemButton",e)}const gh=au("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),yh=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],vh=Eu(Od,{shouldForwardProp:e=>Tu(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,"flex-start"===r.alignItems&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters]}})(Au((e=>{let{theme:t}=e;return{display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(gh.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):Go(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(gh.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):Go(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(gh.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):Go(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):Go(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(gh.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(gh.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},variants:[{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.dense},style:{paddingTop:4,paddingBottom:4}}]}}))),bh=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiListItemButton"}),{alignItems:o="center",autoFocus:i=!1,component:s="div",children:l,dense:c=!1,disableGutters:u=!1,divider:h=!1,focusVisibleClassName:p,selected:f=!1,className:m}=n,g=a(n,yh),y=t.useContext(ch),v=t.useMemo((()=>({dense:c||y.dense||!1,alignItems:o,disableGutters:u})),[o,y.dense,c,u]),b=t.useRef(null);fh((()=>{i&&b.current&&b.current.focus()}),[i]);const x=d(d({},n),{},{alignItems:o,dense:v.dense,disableGutters:u,divider:h,selected:f}),_=(e=>{const{alignItems:t,classes:r,dense:n,disabled:o,disableGutters:i,divider:a,selected:s}=e,l=du({root:["root",n&&"dense",!i&&"gutters",a&&"divider",o&&"disabled","flex-start"===t&&"alignItemsFlexStart",s&&"selected"]},mh,r);return d(d({},r),l)})(x),w=Xu(b,r);return(0,St.jsx)(ch.Provider,{value:v,children:(0,St.jsx)(vh,d(d({ref:w,href:g.href||g.to,component:(g.href||g.to)&&"div"===s?"button":s,focusVisibleClassName:Wc(_.focusVisible,p),ownerState:x,className:Wc(_.root,m)},g),{},{classes:_,children:l}))})}));function xh(e){return iu("MuiListItemText",e)}const _h=au("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);const wh=function(e){return"string"===typeof e};const Sh=function(e,t,r){return void 0===e||wh(e)?t:d(d({},t),{},{ownerState:d(d({},t.ownerState),r)})};const kh=function(e,t,r){return"function"===typeof e?e(t,r):e};const Th=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const r={};return Object.keys(e).filter((r=>r.match(/^on[A-Z]/)&&"function"===typeof e[r]&&!t.includes(r))).forEach((t=>{r[t]=e[t]})),r};const Eh=function(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((r=>{t[r]=e[r]})),t};const Ch=function(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:n,externalForwardedProps:o,className:i}=e;if(!t){const e=Wc(null===r||void 0===r?void 0:r.className,i,null===o||void 0===o?void 0:o.className,null===n||void 0===n?void 0:n.className),t=d(d(d({},null===r||void 0===r?void 0:r.style),null===o||void 0===o?void 0:o.style),null===n||void 0===n?void 0:n.style),a=d(d(d({},r),o),n);return e.length>0&&(a.className=e),Object.keys(t).length>0&&(a.style=t),{props:a,internalRef:void 0}}const a=Th(d(d({},o),n)),s=Eh(n),l=Eh(o),c=t(a),u=Wc(null===c||void 0===c?void 0:c.className,null===r||void 0===r?void 0:r.className,i,null===o||void 0===o?void 0:o.className,null===n||void 0===n?void 0:n.className),h=d(d(d(d({},null===c||void 0===c?void 0:c.style),null===r||void 0===r?void 0:r.style),null===o||void 0===o?void 0:o.style),null===n||void 0===n?void 0:n.style),p=d(d(d(d({},c),r),l),s);return u.length>0&&(p.className=u),Object.keys(h).length>0&&(p.style=h),{props:p,internalRef:c.ref}},Ah=["className","elementType","ownerState","externalForwardedProps","internalForwardedProps","shouldForwardComponentProp"],jh=["component","slots","slotProps"],Ph=["component"];function Ih(e,t){const{className:r,elementType:n,ownerState:o,externalForwardedProps:i,internalForwardedProps:s,shouldForwardComponentProp:l=!1}=t,c=a(t,Ah),{component:u,slots:h={[e]:void 0},slotProps:p={[e]:void 0}}=i,f=a(i,jh),m=h[e]||n,g=kh(p[e],o),y=Ch(d(d({className:r},c),{},{externalForwardedProps:"root"===e?f:void 0,externalSlotProps:g})),{props:{component:v},internalRef:b}=y,x=a(y.props,Ph),_=Ku(b,null===g||void 0===g?void 0:g.ref,t.ref),w="root"===e?v||u:v;return[m,Sh(m,d(d(d(d(d(d({},"root"===e&&!u&&!h[e]&&s),"root"!==e&&!h[e]&&s),x),w&&!l&&{as:w}),w&&l&&{component:w}),{},{ref:_}),o)]}const Oh=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps","slots","slotProps"],Mh=Eu("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{["& .".concat(_h.primary)]:t.primary},{["& .".concat(_h.secondary)]:t.secondary},t.root,r.inset&&t.inset,r.primary&&r.secondary&&t.multiline,r.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[".".concat(Ou.root,":where(& .").concat(_h.primary,")")]:{display:"block"},[".".concat(Ou.root,":where(& .").concat(_h.secondary,")")]:{display:"block"},variants:[{props:e=>{let{ownerState:t}=e;return t.primary&&t.secondary},style:{marginTop:6,marginBottom:6}},{props:e=>{let{ownerState:t}=e;return t.inset},style:{paddingLeft:56}}]}),Rh=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiListItemText"}),{children:o,className:i,disableTypography:s=!1,inset:l=!1,primary:c,primaryTypographyProps:u,secondary:h,secondaryTypographyProps:p,slots:f={},slotProps:m={}}=n,g=a(n,Oh),{dense:y}=t.useContext(ch);let v=null!=c?c:o,b=h;const x=d(d({},n),{},{disableTypography:s,inset:l,primary:!!v,secondary:!!b,dense:y}),_=(e=>{const{classes:t,inset:r,primary:n,secondary:o,dense:i}=e;return du({root:["root",r&&"inset",i&&"dense",n&&o&&"multiline"],primary:["primary"],secondary:["secondary"]},xh,t)})(x),w={slots:f,slotProps:d({primary:u,secondary:p},m)},[S,k]=Ih("root",{className:Wc(_.root,i),elementType:Mh,externalForwardedProps:d(d({},w),g),ownerState:x,ref:r}),[T,E]=Ih("primary",{className:_.primary,elementType:Bu,externalForwardedProps:w,ownerState:x}),[C,A]=Ih("secondary",{className:_.secondary,elementType:Bu,externalForwardedProps:w,ownerState:x});return null==v||v.type===Bu||s||(v=(0,St.jsx)(T,d(d({variant:y?"body2":"body1",component:null!==E&&void 0!==E&&E.variant?void 0:"span"},E),{},{children:v}))),null==b||b.type===Bu||s||(b=(0,St.jsx)(C,d(d({variant:"body2",color:"textSecondary"},A),{},{children:b}))),(0,St.jsxs)(S,d(d({},k),{},{children:[v,b]}))}));const Lh=function(e){return"string"===typeof e};const Fh=function(e,r){var n,o;return t.isValidElement(e)&&-1!==r.indexOf(null!==(n=e.type.muiName)&&void 0!==n?n:null===(o=e.type)||void 0===o||null===(o=o._payload)||void 0===o||null===(o=o.value)||void 0===o?void 0:o.muiName)};function zh(e){return iu("MuiListItem",e)}au("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function Dh(e){return iu("MuiListItemSecondaryAction",e)}au("MuiListItemSecondaryAction",["root","disableGutters"]);const Nh=["className"],Bh=Eu("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:e=>{let{ownerState:t}=e;return t.disableGutters},style:{right:0}}]}),Uh=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiListItemSecondaryAction"}),{className:o}=n,i=a(n,Nh),s=t.useContext(ch),l=d(d({},n),{},{disableGutters:s.disableGutters}),c=(e=>{const{disableGutters:t,classes:r}=e;return du({root:["root",t&&"disableGutters"]},Dh,r)})(l);return(0,St.jsx)(Bh,d({className:Wc(c.root,o),ownerState:l,ref:r},i))}));Uh.muiName="ListItemSecondaryAction";const Vh=Uh,Wh=["className"],qh=["alignItems","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disableGutters","disablePadding","divider","secondaryAction","slotProps","slots"],Hh=Eu("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,"flex-start"===r.alignItems&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters,!r.disablePadding&&t.padding,r.hasSecondaryAction&&t.secondaryAction]}})(Au((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:e=>{let{ownerState:t}=e;return!t.disablePadding},style:{paddingTop:8,paddingBottom:8}},{props:e=>{let{ownerState:t}=e;return!t.disablePadding&&t.dense},style:{paddingTop:4,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return!t.disablePadding&&!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return!t.disablePadding&&!!t.secondaryAction},style:{paddingRight:48}},{props:e=>{let{ownerState:t}=e;return!!t.secondaryAction},style:{["& > .".concat(gh.root)]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return t.button},style:{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:e=>{let{ownerState:t}=e;return t.hasSecondaryAction},style:{paddingRight:48}}]}}))),Gh=Eu("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),Kh=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiListItem"}),{alignItems:o="center",children:i,className:s,component:l,components:c={},componentsProps:u={},ContainerComponent:h="li",ContainerProps:{className:p}={},dense:f=!1,disableGutters:m=!1,disablePadding:g=!1,divider:y=!1,secondaryAction:v,slotProps:b={},slots:x={}}=n,_=a(n.ContainerProps,Wh),w=a(n,qh),S=t.useContext(ch),k=t.useMemo((()=>({dense:f||S.dense||!1,alignItems:o,disableGutters:m})),[o,S.dense,f,m]),T=t.useRef(null),E=t.Children.toArray(i),C=E.length&&Fh(E[E.length-1],["ListItemSecondaryAction"]),A=d(d({},n),{},{alignItems:o,dense:k.dense,disableGutters:m,disablePadding:g,divider:y,hasSecondaryAction:C}),j=(e=>{const{alignItems:t,classes:r,dense:n,disableGutters:o,disablePadding:i,divider:a,hasSecondaryAction:s}=e;return du({root:["root",n&&"dense",!o&&"gutters",!i&&"padding",a&&"divider","flex-start"===t&&"alignItemsFlexStart",s&&"secondaryAction"],container:["container"]},zh,r)})(A),P=Xu(T,r),I=x.root||c.Root||Hh,O=b.root||u.root||{},M=d({className:Wc(j.root,O.className,s)},w);let R=l||"li";return C?(R=M.component||l?R:"div","li"===h&&("li"===R?R="div":"li"===M.component&&(M.component="div")),(0,St.jsx)(ch.Provider,{value:k,children:(0,St.jsxs)(Gh,d(d({as:h,className:Wc(j.container,p),ref:P,ownerState:A},_),{},{children:[(0,St.jsx)(I,d(d(d(d({},O),!Lh(I)&&{as:R,ownerState:d(d({},A),O.ownerState)}),M),{},{children:E})),E.pop()]}))})):(0,St.jsx)(ch.Provider,{value:k,children:(0,St.jsxs)(I,d(d(d(d({},O),{},{as:R,ref:P},!Lh(I)&&{ownerState:d(d({},A),O.ownerState)}),M),{},{children:[E,v&&(0,St.jsx)(Vh,{children:v})]}))})}));function Xh(e){return iu("MuiPaper",e)}au("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Zh=["className","component","elevation","square","variant"],Yh=Eu("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],!r.square&&t.rounded,"elevation"===r.variant&&t["elevation".concat(r.elevation)]]}})(Au((e=>{let{theme:t}=e;return{backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:e=>{let{ownerState:t}=e;return!t.square},style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:"1px solid ".concat((t.vars||t).palette.divider)}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}}))),Jh=t.forwardRef((function(e,t){var r;const n=Ta({props:e,name:"MuiPaper"}),o=Lc(),{className:i,component:s="div",elevation:l=1,square:c=!1,variant:u="elevation"}=n,h=a(n,Zh),p=d(d({},n),{},{component:s,elevation:l,square:c,variant:u}),f=(e=>{const{square:t,elevation:r,variant:n,classes:o}=e;return du({root:["root",n,!t&&"rounded","elevation"===n&&"elevation".concat(r)]},Xh,o)})(p);return(0,St.jsx)(Yh,d(d({as:s,ownerState:p,className:Wc(f.root,i),ref:t},h),{},{style:d(d({},"elevation"===u&&d(d({"--Paper-shadow":(o.vars||o).shadows[l]},o.vars&&{"--Paper-overlay":null===(r=o.vars.overlays)||void 0===r?void 0:r[l]}),!o.vars&&"dark"===o.palette.mode&&{"--Paper-overlay":"linear-gradient(".concat(Go("#fff",Hi(l)),", ").concat(Go("#fff",Hi(l)),")")})),h.style)}))})),$h=Jh;function Qh(e){return iu("MuiAppBar",e)}au("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const ep=["className","color","enableColorOnDark","position"],tp=(e,t)=>e?"".concat(null===e||void 0===e?void 0:e.replace(")",""),", ").concat(t,")"):t,rp=Eu($h,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t["position".concat(ju(r.position))],t["color".concat(ju(r.color))]]}})(Au((e=>{let{theme:t}=e;return{display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:d({"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[100],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[100])},t.applyStyles("dark",{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[900],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[900])}))},...Object.entries(t.palette).filter(Pu(["contrastText"])).map((e=>{var r,n;let[o]=e;return{props:{color:o},style:{"--AppBar-background":(null!==(r=t.vars)&&void 0!==r?r:t).palette[o].main,"--AppBar-color":(null!==(n=t.vars)&&void 0!==n?n:t).palette[o].contrastText}}})),{props:e=>!0===e.enableColorOnDark&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:e=>!1===e.enableColorOnDark&&!["inherit","transparent"].includes(e.color),style:d({backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"},t.applyStyles("dark",{backgroundColor:t.vars?tp(t.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:t.vars?tp(t.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null}))},{props:{color:"transparent"},style:d({"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"},t.applyStyles("dark",{backgroundImage:"none"}))}]}}))),np=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiAppBar"}),{className:n,color:o="primary",enableColorOnDark:i=!1,position:s="fixed"}=r,l=a(r,ep),c=d(d({},r),{},{color:o,position:s,enableColorOnDark:i}),u=(e=>{const{color:t,position:r,classes:n}=e;return du({root:["root","color".concat(ju(t)),"position".concat(ju(r))]},Qh,n)})(c);return(0,St.jsx)(rp,d({square:!0,component:"header",ownerState:c,elevation:4,className:Wc(u.root,n,"fixed"===s&&"mui-fixed"),ref:t},l))})),op=np;const ip=_u(),ap=["className","component","disableGutters","fixed","maxWidth","classes"],sp=Ei(),lp=ip("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t["maxWidth".concat(gn(String(r.maxWidth)))],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),cp=e=>function(e){let{props:t,name:r,defaultTheme:n,themeId:o}=e,i=xa(n);return o&&(i=i[o]||i),Fc({theme:i,name:r,props:t})}({props:e,name:"MuiContainer",defaultTheme:sp});const up=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:r=lp,useThemeProps:n=cp,componentName:o="MuiContainer"}=e,i=r((e=>{let{theme:t,ownerState:r}=e;return d({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto"},!r.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})}),(e=>{let{theme:t,ownerState:r}=e;return r.fixed&&Object.keys(t.breakpoints.values).reduce(((e,r)=>{const n=r,o=t.breakpoints.values[n];return 0!==o&&(e[t.breakpoints.up(n)]={maxWidth:"".concat(o).concat(t.breakpoints.unit)}),e}),{})}),(e=>{let{theme:t,ownerState:r}=e;return d(d({},"xs"===r.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}}),r.maxWidth&&"xs"!==r.maxWidth&&{[t.breakpoints.up(r.maxWidth)]:{maxWidth:"".concat(t.breakpoints.values[r.maxWidth]).concat(t.breakpoints.unit)}})})),s=t.forwardRef((function(e,t){const r=n(e),{className:s,component:l="div",disableGutters:c=!1,fixed:u=!1,maxWidth:h="lg",classes:p}=r,f=a(r,ap),m=d(d({},r),{},{component:l,disableGutters:c,fixed:u,maxWidth:h}),g=((e,t)=>{const{classes:r,fixed:n,disableGutters:o,maxWidth:i}=e;return du({root:["root",i&&"maxWidth".concat(gn(String(i))),n&&"fixed",o&&"disableGutters"]},(e=>iu(t,e)),r)})(m,o);return(0,St.jsx)(i,d({as:l,ownerState:m,className:Wc(g.root,s),ref:t},f))}));return s}({createStyledComponent:Eu("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t["maxWidth".concat(ju(String(r.maxWidth)))],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),useThemeProps:e=>Ta({props:e,name:"MuiContainer"})}),dp=up;function hp(e){return iu("MuiToolbar",e)}au("MuiToolbar",["root","gutters","regular","dense"]);const pp=["className","component","disableGutters","variant"],fp=Eu("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableGutters&&t.gutters,t[r.variant]]}})(Au((e=>{let{theme:t}=e;return{position:"relative",display:"flex",alignItems:"center",variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:t.mixins.toolbar}]}}))),mp=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiToolbar"}),{className:n,component:o="div",disableGutters:i=!1,variant:s="regular"}=r,l=a(r,pp),c=d(d({},r),{},{component:o,disableGutters:i,variant:s}),u=(e=>{const{classes:t,disableGutters:r,variant:n}=e;return du({root:["root",!r&&"gutters",n]},hp,t)})(c);return(0,St.jsx)(fp,d({as:o,className:Wc(u.root,n),ref:t,ownerState:c},l))}));function gp(e){return iu("MuiButton",e)}const yp=au("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]);const vp=t.createContext({});const bp=t.createContext(void 0),xp=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","id","loading","loadingIndicator","loadingPosition","size","startIcon","type","variant"],_p=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],wp=Eu(Od,{shouldForwardProp:e=>Tu(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t["".concat(r.variant).concat(ju(r.color))],t["size".concat(ju(r.size))],t["".concat(r.variant,"Size").concat(ju(r.size))],"inherit"===r.color&&t.colorInherit,r.disableElevation&&t.disableElevation,r.fullWidth&&t.fullWidth,r.loading&&t.loading]}})(Au((e=>{let{theme:t}=e;const r="light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800],n="light"===t.palette.mode?t.palette.grey.A100:t.palette.grey[700];return d(d({},t.typography.button),{},{minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},["&.".concat(yp.disabled)]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},["&.".concat(yp.focusVisible)]:{boxShadow:(t.vars||t).shadows[6]},["&.".concat(yp.disabled)]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",["&.".concat(yp.disabled)]:{border:"1px solid ".concat((t.vars||t).palette.action.disabledBackground)}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(Pu()).map((e=>{let[r]=e;return{props:{color:r},style:{"--variant-textColor":(t.vars||t).palette[r].main,"--variant-outlinedColor":(t.vars||t).palette[r].main,"--variant-outlinedBorder":t.vars?"rgba(".concat(t.vars.palette[r].mainChannel," / 0.5)"):Go(t.palette[r].main,.5),"--variant-containedColor":(t.vars||t).palette[r].contrastText,"--variant-containedBg":(t.vars||t).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[r].dark,"--variant-textBg":t.vars?"rgba(".concat(t.vars.palette[r].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Go(t.palette[r].main,t.palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[r].main,"--variant-outlinedBg":t.vars?"rgba(".concat(t.vars.palette[r].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Go(t.palette[r].main,t.palette.action.hoverOpacity)}}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:r,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Go(t.palette.text.primary,t.palette.action.hoverOpacity),"--variant-outlinedBg":t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Go(t.palette.text.primary,t.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},["&.".concat(yp.focusVisible)]:{boxShadow:"none"},"&:active":{boxShadow:"none"},["&.".concat(yp.disabled)]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),["&.".concat(yp.loading)]:{color:"transparent"}}}]})}))),Sp=Eu("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.startIcon,r.loading&&t.startIconLoadingStart,t["iconSize".concat(ju(r.size))]]}})((e=>{let{theme:t}=e;return{display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},..._p]}})),kp=Eu("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.endIcon,r.loading&&t.endIconLoadingEnd,t["iconSize".concat(ju(r.size))]]}})((e=>{let{theme:t}=e;return{display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},..._p]}})),Tp=Eu("span",{name:"MuiButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>t.loadingIndicator})((e=>{let{theme:t}=e;return{display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]}})),Ep=Eu("span",{name:"MuiButton",slot:"LoadingIconPlaceholder",overridesResolver:(e,t)=>t.loadingIconPlaceholder})({display:"inline-block",width:"1em",height:"1em"}),Cp=t.forwardRef((function(e,r){const n=t.useContext(vp),o=t.useContext(bp),i=Ta({props:on(n,e),name:"MuiButton"}),{children:s,color:l="primary",component:c="button",className:u,disabled:h=!1,disableElevation:p=!1,disableFocusRipple:f=!1,endIcon:m,focusVisibleClassName:g,fullWidth:y=!1,id:v,loading:b=null,loadingIndicator:x,loadingPosition:_="center",size:w="medium",startIcon:S,type:k,variant:T="text"}=i,E=a(i,xp),C=qu(v),A=null!==x&&void 0!==x?x:(0,St.jsx)(Xd,{"aria-labelledby":C,color:"inherit",size:16}),j=d(d({},i),{},{color:l,component:c,disabled:h,disableElevation:p,disableFocusRipple:f,fullWidth:y,loading:b,loadingIndicator:A,loadingPosition:_,size:w,type:k,variant:T}),P=(e=>{const{color:t,disableElevation:r,fullWidth:n,size:o,variant:i,loading:a,loadingPosition:s,classes:l}=e,c=du({root:["root",a&&"loading",i,"".concat(i).concat(ju(t)),"size".concat(ju(o)),"".concat(i,"Size").concat(ju(o)),"color".concat(ju(t)),r&&"disableElevation",n&&"fullWidth",a&&"loadingPosition".concat(ju(s))],startIcon:["icon","startIcon","iconSize".concat(ju(o))],endIcon:["icon","endIcon","iconSize".concat(ju(o))],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},gp,l);return d(d({},l),c)})(j),I=(S||b&&"start"===_)&&(0,St.jsx)(Sp,{className:P.startIcon,ownerState:j,children:S||(0,St.jsx)(Ep,{className:P.loadingIconPlaceholder,ownerState:j})}),O=(m||b&&"end"===_)&&(0,St.jsx)(kp,{className:P.endIcon,ownerState:j,children:m||(0,St.jsx)(Ep,{className:P.loadingIconPlaceholder,ownerState:j})}),M=o||"",R="boolean"===typeof b?(0,St.jsx)("span",{className:P.loadingWrapper,style:{display:"contents"},children:b&&(0,St.jsx)(Tp,{className:P.loadingIndicator,ownerState:j,children:A})}):null;return(0,St.jsxs)(wp,d(d({ownerState:j,className:Wc(n.className,P.root,u,M),component:c,disabled:h||b,focusRipple:!f,focusVisibleClassName:Wc(P.focusVisible,g),ref:r,type:k,id:b?C:v},E),{},{classes:P,children:[I,"end"!==_&&R,s,"end"===_&&R,O]}))})),Ap=Cp,jp=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];const Pp=function(e){var t;const{elementType:r,externalSlotProps:n,ownerState:o,skipResolvingSlotProps:i=!1}=e,s=a(e,jp),l=i?{}:kh(n,o),{props:c,internalRef:u}=Ch(d(d({},s),{},{externalSlotProps:l})),h=Ku(u,null===l||void 0===l?void 0:l.ref,null===(t=e.additionalProps)||void 0===t?void 0:t.ref);return Sh(r,d(d({},c),{},{ref:h}),o)};function Ip(e){return e&&e.ownerDocument||document}const Op=Ip;function Mp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;const t=e.document.documentElement.clientWidth;return e.innerWidth-t}const Rp=Mp;function Lp(e){return Ip(e).defaultView||window}const Fp=Lp,zp=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Dp(e,t,r){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:r?null:e.firstChild}function Np(e,t,r){return e===t?r?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:r?null:e.lastChild}function Bp(e,t){if(void 0===t)return!0;let r=e.innerText;return void 0===r&&(r=e.textContent),r=r.trim().toLowerCase(),0!==r.length&&(t.repeating?r[0]===t.keys[0]:r.startsWith(t.keys.join("")))}function Up(e,t,r,n,o,i){let a=!1,s=o(e,t,!!t&&r);for(;s;){if(s===e.firstChild){if(a)return!1;a=!0}const t=!n&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&Bp(s,i)&&!t)return s.focus(),!0;s=o(e,s,r)}return!1}const Vp=t.forwardRef((function(e,r){const{actions:n,autoFocus:o=!1,autoFocusItem:i=!1,children:s,className:l,disabledItemsFocusable:c=!1,disableListWrap:u=!1,onKeyDown:h,variant:p="selectedMenu"}=e,f=a(e,zp),m=t.useRef(null),g=t.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});fh((()=>{o&&m.current.focus()}),[o]),t.useImperativeHandle(n,(()=>({adjustStyleForScrollbar:(e,t)=>{let{direction:r}=t;const n=!m.current.style.width;if(e.clientHeight<m.current.clientHeight&&n){const t="".concat(Rp(Fp(e)),"px");m.current.style["rtl"===r?"paddingLeft":"paddingRight"]=t,m.current.style.width="calc(100% + ".concat(t,")")}return m.current}})),[]);const y=Xu(m,r);let v=-1;t.Children.forEach(s,((e,r)=>{t.isValidElement(e)?(e.props.disabled||("selectedMenu"===p&&e.props.selected||-1===v)&&(v=r),v===r&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(v+=1,v>=s.length&&(v=-1))):v===r&&(v+=1,v>=s.length&&(v=-1))}));const b=t.Children.map(s,((e,r)=>{if(r===v){const r={};return i&&(r.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===p&&(r.tabIndex=0),t.cloneElement(e,r)}return e}));return(0,St.jsx)(ph,d(d({role:"menu",ref:y,className:l,onKeyDown:e=>{const t=m.current,r=e.key;if(e.ctrlKey||e.metaKey||e.altKey)return void(h&&h(e));const n=Op(t).activeElement;if("ArrowDown"===r)e.preventDefault(),Up(t,n,u,c,Dp);else if("ArrowUp"===r)e.preventDefault(),Up(t,n,u,c,Np);else if("Home"===r)e.preventDefault(),Up(t,null,u,c,Dp);else if("End"===r)e.preventDefault(),Up(t,null,u,c,Np);else if(1===r.length){const o=g.current,i=r.toLowerCase(),a=performance.now();o.keys.length>0&&(a-o.lastTime>500?(o.keys=[],o.repeating=!0,o.previousKeyMatched=!0):o.repeating&&i!==o.keys[0]&&(o.repeating=!1)),o.lastTime=a,o.keys.push(i);const s=n&&!o.repeating&&Bp(n,o);o.previousKeyMatched&&(s||Up(t,n,!1,c,Dp,o))?e.preventDefault():o.previousKeyMatched=!1}h&&h(e)},tabIndex:o?0:-1},f),{},{children:b}))}));function Wp(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function n(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];clearTimeout(t),t=setTimeout((()=>{e.apply(this,o)}),r)}return n.clear=()=>{clearTimeout(t)},n}const qp=Wp;function Hp(e){var r;return parseInt(t.version,10)>=19?(null===e||void 0===e||null===(r=e.props)||void 0===r?void 0:r.ref)||null:(null===e||void 0===e?void 0:e.ref)||null}var Gp=r(950);const Kp=!1;var Xp="unmounted",Zp="exited",Yp="entering",Jp="entered",$p="exiting",Qp=function(e){function r(t,r){var n;n=e.call(this,t,r)||this;var o,i=r&&!r.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?i?(o=Zp,n.appearStatus=Yp):o=Jp:o=t.unmountOnExit||t.mountOnEnter?Xp:Zp,n.state={status:o},n.nextCallback=null,n}rd(r,e),r.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Xp?{status:Zp}:null};var n=r.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var r=this.state.status;this.props.in?r!==Yp&&r!==Jp&&(t=Yp):r!==Yp&&r!==Jp||(t=$p)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,r,n=this.props.timeout;return e=t=r=n,null!=n&&"number"!==typeof n&&(e=n.exit,t=n.enter,r=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:r}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Yp){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:Gp.findDOMNode(this);r&&function(e){e.scrollTop}(r)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Zp&&this.setState({status:Xp})},n.performEnter=function(e){var t=this,r=this.props.enter,n=this.context?this.context.isMounting:e,o=this.props.nodeRef?[n]:[Gp.findDOMNode(this),n],i=o[0],a=o[1],s=this.getTimeouts(),l=n?s.appear:s.enter;!e&&!r||Kp?this.safeSetState({status:Jp},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,a),this.safeSetState({status:Yp},(function(){t.props.onEntering(i,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:Jp},(function(){t.props.onEntered(i,a)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,r=this.getTimeouts(),n=this.props.nodeRef?void 0:Gp.findDOMNode(this);t&&!Kp?(this.props.onExit(n),this.safeSetState({status:$p},(function(){e.props.onExiting(n),e.onTransitionEnd(r.exit,(function(){e.safeSetState({status:Zp},(function(){e.props.onExited(n)}))}))}))):this.safeSetState({status:Zp},(function(){e.props.onExited(n)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,r=!0;return this.nextCallback=function(n){r&&(r=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var r=this.props.nodeRef?this.props.nodeRef.current:Gp.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(r&&!n){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],i=o[0],a=o[1];this.props.addEndListener(i,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===Xp)return null;var r=this.props,n=r.children,o=(r.in,r.mountOnEnter,r.unmountOnExit,r.appear,r.enter,r.exit,r.timeout,r.addEndListener,r.onEnter,r.onEntering,r.onEntered,r.onExit,r.onExiting,r.onExited,r.nodeRef,i(r,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(nd.Provider,{value:null},"function"===typeof n?n(e,o):t.cloneElement(t.Children.only(n),o))},r}(t.Component);function ef(){}Qp.contextType=nd,Qp.propTypes={},Qp.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ef,onEntering:ef,onEntered:ef,onExit:ef,onExiting:ef,onExited:ef},Qp.UNMOUNTED=Xp,Qp.EXITED=Zp,Qp.ENTERING=Yp,Qp.ENTERED=Jp,Qp.EXITING=$p;const tf=Qp,rf=e=>e.scrollTop;function nf(e,t){var r,n;const{timeout:o,easing:i,style:a={}}=e;return{duration:null!==(r=a.transitionDuration)&&void 0!==r?r:"number"===typeof o?o:o[t.mode]||0,easing:null!==(n=a.transitionTimingFunction)&&void 0!==n?n:"object"===typeof i?i[t.mode]:i,delay:a.transitionDelay}}const of=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],af=["ownerState"];function sf(e){return"scale(".concat(e,", ").concat(e**2,")")}const lf={entering:{opacity:1,transform:sf(1)},entered:{opacity:1,transform:"none"}},cf="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),uf=t.forwardRef((function(e,r){const{addEndListener:n,appear:o=!0,children:i,easing:s,in:l,onEnter:c,onEntered:u,onEntering:h,onExit:p,onExited:f,onExiting:m,style:g,timeout:y="auto",TransitionComponent:v=tf}=e,b=a(e,of),x=hd(),_=t.useRef(),w=Lc(),S=t.useRef(null),k=Xu(S,Hp(i),r),T=e=>t=>{if(e){const r=S.current;void 0===t?e(r):e(r,t)}},E=T(h),C=T(((e,t)=>{rf(e);const{duration:r,delay:n,easing:o}=nf({style:g,timeout:y,easing:s},{mode:"enter"});let i;"auto"===y?(i=w.transitions.getAutoHeightDuration(e.clientHeight),_.current=i):i=r,e.style.transition=[w.transitions.create("opacity",{duration:i,delay:n}),w.transitions.create("transform",{duration:cf?i:.666*i,delay:n,easing:o})].join(","),c&&c(e,t)})),A=T(u),j=T(m),P=T((e=>{const{duration:t,delay:r,easing:n}=nf({style:g,timeout:y,easing:s},{mode:"exit"});let o;"auto"===y?(o=w.transitions.getAutoHeightDuration(e.clientHeight),_.current=o):o=t,e.style.transition=[w.transitions.create("opacity",{duration:o,delay:r}),w.transitions.create("transform",{duration:cf?o:.666*o,delay:cf?r:r||.333*o,easing:n})].join(","),e.style.opacity=0,e.style.transform=sf(.75),p&&p(e)})),I=T(f);return(0,St.jsx)(v,d(d({appear:o,in:l,nodeRef:S,onEnter:C,onEntered:A,onEntering:E,onExit:P,onExited:I,onExiting:j,addEndListener:e=>{"auto"===y&&x.start(_.current||0,e),n&&n(S.current,e)},timeout:"auto"===y?null:y},b),{},{children:(e,r)=>{let{ownerState:n}=r,o=a(r,af);return t.cloneElement(i,d({style:d(d(d({opacity:0,transform:sf(.75),visibility:"exited"!==e||l?void 0:"hidden"},lf[e]),g),i.props.style),ref:k},o))}}))}));uf&&(uf.muiSupportAuto=!0);const df=uf,hf=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function pf(e){const t=[],r=[];return Array.from(e.querySelectorAll(hf)).forEach(((e,n)=>{const o=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==o&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector('input[type="radio"]'.concat(t));let r=t('[name="'.concat(e.name,'"]:checked'));return r||(r=t('[name="'.concat(e.name,'"]'))),r!==e}(e))}(e)&&(0===o?t.push(e):r.push({documentOrder:n,tabIndex:o,node:e}))})),r.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function ff(){return!0}const mf=function(e){const{children:r,disableAutoFocus:n=!1,disableEnforceFocus:o=!1,disableRestoreFocus:i=!1,getTabbable:a=pf,isEnabled:s=ff,open:l}=e,c=t.useRef(!1),u=t.useRef(null),d=t.useRef(null),h=t.useRef(null),p=t.useRef(null),f=t.useRef(!1),m=t.useRef(null),g=Ku(Hp(r),m),y=t.useRef(null);t.useEffect((()=>{l&&m.current&&(f.current=!n)}),[n,l]),t.useEffect((()=>{if(!l||!m.current)return;const e=Ip(m.current);return m.current.contains(e.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex","-1"),f.current&&m.current.focus()),()=>{i||(h.current&&h.current.focus&&(c.current=!0,h.current.focus()),h.current=null)}}),[l]),t.useEffect((()=>{if(!l||!m.current)return;const e=Ip(m.current),t=t=>{y.current=t,!o&&s()&&"Tab"===t.key&&e.activeElement===m.current&&t.shiftKey&&(c.current=!0,d.current&&d.current.focus())},r=()=>{const t=m.current;if(null===t)return;if(!e.hasFocus()||!s()||c.current)return void(c.current=!1);if(t.contains(e.activeElement))return;if(o&&e.activeElement!==u.current&&e.activeElement!==d.current)return;if(e.activeElement!==p.current)p.current=null;else if(null!==p.current)return;if(!f.current)return;let r=[];if(e.activeElement!==u.current&&e.activeElement!==d.current||(r=a(m.current)),r.length>0){var n,i;const e=Boolean((null===(n=y.current)||void 0===n?void 0:n.shiftKey)&&"Tab"===(null===(i=y.current)||void 0===i?void 0:i.key)),t=r[0],o=r[r.length-1];"string"!==typeof t&&"string"!==typeof o&&(e?o.focus():t.focus())}else t.focus()};e.addEventListener("focusin",r),e.addEventListener("keydown",t,!0);const n=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&r()}),50);return()=>{clearInterval(n),e.removeEventListener("focusin",r),e.removeEventListener("keydown",t,!0)}}),[n,o,i,s,l,a]);const v=e=>{null===h.current&&(h.current=e.relatedTarget),f.current=!0};return(0,St.jsxs)(t.Fragment,{children:[(0,St.jsx)("div",{tabIndex:l?0:-1,onFocus:v,ref:u,"data-testid":"sentinelStart"}),t.cloneElement(r,{ref:g,onFocus:e=>{null===h.current&&(h.current=e.relatedTarget),f.current=!0,p.current=e.target;const t=r.props.onFocus;t&&t(e)}}),(0,St.jsx)("div",{tabIndex:l?0:-1,onFocus:v,ref:d,"data-testid":"sentinelEnd"})]})};const gf=t.forwardRef((function(e,r){const{children:n,container:o,disablePortal:i=!1}=e,[a,s]=t.useState(null),l=Ku(t.isValidElement(n)?Hp(n):null,r);if(jo((()=>{i||s(function(e){return"function"===typeof e?e():e}(o)||document.body)}),[o,i]),jo((()=>{if(a&&!i)return Gu(r,a),()=>{Gu(r,null)}}),[r,a,i]),i){if(t.isValidElement(n)){const e={ref:l};return t.cloneElement(n,e)}return n}return a?Gp.createPortal(n,a):a})),yf=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],vf=["ownerState"],bf={entering:{opacity:1},entered:{opacity:1}},xf=t.forwardRef((function(e,r){const n=Lc(),o={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:i,appear:s=!0,children:l,easing:c,in:u,onEnter:h,onEntered:p,onEntering:f,onExit:m,onExited:g,onExiting:y,style:v,timeout:b=o,TransitionComponent:x=tf}=e,_=a(e,yf),w=t.useRef(null),S=Xu(w,Hp(l),r),k=e=>t=>{if(e){const r=w.current;void 0===t?e(r):e(r,t)}},T=k(f),E=k(((e,t)=>{rf(e);const r=nf({style:v,timeout:b,easing:c},{mode:"enter"});e.style.webkitTransition=n.transitions.create("opacity",r),e.style.transition=n.transitions.create("opacity",r),h&&h(e,t)})),C=k(p),A=k(y),j=k((e=>{const t=nf({style:v,timeout:b,easing:c},{mode:"exit"});e.style.webkitTransition=n.transitions.create("opacity",t),e.style.transition=n.transitions.create("opacity",t),m&&m(e)})),P=k(g);return(0,St.jsx)(x,d(d({appear:s,in:u,nodeRef:w,onEnter:E,onEntered:C,onEntering:T,onExit:j,onExited:P,onExiting:A,addEndListener:e=>{i&&i(w.current,e)},timeout:b},_),{},{children:(e,r)=>{let{ownerState:n}=r,o=a(r,vf);return t.cloneElement(l,d({style:d(d(d({opacity:0,visibility:"exited"!==e||u?void 0:"hidden"},bf[e]),v),l.props.style),ref:S},o))}}))})),_f=xf;function wf(e){return iu("MuiBackdrop",e)}au("MuiBackdrop",["root","invisible"]);const Sf=["children","className","component","invisible","open","components","componentsProps","slotProps","slots","TransitionComponent","transitionDuration"],kf=Eu("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Tf=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiBackdrop"}),{children:n,className:o,component:i="div",invisible:s=!1,open:l,components:c={},componentsProps:u={},slotProps:h={},slots:p={},TransitionComponent:f,transitionDuration:m}=r,g=a(r,Sf),y=d(d({},r),{},{component:i,invisible:s}),v=(e=>{const{classes:t,invisible:r}=e;return du({root:["root",r&&"invisible"]},wf,t)})(y),b={slots:d({transition:f,root:c.Root},p),slotProps:d(d({},u),h)},[x,_]=Ih("root",{elementType:kf,externalForwardedProps:b,className:Wc(v.root,o),ownerState:y}),[w,S]=Ih("transition",{elementType:_f,externalForwardedProps:b,ownerState:y});return(0,St.jsx)(w,d(d(d({in:l,timeout:m},g),S),{},{children:(0,St.jsx)(x,d(d({"aria-hidden":!0},_),{},{classes:v,ref:t,children:n}))}))}));function Ef(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(((e,t)=>null==t?e:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];e.apply(this,n),t.apply(this,n)}),(()=>{}))}function Cf(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Af(e){return parseInt(Lp(e).getComputedStyle(e).paddingRight,10)||0}function jf(e,t,r,n,o){const i=[t,r,...n];[].forEach.call(e.children,(e=>{const t=!i.includes(e),r=!function(e){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),r="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||r}(e);t&&r&&Cf(e,o)}))}function Pf(e,t){let r=-1;return e.some(((e,n)=>!!t(e)&&(r=n,!0))),r}function If(e,t){const r=[],n=e.container;if(!t.disableScrollLock){if(function(e){const t=Ip(e);return t.body===e?Lp(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(n)){const e=Mp(Lp(n));r.push({value:n.style.paddingRight,property:"padding-right",el:n}),n.style.paddingRight="".concat(Af(n)+e,"px");const t=Ip(n).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{r.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight="".concat(Af(t)+e,"px")}))}let e;if(n.parentNode instanceof DocumentFragment)e=Ip(n).body;else{const t=n.parentElement,r=Lp(n);e="HTML"===(null===t||void 0===t?void 0:t.nodeName)&&"scroll"===r.getComputedStyle(t).overflowY?t:n}r.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{r.forEach((e=>{let{value:t,el:r,property:n}=e;t?r.style.setProperty(n,t):r.style.removeProperty(n)}))}}const Of=()=>{},Mf=new class{constructor(){this.modals=[],this.containers=[]}add(e,t){let r=this.modals.indexOf(e);if(-1!==r)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&Cf(e.modalRef,!1);const n=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);jf(t,e.mount,e.modalRef,n,!0);const o=Pf(this.containers,(e=>e.container===t));return-1!==o?(this.containers[o].modals.push(e),r):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:n}),r)}mount(e,t){const r=Pf(this.containers,(t=>t.modals.includes(e))),n=this.containers[r];n.restore||(n.restore=If(n,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=this.modals.indexOf(e);if(-1===r)return r;const n=Pf(this.containers,(t=>t.modals.includes(e))),o=this.containers[n];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(r,1),0===o.modals.length)o.restore&&o.restore(),e.modalRef&&Cf(e.modalRef,t),jf(o.container,e.mount,e.modalRef,o.hiddenSiblings,!1),this.containers.splice(n,1);else{const e=o.modals[o.modals.length-1];e.modalRef&&Cf(e.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};const Rf=function(e){const{container:r,disableEscapeKeyDown:n=!1,disableScrollLock:o=!1,closeAfterTransition:i=!1,onTransitionEnter:a,onTransitionExited:s,children:l,onClose:c,open:u,rootRef:h}=e,p=t.useRef({}),f=t.useRef(null),m=t.useRef(null),g=Ku(m,h),[y,v]=t.useState(!u),b=function(e){return!!e&&e.props.hasOwnProperty("in")}(l);let x=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(x=!1);const _=()=>(p.current.modalRef=m.current,p.current.mount=f.current,p.current),w=()=>{Mf.mount(_(),{disableScrollLock:o}),m.current&&(m.current.scrollTop=0)},S=Zu((()=>{const e=function(e){return"function"===typeof e?e():e}(r)||Ip(f.current).body;Mf.add(_(),e),m.current&&w()})),k=()=>Mf.isTopModal(_()),T=Zu((e=>{f.current=e,e&&(u&&k()?w():m.current&&Cf(m.current,x))})),E=t.useCallback((()=>{Mf.remove(_(),x)}),[x]);t.useEffect((()=>()=>{E()}),[E]),t.useEffect((()=>{u?S():b&&i||E()}),[u,E,b,i,S]);const C=e=>t=>{var r;null===(r=e.onKeyDown)||void 0===r||r.call(e,t),"Escape"===t.key&&229!==t.which&&k()&&(n||(t.stopPropagation(),c&&c(t,"escapeKeyDown")))},A=e=>t=>{var r;null===(r=e.onClick)||void 0===r||r.call(e,t),t.target===t.currentTarget&&c&&c(t,"backdropClick")};return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=Th(e);delete r.onTransitionEnter,delete r.onTransitionExited;const n=d(d({},r),t);return d(d({role:"presentation"},n),{},{onKeyDown:C(n),ref:g})},getBackdropProps:function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d(d({"aria-hidden":!0},e),{},{onClick:A(e),open:u})},getTransitionProps:()=>{var e,t;return{onEnter:Ef((()=>{v(!1),a&&a()}),null!==(e=null===l||void 0===l?void 0:l.props.onEnter)&&void 0!==e?e:Of),onExited:Ef((()=>{v(!0),s&&s(),i&&E()}),null!==(t=null===l||void 0===l?void 0:l.props.onExited)&&void 0!==t?t:Of)}},rootRef:g,portalRef:T,isTopModal:k,exited:y,hasTransition:b}};function Lf(e){return iu("MuiModal",e)}au("MuiModal",["root","hidden","backdrop"]);const Ff=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],zf=Eu("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.open&&r.exited&&t.hidden]}})(Au((e=>{let{theme:t}=e;return{position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:e=>{let{ownerState:t}=e;return!t.open&&t.exited},style:{visibility:"hidden"}}]}}))),Df=Eu(Tf,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),Nf=t.forwardRef((function(e,r){const n=Ta({name:"MuiModal",props:e}),{BackdropComponent:o=Df,BackdropProps:i,classes:s,className:l,closeAfterTransition:c=!1,children:u,container:h,component:p,components:f={},componentsProps:m={},disableAutoFocus:g=!1,disableEnforceFocus:y=!1,disableEscapeKeyDown:v=!1,disablePortal:b=!1,disableRestoreFocus:x=!1,disableScrollLock:_=!1,hideBackdrop:w=!1,keepMounted:S=!1,onBackdropClick:k,onClose:T,onTransitionEnter:E,onTransitionExited:C,open:A,slotProps:j={},slots:P={},theme:I}=n,O=a(n,Ff),M=d(d({},n),{},{closeAfterTransition:c,disableAutoFocus:g,disableEnforceFocus:y,disableEscapeKeyDown:v,disablePortal:b,disableRestoreFocus:x,disableScrollLock:_,hideBackdrop:w,keepMounted:S}),{getRootProps:R,getBackdropProps:L,getTransitionProps:F,portalRef:z,isTopModal:D,exited:N,hasTransition:B}=Rf(d(d({},M),{},{rootRef:r})),U=d(d({},M),{},{exited:N}),V=(e=>{const{open:t,exited:r,classes:n}=e;return du({root:["root",!t&&r&&"hidden"],backdrop:["backdrop"]},Lf,n)})(U),W={};if(void 0===u.props.tabIndex&&(W.tabIndex="-1"),B){const{onEnter:e,onExited:t}=F();W.onEnter=e,W.onExited=t}const q={slots:d({root:f.Root,backdrop:f.Backdrop},P),slotProps:d(d({},m),j)},[H,G]=Ih("root",{ref:r,elementType:zf,externalForwardedProps:d(d(d({},q),O),{},{component:p}),getSlotProps:R,ownerState:U,className:Wc(l,null===V||void 0===V?void 0:V.root,!U.open&&U.exited&&(null===V||void 0===V?void 0:V.hidden))}),[K,X]=Ih("backdrop",{ref:null===i||void 0===i?void 0:i.ref,elementType:o,externalForwardedProps:q,shouldForwardComponentProp:!0,additionalProps:i,getSlotProps:e=>L(d(d({},e),{},{onClick:t=>{k&&k(t),null!==e&&void 0!==e&&e.onClick&&e.onClick(t)}})),className:Wc(null===i||void 0===i?void 0:i.className,null===V||void 0===V?void 0:V.backdrop),ownerState:U});return S||A||B&&!N?(0,St.jsx)(gf,{ref:z,container:h,disablePortal:b,children:(0,St.jsxs)(H,d(d({},G),{},{children:[!w&&o?(0,St.jsx)(K,d({},X)):null,(0,St.jsx)(mf,{disableEnforceFocus:y,disableAutoFocus:g,disableRestoreFocus:x,isEnabled:D,open:A,children:t.cloneElement(u,W)})]}))}):null})),Bf=Nf;function Uf(e){return iu("MuiPopover",e)}au("MuiPopover",["root","paper"]);function Vf(e,t){if(!e)return t;if("function"===typeof e||"function"===typeof t)return r=>{const n="function"===typeof t?t(r):t,o="function"===typeof e?e(d(d({},r),n)):e,i=Wc(null===r||void 0===r?void 0:r.className,null===n||void 0===n?void 0:n.className,null===o||void 0===o?void 0:o.className);return d(d(d(d(d({},n),o),!!i&&{className:i}),(null===n||void 0===n?void 0:n.style)&&(null===o||void 0===o?void 0:o.style)&&{style:d(d({},n.style),o.style)}),(null===n||void 0===n?void 0:n.sx)&&(null===o||void 0===o?void 0:o.sx)&&{sx:[...Array.isArray(n.sx)?n.sx:[n.sx],...Array.isArray(o.sx)?o.sx:[o.sx]]})};const r=t,n=Wc(null===r||void 0===r?void 0:r.className,null===e||void 0===e?void 0:e.className);return d(d(d(d(d({},t),e),!!n&&{className:n}),(null===r||void 0===r?void 0:r.style)&&(null===e||void 0===e?void 0:e.style)&&{style:d(d({},r.style),e.style)}),(null===r||void 0===r?void 0:r.sx)&&(null===e||void 0===e?void 0:e.sx)&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]})}const Wf=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],qf=["slots","slotProps"];function Hf(e,t){let r=0;return"number"===typeof t?r=t:"center"===t?r=e.height/2:"bottom"===t&&(r=e.height),r}function Gf(e,t){let r=0;return"number"===typeof t?r=t:"center"===t?r=e.width/2:"right"===t&&(r=e.width),r}function Kf(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?"".concat(e,"px"):e)).join(" ")}function Xf(e){return"function"===typeof e?e():e}const Zf=Eu(Bf,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Yf=Eu($h,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Jf=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiPopover"}),{action:o,anchorEl:i,anchorOrigin:s={vertical:"top",horizontal:"left"},anchorPosition:l,anchorReference:c="anchorEl",children:u,className:h,container:p,elevation:f=8,marginThreshold:m=16,open:g,PaperProps:y={},slots:v={},slotProps:b={},transformOrigin:x={vertical:"top",horizontal:"left"},TransitionComponent:_,transitionDuration:w="auto",TransitionProps:S={},disableScrollLock:k=!1}=n,T=a(n,Wf),E=t.useRef(),C=d(d({},n),{},{anchorOrigin:s,anchorReference:c,elevation:f,marginThreshold:m,transformOrigin:x,TransitionComponent:_,transitionDuration:w,TransitionProps:S}),A=(e=>{const{classes:t}=e;return du({root:["root"],paper:["paper"]},Uf,t)})(C),j=t.useCallback((()=>{if("anchorPosition"===c)return l;const e=Xf(i),t=(e&&1===e.nodeType?e:Op(E.current).body).getBoundingClientRect();return{top:t.top+Hf(t,s.vertical),left:t.left+Gf(t,s.horizontal)}}),[i,s.horizontal,s.vertical,l,c]),P=t.useCallback((e=>({vertical:Hf(e,x.vertical),horizontal:Gf(e,x.horizontal)})),[x.horizontal,x.vertical]),I=t.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},r=P(t);if("none"===c)return{top:null,left:null,transformOrigin:Kf(r)};const n=j();let o=n.top-r.vertical,a=n.left-r.horizontal;const s=o+t.height,l=a+t.width,u=Fp(Xf(i)),d=u.innerHeight-m,h=u.innerWidth-m;if(null!==m&&o<m){const e=o-m;o-=e,r.vertical+=e}else if(null!==m&&s>d){const e=s-d;o-=e,r.vertical+=e}if(null!==m&&a<m){const e=a-m;a-=e,r.horizontal+=e}else if(l>h){const e=l-h;a-=e,r.horizontal+=e}return{top:"".concat(Math.round(o),"px"),left:"".concat(Math.round(a),"px"),transformOrigin:Kf(r)}}),[i,c,j,P,m]),[O,M]=t.useState(g),R=t.useCallback((()=>{const e=E.current;if(!e)return;const t=I(e);null!==t.top&&e.style.setProperty("top",t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,M(!0)}),[I]);t.useEffect((()=>(k&&window.addEventListener("scroll",R),()=>window.removeEventListener("scroll",R))),[i,k,R]);t.useEffect((()=>{g&&R()})),t.useImperativeHandle(o,(()=>g?{updatePosition:()=>{R()}}:null),[g,R]),t.useEffect((()=>{if(!g)return;const e=qp((()=>{R()})),t=Fp(i);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[i,g,R]);let L=w;const F={slots:d({transition:_},v),slotProps:d({transition:S,paper:y},b)},[z,D]=Ih("transition",{elementType:df,externalForwardedProps:F,ownerState:C,getSlotProps:e=>d(d({},e),{},{onEntering:(t,r)=>{var n;null===(n=e.onEntering)||void 0===n||n.call(e,t,r),R()},onExited:t=>{var r;null===(r=e.onExited)||void 0===r||r.call(e,t),M(!1)}}),additionalProps:{appear:!0,in:g}});"auto"!==w||z.muiSupportAuto||(L=void 0);const N=p||(i?Op(Xf(i)).body:void 0),[B,U]=Ih("root",{ref:r,elementType:Zf,externalForwardedProps:d(d({},F),T),shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:v.backdrop},slotProps:{backdrop:Vf("function"===typeof b.backdrop?b.backdrop(C):b.backdrop,{invisible:!0})},container:N,open:g},ownerState:C,className:Wc(A.root,h)}),{slots:V,slotProps:W}=U,q=a(U,qf),[H,G]=Ih("paper",{ref:E,className:A.paper,elementType:Yf,externalForwardedProps:F,shouldForwardComponentProp:!0,additionalProps:{elevation:f,style:O?void 0:{opacity:0}},ownerState:C});return(0,St.jsx)(B,d(d(d({},q),!Lh(B)&&{slots:V,slotProps:W,disableScrollLock:k}),{},{children:(0,St.jsx)(z,d(d({},D),{},{timeout:L,children:(0,St.jsx)(H,d(d({},G),{},{children:u}))}))}))})),$f=Jf;function Qf(e){return iu("MuiMenu",e)}au("MuiMenu",["root","paper","list"]);const em=["onEntering"],tm=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],rm={vertical:"top",horizontal:"right"},nm={vertical:"top",horizontal:"left"},om=Eu($f,{shouldForwardProp:e=>Tu(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),im=Eu(Yf,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),am=Eu(Vp,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),sm=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiMenu"}),{autoFocus:o=!0,children:i,className:s,disableAutoFocusItem:l=!1,MenuListProps:c={},onClose:u,open:h,PaperProps:p={},PopoverClasses:f,transitionDuration:m="auto",TransitionProps:{onEntering:g}={},variant:y="selectedMenu",slots:v={},slotProps:b={}}=n,x=a(n.TransitionProps,em),_=a(n,tm),w=rn(),S=d(d({},n),{},{autoFocus:o,disableAutoFocusItem:l,MenuListProps:c,onEntering:g,PaperProps:p,transitionDuration:m,TransitionProps:x,variant:y}),k=(e=>{const{classes:t}=e;return du({root:["root"],paper:["paper"],list:["list"]},Qf,t)})(S),T=o&&!l&&h,E=t.useRef(null);let C=-1;t.Children.map(i,((e,r)=>{t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===y&&e.props.selected||-1===C)&&(C=r))}));const A={slots:v,slotProps:d({list:c,transition:x,paper:p},b)},j=Pp({elementType:v.root,externalSlotProps:b.root,ownerState:S,className:[k.root,s]}),[P,I]=Ih("paper",{className:k.paper,elementType:im,externalForwardedProps:A,shouldForwardComponentProp:!0,ownerState:S}),[O,M]=Ih("list",{className:Wc(k.list,c.className),elementType:am,shouldForwardComponentProp:!0,externalForwardedProps:A,getSlotProps:e=>d(d({},e),{},{onKeyDown:t=>{var r;(e=>{"Tab"===e.key&&(e.preventDefault(),u&&u(e,"tabKeyDown"))})(t),null===(r=e.onKeyDown)||void 0===r||r.call(e,t)}}),ownerState:S}),R="function"===typeof A.slotProps.transition?A.slotProps.transition(S):A.slotProps.transition;return(0,St.jsx)(om,d(d({onClose:u,anchorOrigin:{vertical:"bottom",horizontal:w?"right":"left"},transformOrigin:w?rm:nm,slots:d({root:v.root,paper:P,backdrop:v.backdrop},v.transition&&{transition:v.transition}),slotProps:{root:j,paper:I,backdrop:"function"===typeof b.backdrop?b.backdrop(S):b.backdrop,transition:d(d({},R),{},{onEntering:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];((e,t)=>{E.current&&E.current.adjustStyleForScrollbar(e,{direction:w?"rtl":"ltr"}),g&&g(e,t)})(...r),null===R||void 0===R||null===(e=R.onEntering)||void 0===e||e.call(R,...r)}})},open:h,ref:r,transitionDuration:m,ownerState:S},_),{},{classes:f,children:(0,St.jsx)(O,d(d({actions:E,autoFocus:o&&(-1===C||l),autoFocusItem:T,variant:y},M),{},{children:i}))}))})),lm=sm;function cm(e){return iu("MuiListItemIcon",e)}const um=au("MuiListItemIcon",["root","alignItemsFlexStart"]);function dm(e){return iu("MuiMenuItem",e)}const hm=au("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),pm=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],fm=Eu(Od,{shouldForwardProp:e=>Tu(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.divider&&t.divider,!r.disableGutters&&t.gutters]}})(Au((e=>{let{theme:t}=e;return d(d({},t.typography.body1),{},{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(hm.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):Go(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(hm.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):Go(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(hm.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):Go(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):Go(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(hm.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(hm.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(nh.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(nh.inset)]:{marginLeft:52},["& .".concat(_h.root)]:{marginTop:0,marginBottom:0},["& .".concat(_h.inset)]:{paddingLeft:36},["& .".concat(um.root)]:{minWidth:36},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return!t.dense},style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:t}=e;return t.dense},style:d(d({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2),{},{["& .".concat(um.root," svg")]:{fontSize:"1.25rem"}})}]})}))),mm=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiMenuItem"}),{autoFocus:o=!1,component:i="li",dense:s=!1,divider:l=!1,disableGutters:c=!1,focusVisibleClassName:u,role:h="menuitem",tabIndex:p,className:f}=n,m=a(n,pm),g=t.useContext(ch),y=t.useMemo((()=>({dense:s||g.dense||!1,disableGutters:c})),[g.dense,s,c]),v=t.useRef(null);fh((()=>{o&&v.current&&v.current.focus()}),[o]);const b=d(d({},n),{},{dense:y.dense,divider:l,disableGutters:c}),x=(e=>{const{disabled:t,dense:r,divider:n,disableGutters:o,selected:i,classes:a}=e,s=du({root:["root",r&&"dense",t&&"disabled",!o&&"gutters",n&&"divider",i&&"selected"]},dm,a);return d(d({},a),s)})(n),_=Xu(v,r);let w;return n.disabled||(w=void 0!==p?p:-1),(0,St.jsx)(ch.Provider,{value:y,children:(0,St.jsx)(fm,d(d({ref:_,role:h,tabIndex:w,component:i,focusVisibleClassName:Wc(x.focusVisible,u),className:Wc(x.root,f)},m),{},{ownerState:b,classes:x}))})})),gm=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],ym=["ownerState"];function vm(e,t,r){var n;const o=function(e,t,r){const n=t.getBoundingClientRect(),o=r&&r.getBoundingClientRect(),i=Fp(t);let a;if(t.fakeTransform)a=t.fakeTransform;else{const e=i.getComputedStyle(t);a=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("transform")}let s=0,l=0;if(a&&"none"!==a&&"string"===typeof a){const e=a.split("(")[1].split(")")[0].split(",");s=parseInt(e[4],10),l=parseInt(e[5],10)}return"left"===e?"translateX(".concat(o?o.right+s-n.left:i.innerWidth+s-n.left,"px)"):"right"===e?"translateX(-".concat(o?n.right-o.left-s:n.left+n.width-s,"px)"):"up"===e?"translateY(".concat(o?o.bottom+l-n.top:i.innerHeight+l-n.top,"px)"):"translateY(-".concat(o?n.top-o.top+n.height-l:n.top+n.height-l,"px)")}(e,t,"function"===typeof(n=r)?n():n);o&&(t.style.webkitTransform=o,t.style.transform=o)}const bm=t.forwardRef((function(e,r){const n=Lc(),o={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:s,appear:l=!0,children:c,container:u,direction:h="down",easing:p=o,in:f,onEnter:m,onEntered:g,onEntering:y,onExit:v,onExited:b,onExiting:x,style:_,timeout:w=i,TransitionComponent:S=tf}=e,k=a(e,gm),T=t.useRef(null),E=Xu(Hp(c),T,r),C=e=>t=>{e&&(void 0===t?e(T.current):e(T.current,t))},A=C(((e,t)=>{vm(h,e,u),rf(e),m&&m(e,t)})),j=C(((e,t)=>{const r=nf({timeout:w,style:_,easing:p},{mode:"enter"});e.style.webkitTransition=n.transitions.create("-webkit-transform",d({},r)),e.style.transition=n.transitions.create("transform",d({},r)),e.style.webkitTransform="none",e.style.transform="none",y&&y(e,t)})),P=C(g),I=C(x),O=C((e=>{const t=nf({timeout:w,style:_,easing:p},{mode:"exit"});e.style.webkitTransition=n.transitions.create("-webkit-transform",t),e.style.transition=n.transitions.create("transform",t),vm(h,e,u),v&&v(e)})),M=C((e=>{e.style.webkitTransition="",e.style.transition="",b&&b(e)})),R=t.useCallback((()=>{T.current&&vm(h,T.current,u)}),[h,u]);return t.useEffect((()=>{if(f||"down"===h||"right"===h)return;const e=qp((()=>{T.current&&vm(h,T.current,u)})),t=Fp(T.current);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[h,f,u]),t.useEffect((()=>{f||R()}),[f,R]),(0,St.jsx)(S,d(d({nodeRef:T,onEnter:A,onEntered:P,onEntering:j,onExit:O,onExited:M,onExiting:I,addEndListener:e=>{s&&s(T.current,e)},appear:l,in:f,timeout:w},k),{},{children:(e,r)=>{let{ownerState:n}=r,o=a(r,ym);return t.cloneElement(c,d({ref:E,style:d(d({visibility:"exited"!==e||f?void 0:"hidden"},_),c.props.style)},o))}}))})),xm=bm;function _m(e){return iu("MuiDrawer",e)}au("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const wm=["BackdropProps"],Sm=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant","slots","slotProps"],km=(e,t)=>{const{ownerState:r}=e;return[t.root,("permanent"===r.variant||"persistent"===r.variant)&&t.docked,t.modal]},Tm=Eu(Bf,{name:"MuiDrawer",slot:"Root",overridesResolver:km})(Au((e=>{let{theme:t}=e;return{zIndex:(t.vars||t).zIndex.drawer}}))),Em=Eu("div",{shouldForwardProp:Tu,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:km})({flex:"0 0 auto"}),Cm=Eu($h,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t["paperAnchor".concat(ju(r.anchor))],"temporary"!==r.variant&&t["paperAnchorDocked".concat(ju(r.anchor))]]}})(Au((e=>{let{theme:t}=e;return{overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:e=>{let{ownerState:t}=e;return"left"===t.anchor&&"temporary"!==t.variant},style:{borderRight:"1px solid ".concat((t.vars||t).palette.divider)}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchor&&"temporary"!==t.variant},style:{borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}},{props:e=>{let{ownerState:t}=e;return"right"===t.anchor&&"temporary"!==t.variant},style:{borderLeft:"1px solid ".concat((t.vars||t).palette.divider)}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchor&&"temporary"!==t.variant},style:{borderTop:"1px solid ".concat((t.vars||t).palette.divider)}}]}}))),Am={left:"right",right:"left",top:"down",bottom:"up"};const jm=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiDrawer"}),o=Lc(),i=rn(),s={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{anchor:l="left",BackdropProps:c,children:u,className:h,elevation:p=16,hideBackdrop:f=!1,ModalProps:{BackdropProps:m}={},onClose:g,open:y=!1,PaperProps:v={},SlideProps:b,TransitionComponent:x,transitionDuration:_=s,variant:w="temporary",slots:S={},slotProps:k={}}=n,T=a(n.ModalProps,wm),E=a(n,Sm),C=t.useRef(!1);t.useEffect((()=>{C.current=!0}),[]);const A=function(e,t){let{direction:r}=e;return"rtl"===r&&function(e){return["left","right"].includes(e)}(t)?Am[t]:t}({direction:i?"rtl":"ltr"},l),j=l,P=d(d({},n),{},{anchor:j,elevation:p,open:y,variant:w},E),I=(e=>{const{classes:t,anchor:r,variant:n}=e;return du({root:["root","anchor".concat(ju(r))],docked:[("permanent"===n||"persistent"===n)&&"docked"],modal:["modal"],paper:["paper","paperAnchor".concat(ju(r)),"temporary"!==n&&"paperAnchorDocked".concat(ju(r))]},_m,t)})(P),O={slots:d({transition:x},S),slotProps:d(d({paper:v,transition:b},k),{},{backdrop:Vf(k.backdrop||d(d({},c),m),{transitionDuration:_})})},[M,R]=Ih("root",{ref:r,elementType:Tm,className:Wc(I.root,I.modal,h),shouldForwardComponentProp:!0,ownerState:P,externalForwardedProps:d(d(d({},O),E),T),additionalProps:{open:y,onClose:g,hideBackdrop:f,slots:{backdrop:O.slots.backdrop},slotProps:{backdrop:O.slotProps.backdrop}}}),[L,F]=Ih("paper",{elementType:Cm,shouldForwardComponentProp:!0,className:Wc(I.paper,v.className),ownerState:P,externalForwardedProps:O,additionalProps:{elevation:"temporary"===w?p:0,square:!0}}),[z,D]=Ih("docked",{elementType:Em,ref:r,className:Wc(I.root,I.docked,h),ownerState:P,externalForwardedProps:O,additionalProps:E}),[N,B]=Ih("transition",{elementType:xm,ownerState:P,externalForwardedProps:O,additionalProps:{in:y,direction:Am[A],timeout:_,appear:C.current}}),U=(0,St.jsx)(L,d(d({},F),{},{children:u}));if("permanent"===w)return(0,St.jsx)(z,d(d({},D),{},{children:U}));const V=(0,St.jsx)(N,d(d({},B),{},{children:U}));return"persistent"===w?(0,St.jsx)(z,d(d({},D),{},{children:V})):(0,St.jsx)(M,d(d({},R),{},{children:V}))})),Pm=jm;function Im(e){return iu("MuiSvgIcon",e)}au("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Om=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Mm=Eu("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,"inherit"!==r.color&&t["color".concat(ju(r.color))],t["fontSize".concat(ju(r.fontSize))]]}})(Au((e=>{var t,r,n,o,i,a,s,l,c,u,d,h,p,f,m;let{theme:g}=e;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:null===(t=g.transitions)||void 0===t||null===(r=t.create)||void 0===r?void 0:r.call(t,"fill",{duration:null===(n=(null!==(o=g.vars)&&void 0!==o?o:g).transitions)||void 0===n||null===(n=n.duration)||void 0===n?void 0:n.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:(null===(i=g.typography)||void 0===i||null===(a=i.pxToRem)||void 0===a?void 0:a.call(i,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:(null===(s=g.typography)||void 0===s||null===(l=s.pxToRem)||void 0===l?void 0:l.call(s,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:(null===(c=g.typography)||void 0===c||null===(u=c.pxToRem)||void 0===u?void 0:u.call(c,35))||"2.1875rem"}},...Object.entries((null!==(d=g.vars)&&void 0!==d?d:g).palette).filter((e=>{let[,t]=e;return t&&t.main})).map((e=>{var t,r;let[n]=e;return{props:{color:n},style:{color:null===(t=(null!==(r=g.vars)&&void 0!==r?r:g).palette)||void 0===t||null===(t=t[n])||void 0===t?void 0:t.main}}})),{props:{color:"action"},style:{color:null===(h=(null!==(p=g.vars)&&void 0!==p?p:g).palette)||void 0===h||null===(h=h.action)||void 0===h?void 0:h.active}},{props:{color:"disabled"},style:{color:null===(f=(null!==(m=g.vars)&&void 0!==m?m:g).palette)||void 0===f||null===(f=f.action)||void 0===f?void 0:f.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}}))),Rm=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiSvgIcon"}),{children:o,className:i,color:s="inherit",component:l="svg",fontSize:c="medium",htmlColor:u,inheritViewBox:h=!1,titleAccess:p,viewBox:f="0 0 24 24"}=n,m=a(n,Om),g=t.isValidElement(o)&&"svg"===o.type,y=d(d({},n),{},{color:s,component:l,fontSize:c,instanceFontSize:e.fontSize,inheritViewBox:h,viewBox:f,hasSvgAsChild:g}),v={};h||(v.viewBox=f);const b=(e=>{const{color:t,fontSize:r,classes:n}=e;return du({root:["root","inherit"!==t&&"color".concat(ju(t)),"fontSize".concat(ju(r))]},Im,n)})(y);return(0,St.jsxs)(Mm,d(d(d(d({as:l,className:Wc(b.root,i),focusable:"false",color:u,"aria-hidden":!p||void 0,role:p?"img":void 0,ref:r},v),m),g&&o.props),{},{ownerState:y,children:[g?o.props.children:o,p?(0,St.jsx)("title",{children:p}):null]}))}));Rm.muiName="SvgIcon";const Lm=Rm;function Fm(e,r){function n(t,n){return(0,St.jsx)(Lm,d(d({"data-testid":"".concat(r,"Icon"),ref:n},t),{},{children:e}))}return n.muiName=Lm.muiName,t.memo(t.forwardRef(n))}const zm=Fm((0,St.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"}),"AccountCircle"),Dm=Fm((0,St.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu"),Nm=Fm((0,St.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),Bm=()=>{const{user:e,logout:r}=wc(),n=he(),o=Lc(),i=Uc(o.breakpoints.down("md")),[a,s]=t.useState(null),[l,c]=t.useState(!1),u=()=>{s(null)},d=()=>{u(),r(),n("/login")},h=()=>{c(!l)},p=(0,St.jsxs)(uu,{sx:{width:250},children:[(0,St.jsxs)(uu,{sx:{p:2,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,St.jsx)(Bu,{variant:"h6",component:ht,to:"/",sx:{textDecoration:"none",color:"inherit"},children:"Stellar GeoLink"}),(0,St.jsx)(th,{onClick:h,children:(0,St.jsx)(Nm,{})})]}),(0,St.jsx)(lh,{}),(0,St.jsx)(ph,{children:e?(0,St.jsxs)(St.Fragment,{children:[(0,St.jsx)(bh,{component:ht,to:"/dashboard",onClick:h,children:(0,St.jsx)(Rh,{primary:"Dashboard"})}),"admin"===e.role&&(0,St.jsx)(bh,{component:ht,to:"/admin",onClick:h,children:(0,St.jsx)(Rh,{primary:"Admin"})}),("nft_manager"===e.role||"admin"===e.role)&&(0,St.jsx)(bh,{component:ht,to:"/analytics",onClick:h,children:(0,St.jsx)(Rh,{primary:"\ud83d\udcca Analytics"})}),(0,St.jsx)(lh,{}),(0,St.jsx)(Kh,{children:(0,St.jsx)(Rh,{primary:e.email,secondary:"Logged in"})}),(0,St.jsx)(bh,{component:ht,to:"/profile",onClick:h,children:(0,St.jsx)(Rh,{primary:"Profile"})}),(0,St.jsx)(bh,{onClick:()=>{h(),d()},children:(0,St.jsx)(Rh,{primary:"Logout"})})]}):(0,St.jsxs)(St.Fragment,{children:[(0,St.jsx)(bh,{component:ht,to:"/",onClick:h,children:(0,St.jsx)(Rh,{primary:"Home"})}),(0,St.jsx)(bh,{component:ht,to:"/features",onClick:h,children:(0,St.jsx)(Rh,{primary:"Features"})}),(0,St.jsx)(bh,{component:"a",href:"https://geolink-buavavc6gse5c9fw.westus-01.azurewebsites.net/docs",target:"_blank",rel:"noopener noreferrer",onClick:h,children:(0,St.jsx)(Rh,{primary:"\ud83d\udcda API Documentation"})}),(0,St.jsx)(bh,{component:ht,to:"/register",onClick:h,children:(0,St.jsx)(Rh,{primary:"Sign Up"})}),(0,St.jsx)(bh,{component:ht,to:"/login",onClick:h,children:(0,St.jsx)(Rh,{primary:"Login"})})]})})]});return(0,St.jsxs)(op,{position:"static",children:[(0,St.jsx)(dp,{maxWidth:"xl",children:(0,St.jsxs)(mp,{disableGutters:!0,children:[(0,St.jsx)(Bu,{variant:"h6",component:ht,to:"/",sx:{flexGrow:1,textDecoration:"none",color:"inherit",fontSize:{xs:"1rem",sm:"1.25rem"}},children:"Stellar GeoLink"}),i?(0,St.jsx)(th,{color:"inherit","aria-label":"open drawer",edge:"end",onClick:h,sx:{ml:2},children:(0,St.jsx)(Dm,{})}):(0,St.jsx)(St.Fragment,{children:e?(0,St.jsxs)(uu,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,St.jsx)(Ap,{color:"inherit",component:ht,to:"/dashboard",size:"small",children:"Dashboard"}),"admin"===e.role&&(0,St.jsx)(Ap,{color:"inherit",component:ht,to:"/admin",size:"small",children:"Admin"}),("nft_manager"===e.role||"admin"===e.role)&&(0,St.jsx)(Ap,{color:"inherit",component:ht,to:"/analytics",size:"small",children:"\ud83d\udcca Analytics"}),(0,St.jsx)(th,{size:"large",onClick:e=>{s(e.currentTarget)},color:"inherit",children:(0,St.jsx)(zm,{})}),(0,St.jsxs)(lm,{anchorEl:a,open:Boolean(a),onClose:u,children:[(0,St.jsx)(mm,{children:e.email}),(0,St.jsx)(mm,{component:ht,to:"/profile",onClick:u,children:"Profile"}),(0,St.jsx)(mm,{onClick:d,children:"Logout"})]})]}):(0,St.jsxs)(uu,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,St.jsx)(Ap,{color:"inherit",component:ht,to:"/",size:"small",children:"Home"}),(0,St.jsx)(Ap,{color:"inherit",component:ht,to:"/features",size:"small",children:"Features"}),(0,St.jsx)(Ap,{color:"inherit",component:"a",href:"https://geolink-buavavc6gse5c9fw.westus-01.azurewebsites.net/docs",target:"_blank",rel:"noopener noreferrer",size:"small",children:"\ud83d\udcda API Docs"}),(0,St.jsx)(Ap,{color:"inherit",component:ht,to:"/register",variant:"outlined",size:"small",sx:{mr:1},children:"Sign Up"}),(0,St.jsx)(Ap,{color:"inherit",component:ht,to:"/login",variant:"outlined",size:"small",children:"Login"})]})})]})}),(0,St.jsx)(Pm,{variant:"temporary",anchor:"right",open:l,onClose:h,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",md:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:250}},children:p})]})};const Um=t.createContext();function Vm(e){return iu("MuiGrid",e)}const Wm=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],qm=au("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((e=>"spacing-xs-".concat(e))),...["column-reverse","column","row-reverse","row"].map((e=>"direction-xs-".concat(e))),...["nowrap","wrap-reverse","wrap"].map((e=>"wrap-xs-".concat(e))),...Wm.map((e=>"grid-xs-".concat(e))),...Wm.map((e=>"grid-sm-".concat(e))),...Wm.map((e=>"grid-md-".concat(e))),...Wm.map((e=>"grid-lg-".concat(e))),...Wm.map((e=>"grid-xl-".concat(e)))]),Hm=qm,Gm=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function Km(e){let{breakpoints:t,values:r}=e,n="";Object.keys(r).forEach((e=>{""===n&&0!==r[e]&&(n=e)}));const o=Object.keys(t).sort(((e,r)=>t[e]-t[r]));return o.slice(0,o.indexOf(n))}const Xm=Eu("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e,{container:n,direction:o,item:i,spacing:a,wrap:s,zeroMinWidth:l,breakpoints:c}=r;let u=[];n&&(u=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[r["spacing-xs-".concat(String(e))]];const n=[];return t.forEach((t=>{const o=e[t];Number(o)>0&&n.push(r["spacing-".concat(t,"-").concat(String(o))])})),n}(a,c,t));const d=[];return c.forEach((e=>{const n=r[e];n&&d.push(t["grid-".concat(e,"-").concat(String(n))])})),[t.root,n&&t.container,i&&t.item,l&&t.zeroMinWidth,...u,"row"!==o&&t["direction-xs-".concat(String(o))],"wrap"!==s&&t["wrap-xs-".concat(String(s))],...d]}})((e=>{let{ownerState:t}=e;return d(d(d(d({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"}),t.item&&{margin:0}),t.zeroMinWidth&&{minWidth:0}),"wrap"!==t.wrap&&{flexWrap:t.wrap})}),(function(e){let{theme:t,ownerState:r}=e;return Tn({theme:t},An({values:r.direction,breakpoints:t.breakpoints.values}),(e=>{const t={flexDirection:e};return e.startsWith("column")&&(t["& > .".concat(Hm.item)]={maxWidth:"none"}),t}))}),(function(e){let{theme:t,ownerState:r}=e;const{container:n,rowSpacing:o}=r;let i={};if(n&&0!==o){const e=An({values:o,breakpoints:t.breakpoints.values});let r;"object"===typeof e&&(r=Km({breakpoints:t.breakpoints.values,values:e})),i=Tn({theme:t},e,((e,n)=>{var o;const i=t.spacing(e);return"0px"!==i?{marginTop:"calc(-1 * ".concat(i,")"),["& > .".concat(Hm.item)]:{paddingTop:i}}:null!==(o=r)&&void 0!==o&&o.includes(n)?{}:{marginTop:0,["& > .".concat(Hm.item)]:{paddingTop:0}}}))}return i}),(function(e){let{theme:t,ownerState:r}=e;const{container:n,columnSpacing:o}=r;let i={};if(n&&0!==o){const e=An({values:o,breakpoints:t.breakpoints.values});let r;"object"===typeof e&&(r=Km({breakpoints:t.breakpoints.values,values:e})),i=Tn({theme:t},e,((e,n)=>{var o;const i=t.spacing(e);if("0px"!==i){const e="calc(-1 * ".concat(i,")");return{width:"calc(100% + ".concat(i,")"),marginLeft:e,["& > .".concat(Hm.item)]:{paddingLeft:i}}}return null!==(o=r)&&void 0!==o&&o.includes(n)?{}:{width:"100%",marginLeft:0,["& > .".concat(Hm.item)]:{paddingLeft:0}}}))}return i}),(function(e){let t,{theme:r,ownerState:n}=e;return r.breakpoints.keys.reduce(((e,o)=>{let i={};if(n[o]&&(t=n[o]),!t)return e;if(!0===t)i={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)i={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const a=An({values:n.columns,breakpoints:r.breakpoints.values}),s="object"===typeof a?a[o]:a;if(void 0===s||null===s)return e;const l="".concat(Math.round(t/s*1e8)/1e6,"%");let c={};if(n.container&&n.item&&0!==n.columnSpacing){const e=r.spacing(n.columnSpacing);if("0px"!==e){const t="calc(".concat(l," + ").concat(e,")");c={flexBasis:t,maxWidth:t}}}i=d({flexBasis:l,flexGrow:0,maxWidth:l},c)}return 0===r.breakpoints.values[o]?Object.assign(e,i):e[r.breakpoints.up(o)]=i,e}),{})}));const Zm=e=>{const{classes:t,container:r,direction:n,item:o,spacing:i,wrap:a,zeroMinWidth:s,breakpoints:l}=e;let c=[];r&&(c=function(e,t){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return["spacing-xs-".concat(String(e))];const r=[];return t.forEach((t=>{const n=e[t];if(Number(n)>0){const e="spacing-".concat(t,"-").concat(String(n));r.push(e)}})),r}(i,l));const u=[];l.forEach((t=>{const r=e[t];r&&u.push("grid-".concat(t,"-").concat(String(r)))}));return du({root:["root",r&&"container",o&&"item",s&&"zeroMinWidth",...c,"row"!==n&&"direction-xs-".concat(String(n)),"wrap"!==a&&"wrap-xs-".concat(String(a)),...u]},Vm,t)},Ym=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiGrid"}),{breakpoints:o}=Lc(),i=va(n),{className:s,columns:l,columnSpacing:c,component:u="div",container:h=!1,direction:p="row",item:f=!1,rowSpacing:m,spacing:g=0,wrap:y="wrap",zeroMinWidth:v=!1}=i,b=a(i,Gm),x=m||g,_=c||g,w=t.useContext(Um),S=h?l||12:w,k={},T=d({},b);o.keys.forEach((e=>{null!=b[e]&&(k[e]=b[e],delete T[e])}));const E=d(d(d({},i),{},{columns:S,container:h,direction:p,item:f,rowSpacing:x,columnSpacing:_,wrap:y,zeroMinWidth:v,spacing:g},k),{},{breakpoints:o.keys}),C=Zm(E);return(0,St.jsx)(Um.Provider,{value:S,children:(0,St.jsx)(Xm,d({ownerState:E,className:Wc(C.root,s),as:u,ref:r},T))})}));const Jm=Ym;function $m(e){return iu("MuiCard",e)}au("MuiCard",["root"]);const Qm=["className","raised"],eg=Eu($h,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})({overflow:"hidden"}),tg=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiCard"}),{className:n,raised:o=!1}=r,i=a(r,Qm),s=d(d({},r),{},{raised:o}),l=(e=>{const{classes:t}=e;return du({root:["root"]},$m,t)})(s);return(0,St.jsx)(eg,d({className:Wc(l.root,n),elevation:o?8:void 0,ref:t,ownerState:s},i))}));function rg(e){return iu("MuiCardContent",e)}au("MuiCardContent",["root"]);const ng=["className","component"],og=Eu("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:16,"&:last-child":{paddingBottom:24}}),ig=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiCardContent"}),{className:n,component:o="div"}=r,i=a(r,ng),s=d(d({},r),{},{component:o}),l=(e=>{const{classes:t}=e;return du({root:["root"]},rg,t)})(s);return(0,St.jsx)(og,d({as:o,className:Wc(l.root,n),ownerState:s,ref:t},i))})),ag=["className"],sg=Eu("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,"flex-start"===r.alignItems&&t.alignItemsFlexStart]}})(Au((e=>{let{theme:t}=e;return{minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}}))),lg=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiListItemIcon"}),{className:o}=n,i=a(n,ag),s=t.useContext(ch),l=d(d({},n),{},{alignItems:s.alignItems}),c=(e=>{const{alignItems:t,classes:r}=e;return du({root:["root","flex-start"===t&&"alignItemsFlexStart"]},cm,r)})(l);return(0,St.jsx)(sg,d({className:Wc(c.root,o),ownerState:l,ref:r},i))})),cg=Fm((0,St.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function ug(e){return iu("MuiChip",e)}const dg=au("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),hg=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],pg=Eu("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e,{color:n,iconColor:o,clickable:i,onDelete:a,size:s,variant:l}=r;return[{["& .".concat(dg.avatar)]:t.avatar},{["& .".concat(dg.avatar)]:t["avatar".concat(ju(s))]},{["& .".concat(dg.avatar)]:t["avatarColor".concat(ju(n))]},{["& .".concat(dg.icon)]:t.icon},{["& .".concat(dg.icon)]:t["icon".concat(ju(s))]},{["& .".concat(dg.icon)]:t["iconColor".concat(ju(o))]},{["& .".concat(dg.deleteIcon)]:t.deleteIcon},{["& .".concat(dg.deleteIcon)]:t["deleteIcon".concat(ju(s))]},{["& .".concat(dg.deleteIcon)]:t["deleteIconColor".concat(ju(n))]},{["& .".concat(dg.deleteIcon)]:t["deleteIcon".concat(ju(l),"Color").concat(ju(n))]},t.root,t["size".concat(ju(s))],t["color".concat(ju(n))],i&&t.clickable,i&&"default"!==n&&t["clickableColor".concat(ju(n),")")],a&&t.deletable,a&&"default"!==n&&t["deletableColor".concat(ju(n))],t[l],t["".concat(l).concat(ju(n))]]}})(Au((e=>{let{theme:t}=e;const r="light"===t.palette.mode?t.palette.grey[700]:t.palette.grey[300];return{maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",["&.".concat(dg.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},["& .".concat(dg.avatar)]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:r,fontSize:t.typography.pxToRem(12)},["& .".concat(dg.avatarColorPrimary)]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},["& .".concat(dg.avatarColorSecondary)]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},["& .".concat(dg.avatarSmall)]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},["& .".concat(dg.icon)]:{marginLeft:5,marginRight:-6},["& .".concat(dg.deleteIcon)]:{WebkitTapHighlightColor:"transparent",color:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / 0.26)"):Go(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / 0.4)"):Go(t.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,["& .".concat(dg.icon)]:{fontSize:18,marginLeft:4,marginRight:-4},["& .".concat(dg.deleteIcon)]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(t.palette).filter(Pu(["contrastText"])).map((e=>{let[r]=e;return{props:{color:r},style:{backgroundColor:(t.vars||t).palette[r].main,color:(t.vars||t).palette[r].contrastText,["& .".concat(dg.deleteIcon)]:{color:t.vars?"rgba(".concat(t.vars.palette[r].contrastTextChannel," / 0.7)"):Go(t.palette[r].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[r].contrastText}}}}})),{props:e=>e.iconColor===e.color,style:{["& .".concat(dg.icon)]:{color:t.vars?t.vars.palette.Chip.defaultIconColor:r}}},{props:e=>e.iconColor===e.color&&"default"!==e.color,style:{["& .".concat(dg.icon)]:{color:"inherit"}}},{props:{onDelete:!0},style:{["&.".concat(dg.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):Go(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}}},...Object.entries(t.palette).filter(Pu(["dark"])).map((e=>{let[r]=e;return{props:{color:r,onDelete:!0},style:{["&.".concat(dg.focusVisible)]:{background:(t.vars||t).palette[r].dark}}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):Go(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},["&.".concat(dg.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):Go(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}}},...Object.entries(t.palette).filter(Pu(["dark"])).map((e=>{let[r]=e;return{props:{color:r,clickable:!0},style:{["&:hover, &.".concat(dg.focusVisible)]:{backgroundColor:(t.vars||t).palette[r].dark}}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:t.vars?"1px solid ".concat(t.vars.palette.Chip.defaultBorder):"1px solid ".concat("light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[700]),["&.".concat(dg.clickable,":hover")]:{backgroundColor:(t.vars||t).palette.action.hover},["&.".concat(dg.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["& .".concat(dg.avatar)]:{marginLeft:4},["& .".concat(dg.avatarSmall)]:{marginLeft:2},["& .".concat(dg.icon)]:{marginLeft:4},["& .".concat(dg.iconSmall)]:{marginLeft:2},["& .".concat(dg.deleteIcon)]:{marginRight:5},["& .".concat(dg.deleteIconSmall)]:{marginRight:3}}},...Object.entries(t.palette).filter(Pu()).map((e=>{let[r]=e;return{props:{variant:"outlined",color:r},style:{color:(t.vars||t).palette[r].main,border:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette[r].mainChannel," / 0.7)"):Go(t.palette[r].main,.7)),["&.".concat(dg.clickable,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[r].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Go(t.palette[r].main,t.palette.action.hoverOpacity)},["&.".concat(dg.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[r].mainChannel," / ").concat(t.vars.palette.action.focusOpacity,")"):Go(t.palette[r].main,t.palette.action.focusOpacity)},["& .".concat(dg.deleteIcon)]:{color:t.vars?"rgba(".concat(t.vars.palette[r].mainChannel," / 0.7)"):Go(t.palette[r].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[r].main}}}}}))]}}))),fg=Eu("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:r}=e,{size:n}=r;return[t.label,t["label".concat(ju(n))]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function mg(e){return"Backspace"===e.key||"Delete"===e.key}const gg=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiChip"}),{avatar:o,className:i,clickable:s,color:l="default",component:c,deleteIcon:u,disabled:h=!1,icon:p,label:f,onClick:m,onDelete:g,onKeyDown:y,onKeyUp:v,size:b="medium",variant:x="filled",tabIndex:_,skipFocusWhenDisabled:w=!1}=n,S=a(n,hg),k=t.useRef(null),T=Xu(k,r),E=e=>{e.stopPropagation(),g&&g(e)},C=!(!1===s||!m)||s,A=C||g?Od:c||"div",j=d(d({},n),{},{component:A,disabled:h,size:b,color:l,iconColor:t.isValidElement(p)&&p.props.color||l,onDelete:!!g,clickable:C,variant:x}),P=(e=>{const{classes:t,disabled:r,size:n,color:o,iconColor:i,onDelete:a,clickable:s,variant:l}=e;return du({root:["root",l,r&&"disabled","size".concat(ju(n)),"color".concat(ju(o)),s&&"clickable",s&&"clickableColor".concat(ju(o)),a&&"deletable",a&&"deletableColor".concat(ju(o)),"".concat(l).concat(ju(o))],label:["label","label".concat(ju(n))],avatar:["avatar","avatar".concat(ju(n)),"avatarColor".concat(ju(o))],icon:["icon","icon".concat(ju(n)),"iconColor".concat(ju(i))],deleteIcon:["deleteIcon","deleteIcon".concat(ju(n)),"deleteIconColor".concat(ju(o)),"deleteIcon".concat(ju(l),"Color").concat(ju(o))]},ug,t)})(j),I=A===Od?d({component:c||"div",focusVisibleClassName:P.focusVisible},g&&{disableRipple:!0}):{};let O=null;g&&(O=u&&t.isValidElement(u)?t.cloneElement(u,{className:Wc(u.props.className,P.deleteIcon),onClick:E}):(0,St.jsx)(cg,{className:Wc(P.deleteIcon),onClick:E}));let M=null;o&&t.isValidElement(o)&&(M=t.cloneElement(o,{className:Wc(P.avatar,o.props.className)}));let R=null;return p&&t.isValidElement(p)&&(R=t.cloneElement(p,{className:Wc(P.icon,p.props.className)})),(0,St.jsxs)(pg,d(d(d({as:A,className:Wc(P.root,i),disabled:!(!C||!h)||void 0,onClick:m,onKeyDown:e=>{e.currentTarget===e.target&&mg(e)&&e.preventDefault(),y&&y(e)},onKeyUp:e=>{e.currentTarget===e.target&&g&&mg(e)&&g(e),v&&v(e)},ref:T,tabIndex:w&&h?-1:_,ownerState:j},I),S),{},{children:[M||R,(0,St.jsx)(fg,{className:Wc(P.label),ownerState:j,children:f}),O]}))})),yg=gg,vg=Fm((0,St.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn"),bg=Fm((0,St.jsx)("path",{d:"m20.38 8.57-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83"}),"Speed"),xg=Fm((0,St.jsx)("path",{d:"M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2"}),"Timeline"),_g=Fm((0,St.jsx)("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5M15 19l-6-2.11V5l6 2.11z"}),"Map"),wg=Fm((0,St.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11z"}),"Security"),Sg=Fm((0,St.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications"),kg=Fm((0,St.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5z"}),"Shield"),Tg=Fm((0,St.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39"}),"Public"),Eg=Fm((0,St.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-5h2zm4 0h-2v-3h2zm0-5h-2v-2h2zm4 5h-2V7h2z"}),"Analytics"),Cg=Fm((0,St.jsx)("path",{d:"M3 13h8V3H3zm0 8h8v-6H3zm10 0h8V11h-8zm0-18v6h8V3z"}),"Dashboard"),Ag=Fm((0,St.jsx)("path",{d:"M4 10h3v7H4zm6.5 0h3v7h-3zM2 19h20v3H2zm15-9h3v7h-3zm-5-9L2 6v2h20V6z"}),"AccountBalance"),jg=Fm((0,St.jsx)("path",{d:"m14 12-2 2-2-2 2-2zm-2-6 2.12 2.12 2.5-2.5L12 1 7.38 5.62l2.5 2.5zm-6 6 2.12-2.12-2.5-2.5L1 12l4.62 4.62 2.5-2.5zm12 0-2.12 2.12 2.5 2.5L23 12l-4.62-4.62-2.5 2.5zm-6 6-2.12-2.12-2.5 2.5L12 23l4.62-4.62-2.5-2.5z"}),"Api");function Pg(e){return iu("MuiDialog",e)}const Ig=au("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);const Og=t.createContext({}),Mg=["aria-describedby","aria-labelledby","aria-modal","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","slots","slotProps","TransitionComponent","transitionDuration","TransitionProps"],Rg=Eu(Tf,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),Lg=Eu(Bf,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),Fg=Eu("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.container,t["scroll".concat(ju(r.scroll))]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),zg=Eu($h,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t["scrollPaper".concat(ju(r.scroll))],t["paperWidth".concat(ju(String(r.maxWidth)))],r.fullWidth&&t.paperFullWidth,r.fullScreen&&t.paperFullScreen]}})(Au((e=>{let{theme:t}=e;return{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:e=>{let{ownerState:t}=e;return!t.maxWidth},style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):"max(".concat(t.breakpoints.values.xs).concat(t.breakpoints.unit,", 444px)"),["&.".concat(Ig.paperScrollBody)]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter((e=>"xs"!==e)).map((e=>({props:{maxWidth:e},style:{maxWidth:"".concat(t.breakpoints.values[e]).concat(t.breakpoints.unit),["&.".concat(Ig.paperScrollBody)]:{[t.breakpoints.down(t.breakpoints.values[e]+64)]:{maxWidth:"calc(100% - 64px)"}}}}))),{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{width:"calc(100% - 64px)"}},{props:e=>{let{ownerState:t}=e;return t.fullScreen},style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,["&.".concat(Ig.paperScrollBody)]:{margin:0,maxWidth:"100%"}}}]}}))),Dg=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiDialog"}),o=Lc(),i={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{"aria-describedby":s,"aria-labelledby":l,"aria-modal":c=!0,BackdropComponent:u,BackdropProps:h,children:p,className:f,disableEscapeKeyDown:m=!1,fullScreen:g=!1,fullWidth:y=!1,maxWidth:v="sm",onBackdropClick:b,onClick:x,onClose:_,open:w,PaperComponent:S=$h,PaperProps:k={},scroll:T="paper",slots:E={},slotProps:C={},TransitionComponent:A=_f,transitionDuration:j=i,TransitionProps:P}=n,I=a(n,Mg),O=d(d({},n),{},{disableEscapeKeyDown:m,fullScreen:g,fullWidth:y,maxWidth:v,scroll:T}),M=(e=>{const{classes:t,scroll:r,maxWidth:n,fullWidth:o,fullScreen:i}=e;return du({root:["root"],container:["container","scroll".concat(ju(r))],paper:["paper","paperScroll".concat(ju(r)),"paperWidth".concat(ju(String(n))),o&&"paperFullWidth",i&&"paperFullScreen"]},Pg,t)})(O),R=t.useRef(),L=Wu(l),F=t.useMemo((()=>({titleId:L})),[L]),z={slots:d({transition:A},E),slotProps:d({transition:P,paper:k,backdrop:h},C)},[D,N]=Ih("root",{elementType:Lg,shouldForwardComponentProp:!0,externalForwardedProps:z,ownerState:O,className:Wc(M.root,f),ref:r}),[B,U]=Ih("backdrop",{elementType:Rg,shouldForwardComponentProp:!0,externalForwardedProps:z,ownerState:O}),[V,W]=Ih("paper",{elementType:zg,shouldForwardComponentProp:!0,externalForwardedProps:z,ownerState:O,className:Wc(M.paper,k.className)}),[q,H]=Ih("container",{elementType:Fg,externalForwardedProps:z,ownerState:O,className:Wc(M.container)}),[G,K]=Ih("transition",{elementType:_f,externalForwardedProps:z,ownerState:O,additionalProps:{appear:!0,in:w,timeout:j,role:"presentation"}});return(0,St.jsx)(D,d(d(d({closeAfterTransition:!0,slots:{backdrop:B},slotProps:{backdrop:d({transitionDuration:j,as:u},U)},disableEscapeKeyDown:m,onClose:_,open:w,onClick:e=>{x&&x(e),R.current&&(R.current=null,b&&b(e),_&&_(e,"backdropClick"))}},N),I),{},{children:(0,St.jsx)(G,d(d({},K),{},{children:(0,St.jsx)(q,d(d({onMouseDown:e=>{R.current=e.target===e.currentTarget}},H),{},{children:(0,St.jsx)(V,d(d({as:S,elevation:24,role:"dialog","aria-describedby":s,"aria-labelledby":L,"aria-modal":c},W),{},{children:(0,St.jsx)(Og.Provider,{value:F,children:p})}))}))}))}))})),Ng=Dg;function Bg(e){return iu("MuiDialogTitle",e)}const Ug=au("MuiDialogTitle",["root"]),Vg=["className","id"],Wg=Eu(Bu,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),qg=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiDialogTitle"}),{className:o,id:i}=n,s=a(n,Vg),l=n,c=(e=>{const{classes:t}=e;return du({root:["root"]},Bg,t)})(l),{titleId:u=i}=t.useContext(Og);return(0,St.jsx)(Wg,d({component:"h2",className:Wc(c.root,o),ownerState:l,ref:r,variant:"h6",id:null!==i&&void 0!==i?i:u},s))})),Hg=["onChange","maxRows","minRows","style","value"];function Gg(e){return parseInt(e,10)||0}const Kg={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function Xg(e){return function(e){for(const t in e)return!1;return!0}(e)||0===e.outerHeightStyle&&!e.overflowing}const Zg=t.forwardRef((function(e,r){const{onChange:n,maxRows:o,minRows:i=1,style:s,value:l}=e,c=a(e,Hg),{current:u}=t.useRef(null!=l),h=t.useRef(null),p=Ku(r,h),f=t.useRef(null),m=t.useRef(null),g=t.useCallback((()=>{const t=h.current,r=m.current;if(!t||!r)return;const n=Lp(t).getComputedStyle(t);if("0px"===n.width)return{outerHeightStyle:0,overflowing:!1};r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");const a=n.boxSizing,s=Gg(n.paddingBottom)+Gg(n.paddingTop),l=Gg(n.borderBottomWidth)+Gg(n.borderTopWidth),c=r.scrollHeight;r.value="x";const u=r.scrollHeight;let d=c;i&&(d=Math.max(Number(i)*u,d)),o&&(d=Math.min(Number(o)*u,d)),d=Math.max(d,u);return{outerHeightStyle:d+("border-box"===a?s+l:0),overflowing:Math.abs(d-c)<=1}}),[o,i,e.placeholder]),y=Zu((()=>{const e=h.current,t=g();if(!e||!t||Xg(t))return!1;const r=t.outerHeightStyle;return null!=f.current&&f.current!==r})),v=t.useCallback((()=>{const e=h.current,t=g();if(!e||!t||Xg(t))return;const r=t.outerHeightStyle;f.current!==r&&(f.current=r,e.style.height="".concat(r,"px")),e.style.overflow=t.overflowing?"hidden":""}),[g]),b=t.useRef(-1);jo((()=>{const e=Wp(v),t=null===h||void 0===h?void 0:h.current;if(!t)return;const r=Lp(t);let n;return r.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(n=new ResizeObserver((()=>{y()&&(n.unobserve(t),cancelAnimationFrame(b.current),v(),b.current=requestAnimationFrame((()=>{n.observe(t)})))})),n.observe(t)),()=>{e.clear(),cancelAnimationFrame(b.current),r.removeEventListener("resize",e),n&&n.disconnect()}}),[g,v,y]),jo((()=>{v()}));return(0,St.jsxs)(t.Fragment,{children:[(0,St.jsx)("textarea",d({value:l,onChange:e=>{u||v(),n&&n(e)},ref:p,rows:i,style:s},c)),(0,St.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:m,tabIndex:-1,style:d(d(d({},Kg),s),{},{paddingTop:0,paddingBottom:0})})]})})),Yg=Zg;function Jg(e){let{props:t,states:r,muiFormControl:n}=e;return r.reduce(((e,r)=>(e[r]=t[r],n&&"undefined"===typeof t[r]&&(e[r]=n[r]),e)),{})}const $g=t.createContext(void 0);function Qg(){return t.useContext($g)}function ey(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function ty(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(ey(e.value)&&""!==e.value||t&&ey(e.defaultValue)&&""!==e.defaultValue)}function ry(e){return iu("MuiInputBase",e)}const ny=au("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),oy=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"];var iy;const ay=(e,t)=>{const{ownerState:r}=e;return[t.root,r.formControl&&t.formControl,r.startAdornment&&t.adornedStart,r.endAdornment&&t.adornedEnd,r.error&&t.error,"small"===r.size&&t.sizeSmall,r.multiline&&t.multiline,r.color&&t["color".concat(ju(r.color))],r.fullWidth&&t.fullWidth,r.hiddenLabel&&t.hiddenLabel]},sy=(e,t)=>{const{ownerState:r}=e;return[t.input,"small"===r.size&&t.inputSizeSmall,r.multiline&&t.inputMultiline,"search"===r.type&&t.inputTypeSearch,r.startAdornment&&t.inputAdornedStart,r.endAdornment&&t.inputAdornedEnd,r.hiddenLabel&&t.inputHiddenLabel]},ly=Eu("div",{name:"MuiInputBase",slot:"Root",overridesResolver:ay})(Au((e=>{let{theme:t}=e;return d(d({},t.typography.body1),{},{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",["&.".concat(ny.disabled)]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"4px 0 5px"}},{props:e=>{let{ownerState:t,size:r}=e;return t.multiline&&"small"===r},style:{paddingTop:1}},{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{width:"100%"}}]})}))),cy=Eu("input",{name:"MuiInputBase",slot:"Input",overridesResolver:sy})(Au((e=>{let{theme:t}=e;const r="light"===t.palette.mode,n=d(d({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5}),{},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),o={opacity:"0 !important"},i=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},["label[data-shrink=false] + .".concat(ny.formControl," &")]:{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus::-ms-input-placeholder":i},["&.".concat(ny.disabled)]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableInjectingGlobalStyles},style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}}))),uy=ka({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),dy=t.forwardRef((function(e,r){var n;const o=Ta({props:e,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:s,autoFocus:l,className:c,color:u,components:h={},componentsProps:p={},defaultValue:f,disabled:m,disableInjectingGlobalStyles:g,endAdornment:y,error:v,fullWidth:b=!1,id:x,inputComponent:_="input",inputProps:w={},inputRef:S,margin:k,maxRows:T,minRows:E,multiline:C=!1,name:A,onBlur:j,onChange:P,onClick:I,onFocus:O,onKeyDown:M,onKeyUp:R,placeholder:L,readOnly:F,renderSuffix:z,rows:D,size:N,slotProps:B={},slots:U={},startAdornment:V,type:W="text",value:q}=o,H=a(o,oy),G=null!=w.value?w.value:q,{current:K}=t.useRef(null!=G),X=t.useRef(),Z=t.useCallback((e=>{0}),[]),Y=Xu(X,S,w.ref,Z),[J,$]=t.useState(!1),Q=Qg();const ee=Jg({props:o,muiFormControl:Q,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ee.focused=Q?Q.focused:J,t.useEffect((()=>{!Q&&m&&J&&($(!1),j&&j())}),[Q,m,J,j]);const te=Q&&Q.onFilled,re=Q&&Q.onEmpty,ne=t.useCallback((e=>{ty(e)?te&&te():re&&re()}),[te,re]);fh((()=>{K&&ne({value:G})}),[G,ne,K]);t.useEffect((()=>{ne(X.current)}),[]);let oe=_,ie=w;C&&"input"===oe&&(ie=d(D?{type:void 0,minRows:D,maxRows:D}:{type:void 0,maxRows:T,minRows:E},ie),oe=Yg);t.useEffect((()=>{Q&&Q.setAdornedStart(Boolean(V))}),[Q,V]);const ae=d(d({},o),{},{color:ee.color||"primary",disabled:ee.disabled,endAdornment:y,error:ee.error,focused:ee.focused,formControl:Q,fullWidth:b,hiddenLabel:ee.hiddenLabel,multiline:C,size:ee.size,startAdornment:V,type:W}),se=(e=>{const{classes:t,color:r,disabled:n,error:o,endAdornment:i,focused:a,formControl:s,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:h,startAdornment:p,type:f}=e;return du({root:["root","color".concat(ju(r)),n&&"disabled",o&&"error",l&&"fullWidth",a&&"focused",s&&"formControl",h&&"medium"!==h&&"size".concat(ju(h)),u&&"multiline",p&&"adornedStart",i&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",n&&"disabled","search"===f&&"inputTypeSearch",u&&"inputMultiline","small"===h&&"inputSizeSmall",c&&"inputHiddenLabel",p&&"inputAdornedStart",i&&"inputAdornedEnd",d&&"readOnly"]},ry,t)})(ae),le=U.root||h.Root||ly,ce=B.root||p.root||{},ue=U.input||h.Input||cy;return ie=d(d({},ie),null!==(n=B.input)&&void 0!==n?n:p.input),(0,St.jsxs)(t.Fragment,{children:[!g&&"function"===typeof uy&&(iy||(iy=(0,St.jsx)(uy,{}))),(0,St.jsxs)(le,d(d(d(d({},ce),{},{ref:r,onClick:e=>{X.current&&e.currentTarget===e.target&&X.current.focus(),I&&I(e)}},H),!Lh(le)&&{ownerState:d(d({},ae),ce.ownerState)}),{},{className:Wc(se.root,ce.className,c,F&&"MuiInputBase-readOnly"),children:[V,(0,St.jsx)($g.Provider,{value:null,children:(0,St.jsx)(ue,d(d(d({"aria-invalid":ee.error,"aria-describedby":i,autoComplete:s,autoFocus:l,defaultValue:f,disabled:ee.disabled,id:x,onAnimationStart:e=>{ne("mui-auto-fill-cancel"===e.animationName?X.current:{value:"x"})},name:A,placeholder:L,readOnly:F,required:ee.required,rows:D,value:G,onKeyDown:M,onKeyUp:R,type:W},ie),!Lh(ue)&&{as:oe,ownerState:d(d({},ae),ie.ownerState)}),{},{ref:Y,className:Wc(se.input,ie.className,F&&"MuiInputBase-readOnly"),onBlur:e=>{j&&j(e),w.onBlur&&w.onBlur(e),Q&&Q.onBlur?Q.onBlur(e):$(!1)},onChange:function(e){if(!K){const t=e.target||X.current;if(null==t)throw new Error(mn(1));ne({value:t.value})}for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];w.onChange&&w.onChange(e,...r),P&&P(e,...r)},onFocus:e=>{O&&O(e),w.onFocus&&w.onFocus(e),Q&&Q.onFocus?Q.onFocus(e):$(!0)}}))}),y,z?z(d(d({},ee),{},{startAdornment:V})):null]}))]})})),hy=dy;function py(e){return iu("MuiInput",e)}const fy=d(d({},ny),au("MuiInput",["root","underline","input"])),my=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],gy=Eu(ly,{shouldForwardProp:e=>Tu(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...ay(e,t),!r.disableUnderline&&t.underline]}})(Au((e=>{let{theme:t}=e;let r="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r="rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")")),{position:"relative",variants:[{props:e=>{let{ownerState:t}=e;return t.formControl},style:{"label + &":{marginTop:16}}},{props:e=>{let{ownerState:t}=e;return!t.disableUnderline},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(fy.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(fy.error)]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(r),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(fy.disabled,", .").concat(fy.error,"):before")]:{borderBottom:"2px solid ".concat((t.vars||t).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(r)}},["&.".concat(fy.disabled,":before")]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(Pu()).map((e=>{let[r]=e;return{props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:"2px solid ".concat((t.vars||t).palette[r].main)}}}}))]}}))),yy=Eu(cy,{name:"MuiInput",slot:"Input",overridesResolver:sy})({}),vy=t.forwardRef((function(e,t){var r,n,o,i;const s=Ta({props:e,name:"MuiInput"}),{disableUnderline:l=!1,components:c={},componentsProps:u,fullWidth:h=!1,inputComponent:p="input",multiline:f=!1,slotProps:m,slots:g={},type:y="text"}=s,v=a(s,my),b=(e=>{const{classes:t,disableUnderline:r}=e,n=du({root:["root",!r&&"underline"],input:["input"]},py,t);return d(d({},t),n)})(s),x={root:{ownerState:{disableUnderline:l}}},_=(null!==m&&void 0!==m?m:u)?xn(null!==m&&void 0!==m?m:u,x):x,w=null!==(r=null!==(n=g.root)&&void 0!==n?n:c.Root)&&void 0!==r?r:gy,S=null!==(o=null!==(i=g.input)&&void 0!==i?i:c.Input)&&void 0!==o?o:yy;return(0,St.jsx)(hy,d(d({slots:{root:w,input:S},slotProps:_,fullWidth:h,inputComponent:p,multiline:f,ref:t,type:y},v),{},{classes:b}))}));vy.muiName="Input";const by=vy;function xy(e){return iu("MuiFilledInput",e)}const _y=d(d({},ny),au("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])),wy=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],Sy=Eu(ly,{shouldForwardProp:e=>Tu(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...ay(e,t),!r.disableUnderline&&t.underline]}})(Au((e=>{let{theme:t}=e;const r="light"===t.palette.mode,n=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:o,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:o}},["&.".concat(_y.focused)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:o},["&.".concat(_y.disabled)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableUnderline},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(_y.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(_y.error)]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")"):n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(_y.disabled,", .").concat(_y.error,"):before")]:{borderBottom:"1px solid ".concat((t.vars||t).palette.text.primary)},["&.".concat(_y.disabled,":before")]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(Pu()).map((e=>{var r;let[n]=e;return{props:{disableUnderline:!1,color:n},style:{"&::after":{borderBottom:"2px solid ".concat(null===(r=(t.vars||t).palette[n])||void 0===r?void 0:r.main)}}}})),{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:12}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:12}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"25px 12px 8px"}},{props:e=>{let{ownerState:t,size:r}=e;return t.multiline&&"small"===r},style:{paddingTop:21,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return t.multiline&&t.hiddenLabel},style:{paddingTop:16,paddingBottom:17}},{props:e=>{let{ownerState:t}=e;return t.multiline&&t.hiddenLabel&&"small"===t.size},style:{paddingTop:8,paddingBottom:9}}]}}))),ky=Eu(cy,{name:"MuiFilledInput",slot:"Input",overridesResolver:sy})(Au((e=>{let{theme:t}=e;return d(d(d({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}}),t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}}),{},{variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return t.hiddenLabel},style:{paddingTop:16,paddingBottom:17}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:0}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:0}},{props:e=>{let{ownerState:t}=e;return t.hiddenLabel&&"small"===t.size},style:{paddingTop:8,paddingBottom:9}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]})}))),Ty=t.forwardRef((function(e,t){var r,n,o,i;const s=Ta({props:e,name:"MuiFilledInput"}),{disableUnderline:l=!1,components:c={},componentsProps:u,fullWidth:h=!1,hiddenLabel:p,inputComponent:f="input",multiline:m=!1,slotProps:g,slots:y={},type:v="text"}=s,b=a(s,wy),x=d(d({},s),{},{disableUnderline:l,fullWidth:h,inputComponent:f,multiline:m,type:v}),_=(e=>{const{classes:t,disableUnderline:r,startAdornment:n,endAdornment:o,size:i,hiddenLabel:a,multiline:s}=e,l=du({root:["root",!r&&"underline",n&&"adornedStart",o&&"adornedEnd","small"===i&&"size".concat(ju(i)),a&&"hiddenLabel",s&&"multiline"],input:["input"]},xy,t);return d(d({},t),l)})(s),w={root:{ownerState:x},input:{ownerState:x}},S=(null!==g&&void 0!==g?g:u)?xn(w,null!==g&&void 0!==g?g:u):w,k=null!==(r=null!==(n=y.root)&&void 0!==n?n:c.Root)&&void 0!==r?r:Sy,T=null!==(o=null!==(i=y.input)&&void 0!==i?i:c.Input)&&void 0!==o?o:ky;return(0,St.jsx)(hy,d(d({slots:{root:k,input:T},slotProps:S,fullWidth:h,inputComponent:f,multiline:m,ref:t,type:v},b),{},{classes:_}))}));Ty.muiName="Input";const Ey=Ty,Cy=["children","classes","className","label","notched"];var Ay;const jy=Eu("fieldset",{shouldForwardProp:Tu})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Py=Eu("legend",{shouldForwardProp:Tu})(Au((e=>{let{theme:t}=e;return{float:"unset",width:"auto",overflow:"hidden",variants:[{props:e=>{let{ownerState:t}=e;return!t.withLabel},style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:e=>{let{ownerState:t}=e;return t.withLabel},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:e=>{let{ownerState:t}=e;return t.withLabel&&t.notched},style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]}})));function Iy(e){return iu("MuiOutlinedInput",e)}const Oy=d(d({},ny),au("MuiOutlinedInput",["root","notchedOutline","input"])),My=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],Ry=Eu(ly,{shouldForwardProp:e=>Tu(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:ay})(Au((e=>{let{theme:t}=e;const r="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,["&:hover .".concat(Oy.notchedOutline)]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{["&:hover .".concat(Oy.notchedOutline)]:{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):r}},["&.".concat(Oy.focused," .").concat(Oy.notchedOutline)]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(Pu()).map((e=>{let[r]=e;return{props:{color:r},style:{["&.".concat(Oy.focused," .").concat(Oy.notchedOutline)]:{borderColor:(t.vars||t).palette[r].main}}}})),{props:{},style:{["&.".concat(Oy.error," .").concat(Oy.notchedOutline)]:{borderColor:(t.vars||t).palette.error.main},["&.".concat(Oy.disabled," .").concat(Oy.notchedOutline)]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:14}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:14}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"16.5px 14px"}},{props:e=>{let{ownerState:t,size:r}=e;return t.multiline&&"small"===r},style:{padding:"8.5px 14px"}}]}}))),Ly=Eu((function(e){const{children:t,classes:r,className:n,label:o,notched:i}=e,s=a(e,Cy),l=null!=o&&""!==o,c=d(d({},e),{},{notched:i,withLabel:l});return(0,St.jsx)(jy,d(d({"aria-hidden":!0,className:n,ownerState:c},s),{},{children:(0,St.jsx)(Py,{ownerState:c,children:l?(0,St.jsx)("span",{children:o}):Ay||(Ay=(0,St.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(Au((e=>{let{theme:t}=e;const r="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):r}}))),Fy=Eu(cy,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:sy})(Au((e=>{let{theme:t}=e;return d(d(d({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}}),t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}}),{},{variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:0}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:0}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:0}}]})}))),zy=t.forwardRef((function(e,r){var n,o,i,s,l;const c=Ta({props:e,name:"MuiOutlinedInput"}),{components:u={},fullWidth:h=!1,inputComponent:p="input",label:f,multiline:m=!1,notched:g,slots:y={},type:v="text"}=c,b=a(c,My),x=(e=>{const{classes:t}=e,r=du({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Iy,t);return d(d({},t),r)})(c),_=Qg(),w=Jg({props:c,muiFormControl:_,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),S=d(d({},c),{},{color:w.color||"primary",disabled:w.disabled,error:w.error,focused:w.focused,formControl:_,fullWidth:h,hiddenLabel:w.hiddenLabel,multiline:m,size:w.size,type:v}),k=null!==(n=null!==(o=y.root)&&void 0!==o?o:u.Root)&&void 0!==n?n:Ry,T=null!==(i=null!==(s=y.input)&&void 0!==s?s:u.Input)&&void 0!==i?i:Fy;return(0,St.jsx)(hy,d(d({slots:{root:k,input:T},renderSuffix:e=>(0,St.jsx)(Ly,{ownerState:S,className:x.notchedOutline,label:null!=f&&""!==f&&w.required?l||(l=(0,St.jsxs)(t.Fragment,{children:[f,"\u2009","*"]})):f,notched:"undefined"!==typeof g?g:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:h,inputComponent:p,multiline:m,ref:r,type:v},b),{},{classes:d(d({},x),{},{notchedOutline:null})}))}));zy.muiName="Input";const Dy=zy;function Ny(e){return iu("MuiFormLabel",e)}const By=au("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Uy=["children","className","color","component","disabled","error","filled","focused","required"],Vy=Eu("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,"secondary"===r.color&&t.colorSecondary,r.filled&&t.filled]}})(Au((e=>{let{theme:t}=e;return d(d({color:(t.vars||t).palette.text.secondary},t.typography.body1),{},{lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(Pu()).map((e=>{let[r]=e;return{props:{color:r},style:{["&.".concat(By.focused)]:{color:(t.vars||t).palette[r].main}}}})),{props:{},style:{["&.".concat(By.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(By.error)]:{color:(t.vars||t).palette.error.main}}}]})}))),Wy=Eu("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(Au((e=>{let{theme:t}=e;return{["&.".concat(By.error)]:{color:(t.vars||t).palette.error.main}}}))),qy=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiFormLabel"}),{children:n,className:o,color:i,component:s="label",disabled:l,error:c,filled:u,focused:h,required:p}=r,f=a(r,Uy),m=Jg({props:r,muiFormControl:Qg(),states:["color","required","focused","disabled","error","filled"]}),g=d(d({},r),{},{color:m.color||"primary",component:s,disabled:m.disabled,error:m.error,filled:m.filled,focused:m.focused,required:m.required}),y=(e=>{const{classes:t,color:r,focused:n,disabled:o,error:i,filled:a,required:s}=e;return du({root:["root","color".concat(ju(r)),o&&"disabled",i&&"error",a&&"filled",n&&"focused",s&&"required"],asterisk:["asterisk",i&&"error"]},Ny,t)})(g);return(0,St.jsxs)(Vy,d(d({as:s,ownerState:g,className:Wc(y.root,o),ref:t},f),{},{children:[n,m.required&&(0,St.jsxs)(Wy,{ownerState:g,"aria-hidden":!0,className:y.asterisk,children:["\u2009","*"]})]}))})),Hy=qy;function Gy(e){return iu("MuiInputLabel",e)}au("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Ky=["disableAnimation","margin","shrink","variant","className"],Xy=Eu(Hy,{shouldForwardProp:e=>Tu(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{["& .".concat(By.asterisk)]:t.asterisk},t.root,r.formControl&&t.formControl,"small"===r.size&&t.sizeSmall,r.shrink&&t.shrink,!r.disableAnimation&&t.animated,r.focused&&t.focused,t[r.variant]]}})(Au((e=>{let{theme:t}=e;return{display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:e=>{let{ownerState:t}=e;return t.formControl},style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:e=>{let{ownerState:t}=e;return t.shrink},style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:e=>{let{ownerState:t}=e;return!t.disableAnimation},style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:e=>{let{variant:t,ownerState:r}=e;return"filled"===t&&r.shrink},style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:e=>{let{variant:t,ownerState:r,size:n}=e;return"filled"===t&&r.shrink&&"small"===n},style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:e=>{let{variant:t,ownerState:r}=e;return"outlined"===t&&r.shrink},style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}}))),Zy=t.forwardRef((function(e,t){const r=Ta({name:"MuiInputLabel",props:e}),{disableAnimation:n=!1,margin:o,shrink:i,variant:s,className:l}=r,c=a(r,Ky),u=Qg();let h=i;"undefined"===typeof h&&u&&(h=u.filled||u.focused||u.adornedStart);const p=Jg({props:r,muiFormControl:u,states:["size","variant","required","focused"]}),f=d(d({},r),{},{disableAnimation:n,formControl:u,shrink:h,size:p.size,variant:p.variant,required:p.required,focused:p.focused}),m=(e=>{const{classes:t,formControl:r,size:n,shrink:o,disableAnimation:i,variant:a,required:s}=e,l=du({root:["root",r&&"formControl",!i&&"animated",o&&"shrink",n&&"normal"!==n&&"size".concat(ju(n)),a],asterisk:[s&&"asterisk"]},Gy,t);return d(d({},t),l)})(f);return(0,St.jsx)(Xy,d(d({"data-shrink":h,ref:t,className:Wc(m.root,l)},c),{},{ownerState:f,classes:m}))}));function Yy(e){return iu("MuiFormControl",e)}au("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Jy=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],$y=Eu("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t["margin".concat(ju(r.margin))],r.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),Qy=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiFormControl"}),{children:o,className:i,color:s="primary",component:l="div",disabled:c=!1,error:u=!1,focused:h,fullWidth:p=!1,hiddenLabel:f=!1,margin:m="none",required:g=!1,size:y="medium",variant:v="outlined"}=n,b=a(n,Jy),x=d(d({},n),{},{color:s,component:l,disabled:c,error:u,fullWidth:p,hiddenLabel:f,margin:m,required:g,size:y,variant:v}),_=(e=>{const{classes:t,margin:r,fullWidth:n}=e;return du({root:["root","none"!==r&&"margin".concat(ju(r)),n&&"fullWidth"]},Yy,t)})(x),[w,S]=t.useState((()=>{let e=!1;return o&&t.Children.forEach(o,(t=>{if(!Fh(t,["Input","Select"]))return;const r=Fh(t,["Select"])?t.props.input:t;r&&r.props.startAdornment&&(e=!0)})),e})),[k,T]=t.useState((()=>{let e=!1;return o&&t.Children.forEach(o,(t=>{Fh(t,["Input","Select"])&&(ty(t.props,!0)||ty(t.props.inputProps,!0))&&(e=!0)})),e})),[E,C]=t.useState(!1);c&&E&&C(!1);const A=void 0===h||c?E:h;let j;t.useRef(!1);const P=t.useCallback((()=>{T(!0)}),[]),I=t.useCallback((()=>{T(!1)}),[]),O=t.useMemo((()=>({adornedStart:w,setAdornedStart:S,color:s,disabled:c,error:u,filled:k,focused:A,fullWidth:p,hiddenLabel:f,size:y,onBlur:()=>{C(!1)},onFocus:()=>{C(!0)},onEmpty:I,onFilled:P,registerEffect:j,required:g,variant:v})),[w,s,c,u,k,A,p,f,j,I,P,g,y,v]);return(0,St.jsx)($g.Provider,{value:O,children:(0,St.jsx)($y,d(d({as:l,ownerState:x,className:Wc(_.root,i),ref:r},b),{},{children:o}))})})),ev=Qy;function tv(e){return iu("MuiFormHelperText",e)}const rv=au("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),nv=["children","className","component","disabled","error","filled","focused","margin","required","variant"];var ov;const iv=Eu("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.size&&t["size".concat(ju(r.size))],r.contained&&t.contained,r.filled&&t.filled]}})(Au((e=>{let{theme:t}=e;return d(d({color:(t.vars||t).palette.text.secondary},t.typography.caption),{},{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,["&.".concat(rv.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(rv.error)]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:e=>{let{ownerState:t}=e;return t.contained},style:{marginLeft:14,marginRight:14}}]})}))),av=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiFormHelperText"}),{children:n,className:o,component:i="p",disabled:s,error:l,filled:c,focused:u,margin:h,required:p,variant:f}=r,m=a(r,nv),g=Jg({props:r,muiFormControl:Qg(),states:["variant","size","disabled","error","filled","focused","required"]}),y=d(d({},r),{},{component:i,contained:"filled"===g.variant||"outlined"===g.variant,variant:g.variant,size:g.size,disabled:g.disabled,error:g.error,filled:g.filled,focused:g.focused,required:g.required});delete y.ownerState;const v=(e=>{const{classes:t,contained:r,size:n,disabled:o,error:i,filled:a,focused:s,required:l}=e;return du({root:["root",o&&"disabled",i&&"error",n&&"size".concat(ju(n)),r&&"contained",s&&"focused",a&&"filled",l&&"required"]},tv,t)})(y);return(0,St.jsx)(iv,d(d({as:i,className:Wc(v.root,o),ref:t},m),{},{ownerState:y,children:" "===n?ov||(ov=(0,St.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"})):n}))}));function sv(e){return iu("MuiNativeSelect",e)}const lv=au("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),cv=["className","disabled","error","IconComponent","inputRef","variant"],uv=Eu("select")((e=>{let{theme:t}=e;return{MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},["&.".concat(lv.disabled)]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:e=>{let{ownerState:t}=e;return"filled"!==t.variant&&"outlined"!==t.variant},style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]}})),dv=Eu(uv,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Tu,overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.select,t[r.variant],r.error&&t.error,{["&.".concat(lv.multiple)]:t.multiple}]}})({}),hv=Eu("svg")((e=>{let{theme:t}=e;return{position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,["&.".concat(lv.disabled)]:{color:(t.vars||t).palette.action.disabled},variants:[{props:e=>{let{ownerState:t}=e;return t.open},style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]}})),pv=Eu(hv,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t["icon".concat(ju(r.variant))],r.open&&t.iconOpen]}})({}),fv=t.forwardRef((function(e,r){const{className:n,disabled:o,error:i,IconComponent:s,inputRef:l,variant:c="standard"}=e,u=a(e,cv),h=d(d({},e),{},{disabled:o,variant:c,error:i}),p=(e=>{const{classes:t,variant:r,disabled:n,multiple:o,open:i,error:a}=e;return du({select:["select",r,n&&"disabled",o&&"multiple",a&&"error"],icon:["icon","icon".concat(ju(r)),i&&"iconOpen",n&&"disabled"]},sv,t)})(h);return(0,St.jsxs)(t.Fragment,{children:[(0,St.jsx)(dv,d({ownerState:h,className:Wc(p.select,n),disabled:o,ref:l||r},u)),e.multiple?null:(0,St.jsx)(pv,{as:s,ownerState:h,className:p.icon})]})}));const mv=function(e){let{controlled:r,default:n,name:o,state:i="value"}=e;const{current:a}=t.useRef(void 0!==r),[s,l]=t.useState(n);return[a?r:s,t.useCallback((e=>{a||l(e)}),[])]};function gv(e){return iu("MuiSelect",e)}const yv=au("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),vv=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","required","SelectDisplayProps","tabIndex","type","value","variant"];var bv;const xv=Eu(uv,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{["&.".concat(yv.select)]:t.select},{["&.".concat(yv.select)]:t[r.variant]},{["&.".concat(yv.error)]:t.error},{["&.".concat(yv.multiple)]:t.multiple}]}})({["&.".concat(yv.select)]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),_v=Eu(hv,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t["icon".concat(ju(r.variant))],r.open&&t.iconOpen]}})({}),wv=Eu("input",{shouldForwardProp:e=>ku(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Sv(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function kv(e){return null==e||"string"===typeof e&&!e.trim()}const Tv=t.forwardRef((function(e,r){var n;const{"aria-describedby":o,"aria-label":i,autoFocus:s,autoWidth:l,children:c,className:u,defaultOpen:h,defaultValue:p,disabled:f,displayEmpty:m,error:g=!1,IconComponent:y,inputRef:v,labelId:b,MenuProps:x={},multiple:_,name:w,onBlur:S,onChange:k,onClose:T,onFocus:E,onOpen:C,open:A,readOnly:j,renderValue:P,required:I,SelectDisplayProps:O={},tabIndex:M,type:R,value:L,variant:F="standard"}=e,z=a(e,vv),[D,N]=mv({controlled:L,default:p,name:"Select"}),[B,U]=mv({controlled:A,default:h,name:"Select"}),V=t.useRef(null),W=t.useRef(null),[q,H]=t.useState(null),{current:G}=t.useRef(null!=A),[K,X]=t.useState(),Z=Xu(r,v),Y=t.useCallback((e=>{W.current=e,e&&H(e)}),[]),J=null===q||void 0===q?void 0:q.parentNode;t.useImperativeHandle(Z,(()=>({focus:()=>{W.current.focus()},node:V.current,value:D})),[D]),t.useEffect((()=>{h&&B&&q&&!G&&(X(l?null:J.clientWidth),W.current.focus())}),[q,l]),t.useEffect((()=>{s&&W.current.focus()}),[s]),t.useEffect((()=>{if(!b)return;const e=Op(W.current).getElementById(b);if(e){const t=()=>{getSelection().isCollapsed&&W.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[b]);const $=(e,t)=>{e?C&&C(t):T&&T(t),G||(X(l?null:J.clientWidth),U(e))},Q=t.Children.toArray(c),ee=e=>t=>{let r;if(t.currentTarget.hasAttribute("tabindex")){if(_){r=Array.isArray(D)?D.slice():[];const t=D.indexOf(e.props.value);-1===t?r.push(e.props.value):r.splice(t,1)}else r=e.props.value;if(e.props.onClick&&e.props.onClick(t),D!==r&&(N(r),k)){const n=t.nativeEvent||t,o=new n.constructor(n.type,n);Object.defineProperty(o,"target",{writable:!0,value:{value:r,name:w}}),k(o,e)}_||$(!1,t)}},te=null!==q&&B;let re,ne;delete z["aria-invalid"];const oe=[];let ie=!1,ae=!1;(ty({value:D})||m)&&(P?re=P(D):ie=!0);const se=Q.map((e=>{if(!t.isValidElement(e))return null;let r;if(_){if(!Array.isArray(D))throw new Error(mn(2));r=D.some((t=>Sv(t,e.props.value))),r&&ie&&oe.push(e.props.children)}else r=Sv(D,e.props.value),r&&ie&&(ne=e.props.children);return r&&(ae=!0),t.cloneElement(e,{"aria-selected":r?"true":"false",onClick:ee(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:r,value:void 0,"data-value":e.props.value})}));ie&&(re=_?0===oe.length?null:oe.reduce(((e,t,r)=>(e.push(t),r<oe.length-1&&e.push(", "),e)),[]):ne);let le,ce=K;!l&&G&&q&&(ce=J.clientWidth),le="undefined"!==typeof M?M:f?null:0;const ue=O.id||(w?"mui-component-select-".concat(w):void 0),de=d(d({},e),{},{variant:F,value:D,open:te,error:g}),he=(e=>{const{classes:t,variant:r,disabled:n,multiple:o,open:i,error:a}=e;return du({select:["select",r,n&&"disabled",o&&"multiple",a&&"error"],icon:["icon","icon".concat(ju(r)),i&&"iconOpen",n&&"disabled"],nativeInput:["nativeInput"]},gv,t)})(de),pe=d(d({},x.PaperProps),null===(n=x.slotProps)||void 0===n?void 0:n.paper),fe=Wu();return(0,St.jsxs)(t.Fragment,{children:[(0,St.jsx)(xv,d(d({as:"div",ref:Y,tabIndex:le,role:"combobox","aria-controls":te?fe:void 0,"aria-disabled":f?"true":void 0,"aria-expanded":te?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[b,ue].filter(Boolean).join(" ")||void 0,"aria-describedby":o,"aria-required":I?"true":void 0,"aria-invalid":g?"true":void 0,onKeyDown:e=>{if(!j){[" ","ArrowUp","ArrowDown","Enter"].includes(e.key)&&(e.preventDefault(),$(!0,e))}},onMouseDown:f||j?null:e=>{0===e.button&&(e.preventDefault(),W.current.focus(),$(!0,e))},onBlur:e=>{!te&&S&&(Object.defineProperty(e,"target",{writable:!0,value:{value:D,name:w}}),S(e))},onFocus:E},O),{},{ownerState:de,className:Wc(O.className,he.select,u),id:ue,children:kv(re)?bv||(bv=(0,St.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"})):re})),(0,St.jsx)(wv,d(d({"aria-invalid":g,value:Array.isArray(D)?D.join(","):D,name:w,ref:V,"aria-hidden":!0,onChange:e=>{const t=Q.find((t=>t.props.value===e.target.value));void 0!==t&&(N(t.props.value),k&&k(e,t))},tabIndex:-1,disabled:f,className:he.nativeInput,autoFocus:s,required:I},z),{},{ownerState:de})),(0,St.jsx)(_v,{as:y,className:he.icon,ownerState:de}),(0,St.jsx)(lm,d(d({id:"menu-".concat(w||""),anchorEl:J,open:te,onClose:e=>{$(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},x),{},{slotProps:d(d({},x.slotProps),{},{list:d({"aria-labelledby":b,role:"listbox","aria-multiselectable":_?"true":void 0,disableListWrap:!0,id:fe},x.MenuListProps),paper:d(d({},pe),{},{style:d({minWidth:ce},null!=pe?pe.style:null)})}),children:se}))]})})),Ev=Tv,Cv=Fm((0,St.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Av=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],jv=["root"],Pv={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>Tu(e)&&"variant"!==e,slot:"Root"},Iv=Eu(by,Pv)(""),Ov=Eu(Dy,Pv)(""),Mv=Eu(Ey,Pv)(""),Rv=t.forwardRef((function(e,r){const n=Ta({name:"MuiSelect",props:e}),{autoWidth:o=!1,children:i,classes:s={},className:l,defaultOpen:c=!1,displayEmpty:u=!1,IconComponent:h=Cv,id:p,input:f,inputProps:m,label:g,labelId:y,MenuProps:v,multiple:b=!1,native:x=!1,onClose:_,onOpen:w,open:S,renderValue:k,SelectDisplayProps:T,variant:E="outlined"}=n,C=a(n,Av),A=x?fv:Ev,j=Jg({props:n,muiFormControl:Qg(),states:["variant","error"]}),P=j.variant||E,I=d(d({},n),{},{variant:P,classes:s}),O=(e=>{const{classes:t}=e,r=du({root:["root"]},gv,t);return d(d({},t),r)})(I),{root:M}=O,R=a(O,jv),L=f||{standard:(0,St.jsx)(Iv,{ownerState:I}),outlined:(0,St.jsx)(Ov,{label:g,ownerState:I}),filled:(0,St.jsx)(Mv,{ownerState:I})}[P],F=Xu(r,Hp(L));return(0,St.jsx)(t.Fragment,{children:t.cloneElement(L,d(d(d({inputComponent:A,inputProps:d(d(d({children:i,error:j.error,IconComponent:h,variant:P,type:void 0,multiple:b},x?{id:p}:{autoWidth:o,defaultOpen:c,displayEmpty:u,labelId:y,MenuProps:v,onClose:_,onOpen:w,open:S,renderValue:k,SelectDisplayProps:d({id:p},T)}),m),{},{classes:m?xn(R,m.classes):R},f?f.props.inputProps:{})},(b&&x||u)&&"outlined"===P?{notched:!0}:{}),{},{ref:F,className:Wc(L.props.className,l,O.root)},!f&&{variant:P}),C))})}));Rv.muiName="Select";const Lv=Rv;function Fv(e){return iu("MuiTextField",e)}au("MuiTextField",["root"]);const zv=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","slots","slotProps","type","value","variant"],Dv={standard:by,filled:Ey,outlined:Dy},Nv=Eu(ev,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Bv=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiTextField"}),{autoComplete:n,autoFocus:o=!1,children:i,className:s,color:l="primary",defaultValue:c,disabled:u=!1,error:h=!1,FormHelperTextProps:p,fullWidth:f=!1,helperText:m,id:g,InputLabelProps:y,inputProps:v,InputProps:b,inputRef:x,label:_,maxRows:w,minRows:S,multiline:k=!1,name:T,onBlur:E,onChange:C,onFocus:A,placeholder:j,required:P=!1,rows:I,select:O=!1,SelectProps:M,slots:R={},slotProps:L={},type:F,value:z,variant:D="outlined"}=r,N=a(r,zv),B=d(d({},r),{},{autoFocus:o,color:l,disabled:u,error:h,fullWidth:f,multiline:k,required:P,select:O,variant:D}),U=(e=>{const{classes:t}=e;return du({root:["root"]},Fv,t)})(B);const V=Wu(g),W=m&&V?"".concat(V,"-helper-text"):void 0,q=_&&V?"".concat(V,"-label"):void 0,H=Dv[D],G={slots:R,slotProps:d({input:b,inputLabel:y,htmlInput:v,formHelperText:p,select:M},L)},K={},X=G.slotProps.inputLabel;"outlined"===D&&(X&&"undefined"!==typeof X.shrink&&(K.notched=X.shrink),K.label=_),O&&(M&&M.native||(K.id=void 0),K["aria-describedby"]=void 0);const[Z,Y]=Ih("input",{elementType:H,externalForwardedProps:G,additionalProps:K,ownerState:B}),[J,$]=Ih("inputLabel",{elementType:Zy,externalForwardedProps:G,ownerState:B}),[Q,ee]=Ih("htmlInput",{elementType:"input",externalForwardedProps:G,ownerState:B}),[te,re]=Ih("formHelperText",{elementType:av,externalForwardedProps:G,ownerState:B}),[ne,oe]=Ih("select",{elementType:Lv,externalForwardedProps:G,ownerState:B}),ie=(0,St.jsx)(Z,d({"aria-describedby":W,autoComplete:n,autoFocus:o,defaultValue:c,fullWidth:f,multiline:k,name:T,rows:I,maxRows:w,minRows:S,type:F,value:z,id:V,inputRef:x,onBlur:E,onChange:C,onFocus:A,placeholder:j,inputProps:ee,slots:{input:R.htmlInput?Q:void 0}},Y));return(0,St.jsxs)(Nv,d(d({className:Wc(U.root,s),disabled:u,error:h,fullWidth:f,ref:t,required:P,color:l,variant:D,ownerState:B},N),{},{children:[null!=_&&""!==_&&(0,St.jsx)(J,d(d({htmlFor:V,id:q},$),{},{children:_})),O?(0,St.jsx)(ne,d(d({"aria-describedby":W,id:V,labelId:q,value:z,input:ie},oe),{},{children:i})):ie,m&&(0,St.jsx)(te,d(d({id:W},re),{},{children:m}))]}))})),Uv=Bv;function Vv(e){return iu("MuiInputAdornment",e)}const Wv=au("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),qv=["children","className","component","disablePointerEvents","disableTypography","position","variant"];var Hv;const Gv=Eu("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t["position".concat(ju(r.position))],!0===r.disablePointerEvents&&t.disablePointerEvents,t[r.variant]]}})(Au((e=>{let{theme:t}=e;return{display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active,variants:[{props:{variant:"filled"},style:{["&.".concat(Wv.positionStart,"&:not(.").concat(Wv.hiddenLabel,")")]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}}))),Kv=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiInputAdornment"}),{children:o,className:i,component:s="div",disablePointerEvents:l=!1,disableTypography:c=!1,position:u,variant:h}=n,p=a(n,qv),f=Qg()||{};let m=h;h&&f.variant,f&&!m&&(m=f.variant);const g=d(d({},n),{},{hiddenLabel:f.hiddenLabel,size:f.size,disablePointerEvents:l,position:u,variant:m}),y=(e=>{const{classes:t,disablePointerEvents:r,hiddenLabel:n,position:o,size:i,variant:a}=e;return du({root:["root",r&&"disablePointerEvents",o&&"position".concat(ju(o)),a,n&&"hiddenLabel",i&&"size".concat(ju(i))]},Vv,t)})(g);return(0,St.jsx)($g.Provider,{value:null,children:(0,St.jsx)(Gv,d(d({as:s,ownerState:g,className:Wc(y.root,i),ref:r},p),{},{children:"string"!==typeof o||c?(0,St.jsxs)(t.Fragment,{children:["start"===u?Hv||(Hv=(0,St.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"})):null,o]}):(0,St.jsx)(Bu,{color:"textSecondary",children:o})}))})})),Xv=Kv;function Zv(e){return iu("MuiDialogContent",e)}au("MuiDialogContent",["root","dividers"]);const Yv=["className","dividers"],Jv=Eu("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dividers&&t.dividers]}})(Au((e=>{let{theme:t}=e;return{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:e=>{let{ownerState:t}=e;return t.dividers},style:{padding:"16px 24px",borderTop:"1px solid ".concat((t.vars||t).palette.divider),borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}},{props:e=>{let{ownerState:t}=e;return!t.dividers},style:{[".".concat(Ug.root," + &")]:{paddingTop:0}}}]}}))),$v=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiDialogContent"}),{className:n,dividers:o=!1}=r,i=a(r,Yv),s=d(d({},r),{},{dividers:o}),l=(e=>{const{classes:t,dividers:r}=e;return du({root:["root",r&&"dividers"]},Zv,t)})(s);return(0,St.jsx)(Jv,d({className:Wc(l.root,n),ownerState:s,ref:t},i))})),Qv=Fm((0,St.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),eb=Fm((0,St.jsx)("path",{d:"M7 14H5v5h5v-2H7zm-2-4h2V7h3V5H5zm12 7h-3v2h5v-5h-2zM14 5v2h3v3h2V5z"}),"Fullscreen"),tb=Fm((0,St.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");var rb=r(879),nb=r.n(rb);if("undefined"!==typeof document){const e=document.createElement("style");e.textContent="\n  .nft-image-marker {\n    width: 60px !important;\n    height: 60px !important;\n    cursor: pointer !important;\n    position: relative !important;\n    z-index: 1000 !important;\n    pointer-events: auto !important;\n    border-radius: 12px !important;\n    border: 3px solid #ffffff !important;\n    box-shadow: 0 4px 12px rgba(0,0,0,0.3) !important;\n    overflow: hidden !important;\n    transform: none !important;\n    transition: none !important;\n    will-change: auto !important;\n  }\n  \n  .nft-image-marker img,\n  .nft-image-marker div {\n    pointer-events: none !important;\n  }\n  \n  /* Ensure popups appear above everything */\n  .mapboxgl-popup {\n    z-index: 2000 !important;\n  }\n  \n  .mapboxgl-popup-content {\n    z-index: 2001 !important;\n  }\n  \n  .mapboxgl-popup-tip {\n    z-index: 2002 !important;\n  }\n  \n  /* Specific styling for NFT popups */\n  .nft-popup {\n    z-index: 3000 !important;\n  }\n  \n  .nft-popup .mapboxgl-popup-content {\n    z-index: 3001 !important;\n    border-radius: 12px !important;\n    box-shadow: 0 8px 24px rgba(0,0,0,0.3) !important;\n  }\n  \n  .nft-popup .mapboxgl-popup-tip {\n    z-index: 3002 !important;\n  }\n",document.head.appendChild(e)}const ob=()=>{var e,r,n;const[o,i]=(0,t.useState)(!1),[a,s]=(0,t.useState)([]),[l,c]=(0,t.useState)(!1),[u,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(""),[m,g]=(0,t.useState)([]),[y,v]=(0,t.useState)(null),[b,x]=(0,t.useState)(!1),[_,w]=(0,t.useState)(!1),[S,k]=(0,t.useState)([]),[T,E]=(0,t.useState)(!1),[C,A]=(0,t.useState)(!1),j=(0,t.useRef)(null),P=(0,t.useRef)(null),I=(0,t.useRef)(null),O=(0,t.useRef)(null),M=(0,t.useRef)([]),R=(0,t.useRef)({}),L=Lc(),F=Uc(L.breakpoints.down("md")),z=(0,t.useCallback)((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{var n;if(console.log("\ud83c\udfaf Creating single marker for NFT ".concat(e.id," at index ").concat(r)),R.current[e.id])return console.log("Marker for NFT ".concat(e.id," already exists, skipping creation")),R.current[e.id];if(!e.longitude||!e.latitude||isNaN(e.longitude)||isNaN(e.latitude)||!isFinite(e.longitude)||!isFinite(e.latitude))return console.warn("Invalid base coordinates for NFT:",e.id,"Skipping marker creation."),null;let o=parseFloat(e.longitude),i=parseFloat(e.latitude);if("globe"===(null===(n=t.getProjection())||void 0===n?void 0:n.name)&&(o<-180&&(o+=360),o>180&&(o-=360),i<-90&&(i=-90),i>90&&(i=90),console.log("\ud83c\udf0d Globe projection: Normalized coordinates for NFT ".concat(e.id,":"),{lng:o,lat:i})),Math.abs(o)<=90&&Math.abs(i)>90){console.log("\ud83d\udd04 COORDINATE SWAP DETECTED for NFT ".concat(e.id,": Swapping lat/lng"));const t=o;o=i,i=t}if(Math.abs(o)>180||Math.abs(i)>90){console.log("\ud83d\udd04 INVALID COORDINATES for NFT ".concat(e.id,": Trying coordinate swap"));const t=o;o=i,i=t}if((Math.abs(o)>1e3||Math.abs(i)>1e3)&&(console.log("\ud83d\udea8 LARGE COORDINATES for NFT ".concat(e.id,": Possible UTM or other coordinate system"),{lng:o,lat:i}),console.log("\ud83d\udea8 These coordinates are likely in UTM or another system, not WGS84 GPS coordinates")),console.log("\ud83d\udd0d Raw coordinates for NFT ".concat(e.id,":"),{rawLongitude:e.longitude,rawLatitude:e.latitude,parsedLng:o,parsedLat:i,coordinateType:typeof e.longitude,isString:"string"===typeof e.longitude,stringLength:"string"===typeof e.longitude?e.longitude.length:"N/A"}),console.log("NFT ".concat(e.id," coordinates:"),{lat:i,lng:o,name:e.name,nftIndex:r,originalCoords:{lat:e.latitude,lng:e.longitude}}),(Math.abs(o)>180||Math.abs(i)>90)&&console.error("\ud83d\udea8 INVALID COORDINATES for NFT ".concat(e.id,":"),{lat:i,lng:o}),o>=-124&&o<=-114&&i>=32&&i<=42)console.log("\u2705 NFT ".concat(e.id," appears to be in California region"));else if(o>=-43&&o<=-42&&i>=-23&&i<=-22)console.log("\u2705 NFT ".concat(e.id," appears to be in Rio de Janeiro region"));else{console.log("\u2753 NFT ".concat(e.id," coordinates don't match expected regions:"),{lat:i,lng:o});const t=i,r=o;console.log("\ud83d\udd04 Testing swapped coordinates for NFT ".concat(e.id,":"),{lat:r,lng:t}),t>=-124&&t<=-114&&r>=32&&r<=42?console.log("\ud83d\udd04 SWAPPED: NFT ".concat(e.id," would be in California region if coordinates were swapped")):t>=-43&&t<=-42&&r>=-23&&r<=-22&&console.log("\ud83d\udd04 SWAPPED: NFT ".concat(e.id," would be in Rio de Janeiro region if coordinates were swapped"))}if(isNaN(i)||isNaN(o)||!isFinite(i)||!isFinite(o))return void console.warn("Invalid coordinates for NFT:",e.id,"Skipping marker creation.");if(i<-90||i>90||o<-180||o>180)return void console.warn("Invalid coordinate range for NFT ".concat(e.id,":"),{lat:i,lng:o});const a=document.createElement("div");if(a.className="nft-marker",a.style.width="40px",a.style.height="40px",a.style.borderRadius="8px",a.style.border="3px solid #fff",a.style.boxShadow="0 2px 8px rgba(0,0,0,0.3)",a.style.cursor="pointer",a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.fontSize="12px",a.style.fontWeight="bold",a.style.color="#fff",a.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)",a.style.position="relative",a.style.zIndex="1000",e.ipfs_hash){const t=document.createElement("img");t.src="https://ipfs.io/ipfs/".concat(e.ipfs_hash),t.style.width="100%",t.style.height="100%",t.style.borderRadius="6px",t.style.objectFit="cover",t.onerror=()=>{console.log("Image failed to load:",t.src),a.style.background="linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 100%)",a.innerHTML=e.name?e.name.charAt(0).toUpperCase():"N"},a.appendChild(t)}else a.innerHTML=e.name?e.name.charAt(0).toUpperCase():"N";const s=new(nb().Marker)(a).setLngLat([o,i]).addTo(t);let l;return a.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),clearTimeout(l),l=setTimeout((()=>{console.log("Marker clicked, opening NFT details:",e),G(e)}),200)})),a.addEventListener("dblclick",(e=>{e.preventDefault(),e.stopPropagation(),clearTimeout(l),console.log("Marker double-clicked, zooming to location"),t.flyTo({center:[o,i],zoom:15,duration:1e3})})),console.log("Marker ".concat(r+1," added successfully at coordinates:"),o,i),console.log("Marker element:",a),console.log("Marker added to map:",s),R.current[e.id]=s,s}catch(u){return console.error("Error creating marker for NFT ".concat(e.id,":"),u),null}}),[]),D=(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.log("\ud83d\udd0d addCardNFTMarkers called - DEBUGGING MARKER CREATION",{forceCreation:e}),console.log("\ud83d\udd0d Map state:",{hasMap:!!I.current,mapContainer:!!j.current,mapReady:I.current?"ready":"not ready"}),console.log("\ud83d\udd0d NFT state:",{nftsLength:a.length,nftsRefLength:M.current.length,isUserMovingMap:C});const t=[...M.current];if(console.log("\ud83d\udd0d Current NFTs data:",t.map((e=>({id:e.id,name:e.name,lat:e.latitude,lng:e.longitude})))),!I.current||!t.length)return void console.log("\u274c No NFTs to display on card map - map:",!!I.current,"nfts:",t.length);if(C&&!e)return void console.log("\u274c User is interacting with map - no marker updates allowed");if(Object.keys(R.current).length>0&&!e)return void console.log("\u274c Markers already exist and are positioned - preventing any updates");document.querySelectorAll(".nft-marker").length>0&&!e?console.log("\u274c Markers already exist on map - preventing recreation"):(console.log("\u2705 Creating markers for",t.length,"NFTs on card map"),Object.values(R.current).forEach((e=>{e&&e.remove&&e.remove()})),R.current={},t.forEach(((e,t)=>{const r=parseFloat(e.latitude),n=parseFloat(e.longitude);if(isNaN(r)||isNaN(n))return void console.warn("Invalid coordinates for NFT:",e.name,{lat:r,lng:n});const o=z(e,r,n,t);o&&(R.current[e.id]=o)})),console.log("All card markers added"))}),[a,C,z]),N=(0,t.useCallback)((async()=>{if(b)console.log("Fetch already in progress, skipping...");else try{x(!0),c(!0),h("");const e=await bc.get("/nft/public");console.log("Public NFTs API response:",e.data);const t=e.data.nfts.map((e=>{var t;return d(d({},e),{},{full_ipfs_url:e.ipfs_hash?"https://bronze-adjacent-barnacle-907.mypinata.cloud/ipfs/".concat(e.ipfs_hash):null,collection:d(d({},e.collection),{},{full_image_url:null!==(t=e.collection)&&void 0!==t&&t.image_url?"https://bronze-adjacent-barnacle-907.mypinata.cloud/ipfs/".concat(e.collection.image_url):null})})}));console.log("Processed public NFTs:",t),console.log("Setting NFTs state with",t.length,"items"),s(t),g(t),M.current=t,console.log("NFTs state set, current nfts.length:",t.length),console.log("nftsRef.current updated with",M.current.length,"items"),I.current&&(console.log("Map is ready, adding markers immediately after NFT fetch"),setTimeout((()=>{D()}),100))}catch(e){console.error("Error fetching public NFTs:",e),h("Failed to load NFT locations. Please try again.")}finally{c(!1),x(!1)}}),[b,D]),B=(0,t.useCallback)((()=>{if(I.current)console.log("Card map already initialized");else{0,console.log("Initializing card map with container:",j.current),console.log("Mapbox token found:","pk.eyJ1Ijoic2VyZ2UzNjl4MzMiLCJhIjoiY20zZHh6M2h2MDVoZzJqcTdudXhidm5kdyJ9.31fpP6C_HjNaTEN3C0fDTg".substring(0,10)+"...");try{I.current=new(nb().Map)({container:j.current,style:"mapbox://styles/mapbox/satellite-streets-v12",center:[0,0],zoom:1,pitch:0,bearing:0,projection:"globe",antialias:!0,interactive:!0}),I.current.addControl(new(nb().NavigationControl),"top-right"),console.log("Card map created successfully"),I.current.on("load",(()=>{console.log("\ud83d\udd0d Card map loaded, using DIRECT marker creation"),console.log("\ud83d\udd0d Map load - nfts.length:",a.length,"nftsRef.length:",M.current.length),M.current.length>0&&(console.log("\ud83d\ude80 Card map loaded with NFTs available, using DIRECT creation"),V()),setTimeout((()=>{M.current.length>0&&(console.log("\ud83d\ude80 Fallback: Direct marker creation after delay"),V())}),1e3)})),I.current.on("movestart",(()=>{A(!0),console.log("User started moving card map - BLOCKING marker updates")})),I.current.on("moveend",(()=>{A(!1),console.log("User finished moving card map - allowing marker updates")})),I.current.on("zoomstart",(()=>{console.log("Card map zoom started - BLOCKING marker updates"),A(!0)})),I.current.on("zoomend",(()=>{console.log("Card map zoom ended - allowing marker updates"),A(!1)})),I.current.on("dragstart",(()=>{A(!0),console.log("Card map drag started - BLOCKING marker updates")})),I.current.on("dragend",(()=>{A(!1),console.log("Card map drag ended - allowing marker updates")}))}catch(e){console.error("Card map initialization error:",e),h("Failed to initialize card map.")}}}),[]),U=(0,t.useCallback)((()=>{if(console.log("initializeFullscreenMap called"),O.current)console.log("Fullscreen map already exists, skipping initialization");else if(P.current&&null!==P.current.offsetParent)try{O.current=new(nb().Map)({container:P.current,style:"mapbox://styles/mapbox/satellite-streets-v12",center:[0,0],zoom:1,pitch:0,bearing:0,projection:"globe",antialias:!0}),O.current.addControl(new(nb().NavigationControl),"top-right"),O.current.addControl(new(nb().FullscreenControl),"top-right"),O.current.addControl(new(nb().ScaleControl),"bottom-left"),O.current.on("load",(()=>{if(console.log("\ud83d\udd0d Fullscreen map loaded, using DIRECT marker creation"),console.log("\ud83d\udd0d Fullscreen map load - nfts.length:",a.length,"filteredNFTs.length:",m.length),a.length>0){console.log("\ud83d\ude80 Fullscreen map loaded with NFTs available, using DIRECT creation"),W();const e=new(nb().LngLatBounds);a.forEach((t=>{t.latitude&&t.longitude&&e.extend([Number(t.longitude),Number(t.latitude)])})),e.isEmpty()||O.current.fitBounds(e,{padding:50,maxZoom:10})}else console.log("\ud83d\ude80 Fullscreen map loaded but no NFTs yet, will add markers when NFTs are available");setTimeout((()=>{a.length>0&&(console.log("\ud83d\ude80 Fallback: Direct fullscreen marker creation after delay"),W())}),1e3)})),O.current.on("movestart",(()=>{A(!0),console.log("User started moving fullscreen map - BLOCKING marker updates")})),O.current.on("moveend",(()=>{A(!1),console.log("User finished moving fullscreen map - allowing marker updates")})),O.current.on("zoomstart",(()=>{console.log("Fullscreen map zoom started - BLOCKING marker updates"),A(!0)})),O.current.on("zoomend",(()=>{console.log("Fullscreen map zoom ended - allowing marker updates"),A(!1)})),O.current.on("dragstart",(()=>{A(!0),console.log("Fullscreen map drag started - BLOCKING marker updates")})),O.current.on("dragend",(()=>{A(!1),console.log("Fullscreen map drag ended - allowing marker updates")}))}catch(e){console.error("Fullscreen map initialization error:",e),h("Failed to initialize fullscreen map.")}else console.warn("Fullscreen map container not ready")}),[]),V=(0,t.useCallback)((()=>{if(console.log("\ud83d\ude80 DIRECT MARKER CREATION - bypassing all logic"),!I.current)return void console.log("\u274c No map available for direct creation");const e=M.current||[];if(console.log("\ud83d\ude80 Direct creation with",e.length,"NFTs"),0===e.length)return void console.log("\u274c No NFTs for direct creation");const t=document.querySelectorAll('.nft-marker[data-map="small"]');console.log("\ud83d\ude80 Clearing",t.length,"existing small map markers"),t.forEach((e=>e.remove())),e.forEach(((e,t)=>{console.log("\ud83d\ude80 Creating direct marker ".concat(t+1," for NFT:"),e.name||"Unnamed","at",e.latitude,e.longitude);try{const r=document.createElement("div");if(r.className="nft-marker",r.setAttribute("data-map","small"),r.style.width="40px",r.style.height="40px",r.style.borderRadius="8px",r.style.border="3px solid #fff",r.style.boxShadow="0 2px 8px rgba(0,0,0,0.3)",r.style.cursor="pointer",r.style.display="flex",r.style.alignItems="center",r.style.justifyContent="center",r.style.fontSize="12px",r.style.fontWeight="bold",r.style.color="#fff",r.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)",r.style.overflow="hidden",e.ipfs_hash){const t=document.createElement("img");t.src="https://ipfs.io/ipfs/".concat(e.ipfs_hash),t.style.width="100%",t.style.height="100%",t.style.borderRadius="6px",t.style.objectFit="cover",t.onerror=()=>{console.log("Image failed to load for NFT:",e.id),r.style.background="linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 100%)",r.innerHTML=e.name?e.name.charAt(0).toUpperCase():"N"},r.appendChild(t)}else r.innerHTML=e.name?e.name.charAt(0).toUpperCase():"N";r.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),console.log("Direct marker clicked, opening NFT details:",e),G(e)})),r.addEventListener("dblclick",(t=>{t.preventDefault(),t.stopPropagation(),console.log("Direct marker double-clicked, zooming to location"),I.current.flyTo({center:[Number(e.longitude),Number(e.latitude)],zoom:15,duration:1e3})})),new(nb().Marker)(r).setLngLat([Number(e.longitude),Number(e.latitude)]).addTo(I.current),console.log("\u2705 Direct marker ".concat(t+1," created successfully with image"))}catch(u){console.error("\u274c Error creating direct marker ".concat(t+1,":"),u)}})),console.log("\ud83d\ude80 Direct marker creation completed")}),[]),W=(0,t.useCallback)((()=>{if(console.log("\ud83d\ude80 DIRECT FULLSCREEN MARKER CREATION - bypassing all logic"),!O.current)return void console.log("\u274c No fullscreen map available for direct creation");const e=m.length>0?m:a;if(console.log("\ud83d\ude80 Direct fullscreen creation with",e.length,"NFTs"),0===e.length)return void console.log("\u274c No NFTs for direct fullscreen creation");const t=document.querySelectorAll('.nft-marker[data-map="fullscreen"]');console.log("\ud83d\ude80 Clearing",t.length,"existing fullscreen markers"),t.forEach((e=>e.remove())),e.forEach(((e,t)=>{console.log("\ud83d\ude80 Creating direct fullscreen marker ".concat(t+1," for NFT:"),e.name||"Unnamed","at",e.latitude,e.longitude);try{const r=document.createElement("div");if(r.className="nft-marker",r.setAttribute("data-map","fullscreen"),r.style.width="50px",r.style.height="50px",r.style.borderRadius="8px",r.style.border="3px solid #fff",r.style.boxShadow="0 2px 8px rgba(0,0,0,0.3)",r.style.cursor="pointer",r.style.display="flex",r.style.alignItems="center",r.style.justifyContent="center",r.style.fontSize="12px",r.style.fontWeight="bold",r.style.color="#fff",r.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)",r.style.overflow="hidden",e.ipfs_hash){const t=document.createElement("img");t.src="https://ipfs.io/ipfs/".concat(e.ipfs_hash),t.style.width="100%",t.style.height="100%",t.style.borderRadius="6px",t.style.objectFit="cover",t.onerror=()=>{console.log("Image failed to load for fullscreen NFT:",e.id),r.style.background="linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 100%)",r.innerHTML=e.name?e.name.charAt(0).toUpperCase():"N"},r.appendChild(t)}else r.innerHTML=e.name?e.name.charAt(0).toUpperCase():"N";r.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),console.log("Direct fullscreen marker clicked, opening NFT details:",e),G(e)})),r.addEventListener("dblclick",(t=>{t.preventDefault(),t.stopPropagation(),console.log("Direct fullscreen marker double-clicked, zooming to location"),O.current.flyTo({center:[Number(e.longitude),Number(e.latitude)],zoom:15,duration:1e3})})),new(nb().Marker)(r).setLngLat([Number(e.longitude),Number(e.latitude)]).addTo(O.current),console.log("\u2705 Direct fullscreen marker ".concat(t+1," created successfully with image"))}catch(u){console.error("\u274c Error creating direct fullscreen marker ".concat(t+1,":"),u)}})),console.log("\ud83d\ude80 Direct fullscreen marker creation completed")}),[a,m]),q=()=>{i(!0);const e=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(console.log("Attempt ".concat(t," to initialize fullscreen map...")),P.current&&null!==P.current.offsetParent&&!O.current){console.log("Container found and visible, initializing map...");try{U()}catch(u){console.error("Map initialization failed:",u),h("Failed to initialize map. Please check your Mapbox token.")}}else t<5?(console.log("Container not ready, retrying in ".concat(300*t,"ms...")),setTimeout((()=>e(t+1)),300*t)):(console.warn("Fullscreen map initialization failed after 5 attempts - container not ready"),h("Map failed to load. Please refresh the page and try again."))};setTimeout((()=>e()),500)},H=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=e?e.place_name:p;if(!t.trim())return g([]),void E(!1);try{if(console.log("Searching for:",t),e){const[t,r]=e.center;O.current&&O.current.flyTo({center:[t,r],zoom:15,duration:1e3}),E(!1),f("")}else{const e=t.toLowerCase().trim(),r=a.filter((t=>{var r;const n=(t.name||t.nft_name||"").toLowerCase(),o=(t.description||t.nft_description||"").toLowerCase(),i=((null===(r=t.collection)||void 0===r?void 0:r.name)||"").toLowerCase();return n.includes(e)||o.includes(e)||i.includes(e)}));if(console.log('Search "'.concat(t,'" found ').concat(r.length," results:"),r.map((e=>e.name||e.nft_name))),g(r),O.current&&r.length>0){const e=new(nb().LngLatBounds);r.forEach((t=>{t.latitude&&t.longitude&&e.extend([Number(t.longitude),Number(t.latitude)])})),e.isEmpty()||O.current.fitBounds(e,{padding:50,maxZoom:15})}}}catch(u){console.error("Search error:",u)}},G=e=>{v(e),w(!0)},K=()=>{w(!1),v(null)},X=()=>{i(!1),f(""),g(a),O.current&&(O.current.remove(),O.current=null)};return(0,t.useEffect)((()=>{(async()=>{j.current&&!I.current&&(await N(),setTimeout((()=>{B()}),500))})()}),[N,B]),(0,t.useEffect)((()=>{o&&P.current&&!O.current&&setTimeout((()=>{U()}),100)}),[o,U]),(0,t.useEffect)((()=>{o&&O.current&&a.length>0&&(console.log("\ud83d\ude80 Fullscreen dialog opened with map ready - creating markers for",a.length,"NFTs"),W())}),[o,a.length,W]),(0,t.useEffect)((()=>{o&&(console.log("\ud83d\ude80 Dialog opened - attempting fullscreen marker creation"),O.current&&a.length>0&&(console.log("\ud83d\ude80 Immediate fullscreen marker creation"),W()),setTimeout((()=>{O.current&&a.length>0&&(console.log("\ud83d\ude80 Delayed fullscreen marker creation"),W())}),500),setTimeout((()=>{O.current&&a.length>0&&(console.log("\ud83d\ude80 Long delayed fullscreen marker creation"),W())}),1500))}),[o,a.length,W]),(0,t.useEffect)((()=>{console.log("\ud83d\udd0d NFTs useEffect triggered with nfts.length:",a.length),console.log("\ud83d\udd0d Map states - card map:",!!I.current,"fullscreen map:",!!O.current),I.current&&a.length>0?(console.log("\u2705 NFTs useEffect: Using DIRECT marker creation for",a.length,"NFTs"),V()):console.log("\u274c NFTs useEffect: Conditions not met",{hasMap:!!I.current,hasNFTs:a.length>0}),O.current&&a.length>0&&(console.log("\u2705 NFTs useEffect: Using DIRECT fullscreen marker creation for",a.length,"NFTs"),W())}),[a.length,W,V]),(0,t.useEffect)((()=>{console.log("\ud83d\udd0d Map availability useEffect - card map:",!!I.current,"fullscreen map:",!!O.current,"NFTs:",a.length),I.current&&a.length>0?(console.log("\u2705 Map availability: Using DIRECT marker creation for",a.length,"NFTs"),V()):console.log("\u274c Map availability: Conditions not met",{hasMap:!!I.current,hasNFTs:a.length>0}),O.current&&a.length>0&&(console.log("\u2705 Map availability: Using DIRECT fullscreen marker creation for",a.length,"NFTs"),W())}),[a.length,W,V]),(0,t.useEffect)((()=>{O.current&&o&&(console.log("Search results changed, using DIRECT fullscreen marker creation"),W())}),[m,o,W]),(0,St.jsxs)(St.Fragment,{children:[(0,St.jsx)(uu,{sx:{py:{xs:4,md:6},bgcolor:"background.default"},children:(0,St.jsxs)(dp,{maxWidth:"lg",children:[(0,St.jsxs)(uu,{textAlign:"center",mb:4,children:[(0,St.jsx)(Bu,{variant:"h3",component:"h2",gutterBottom:!0,sx:{fontWeight:"bold",color:"text.primary",mb:2},children:"Explore Global NFT Collection"}),(0,St.jsx)(Bu,{variant:"h6",color:"text.secondary",sx:{mb:4,maxWidth:600,mx:"auto"},children:"Discover NFTs pinned by NFT Managers around the world. Browse the interactive map to see the global distribution of blockchain assets."})]}),(0,St.jsxs)(Jm,{container:!0,spacing:4,alignItems:"center",children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsxs)(tg,{sx:{height:300,position:"relative",overflow:"hidden",cursor:"pointer",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.02)"}},onClick:q,children:[(0,St.jsx)(uu,{ref:j,sx:{width:"100%",height:"100%",position:"absolute",top:0,left:0}}),(0,St.jsx)(uu,{sx:{position:"absolute",bottom:16,right:16},children:(0,St.jsx)(Ap,{variant:"contained",startIcon:(0,St.jsx)(Qv,{}),size:"small",sx:{background:"linear-gradient(135deg, #FFD700, #FFA500)",color:"black",fontWeight:"bold","&:hover":{background:"linear-gradient(135deg, #FFA500, #FF8C00)"}},children:"View Full Map"})})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsxs)(uu,{children:[(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Global NFT Showcase"}),(0,St.jsx)(Bu,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Our platform hosts NFTs from NFT Managers worldwide, creating a comprehensive view of blockchain asset distribution across the globe."}),(0,St.jsxs)(uu,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:3},children:[(0,St.jsx)(yg,{icon:(0,St.jsx)(vg,{}),label:"Global Coverage",color:"primary",variant:"outlined"}),(0,St.jsx)(yg,{icon:(0,St.jsx)(Tg,{}),label:"Public Access",color:"secondary",variant:"outlined"}),(0,St.jsx)(yg,{icon:(0,St.jsx)(Qv,{}),label:"Interactive View",color:"primary",variant:"outlined"})]}),(0,St.jsx)(Ap,{variant:"outlined",size:"large",onClick:q,startIcon:(0,St.jsx)(eb,{}),sx:{borderColor:"primary.main",color:"primary.main","&:hover":{borderColor:"primary.dark",backgroundColor:"primary.light",color:"primary.dark"}},children:"Explore Full Map"})]})})]})]})}),(0,St.jsxs)(Ng,{open:o,onClose:X,fullScreen:F,maxWidth:"xl",fullWidth:!0,PaperProps:{sx:{height:F?"100vh":"80vh",maxHeight:"80vh"}},children:[(0,St.jsxs)(qg,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"primary.main",color:"white",flexDirection:{xs:"column",sm:"row"},gap:2},children:[(0,St.jsxs)(Bu,{variant:"h6",component:"div",children:["\ud83c\udf0d Global NFT Collection Map",p&&(0,St.jsx)(Bu,{variant:"body2",sx:{opacity:.8,mt:.5},children:m.length>0?"Found ".concat(m.length," result").concat(1===m.length?"":"s",' for "').concat(p,'"'):'No results found for "'.concat(p,'"')})]}),(0,St.jsxs)(uu,{sx:{position:"relative"},children:[(0,St.jsx)(Uv,{placeholder:"Search locations or NFTs...",value:p,onChange:e=>{f(e.target.value),(async e=>{if(!e.trim()||e.length<2)return k([]),void E(!1);try{console.log("Autocomplete search for:",e);const t="pk.eyJ1Ijoic2VyZ2UzNjl4MzMiLCJhIjoiY20zZHh6M2h2MDVoZzJqcTdudXhidm5kdyJ9.31fpP6C_HjNaTEN3C0fDTg";if(!t)return void console.error("Mapbox token not configured");const r=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json?access_token=").concat(t,"&limit=5&autocomplete=true"));if(!r.ok)throw new Error("Autocomplete search failed");const n=await r.json();console.log("Autocomplete results:",n.features),n.features&&n.features.length>0?(k(n.features),E(!0)):(k([]),E(!1))}catch(u){console.error("Autocomplete error:",u),k([]),E(!1)}})(e.target.value)},onKeyPress:e=>{"Enter"===e.key&&H()},size:"small",InputProps:{startAdornment:(0,St.jsx)(Xv,{position:"start",children:(0,St.jsx)(tb,{sx:{color:"rgba(0,0,0,0.6)"}})})},sx:{minWidth:300,"& .MuiOutlinedInput-root":{backgroundColor:"white","& fieldset":{borderColor:"rgba(255,255,255,0.3)"},"&:hover fieldset":{borderColor:"rgba(255,255,255,0.5)"},"&.Mui-focused fieldset":{borderColor:"white"}},"& .MuiInputBase-input":{color:"black"}}}),T&&S.length>0&&(0,St.jsx)(uu,{sx:{position:"absolute",top:"100%",left:0,right:0,zIndex:1e3,bgcolor:"white",border:"1px solid #ccc",borderRadius:1,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",maxHeight:200,overflow:"auto"},children:S.map(((e,t)=>{var r;return(0,St.jsxs)(uu,{onClick:()=>H(e),sx:{p:1.5,cursor:"pointer",borderBottom:"1px solid #eee","&:hover":{bgcolor:"#f5f5f5"},"&:last-child":{borderBottom:"none"}},children:[(0,St.jsx)(Bu,{variant:"body2",sx:{fontWeight:"bold",color:"#333"},children:e.place_name}),(0,St.jsx)(Bu,{variant:"caption",sx:{color:"#666"},children:null===(r=e.context)||void 0===r?void 0:r.map((e=>e.text)).join(", ")})]},t)}))})]}),p&&(0,St.jsx)(Ap,{onClick:()=>{f(""),g([]),k([]),E(!1)},size:"small",sx:{color:"white",borderColor:"rgba(255,255,255,0.3)","&:hover":{borderColor:"rgba(255,255,255,0.5)",backgroundColor:"rgba(255,255,255,0.1)"}},variant:"outlined",children:"Clear"}),(0,St.jsx)(th,{onClick:X,sx:{color:"white"},children:(0,St.jsx)(Nm,{})})]}),(0,St.jsxs)($v,{sx:{p:0,position:"relative"},children:[u&&(0,St.jsx)(uu,{sx:{p:2,bgcolor:"error.light",color:"error.contrastText"},children:u}),(0,St.jsx)(uu,{ref:P,sx:{width:"100%",height:"100%",minHeight:400}}),l&&(0,St.jsx)(uu,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"rgba(255,255,255,0.9)",p:2,borderRadius:1,boxShadow:2},children:(0,St.jsx)(Bu,{children:"Loading NFT locations..."})}),!l&&0===a.length&&(0,St.jsxs)(uu,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"rgba(255,255,255,0.9)",p:3,borderRadius:1,boxShadow:2,textAlign:"center"},children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"No NFTs Available"}),(0,St.jsx)(Bu,{variant:"body2",color:"text.secondary",children:"No NFTs have been pinned yet. Check back later!"})]})]})]}),(0,St.jsx)(Ng,{open:_,onClose:K,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:2,background:"linear-gradient(135deg, #f8f9fa, #ffffff)"}},children:y&&(0,St.jsxs)(St.Fragment,{children:[(0,St.jsxs)(qg,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"primary.main",color:"white"},children:[(0,St.jsxs)(Bu,{variant:"h6",component:"div",children:["\ud83d\uddbc\ufe0f ",y.name||y.nft_name||"Unnamed NFT"]}),(0,St.jsx)(th,{onClick:K,sx:{color:"white"},children:(0,St.jsx)(Nm,{})})]}),(0,St.jsx)($v,{sx:{p:3},children:(0,St.jsxs)(Jm,{container:!0,spacing:3,children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsxs)(uu,{sx:{position:"relative",borderRadius:2,overflow:"hidden",boxShadow:"0 8px 24px rgba(0,0,0,0.15)"},children:[y.full_ipfs_url?(0,St.jsx)("img",{src:y.full_ipfs_url,alt:y.name||"NFT",style:{width:"100%",height:"300px",objectFit:"cover",display:"block"},onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,St.jsx)(uu,{sx:{display:y.full_ipfs_url?"none":"flex",width:"100%",height:"300px",alignItems:"center",justifyContent:"center",bgcolor:"grey.100",fontSize:"4rem"},children:"\ud83d\uddbc\ufe0f"})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsxs)(uu,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,St.jsx)(Bu,{variant:"h5",sx:{fontWeight:"bold",mb:2,color:"primary.main"},children:y.name||y.nft_name||"Unnamed NFT"}),(0,St.jsx)(Bu,{variant:"body1",sx:{mb:3,color:"text.secondary",lineHeight:1.6},children:y.description||y.nft_description||"No description available"}),(0,St.jsxs)(uu,{sx:{mb:3,p:2,bgcolor:"grey.50",borderRadius:1},children:[(0,St.jsx)(Bu,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1,color:"primary.main"},children:"\ud83d\udccd Location"}),(0,St.jsxs)(Bu,{variant:"body2",sx:{fontFamily:"monospace",color:"text.secondary"},children:[null===(e=Number(y.latitude))||void 0===e?void 0:e.toFixed(6),", ",null===(r=Number(y.longitude))||void 0===r?void 0:r.toFixed(6)]})]}),(null===(n=y.collection)||void 0===n?void 0:n.name)&&(0,St.jsxs)(uu,{sx:{mb:3,p:2,bgcolor:"warning.light",borderRadius:1},children:[(0,St.jsx)(Bu,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1,color:"warning.contrastText"},children:"\ud83c\udff7\ufe0f Collection"}),(0,St.jsx)(Bu,{variant:"body2",sx:{color:"warning.contrastText"},children:y.collection.name})]}),(0,St.jsxs)(uu,{sx:{mt:"auto",display:"flex",gap:2},children:[(0,St.jsx)(Ap,{variant:"contained",startIcon:(0,St.jsx)(vg,{}),onClick:()=>{K(),i(!0),setTimeout((()=>{P.current&&!O.current?(console.log("Initializing fullscreen map from zoom to location..."),U(),setTimeout((()=>{O.current&&y&&(console.log("Zooming to NFT location:",y.latitude,y.longitude),O.current.flyTo({center:[Number(y.longitude),Number(y.latitude)],zoom:15,duration:1e3}))}),500)):O.current&&O.current.flyTo({center:[Number(y.longitude),Number(y.latitude)],zoom:15,duration:1e3})}),100)},sx:{background:"linear-gradient(135deg, #FFD700, #FFA500)",color:"black",fontWeight:"bold","&:hover":{background:"linear-gradient(135deg, #FFA500, #FF8C00)"}},children:"Zoom to Location"}),(0,St.jsx)(Ap,{variant:"outlined",onClick:K,sx:{borderColor:"primary.main",color:"primary.main"},children:"Close"})]})]})})]})})]})})]})};function ib(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ab(e){return e instanceof ib(e).Element||e instanceof Element}function sb(e){return e instanceof ib(e).HTMLElement||e instanceof HTMLElement}function lb(e){return"undefined"!==typeof ShadowRoot&&(e instanceof ib(e).ShadowRoot||e instanceof ShadowRoot)}var cb=Math.max,ub=Math.min,db=Math.round;function hb(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function pb(){return!/^((?!chrome|android).)*safari/i.test(hb())}function fb(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var n=e.getBoundingClientRect(),o=1,i=1;t&&sb(e)&&(o=e.offsetWidth>0&&db(n.width)/e.offsetWidth||1,i=e.offsetHeight>0&&db(n.height)/e.offsetHeight||1);var a=(ab(e)?ib(e):window).visualViewport,s=!pb()&&r,l=(n.left+(s&&a?a.offsetLeft:0))/o,c=(n.top+(s&&a?a.offsetTop:0))/i,u=n.width/o,d=n.height/i;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function mb(e){var t=ib(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function gb(e){return e?(e.nodeName||"").toLowerCase():null}function yb(e){return((ab(e)?e.ownerDocument:e.document)||window.document).documentElement}function vb(e){return fb(yb(e)).left+mb(e).scrollLeft}function bb(e){return ib(e).getComputedStyle(e)}function xb(e){var t=bb(e),r=t.overflow,n=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+o+n)}function _b(e,t,r){void 0===r&&(r=!1);var n=sb(t),o=sb(t)&&function(e){var t=e.getBoundingClientRect(),r=db(t.width)/e.offsetWidth||1,n=db(t.height)/e.offsetHeight||1;return 1!==r||1!==n}(t),i=yb(t),a=fb(e,o,r),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!r)&&(("body"!==gb(t)||xb(i))&&(s=function(e){return e!==ib(e)&&sb(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:mb(e);var t}(t)),sb(t)?((l=fb(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):i&&(l.x=vb(i))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function wb(e){var t=fb(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function Sb(e){return"html"===gb(e)?e:e.assignedSlot||e.parentNode||(lb(e)?e.host:null)||yb(e)}function kb(e){return["html","body","#document"].indexOf(gb(e))>=0?e.ownerDocument.body:sb(e)&&xb(e)?e:kb(Sb(e))}function Tb(e,t){var r;void 0===t&&(t=[]);var n=kb(e),o=n===(null==(r=e.ownerDocument)?void 0:r.body),i=ib(n),a=o?[i].concat(i.visualViewport||[],xb(n)?n:[]):n,s=t.concat(a);return o?s:s.concat(Tb(Sb(a)))}function Eb(e){return["table","td","th"].indexOf(gb(e))>=0}function Cb(e){return sb(e)&&"fixed"!==bb(e).position?e.offsetParent:null}function Ab(e){for(var t=ib(e),r=Cb(e);r&&Eb(r)&&"static"===bb(r).position;)r=Cb(r);return r&&("html"===gb(r)||"body"===gb(r)&&"static"===bb(r).position)?t:r||function(e){var t=/firefox/i.test(hb());if(/Trident/i.test(hb())&&sb(e)&&"fixed"===bb(e).position)return null;var r=Sb(e);for(lb(r)&&(r=r.host);sb(r)&&["html","body"].indexOf(gb(r))<0;){var n=bb(r);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||t&&"filter"===n.willChange||t&&n.filter&&"none"!==n.filter)return r;r=r.parentNode}return null}(e)||t}var jb="top",Pb="bottom",Ib="right",Ob="left",Mb="auto",Rb=[jb,Pb,Ib,Ob],Lb="start",Fb="end",zb="viewport",Db="popper",Nb=Rb.reduce((function(e,t){return e.concat([t+"-"+Lb,t+"-"+Fb])}),[]),Bb=[].concat(Rb,[Mb]).reduce((function(e,t){return e.concat([t,t+"-"+Lb,t+"-"+Fb])}),[]),Ub=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Vb(e){var t=new Map,r=new Set,n=[];function o(e){r.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!r.has(e)){var n=t.get(e);n&&o(n)}})),n.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){r.has(e.name)||o(e)})),n}function Wb(e){var t;return function(){return t||(t=new Promise((function(r){Promise.resolve().then((function(){t=void 0,r(e())}))}))),t}}var qb={placement:"bottom",modifiers:[],strategy:"absolute"};function Hb(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function Gb(e){void 0===e&&(e={});var t=e,r=t.defaultModifiers,n=void 0===r?[]:r,o=t.defaultOptions,i=void 0===o?qb:o;return function(e,t,r){void 0===r&&(r=i);var o={placement:"bottom",orderedModifiers:[],options:Object.assign({},qb,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],s=!1,l={state:o,setOptions:function(r){var s="function"===typeof r?r(o.options):r;c(),o.options=Object.assign({},i,o.options,s),o.scrollParents={reference:ab(e)?Tb(e):e.contextElement?Tb(e.contextElement):[],popper:Tb(t)};var u=function(e){var t=Vb(e);return Ub.reduce((function(e,r){return e.concat(t.filter((function(e){return e.phase===r})))}),[])}(function(e){var t=e.reduce((function(e,t){var r=e[t.name];return e[t.name]=r?Object.assign({},r,t,{options:Object.assign({},r.options,t.options),data:Object.assign({},r.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(n,o.options.modifiers)));return o.orderedModifiers=u.filter((function(e){return e.enabled})),o.orderedModifiers.forEach((function(e){var t=e.name,r=e.options,n=void 0===r?{}:r,i=e.effect;if("function"===typeof i){var s=i({state:o,name:t,instance:l,options:n}),c=function(){};a.push(s||c)}})),l.update()},forceUpdate:function(){if(!s){var e=o.elements,t=e.reference,r=e.popper;if(Hb(t,r)){o.rects={reference:_b(t,Ab(r),"fixed"===o.options.strategy),popper:wb(r)},o.reset=!1,o.placement=o.options.placement,o.orderedModifiers.forEach((function(e){return o.modifiersData[e.name]=Object.assign({},e.data)}));for(var n=0;n<o.orderedModifiers.length;n++)if(!0!==o.reset){var i=o.orderedModifiers[n],a=i.fn,c=i.options,u=void 0===c?{}:c,d=i.name;"function"===typeof a&&(o=a({state:o,options:u,name:d,instance:l})||o)}else o.reset=!1,n=-1}}},update:Wb((function(){return new Promise((function(e){l.forceUpdate(),e(o)}))})),destroy:function(){c(),s=!0}};if(!Hb(e,t))return l;function c(){a.forEach((function(e){return e()})),a=[]}return l.setOptions(r).then((function(e){!s&&r.onFirstUpdate&&r.onFirstUpdate(e)})),l}}var Kb={passive:!0};function Xb(e){return e.split("-")[0]}function Zb(e){return e.split("-")[1]}function Yb(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Jb(e){var t,r=e.reference,n=e.element,o=e.placement,i=o?Xb(o):null,a=o?Zb(o):null,s=r.x+r.width/2-n.width/2,l=r.y+r.height/2-n.height/2;switch(i){case jb:t={x:s,y:r.y-n.height};break;case Pb:t={x:s,y:r.y+r.height};break;case Ib:t={x:r.x+r.width,y:l};break;case Ob:t={x:r.x-n.width,y:l};break;default:t={x:r.x,y:r.y}}var c=i?Yb(i):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case Lb:t[c]=t[c]-(r[u]/2-n[u]/2);break;case Fb:t[c]=t[c]+(r[u]/2-n[u]/2)}}return t}var $b={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Qb(e){var t,r=e.popper,n=e.popperRect,o=e.placement,i=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,h=a.x,p=void 0===h?0:h,f=a.y,m=void 0===f?0:f,g="function"===typeof u?u({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var y=a.hasOwnProperty("x"),v=a.hasOwnProperty("y"),b=Ob,x=jb,_=window;if(c){var w=Ab(r),S="clientHeight",k="clientWidth";if(w===ib(r)&&"static"!==bb(w=yb(r)).position&&"absolute"===s&&(S="scrollHeight",k="scrollWidth"),o===jb||(o===Ob||o===Ib)&&i===Fb)x=Pb,m-=(d&&w===_&&_.visualViewport?_.visualViewport.height:w[S])-n.height,m*=l?1:-1;if(o===Ob||(o===jb||o===Pb)&&i===Fb)b=Ib,p-=(d&&w===_&&_.visualViewport?_.visualViewport.width:w[k])-n.width,p*=l?1:-1}var T,E=Object.assign({position:s},c&&$b),C=!0===u?function(e,t){var r=e.x,n=e.y,o=t.devicePixelRatio||1;return{x:db(r*o)/o||0,y:db(n*o)/o||0}}({x:p,y:m},ib(r)):{x:p,y:m};return p=C.x,m=C.y,l?Object.assign({},E,((T={})[x]=v?"0":"",T[b]=y?"0":"",T.transform=(_.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",T)):Object.assign({},E,((t={})[x]=v?m+"px":"",t[b]=y?p+"px":"",t.transform="",t))}const ex={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var r=t.styles[e]||{},n=t.attributes[e]||{},o=t.elements[e];sb(o)&&gb(o)&&(Object.assign(o.style,r),Object.keys(n).forEach((function(e){var t=n[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach((function(e){var n=t.elements[e],o=t.attributes[e]||{},i=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:r[e]).reduce((function(e,t){return e[t]="",e}),{});sb(n)&&gb(n)&&(Object.assign(n.style,i),Object.keys(o).forEach((function(e){n.removeAttribute(e)})))}))}},requires:["computeStyles"]};const tx={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,r=e.options,n=e.name,o=r.offset,i=void 0===o?[0,0]:o,a=Bb.reduce((function(e,r){return e[r]=function(e,t,r){var n=Xb(e),o=[Ob,jb].indexOf(n)>=0?-1:1,i="function"===typeof r?r(Object.assign({},t,{placement:e})):r,a=i[0],s=i[1];return a=a||0,s=(s||0)*o,[Ob,Ib].indexOf(n)>=0?{x:s,y:a}:{x:a,y:s}}(r,t.rects,i),e}),{}),s=a[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=a}};var rx={left:"right",right:"left",bottom:"top",top:"bottom"};function nx(e){return e.replace(/left|right|bottom|top/g,(function(e){return rx[e]}))}var ox={start:"end",end:"start"};function ix(e){return e.replace(/start|end/g,(function(e){return ox[e]}))}function ax(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&lb(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function sx(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function lx(e,t,r){return t===zb?sx(function(e,t){var r=ib(e),n=yb(e),o=r.visualViewport,i=n.clientWidth,a=n.clientHeight,s=0,l=0;if(o){i=o.width,a=o.height;var c=pb();(c||!c&&"fixed"===t)&&(s=o.offsetLeft,l=o.offsetTop)}return{width:i,height:a,x:s+vb(e),y:l}}(e,r)):ab(t)?function(e,t){var r=fb(e,!1,"fixed"===t);return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}(t,r):sx(function(e){var t,r=yb(e),n=mb(e),o=null==(t=e.ownerDocument)?void 0:t.body,i=cb(r.scrollWidth,r.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=cb(r.scrollHeight,r.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),s=-n.scrollLeft+vb(e),l=-n.scrollTop;return"rtl"===bb(o||r).direction&&(s+=cb(r.clientWidth,o?o.clientWidth:0)-i),{width:i,height:a,x:s,y:l}}(yb(e)))}function cx(e,t,r,n){var o="clippingParents"===t?function(e){var t=Tb(Sb(e)),r=["absolute","fixed"].indexOf(bb(e).position)>=0&&sb(e)?Ab(e):e;return ab(r)?t.filter((function(e){return ab(e)&&ax(e,r)&&"body"!==gb(e)})):[]}(e):[].concat(t),i=[].concat(o,[r]),a=i[0],s=i.reduce((function(t,r){var o=lx(e,r,n);return t.top=cb(o.top,t.top),t.right=ub(o.right,t.right),t.bottom=ub(o.bottom,t.bottom),t.left=cb(o.left,t.left),t}),lx(e,a,n));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function ux(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function dx(e,t){return t.reduce((function(t,r){return t[r]=e,t}),{})}function hx(e,t){void 0===t&&(t={});var r=t,n=r.placement,o=void 0===n?e.placement:n,i=r.strategy,a=void 0===i?e.strategy:i,s=r.boundary,l=void 0===s?"clippingParents":s,c=r.rootBoundary,u=void 0===c?zb:c,d=r.elementContext,h=void 0===d?Db:d,p=r.altBoundary,f=void 0!==p&&p,m=r.padding,g=void 0===m?0:m,y=ux("number"!==typeof g?g:dx(g,Rb)),v=h===Db?"reference":Db,b=e.rects.popper,x=e.elements[f?v:h],_=cx(ab(x)?x:x.contextElement||yb(e.elements.popper),l,u,a),w=fb(e.elements.reference),S=Jb({reference:w,element:b,strategy:"absolute",placement:o}),k=sx(Object.assign({},b,S)),T=h===Db?k:w,E={top:_.top-T.top+y.top,bottom:T.bottom-_.bottom+y.bottom,left:_.left-T.left+y.left,right:T.right-_.right+y.right},C=e.modifiersData.offset;if(h===Db&&C){var A=C[o];Object.keys(E).forEach((function(e){var t=[Ib,Pb].indexOf(e)>=0?1:-1,r=[jb,Pb].indexOf(e)>=0?"y":"x";E[e]+=A[r]*t}))}return E}const px={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var o=r.mainAxis,i=void 0===o||o,a=r.altAxis,s=void 0===a||a,l=r.fallbackPlacements,c=r.padding,u=r.boundary,d=r.rootBoundary,h=r.altBoundary,p=r.flipVariations,f=void 0===p||p,m=r.allowedAutoPlacements,g=t.options.placement,y=Xb(g),v=l||(y===g||!f?[nx(g)]:function(e){if(Xb(e)===Mb)return[];var t=nx(e);return[ix(e),t,ix(t)]}(g)),b=[g].concat(v).reduce((function(e,r){return e.concat(Xb(r)===Mb?function(e,t){void 0===t&&(t={});var r=t,n=r.placement,o=r.boundary,i=r.rootBoundary,a=r.padding,s=r.flipVariations,l=r.allowedAutoPlacements,c=void 0===l?Bb:l,u=Zb(n),d=u?s?Nb:Nb.filter((function(e){return Zb(e)===u})):Rb,h=d.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=d);var p=h.reduce((function(t,r){return t[r]=hx(e,{placement:r,boundary:o,rootBoundary:i,padding:a})[Xb(r)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:r,boundary:u,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:m}):r)}),[]),x=t.rects.reference,_=t.rects.popper,w=new Map,S=!0,k=b[0],T=0;T<b.length;T++){var E=b[T],C=Xb(E),A=Zb(E)===Lb,j=[jb,Pb].indexOf(C)>=0,P=j?"width":"height",I=hx(t,{placement:E,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),O=j?A?Ib:Ob:A?Pb:jb;x[P]>_[P]&&(O=nx(O));var M=nx(O),R=[];if(i&&R.push(I[C]<=0),s&&R.push(I[O]<=0,I[M]<=0),R.every((function(e){return e}))){k=E,S=!1;break}w.set(E,R)}if(S)for(var L=function(e){var t=b.find((function(t){var r=w.get(t);if(r)return r.slice(0,e).every((function(e){return e}))}));if(t)return k=t,"break"},F=f?3:1;F>0;F--){if("break"===L(F))break}t.placement!==k&&(t.modifiersData[n]._skip=!0,t.placement=k,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function fx(e,t,r){return cb(e,ub(t,r))}const mx={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,r=e.options,n=e.name,o=r.mainAxis,i=void 0===o||o,a=r.altAxis,s=void 0!==a&&a,l=r.boundary,c=r.rootBoundary,u=r.altBoundary,d=r.padding,h=r.tether,p=void 0===h||h,f=r.tetherOffset,m=void 0===f?0:f,g=hx(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),y=Xb(t.placement),v=Zb(t.placement),b=!v,x=Yb(y),_="x"===x?"y":"x",w=t.modifiersData.popperOffsets,S=t.rects.reference,k=t.rects.popper,T="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,E="number"===typeof T?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),C=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,A={x:0,y:0};if(w){if(i){var j,P="y"===x?jb:Ob,I="y"===x?Pb:Ib,O="y"===x?"height":"width",M=w[x],R=M+g[P],L=M-g[I],F=p?-k[O]/2:0,z=v===Lb?S[O]:k[O],D=v===Lb?-k[O]:-S[O],N=t.elements.arrow,B=p&&N?wb(N):{width:0,height:0},U=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=U[P],W=U[I],q=fx(0,S[O],B[O]),H=b?S[O]/2-F-q-V-E.mainAxis:z-q-V-E.mainAxis,G=b?-S[O]/2+F+q+W+E.mainAxis:D+q+W+E.mainAxis,K=t.elements.arrow&&Ab(t.elements.arrow),X=K?"y"===x?K.clientTop||0:K.clientLeft||0:0,Z=null!=(j=null==C?void 0:C[x])?j:0,Y=M+G-Z,J=fx(p?ub(R,M+H-Z-X):R,M,p?cb(L,Y):L);w[x]=J,A[x]=J-M}if(s){var $,Q="x"===x?jb:Ob,ee="x"===x?Pb:Ib,te=w[_],re="y"===_?"height":"width",ne=te+g[Q],oe=te-g[ee],ie=-1!==[jb,Ob].indexOf(y),ae=null!=($=null==C?void 0:C[_])?$:0,se=ie?ne:te-S[re]-k[re]-ae+E.altAxis,le=ie?te+S[re]+k[re]-ae-E.altAxis:oe,ce=p&&ie?function(e,t,r){var n=fx(e,t,r);return n>r?r:n}(se,te,le):fx(p?se:ne,te,p?le:oe);w[_]=ce,A[_]=ce-te}t.modifiersData[n]=A}},requiresIfExists:["offset"]};const gx={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,r=e.state,n=e.name,o=e.options,i=r.elements.arrow,a=r.modifiersData.popperOffsets,s=Xb(r.placement),l=Yb(s),c=[Ob,Ib].indexOf(s)>=0?"height":"width";if(i&&a){var u=function(e,t){return ux("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:dx(e,Rb))}(o.padding,r),d=wb(i),h="y"===l?jb:Ob,p="y"===l?Pb:Ib,f=r.rects.reference[c]+r.rects.reference[l]-a[l]-r.rects.popper[c],m=a[l]-r.rects.reference[l],g=Ab(i),y=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,v=f/2-m/2,b=u[h],x=y-d[c]-u[p],_=y/2-d[c]/2+v,w=fx(b,_,x),S=l;r.modifiersData[n]=((t={})[S]=w,t.centerOffset=w-_,t)}},effect:function(e){var t=e.state,r=e.options.element,n=void 0===r?"[data-popper-arrow]":r;null!=n&&("string"!==typeof n||(n=t.elements.popper.querySelector(n)))&&ax(t.elements.popper,n)&&(t.elements.arrow=n)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function yx(e,t,r){return void 0===r&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function vx(e){return[jb,Ib,Pb,Ob].some((function(t){return e[t]>=0}))}var bx=Gb({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,r=e.instance,n=e.options,o=n.scroll,i=void 0===o||o,a=n.resize,s=void 0===a||a,l=ib(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&c.forEach((function(e){e.addEventListener("scroll",r.update,Kb)})),s&&l.addEventListener("resize",r.update,Kb),function(){i&&c.forEach((function(e){e.removeEventListener("scroll",r.update,Kb)})),s&&l.removeEventListener("resize",r.update,Kb)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,r=e.name;t.modifiersData[r]=Jb({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,r=e.options,n=r.gpuAcceleration,o=void 0===n||n,i=r.adaptive,a=void 0===i||i,s=r.roundOffsets,l=void 0===s||s,c={placement:Xb(t.placement),variation:Zb(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Qb(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Qb(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},ex,tx,px,mx,gx,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,r=e.name,n=t.rects.reference,o=t.rects.popper,i=t.modifiersData.preventOverflow,a=hx(t,{elementContext:"reference"}),s=hx(t,{altBoundary:!0}),l=yx(a,n),c=yx(s,o,i),u=vx(l),d=vx(c);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]});function xx(e){return iu("MuiPopper",e)}au("MuiPopper",["root"]);const _x=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],wx=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function Sx(e){return"function"===typeof e?e():e}function kx(e){return void 0!==e.nodeType}const Tx={},Ex=t.forwardRef((function(e,r){var n;const{anchorEl:o,children:i,direction:s,disablePortal:l,modifiers:c,open:u,placement:h,popperOptions:p,popperRef:f,slotProps:m={},slots:g={},TransitionProps:y,ownerState:v}=e,b=a(e,_x),x=t.useRef(null),_=Ku(x,r),w=t.useRef(null),S=Ku(w,f),k=t.useRef(S);jo((()=>{k.current=S}),[S]),t.useImperativeHandle(f,(()=>w.current),[]);const T=function(e,t){if("ltr"===t)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(h,s),[E,C]=t.useState(T),[A,j]=t.useState(Sx(o));t.useEffect((()=>{w.current&&w.current.forceUpdate()})),t.useEffect((()=>{o&&j(Sx(o))}),[o]),jo((()=>{if(!A||!u)return;let e=[{name:"preventOverflow",options:{altBoundary:l}},{name:"flip",options:{altBoundary:l}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:e=>{let{state:t}=e;(e=>{C(e.placement)})(t)}}];null!=c&&(e=e.concat(c)),p&&null!=p.modifiers&&(e=e.concat(p.modifiers));const t=bx(A,x.current,d(d({placement:T},p),{},{modifiers:e}));return k.current(t),()=>{t.destroy(),k.current(null)}}),[A,l,c,u,p,T]);const P={placement:E};null!==y&&(P.TransitionProps=y);const I=(e=>{const{classes:t}=e;return du({root:["root"]},xx,t)})(e),O=null!==(n=g.root)&&void 0!==n?n:"div",M=Pp({elementType:O,externalSlotProps:m.root,externalForwardedProps:b,additionalProps:{role:"tooltip",ref:_},ownerState:e,className:I.root});return(0,St.jsx)(O,d(d({},M),{},{children:"function"===typeof i?i(P):i}))})),Cx=t.forwardRef((function(e,r){const{anchorEl:n,children:o,container:i,direction:s="ltr",disablePortal:l=!1,keepMounted:c=!1,modifiers:u,open:h,placement:p="bottom",popperOptions:f=Tx,popperRef:m,style:g,transition:y=!1,slotProps:v={},slots:b={}}=e,x=a(e,wx),[_,w]=t.useState(!0);if(!c&&!h&&(!y||_))return null;let S;if(i)S=i;else if(n){const e=Sx(n);S=e&&kx(e)?Ip(e).body:Ip(null).body}const k=h||!c||y&&!_?void 0:"none",T=y?{in:h,onEnter:()=>{w(!1)},onExited:()=>{w(!0)}}:void 0;return(0,St.jsx)(gf,{disablePortal:l,container:S,children:(0,St.jsx)(Ex,d(d({anchorEl:n,direction:s,disablePortal:l,modifiers:u,ref:r,open:y?!_:h,placement:p,popperOptions:f,popperRef:m,slotProps:v,slots:b},x),{},{style:d({position:"fixed",top:0,left:0,display:k},g),TransitionProps:T,children:o}))})})),Ax=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],jx=Eu(Cx,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Px=t.forwardRef((function(e,t){var r;const n=rn(),o=Ta({props:e,name:"MuiPopper"}),{anchorEl:i,component:s,components:l,componentsProps:c,container:u,disablePortal:h,keepMounted:p,modifiers:f,open:m,placement:g,popperOptions:y,popperRef:v,transition:b,slots:x,slotProps:_}=o,w=a(o,Ax),S=null!==(r=null===x||void 0===x?void 0:x.root)&&void 0!==r?r:null===l||void 0===l?void 0:l.Root,k=d({anchorEl:i,container:u,disablePortal:h,keepMounted:p,modifiers:f,open:m,placement:g,popperOptions:y,popperRef:v,transition:b},w);return(0,St.jsx)(jx,d(d({as:s,direction:n?"rtl":"ltr",slots:{root:S},slotProps:null!==_&&void 0!==_?_:c},k),{},{ref:t}))}));function Ix(e){return iu("MuiTooltip",e)}const Ox=au("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),Mx=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];const Rx=Eu(Px,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.popper,!r.disableInteractive&&t.popperInteractive,r.arrow&&t.popperArrow,!r.open&&t.popperClose]}})(Au((e=>{let{theme:t}=e;return{zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:e=>{let{ownerState:t}=e;return!t.disableInteractive},style:{pointerEvents:"auto"}},{props:e=>{let{open:t}=e;return!t},style:{pointerEvents:"none"}},{props:e=>{let{ownerState:t}=e;return t.arrow},style:{['&[data-popper-placement*="bottom"] .'.concat(Ox.arrow)]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},['&[data-popper-placement*="top"] .'.concat(Ox.arrow)]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},['&[data-popper-placement*="right"] .'.concat(Ox.arrow)]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},['&[data-popper-placement*="left"] .'.concat(Ox.arrow)]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:e=>{let{ownerState:t}=e;return t.arrow&&!t.isRtl},style:{['&[data-popper-placement*="right"] .'.concat(Ox.arrow)]:{left:0,marginLeft:"-0.71em"}}},{props:e=>{let{ownerState:t}=e;return t.arrow&&!!t.isRtl},style:{['&[data-popper-placement*="right"] .'.concat(Ox.arrow)]:{right:0,marginRight:"-0.71em"}}},{props:e=>{let{ownerState:t}=e;return t.arrow&&!t.isRtl},style:{['&[data-popper-placement*="left"] .'.concat(Ox.arrow)]:{right:0,marginRight:"-0.71em"}}},{props:e=>{let{ownerState:t}=e;return t.arrow&&!!t.isRtl},style:{['&[data-popper-placement*="left"] .'.concat(Ox.arrow)]:{left:0,marginLeft:"-0.71em"}}}]}}))),Lx=Eu("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.tooltip,r.touch&&t.touch,r.arrow&&t.tooltipArrow,t["tooltipPlacement".concat(ju(r.placement.split("-")[0]))]]}})(Au((e=>{let{theme:t}=e;return{backgroundColor:t.vars?t.vars.palette.Tooltip.bg:Go(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[".".concat(Ox.popper,'[data-popper-placement*="left"] &')]:{transformOrigin:"right center"},[".".concat(Ox.popper,'[data-popper-placement*="right"] &')]:{transformOrigin:"left center"},[".".concat(Ox.popper,'[data-popper-placement*="top"] &')]:{transformOrigin:"center bottom",marginBottom:"14px"},[".".concat(Ox.popper,'[data-popper-placement*="bottom"] &')]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:e=>{let{ownerState:t}=e;return t.arrow},style:{position:"relative",margin:0}},{props:e=>{let{ownerState:t}=e;return t.touch},style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:"".concat((r=16/14,Math.round(1e5*r)/1e5),"em"),fontWeight:t.typography.fontWeightRegular}},{props:e=>{let{ownerState:t}=e;return!t.isRtl},style:{[".".concat(Ox.popper,'[data-popper-placement*="left"] &')]:{marginRight:"14px"},[".".concat(Ox.popper,'[data-popper-placement*="right"] &')]:{marginLeft:"14px"}}},{props:e=>{let{ownerState:t}=e;return!t.isRtl&&t.touch},style:{[".".concat(Ox.popper,'[data-popper-placement*="left"] &')]:{marginRight:"24px"},[".".concat(Ox.popper,'[data-popper-placement*="right"] &')]:{marginLeft:"24px"}}},{props:e=>{let{ownerState:t}=e;return!!t.isRtl},style:{[".".concat(Ox.popper,'[data-popper-placement*="left"] &')]:{marginLeft:"14px"},[".".concat(Ox.popper,'[data-popper-placement*="right"] &')]:{marginRight:"14px"}}},{props:e=>{let{ownerState:t}=e;return!!t.isRtl&&t.touch},style:{[".".concat(Ox.popper,'[data-popper-placement*="left"] &')]:{marginLeft:"24px"},[".".concat(Ox.popper,'[data-popper-placement*="right"] &')]:{marginRight:"24px"}}},{props:e=>{let{ownerState:t}=e;return t.touch},style:{[".".concat(Ox.popper,'[data-popper-placement*="top"] &')]:{marginBottom:"24px"}}},{props:e=>{let{ownerState:t}=e;return t.touch},style:{[".".concat(Ox.popper,'[data-popper-placement*="bottom"] &')]:{marginTop:"24px"}}}]};var r}))),Fx=Eu("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(Au((e=>{let{theme:t}=e;return{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:Go(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}})));let zx=!1;const Dx=new dd;let Nx={x:0,y:0};function Bx(e,t){return function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];t&&t(r,...o),e(r,...o)}}const Ux=t.forwardRef((function(e,r){var n,o,i;const s=Ta({props:e,name:"MuiTooltip"}),{arrow:l=!1,children:c,classes:u,components:h={},componentsProps:p={},describeChild:f=!1,disableFocusListener:m=!1,disableHoverListener:g=!1,disableInteractive:y=!1,disableTouchListener:v=!1,enterDelay:b=100,enterNextDelay:x=0,enterTouchDelay:_=700,followCursor:w=!1,id:S,leaveDelay:k=0,leaveTouchDelay:T=1500,onClose:E,onOpen:C,open:A,placement:j="bottom",PopperComponent:P,PopperProps:I={},slotProps:O={},slots:M={},title:R,TransitionComponent:L,TransitionProps:F}=s,z=a(s,Mx),D=t.isValidElement(c)?c:(0,St.jsx)("span",{children:c}),N=Lc(),B=rn(),[U,V]=t.useState(),[W,q]=t.useState(null),H=t.useRef(!1),G=y||w,K=hd(),X=hd(),Z=hd(),Y=hd(),[J,$]=mv({controlled:A,default:!1,name:"Tooltip",state:"open"});let Q=J;const ee=qu(S),te=t.useRef(),re=Yu((()=>{void 0!==te.current&&(document.body.style.WebkitUserSelect=te.current,te.current=void 0),Y.clear()}));t.useEffect((()=>re),[re]);const ne=e=>{Dx.clear(),zx=!0,$(!0),C&&!Q&&C(e)},oe=Yu((e=>{Dx.start(800+k,(()=>{zx=!1})),$(!1),E&&Q&&E(e),K.start(N.transitions.duration.shortest,(()=>{H.current=!1}))})),ie=e=>{H.current&&"touchstart"!==e.type||(U&&U.removeAttribute("title"),X.clear(),Z.clear(),b||zx&&x?X.start(zx?x:b,(()=>{ne(e)})):ne(e))},ae=e=>{X.clear(),Z.start(k,(()=>{oe(e)}))},[,se]=t.useState(!1),le=e=>{Hu(e.target)||(se(!1),ae(e))},ce=e=>{U||V(e.currentTarget),Hu(e.target)&&(se(!0),ie(e))},ue=e=>{H.current=!0;const t=D.props;t.onTouchStart&&t.onTouchStart(e)},de=e=>{ue(e),Z.clear(),K.clear(),re(),te.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Y.start(_,(()=>{document.body.style.WebkitUserSelect=te.current,ie(e)}))},he=e=>{D.props.onTouchEnd&&D.props.onTouchEnd(e),re(),Z.start(T,(()=>{oe(e)}))};t.useEffect((()=>{if(Q)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){"Escape"===e.key&&oe(e)}}),[oe,Q]);const pe=Xu(Hp(D),V,r);R||0===R||(Q=!1);const fe=t.useRef(),me={},ge="string"===typeof R;f?(me.title=Q||!ge||g?null:R,me["aria-describedby"]=Q?ee:null):(me["aria-label"]=ge?R:null,me["aria-labelledby"]=Q&&!ge?ee:null);const ye=d(d(d(d({},me),z),D.props),{},{className:Wc(z.className,D.props.className),onTouchStart:ue,ref:pe},w?{onMouseMove:e=>{const t=D.props;t.onMouseMove&&t.onMouseMove(e),Nx={x:e.clientX,y:e.clientY},fe.current&&fe.current.update()}}:{});const ve={};v||(ye.onTouchStart=de,ye.onTouchEnd=he),g||(ye.onMouseOver=Bx(ie,ye.onMouseOver),ye.onMouseLeave=Bx(ae,ye.onMouseLeave),G||(ve.onMouseOver=ie,ve.onMouseLeave=ae)),m||(ye.onFocus=Bx(ce,ye.onFocus),ye.onBlur=Bx(le,ye.onBlur),G||(ve.onFocus=ce,ve.onBlur=le));const be=d(d({},s),{},{isRtl:B,arrow:l,disableInteractive:G,placement:j,PopperComponentProp:P,touch:H.current}),xe="function"===typeof O.popper?O.popper(be):O.popper,_e=t.useMemo((()=>{var e,t;let r=[{name:"arrow",enabled:Boolean(W),options:{element:W,padding:4}}];return null!==(e=I.popperOptions)&&void 0!==e&&e.modifiers&&(r=r.concat(I.popperOptions.modifiers)),null!==xe&&void 0!==xe&&null!==(t=xe.popperOptions)&&void 0!==t&&t.modifiers&&(r=r.concat(xe.popperOptions.modifiers)),d(d(d({},I.popperOptions),null===xe||void 0===xe?void 0:xe.popperOptions),{},{modifiers:r})}),[W,I.popperOptions,null===xe||void 0===xe?void 0:xe.popperOptions]),we=(e=>{const{classes:t,disableInteractive:r,arrow:n,touch:o,placement:i}=e;return du({popper:["popper",!r&&"popperInteractive",n&&"popperArrow"],tooltip:["tooltip",n&&"tooltipArrow",o&&"touch","tooltipPlacement".concat(ju(i.split("-")[0]))],arrow:["arrow"]},Ix,t)})(be),Se="function"===typeof O.transition?O.transition(be):O.transition,ke={slots:d({popper:h.Popper,transition:null!==(n=h.Transition)&&void 0!==n?n:L,tooltip:h.Tooltip,arrow:h.Arrow},M),slotProps:{arrow:null!==(o=O.arrow)&&void 0!==o?o:p.arrow,popper:d(d({},I),null!==xe&&void 0!==xe?xe:p.popper),tooltip:null!==(i=O.tooltip)&&void 0!==i?i:p.tooltip,transition:d(d({},F),null!==Se&&void 0!==Se?Se:p.transition)}},[Te,Ee]=Ih("popper",{elementType:Rx,externalForwardedProps:ke,ownerState:be,className:Wc(we.popper,null===I||void 0===I?void 0:I.className)}),[Ce,Ae]=Ih("transition",{elementType:df,externalForwardedProps:ke,ownerState:be}),[je,Pe]=Ih("tooltip",{elementType:Lx,className:we.tooltip,externalForwardedProps:ke,ownerState:be}),[Ie,Oe]=Ih("arrow",{elementType:Fx,className:we.arrow,externalForwardedProps:ke,ownerState:be,ref:q});return(0,St.jsxs)(t.Fragment,{children:[t.cloneElement(D,ye),(0,St.jsx)(Te,d(d(d({as:null!==P&&void 0!==P?P:Px,placement:j,anchorEl:w?{getBoundingClientRect:()=>({top:Nx.y,left:Nx.x,right:Nx.x,bottom:Nx.y,width:0,height:0})}:U,popperRef:fe,open:!!U&&Q,id:ee,transition:!0},ve),Ee),{},{popperOptions:_e,children:e=>{let{TransitionProps:t}=e;return(0,St.jsx)(Ce,d(d(d({timeout:N.transitions.duration.shorter},t),Ae),{},{children:(0,St.jsxs)(je,d(d({},Pe),{},{children:[R,l?(0,St.jsx)(Ie,d({},Oe)):null]}))}))}}))]})})),Vx=Ux;function Wx(e){return iu("MuiAlert",e)}const qx=au("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),Hx=Fm((0,St.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),Gx=Fm((0,St.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),Kx=Fm((0,St.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),Xx=Fm((0,St.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),Zx=Fm((0,St.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),Yx=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],Jx=Eu($h,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t["".concat(r.variant).concat(ju(r.color||r.severity))]]}})(Au((e=>{let{theme:t}=e;const r="light"===t.palette.mode?Xo:Yo,n="light"===t.palette.mode?Yo:Xo;return d(d({},t.typography.body2),{},{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(Pu(["light"])).map((e=>{let[o]=e;return{props:{colorSeverity:o,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert["".concat(o,"Color")]:r(t.palette[o].light,.6),backgroundColor:t.vars?t.vars.palette.Alert["".concat(o,"StandardBg")]:n(t.palette[o].light,.9),["& .".concat(qx.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(o,"IconColor")]}:{color:t.palette[o].main}}}})),...Object.entries(t.palette).filter(Pu(["light"])).map((e=>{let[n]=e;return{props:{colorSeverity:n,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert["".concat(n,"Color")]:r(t.palette[n].light,.6),border:"1px solid ".concat((t.vars||t).palette[n].light),["& .".concat(qx.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(n,"IconColor")]}:{color:t.palette[n].main}}}})),...Object.entries(t.palette).filter(Pu(["dark"])).map((e=>{let[r]=e;return{props:{colorSeverity:r,variant:"filled"},style:d({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert["".concat(r,"FilledColor")],backgroundColor:t.vars.palette.Alert["".concat(r,"FilledBg")]}:{backgroundColor:"dark"===t.palette.mode?t.palette[r].dark:t.palette[r].main,color:t.palette.getContrastText(t.palette[r].main)})}}))]})}))),$x=Eu("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),Qx=Eu("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),e_=Eu("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),t_={success:(0,St.jsx)(Hx,{fontSize:"inherit"}),warning:(0,St.jsx)(Gx,{fontSize:"inherit"}),error:(0,St.jsx)(Kx,{fontSize:"inherit"}),info:(0,St.jsx)(Xx,{fontSize:"inherit"})},r_=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiAlert"}),{action:n,children:o,className:i,closeText:s="Close",color:l,components:c={},componentsProps:u={},icon:h,iconMapping:p=t_,onClose:f,role:m="alert",severity:g="success",slotProps:y={},slots:v={},variant:b="standard"}=r,x=a(r,Yx),_=d(d({},r),{},{color:l,severity:g,variant:b,colorSeverity:l||g}),w=(e=>{const{variant:t,color:r,severity:n,classes:o}=e;return du({root:["root","color".concat(ju(r||n)),"".concat(t).concat(ju(r||n)),"".concat(t)],icon:["icon"],message:["message"],action:["action"]},Wx,o)})(_),S={slots:d({closeButton:c.CloseButton,closeIcon:c.CloseIcon},v),slotProps:d(d({},u),y)},[k,T]=Ih("root",{ref:t,shouldForwardComponentProp:!0,className:Wc(w.root,i),elementType:Jx,externalForwardedProps:d(d({},S),x),ownerState:_,additionalProps:{role:m,elevation:0}}),[E,C]=Ih("icon",{className:w.icon,elementType:$x,externalForwardedProps:S,ownerState:_}),[A,j]=Ih("message",{className:w.message,elementType:Qx,externalForwardedProps:S,ownerState:_}),[P,I]=Ih("action",{className:w.action,elementType:e_,externalForwardedProps:S,ownerState:_}),[O,M]=Ih("closeButton",{elementType:th,externalForwardedProps:S,ownerState:_}),[R,L]=Ih("closeIcon",{elementType:Zx,externalForwardedProps:S,ownerState:_});return(0,St.jsxs)(k,d(d({},T),{},{children:[!1!==h?(0,St.jsx)(E,d(d({},C),{},{children:h||p[g]||t_[g]})):null,(0,St.jsx)(A,d(d({},j),{},{children:o})),null!=n?(0,St.jsx)(P,d(d({},I),{},{children:n})):null,null==n&&f?(0,St.jsx)(P,d(d({},I),{},{children:(0,St.jsx)(O,d(d({size:"small","aria-label":s,title:s,color:"inherit",onClick:f},M),{},{children:(0,St.jsx)(R,d({fontSize:"small"},L))}))})):null]}))})),n_=r_;function o_(e){return iu("MuiAlertTitle",e)}au("MuiAlertTitle",["root"]);const i_=["className"],a_=Eu(Bu,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(e,t)=>t.root})(Au((e=>{let{theme:t}=e;return{fontWeight:t.typography.fontWeightMedium,marginTop:-2}}))),s_=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiAlertTitle"}),{className:n}=r,o=a(r,i_),i=r,s=(e=>{const{classes:t}=e;return du({root:["root"]},o_,t)})(i);return(0,St.jsx)(a_,d({gutterBottom:!0,component:"div",ownerState:i,ref:t,className:Wc(s.root,n)},o))}));function l_(e){return iu("MuiCollapse",e)}au("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const c_=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],u_=["ownerState"],d_=Eu("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.orientation],"entered"===r.state&&t.entered,"exited"===r.state&&!r.in&&"0px"===r.collapsedSize&&t.hidden]}})(Au((e=>{let{theme:t}=e;return{height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:e=>{let{ownerState:t}=e;return"exited"===t.state&&!t.in&&"0px"===t.collapsedSize},style:{visibility:"hidden"}}]}}))),h_=Eu("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),p_=Eu("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),f_=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiCollapse"}),{addEndListener:o,children:i,className:s,collapsedSize:l="0px",component:c,easing:u,in:h,onEnter:p,onEntered:f,onEntering:m,onExit:g,onExited:y,onExiting:v,orientation:b="vertical",style:x,timeout:_=Fi.standard,TransitionComponent:w=tf}=n,S=a(n,c_),k=d(d({},n),{},{orientation:b,collapsedSize:l}),T=(e=>{const{orientation:t,classes:r}=e;return du({root:["root","".concat(t)],entered:["entered"],hidden:["hidden"],wrapper:["wrapper","".concat(t)],wrapperInner:["wrapperInner","".concat(t)]},l_,r)})(k),E=Lc(),C=hd(),A=t.useRef(null),j=t.useRef(),P="number"===typeof l?"".concat(l,"px"):l,I="horizontal"===b,O=I?"width":"height",M=t.useRef(null),R=Xu(r,M),L=e=>t=>{if(e){const r=M.current;void 0===t?e(r):e(r,t)}},F=()=>A.current?A.current[I?"clientWidth":"clientHeight"]:0,z=L(((e,t)=>{A.current&&I&&(A.current.style.position="absolute"),e.style[O]=P,p&&p(e,t)})),D=L(((e,t)=>{const r=F();A.current&&I&&(A.current.style.position="");const{duration:n,easing:o}=nf({style:x,timeout:_,easing:u},{mode:"enter"});if("auto"===_){const t=E.transitions.getAutoHeightDuration(r);e.style.transitionDuration="".concat(t,"ms"),j.current=t}else e.style.transitionDuration="string"===typeof n?n:"".concat(n,"ms");e.style[O]="".concat(r,"px"),e.style.transitionTimingFunction=o,m&&m(e,t)})),N=L(((e,t)=>{e.style[O]="auto",f&&f(e,t)})),B=L((e=>{e.style[O]="".concat(F(),"px"),g&&g(e)})),U=L(y),V=L((e=>{const t=F(),{duration:r,easing:n}=nf({style:x,timeout:_,easing:u},{mode:"exit"});if("auto"===_){const r=E.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(r,"ms"),j.current=r}else e.style.transitionDuration="string"===typeof r?r:"".concat(r,"ms");e.style[O]=P,e.style.transitionTimingFunction=n,v&&v(e)}));return(0,St.jsx)(w,d(d({in:h,onEnter:z,onEntered:N,onEntering:D,onExit:B,onExited:U,onExiting:V,addEndListener:e=>{"auto"===_&&C.start(j.current||0,e),o&&o(M.current,e)},nodeRef:M,timeout:"auto"===_?null:_},S),{},{children:(e,t)=>{let{ownerState:r}=t,n=a(t,u_);return(0,St.jsx)(d_,d(d({as:c,className:Wc(T.root,s,{entered:T.entered,exited:!h&&"0px"===P&&T.hidden}[e]),style:d({[I?"minWidth":"minHeight"]:P},x),ref:R,ownerState:d(d({},k),{},{state:e})},n),{},{children:(0,St.jsx)(h_,{ownerState:d(d({},k),{},{state:e}),className:T.wrapper,ref:A,children:(0,St.jsx)(p_,{ownerState:d(d({},k),{},{state:e}),className:T.wrapperInner,children:i})})}))}}))}));f_&&(f_.muiSupportAuto=!0);const m_=f_;const g_=t.createContext({});function y_(e){return iu("MuiAccordion",e)}const v_=au("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),b_=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],x_=Eu($h,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{["& .".concat(v_.region)]:t.region},t.root,!r.square&&t.rounded,!r.disableGutters&&t.gutters]}})(Au((e=>{let{theme:t}=e;const r={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],r),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],r)},"&:first-of-type":{"&::before":{display:"none"}},["&.".concat(v_.expanded)]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},["&.".concat(v_.disabled)]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}})),Au((e=>{let{theme:t}=e;return{variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{["&.".concat(v_.expanded)]:{margin:"16px 0"}}}]}}))),__=Eu("h3",{name:"MuiAccordion",slot:"Heading",overridesResolver:(e,t)=>t.heading})({all:"unset"}),w_=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiAccordion"}),{children:o,className:i,defaultExpanded:s=!1,disabled:l=!1,disableGutters:c=!1,expanded:u,onChange:h,square:p=!1,slots:f={},slotProps:m={},TransitionComponent:g,TransitionProps:y}=n,v=a(n,b_),[b,x]=mv({controlled:u,default:s,name:"Accordion",state:"expanded"}),_=t.useCallback((e=>{x(!b),h&&h(e,!b)}),[b,h,x]),[w,...S]=t.Children.toArray(o),k=t.useMemo((()=>({expanded:b,disabled:l,disableGutters:c,toggle:_})),[b,l,c,_]),T=d(d({},n),{},{square:p,disabled:l,disableGutters:c,expanded:b}),E=(e=>{const{classes:t,square:r,expanded:n,disabled:o,disableGutters:i}=e;return du({root:["root",!r&&"rounded",n&&"expanded",o&&"disabled",!i&&"gutters"],heading:["heading"],region:["region"]},y_,t)})(T),C={slots:d({transition:g},f),slotProps:d({transition:y},m)},[A,j]=Ih("root",{elementType:x_,externalForwardedProps:d(d({},C),v),className:Wc(E.root,i),shouldForwardComponentProp:!0,ownerState:T,ref:r,additionalProps:{square:p}}),[P,I]=Ih("heading",{elementType:__,externalForwardedProps:C,className:E.heading,ownerState:T}),[O,M]=Ih("transition",{elementType:m_,externalForwardedProps:C,ownerState:T});return(0,St.jsxs)(A,d(d({},j),{},{children:[(0,St.jsx)(P,d(d({},I),{},{children:(0,St.jsx)(g_.Provider,{value:k,children:w})})),(0,St.jsx)(O,d(d({in:b,timeout:"auto"},M),{},{children:(0,St.jsx)("div",{"aria-labelledby":w.props.id,id:w.props["aria-controls"],role:"region",className:E.region,children:S})}))]}))}));function S_(e){return iu("MuiAccordionSummary",e)}const k_=au("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),T_=["children","className","expandIcon","focusVisibleClassName","onClick","slots","slotProps"],E_=Eu(Od,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})(Au((e=>{let{theme:t}=e;const r={duration:t.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],r),["&.".concat(k_.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(k_.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["&:hover:not(.".concat(k_.disabled,")")]:{cursor:"pointer"},variants:[{props:e=>!e.disableGutters,style:{["&.".concat(k_.expanded)]:{minHeight:64}}}]}}))),C_=Eu("span",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})(Au((e=>{let{theme:t}=e;return{display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),["&.".concat(k_.expanded)]:{margin:"20px 0"}}}]}}))),A_=Eu("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})(Au((e=>{let{theme:t}=e;return{display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),["&.".concat(k_.expanded)]:{transform:"rotate(180deg)"}}}))),j_=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiAccordionSummary"}),{children:o,className:i,expandIcon:s,focusVisibleClassName:l,onClick:c,slots:u,slotProps:h}=n,p=a(n,T_),{disabled:f=!1,disableGutters:m,expanded:g,toggle:y}=t.useContext(g_),v=d(d({},n),{},{expanded:g,disabled:f,disableGutters:m}),b=(e=>{const{classes:t,expanded:r,disabled:n,disableGutters:o}=e;return du({root:["root",r&&"expanded",n&&"disabled",!o&&"gutters"],focusVisible:["focusVisible"],content:["content",r&&"expanded",!o&&"contentGutters"],expandIconWrapper:["expandIconWrapper",r&&"expanded"]},S_,t)})(v),x={slots:u,slotProps:h},[_,w]=Ih("root",{ref:r,shouldForwardComponentProp:!0,className:Wc(b.root,i),elementType:E_,externalForwardedProps:d(d({},x),p),ownerState:v,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:f,"aria-expanded":g,focusVisibleClassName:Wc(b.focusVisible,l)},getSlotProps:e=>d(d({},e),{},{onClick:t=>{var r;null===(r=e.onClick)||void 0===r||r.call(e,t),(e=>{y&&y(e),c&&c(e)})(t)}})}),[S,k]=Ih("content",{className:b.content,elementType:C_,externalForwardedProps:x,ownerState:v}),[T,E]=Ih("expandIconWrapper",{className:b.expandIconWrapper,elementType:A_,externalForwardedProps:x,ownerState:v});return(0,St.jsxs)(_,d(d({},w),{},{children:[(0,St.jsx)(S,d(d({},k),{},{children:o})),s&&(0,St.jsx)(T,d(d({},E),{},{children:s}))]}))}));function P_(e){return iu("MuiAccordionDetails",e)}au("MuiAccordionDetails",["root"]);const I_=["className"],O_=Eu("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})(Au((e=>{let{theme:t}=e;return{padding:t.spacing(1,2,2)}}))),M_=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiAccordionDetails"}),{className:n}=r,o=a(r,I_),i=r,s=(e=>{const{classes:t}=e;return du({root:["root"]},P_,t)})(i);return(0,St.jsx)(O_,d({className:Wc(s.root,n),ref:t,ownerState:i},o))})),R_=Fm((0,St.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm-1 6h2v2h-2zm0 4h2v6h-2z"}),"PrivacyTip"),L_=Fm((0,St.jsx)("path",{d:"M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2zm-9-2h10V8H12zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"AccountBalanceWallet"),F_=Fm((0,St.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),z_=Fm((0,St.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy"),D_=Fm((0,St.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),N_=()=>{const[e,r]=(0,t.useState)({}),n=[{id:"location-update",title:"Update Wallet Location",method:"POST",endpoint:"/api/location/update",description:"Update or create a wallet location entry",role:"wallet_provider",color:"primary",icon:(0,St.jsx)(vg,{}),requestBody:{public_key:"GABC123...",blockchain:"Stellar",latitude:40.7128,longitude:-74.006,wallet_type_id:1,description:"User wallet location"},response:{success:!0,message:"Location updated successfully",data:{id:1,public_key:"GABC123...",latitude:40.7128,longitude:-74.006,last_updated:"2024-01-15T10:30:00Z"}}},{id:"privacy-settings",title:"Update Privacy Settings",method:"POST",endpoint:"/api/wallet-provider/privacy-settings",description:"Update privacy settings for a specific wallet",role:"wallet_provider",color:"secondary",icon:(0,St.jsx)(R_,{}),requestBody:{public_key:"GABC123...",privacy_enabled:!0,visibility_enabled:!1},response:{message:"Privacy settings updated successfully",settings:{public_key:"GABC123...",privacy_enabled:!0,visibility_enabled:!1}}},{id:"visibility-settings",title:"Update Visibility Settings",method:"POST",endpoint:"/api/wallet-provider/visibility-settings",description:"Update visibility settings for a specific wallet",role:"wallet_provider",color:"info",icon:(0,St.jsx)(Qv,{}),requestBody:{public_key:"GABC123...",is_visible:!0},response:{message:"Visibility settings updated successfully",settings:{public_key:"GABC123...",is_visible:!0}}},{id:"user-locations",title:"Get User Locations",method:"GET",endpoint:"/api/wallet-provider/user-locations",description:"Retrieve location history for a specific wallet",role:"wallet_provider",color:"success",icon:(0,St.jsx)(L_,{}),parameters:{public_key:"GABC123..."},response:{locations:[{id:1,public_key:"GABC123...",latitude:40.7128,longitude:-74.006,tracking_status:"active",location_enabled:!0,last_updated:"2024-01-15T10:30:00Z",created_at:"2024-01-15T10:30:00Z",wallet_type:"Mobile Wallet",provider_name:"XYZ Wallet"}]}},{id:"nearby-nfts",title:"Get Nearby NFTs",method:"GET",endpoint:"/api/nft/nearby",description:"Find NFTs near a specific location",role:"data_consumer",color:"warning",icon:(0,St.jsx)(jg,{}),parameters:{latitude:34.2304971,longitude:-118.2321404,radius:1e3},response:{nfts:[{id:1,latitude:"34.2304971",longitude:"-118.2321404",radius_meters:100,ipfs_hash:"QmHash...",collection_name:"Collection Name",is_active:!0}],count:1,search_center:{latitude:34.2304971,longitude:-118.2321404},radius:1e3}}],o=t=>{let{code:n,language:o="json",id:i}=t;return(0,St.jsxs)(uu,{sx:{position:"relative",mb:2},children:[(0,St.jsx)($h,{sx:{p:2,backgroundColor:"#f5f5f5",border:"1px solid #e0e0e0",borderRadius:1,fontFamily:"monospace",fontSize:"0.875rem",overflow:"auto"},children:(0,St.jsx)("pre",{style:{margin:0,whiteSpace:"pre-wrap"},children:"string"===typeof n?n:JSON.stringify(n,null,2)})}),(0,St.jsx)(Vx,{title:e[i]?"Copied!":"Copy to clipboard",children:(0,St.jsx)(th,{size:"small",onClick:()=>((e,t)=>{navigator.clipboard.writeText(e),r((e=>d(d({},e),{},{[t]:!0}))),setTimeout((()=>{r((e=>d(d({},e),{},{[t]:!1})))}),2e3)})("string"===typeof n?n:JSON.stringify(n,null,2),i),sx:{position:"absolute",top:8,right:8,backgroundColor:"white","&:hover":{backgroundColor:"#f5f5f5"}},children:e[i]?(0,St.jsx)(F_,{color:"success"}):(0,St.jsx)(z_,{})})})]})};return(0,St.jsx)(uu,{sx:{py:4,backgroundColor:"#f8f9fa",minHeight:"100vh"},children:(0,St.jsxs)(dp,{maxWidth:"lg",children:[(0,St.jsxs)(uu,{sx:{textAlign:"center",mb:6},children:[(0,St.jsx)(Bu,{variant:"h3",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"\ud83c\udf10 GeoLink API Documentation"}),(0,St.jsx)(Bu,{variant:"h6",color:"text.secondary",sx:{mb:3},children:"Complete API reference for Wallet Providers and Data Consumers"}),(0,St.jsxs)(n_,{severity:"info",sx:{maxWidth:800,mx:"auto"},children:[(0,St.jsx)(s_,{children:"API Access"}),"All endpoints require authentication using API keys. Contact support to obtain your API credentials."]})]}),(0,St.jsx)(tg,{sx:{mb:4,backgroundColor:"#fff3cd",border:"1px solid #ffeaa7"},children:(0,St.jsxs)(ig,{children:[(0,St.jsxs)(Bu,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,St.jsx)(wg,{color:"warning"}),"Base URL"]}),(0,St.jsxs)(Bu,{variant:"body1",sx:{fontFamily:"monospace",fontSize:"1.1rem"},children:["Production: ",(0,St.jsx)("strong",{children:"https://geolink-buavavc6gse5c9fw.westus-01.azurewebsites.net"})]}),(0,St.jsxs)(Bu,{variant:"body1",sx:{fontFamily:"monospace",fontSize:"1.1rem",mt:1},children:["Development: ",(0,St.jsx)("strong",{children:"http://localhost:4000"})]})]})}),(0,St.jsx)(tg,{sx:{mb:4},children:(0,St.jsxs)(ig,{children:[(0,St.jsxs)(Bu,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,St.jsx)(wg,{color:"primary"}),"Authentication"]}),(0,St.jsx)(Bu,{variant:"body1",gutterBottom:!0,children:"All API requests must include an API key in the Authorization header:"}),(0,St.jsx)(o,{code:"Authorization: Bearer YOUR_API_KEY",id:"auth-header"}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:["Replace ",(0,St.jsx)("code",{children:"YOUR_API_KEY"})," with your actual API key provided by GeoLink."]})]})}),(0,St.jsx)(Bu,{variant:"h4",gutterBottom:!0,sx:{mb:3,fontWeight:"bold"},children:"\ud83d\udcda API Endpoints"}),n.map(((e,t)=>(0,St.jsxs)(w_,{sx:{mb:2},children:[(0,St.jsx)(j_,{expandIcon:(0,St.jsx)(D_,{}),children:(0,St.jsxs)(uu,{sx:{display:"flex",alignItems:"center",gap:2,width:"100%"},children:[e.icon,(0,St.jsxs)(uu,{sx:{flexGrow:1},children:[(0,St.jsx)(Bu,{variant:"h6",component:"div",children:e.title}),(0,St.jsx)(Bu,{variant:"body2",color:"text.secondary",children:e.description})]}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,St.jsx)(yg,{label:e.method,color:e.color,size:"small",sx:{fontWeight:"bold"}}),(0,St.jsx)(yg,{label:e.role.replace("_"," ").toUpperCase(),color:"default",size:"small",variant:"outlined"})]})]})}),(0,St.jsx)(M_,{children:(0,St.jsxs)(Jm,{container:!0,spacing:3,children:[(0,St.jsxs)(Jm,{item:!0,xs:12,children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"Endpoint"}),(0,St.jsx)(o,{code:"".concat(e.method," ").concat(e.endpoint),id:"endpoint-".concat(e.id)})]}),(0,St.jsxs)(Jm,{item:!0,xs:12,md:6,children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"GET"===e.method?"Parameters":"Request Body"}),(0,St.jsx)(o,{code:e.requestBody||e.parameters,id:"request-".concat(e.id)})]}),(0,St.jsxs)(Jm,{item:!0,xs:12,md:6,children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"Response"}),(0,St.jsx)(o,{code:e.response,id:"response-".concat(e.id)})]}),(0,St.jsxs)(Jm,{item:!0,xs:12,children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"Example Usage"}),(0,St.jsx)(o,{code:"curl -X ".concat(e.method,' \\\n  "').concat("GET"===e.method?"https://geolink-buavavc6gse5c9fw.westus-01.azurewebsites.net".concat(e.endpoint,"?").concat(Object.entries(e.parameters||{}).map((e=>{let[t,r]=e;return"".concat(t,"=").concat(r)})).join("&")):"https://geolink-buavavc6gse5c9fw.westus-01.azurewebsites.net".concat(e.endpoint),'" \\\n  -H "Authorization: Bearer YOUR_API_KEY" \\\n  -H "Content-Type: application/json"').concat("GET"!==e.method?" \\\n  -d '".concat(JSON.stringify(e.requestBody,null,2),"'"):""),id:"example-".concat(e.id)})]})]})})]},e.id))),(0,St.jsx)(tg,{sx:{mt:4},children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"\ud83d\udd10 Role-Based Access"}),(0,St.jsxs)(Jm,{container:!0,spacing:2,children:[(0,St.jsxs)(Jm,{item:!0,xs:12,md:6,children:[(0,St.jsx)(Bu,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Wallet Provider"}),(0,St.jsxs)(ph,{dense:!0,children:[(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(vg,{color:"primary"})}),(0,St.jsx)(Rh,{primary:"Update wallet locations"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(R_,{color:"primary"})}),(0,St.jsx)(Rh,{primary:"Manage privacy settings"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(Qv,{color:"primary"})}),(0,St.jsx)(Rh,{primary:"Control visibility settings"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(L_,{color:"primary"})}),(0,St.jsx)(Rh,{primary:"Access user location history"})]})]})]}),(0,St.jsxs)(Jm,{item:!0,xs:12,md:6,children:[(0,St.jsx)(Bu,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Data Consumer"}),(0,St.jsxs)(ph,{dense:!0,children:[(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(jg,{color:"warning"})}),(0,St.jsx)(Rh,{primary:"Query nearby NFTs"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(vg,{color:"warning"})}),(0,St.jsx)(Rh,{primary:"Search wallet locations"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(L_,{color:"warning"})}),(0,St.jsx)(Rh,{primary:"Access public wallet data"})]})]})]})]})]})}),(0,St.jsx)(tg,{sx:{mt:4,backgroundColor:"#e3f2fd"},children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"\ud83c\udd98 Need Help?"}),(0,St.jsx)(Bu,{variant:"body1",gutterBottom:!0,children:"For API support, documentation questions, or to request API keys:"}),(0,St.jsxs)(ph,{children:[(0,St.jsx)(Kh,{children:(0,St.jsx)(Rh,{primary:"Email: sergekhachatour@gmail.com",secondary:"Technical support and API key requests"})}),(0,St.jsx)(Kh,{children:(0,St.jsx)(Rh,{primary:"Swagger Documentation",secondary:"Interactive API testing at /docs"})})]})]})})]})})},B_=()=>(0,St.jsxs)(St.Fragment,{children:[(0,St.jsx)(uu,{sx:{background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",color:"black",py:{xs:6,md:10},mb:{xs:4,md:6},position:"relative",overflow:"hidden"},children:(0,St.jsx)(dp,{maxWidth:"lg",children:(0,St.jsxs)(Jm,{container:!0,spacing:{xs:4,md:6},alignItems:"center",children:[(0,St.jsxs)(Jm,{item:!0,xs:12,md:6,children:[(0,St.jsxs)(uu,{sx:{textAlign:{xs:"center",md:"left"},mb:{xs:3,md:4}},children:[(0,St.jsx)(Bu,{variant:"h2",component:"h1",sx:{fontWeight:"bold",mb:1,fontSize:{xs:"2rem",sm:"2.5rem",md:"3rem"}},children:"Stellar GeoLink"}),(0,St.jsx)(Bu,{variant:"h4",component:"h2",sx:{opacity:.9,fontSize:{xs:"1.25rem",sm:"1.5rem",md:"2rem"}},children:"Track Stellar Assets in Real-Time"})]}),(0,St.jsx)(Bu,{variant:"h6",paragraph:!0,sx:{mb:{xs:3,md:4},opacity:.9,fontSize:{xs:"1rem",md:"1.25rem"}},children:"The premier platform for real-time location tracking of Stellar-based Real World Assets (RWAs). Bridge the physical and digital worlds with blockchain-powered geolocation services."}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:2,flexWrap:"wrap",justifyContent:{xs:"center",md:"flex-start"}},children:[(0,St.jsx)(Ap,{variant:"contained",color:"primary",size:"large",component:ht,to:"/register",sx:{px:{xs:3,md:4},py:1.5,width:{xs:"100%",sm:"auto"},backgroundColor:"#000000",color:"#FFFFFF","&:hover":{backgroundColor:"#1a1a1a",boxShadow:"0 4px 8px rgba(0,0,0,0.15)"}},children:"Get Started Free"}),(0,St.jsx)(Ap,{variant:"outlined",color:"inherit",size:"large",component:ht,to:"/login",sx:{px:{xs:3,md:4},py:1.5,width:{xs:"100%",sm:"auto"},borderColor:"#000000",color:"#000000","&:hover":{borderColor:"#000000",backgroundColor:"rgba(0, 0, 0, 0.1)"}},children:"Sign In"})]})]}),(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsxs)(uu,{sx:{textAlign:"center"},children:[(0,St.jsx)(uu,{component:"img",src:"/images/Stellar_Logo.png",alt:"Stellar Logo",sx:{width:{xs:200,sm:250,md:275},height:{xs:75,sm:90,md:100},mb:3,filter:"brightness(0) invert(1)",zIndex:2,position:"relative"}}),(0,St.jsxs)($h,{elevation:10,sx:{p:{xs:2,md:3},backgroundColor:"rgba(255,255,255,0.1)",backdropFilter:"blur(10px)",borderRadius:3,mx:{xs:2,md:0}},children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,sx:{fontSize:{xs:"1.1rem",md:"1.25rem"}},children:"\ud83d\ude80 Live Asset Tracking"}),(0,St.jsx)(Bu,{variant:"body2",sx:{opacity:.9,fontSize:{xs:"0.875rem",md:"0.9rem"}},children:"Monitor your Stellar-based assets across the globe with precision and security"})]})]})})]})})}),(0,St.jsx)(ob,{}),(0,St.jsxs)(uu,{sx:{background:"linear-gradient(135deg, #FFD700, #FFA500)",py:{xs:6,md:8}},children:[(0,St.jsxs)(dp,{maxWidth:"lg",sx:{mb:{xs:6,md:8}},children:[(0,St.jsx)(Bu,{variant:"h3",component:"h2",align:"center",gutterBottom:!0,sx:{mb:{xs:4,md:6},fontSize:{xs:"1.75rem",sm:"2rem",md:"2.5rem"}},children:"Core Features"}),(0,St.jsxs)(Jm,{container:!0,spacing:{xs:3,md:4},children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:4,children:(0,St.jsx)(tg,{sx:{height:"100%",p:{xs:1.5,md:2}},children:(0,St.jsxs)(ig,{children:[(0,St.jsxs)(uu,{sx:{display:"flex",alignItems:"center",mb:2,flexDirection:{xs:"column",sm:"row"},textAlign:{xs:"center",sm:"left"}},children:[(0,St.jsx)(vg,{color:"primary",sx:{fontSize:{xs:30,md:40},mr:{xs:0,sm:2},mb:{xs:1,sm:0}}}),(0,St.jsx)(Bu,{variant:"h5",component:"h3",sx:{fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Real-Time Tracking"})]}),(0,St.jsx)(Bu,{paragraph:!0,sx:{fontSize:{xs:"0.9rem",md:"1rem"}},children:"Monitor your Stellar-based assets with GPS precision. Get instant location updates and track movement patterns in real-time."}),(0,St.jsxs)(ph,{dense:!0,children:[(0,St.jsxs)(Kh,{sx:{px:0},children:[(0,St.jsx)(lg,{children:(0,St.jsx)(bg,{fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Sub-second location updates",primaryTypographyProps:{fontSize:{xs:"0.85rem",md:"0.9rem"}}})]}),(0,St.jsxs)(Kh,{sx:{px:0},children:[(0,St.jsx)(lg,{children:(0,St.jsx)(xg,{fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Historical movement tracking",primaryTypographyProps:{fontSize:{xs:"0.85rem",md:"0.9rem"}}})]}),(0,St.jsxs)(Kh,{sx:{px:0},children:[(0,St.jsx)(lg,{children:(0,St.jsx)(_g,{fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Interactive map visualization",primaryTypographyProps:{fontSize:{xs:"0.85rem",md:"0.9rem"}}})]})]})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:4,children:(0,St.jsx)(tg,{sx:{height:"100%",p:{xs:1.5,md:2}},children:(0,St.jsxs)(ig,{children:[(0,St.jsxs)(uu,{sx:{display:"flex",alignItems:"center",mb:2,flexDirection:{xs:"column",sm:"row"},textAlign:{xs:"center",sm:"left"}},children:[(0,St.jsx)(wg,{color:"primary",sx:{fontSize:{xs:30,md:40},mr:{xs:0,sm:2},mb:{xs:1,sm:0}}}),(0,St.jsx)(Bu,{variant:"h5",component:"h3",sx:{fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Geofencing & Alerts"})]}),(0,St.jsx)(Bu,{paragraph:!0,sx:{fontSize:{xs:"0.9rem",md:"1rem"}},children:"Set up virtual boundaries and receive instant notifications when assets enter or exit designated areas."}),(0,St.jsxs)(ph,{dense:!0,children:[(0,St.jsxs)(Kh,{sx:{px:0},children:[(0,St.jsx)(lg,{children:(0,St.jsx)(Sg,{fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Custom geofence zones",primaryTypographyProps:{fontSize:{xs:"0.85rem",md:"0.9rem"}}})]}),(0,St.jsxs)(Kh,{sx:{px:0},children:[(0,St.jsx)(lg,{children:(0,St.jsx)(kg,{fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Security breach alerts",primaryTypographyProps:{fontSize:{xs:"0.85rem",md:"0.9rem"}}})]}),(0,St.jsxs)(Kh,{sx:{px:0},children:[(0,St.jsx)(lg,{children:(0,St.jsx)(Tg,{fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Multi-zone monitoring",primaryTypographyProps:{fontSize:{xs:"0.85rem",md:"0.9rem"}}})]})]})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:4,children:(0,St.jsx)(tg,{sx:{height:"100%",p:{xs:1.5,md:2}},children:(0,St.jsxs)(ig,{children:[(0,St.jsxs)(uu,{sx:{display:"flex",alignItems:"center",mb:2,flexDirection:{xs:"column",sm:"row"},textAlign:{xs:"center",sm:"left"}},children:[(0,St.jsx)(Eg,{color:"primary",sx:{fontSize:{xs:30,md:40},mr:{xs:0,sm:2},mb:{xs:1,sm:0}}}),(0,St.jsx)(Bu,{variant:"h5",component:"h3",sx:{fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Advanced Analytics"})]}),(0,St.jsx)(Bu,{paragraph:!0,sx:{fontSize:{xs:"0.9rem",md:"1rem"}},children:"Comprehensive analytics dashboard with detailed insights into asset performance, usage patterns, and optimization opportunities."}),(0,St.jsxs)(ph,{dense:!0,children:[(0,St.jsxs)(Kh,{sx:{px:0},children:[(0,St.jsx)(lg,{children:(0,St.jsx)(Cg,{fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Real-time dashboards",primaryTypographyProps:{fontSize:{xs:"0.85rem",md:"0.9rem"}}})]}),(0,St.jsxs)(Kh,{sx:{px:0},children:[(0,St.jsx)(lg,{children:(0,St.jsx)(Ag,{fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Asset value tracking",primaryTypographyProps:{fontSize:{xs:"0.85rem",md:"0.9rem"}}})]}),(0,St.jsxs)(Kh,{sx:{px:0},children:[(0,St.jsx)(lg,{children:(0,St.jsx)(jg,{fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"API integrations",primaryTypographyProps:{fontSize:{xs:"0.85rem",md:"0.9rem"}}})]})]})]})})})]})]}),(0,St.jsx)(uu,{sx:{bgcolor:"grey.50",py:{xs:6,md:8}},children:(0,St.jsxs)(dp,{maxWidth:"lg",children:[(0,St.jsx)(Bu,{variant:"h3",component:"h2",align:"center",gutterBottom:!0,sx:{mb:{xs:4,md:6},fontSize:{xs:"1.75rem",sm:"2rem",md:"2.5rem"}},children:"Use Cases"}),(0,St.jsxs)(Jm,{container:!0,spacing:{xs:3,md:4},children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsxs)($h,{sx:{p:{xs:2,md:4},height:"100%"},children:[(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,sx:{fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"\ud83c\udfed Supply Chain Management"}),(0,St.jsx)(Bu,{paragraph:!0,sx:{fontSize:{xs:"0.9rem",md:"1rem"}},children:"Track products from manufacturing to delivery. Monitor temperature, humidity, and location throughout the entire supply chain."}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,St.jsx)(yg,{label:"Logistics",color:"primary",size:"small"}),(0,St.jsx)(yg,{label:"Cold Chain",color:"primary",size:"small"}),(0,St.jsx)(yg,{label:"Compliance",color:"primary",size:"small"})]})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsxs)($h,{sx:{p:{xs:2,md:4},height:"100%"},children:[(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,sx:{fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"\ud83c\udfe0 Real Estate Assets"}),(0,St.jsx)(Bu,{paragraph:!0,sx:{fontSize:{xs:"0.9rem",md:"1rem"}},children:"Tokenize and track real estate properties. Monitor property conditions, tenant activities, and maintenance schedules."}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,St.jsx)(yg,{label:"Property Management",color:"primary",size:"small"}),(0,St.jsx)(yg,{label:"Tenant Tracking",color:"primary",size:"small"}),(0,St.jsx)(yg,{label:"Maintenance",color:"primary",size:"small"})]})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsxs)($h,{sx:{p:{xs:2,md:4},height:"100%"},children:[(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,sx:{fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"\ud83d\ude97 Vehicle Fleet Management"}),(0,St.jsx)(Bu,{paragraph:!0,sx:{fontSize:{xs:"0.9rem",md:"1rem"}},children:"Monitor fleet vehicles, optimize routes, and ensure driver safety. Track fuel consumption and maintenance schedules."}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,St.jsx)(yg,{label:"Fleet Tracking",color:"primary",size:"small"}),(0,St.jsx)(yg,{label:"Route Optimization",color:"primary",size:"small"}),(0,St.jsx)(yg,{label:"Driver Safety",color:"primary",size:"small"})]})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsxs)($h,{sx:{p:{xs:2,md:4},height:"100%"},children:[(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,sx:{fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"\ud83d\udc8e High-Value Assets"}),(0,St.jsx)(Bu,{paragraph:!0,sx:{fontSize:{xs:"0.9rem",md:"1rem"}},children:"Secure tracking of precious metals, artwork, and luxury items. Ensure authenticity and prevent theft with blockchain verification."}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,St.jsx)(yg,{label:"Art Authentication",color:"primary",size:"small"}),(0,St.jsx)(yg,{label:"Luxury Goods",color:"primary",size:"small"}),(0,St.jsx)(yg,{label:"Precious Metals",color:"primary",size:"small"})]})]})})]})]})}),(0,St.jsxs)(dp,{maxWidth:"lg",sx:{py:{xs:6,md:8}},children:[(0,St.jsx)(Bu,{variant:"h3",component:"h2",align:"center",gutterBottom:!0,sx:{mb:{xs:4,md:6},fontSize:{xs:"1.75rem",sm:"2rem",md:"2.5rem"}},children:"Why Choose Stellar GeoLink?"}),(0,St.jsxs)(Jm,{container:!0,spacing:{xs:3,md:4},children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:4,children:(0,St.jsxs)(uu,{sx:{textAlign:"center",p:{xs:2,md:3}},children:[(0,St.jsx)(wg,{sx:{fontSize:{xs:40,md:60},color:"primary.main",mb:2}}),(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,sx:{fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Enterprise Security"}),(0,St.jsx)(Bu,{sx:{fontSize:{xs:"0.9rem",md:"1rem"}},children:"Bank-grade security with API key management, encrypted communications, and blockchain-verified data integrity."})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:4,children:(0,St.jsxs)(uu,{sx:{textAlign:"center",p:{xs:2,md:3}},children:[(0,St.jsx)(bg,{sx:{fontSize:{xs:40,md:60},color:"primary.main",mb:2}}),(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,sx:{fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Lightning Fast"}),(0,St.jsx)(Bu,{sx:{fontSize:{xs:"0.9rem",md:"1rem"}},children:"Built on Stellar's high-performance blockchain for instant transactions and real-time updates with minimal fees."})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:4,children:(0,St.jsxs)(uu,{sx:{textAlign:"center",p:{xs:2,md:3}},children:[(0,St.jsx)(jg,{sx:{fontSize:{xs:40,md:60},color:"primary.main",mb:2}}),(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,sx:{fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Developer Friendly"}),(0,St.jsx)(Bu,{sx:{fontSize:{xs:"0.9rem",md:"1rem"}},children:"Comprehensive REST APIs, SDKs, and documentation for seamless integration with your existing systems."})]})})]})]})]}),(0,St.jsx)(uu,{sx:{background:"linear-gradient(135deg, #000000 0%, #1a1a1a 100%)",color:"white",py:{xs:6,md:8}},children:(0,St.jsxs)(dp,{maxWidth:"lg",children:[(0,St.jsx)(Bu,{variant:"h4",component:"h2",align:"center",gutterBottom:!0,sx:{fontSize:{xs:"1.5rem",sm:"2rem",md:"2.5rem"},color:"white"},children:"Ready to Transform Your Asset Tracking?"}),(0,St.jsx)(Bu,{align:"center",paragraph:!0,sx:{mb:{xs:3,md:4},opacity:.9,fontSize:{xs:"0.9rem",md:"1rem"},color:"white"},children:"Join hundreds of companies already using Stellar GeoLink to track their most valuable assets"}),(0,St.jsxs)(uu,{sx:{textAlign:"center",display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"center",gap:2,alignItems:"center"},children:[(0,St.jsx)(Ap,{variant:"contained",color:"primary",size:"large",component:ht,to:"/register",sx:{px:{xs:4,md:6},py:2,width:{xs:"100%",sm:"auto"},backgroundColor:"#FFD700",color:"#000000","&:hover":{backgroundColor:"#E6C200",boxShadow:"0 4px 8px rgba(0,0,0,0.15)"}},children:"Start Free Trial"}),(0,St.jsx)(Ap,{variant:"outlined",color:"inherit",size:"large",component:ht,to:"/contact",sx:{px:{xs:4,md:6},py:2,width:{xs:"100%",sm:"auto"},borderColor:"#FFFFFF",color:"#FFFFFF","&:hover":{borderColor:"#FFD700",backgroundColor:"rgba(255, 215, 0, 0.1)",color:"#FFD700"}},children:"Contact Sales"}),(0,St.jsx)(uu,{sx:{mt:4},children:(0,St.jsx)(uu,{component:"img",src:"/images/Stellar_Logo.png",alt:"Stellar Logo",sx:{width:275,height:100,filter:"brightness(0) invert(1)",zIndex:2,position:"relative"}})})]})]})}),(0,St.jsx)(uu,{sx:{bgcolor:"grey.50",py:6},children:(0,St.jsx)(dp,{maxWidth:"lg",children:(0,St.jsx)(N_,{})})}),(0,St.jsx)(uu,{sx:{bgcolor:"primary.main",color:"white",py:6},children:(0,St.jsxs)(dp,{maxWidth:"lg",children:[(0,St.jsxs)(Jm,{container:!0,spacing:4,alignItems:"center",children:[(0,St.jsxs)(Jm,{item:!0,xs:12,md:6,children:[(0,St.jsx)(Bu,{variant:"h4",component:"h3",sx:{fontWeight:"bold",mb:2},children:"Stellar GeoLink"}),(0,St.jsx)(Bu,{variant:"body1",sx:{opacity:.9,mb:2},children:"Real-time location tracking for Stellar-based Real World Assets (RWAs)"})]}),(0,St.jsxs)(Jm,{item:!0,xs:12,md:6,children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"Powered by Stellar Network"}),(0,St.jsx)(Bu,{variant:"body2",sx:{opacity:.8,mb:2},children:"Built on the Stellar blockchain for secure, fast, and cost-effective asset tracking. Leveraging the power of decentralized technology for enterprise solutions."}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,St.jsx)(yg,{label:"Blockchain",color:"secondary",size:"small"}),(0,St.jsx)(yg,{label:"Decentralized",color:"secondary",size:"small"}),(0,St.jsx)(yg,{label:"Secure",color:"secondary",size:"small"}),(0,St.jsx)(yg,{label:"Fast",color:"secondary",size:"small"})]})]})]}),(0,St.jsx)(lh,{sx:{my:4,borderColor:"rgba(255,255,255,0.2)"}}),(0,St.jsx)(uu,{sx:{textAlign:"center"},children:(0,St.jsx)(Bu,{variant:"body2",sx:{opacity:.6},children:"\xa9 2024 Stellar GeoLink. All rights reserved. | Built with \u2764\ufe0f on Stellar Network"})})]})})]}),U_=Fm((0,St.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"Group"),V_=Fm((0,St.jsx)("path",{d:"M20 9V7c0-1.1-.9-2-2-2h-3c0-1.66-1.34-3-3-3S9 3.34 9 5H6c-1.1 0-2 .9-2 2v2c-1.66 0-3 1.34-3 3s1.34 3 3 3v4c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-4c1.66 0 3-1.34 3-3s-1.34-3-3-3M7.5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S9.83 13 9 13s-1.5-.67-1.5-1.5M16 17H8v-2h8zm-1-4c-.83 0-1.5-.67-1.5-1.5S14.17 10 15 10s1.5.67 1.5 1.5S15.83 13 15 13"}),"SmartToy"),W_=Fm((0,St.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96"}),"Cloud"),q_=Fm((0,St.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),H_=Fm((0,St.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp"),G_=()=>(0,St.jsxs)(uu,{sx:{minHeight:"100vh",bgcolor:"background.default"},children:[(0,St.jsx)(uu,{sx:{background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",color:"black",py:{xs:6,md:8},textAlign:"center"},children:(0,St.jsxs)(dp,{maxWidth:"lg",children:[(0,St.jsx)(uu,{component:"img",src:"/images/Stellar_Logo.png",alt:"Stellar Logo",sx:{width:{xs:200,sm:250,md:275},height:{xs:75,sm:90,md:100},mb:3,zIndex:2,position:"relative"}}),(0,St.jsx)(Bu,{variant:"h2",component:"h1",sx:{fontWeight:"bold",mb:2,fontSize:{xs:"1.75rem",sm:"2.5rem",md:"3rem"},color:"black"},children:"Stellar GeoLink Features"}),(0,St.jsx)(Bu,{variant:"h5",sx:{opacity:.9,maxWidth:"800px",mx:"auto",fontSize:{xs:"1rem",sm:"1.25rem",md:"1.5rem"},color:"black"},children:"Comprehensive blockchain-powered geolocation services for blockchain nodes and transactions. Track, monitor, and visualize node locations with precision and security on the Stellar network."})]})}),(0,St.jsxs)(dp,{maxWidth:"lg",sx:{py:{xs:6,md:8}},children:[(0,St.jsx)(Bu,{variant:"h3",component:"h2",align:"center",gutterBottom:!0,sx:{mb:{xs:4,md:6},fontSize:{xs:"1.75rem",sm:"2rem",md:"2.5rem"}},children:"Core Features"}),(0,St.jsxs)(Jm,{container:!0,spacing:{xs:3,md:4},children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsx)(tg,{sx:{height:"100%",p:{xs:2,md:3}},children:(0,St.jsxs)(ig,{children:[(0,St.jsxs)(uu,{sx:{display:"flex",alignItems:"center",mb:{xs:2,md:3},flexDirection:{xs:"column",sm:"row"},textAlign:{xs:"center",sm:"left"}},children:[(0,St.jsx)(vg,{color:"primary",sx:{fontSize:{xs:40,md:50},mr:{xs:0,sm:2},mb:{xs:1,sm:0}}}),(0,St.jsx)(Bu,{variant:"h4",component:"h3",sx:{fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Real-Time Node Tracking"})]}),(0,St.jsx)(Bu,{paragraph:!0,sx:{fontSize:{xs:"0.9rem",md:"1rem"}},children:"Monitor blockchain nodes with GPS precision and blockchain verification. Get instant location updates and track node status patterns in real-time."}),(0,St.jsxs)(ph,{dense:!0,children:[(0,St.jsxs)(Kh,{sx:{px:0},children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Sub-second node location updates",primaryTypographyProps:{fontSize:{xs:"0.85rem",md:"0.9rem"}}})]}),(0,St.jsxs)(Kh,{sx:{px:0},children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Historical node status tracking",primaryTypographyProps:{fontSize:{xs:"0.85rem",md:"0.9rem"}}})]}),(0,St.jsxs)(Kh,{sx:{px:0},children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Interactive map visualization",primaryTypographyProps:{fontSize:{xs:"0.85rem",md:"0.9rem"}}})]}),(0,St.jsxs)(Kh,{sx:{px:0},children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Blockchain-verified coordinates",primaryTypographyProps:{fontSize:{xs:"0.85rem",md:"0.9rem"}}})]})]})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsx)(tg,{sx:{height:"100%",p:{xs:2,md:3}},children:(0,St.jsxs)(ig,{children:[(0,St.jsxs)(uu,{sx:{display:"flex",alignItems:"center",mb:{xs:2,md:3},flexDirection:{xs:"column",sm:"row"},textAlign:{xs:"center",sm:"left"}},children:[(0,St.jsx)(wg,{color:"primary",sx:{fontSize:{xs:40,md:50},mr:{xs:0,sm:2},mb:{xs:1,sm:0}}}),(0,St.jsx)(Bu,{variant:"h4",component:"h3",sx:{fontSize:{xs:"1.25rem",md:"1.5rem"}},children:"Geofencing & Security"})]}),(0,St.jsx)(Bu,{paragraph:!0,sx:{fontSize:{xs:"0.9rem",md:"1rem"}},children:"Set up virtual boundaries and receive instant notifications when nodes enter or exit designated areas. Enterprise-grade security features."}),(0,St.jsxs)(ph,{dense:!0,children:[(0,St.jsxs)(Kh,{sx:{px:0},children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Custom geofence zones",primaryTypographyProps:{fontSize:{xs:"0.85rem",md:"0.9rem"}}})]}),(0,St.jsxs)(Kh,{sx:{px:0},children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Security breach alerts",primaryTypographyProps:{fontSize:{xs:"0.85rem",md:"0.9rem"}}})]}),(0,St.jsxs)(Kh,{sx:{px:0},children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Multi-zone monitoring",primaryTypographyProps:{fontSize:{xs:"0.85rem",md:"0.9rem"}}})]}),(0,St.jsxs)(Kh,{sx:{px:0},children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"API key management",primaryTypographyProps:{fontSize:{xs:"0.85rem",md:"0.9rem"}}})]})]})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsx)(tg,{sx:{height:"100%",p:3},children:(0,St.jsxs)(ig,{children:[(0,St.jsxs)(uu,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,St.jsx)(Eg,{color:"primary",sx:{fontSize:50,mr:2}}),(0,St.jsx)(Bu,{variant:"h4",component:"h3",children:"Advanced Analytics"})]}),(0,St.jsx)(Bu,{paragraph:!0,children:"Comprehensive analytics dashboard with detailed insights into node performance, network patterns, and optimization opportunities."}),(0,St.jsxs)(ph,{dense:!0,children:[(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Real-time dashboards"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Node performance tracking"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Performance metrics"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Export capabilities"})]})]})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsx)(tg,{sx:{height:"100%",p:3},children:(0,St.jsxs)(ig,{children:[(0,St.jsxs)(uu,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,St.jsx)(jg,{color:"primary",sx:{fontSize:50,mr:2}}),(0,St.jsx)(Bu,{variant:"h4",component:"h3",children:"Developer APIs"})]}),(0,St.jsx)(Bu,{paragraph:!0,children:"Comprehensive REST APIs, SDKs, and documentation for seamless integration with your existing systems and applications."}),(0,St.jsxs)(ph,{dense:!0,children:[(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"RESTful API endpoints"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"WebSocket real-time updates"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"SDK libraries"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Comprehensive documentation"})]})]})]})})})]})]}),(0,St.jsx)(uu,{sx:{bgcolor:"grey.50",py:8},children:(0,St.jsxs)(dp,{maxWidth:"lg",children:[(0,St.jsx)(Bu,{variant:"h3",component:"h2",align:"center",gutterBottom:!0,sx:{mb:6},children:"Use Cases & Applications"}),(0,St.jsxs)(Jm,{container:!0,spacing:4,children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:4,children:(0,St.jsxs)($h,{sx:{p:4,height:"100%",textAlign:"center"},children:[(0,St.jsx)(Ag,{sx:{fontSize:60,color:"primary.main",mb:2}}),(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,children:"Blockchain Network Monitoring"}),(0,St.jsx)(Bu,{paragraph:!0,children:"Monitor blockchain network health and node distribution across different geographical regions with real-time status updates."}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:1,flexWrap:"wrap",justifyContent:"center"},children:[(0,St.jsx)(yg,{label:"Network Health",color:"primary",size:"small"}),(0,St.jsx)(yg,{label:"Node Distribution",color:"primary",size:"small"}),(0,St.jsx)(yg,{label:"Performance",color:"primary",size:"small"})]})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:4,children:(0,St.jsxs)($h,{sx:{p:4,height:"100%",textAlign:"center"},children:[(0,St.jsx)(U_,{sx:{fontSize:60,color:"primary.main",mb:2}}),(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,children:"Stellar Network Visualization"}),(0,St.jsx)(Bu,{paragraph:!0,children:"Visualize Stellar network topology and node connections. Monitor validator nodes and network consensus across different regions."}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:1,flexWrap:"wrap",justifyContent:"center"},children:[(0,St.jsx)(yg,{label:"Network Topology",color:"primary",size:"small"}),(0,St.jsx)(yg,{label:"Validator Nodes",color:"primary",size:"small"}),(0,St.jsx)(yg,{label:"Consensus",color:"primary",size:"small"})]})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:4,children:(0,St.jsxs)($h,{sx:{p:4,height:"100%",textAlign:"center"},children:[(0,St.jsx)(V_,{sx:{fontSize:60,color:"primary.main",mb:2}}),(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,children:"Unity 3D Integration"}),(0,St.jsx)(Bu,{paragraph:!0,children:"Seamless integration with Unity 3D visualization tools for blockchain network mapping and interactive 3D node visualization."}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:1,flexWrap:"wrap",justifyContent:"center"},children:[(0,St.jsx)(yg,{label:"3D Visualization",color:"primary",size:"small"}),(0,St.jsx)(yg,{label:"Unity Integration",color:"primary",size:"small"}),(0,St.jsx)(yg,{label:"Interactive Maps",color:"primary",size:"small"})]})]})})]})]})}),(0,St.jsxs)(dp,{maxWidth:"lg",sx:{py:8},children:[(0,St.jsx)(Bu,{variant:"h3",component:"h2",align:"center",gutterBottom:!0,sx:{mb:6},children:"Why Choose Stellar GeoLink?"}),(0,St.jsxs)(Jm,{container:!0,spacing:4,children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:4,children:(0,St.jsxs)(uu,{sx:{textAlign:"center",p:3},children:[(0,St.jsx)(kg,{sx:{fontSize:80,color:"primary.main",mb:3}}),(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,children:"Enterprise Security"}),(0,St.jsx)(Bu,{paragraph:!0,children:"Bank-grade security with API key management, encrypted communications, and blockchain-verified data integrity. Your network data is protected with military-grade encryption and decentralized verification."})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:4,children:(0,St.jsxs)(uu,{sx:{textAlign:"center",p:3},children:[(0,St.jsx)(bg,{sx:{fontSize:80,color:"primary.main",mb:3}}),(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,children:"Lightning Fast"}),(0,St.jsx)(Bu,{paragraph:!0,children:"Built on Stellar's high-performance blockchain for instant transactions and real-time updates with minimal fees. Experience sub-second response times and global scalability."})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:4,children:(0,St.jsxs)(uu,{sx:{textAlign:"center",p:3},children:[(0,St.jsx)(W_,{sx:{fontSize:80,color:"primary.main",mb:3}}),(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,children:"Scalable Infrastructure"}),(0,St.jsx)(Bu,{paragraph:!0,children:"Cloud-native architecture that scales with your network. From tracking a single node to managing thousands of nodes across multiple locations and time zones."})]})})]})]}),(0,St.jsxs)(dp,{maxWidth:"lg",sx:{py:8},children:[(0,St.jsx)(Bu,{variant:"h3",component:"h2",align:"center",gutterBottom:!0,sx:{mb:6},children:"Current Platform Features"}),(0,St.jsxs)(Jm,{container:!0,spacing:4,children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsx)(tg,{sx:{height:"100%",p:3},children:(0,St.jsxs)(ig,{children:[(0,St.jsxs)(uu,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,St.jsx)(wg,{color:"primary",sx:{fontSize:50,mr:2}}),(0,St.jsx)(Bu,{variant:"h4",component:"h3",children:"Authentication & Security"})]}),(0,St.jsxs)(ph,{dense:!0,children:[(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"JWT-based authentication with refresh tokens"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Role-based access control"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"API key management with approval workflows"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Privacy controls and visibility settings"})]})]})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsx)(tg,{sx:{height:"100%",p:3},children:(0,St.jsxs)(ig,{children:[(0,St.jsxs)(uu,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,St.jsx)(vg,{color:"primary",sx:{fontSize:50,mr:2}}),(0,St.jsx)(Bu,{variant:"h4",component:"h3",children:"Location Services"})]}),(0,St.jsxs)(ph,{dense:!0,children:[(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"PostGIS-powered location tracking"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Historical location data"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Geofencing capabilities with notifications"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Mapbox GL JS integration"})]})]})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsx)(tg,{sx:{height:"100%",p:3},children:(0,St.jsxs)(ig,{children:[(0,St.jsxs)(uu,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,St.jsx)(Eg,{color:"primary",sx:{fontSize:50,mr:2}}),(0,St.jsx)(Bu,{variant:"h4",component:"h3",children:"Analytics & Monitoring"})]}),(0,St.jsxs)(ph,{dense:!0,children:[(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Detailed API usage tracking"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Analytics dashboard"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Request management system"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Rate limiting and monitoring"})]})]})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsx)(tg,{sx:{height:"100%",p:3},children:(0,St.jsxs)(ig,{children:[(0,St.jsxs)(uu,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,St.jsx)(jg,{color:"primary",sx:{fontSize:50,mr:2}}),(0,St.jsx)(Bu,{variant:"h4",component:"h3",children:"API & Integration"})]}),(0,St.jsxs)(ph,{dense:!0,children:[(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"RESTful API endpoints"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Swagger API documentation"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"Unity 3D integration support"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{color:"success",fontSize:"small"})}),(0,St.jsx)(Rh,{primary:"BlockchainMaps compatibility"})]})]})]})})})]})]}),(0,St.jsx)(uu,{sx:{bgcolor:"primary.main",color:"white",py:8},children:(0,St.jsxs)(dp,{maxWidth:"lg",children:[(0,St.jsx)(Bu,{variant:"h3",component:"h2",align:"center",gutterBottom:!0,sx:{mb:6},children:"Technical Capabilities"}),(0,St.jsxs)(Jm,{container:!0,spacing:4,children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsxs)($h,{sx:{p:4,backgroundColor:"rgba(255,255,255,0.1)",backdropFilter:"blur(10px)"},children:[(0,St.jsxs)(Bu,{variant:"h5",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[(0,St.jsx)(q_,{sx:{mr:2}}),"Blockchain Integration"]}),(0,St.jsxs)(ph,{children:[(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{sx:{color:"white"}})}),(0,St.jsx)(Rh,{primary:"Stellar Network Integration"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{sx:{color:"white"}})}),(0,St.jsx)(Rh,{primary:"Smart Contract Automation"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{sx:{color:"white"}})}),(0,St.jsx)(Rh,{primary:"Decentralized Data Storage"})]})]})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsxs)($h,{sx:{p:4,backgroundColor:"rgba(255,255,255,0.1)",backdropFilter:"blur(10px)"},children:[(0,St.jsxs)(Bu,{variant:"h5",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[(0,St.jsx)(H_,{sx:{mr:2}}),"Performance & Reliability"]}),(0,St.jsxs)(ph,{children:[(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{sx:{color:"white"}})}),(0,St.jsx)(Rh,{primary:"99.9% Uptime Guarantee"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{sx:{color:"white"}})}),(0,St.jsx)(Rh,{primary:"Global CDN Distribution"})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(F_,{sx:{color:"white"}})}),(0,St.jsx)(Rh,{primary:"Auto-scaling Infrastructure"})]})]})]})})]})]})}),(0,St.jsx)(uu,{sx:{bgcolor:"grey.900",color:"white",py:6},children:(0,St.jsxs)(dp,{maxWidth:"lg",children:[(0,St.jsxs)(uu,{sx:{textAlign:"center"},children:[(0,St.jsx)(Bu,{variant:"h4",component:"h3",sx:{fontWeight:"bold",mb:2,color:"white"},children:"Ready to Get Started?"}),(0,St.jsx)(Bu,{variant:"body1",sx:{opacity:.8,mb:4,color:"white"},children:"Experience the power of blockchain-powered asset tracking"}),(0,St.jsx)(uu,{component:"img",src:"/images/Stellar_Logo.png",alt:"Stellar Logo",sx:{width:165,height:60,filter:"brightness(0) invert(1)",zIndex:2,position:"relative"}})]}),(0,St.jsx)(lh,{sx:{my:4,borderColor:"rgba(255,255,255,0.2)"}}),(0,St.jsx)(uu,{sx:{textAlign:"center"},children:(0,St.jsx)(Bu,{variant:"body2",sx:{opacity:.6},children:"\xa9 2024 Stellar GeoLink. All rights reserved. | Built with \u2764\ufe0f on Stellar Network"})})]})})]}),K_=()=>(0,St.jsx)(uu,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px"},children:(0,St.jsx)(Xd,{})}),X_=e=>{let{children:t,roles:r=[]}=e;const{user:n,loading:o}=wc(),i=ce();return console.log("Protected Route:",{user:n,loading:o,currentPath:i.pathname,roles:r,hasRequiredRole:n&&r.includes(n.role)}),o?(0,St.jsx)(K_,{}):n?r.length>0&&!r.includes(n.role)?(console.log("User role not authorized:",n.role),(0,St.jsx)(Ce,{to:"/dashboard",replace:!0})):t:(console.log("No user found, redirecting to login"),(0,St.jsx)(Ce,{to:"/login",state:{from:i},replace:!0}))};function Z_(e){return iu("MuiFormControlLabel",e)}const Y_=au("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),J_=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slots","slotProps","value"],$_=Eu("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{["& .".concat(Y_.label)]:t.label},t.root,t["labelPlacement".concat(ju(r.labelPlacement))]]}})(Au((e=>{let{theme:t}=e;return{display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,["&.".concat(Y_.disabled)]:{cursor:"default"},["& .".concat(Y_.label)]:{["&.".concat(Y_.disabled)]:{color:(t.vars||t).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:e=>{let{labelPlacement:t}=e;return"start"===t||"top"===t||"bottom"===t},style:{marginLeft:16}}]}}))),Q_=Eu("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(Au((e=>{let{theme:t}=e;return{["&.".concat(Y_.error)]:{color:(t.vars||t).palette.error.main}}}))),ew=t.forwardRef((function(e,r){var n;const o=Ta({props:e,name:"MuiFormControlLabel"}),{checked:i,className:s,componentsProps:l={},control:c,disabled:u,disableTypography:h,inputRef:p,label:f,labelPlacement:m="end",name:g,onChange:y,required:v,slots:b={},slotProps:x={},value:_}=o,w=a(o,J_),S=Qg(),k=null!==(n=null!==u&&void 0!==u?u:c.props.disabled)&&void 0!==n?n:null===S||void 0===S?void 0:S.disabled,T=null!==v&&void 0!==v?v:c.props.required,E={disabled:k,required:T};["checked","name","onChange","value","inputRef"].forEach((e=>{"undefined"===typeof c.props[e]&&"undefined"!==typeof o[e]&&(E[e]=o[e])}));const C=Jg({props:o,muiFormControl:S,states:["error"]}),A=d(d({},o),{},{disabled:k,labelPlacement:m,required:T,error:C.error}),j=(e=>{const{classes:t,disabled:r,labelPlacement:n,error:o,required:i}=e;return du({root:["root",r&&"disabled","labelPlacement".concat(ju(n)),o&&"error",i&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",o&&"error"]},Z_,t)})(A),P={slots:b,slotProps:d(d({},l),x)},[I,O]=Ih("typography",{elementType:Bu,externalForwardedProps:P,ownerState:A});let M=f;return null==M||M.type===Bu||h||(M=(0,St.jsx)(I,d(d({component:"span"},O),{},{className:Wc(j.label,null===O||void 0===O?void 0:O.className),children:M}))),(0,St.jsxs)($_,d(d({className:Wc(j.root,s),ownerState:A,ref:r},w),{},{children:[t.cloneElement(c,E),T?(0,St.jsxs)("div",{children:[M,(0,St.jsxs)(Q_,{ownerState:A,"aria-hidden":!0,className:j.asterisk,children:["\u2009","*"]})]}):M]}))}));function tw(e){return iu("PrivateSwitchBase",e)}au("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const rw=["autoFocus","checked","checkedIcon","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value","slots","slotProps"],nw=Eu(Od)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:e=>{let{edge:t,ownerState:r}=e;return"start"===t&&"small"!==r.size},style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:e=>{let{edge:t,ownerState:r}=e;return"end"===t&&"small"!==r.size},style:{marginRight:-12}}]}),ow=Eu("input",{shouldForwardProp:Tu})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),iw=t.forwardRef((function(e,t){const{autoFocus:r,checked:n,checkedIcon:o,defaultChecked:i,disabled:s,disableFocusRipple:l=!1,edge:c=!1,icon:u,id:h,inputProps:p,inputRef:f,name:m,onBlur:g,onChange:y,onFocus:v,readOnly:b,required:x=!1,tabIndex:_,type:w,value:S,slots:k={},slotProps:T={}}=e,E=a(e,rw),[C,A]=mv({controlled:n,default:Boolean(i),name:"SwitchBase",state:"checked"}),j=Qg();let P=s;j&&"undefined"===typeof P&&(P=j.disabled);const I="checkbox"===w||"radio"===w,O=d(d({},e),{},{checked:C,disabled:P,disableFocusRipple:l,edge:c}),M=(e=>{const{classes:t,checked:r,disabled:n,edge:o}=e;return du({root:["root",r&&"checked",n&&"disabled",o&&"edge".concat(ju(o))],input:["input"]},tw,t)})(O),R={slots:k,slotProps:d({input:p},T)},[L,F]=Ih("root",{ref:t,elementType:nw,className:M.root,shouldForwardComponentProp:!0,externalForwardedProps:d(d({},R),{},{component:"span"},E),getSlotProps:e=>d(d({},e),{},{onFocus:t=>{var r;null===(r=e.onFocus)||void 0===r||r.call(e,t),(e=>{v&&v(e),j&&j.onFocus&&j.onFocus(e)})(t)},onBlur:t=>{var r;null===(r=e.onBlur)||void 0===r||r.call(e,t),(e=>{g&&g(e),j&&j.onBlur&&j.onBlur(e)})(t)}}),ownerState:O,additionalProps:{centerRipple:!0,focusRipple:!l,disabled:P,role:void 0,tabIndex:null}}),[z,D]=Ih("input",{ref:f,elementType:ow,className:M.input,externalForwardedProps:R,getSlotProps:e=>({onChange:t=>{var r;null===(r=e.onChange)||void 0===r||r.call(e,t),(e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;A(t),y&&y(e,t)})(t)}}),ownerState:O,additionalProps:d({autoFocus:r,checked:n,defaultChecked:i,disabled:P,id:I?h:void 0,name:m,readOnly:b,required:x,tabIndex:_,type:w},"checkbox"===w&&void 0===S?{}:{value:S})});return(0,St.jsxs)(L,d(d({},F),{},{children:[(0,St.jsx)(z,d({},D)),C?o:u]}))})),aw=Fm((0,St.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),sw=Fm((0,St.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),lw=Fm((0,St.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function cw(e){return iu("MuiCheckbox",e)}const uw=au("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),dw=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","disableRipple","className","slots","slotProps"],hw=Eu(iw,{shouldForwardProp:e=>Tu(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,t["size".concat(ju(r.size))],"default"!==r.color&&t["color".concat(ju(r.color))]]}})(Au((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Go(t.palette.action.active,t.palette.action.hoverOpacity)}}},...Object.entries(t.palette).filter(Pu()).map((e=>{let[r]=e;return{props:{color:r,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[r].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Go(t.palette[r].main,t.palette.action.hoverOpacity)}}}})),...Object.entries(t.palette).filter(Pu()).map((e=>{let[r]=e;return{props:{color:r},style:{["&.".concat(uw.checked,", &.").concat(uw.indeterminate)]:{color:(t.vars||t).palette[r].main},["&.".concat(uw.disabled)]:{color:(t.vars||t).palette.action.disabled}}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}}))),pw=(0,St.jsx)(sw,{}),fw=(0,St.jsx)(aw,{}),mw=(0,St.jsx)(lw,{}),gw=t.forwardRef((function(e,r){var n,o,i;const s=Ta({props:e,name:"MuiCheckbox"}),{checkedIcon:l=pw,color:c="primary",icon:u=fw,indeterminate:h=!1,indeterminateIcon:p=mw,inputProps:f,size:m="medium",disableRipple:g=!1,className:y,slots:v={},slotProps:b={}}=s,x=a(s,dw),_=h?p:u,w=h?p:l,S=d(d({},s),{},{disableRipple:g,color:c,indeterminate:h,size:m}),k=(e=>{const{classes:t,indeterminate:r,color:n,size:o}=e,i=du({root:["root",r&&"indeterminate","color".concat(ju(n)),"size".concat(ju(o))]},cw,t);return d(d({},t),i)})(S),T=null!==(n=b.input)&&void 0!==n?n:f,[E,C]=Ih("root",{ref:r,elementType:hw,className:Wc(k.root,y),shouldForwardComponentProp:!0,externalForwardedProps:d({slots:v,slotProps:b},x),ownerState:S,additionalProps:{type:"checkbox",icon:t.cloneElement(_,{fontSize:null!==(o=_.props.fontSize)&&void 0!==o?o:m}),checkedIcon:t.cloneElement(w,{fontSize:null!==(i=w.props.fontSize)&&void 0!==i?i:m}),disableRipple:g,slots:v,slotProps:{input:Vf("function"===typeof T?T(S):T,{"data-indeterminate":h})}}});return(0,St.jsx)(E,d(d({},C),{},{classes:k}))})),yw=gw;function vw(e){return iu("MuiLink",e)}const bw=au("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),xw=e=>{let{theme:t,ownerState:r}=e;const n=r.color,o=jn(t,"palette.".concat(n,".main"),!1)||jn(t,"palette.".concat(n),!1)||r.color,i=jn(t,"palette.".concat(n,".mainChannel"))||jn(t,"palette.".concat(n,"Channel"));return"vars"in t&&i?"rgba(".concat(i," / 0.4)"):Go(o,.4)},_w=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],ww={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Sw=Eu(Bu,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t["underline".concat(ju(r.underline))],"button"===r.component&&t.button]}})(Au((e=>{let{theme:t}=e;return{variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:e=>{let{underline:t,ownerState:r}=e;return"always"===t&&"inherit"!==r.color},style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(t.palette).filter(Pu()).map((e=>{let[r]=e;return{props:{underline:"always",color:r},style:{"--Link-underlineColor":t.vars?"rgba(".concat(t.vars.palette[r].mainChannel," / 0.4)"):Go(t.palette[r].main,.4)}}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / 0.4)"):Go(t.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":t.vars?"rgba(".concat(t.vars.palette.text.secondaryChannel," / 0.4)"):Go(t.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(t.vars||t).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(bw.focusVisible)]:{outline:"auto"}}}]}}))),kw=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiLink"}),o=Lc(),{className:i,color:s="primary",component:l="a",onBlur:c,onFocus:u,TypographyClasses:h,underline:p="always",variant:f="inherit",sx:m}=n,g=a(n,_w),[y,v]=t.useState(!1),b=d(d({},n),{},{color:s,component:l,focusVisible:y,underline:p,variant:f}),x=(e=>{const{classes:t,component:r,focusVisible:n,underline:o}=e;return du({root:["root","underline".concat(ju(o)),"button"===r&&"button",n&&"focusVisible"]},vw,t)})(b);return(0,St.jsx)(Sw,d(d({color:s,className:Wc(x.root,i),classes:h,component:l,onBlur:e=>{Hu(e.target)||v(!1),c&&c(e)},onFocus:e=>{Hu(e.target)&&v(!0),u&&u(e)},ref:r,ownerState:b,variant:f},g),{},{sx:[...void 0===ww[s]?[{color:s}]:[],...Array.isArray(m)?m:[m]],style:d(d({},g.style),"always"===p&&"inherit"!==s&&!ww[s]&&{"--Link-underlineColor":xw({theme:o,ownerState:b})})}))})),Tw=kw,Ew=()=>{const[e,r]=(0,t.useState)({email:"",password:""}),[n,o]=(0,t.useState)(!1),[i,a]=(0,t.useState)(!1),[s,l]=(0,t.useState)({}),{login:c,error:u}=wc(),h=he();return i?(0,St.jsx)(K_,{}):(0,St.jsx)(dp,{maxWidth:"sm",children:(0,St.jsx)(uu,{sx:{mt:{xs:4,md:8},mb:{xs:4,md:8}},children:(0,St.jsxs)($h,{sx:{p:{xs:2,md:4}},children:[(0,St.jsx)(Bu,{variant:"h4",align:"center",gutterBottom:!0,sx:{fontSize:{xs:"1.75rem",md:"2rem"},mb:{xs:2,md:3}},children:"Login to GeoLink"}),u&&(0,St.jsx)(n_,{severity:"error",sx:{mb:2},children:u}),(0,St.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),(()=>{const t={};return e.email?/\S+@\S+\.\S+/.test(e.email)||(t.email="Email is invalid"):t.email="Email is required",e.password||(t.password="Password is required"),l(t),0===Object.keys(t).length})()){a(!0);try{const t=await c(e);console.log("Login successful:",t),n&&localStorage.setItem("rememberMe","true"),h("admin"===t.role?"/admin":"/dashboard")}catch(r){console.error("Login error:",r)}finally{a(!1)}}},children:[(0,St.jsx)(Uv,{fullWidth:!0,label:"Email",type:"email",margin:"normal",value:e.email,onChange:t=>r(d(d({},e),{},{email:t.target.value})),error:!!s.email,helperText:s.email,sx:{"& .MuiInputBase-input":{fontSize:{xs:"1rem",md:"1rem"}}}}),(0,St.jsx)(Uv,{fullWidth:!0,label:"Password",type:"password",margin:"normal",value:e.password,onChange:t=>r(d(d({},e),{},{password:t.target.value})),error:!!s.password,helperText:s.password,sx:{"& .MuiInputBase-input":{fontSize:{xs:"1rem",md:"1rem"}}}}),(0,St.jsx)(ew,{control:(0,St.jsx)(yw,{checked:n,onChange:e=>o(e.target.checked),color:"primary"}),label:"Remember me",sx:{mt:1,"& .MuiFormControlLabel-label":{fontSize:{xs:"0.9rem",md:"1rem"}}}}),(0,St.jsx)(Ap,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",sx:{mt:3,mb:2,py:{xs:1.5,md:1.5},fontSize:{xs:"1rem",md:"1rem"}},disabled:i,children:i?"Logging in...":"Login"}),(0,St.jsx)(uu,{sx:{textAlign:"center",mt:2},children:(0,St.jsx)(Tw,{component:ht,to:"/register",variant:"body2",sx:{fontSize:{xs:"0.9rem",md:"1rem"}},children:"Don't have an account? Sign Up"})})]})]})})})},Cw=()=>{const e=he(),{register:r}=wc(),[n,o]=(0,t.useState)({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",organization:"",role:"data_consumer",useCase:""}),[i,a]=(0,t.useState)({}),[s,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(!1),h=e=>{const{name:t,value:r}=e.target;o((e=>d(d({},e),{},{[t]:r}))),i[t]&&a((e=>d(d({},e),{},{[t]:""})))};return(0,St.jsx)(dp,{maxWidth:"sm",children:(0,St.jsx)(uu,{sx:{mt:{xs:2,md:4},mb:{xs:2,md:4}},children:(0,St.jsxs)($h,{sx:{p:{xs:2,md:4}},children:[(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,align:"center",sx:{fontSize:{xs:"1.5rem",md:"1.75rem"},mb:{xs:2,md:3}},children:"Create Account"}),s&&(0,St.jsx)(n_,{severity:"error",sx:{mb:2},children:s}),(0,St.jsxs)(uu,{component:"form",onSubmit:async t=>{if(t.preventDefault(),l(""),u(!0),(()=>{const e={};return n.email?/\S+@\S+\.\S+/.test(n.email)||(e.email="Email is invalid"):e.email="Email is required",n.password?n.password.length<8&&(e.password="Password must be at least 8 characters"):e.password="Password is required",n.password!==n.confirmPassword&&(e.confirmPassword="Passwords do not match"),n.firstName||(e.firstName="First name is required"),n.lastName||(e.lastName="Last name is required"),n.organization||(e.organization="Organization is required"),"data_consumer"===n.role&&(n.useCase?n.useCase.length<50&&(e.useCase="Use case description must be at least 50 characters"):e.useCase="Use case description is required"),a(e),0===Object.keys(e).length})())try{await r({email:n.email,password:n.password,firstName:n.firstName,lastName:n.lastName,organization:n.organization,role:n.role,useCase:"data_consumer"===n.role?n.useCase:void 0}),e("/login")}catch(o){l(o.message||"Registration failed. Please try again.")}finally{u(!1)}else u(!1)},children:[(0,St.jsx)(Uv,{margin:"normal",required:!0,fullWidth:!0,label:"Email Address",name:"email",autoComplete:"email",value:n.email,onChange:h,error:!!i.email,helperText:i.email,sx:{"& .MuiInputBase-input":{fontSize:{xs:"1rem",md:"1rem"}}}}),(0,St.jsx)(Uv,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",value:n.password,onChange:h,error:!!i.password,helperText:i.password,sx:{"& .MuiInputBase-input":{fontSize:{xs:"1rem",md:"1rem"}}}}),(0,St.jsx)(Uv,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",type:"password",value:n.confirmPassword,onChange:h,error:!!i.confirmPassword,helperText:i.confirmPassword,sx:{"& .MuiInputBase-input":{fontSize:{xs:"1rem",md:"1rem"}}}}),(0,St.jsx)(Uv,{margin:"normal",required:!0,fullWidth:!0,name:"firstName",label:"First Name",value:n.firstName,onChange:h,error:!!i.firstName,helperText:i.firstName,sx:{"& .MuiInputBase-input":{fontSize:{xs:"1rem",md:"1rem"}}}}),(0,St.jsx)(Uv,{margin:"normal",required:!0,fullWidth:!0,name:"lastName",label:"Last Name",value:n.lastName,onChange:h,error:!!i.lastName,helperText:i.lastName,sx:{"& .MuiInputBase-input":{fontSize:{xs:"1rem",md:"1rem"}}}}),(0,St.jsxs)(ev,{fullWidth:!0,margin:"normal",children:[(0,St.jsx)(Zy,{children:"Role"}),(0,St.jsx)(Lv,{name:"role",value:n.role,onChange:h,label:"Role",sx:{"& .MuiSelect-select":{fontSize:{xs:"1rem",md:"1rem"}}},children:[{value:"data_consumer",label:"Data Consumer"},{value:"wallet_provider",label:"Wallet Provider"},{value:"nft_manager",label:"NFT Manager"}].map((e=>(0,St.jsx)(mm,{value:e.value,children:e.label},e.value)))})]}),(0,St.jsx)(Uv,{margin:"normal",required:!0,fullWidth:!0,name:"organization",label:"Organization",value:n.organization,onChange:h,error:!!i.organization,helperText:i.organization,sx:{"& .MuiInputBase-input":{fontSize:{xs:"1rem",md:"1rem"}}}}),"data_consumer"===n.role&&(0,St.jsx)(Uv,{margin:"normal",required:!0,fullWidth:!0,name:"useCase",label:"Use Case Description",multiline:!0,rows:4,value:n.useCase,onChange:h,error:!!i.useCase,helperText:i.useCase||"Please provide a detailed description of how you plan to use our API (minimum 50 characters)",sx:{"& .MuiInputBase-input":{fontSize:{xs:"1rem",md:"1rem"}}}}),(0,St.jsx)(Ap,{type:"submit",fullWidth:!0,variant:"contained",disabled:c,sx:{mt:3,mb:2,py:{xs:1.5,md:1.5},fontSize:{xs:"1rem",md:"1rem"}},children:c?"Registering...":"Register"}),(0,St.jsx)(uu,{sx:{mt:2,textAlign:"center"},children:(0,St.jsxs)(Bu,{variant:"body2",color:"textSecondary",sx:{fontSize:{xs:"0.9rem",md:"1rem"}},children:["Already have an account?"," ",(0,St.jsx)(Ap,{component:ht,to:"/login",color:"primary",sx:{textTransform:"none",fontSize:{xs:"0.9rem",md:"1rem"}},children:"Sign in"})]})})]})]})})})},Aw=()=>{const{user:e}=wc();if(!e)return null;switch(e.role){case"data_consumer":return(0,St.jsx)(Ce,{to:"/dashboard/consumer",replace:!0});case"wallet_provider":return(0,St.jsx)(Ce,{to:"/dashboard/provider",replace:!0});case"nft_manager":return(0,St.jsx)(Ce,{to:"/dashboard/nft",replace:!0});case"admin":return(0,St.jsx)(Ce,{to:"/admin",replace:!0});default:return(0,St.jsx)(Ce,{to:"/",replace:!0})}};function jw(e){return iu("MuiTableContainer",e)}au("MuiTableContainer",["root"]);const Pw=["className","component"],Iw=Eu("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),Ow=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiTableContainer"}),{className:n,component:o="div"}=r,i=a(r,Pw),s=d(d({},r),{},{component:o}),l=(e=>{const{classes:t}=e;return du({root:["root"]},jw,t)})(s);return(0,St.jsx)(Iw,d({ref:t,as:o,className:Wc(l.root,n),ownerState:s},i))}));const Mw=t.createContext();function Rw(e){return iu("MuiTable",e)}au("MuiTable",["root","stickyHeader"]);const Lw=["className","component","padding","size","stickyHeader"],Fw=Eu("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.stickyHeader&&t.stickyHeader]}})(Au((e=>{let{theme:t}=e;return{display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":d(d({},t.typography.body2),{},{padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"}),variants:[{props:e=>{let{ownerState:t}=e;return t.stickyHeader},style:{borderCollapse:"separate"}}]}}))),zw="table",Dw=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiTable"}),{className:o,component:i=zw,padding:s="normal",size:l="medium",stickyHeader:c=!1}=n,u=a(n,Lw),h=d(d({},n),{},{component:i,padding:s,size:l,stickyHeader:c}),p=(e=>{const{classes:t,stickyHeader:r}=e;return du({root:["root",r&&"stickyHeader"]},Rw,t)})(h),f=t.useMemo((()=>({padding:s,size:l,stickyHeader:c})),[s,l,c]);return(0,St.jsx)(Mw.Provider,{value:f,children:(0,St.jsx)(Fw,d({as:i,role:i===zw?null:"table",ref:r,className:Wc(p.root,o),ownerState:h},u))})})),Nw=Dw;const Bw=t.createContext();function Uw(e){return iu("MuiTableHead",e)}au("MuiTableHead",["root"]);const Vw=["className","component"],Ww=Eu("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),qw={variant:"head"},Hw="thead",Gw=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiTableHead"}),{className:n,component:o=Hw}=r,i=a(r,Vw),s=d(d({},r),{},{component:o}),l=(e=>{const{classes:t}=e;return du({root:["root"]},Uw,t)})(s);return(0,St.jsx)(Bw.Provider,{value:qw,children:(0,St.jsx)(Ww,d({as:o,className:Wc(l.root,n),ref:t,role:o===Hw?null:"rowgroup",ownerState:s},i))})}));function Kw(e){return iu("MuiTableRow",e)}const Xw=au("MuiTableRow",["root","selected","hover","head","footer"]),Zw=["className","component","hover","selected"],Yw=Eu("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.head&&t.head,r.footer&&t.footer]}})(Au((e=>{let{theme:t}=e;return{color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,["&.".concat(Xw.hover,":hover")]:{backgroundColor:(t.vars||t).palette.action.hover},["&.".concat(Xw.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):Go(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):Go(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}}}))),Jw="tr",$w=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiTableRow"}),{className:o,component:i=Jw,hover:s=!1,selected:l=!1}=n,c=a(n,Zw),u=t.useContext(Bw),h=d(d({},n),{},{component:i,hover:s,selected:l,head:u&&"head"===u.variant,footer:u&&"footer"===u.variant}),p=(e=>{const{classes:t,selected:r,hover:n,head:o,footer:i}=e;return du({root:["root",r&&"selected",n&&"hover",o&&"head",i&&"footer"]},Kw,t)})(h);return(0,St.jsx)(Yw,d({as:i,ref:r,className:Wc(p.root,o),role:i===Jw?null:"row",ownerState:h},c))})),Qw=$w;function eS(e){return iu("MuiTableCell",e)}const tS=au("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),rS=["align","className","component","padding","scope","size","sortDirection","variant"],nS=Eu("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t["size".concat(ju(r.size))],"normal"!==r.padding&&t["padding".concat(ju(r.padding))],"inherit"!==r.align&&t["align".concat(ju(r.align))],r.stickyHeader&&t.stickyHeader]}})(Au((e=>{let{theme:t}=e;return d(d({},t.typography.body2),{},{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?"1px solid ".concat(t.vars.palette.TableCell.border):"1px solid\n    ".concat("light"===t.palette.mode?Yo(Go(t.palette.divider,1),.88):Xo(Go(t.palette.divider,1),.68)),textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(t.vars||t).palette.text.primary}},{props:{variant:"footer"},style:{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",["&.".concat(tS.paddingCheckbox)]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:e=>{let{ownerState:t}=e;return t.stickyHeader},style:{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default}}]})}))),oS=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiTableCell"}),{align:o="inherit",className:i,component:s,padding:l,scope:c,size:u,sortDirection:h,variant:p}=n,f=a(n,rS),m=t.useContext(Mw),g=t.useContext(Bw),y=g&&"head"===g.variant;let v;v=s||(y?"th":"td");let b=c;"td"===v?b=void 0:!b&&y&&(b="col");const x=p||g&&g.variant,_=d(d({},n),{},{align:o,component:v,padding:l||(m&&m.padding?m.padding:"normal"),size:u||(m&&m.size?m.size:"medium"),sortDirection:h,stickyHeader:"head"===x&&m&&m.stickyHeader,variant:x}),w=(e=>{const{classes:t,variant:r,align:n,padding:o,size:i,stickyHeader:a}=e;return du({root:["root",r,a&&"stickyHeader","inherit"!==n&&"align".concat(ju(n)),"normal"!==o&&"padding".concat(ju(o)),"size".concat(ju(i))]},eS,t)})(_);let S=null;return h&&(S="asc"===h?"ascending":"descending"),(0,St.jsx)(nS,d({as:v,ref:r,className:Wc(w.root,i),"aria-sort":S,scope:b,ownerState:_},f))})),iS=oS;function aS(e){return iu("MuiTableBody",e)}au("MuiTableBody",["root"]);const sS=["className","component"],lS=Eu("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),cS={variant:"body"},uS="tbody",dS=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiTableBody"}),{className:n,component:o=uS}=r,i=a(r,sS),s=d(d({},r),{},{component:o}),l=(e=>{const{classes:t}=e;return du({root:["root"]},aS,t)})(s);return(0,St.jsx)(Bw.Provider,{value:cS,children:(0,St.jsx)(lS,d({className:Wc(l.root,n),as:o,ref:t,role:o===uS?null:"rowgroup",ownerState:s},i))})}));function hS(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}const pS=["onChange"],fS={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};const mS=Fm((0,St.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),gS=Fm((0,St.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function yS(e){return iu("MuiTabScrollButton",e)}const vS=au("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),bS=["className","slots","slotProps","direction","orientation","disabled"],xS=Eu(Od,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.orientation&&t[r.orientation]]}})({width:40,flexShrink:0,opacity:.8,["&.".concat(vS.disabled)]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),_S=t.forwardRef((function(e,t){var r,n;const o=Ta({props:e,name:"MuiTabScrollButton"}),{className:i,slots:s={},slotProps:l={},direction:c,orientation:u,disabled:h}=o,p=a(o,bS),f=rn(),m=d({isRtl:f},o),g=(e=>{const{classes:t,orientation:r,disabled:n}=e;return du({root:["root",r,n&&"disabled"]},yS,t)})(m),y=null!==(r=s.StartScrollButtonIcon)&&void 0!==r?r:mS,v=null!==(n=s.EndScrollButtonIcon)&&void 0!==n?n:gS,b=Pp({elementType:y,externalSlotProps:l.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:m}),x=Pp({elementType:v,externalSlotProps:l.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:m});return(0,St.jsx)(xS,d(d({component:"div",className:Wc(g.root,i),ref:t,role:null,ownerState:m,tabIndex:null},p),{},{style:d(d({},p.style),"vertical"===u&&{"--TabScrollButton-svgRotate":"rotate(".concat(f?-90:90,"deg)")}),children:"left"===c?(0,St.jsx)(y,d({},b)):(0,St.jsx)(v,d({},x))}))}));function wS(e){return iu("MuiTabs",e)}const SS=au("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),kS=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],TS=["onChange"],ES=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,CS=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,AS=(e,t,r)=>{let n=!1,o=r(e,t);for(;o;){if(o===e.firstChild){if(n)return;n=!0}const t=o.disabled||"true"===o.getAttribute("aria-disabled");if(o.hasAttribute("tabindex")&&!t)return void o.focus();o=r(e,o)}},jS=Eu("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{["& .".concat(SS.scrollButtons)]:t.scrollButtons},{["& .".concat(SS.scrollButtons)]:r.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,r.vertical&&t.vertical]}})(Au((e=>{let{theme:t}=e;return{overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:e=>{let{ownerState:t}=e;return t.vertical},style:{flexDirection:"column"}},{props:e=>{let{ownerState:t}=e;return t.scrollButtonsHideMobile},style:{["& .".concat(SS.scrollButtons)]:{[t.breakpoints.down("sm")]:{display:"none"}}}}]}}))),PS=Eu("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.scroller,r.fixed&&t.fixed,r.hideScrollbar&&t.hideScrollbar,r.scrollableX&&t.scrollableX,r.scrollableY&&t.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:e=>{let{ownerState:t}=e;return t.fixed},style:{overflowX:"hidden",width:"100%"}},{props:e=>{let{ownerState:t}=e;return t.hideScrollbar},style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:e=>{let{ownerState:t}=e;return t.scrollableX},style:{overflowX:"auto",overflowY:"hidden"}},{props:e=>{let{ownerState:t}=e;return t.scrollableY},style:{overflowY:"auto",overflowX:"hidden"}}]}),IS=Eu("div",{name:"MuiTabs",slot:"List",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.list,t.flexContainer,r.vertical&&t.flexContainerVertical,r.centered&&t.centered]}})({display:"flex",variants:[{props:e=>{let{ownerState:t}=e;return t.vertical},style:{flexDirection:"column"}},{props:e=>{let{ownerState:t}=e;return t.centered},style:{justifyContent:"center"}}]}),OS=Eu("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})(Au((e=>{let{theme:t}=e;return{position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(t.vars||t).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(t.vars||t).palette.secondary.main}},{props:e=>{let{ownerState:t}=e;return t.vertical},style:{height:"100%",width:2,right:0}}]}}))),MS=Eu((function(e){const{onChange:r}=e,n=a(e,pS),o=t.useRef(),i=t.useRef(null),s=()=>{o.current=i.current.offsetHeight-i.current.clientHeight};return fh((()=>{const e=qp((()=>{const e=o.current;s(),e!==o.current&&r(o.current)})),t=Fp(i.current);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[r]),t.useEffect((()=>{s(),r(o.current)}),[r]),(0,St.jsx)("div",d(d({style:fS},n),{},{ref:i}))}))({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),RS={};const LS=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiTabs"}),o=Lc(),i=rn(),{"aria-label":s,"aria-labelledby":l,action:c,centered:u=!1,children:h,className:p,component:f="div",allowScrollButtonsMobile:m=!1,indicatorColor:g="primary",onChange:y,orientation:v="horizontal",ScrollButtonComponent:b,scrollButtons:x="auto",selectionFollowsFocus:_,slots:w={},slotProps:S={},TabIndicatorProps:k={},TabScrollButtonProps:T={},textColor:E="primary",value:C,variant:A="standard",visibleScrollbar:j=!1}=n,P=a(n,kS),I="scrollable"===A,O="vertical"===v,M=O?"scrollTop":"scrollLeft",R=O?"top":"left",L=O?"bottom":"right",F=O?"clientHeight":"clientWidth",z=O?"height":"width",D=d(d({},n),{},{component:f,allowScrollButtonsMobile:m,indicatorColor:g,orientation:v,vertical:O,scrollButtons:x,textColor:E,variant:A,visibleScrollbar:j,fixed:!I,hideScrollbar:I&&!j,scrollableX:I&&!O,scrollableY:I&&O,centered:u&&!I,scrollButtonsHideMobile:!m}),N=(e=>{const{vertical:t,fixed:r,hideScrollbar:n,scrollableX:o,scrollableY:i,centered:a,scrollButtonsHideMobile:s,classes:l}=e;return du({root:["root",t&&"vertical"],scroller:["scroller",r&&"fixed",n&&"hideScrollbar",o&&"scrollableX",i&&"scrollableY"],list:["list","flexContainer",t&&"flexContainerVertical",t&&"vertical",a&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",s&&"scrollButtonsHideMobile"],scrollableX:[o&&"scrollableX"],hideScrollbar:[n&&"hideScrollbar"]},wS,l)})(D),B=Pp({elementType:w.StartScrollButtonIcon,externalSlotProps:S.startScrollButtonIcon,ownerState:D}),U=Pp({elementType:w.EndScrollButtonIcon,externalSlotProps:S.endScrollButtonIcon,ownerState:D});const[V,W]=t.useState(!1),[q,H]=t.useState(RS),[G,K]=t.useState(!1),[X,Z]=t.useState(!1),[Y,J]=t.useState(!1),[$,Q]=t.useState({overflow:"hidden",scrollbarWidth:0}),ee=new Map,te=t.useRef(null),re=t.useRef(null),ne={slots:w,slotProps:d({indicator:k,scrollButton:T},S)},oe=()=>{const e=te.current;let t,r;if(e){const r=e.getBoundingClientRect();t={clientWidth:e.clientWidth,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop,scrollWidth:e.scrollWidth,top:r.top,bottom:r.bottom,left:r.left,right:r.right}}if(e&&!1!==C){const e=re.current.children;if(e.length>0){const t=e[ee.get(C)];0,r=t?t.getBoundingClientRect():null}}return{tabsMeta:t,tabMeta:r}},ie=Yu((()=>{const{tabsMeta:e,tabMeta:t}=oe();let r,n=0;O?(r="top",t&&e&&(n=t.top-e.top+e.scrollTop)):(r=i?"right":"left",t&&e&&(n=(i?-1:1)*(t[r]-e[r]+e.scrollLeft)));const o={[r]:n,[z]:t?t[z]:0};if("number"!==typeof q[r]||"number"!==typeof q[z])H(o);else{const e=Math.abs(q[r]-o[r]),t=Math.abs(q[z]-o[z]);(e>=1||t>=1)&&H(o)}})),ae=function(e){let{animation:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t?function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>{};const{ease:i=hS,duration:a=300}=n;let s=null;const l=t[e];let c=!1;const u=()=>{c=!0},d=n=>{if(c)return void o(new Error("Animation cancelled"));null===s&&(s=n);const u=Math.min(1,(n-s)/a);t[e]=i(u)*(r-l)+l,u>=1?requestAnimationFrame((()=>{o(null)})):requestAnimationFrame(d)};l===r?o(new Error("Element already at target position")):requestAnimationFrame(d)}(M,te.current,e,{duration:o.transitions.duration.standard}):te.current[M]=e},se=e=>{let t=te.current[M];t+=O?e:e*(i?-1:1),ae(t)},le=()=>{const e=te.current[F];let t=0;const r=Array.from(re.current.children);for(let n=0;n<r.length;n+=1){const o=r[n];if(t+o[F]>e){0===n&&(t=e);break}t+=o[F]}return t},ce=()=>{se(-1*le())},ue=()=>{se(le())},[de,he]=Ih("scrollbar",{className:Wc(N.scrollableX,N.hideScrollbar),elementType:MS,shouldForwardComponentProp:!0,externalForwardedProps:ne,ownerState:D}),{onChange:pe}=he,fe=a(he,TS),me=t.useCallback((e=>{null===pe||void 0===pe||pe(e),Q({overflow:null,scrollbarWidth:e})}),[pe]),[ge,ye]=Ih("scrollButtons",{className:Wc(N.scrollButtons,T.className),elementType:_S,externalForwardedProps:ne,ownerState:D,additionalProps:{orientation:v,slots:{StartScrollButtonIcon:w.startScrollButtonIcon||w.StartScrollButtonIcon,EndScrollButtonIcon:w.endScrollButtonIcon||w.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:B,endScrollButtonIcon:U}}}),ve=Yu((e=>{const{tabsMeta:t,tabMeta:r}=oe();if(r&&t)if(r[R]<t[R]){const n=t[M]+(r[R]-t[R]);ae(n,{animation:e})}else if(r[L]>t[L]){const n=t[M]+(r[L]-t[L]);ae(n,{animation:e})}})),be=Yu((()=>{I&&!1!==x&&J(!Y)}));t.useEffect((()=>{const e=qp((()=>{te.current&&ie()}));let t;const r=r=>{r.forEach((e=>{e.removedNodes.forEach((e=>{var r;null===(r=t)||void 0===r||r.unobserve(e)})),e.addedNodes.forEach((e=>{var r;null===(r=t)||void 0===r||r.observe(e)}))})),e(),be()},n=Fp(te.current);let o;return n.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(t=new ResizeObserver(e),Array.from(re.current.children).forEach((e=>{t.observe(e)}))),"undefined"!==typeof MutationObserver&&(o=new MutationObserver(r),o.observe(re.current,{childList:!0})),()=>{var r,i;e.clear(),n.removeEventListener("resize",e),null===(r=o)||void 0===r||r.disconnect(),null===(i=t)||void 0===i||i.disconnect()}}),[ie,be]),t.useEffect((()=>{const e=Array.from(re.current.children),t=e.length;if("undefined"!==typeof IntersectionObserver&&t>0&&I&&!1!==x){const r=e[0],n=e[t-1],o={root:te.current,threshold:.99},i=new IntersectionObserver((e=>{K(!e[0].isIntersecting)}),o);i.observe(r);const a=new IntersectionObserver((e=>{Z(!e[0].isIntersecting)}),o);return a.observe(n),()=>{i.disconnect(),a.disconnect()}}}),[I,x,Y,null===h||void 0===h?void 0:h.length]),t.useEffect((()=>{W(!0)}),[]),t.useEffect((()=>{ie()})),t.useEffect((()=>{ve(RS!==q)}),[ve,q]),t.useImperativeHandle(c,(()=>({updateIndicator:ie,updateScrollButtons:be})),[ie,be]);const[xe,_e]=Ih("indicator",{className:Wc(N.indicator,k.className),elementType:OS,externalForwardedProps:ne,ownerState:D,additionalProps:{style:q}}),we=(0,St.jsx)(xe,d({},_e));let Se=0;const ke=t.Children.map(h,(e=>{if(!t.isValidElement(e))return null;const r=void 0===e.props.value?Se:e.props.value;ee.set(r,Se);const n=r===C;return Se+=1,t.cloneElement(e,d({fullWidth:"fullWidth"===A,indicator:n&&!V&&we,selected:n,selectionFollowsFocus:_,onChange:y,textColor:E,value:r},1!==Se||!1!==C||e.props.tabIndex?{}:{tabIndex:0}))})),Te=(()=>{const e={};e.scrollbarSizeListener=I?(0,St.jsx)(de,d(d({},fe),{},{onChange:me})):null;const t=I&&("auto"===x&&(G||X)||!0===x);return e.scrollButtonStart=t?(0,St.jsx)(ge,d({direction:i?"right":"left",onClick:ce,disabled:!G},ye)):null,e.scrollButtonEnd=t?(0,St.jsx)(ge,d({direction:i?"left":"right",onClick:ue,disabled:!X},ye)):null,e})(),[Ee,Ce]=Ih("root",{ref:r,className:Wc(N.root,p),elementType:jS,externalForwardedProps:d(d(d({},ne),P),{},{component:f}),ownerState:D}),[Ae,je]=Ih("scroller",{ref:te,className:N.scroller,elementType:PS,externalForwardedProps:ne,ownerState:D,additionalProps:{style:{overflow:$.overflow,[O?"margin".concat(i?"Left":"Right"):"marginBottom"]:j?void 0:-$.scrollbarWidth}}}),[Pe,Ie]=Ih("list",{ref:re,className:Wc(N.list,N.flexContainer),elementType:IS,externalForwardedProps:ne,ownerState:D,getSlotProps:e=>d(d({},e),{},{onKeyDown:t=>{var r;(e=>{const t=re.current,r=Op(t).activeElement;if("tab"!==r.getAttribute("role"))return;let n="horizontal"===v?"ArrowLeft":"ArrowUp",o="horizontal"===v?"ArrowRight":"ArrowDown";switch("horizontal"===v&&i&&(n="ArrowRight",o="ArrowLeft"),e.key){case n:e.preventDefault(),AS(t,r,CS);break;case o:e.preventDefault(),AS(t,r,ES);break;case"Home":e.preventDefault(),AS(t,null,ES);break;case"End":e.preventDefault(),AS(t,null,CS)}})(t),null===(r=e.onKeyDown)||void 0===r||r.call(e,t)}})});return(0,St.jsxs)(Ee,d(d({},Ce),{},{children:[Te.scrollButtonStart,Te.scrollbarSizeListener,(0,St.jsxs)(Ae,d(d({},je),{},{children:[(0,St.jsx)(Pe,d(d({"aria-label":s,"aria-labelledby":l,"aria-orientation":"vertical"===v?"vertical":null,role:"tablist"},Ie),{},{children:ke})),V&&we]})),Te.scrollButtonEnd]}))})),FS=LS;function zS(e){return iu("MuiTab",e)}const DS=au("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),NS=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],BS=Eu(Od,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.label&&r.icon&&t.labelIcon,t["textColor".concat(ju(r.textColor))],r.fullWidth&&t.fullWidth,r.wrapped&&t.wrapped,{["& .".concat(DS.iconWrapper)]:t.iconWrapper},{["& .".concat(DS.icon)]:t.icon}]}})(Au((e=>{let{theme:t}=e;return d(d({},t.typography.button),{},{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:e=>{let{ownerState:t}=e;return t.label&&("top"===t.iconPosition||"bottom"===t.iconPosition)},style:{flexDirection:"column"}},{props:e=>{let{ownerState:t}=e;return t.label&&"top"!==t.iconPosition&&"bottom"!==t.iconPosition},style:{flexDirection:"row"}},{props:e=>{let{ownerState:t}=e;return t.icon&&t.label},style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:e=>{let{ownerState:t,iconPosition:r}=e;return t.icon&&t.label&&"top"===r},style:{["& > .".concat(DS.icon)]:{marginBottom:6}}},{props:e=>{let{ownerState:t,iconPosition:r}=e;return t.icon&&t.label&&"bottom"===r},style:{["& > .".concat(DS.icon)]:{marginTop:6}}},{props:e=>{let{ownerState:t,iconPosition:r}=e;return t.icon&&t.label&&"start"===r},style:{["& > .".concat(DS.icon)]:{marginRight:t.spacing(1)}}},{props:e=>{let{ownerState:t,iconPosition:r}=e;return t.icon&&t.label&&"end"===r},style:{["& > .".concat(DS.icon)]:{marginLeft:t.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,["&.".concat(DS.selected)]:{opacity:1},["&.".concat(DS.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(t.vars||t).palette.text.secondary,["&.".concat(DS.selected)]:{color:(t.vars||t).palette.primary.main},["&.".concat(DS.disabled)]:{color:(t.vars||t).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(t.vars||t).palette.text.secondary,["&.".concat(DS.selected)]:{color:(t.vars||t).palette.secondary.main},["&.".concat(DS.disabled)]:{color:(t.vars||t).palette.text.disabled}}},{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:e=>{let{ownerState:t}=e;return t.wrapped},style:{fontSize:t.typography.pxToRem(12)}}]})}))),US=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiTab"}),{className:o,disabled:i=!1,disableFocusRipple:s=!1,fullWidth:l,icon:c,iconPosition:u="top",indicator:h,label:p,onChange:f,onClick:m,onFocus:g,selected:y,selectionFollowsFocus:v,textColor:b="inherit",value:x,wrapped:_=!1}=n,w=a(n,NS),S=d(d({},n),{},{disabled:i,disableFocusRipple:s,selected:y,icon:!!c,iconPosition:u,label:!!p,fullWidth:l,textColor:b,wrapped:_}),k=(e=>{const{classes:t,textColor:r,fullWidth:n,wrapped:o,icon:i,label:a,selected:s,disabled:l}=e;return du({root:["root",i&&a&&"labelIcon","textColor".concat(ju(r)),n&&"fullWidth",o&&"wrapped",s&&"selected",l&&"disabled"],icon:["iconWrapper","icon"]},zS,t)})(S),T=c&&p&&t.isValidElement(c)?t.cloneElement(c,{className:Wc(k.icon,c.props.className)}):c;return(0,St.jsxs)(BS,d(d({focusRipple:!s,className:Wc(k.root,o),ref:r,role:"tab","aria-selected":y,disabled:i,onClick:e=>{!y&&f&&f(e,x),m&&m(e)},onFocus:e=>{v&&!y&&f&&f(e,x),g&&g(e)},ownerState:S,tabIndex:y?0:-1},w),{},{children:["top"===u||"start"===u?(0,St.jsxs)(t.Fragment,{children:[T,p]}):(0,St.jsxs)(t.Fragment,{children:[p,T]}),h]}))}));function VS(e){return iu("MuiDialogActions",e)}au("MuiDialogActions",["root","spacing"]);const WS=["className","disableSpacing"],qS=Eu("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:e=>{let{ownerState:t}=e;return!t.disableSpacing},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),HS=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiDialogActions"}),{className:n,disableSpacing:o=!1}=r,i=a(r,WS),s=d(d({},r),{},{disableSpacing:o}),l=(e=>{const{classes:t,disableSpacing:r}=e;return du({root:["root",!r&&"spacing"]},VS,t)})(s);return(0,St.jsx)(qS,d({className:Wc(l.root,n),ownerState:s,ref:t},i))})),GS={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function KS(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const XS={date:KS({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:KS({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:KS({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ZS={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function YS(e){return(t,r)=>{let n;if("formatting"===(null!==r&&void 0!==r&&r.context?String(r.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,o=null!==r&&void 0!==r&&r.width?String(r.width):t;n=e.formattingValues[o]||e.formattingValues[t]}else{const t=e.defaultWidth,o=null!==r&&void 0!==r&&r.width?String(r.width):e.defaultWidth;n=e.values[o]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function JS(e){return function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=r.width,o=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(o);if(!i)return null;const a=i[0],s=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(s)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r;return}(s,(e=>e.test(a))):function(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r;return}(s,(e=>e.test(a)));let c;c=e.valueCallback?e.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;return{value:c,rest:t.slice(a.length)}}}var $S;const QS={code:"en-US",formatDistance:(e,t,r)=>{let n;const o=GS[e];return n="string"===typeof o?o:1===t?o.one:o.other.replace("{{count}}",t.toString()),null!==r&&void 0!==r&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n},formatLong:XS,formatRelative:(e,t,r,n)=>ZS[e],localize:{ordinalNumber:(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:YS({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:YS({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:YS({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:YS({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:YS({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:($S={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e.match($S.matchPattern);if(!r)return null;const n=r[0],o=e.match($S.parsePattern);if(!o)return null;let i=$S.valueCallback?$S.valueCallback(o[0]):o[0];return i=t.valueCallback?t.valueCallback(i):i,{value:i,rest:e.slice(n.length)}}),era:JS({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:JS({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:JS({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:JS({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:JS({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let ek={};function tk(){return ek}Math.pow(10,8);const rk=6048e5,nk=Symbol.for("constructDateFrom");function ok(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&nk in e?e[nk](t):e instanceof Date?new e.constructor(t):new Date(t)}function ik(e,t){return ok(t||e,e)}function ak(e){const t=ik(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function sk(e,t){const r=ik(e,null===t||void 0===t?void 0:t.in);return r.setHours(0,0,0,0),r}function lk(e,t,r){const[n,o]=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const o=ok.bind(null,e||r.find((e=>"object"===typeof e)));return r.map(o)}(null===r||void 0===r?void 0:r.in,e,t),i=sk(n),a=sk(o),s=+i-ak(i),l=+a-ak(a);return Math.round((s-l)/864e5)}function ck(e,t){const r=ik(e,null===t||void 0===t?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function uk(e,t){const r=ik(e,null===t||void 0===t?void 0:t.in);return lk(r,ck(r))+1}function dk(e,t){var r,n,o,i,a,s;const l=tk(),c=null!==(r=null!==(n=null!==(o=null!==(i=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==i?i:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==o?o:l.weekStartsOn)&&void 0!==n?n:null===(s=l.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==r?r:0,u=ik(e,null===t||void 0===t?void 0:t.in),d=u.getDay(),h=(d<c?7:0)+d-c;return u.setDate(u.getDate()-h),u.setHours(0,0,0,0),u}function hk(e,t){return dk(e,d(d({},t),{},{weekStartsOn:1}))}function pk(e,t){const r=ik(e,null===t||void 0===t?void 0:t.in),n=r.getFullYear(),o=ok(r,0);o.setFullYear(n+1,0,4),o.setHours(0,0,0,0);const i=hk(o),a=ok(r,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const s=hk(a);return r.getTime()>=i.getTime()?n+1:r.getTime()>=s.getTime()?n:n-1}function fk(e,t){const r=pk(e,t),n=ok((null===t||void 0===t?void 0:t.in)||e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),hk(n)}function mk(e,t){const r=ik(e,null===t||void 0===t?void 0:t.in),n=+hk(r)-+fk(r);return Math.round(n/rk)+1}function gk(e,t){var r,n,o,i,a,s;const l=ik(e,null===t||void 0===t?void 0:t.in),c=l.getFullYear(),u=tk(),d=null!==(r=null!==(n=null!==(o=null!==(i=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==o?o:u.firstWeekContainsDate)&&void 0!==n?n:null===(s=u.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==r?r:1,h=ok((null===t||void 0===t?void 0:t.in)||e,0);h.setFullYear(c+1,0,d),h.setHours(0,0,0,0);const p=dk(h,t),f=ok((null===t||void 0===t?void 0:t.in)||e,0);f.setFullYear(c,0,d),f.setHours(0,0,0,0);const m=dk(f,t);return+l>=+p?c+1:+l>=+m?c:c-1}function yk(e,t){var r,n,o,i,a,s;const l=tk(),c=null!==(r=null!==(n=null!==(o=null!==(i=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==o?o:l.firstWeekContainsDate)&&void 0!==n?n:null===(s=l.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==r?r:1,u=gk(e,t),d=ok((null===t||void 0===t?void 0:t.in)||e,0);d.setFullYear(u,0,c),d.setHours(0,0,0,0);return dk(d,t)}function vk(e,t){const r=ik(e,null===t||void 0===t?void 0:t.in),n=+dk(r,t)-+yk(r,t);return Math.round(n/rk)+1}function bk(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const xk={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return bk("yy"===t?n%100:n,t.length)},M(e,t){const r=e.getMonth();return"M"===t?String(r+1):bk(r+1,2)},d:(e,t)=>bk(e.getDate(),t.length),a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>bk(e.getHours()%12||12,t.length),H:(e,t)=>bk(e.getHours(),t.length),m:(e,t)=>bk(e.getMinutes(),t.length),s:(e,t)=>bk(e.getSeconds(),t.length),S(e,t){const r=t.length,n=e.getMilliseconds();return bk(Math.trunc(n*Math.pow(10,r-3)),t.length)}},_k="midnight",wk="noon",Sk="morning",kk="afternoon",Tk="evening",Ek="night",Ck={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){const t=e.getFullYear(),n=t>0?t:1-t;return r.ordinalNumber(n,{unit:"year"})}return xk.y(e,t)},Y:function(e,t,r,n){const o=gk(e,n),i=o>0?o:1-o;if("YY"===t){return bk(i%100,2)}return"Yo"===t?r.ordinalNumber(i,{unit:"year"}):bk(i,t.length)},R:function(e,t){return bk(pk(e),t.length)},u:function(e,t){return bk(e.getFullYear(),t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return bk(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return bk(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return xk.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return bk(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const o=vk(e,n);return"wo"===t?r.ordinalNumber(o,{unit:"week"}):bk(o,t.length)},I:function(e,t,r){const n=mk(e);return"Io"===t?r.ordinalNumber(n,{unit:"week"}):bk(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):xk.d(e,t)},D:function(e,t,r){const n=uk(e);return"Do"===t?r.ordinalNumber(n,{unit:"dayOfYear"}):bk(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const o=e.getDay(),i=(o-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return bk(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(o,{width:"short",context:"formatting"});default:return r.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const o=e.getDay(),i=(o-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return bk(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(o,{width:"narrow",context:"standalone"});case"cccccc":return r.day(o,{width:"short",context:"standalone"});default:return r.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),o=0===n?7:n;switch(t){case"i":return String(o);case"ii":return bk(o,t.length);case"io":return r.ordinalNumber(o,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let o;switch(o=12===n?wk:0===n?_k:n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(o,{width:"narrow",context:"formatting"});default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let o;switch(o=n>=17?Tk:n>=12?kk:n>=4?Sk:Ek,t){case"B":case"BB":case"BBB":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(o,{width:"narrow",context:"formatting"});default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return xk.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):xk.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):bk(n,t.length)},k:function(e,t,r){let n=e.getHours();return 0===n&&(n=24),"ko"===t?r.ordinalNumber(n,{unit:"hour"}):bk(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):xk.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):xk.s(e,t)},S:function(e,t){return xk.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return jk(n);case"XXXX":case"XX":return Pk(n);default:return Pk(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return jk(n);case"xxxx":case"xx":return Pk(n);default:return Pk(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ak(n,":");default:return"GMT"+Pk(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ak(n,":");default:return"GMT"+Pk(n,":")}},t:function(e,t,r){return bk(Math.trunc(+e/1e3),t.length)},T:function(e,t,r){return bk(+e,t.length)}};function Ak(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=e>0?"-":"+",n=Math.abs(e),o=Math.trunc(n/60),i=n%60;return 0===i?r+String(o):r+String(o)+t+bk(i,2)}function jk(e,t){if(e%60===0){return(e>0?"-":"+")+bk(Math.abs(e)/60,2)}return Pk(e,t)}function Pk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=e>0?"-":"+",n=Math.abs(e);return r+bk(Math.trunc(n/60),2)+t+bk(n%60,2)}const Ik=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Ok=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Mk={p:Ok,P:(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],o=r[2];if(!o)return Ik(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"})}return i.replace("{{date}}",Ik(n,t)).replace("{{time}}",Ok(o,t))}},Rk=/^D+$/,Lk=/^Y+$/,Fk=["D","DD","YY","YYYY"];function zk(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function Dk(e){return!(!zk(e)&&"number"!==typeof e||isNaN(+ik(e)))}const Nk=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Bk=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Uk=/^'([^]*?)'?$/,Vk=/''/g,Wk=/[a-zA-Z]/;function qk(e,t,r){var n,o,i,a,s,l,c,u,d,h,p,f,m,g;const y=tk(),v=null!==(n=null!==(o=null===r||void 0===r?void 0:r.locale)&&void 0!==o?o:y.locale)&&void 0!==n?n:QS,b=null!==(i=null!==(a=null!==(s=null!==(l=null===r||void 0===r?void 0:r.firstWeekContainsDate)&&void 0!==l?l:null===r||void 0===r||null===(c=r.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==s?s:y.firstWeekContainsDate)&&void 0!==a?a:null===(u=y.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==i?i:1,x=null!==(d=null!==(h=null!==(p=null!==(f=null===r||void 0===r?void 0:r.weekStartsOn)&&void 0!==f?f:null===r||void 0===r||null===(m=r.locale)||void 0===m||null===(m=m.options)||void 0===m?void 0:m.weekStartsOn)&&void 0!==p?p:y.weekStartsOn)&&void 0!==h?h:null===(g=y.locale)||void 0===g||null===(g=g.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==d?d:0,_=ik(e,null===r||void 0===r?void 0:r.in);if(!Dk(_))throw new RangeError("Invalid time value");let w=t.match(Bk).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,Mk[t])(e,v.formatLong)}return e})).join("").match(Nk).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Hk(e)};if(Ck[t])return{isToken:!0,value:e};if(t.match(Wk))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));v.localize.preprocessor&&(w=v.localize.preprocessor(_,w));const S={firstWeekContainsDate:b,weekStartsOn:x,locale:v};return w.map((n=>{if(!n.isToken)return n.value;const o=n.value;(null!==r&&void 0!==r&&r.useAdditionalWeekYearTokens||!function(e){return Lk.test(e)}(o))&&(null!==r&&void 0!==r&&r.useAdditionalDayOfYearTokens||!function(e){return Rk.test(e)}(o))||function(e,t,r){const n=function(e,t,r){const n="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(n," to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,r);if(console.warn(n),Fk.includes(e))throw new RangeError(n)}(o,t,String(e));return(0,Ck[o[0]])(_,o,v.localize,S)})).join("")}function Hk(e){const t=e.match(Uk);return t?t[1].replace(Vk,"'"):e}const Gk={setToken(e){localStorage.setItem("token",e),Zk.defaults.headers.common.Authorization="Bearer ".concat(e)},getToken:()=>localStorage.getItem("token"),setUser(e){localStorage.setItem("user",JSON.stringify(e))},getUser(){const e=localStorage.getItem("user");return e?JSON.parse(e):null},clearSession(){localStorage.removeItem("token"),localStorage.removeItem("user"),delete Zk.defaults.headers.common.Authorization},isAuthenticated(){return!!this.getToken()},getRole(){const e=this.getUser();return e?e.role:null},isTokenExpired(){const e=this.getToken();if(!e)return!0;try{return JSON.parse(atob(e.split(".")[1])).exp<Math.floor(Date.now()/1e3)}catch(t){return!0}},getTokenExpiryTime(){const e=this.getToken();if(!e)return 0;try{return JSON.parse(atob(e.split(".")[1])).exp}catch(t){return 0}}},Kk=Gk,Xk=mc.create({baseURL:window.location.hostname.includes("azurewebsites.net")?"".concat(window.location.protocol,"//").concat(window.location.hostname,"/api"):{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1Ijoic2VyZ2UzNjl4MzMiLCJhIjoiY20zZHh6M2h2MDVoZzJqcTdudXhidm5kdyJ9.31fpP6C_HjNaTEN3C0fDTg"}.REACT_APP_API_URL||"http://localhost:4000/api"});Xk.interceptors.request.use((e=>{var t;const r=localStorage.getItem("token");return r&&(e.headers.Authorization="Bearer ".concat(r)),e.metadata={startTime:Date.now()},console.log("\ud83d\ude80 API Request (utils):",{method:null===(t=e.method)||void 0===t?void 0:t.toUpperCase(),url:e.url,baseURL:e.baseURL,fullURL:"".concat(e.baseURL).concat(e.url),headers:e.headers,data:e.data,params:e.params,timestamp:(new Date).toISOString()}),e})),Xk.interceptors.response.use((e=>{var t,r,n,o,i,a,s,l,c;return e.config.metadata.endTime=Date.now(),console.log("\u2705 API Response (utils):",{method:null===(t=e.config)||void 0===t||null===(r=t.method)||void 0===r?void 0:r.toUpperCase(),url:null===(n=e.config)||void 0===n?void 0:n.url,fullURL:"".concat(null===(o=e.config)||void 0===o?void 0:o.baseURL).concat(null===(i=e.config)||void 0===i?void 0:i.url),status:e.status,statusText:e.statusText,headers:e.headers,data:e.data,responseTime:(null===(a=e.config)||void 0===a||null===(s=a.metadata)||void 0===s?void 0:s.endTime)-(null===(l=e.config)||void 0===l||null===(c=l.metadata)||void 0===c?void 0:c.startTime),timestamp:(new Date).toISOString()}),e}),(async e=>{var t,r,n,o,i,a,s,l,c,u,d,h,p,f,m;const g=e.config;if(null!==(t=e.config)&&void 0!==t&&t.metadata&&(e.config.metadata.endTime=Date.now()),console.log("\u274c API Error (utils):",{method:null===(r=e.config)||void 0===r||null===(n=r.method)||void 0===n?void 0:n.toUpperCase(),url:null===(o=e.config)||void 0===o?void 0:o.url,fullURL:"".concat(null===(i=e.config)||void 0===i?void 0:i.baseURL).concat(null===(a=e.config)||void 0===a?void 0:a.url),status:null===(s=e.response)||void 0===s?void 0:s.status,statusText:null===(l=e.response)||void 0===l?void 0:l.statusText,headers:null===(c=e.response)||void 0===c?void 0:c.headers,data:null===(u=e.response)||void 0===u?void 0:u.data,message:e.message,responseTime:(null===(d=e.config)||void 0===d||null===(h=d.metadata)||void 0===h?void 0:h.endTime)-(null===(p=e.config)||void 0===p||null===(f=p.metadata)||void 0===f?void 0:f.startTime),timestamp:(new Date).toISOString()}),401===(null===(m=e.response)||void 0===m?void 0:m.status)&&!g._retry){g._retry=!0;try{const e=await Xk.post("/api/auth/refresh-token");return Kk.setToken(e.data.token),Xk(g)}catch(y){return Kk.clearSession(),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login",Promise.reject(y)}}return Promise.reject(e)}));const Zk=Xk,Yk=()=>{const[e,r]=(0,t.useState)(0),[n,o]=(0,t.useState)([]),[i,a]=(0,t.useState)([]),[s,l]=(0,t.useState)([]),[c,u]=(0,t.useState)([]),[d,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(!1),[m,g]=(0,t.useState)(null);(0,t.useEffect)((()=>{y()}),[]);const y=async()=>{try{const[e,t]=await Promise.all([Zk.get("/admin/api-key-requests"),Zk.get("/admin/api-keys")]);o(e.data);const r=t.data.filter((e=>!1===e.status&&!e.rejection_reason)),n=t.data.filter((e=>!0===e.status)),i=t.data.filter((e=>!1===e.status&&e.rejection_reason));a(r),l(n),u(i)}catch(e){console.error("Error fetching data:",e)}},v=async(e,t)=>{try{let r,n;console.log("Processing request:",e,t),!0===t?(r="approved",n="API key approved by admin"):!1===t?(r="rejected",n="API key request rejected by admin"):"pending"===t?(r="pending",n="Request status reset to pending"):(r=t,n="Request status changed to ".concat(t));const o=await Zk.put("/admin/api-key-requests/".concat(e),{status:r,reason:n});console.log("Request processed successfully:",o.data),y()}catch(o){var r,n;console.error("Error processing request:",o),alert("Error processing request: "+((null===(r=o.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.error)||o.message))}},b=async(e,t)=>{try{await Zk.patch("/admin/api-keys/".concat(e),{status:t}),y()}catch(r){console.error("Error updating key status:",r)}},x=()=>{f(!1),h(""),g(null)};return(0,St.jsxs)(uu,{children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,sx:{fontWeight:500,color:"text.primary"},children:"API Key Management"}),(0,St.jsx)(uu,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:(0,St.jsxs)(FS,{value:e,onChange:(e,t)=>r(t),sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:500}},children:[(0,St.jsx)(US,{label:"Pending Requests"}),(0,St.jsx)(US,{label:"Pending API Keys"}),(0,St.jsx)(US,{label:"Active Keys"}),(0,St.jsx)(US,{label:"Rejected Keys"})]})}),0===e&&(0,St.jsx)(Ow,{component:$h,elevation:0,sx:{mb:3},children:(0,St.jsxs)(Nw,{children:[(0,St.jsx)(Gw,{children:(0,St.jsxs)(Qw,{children:[(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Organization"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Type"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Purpose"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Requested"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Actions"})]})}),(0,St.jsx)(dS,{children:n.map((e=>(0,St.jsxs)(Qw,{children:[(0,St.jsx)(iS,{children:e.organization_name}),(0,St.jsx)(iS,{children:e.request_type}),(0,St.jsx)(iS,{children:e.purpose}),(0,St.jsx)(iS,{children:qk(new Date(e.created_at),"MMM d, yyyy")}),(0,St.jsx)(iS,{children:"pending"===e.status?(0,St.jsxs)(uu,{sx:{display:"flex",gap:1},children:[(0,St.jsx)(Ap,{variant:"contained",color:"success",size:"small",onClick:()=>v(e.id,!0),sx:{textTransform:"none"},children:"Approve"}),(0,St.jsx)(Ap,{variant:"outlined",color:"error",size:"small",onClick:()=>v(e.id,!1),sx:{textTransform:"none"},children:"Reject"})]}):"rejected"===e.status?(0,St.jsxs)(uu,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,St.jsx)(yg,{label:"Rejected",color:"error",size:"small"}),(0,St.jsx)(Ap,{variant:"outlined",color:"primary",size:"small",onClick:()=>v(e.id,"pending"),sx:{textTransform:"none"},children:"Undo Reject"})]}):(0,St.jsxs)(uu,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,St.jsx)(yg,{label:"Approved",color:"success",size:"small"}),(0,St.jsx)(Ap,{variant:"outlined",color:"error",size:"small",onClick:()=>v(e.id,!1),sx:{textTransform:"none"},children:"Reject"})]})})]},e.id)))})]})}),1===e&&(0,St.jsx)(Ow,{component:$h,elevation:0,sx:{mb:3},children:(0,St.jsxs)(Nw,{children:[(0,St.jsx)(Gw,{children:(0,St.jsxs)(Qw,{children:[(0,St.jsx)(iS,{sx:{fontWeight:500},children:"API Key"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"User"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Organization"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Type"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Created"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Actions"})]})}),(0,St.jsx)(dS,{children:i.map(((e,t)=>(0,St.jsxs)(Qw,{children:[(0,St.jsxs)(iS,{sx:{fontFamily:"monospace",fontSize:"0.875rem"},children:[e.api_key.substring(0,16),"..."]}),(0,St.jsx)(iS,{children:e.email}),(0,St.jsx)(iS,{children:e.organization||e.provider_name||e.consumer_organization}),(0,St.jsx)(iS,{children:(0,St.jsx)(yg,{label:"wallet_provider"===e.role?"Wallet Provider":"Data Consumer",color:"info",size:"small"})}),(0,St.jsx)(iS,{children:qk(new Date(e.created_at),"MMM d, yyyy")}),(0,St.jsx)(iS,{children:(0,St.jsxs)(uu,{sx:{display:"flex",gap:1},children:[(0,St.jsx)(Ap,{variant:"contained",color:"success",size:"small",onClick:()=>b(e.id,!0),sx:{textTransform:"none"},children:"Approve"}),(0,St.jsx)(Ap,{variant:"outlined",color:"error",size:"small",onClick:()=>(e=>{g(e),f(!0)})(e),sx:{textTransform:"none"},children:"Reject"})]})})]},"pending-".concat(e.id,"-").concat(t))))})]})}),3===e&&(0,St.jsx)(Ow,{component:$h,elevation:0,sx:{mb:3},children:(0,St.jsxs)(Nw,{children:[(0,St.jsx)(Gw,{children:(0,St.jsxs)(Qw,{children:[(0,St.jsx)(iS,{sx:{fontWeight:500},children:"API Key"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"User"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Organization"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Type"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Rejection Reason"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Rejected At"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Actions"})]})}),(0,St.jsx)(dS,{children:c.map(((e,t)=>(0,St.jsxs)(Qw,{children:[(0,St.jsxs)(iS,{sx:{fontFamily:"monospace",fontSize:"0.875rem"},children:[e.api_key.substring(0,16),"..."]}),(0,St.jsx)(iS,{children:e.email}),(0,St.jsx)(iS,{children:e.organization||e.provider_name||e.consumer_organization}),(0,St.jsx)(iS,{children:(0,St.jsx)(yg,{label:"wallet_provider"===e.role?"Wallet Provider":"Data Consumer",color:"info",size:"small"})}),(0,St.jsx)(iS,{children:e.rejection_reason}),(0,St.jsx)(iS,{children:e.reviewed_at?qk(new Date(e.reviewed_at),"MMM d, yyyy"):"N/A"}),(0,St.jsx)(iS,{children:(0,St.jsx)(Ap,{variant:"contained",color:"success",size:"small",onClick:()=>b(e.id,!0),sx:{textTransform:"none"},children:"Approve"})})]},"rejected-".concat(e.id,"-").concat(t))))})]})}),2===e&&(0,St.jsx)(Ow,{component:$h,elevation:0,children:(0,St.jsxs)(Nw,{children:[(0,St.jsx)(Gw,{children:(0,St.jsxs)(Qw,{children:[(0,St.jsx)(iS,{sx:{fontWeight:500},children:"API Key"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"User"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Organization"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Type"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Status"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Actions"})]})}),(0,St.jsx)(dS,{children:s.map(((e,t)=>(0,St.jsxs)(Qw,{children:[(0,St.jsxs)(iS,{sx:{fontFamily:"monospace",fontSize:"0.875rem"},children:[e.api_key.substring(0,16),"..."]}),(0,St.jsx)(iS,{children:e.email}),(0,St.jsx)(iS,{children:e.organization||e.provider_name||e.consumer_organization}),(0,St.jsx)(iS,{children:(0,St.jsx)(yg,{label:"wallet_provider"===e.role?"Wallet Provider":"Data Consumer",color:"info",size:"small"})}),(0,St.jsx)(iS,{children:(0,St.jsx)(yg,{label:e.status?"Active":"Inactive",color:e.status?"success":"default",size:"small"})}),(0,St.jsx)(iS,{children:(0,St.jsx)(Ap,{variant:"outlined",size:"small",onClick:()=>b(e.id,!e.status),sx:{textTransform:"none"},children:e.status?"Deactivate":"Activate"})})]},"active-".concat(e.id,"-").concat(t))))})]})}),(0,St.jsxs)(Ng,{open:p,onClose:x,maxWidth:"sm",fullWidth:!0,children:[(0,St.jsx)(qg,{children:"Reject API Key"}),(0,St.jsxs)($v,{children:[(0,St.jsx)(Bu,{variant:"body2",sx:{mb:2},children:"Please provide a reason for rejecting this API key:"}),(0,St.jsx)(Uv,{fullWidth:!0,multiline:!0,rows:4,value:d,onChange:e=>h(e.target.value),placeholder:"Enter rejection reason...",variant:"outlined"})]}),(0,St.jsxs)(HS,{children:[(0,St.jsx)(Ap,{onClick:x,color:"primary",children:"Cancel"}),(0,St.jsx)(Ap,{onClick:async()=>{if(d.trim())try{await Zk.patch("/admin/api-keys/".concat(m.id),{status:!1,rejection_reason:d}),f(!1),h(""),g(null),y()}catch(e){console.error("Error rejecting key:",e)}else alert("Please provide a rejection reason")},color:"error",variant:"contained",children:"Reject API Key"})]})]})]})};function Jk(e){return iu("MuiSwitch",e)}const $k=au("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Qk=["className","color","edge","size","sx"],eT=Eu("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.edge&&t["edge".concat(ju(r.edge))],t["size".concat(ju(r.size))]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,["& .".concat($k.thumb)]:{width:16,height:16},["& .".concat($k.switchBase)]:{padding:4,["&.".concat($k.checked)]:{transform:"translateX(16px)"}}}}]}),tT=Eu(iw,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.switchBase,{["& .".concat($k.input)]:t.input},"default"!==r.color&&t["color".concat(ju(r.color))]]}})(Au((e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:"".concat("light"===t.palette.mode?t.palette.common.white:t.palette.grey[300]),transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),["&.".concat($k.checked)]:{transform:"translateX(20px)"},["&.".concat($k.disabled)]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:"".concat("light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600])},["&.".concat($k.checked," + .").concat($k.track)]:{opacity:.5},["&.".concat($k.disabled," + .").concat($k.track)]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:"".concat("light"===t.palette.mode?.12:.2)},["& .".concat($k.input)]:{left:"-100%",width:"300%"}}})),Au((e=>{let{theme:t}=e;return{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Go(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(Pu(["light"])).map((e=>{let[r]=e;return{props:{color:r},style:{["&.".concat($k.checked)]:{color:(t.vars||t).palette[r].main,"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[r].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Go(t.palette[r].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat($k.disabled)]:{color:t.vars?t.vars.palette.Switch["".concat(r,"DisabledColor")]:"".concat("light"===t.palette.mode?Yo(t.palette[r].main,.62):Xo(t.palette[r].main,.55))}},["&.".concat($k.checked," + .").concat($k.track)]:{backgroundColor:(t.vars||t).palette[r].main}}}}))]}}))),rT=Eu("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(Au((e=>{let{theme:t}=e;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:"".concat("light"===t.palette.mode?t.palette.common.black:t.palette.common.white),opacity:t.vars?t.vars.opacity.switchTrack:"".concat("light"===t.palette.mode?.38:.3)}}))),nT=Eu("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(Au((e=>{let{theme:t}=e;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}}))),oT=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiSwitch"}),{className:n,color:o="primary",edge:i=!1,size:s="medium",sx:l}=r,c=a(r,Qk),u=d(d({},r),{},{color:o,edge:i,size:s}),h=(e=>{const{classes:t,edge:r,size:n,color:o,checked:i,disabled:a}=e,s=du({root:["root",r&&"edge".concat(ju(r)),"size".concat(ju(n))],switchBase:["switchBase","color".concat(ju(o)),i&&"checked",a&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},Jk,t);return d(d({},t),s)})(u),p=(0,St.jsx)(nT,{className:h.thumb,ownerState:u});return(0,St.jsxs)(eT,{className:Wc(h.root,n),sx:l,ownerState:u,children:[(0,St.jsx)(tT,d(d({type:"checkbox",icon:p,checkedIcon:p,ref:t,ownerState:u},c),{},{classes:d(d({},h),{},{root:h.switchBase})})),(0,St.jsx)(rT,{className:h.track,ownerState:u})]})})),iT=oT,aT=Fm((0,St.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),sT=()=>{const[e,r]=(0,t.useState)([]),[n,o]=(0,t.useState)(null),[i,a]=(0,t.useState)(null);(0,t.useEffect)((()=>{s()}),[]);const s=async()=>{try{const e=await Zk.get("/admin/users");r(e.data)}catch(e){console.error("Error fetching users:",e)}},l=()=>{o(null),a(null)},c=e=>{const{name:t,value:r,checked:n}=e.target;a((e=>d(d({},e),{},{[t]:"status"===t?n:r})))};return(0,St.jsxs)(uu,{children:[(0,St.jsxs)(uu,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,St.jsx)(Bu,{variant:"h6",sx:{fontWeight:500,color:"text.primary"},children:"Users Management"}),(0,St.jsx)(Ap,{variant:"contained",startIcon:(0,St.jsx)(aT,{}),onClick:()=>{a({email:"",first_name:"",last_name:"",organization:"",role:"data_consumer",status:!0}),o({})},sx:{textTransform:"none"},children:"Add User"})]}),(0,St.jsx)(Ow,{component:$h,elevation:0,children:(0,St.jsxs)(Nw,{children:[(0,St.jsx)(Gw,{children:(0,St.jsxs)(Qw,{children:[(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Email"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Name"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Organization"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Role"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Status"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Actions"})]})}),(0,St.jsx)(dS,{children:e.map((e=>(0,St.jsxs)(Qw,{children:[(0,St.jsx)(iS,{children:e.email}),(0,St.jsx)(iS,{children:"".concat(e.first_name," ").concat(e.last_name)}),(0,St.jsx)(iS,{children:e.organization}),(0,St.jsx)(iS,{children:(0,St.jsx)(yg,{label:e.role.replace("_"," "),size:"small",color:"admin"===e.role?"error":"wallet_provider"===e.role?"primary":"default"})}),(0,St.jsx)(iS,{children:(0,St.jsx)(yg,{label:e.status?"Active":"Inactive",color:e.status?"success":"default",size:"small"})}),(0,St.jsx)(iS,{children:(0,St.jsx)(Ap,{variant:"outlined",size:"small",onClick:()=>(e=>{o(e),a(d(d({},e),{},{status:e.status||!1}))})(e),sx:{textTransform:"none"},children:"Manage"})})]},e.id)))})]})}),(0,St.jsxs)(Ng,{open:!!n||!!i,onClose:l,maxWidth:"sm",fullWidth:!0,children:[(0,St.jsx)(qg,{children:n&&n.id?"Manage User":"Add New User"}),(0,St.jsx)($v,{sx:{pt:2},children:i&&(0,St.jsxs)(uu,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,St.jsx)(Uv,{fullWidth:!0,label:"Email",name:"email",value:i.email||"",onChange:c,margin:"normal"}),(0,St.jsx)(Uv,{fullWidth:!0,label:"First Name",name:"first_name",value:i.first_name||"",onChange:c,margin:"normal"}),(0,St.jsx)(Uv,{fullWidth:!0,label:"Last Name",name:"last_name",value:i.last_name||"",onChange:c,margin:"normal"}),(0,St.jsx)(Uv,{fullWidth:!0,label:"Organization",name:"organization",value:i.organization||"",onChange:c,margin:"normal"}),(0,St.jsxs)(ev,{fullWidth:!0,margin:"normal",children:[(0,St.jsx)(Zy,{children:"Role"}),(0,St.jsxs)(Lv,{name:"role",value:i.role||"",label:"Role",onChange:c,children:[(0,St.jsx)(mm,{value:"admin",children:"Admin"}),(0,St.jsx)(mm,{value:"data_consumer",children:"Data Consumer"}),(0,St.jsx)(mm,{value:"wallet_provider",children:"Wallet Provider"}),(0,St.jsx)(mm,{value:"nft_manager",children:"NFT Manager"})]})]}),(0,St.jsx)(ew,{control:(0,St.jsx)(iT,{checked:i.status||!1,name:"status",onChange:c,color:"primary"}),label:"Account Active",sx:{mt:2}})]})}),(0,St.jsxs)(HS,{children:[(0,St.jsx)(Ap,{onClick:l,color:"inherit",children:"Cancel"}),(0,St.jsx)(Ap,{onClick:async()=>{try{i.id?await Zk.put("/admin/users/".concat(i.id),i):await Zk.post("/admin/users",i),s(),l()}catch(e){console.error("Error saving user:",e)}},color:"primary",variant:"contained",children:"Save Changes"})]})]})]})};function lT(e){return iu("MuiToggleButtonGroup",e)}const cT=au("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]);const uT=t.createContext({});const dT=t.createContext(void 0);function hT(e){return iu("MuiToggleButton",e)}const pT=au("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),fT=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],mT=Eu("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{["& .".concat(cT.grouped)]:t.grouped},{["& .".concat(cT.grouped)]:t["grouped".concat(ju(r.orientation))]},{["& .".concat(cT.firstButton)]:t.firstButton},{["& .".concat(cT.lastButton)]:t.lastButton},{["& .".concat(cT.middleButton)]:t.middleButton},t.root,"vertical"===r.orientation&&t.vertical,r.fullWidth&&t.fullWidth]}})(Au((e=>{let{theme:t}=e;return{display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius,variants:[{props:{orientation:"vertical"},style:{flexDirection:"column",["& .".concat(cT.grouped)]:{["&.".concat(cT.selected," + .").concat(cT.grouped,".").concat(cT.selected)]:{borderTop:0,marginTop:0}},["& .".concat(cT.firstButton,",& .").concat(cT.middleButton)]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},["& .".concat(cT.lastButton,",& .").concat(cT.middleButton)]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},["& .".concat(cT.lastButton,".").concat(pT.disabled,",& .").concat(cT.middleButton,".").concat(pT.disabled)]:{borderTop:"1px solid transparent"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"horizontal"},style:{["& .".concat(cT.grouped)]:{["&.".concat(cT.selected," + .").concat(cT.grouped,".").concat(cT.selected)]:{borderLeft:0,marginLeft:0}},["& .".concat(cT.firstButton,",& .").concat(cT.middleButton)]:{borderTopRightRadius:0,borderBottomRightRadius:0},["& .".concat(cT.lastButton,",& .").concat(cT.middleButton)]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},["& .".concat(cT.lastButton,".").concat(pT.disabled,",& .").concat(cT.middleButton,".").concat(pT.disabled)]:{borderLeft:"1px solid transparent"}}}]}}))),gT=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiToggleButtonGroup"}),{children:o,className:i,color:s="standard",disabled:l=!1,exclusive:c=!1,fullWidth:u=!1,onChange:h,orientation:p="horizontal",size:f="medium",value:m}=n,g=a(n,fT),y=d(d({},n),{},{disabled:l,fullWidth:u,orientation:p,size:f}),v=(e=>{const{classes:t,orientation:r,fullWidth:n,disabled:o}=e;return du({root:["root",r,n&&"fullWidth"],grouped:["grouped","grouped".concat(ju(r)),o&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]},lT,t)})(y),b=t.useCallback(((e,t)=>{if(!h)return;const r=m&&m.indexOf(t);let n;m&&r>=0?(n=m.slice(),n.splice(r,1)):n=m?m.concat(t):[t],h(e,n)}),[h,m]),x=t.useCallback(((e,t)=>{h&&h(e,m===t?null:t)}),[h,m]),_=t.useMemo((()=>({className:v.grouped,onChange:c?x:b,value:m,size:f,fullWidth:u,color:s,disabled:l})),[v.grouped,c,x,b,m,f,u,s,l]),w=function(e){return t.Children.toArray(e).filter((e=>t.isValidElement(e)))}(o),S=w.length,k=e=>{const t=0===e,r=e===S-1;return t&&r?"":t?v.firstButton:r?v.lastButton:v.middleButton};return(0,St.jsx)(mT,d(d({role:"group",className:Wc(v.root,i),ref:r,ownerState:y},g),{},{children:(0,St.jsx)(uT.Provider,{value:_,children:w.map(((e,t)=>(0,St.jsx)(dT.Provider,{value:k(t),children:e},t)))})}))})),yT=gT;function vT(e,t){return void 0!==t&&void 0!==e&&(Array.isArray(t)?t.includes(e):e===t)}const bT=["value"],xT=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],_T=Eu(Od,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t["size".concat(ju(r.size))]]}})(Au((e=>{let{theme:t}=e;return d(d({},t.typography.button),{},{borderRadius:(t.vars||t).shape.borderRadius,padding:11,border:"1px solid ".concat((t.vars||t).palette.divider),color:(t.vars||t).palette.action.active,["&.".concat(pT.disabled)]:{color:(t.vars||t).palette.action.disabled,border:"1px solid ".concat((t.vars||t).palette.action.disabledBackground)},"&:hover":{textDecoration:"none",backgroundColor:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Go(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[{props:{color:"standard"},style:{["&.".concat(pT.selected)]:{color:(t.vars||t).palette.text.primary,backgroundColor:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):Go(t.palette.text.primary,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):Go(t.palette.text.primary,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):Go(t.palette.text.primary,t.palette.action.selectedOpacity)}}}}},...Object.entries(t.palette).filter(Pu()).map((e=>{let[r]=e;return{props:{color:r},style:{["&.".concat(pT.selected)]:{color:(t.vars||t).palette[r].main,backgroundColor:t.vars?"rgba(".concat(t.vars.palette[r].mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):Go(t.palette[r].main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[r].mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):Go(t.palette[r].main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[r].mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):Go(t.palette[r].main,t.palette.action.selectedOpacity)}}}}}})),{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{padding:7,fontSize:t.typography.pxToRem(13)}},{props:{size:"large"},style:{padding:15,fontSize:t.typography.pxToRem(15)}}]})}))),wT=t.forwardRef((function(e,r){const n=t.useContext(uT),{value:o}=n,i=a(n,bT),s=t.useContext(dT),l=Ta({props:on(d(d({},i),{},{selected:vT(e.value,o)}),e),name:"MuiToggleButton"}),{children:c,className:u,color:h="standard",disabled:p=!1,disableFocusRipple:f=!1,fullWidth:m=!1,onChange:g,onClick:y,selected:v,size:b="medium",value:x}=l,_=a(l,xT),w=d(d({},l),{},{color:h,disabled:p,disableFocusRipple:f,fullWidth:m,size:b}),S=(e=>{const{classes:t,fullWidth:r,selected:n,disabled:o,size:i,color:a}=e;return du({root:["root",n&&"selected",o&&"disabled",r&&"fullWidth","size".concat(ju(i)),a]},hT,t)})(w),k=s||"";return(0,St.jsx)(_T,d(d({className:Wc(i.className,S.root,u,k),disabled:p,focusRipple:!f,ref:r,onClick:e=>{y&&(y(e,x),e.defaultPrevented)||g&&g(e,x)},onChange:g,value:x,ownerState:w,"aria-pressed":v},_),{},{children:c}))})),ST=wT,kT=Fm((0,St.jsx)("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5M10 5.47l4 1.4v11.66l-4-1.4zm-5 .99 3-1.01v11.7l-3 1.16zm14 11.08-3 1.01V6.86l3-1.16z"}),"MapOutlined"),TT=Fm((0,St.jsx)("path",{d:"M10 10.02h5V21h-5zM17 21h3c1.1 0 2-.9 2-2v-9h-5zm3-18H5c-1.1 0-2 .9-2 2v3h19V5c0-1.1-.9-2-2-2M3 19c0 1.1.9 2 2 2h3V10H3z"}),"TableChart"),ET=Fm((0,St.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh");function CT(e){return iu("MuiCardActions",e)}au("MuiCardActions",["root","spacing"]);const AT=["disableSpacing","className"],jT=Eu("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),PT=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiCardActions"}),{disableSpacing:n=!1,className:o}=r,i=a(r,AT),s=d(d({},r),{},{disableSpacing:n}),l=(e=>{const{classes:t,disableSpacing:r}=e;return du({root:["root",!r&&"spacing"]},CT,t)})(s);return(0,St.jsx)(jT,d({className:Wc(l.root,o),ownerState:s,ref:t},i))})),IT=Fm((0,St.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff"),OT=["children","value","index"];function MT(e){const{children:t,value:r,index:n}=e,o=a(e,OT);return(0,St.jsx)("div",d(d({role:"tabpanel",hidden:r!==n,id:"wallet-tabpanel-".concat(n),"aria-labelledby":"wallet-tab-".concat(n)},o),{},{children:r===n&&(0,St.jsx)(uu,{sx:{p:3},children:t})}))}function RT(e){return{id:"wallet-tab-".concat(e),"aria-controls":"wallet-tabpanel-".concat(e)}}const LT=e=>{let{open:r,onClose:n}=e;const{connectWallet:o,connectWalletViewOnly:i,generateWallet:a,loading:s,error:l}=Mc(),[c,u]=(0,t.useState)(0),[h,p]=(0,t.useState)(""),[f,m]=(0,t.useState)(""),[g,y]=(0,t.useState)(!1),[v,b]=(0,t.useState)(null),[x,_]=(0,t.useState)(""),w=e=>{navigator.clipboard.writeText(e)},S=()=>{p(""),m(""),b(null),_(""),n()};return(0,St.jsxs)(Ng,{open:r,onClose:S,maxWidth:"md",fullWidth:!0,children:[(0,St.jsx)(qg,{children:(0,St.jsxs)(uu,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,St.jsxs)(uu,{display:"flex",alignItems:"center",children:[(0,St.jsx)(Ag,{sx:{mr:1}}),(0,St.jsx)(Bu,{variant:"h6",children:"Connect Stellar Wallet"})]}),(0,St.jsx)(th,{onClick:S,children:(0,St.jsx)(Nm,{})})]})}),(0,St.jsxs)($v,{children:[(0,St.jsx)(uu,{sx:{borderBottom:1,borderColor:"divider"},children:(0,St.jsxs)(FS,{value:c,onChange:(e,t)=>{u(t),_("")},"aria-label":"wallet connection tabs",children:[(0,St.jsx)(US,d({label:"Import Wallet"},RT(0))),(0,St.jsx)(US,d({label:"View Only"},RT(1))),(0,St.jsx)(US,d({label:"Create New"},RT(2)))]})}),(0,St.jsxs)(MT,{value:c,index:0,children:[(0,St.jsx)(Bu,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Enter your existing Stellar secret key to import your wallet."}),(0,St.jsx)(Uv,{fullWidth:!0,label:"Secret Key",type:g?"text":"password",value:h,onChange:e=>p(e.target.value),placeholder:"S... (56 characters)",helperText:"Your secret key starts with 'S' and is used to sign transactions. Keep it secure and never share it.",InputProps:{endAdornment:(0,St.jsx)(Xv,{position:"end",children:(0,St.jsx)(th,{onClick:()=>y(!g),edge:"end",children:g?(0,St.jsx)(IT,{}):(0,St.jsx)(Qv,{})})})},sx:{mb:2}}),(0,St.jsxs)(n_,{severity:"warning",sx:{mb:2},children:[(0,St.jsx)("strong",{children:"Security Warning:"})," Never share your secret key with anyone. This application stores your key locally and never transmits it to our servers."]}),(0,St.jsx)(Ap,{variant:"contained",onClick:async()=>{if(h.trim())try{await o(h.trim()),n()}catch(e){_(e.message||"Failed to import wallet")}else _("Please enter your secret key")},disabled:s||!h.trim(),fullWidth:!0,startIcon:s?(0,St.jsx)(Xd,{size:20}):(0,St.jsx)(Ag,{}),children:s?"Connecting...":"Import Wallet"})]}),(0,St.jsxs)(MT,{value:c,index:1,children:[(0,St.jsx)(Bu,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Enter a public key to view wallet information without the ability to send transactions."}),(0,St.jsx)(Uv,{fullWidth:!0,label:"Public Key",value:f,onChange:e=>m(e.target.value),placeholder:"G... (56 characters)",helperText:"Public keys are safe to share and allow viewing wallet information.",sx:{mb:2}}),(0,St.jsxs)(n_,{severity:"info",sx:{mb:2},children:[(0,St.jsx)("strong",{children:"View Only Mode:"})," You can view wallet information and collect NFTs, but cannot send transactions without the secret key."]}),(0,St.jsx)(Ap,{variant:"contained",onClick:async()=>{if(f.trim())try{await i(f.trim()),n()}catch(e){_(e.message||"Failed to connect view-only wallet")}else _("Please enter a public key")},disabled:s||!f.trim(),fullWidth:!0,startIcon:s?(0,St.jsx)(Xd,{size:20}):(0,St.jsx)(Ag,{}),children:s?"Connecting...":"Connect View Only"})]}),(0,St.jsxs)(MT,{value:c,index:2,children:[(0,St.jsx)(Bu,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Generate a new Stellar wallet. Make sure to save your secret key securely."}),v?(0,St.jsxs)(tg,{sx:{mb:2},children:[(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"Your New Wallet"}),(0,St.jsx)(Uv,{fullWidth:!0,label:"Public Key",value:v.publicKey,InputProps:{readOnly:!0,endAdornment:(0,St.jsx)(Xv,{position:"end",children:(0,St.jsx)(th,{onClick:()=>w(v.publicKey),children:(0,St.jsx)(z_,{})})})},sx:{mb:2}}),(0,St.jsx)(Uv,{fullWidth:!0,label:"Secret Key",type:g?"text":"password",value:v.secretKey,InputProps:{readOnly:!0,endAdornment:(0,St.jsxs)(Xv,{position:"end",children:[(0,St.jsx)(th,{onClick:()=>w(v.secretKey),children:(0,St.jsx)(z_,{})}),(0,St.jsx)(th,{onClick:()=>y(!g),children:g?(0,St.jsx)(IT,{}):(0,St.jsx)(Qv,{})})]})},sx:{mb:2}}),(0,St.jsxs)(n_,{severity:"error",sx:{mb:2},children:[(0,St.jsx)("strong",{children:"IMPORTANT:"})," Save your secret key securely! You cannot recover your wallet without it."]})]}),(0,St.jsx)(PT,{children:(0,St.jsx)(Ap,{variant:"contained",onClick:async()=>{if(v)try{await o(v.secretKey),n()}catch(e){_(e.message||"Failed to use generated wallet")}},disabled:s,fullWidth:!0,startIcon:s?(0,St.jsx)(Xd,{size:20}):(0,St.jsx)(Ag,{}),children:s?"Connecting...":"Use This Wallet"})})]}):(0,St.jsx)(Ap,{variant:"contained",onClick:async()=>{try{const e=await a();e&&b(e)}catch(e){_(e.message||"Failed to generate wallet")}},disabled:s,fullWidth:!0,startIcon:s?(0,St.jsx)(Xd,{size:20}):(0,St.jsx)(aT,{}),children:s?"Generating...":"Generate New Wallet"})]}),(l||x)&&(0,St.jsx)(n_,{severity:"error",sx:{mt:2},children:l||x})]}),(0,St.jsx)(HS,{children:(0,St.jsx)(Ap,{onClick:S,children:"Cancel"})})]})},FT=Fm((0,St.jsx)("path",{d:"M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"}),"FullscreenExit"),zT="pk.eyJ1Ijoic2VyZ2UzNjl4MzMiLCJhIjoiY20zZHh6M2h2MDVoZzJqcTdudXhidm5kdyJ9.31fpP6C_HjNaTEN3C0fDTg";nb().accessToken=zT;const DT=e=>{let{locations:r=[],title:n="Interactive Map",height:o="500px",showControls:i=!0,onLocationClick:a=null,onMapReady:s=null,userLocation:l=null,onNFTDetails:c=null,zoomTarget:u=null}=e;const d=(0,t.useRef)(null),h=(0,t.useRef)(null),p=(0,t.useRef)({}),[f,m]=(0,t.useState)(!1),[g,y]=(0,t.useState)("3d"),[v,b]=(0,t.useState)(!1),[x,_]=(0,t.useState)(""),[w,S]=(0,t.useState)([]),[k,T]=(0,t.useState)(!1),[E,C]=(0,t.useState)(""),[A,j]=(0,t.useState)(!1),[P,I]=(0,t.useState)(null),O=(0,t.useRef)(null),M=(0,t.useCallback)((e=>{if(h.current)return void console.log("Map already initialized");console.log("Initializing shared map with container:",e);const t=l?[l.longitude,l.latitude]:[0,0];try{h.current=new(nb().Map)({container:e,style:"mapbox://styles/mapbox/satellite-streets-v12",center:t,zoom:1,pitch:0,bearing:0,projection:"globe",antialias:!0,optimizeForTerrain:!0,maxPitch:85,maxZoom:22,minZoom:0,maxBounds:[[-180,-85],[180,85]],renderWorldCopies:!1,interactive:!0,globe:{enableAtmosphere:!0,atmosphereColor:"#FFD700",atmosphereIntensity:.3,enableStars:!0,starIntensity:.5}}),h.current.on("load",(()=>{console.log("Shared map loaded"),m(!0);const e=new(nb().NavigationControl)({showCompass:!0,showZoom:!0,visualizePitch:!0,showFullscreen:!0});h.current.addControl(e,"top-right"),h.current.addControl(new(nb().ScaleControl)({maxWidth:100,unit:"metric"}),"bottom-right");const t=new(nb().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0});h.current.addControl(t,"top-right");const r=L();h.current.addControl(r,"top-left"),setTimeout((()=>{h.current.getContainer().querySelectorAll(".mapboxgl-ctrl-top-right").forEach((e=>{e.style.top="100px"}));h.current.getContainer().querySelectorAll(".mapboxgl-ctrl-top-left").forEach((e=>{e.style.top="100px"}))}),100),s&&s(h.current),R()})),h.current.on("click",(e=>{a&&a(e.lngLat)}))}catch(E){console.error("Error initializing map:",E),C("Failed to initialize map")}}),[l,a,s]),R=(0,t.useCallback)((()=>{if(h.current&&f&&(Object.values(p.current).forEach((e=>{e&&e.remove&&e.remove()})),p.current={},r&&0!==r.length&&(r.forEach(((e,t)=>{const r=parseFloat(e.latitude),n=parseFloat(e.longitude);if(isNaN(r)||isNaN(n))return void console.warn("Invalid coordinates for location ".concat(t,":"),e);const o=document.createElement("div");if(o.className="location-marker","nft"===e.type){const t=e.ipfs_hash&&e.server_url?"".concat(e.server_url).concat(e.ipfs_hash):e.image_url||e.full_ipfs_url;o.style.cssText="\n          width: 40px;\n          height: 40px;\n          border-radius: 8px;\n          background-image: url('".concat(t,"');\n          background-size: cover;\n          background-position: center;\n          border: 3px solid #9c27b0;\n          cursor: pointer;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 12px;\n          color: white;\n          font-weight: bold;\n          text-shadow: 1px 1px 2px rgba(0,0,0,0.8);\n        "),o.textContent="\ud83c\udfa8"}else"wallet"===e.type?(o.style.cssText="\n          width: 30px;\n          height: 30px;\n          border-radius: 50%;\n          background-color: #1976d2;\n          border: 3px solid white;\n          cursor: pointer;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 14px;\n          color: white;\n          font-weight: bold;\n        ",o.textContent="\ud83d\udcb3"):(o.style.cssText="\n          width: 30px;\n          height: 30px;\n          border-radius: 50%;\n          background-color: #1976d2;\n          border: 3px solid white;\n          cursor: pointer;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 14px;\n          color: white;\n          font-weight: bold;\n        ",o.textContent=(t+1).toString());const i=new(nb().Marker)(o).setLngLat([n,r]).addTo(h.current);if("nft"===e.type&&c){let t;o.addEventListener("click",(r=>{r.preventDefault(),r.stopPropagation(),t&&clearTimeout(t),t=setTimeout((()=>{console.log("NFT marker clicked:",e),c(e)}),200)})),o.addEventListener("dblclick",(o=>{o.preventDefault(),o.stopPropagation(),t&&(clearTimeout(t),t=null),console.log("NFT marker double-clicked, zooming in:",e),h.current&&h.current.flyTo({center:[n,r],zoom:18,duration:1e3})}))}if(e.public_key||e.description){const o=new(nb().Popup)({offset:25}).setHTML('\n            <div style="padding: 12px; min-width: 200px;">\n              <h4 style="margin: 0 0 8px 0; color: #1976d2;">Location '.concat(t+1,"</h4>\n              ").concat(e.public_key?'<p style="margin: 4px 0; font-family: monospace; font-size: 12px; color: #666;">'.concat(e.public_key.substring(0,20),"...</p>"):"","\n              ").concat(e.description?'<p style="margin: 4px 0; color: #333;">'.concat(e.description,"</p>"):"",'\n              <p style="margin: 4px 0; font-size: 11px; color: #999;">\n                Lat: ').concat(r.toFixed(4),", Lng: ").concat(n.toFixed(4),"\n              </p>\n            </div>\n          "));i.setPopup(o)}p.current["marker_".concat(t)]=i})),r.length>0))){const e=new(nb().LngLatBounds);let t=0;r.forEach((r=>{const n=parseFloat(r.latitude),o=parseFloat(r.longitude);isNaN(n)||isNaN(o)||(e.extend([o,n]),t++)})),t>0&&h.current.fitBounds(e,{padding:50})}}),[f,r,c]),L=(0,t.useCallback)((()=>{const e={onAdd:function(e){this._map=e,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl mapboxgl-ctrl-group",this._container.style.background="rgba(255, 255, 255, 0.9)",this._container.style.borderRadius="4px",this._container.style.padding="8px",this._container.style.display="flex",this._container.style.flexDirection="column",this._container.style.gap="4px";const t=document.createElement("button");t.className="mapboxgl-ctrl-icon",t.innerHTML="\ud83c\udf0d",t.title="3D Globe View",t.style.fontSize="16px",t.onclick=()=>F("3d"),this._container.appendChild(t);const r=document.createElement("button");r.className="mapboxgl-ctrl-icon",r.innerHTML="\ud83d\uddfa\ufe0f",r.title="2D Map View",t.style.fontSize="16px",r.onclick=()=>F("2d"),this._container.appendChild(r);const n=document.createElement("button");return n.className="mapboxgl-ctrl-icon",n.innerHTML="\ud83d\udef0\ufe0f",n.title="Satellite View",n.style.fontSize="16px",n.onclick=()=>F("satellite"),this._container.appendChild(n),this._container},onRemove:function(){this._container.parentNode.removeChild(this._container),this._map=void 0}};return e}),[]),F=e=>{if(y(e),h.current){switch(e){case"2d":h.current.setStyle("mapbox://styles/mapbox/streets-v12"),h.current.easeTo({pitch:0,bearing:0,duration:1e3});break;case"3d":h.current.setStyle("mapbox://styles/mapbox/satellite-streets-v12"),h.current.easeTo({pitch:60,bearing:0,duration:1e3});break;case"satellite":h.current.setStyle("mapbox://styles/mapbox/satellite-v9"),h.current.easeTo({pitch:0,bearing:0,duration:1e3})}"3d"===e&&setTimeout((()=>{if(h.current&&!h.current.getLayer("3d-buildings"))try{const e=h.current.getStyle().sources;e&&e.composite&&e.composite.tiles&&h.current.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.6}})}catch(E){console.warn("Could not add 3D buildings:",E)}}),1e3)}},z=async()=>{if(x.trim()){j(!0);try{const e=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(x),".json?access_token=").concat(zT)),t=await e.json();t.features&&t.features.length>0?(S(t.features),T(!0)):C("No results found for your search")}catch(E){console.error("Search error:",E),C("Search failed. Please try again.")}finally{j(!1)}}},D=(0,t.useCallback)((e=>{if(P)return void console.log("Fullscreen map already initialized");console.log("Initializing fullscreen map with container:",e);const t=l?[l.longitude,l.latitude]:[0,0];try{const r=new(nb().Map)({container:e,style:"mapbox://styles/mapbox/satellite-streets-v12",center:t,zoom:1,pitch:0,bearing:0,projection:"globe",antialias:!0,optimizeForTerrain:!0,maxPitch:85,maxZoom:22,minZoom:0,maxBounds:[[-180,-85],[180,85]],renderWorldCopies:!1,interactive:!0,globe:{enableAtmosphere:!0,atmosphereColor:"#FFD700",atmosphereIntensity:.3,enableStars:!0,starIntensity:.5}});r.on("load",(()=>{console.log("Fullscreen map loaded");const e=new(nb().NavigationControl)({showCompass:!0,showZoom:!0,visualizePitch:!0,showFullscreen:!0});r.addControl(e,"top-right"),r.addControl(new(nb().ScaleControl)({maxWidth:100,unit:"metric"}),"bottom-right");const t=new(nb().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0});r.addControl(t,"top-right"),r.addControl(new(nb().FullscreenControl),"top-right");const n=L();r.addControl(n,"top-left"),setTimeout((()=>{r.getContainer().querySelectorAll(".mapboxgl-ctrl-top-right").forEach((e=>{e.style.top="100px"}));r.getContainer().querySelectorAll(".mapboxgl-ctrl-top-left").forEach((e=>{e.style.top="100px"}))}),100),N(r)})),r.on("click",(e=>{a&&a(e.lngLat)})),I(r)}catch(E){console.error("Error initializing fullscreen map:",E),C("Failed to initialize fullscreen map")}}),[l,a,P]),N=(0,t.useCallback)((e=>{if(e&&r&&0!==r.length&&(Object.values(p.current).forEach((e=>{e&&e.remove&&e.remove()})),p.current={},r.forEach(((t,r)=>{const n=parseFloat(t.latitude),o=parseFloat(t.longitude);if(isNaN(n)||isNaN(o))return void console.warn("Invalid coordinates for location ".concat(r,":"),t);const i=document.createElement("div");if(i.className="location-marker","nft"===t.type){const e=t.ipfs_hash&&t.server_url?"".concat(t.server_url).concat(t.ipfs_hash):t.image_url||t.full_ipfs_url;i.style.cssText="\n          width: 40px;\n          height: 40px;\n          border-radius: 8px;\n          background-image: url('".concat(e,"');\n          background-size: cover;\n          background-position: center;\n          border: 3px solid #9c27b0;\n          cursor: pointer;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 12px;\n          color: white;\n          font-weight: bold;\n          text-shadow: 1px 1px 2px rgba(0,0,0,0.8);\n        "),i.textContent="\ud83c\udfa8"}else"wallet"===t.type?(i.style.cssText="\n          width: 30px;\n          height: 30px;\n          border-radius: 50%;\n          background-color: #1976d2;\n          border: 3px solid white;\n          cursor: pointer;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 14px;\n          color: white;\n          font-weight: bold;\n        ",i.textContent="\ud83d\udcb3"):(i.style.cssText="\n          width: 30px;\n          height: 30px;\n          border-radius: 50%;\n          background-color: #1976d2;\n          border: 3px solid white;\n          cursor: pointer;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 14px;\n          color: white;\n          font-weight: bold;\n        ",i.textContent=(r+1).toString());const a=new(nb().Marker)(i).setLngLat([o,n]).addTo(e);if("nft"===t.type&&c){let r;i.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),r&&clearTimeout(r),r=setTimeout((()=>{console.log("NFT marker clicked in fullscreen:",t),c(t)}),200)})),i.addEventListener("dblclick",(i=>{i.preventDefault(),i.stopPropagation(),r&&(clearTimeout(r),r=null),console.log("NFT marker double-clicked in fullscreen, zooming in:",t),e&&e.flyTo({center:[o,n],zoom:18,duration:1e3})}))}if(t.public_key||t.description){const e=new(nb().Popup)({offset:25}).setHTML('\n            <div style="padding: 12px; min-width: 200px;">\n              <h4 style="margin: 0 0 8px 0; color: #1976d2;">Location '.concat(r+1,"</h4>\n              ").concat(t.public_key?'<p style="margin: 4px 0; font-family: monospace; font-size: 12px; color: #666;">'.concat(t.public_key.substring(0,20),"...</p>"):"","\n              ").concat(t.description?'<p style="margin: 4px 0; color: #333;">'.concat(t.description,"</p>"):"",'\n              <p style="margin: 4px 0; font-size: 11px; color: #999;">\n                Lat: ').concat(n.toFixed(4),", Lng: ").concat(o.toFixed(4),"\n              </p>\n            </div>\n          "));a.setPopup(e)}p.current["marker_".concat(r)]=a})),r.length>0)){const t=new(nb().LngLatBounds);let n=0;r.forEach((e=>{const r=parseFloat(e.latitude),o=parseFloat(e.longitude);isNaN(r)||isNaN(o)||(t.extend([o,r]),n++)})),n>0&&e.fitBounds(t,{padding:50})}}),[r,c]),B=()=>{if(h.current&&r&&r.length>0){const e=new(nb().LngLatBounds);let t=0;r.forEach((r=>{const n=parseFloat(r.latitude),o=parseFloat(r.longitude);isNaN(n)||isNaN(o)||(e.extend([o,n]),t++)})),t>0&&h.current.fitBounds(e,{padding:50})}};return(0,t.useEffect)((()=>{d.current&&!h.current&&M(d.current)}),[M]),(0,t.useEffect)((()=>{h.current&&f&&r&&R()}),[r,f,R]),(0,t.useEffect)((()=>{u&&h.current&&f&&h.current.flyTo({center:[u.longitude,u.latitude],zoom:18,duration:1e3})}),[u,f]),(0,t.useEffect)((()=>()=>{h.current&&(h.current.remove(),h.current=null,p.current={}),P&&(P.remove(),I(null))}),[P]),(0,St.jsxs)(St.Fragment,{children:[(0,St.jsx)($h,{sx:{height:o,position:"relative",width:"100%"},children:(0,St.jsxs)(uu,{sx:{position:"relative",height:"100%"},children:[(0,St.jsxs)(uu,{sx:{position:"absolute",top:0,left:0,right:0,zIndex:1e3,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",p:2,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:1,minHeight:"80px"},children:[(0,St.jsx)(Bu,{variant:"h6",sx:{fontWeight:600},children:n}),i&&(0,St.jsxs)(uu,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,St.jsx)(Uv,{size:"small",placeholder:"Search location...",value:x,onChange:e=>_(e.target.value),onKeyPress:e=>"Enter"===e.key&&z(),InputProps:{startAdornment:(0,St.jsx)(Xv,{position:"start",children:(0,St.jsx)(tb,{})})},sx:{minWidth:200}}),(0,St.jsx)(Vx,{title:"Reset View",children:(0,St.jsx)(th,{size:"small",onClick:B,children:(0,St.jsx)(ET,{})})}),(0,St.jsx)(Vx,{title:v?"Exit Fullscreen":"Fullscreen",children:(0,St.jsx)(th,{size:"small",onClick:()=>{b(!v),v||setTimeout((()=>{O.current&&!P&&D(O.current)}),100)},children:v?(0,St.jsx)(FT,{}):(0,St.jsx)(eb,{})})})]})]}),k&&w.length>0&&(0,St.jsx)(uu,{sx:{position:"absolute",top:"80px",left:"20px",right:"20px",zIndex:1001,background:"white",borderRadius:1,boxShadow:3,maxHeight:"300px",overflow:"auto"},children:w.map(((e,t)=>(0,St.jsx)(uu,{sx:{p:2,cursor:"pointer",borderBottom:"1px solid #eee","&:hover":{bgcolor:"#f5f5f5"}},onClick:()=>(e=>{const[t,r]=e.center;_(e.place_name),T(!1),h.current&&h.current.flyTo({center:[t,r],zoom:15,pitch:"3d"===g?60:0,duration:2e3})})(e),children:(0,St.jsx)(Bu,{variant:"body2",fontWeight:"bold",children:e.place_name})},t)))}),(0,St.jsx)(uu,{ref:d,sx:{height:"100%",width:"100%",mt:i?"100px":0}}),A&&(0,St.jsx)(uu,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1002},children:(0,St.jsx)(Xd,{})}),E&&(0,St.jsx)(n_,{severity:"error",sx:{position:"absolute",top:"80px",left:"20px",right:"20px",zIndex:1002},onClose:()=>C(""),children:E}),(0,St.jsxs)(uu,{sx:{position:"absolute",bottom:0,left:0,right:0,zIndex:1e3,background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",p:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:[r?r.length:0," location",1!==(r?r.length:0)?"s":""," shown"]}),(0,St.jsx)(Bu,{variant:"body2",color:"text.secondary",children:r&&r.length>0?"Click on markers for details":"No locations available"})]})]})}),(0,St.jsxs)(Ng,{open:v,onClose:()=>b(!1),maxWidth:!1,fullWidth:!0,fullScreen:!0,sx:{zIndex:1400},PaperProps:{sx:{margin:0,maxHeight:"100vh",height:"100vh",width:"100vw",borderRadius:0}},children:[(0,St.jsx)(qg,{sx:{position:"absolute",top:0,left:0,right:0,zIndex:1e3,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderBottom:"1px solid rgba(0,0,0,0.1)"},children:(0,St.jsxs)(uu,{display:"flex",alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:[(0,St.jsxs)(Bu,{variant:"h6",sx:{fontWeight:"bold",mr:2},children:["\ud83d\uddfa\ufe0f ",n," - Fullscreen View"]}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,St.jsx)(Uv,{size:"small",placeholder:"Search location...",value:x,onChange:e=>_(e.target.value),onKeyPress:e=>"Enter"===e.key&&z(),InputProps:{startAdornment:(0,St.jsx)(Xv,{position:"start",children:(0,St.jsx)(tb,{})})},sx:{minWidth:200}}),(0,St.jsx)(Vx,{title:"Reset View",children:(0,St.jsx)(th,{size:"small",onClick:B,children:(0,St.jsx)(ET,{})})}),(0,St.jsx)(Vx,{title:"Exit Fullscreen",children:(0,St.jsx)(th,{size:"small",onClick:()=>b(!1),children:(0,St.jsx)(FT,{})})})]})]})}),(0,St.jsx)($v,{sx:{p:0,position:"relative",mt:"100px"},children:(0,St.jsx)(uu,{ref:O,sx:{height:"calc(100vh - 100px)",width:"100%"}})})]})]})},NT=()=>{var e;const{isConnected:r,disconnectWallet:n}=Mc(),[o,i]=(0,t.useState)([]),[a,s]=(0,t.useState)([]),[l,c]=(0,t.useState)({blockchain:"",walletType:"",provider:""}),[u,h]=(0,t.useState)("map"),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(!1),[y,v]=(0,t.useState)(null),[b,x]=(0,t.useState)(!1),[_,w]=(0,t.useState)(""),S=(0,t.useRef)(!1),[k,T]=(0,t.useState)(!1),E=o.filter((e=>(!l.blockchain||e.blockchain===l.blockchain)&&(!l.walletType||e.wallet_type_id===parseInt(l.walletType))&&(!l.provider||e.wallet_provider_id===parseInt(l.provider)))),C=(0,t.useCallback)((async()=>{if(S.current)console.log("fetchData already running, skipping...");else try{S.current=!0,x(!0);const e=[Zk.get("/admin/locations"),Zk.get("/nft/dashboard/nearby",{params:{latitude:0,longitude:0,radius:999999999}})],t=Zk.get("/location/types/list").catch((e=>(console.warn("Wallet types endpoint not available:",e.message),{data:[]})));e.push(t);const[r,n,o]=await Promise.all(e);i(r.data),s(o.data||[]);const a=n.data.nfts.filter((e=>{const t=parseFloat(e.latitude),r=parseFloat(e.longitude);return!isNaN(t)&&!isNaN(r)&&0!==t&&0!==r})).map((e=>{var t;return d(d({},e),{},{latitude:parseFloat(e.latitude),longitude:parseFloat(e.longitude),full_ipfs_url:e.ipfs_hash?"https://bronze-adjacent-barnacle-907.mypinata.cloud/ipfs/".concat(e.ipfs_hash):null,collection:d(d({},e.collection),{},{full_image_url:null!==(t=e.collection)&&void 0!==t&&t.image_url?"https://bronze-adjacent-barnacle-907.mypinata.cloud/ipfs/".concat(e.collection.image_url):null})})})),l=r.data.filter((e=>{const t=parseFloat(e.latitude),r=parseFloat(e.longitude);return!isNaN(t)&&!isNaN(r)&&0!==t&&0!==r})).map((e=>d(d({},e),{},{latitude:parseFloat(e.latitude),longitude:parseFloat(e.longitude)})));i([...l,...a])}catch(_){console.error("Error fetching data:",_),w("Failed to fetch wallet locations and NFTs")}finally{x(!1),S.current=!1}}),[]);(0,t.useEffect)((()=>{C()}),[]);return(0,St.jsxs)(uu,{children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,sx:{fontWeight:500,color:"text.primary"},children:"Wallet Locations"}),(0,St.jsxs)(uu,{sx:{mb:3,display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[(0,St.jsxs)(yT,{value:u,exclusive:!0,onChange:(e,t)=>t&&h(t),size:"small",children:[(0,St.jsxs)(ST,{value:"map",children:[(0,St.jsx)(kT,{sx:{mr:1}}),"Map View"]}),(0,St.jsxs)(ST,{value:"table",children:[(0,St.jsx)(TT,{sx:{mr:1}}),"Table View"]})]}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:1},children:[(0,St.jsx)(Ap,{variant:"outlined",size:"small",startIcon:(0,St.jsx)(ET,{}),onClick:C,disabled:b,children:"Refresh"}),r?(0,St.jsx)(Ap,{variant:"contained",size:"small",startIcon:(0,St.jsx)(L_,{}),onClick:n,children:"Disconnect Wallet"}):(0,St.jsx)(Ap,{variant:"outlined",size:"small",startIcon:(0,St.jsx)(L_,{}),onClick:()=>T(!0),children:"Connect Wallet"})]}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:2,ml:"auto"},children:[(0,St.jsxs)(ev,{size:"small",sx:{minWidth:120},children:[(0,St.jsx)(Zy,{children:"Blockchain"}),(0,St.jsxs)(Lv,{value:l.blockchain,onChange:e=>c(d(d({},l),{},{blockchain:e.target.value})),label:"Blockchain",children:[(0,St.jsx)(mm,{value:"",children:"All"}),(0,St.jsx)(mm,{value:"Stellar",children:"Stellar"}),(0,St.jsx)(mm,{value:"Circle",children:"Circle"})]})]}),(0,St.jsxs)(ev,{size:"small",sx:{minWidth:120},children:[(0,St.jsx)(Zy,{children:"Wallet Type"}),(0,St.jsxs)(Lv,{value:l.walletType,onChange:e=>c(d(d({},l),{},{walletType:e.target.value})),label:"Wallet Type",children:[(0,St.jsx)(mm,{value:"",children:"All"}),Array.isArray(a)&&a.map((e=>(0,St.jsx)(mm,{value:e.id,children:e.name},e.id)))]})]})]})]}),_&&(0,St.jsx)(n_,{severity:"error",sx:{mb:2},onClose:()=>w(""),children:_}),b&&(0,St.jsx)(uu,{sx:{display:"flex",justifyContent:"center",py:2},children:(0,St.jsx)(Xd,{size:24})}),"map"===u?(0,St.jsx)(uu,{sx:{position:"relative"},children:(0,St.jsx)(DT,{locations:E.map((e=>d(d({},e),{},{type:e.collection_id||e.token_id?"nft":"wallet",server_url:e.server_url,full_ipfs_url:e.ipfs_hash?"https://bronze-adjacent-barnacle-907.mypinata.cloud/ipfs/".concat(e.ipfs_hash):null,collection:e.collection}))),title:"Wallet Locations & NFTs",height:"600px",showControls:!0,onNFTDetails:e=>{f(e),g(!0)},zoomTarget:y})}):(0,St.jsx)(Ow,{component:$h,elevation:0,children:(0,St.jsxs)(Nw,{children:[(0,St.jsx)(Gw,{children:(0,St.jsxs)(Qw,{children:[(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Image"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Type"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Name/Key"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Blockchain"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Description"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Location"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Provider"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Status"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Last Updated"}),(0,St.jsx)(iS,{sx:{fontWeight:500},children:"Actions"})]})}),(0,St.jsx)(dS,{children:E.map((e=>{var t,r,n;const o=e.collection_id||e.token_id;return(0,St.jsxs)(Qw,{children:[(0,St.jsx)(iS,{children:o?(0,St.jsxs)(uu,{sx:{width:60,height:60,borderRadius:1,overflow:"hidden",border:"2px solid #4caf50",position:"relative"},children:[(0,St.jsx)("img",{src:e.full_ipfs_url||"https://via.placeholder.com/60x60/4caf50/ffffff?text=NFT",alt:"NFT",style:{width:"100%",height:"100%",objectFit:"cover"}}),(0,St.jsx)(uu,{sx:{position:"absolute",top:-2,right:-2,width:16,height:16,backgroundColor:"#ff9800",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"bold",color:"white",border:"2px solid white"},children:"N"})]}):(0,St.jsx)(uu,{sx:{width:60,height:60,borderRadius:"50%",backgroundColor:e.location_enabled?"#4caf50":"#f44336",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:"12px"},children:(null===(t=e.blockchain)||void 0===t?void 0:t.charAt(0))||"W"})}),(0,St.jsx)(iS,{children:o?(0,St.jsx)(yg,{label:"NFT",color:"primary",size:"small",icon:(0,St.jsx)("span",{children:"\ud83c\udfa8"})}):(0,St.jsx)(yg,{label:e.wallet_type||"Wallet",color:"default",size:"small"})}),(0,St.jsx)(iS,{children:o?(0,St.jsxs)(uu,{children:[(0,St.jsx)(Bu,{variant:"body2",fontWeight:"bold",children:e.name||"Unnamed NFT"}),(0,St.jsxs)(Bu,{variant:"caption",color:"text.secondary",children:["Token ID: #",e.token_id]})]}):(0,St.jsxs)(Bu,{variant:"body2",sx:{fontFamily:"monospace"},children:[null===(r=e.public_key)||void 0===r?void 0:r.substring(0,8),"..."]})}),(0,St.jsx)(iS,{children:e.blockchain}),(0,St.jsx)(iS,{children:(0,St.jsx)(Bu,{variant:"body2",sx:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis"},children:e.description||(o?null===(n=e.collection)||void 0===n?void 0:n.name:"No description")})}),(0,St.jsx)(iS,{children:(0,St.jsxs)(Bu,{variant:"body2",sx:{fontFamily:"monospace",fontSize:"12px"},children:[e.latitude.toFixed(4),", ",e.longitude.toFixed(4)]})}),(0,St.jsx)(iS,{children:e.provider_name||(o?"NFT Collection":"Unknown")}),(0,St.jsx)(iS,{children:(0,St.jsx)(yg,{label:e.location_enabled?"Active":"Disabled",color:e.location_enabled?"success":"default",size:"small"})}),(0,St.jsx)(iS,{children:(0,St.jsx)(Bu,{variant:"body2",sx:{fontSize:"12px"},children:new Date(e.last_updated||e.created_at).toLocaleString()})}),(0,St.jsx)(iS,{children:o?(0,St.jsxs)(uu,{sx:{display:"flex",gap:.5,flexDirection:"column"},children:[(0,St.jsx)(Ap,{variant:"outlined",size:"small",onClick:()=>window.open("https://stellar.expert/explorer/testnet/contract/".concat(e.smart_contract_address),"_blank"),sx:{textTransform:"none",fontSize:"10px",py:.5},children:"Contract"}),(0,St.jsx)(Ap,{variant:"outlined",size:"small",onClick:()=>window.open("https://stellar.expert/explorer/testnet/tx/".concat(e.transaction_hash),"_blank"),sx:{textTransform:"none",fontSize:"10px",py:.5},children:"Transaction"})]}):(0,St.jsx)(Ap,{variant:"outlined",size:"small",color:e.location_enabled?"error":"success",onClick:()=>(async(e,t)=>{try{await Zk.patch("/admin/locations/".concat(e),{location_enabled:!t}),C()}catch(_){console.error("Error updating location status:",_)}})(e.id,e.location_enabled),sx:{textTransform:"none"},children:e.location_enabled?"Disable":"Enable"})})]},e.id)}))})]})}),(0,St.jsx)(LT,{open:k,onClose:()=>T(!1),onSuccess:()=>{T(!1),w("")}}),(0,St.jsxs)(Ng,{open:m,onClose:()=>g(!1),maxWidth:"sm",fullWidth:!0,children:[(0,St.jsxs)(qg,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:["NFT Details",(0,St.jsx)(th,{onClick:()=>g(!1),children:(0,St.jsx)(Nm,{})})]}),(0,St.jsx)($v,{children:p&&(0,St.jsxs)(uu,{children:[(0,St.jsx)(uu,{sx:{textAlign:"center",mb:2},children:(0,St.jsx)("img",{src:p.full_ipfs_url||"https://via.placeholder.com/300x300",alt:"NFT",style:{width:"100%",maxWidth:300,borderRadius:12,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"}})}),(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:p.name||"Unnamed NFT"}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Collection: ",(null===(e=p.collection)||void 0===e?void 0:e.name)||"Unknown"]}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Location: ",p.latitude,", ",p.longitude]}),(0,St.jsx)(Ap,{variant:"outlined",size:"small",sx:{mt:1},onClick:()=>{v({latitude:parseFloat(p.latitude),longitude:parseFloat(p.longitude)}),g(!1)},children:"\ud83d\udd0d Zoom to Location"}),p.description&&(0,St.jsx)(Bu,{variant:"body2",sx:{mt:2},children:p.description})]})})]})]})},BT=()=>{var e;const[r,n]=(0,t.useState)(0),[o,i]=(0,t.useState)({total_locations:0,total_providers:0,total_users:0,api_calls_24h:0}),[a,s]=(0,t.useState)(null),[l,c]=(0,t.useState)([]),[u,d]=(0,t.useState)([]),[h,p]=(0,t.useState)(null),[,f]=(0,t.useState)(!0),[,m]=(0,t.useState)(""),[g,y]=(0,t.useState)(null),[v,b]=(0,t.useState)(!1),[x,_]=(0,t.useState)(null),[w,S]=(0,t.useState)(null),[k,T]=(0,t.useState)(!1);(0,t.useEffect)((()=>{E()}),[]);const E=async()=>{try{const t=await Zk.get("/admin/stats");i(t.data);const r=await Zk.get("/admin/geospatial/global-analytics");s(r.data);const n=await Zk.get("/admin/wallet-locations");c(n.data);const o=await Zk.get("/nft/public");d(o.data.nfts||[]);try{const e=await Zk.get("/admin/market-analysis");p(e.data)}catch(e){console.warn("Market analysis not available:",e),p(null)}}catch(t){m("Failed to load dashboard statistics")}finally{f(!1)}},C=e=>{y(e),b(!0)},A=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;S({data:e,title:t,loading:!0}),T(!0);try{let n="";if(t.includes("Wallet Providers")?n="/admin/wallet-providers-details":t.includes("Total Users")?n="/admin/users-details":t.includes("API Calls")?n="/admin/api-calls-details":t.includes("Total Locations")&&(n="/admin/locations-details"),n){const e=await Zk.get("".concat(n,"?page=").concat(r,"&limit=10"));S({data:e.data.data,pagination:e.data.pagination,title:t,loading:!1})}else S({data:e,title:t,loading:!1})}catch(n){console.error("Error fetching detailed data:",n),S({data:e,title:t,loading:!1,error:"Failed to load detailed data"})}};return(0,St.jsxs)(dp,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,St.jsx)(Bu,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:500,color:"primary.main"},children:"Admin Dashboard"}),(0,St.jsxs)(Jm,{container:!0,spacing:3,sx:{mb:4},children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>A(o,"Total Locations Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",children:"Total Locations"}),(0,St.jsx)(Bu,{variant:"h4",children:o.total_locations})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>A(o,"Wallet Providers Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",children:"Wallet Providers"}),(0,St.jsx)(Bu,{variant:"h4",children:o.total_providers})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>A(o,"Total Users Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",children:"Total Users"}),(0,St.jsx)(Bu,{variant:"h4",children:o.total_users})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>A(o,"API Calls Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",children:"API Calls (24h)"}),(0,St.jsx)(Bu,{variant:"h4",children:o.api_calls_24h})]})})})]}),(0,St.jsxs)($h,{sx:{width:"100%",mb:2},children:[(0,St.jsx)(uu,{sx:{borderBottom:1,borderColor:"divider"},children:(0,St.jsxs)(FS,{value:r,onChange:(e,t)=>n(t),sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:500,fontSize:"1rem"}},children:[(0,St.jsx)(US,{label:"Users"}),(0,St.jsx)(US,{label:"API Keys"}),(0,St.jsx)(US,{label:"Wallet Locations"}),(0,St.jsx)(US,{label:"\ud83d\uddfa\ufe0f Geospatial Analytics"})]})}),(0,St.jsxs)(uu,{sx:{p:3},children:[0===r&&(0,St.jsx)(sT,{}),1===r&&(0,St.jsx)(Yk,{}),2===r&&(0,St.jsx)(NT,{}),3===r&&(()=>{var e,t,r,n,o,i,s,c,d;return a?(0,St.jsxs)(uu,{children:[(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,children:"\ud83d\uddfa\ufe0f Global Geospatial Analytics"}),(0,St.jsxs)(Jm,{container:!0,spacing:3,sx:{mb:4},children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",color:"primary",children:"Total Locations"}),(0,St.jsx)(Bu,{variant:"h4",children:(null===(e=a.global_statistics)||void 0===e?void 0:e.total_locations)||0})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",color:"secondary",children:"Active Providers"}),(0,St.jsx)(Bu,{variant:"h4",children:(null===(t=a.global_statistics)||void 0===t?void 0:t.active_providers)||0})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",color:"success.main",children:"Coverage Area"}),(0,St.jsx)(Bu,{variant:"h4",children:null!==(r=a.global_statistics)&&void 0!==r&&r.global_coverage_area?"".concat((a.global_statistics.global_coverage_area/1e6).toFixed(2)," km\xb2"):"N/A"})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",color:"info.main",children:"Avg Distance"}),(0,St.jsx)(Bu,{variant:"h4",children:null!==(n=a.global_statistics)&&void 0!==n&&n.avg_distance_from_center?"".concat((a.global_statistics.avg_distance_from_center/1e3).toFixed(1)," km"):"N/A"})]})})})]}),(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,sx:{mt:4,mb:2},children:"\ud83d\udcca Market Analysis"}),h?(0,St.jsx)(St.Fragment,{children:(0,St.jsxs)(Jm,{container:!0,spacing:3,sx:{mb:4},children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{bgcolor:"primary.light",color:"primary.contrastText",cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>A(h.nft_market_overview,"Total NFTs Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",children:"Total NFTs"}),(0,St.jsx)(Bu,{variant:"h4",children:(null===(o=h.nft_market_overview)||void 0===o?void 0:o.total_nfts)||0})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{bgcolor:"primary.light",color:"primary.contrastText",cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>A(h.nft_market_overview,"Collections Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",children:"Collections"}),(0,St.jsx)(Bu,{variant:"h4",children:(null===(i=h.nft_market_overview)||void 0===i?void 0:i.total_collections)||0})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{bgcolor:"primary.light",color:"primary.contrastText",cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>A(h.nft_market_overview,"NFT Managers Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",children:"NFT Managers"}),(0,St.jsx)(Bu,{variant:"h4",children:(null===(s=h.nft_market_overview)||void 0===s?void 0:s.unique_nft_managers)||0})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{bgcolor:"primary.light",color:"primary.contrastText",cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>A(h.nft_market_overview,"Active NFTs Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",children:"Active NFTs"}),(0,St.jsx)(Bu,{variant:"h4",children:(null===(c=h.nft_market_overview)||void 0===c?void 0:c.active_nfts)||0})]})})})]})}):(0,St.jsx)(tg,{sx:{mb:4},children:(0,St.jsx)(ig,{children:(0,St.jsx)(Bu,{variant:"body1",color:"textSecondary",align:"center",children:"Market analysis data is not available at the moment. This feature requires location and NFT data to be available in the system."})})}),(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,sx:{mt:3},children:"Global Location Map"}),(0,St.jsx)(DT,{locations:[...l.filter((e=>e.latitude&&e.longitude&&!isNaN(parseFloat(e.latitude))&&!isNaN(parseFloat(e.longitude)))).map((e=>({latitude:parseFloat(e.latitude),longitude:parseFloat(e.longitude),public_key:e.public_key,description:"Provider: ".concat(e.provider_name," | Type: ").concat(e.wallet_type," | Status: ").concat(e.tracking_status),type:"wallet"}))),...u.filter((e=>e.latitude&&e.longitude&&!isNaN(parseFloat(e.latitude))&&!isNaN(parseFloat(e.longitude)))).map((e=>{var t;return{latitude:parseFloat(e.latitude),longitude:parseFloat(e.longitude),id:e.id,name:e.name||"NFT",description:"NFT: ".concat(e.name||"Unnamed"," | Collection: ").concat((null===(t=e.collection)||void 0===t?void 0:t.name)||"Unknown"),type:"nft",image_url:e.image_url,ipfs_hash:e.ipfs_hash,server_url:e.server_url,full_ipfs_url:e.ipfs_hash?"https://bronze-adjacent-barnacle-907.mypinata.cloud/ipfs/".concat(e.ipfs_hash):null,collection:e.collection}}))],title:"Global Wallet Locations & NFTs",height:"700px",showControls:!0,onNFTDetails:C,zoomTarget:x}),(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,sx:{mt:3},children:"Provider Performance Comparison"}),(0,St.jsx)(Ow,{component:$h,children:(0,St.jsxs)(Nw,{children:[(0,St.jsx)(Gw,{children:(0,St.jsxs)(Qw,{children:[(0,St.jsx)(iS,{children:"Provider"}),(0,St.jsx)(iS,{children:"Locations"}),(0,St.jsx)(iS,{children:"Coverage Area"}),(0,St.jsx)(iS,{children:"Recent Activity"}),(0,St.jsx)(iS,{children:"Status"})]})}),(0,St.jsx)(dS,{children:null===(d=a.provider_comparison)||void 0===d?void 0:d.slice(0,10).map(((e,t)=>{var r;return(0,St.jsxs)(Qw,{children:[(0,St.jsx)(iS,{children:(0,St.jsxs)(Bu,{variant:"body2",fontFamily:"monospace",children:[null===(r=e.provider_public_key)||void 0===r?void 0:r.substring(0,15),"..."]})}),(0,St.jsx)(iS,{children:e.location_count}),(0,St.jsx)(iS,{children:e.coverage_area?"".concat((e.coverage_area/1e6).toFixed(2)," km\xb2"):"N/A"}),(0,St.jsx)(iS,{children:e.recent_activity}),(0,St.jsx)(iS,{children:(0,St.jsx)(yg,{label:e.recent_activity>0?"Active":"Inactive",color:e.recent_activity>0?"success":"default",size:"small"})})]},t)}))})]})})]}):(0,St.jsx)(Bu,{children:"Loading geospatial analytics..."})})()]})]}),(0,St.jsxs)(Ng,{open:v,onClose:()=>b(!1),maxWidth:"md",fullWidth:!0,children:[(0,St.jsxs)(qg,{children:["NFT Details",(0,St.jsx)(th,{"aria-label":"close",onClick:()=>b(!1),sx:{position:"absolute",right:8,top:8},children:(0,St.jsx)(Nm,{})})]}),(0,St.jsx)($v,{children:g&&(0,St.jsx)(uu,{children:(0,St.jsxs)(Jm,{container:!0,spacing:3,children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:g.full_ipfs_url&&(0,St.jsx)("img",{src:g.full_ipfs_url,alt:g.name||"NFT",style:{width:"100%",height:"auto",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"}})}),(0,St.jsxs)(Jm,{item:!0,xs:12,md:6,children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:g.name||"Unnamed NFT"}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Collection: ",(null===(e=g.collection)||void 0===e?void 0:e.name)||"Unknown"]}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Location: ",g.latitude,", ",g.longitude]}),(0,St.jsx)(Ap,{variant:"outlined",size:"small",sx:{mt:1},onClick:()=>{_({latitude:parseFloat(g.latitude),longitude:parseFloat(g.longitude)}),b(!1)},children:"\ud83d\udd0d Zoom to Location"}),g.description&&(0,St.jsx)(Bu,{variant:"body2",sx:{mt:2},children:g.description})]})]})})})]}),(0,St.jsxs)(Ng,{open:k,onClose:()=>T(!1),maxWidth:"md",fullWidth:!0,children:[(0,St.jsxs)(qg,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(null===w||void 0===w?void 0:w.title)||"Analytics Details",(0,St.jsx)(th,{onClick:()=>T(!1),children:(0,St.jsx)(Nm,{})})]}),(0,St.jsx)($v,{children:w&&(0,St.jsxs)(uu,{children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:w.title}),(0,St.jsx)(uu,{sx:{mt:2},children:w.loading?(0,St.jsx)(uu,{sx:{display:"flex",justifyContent:"center",p:3},children:(0,St.jsx)(Bu,{children:"Loading detailed data..."})}):w.error?(0,St.jsx)(Bu,{color:"error",children:w.error}):w.data&&Array.isArray(w.data)?(0,St.jsxs)(uu,{children:[(0,St.jsx)(Ow,{component:$h,sx:{maxHeight:400},children:(0,St.jsxs)(Nw,{stickyHeader:!0,children:[(0,St.jsx)(Gw,{children:(0,St.jsx)(Qw,{children:w.data.length>0&&Object.keys(w.data[0]).map((e=>(0,St.jsx)(iS,{children:e.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))},e)))})}),(0,St.jsx)(dS,{children:w.data.map(((e,t)=>(0,St.jsx)(Qw,{children:Object.values(e).map(((e,t)=>(0,St.jsx)(iS,{children:"boolean"===typeof e?e?"Yes":"No":"number"===typeof e?e.toLocaleString():e?String(e):"-"},t)))},t)))})]})}),w.pagination&&(0,St.jsxs)(uu,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2},children:[(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:["Showing ",(w.pagination.page-1)*w.pagination.limit+1," to ",Math.min(w.pagination.page*w.pagination.limit,w.pagination.total)," of ",w.pagination.total," entries"]}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:1},children:[(0,St.jsx)(Ap,{size:"small",disabled:w.pagination.page<=1,onClick:()=>A({},w.title,w.pagination.page-1),children:"Previous"}),(0,St.jsx)(Ap,{size:"small",disabled:w.pagination.page>=w.pagination.pages,onClick:()=>A({},w.title,w.pagination.page+1),children:"Next"})]})]})]}):(0,St.jsx)(Jm,{container:!0,spacing:2,children:Object.entries(w.data).map((e=>{let[t,r]=e;return(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,md:4,children:(0,St.jsxs)(tg,{sx:{p:2,height:"100%"},children:[(0,St.jsx)(Bu,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:t.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))}),(0,St.jsx)(Bu,{variant:"h6",color:"primary",children:"number"===typeof r?r.toLocaleString():r})]})},t)}))})})]})})]})]})},UT=()=>{const[e,r]=(0,t.useState)([]),[n,o]=(0,t.useState)(!0),[i,a]=(0,t.useState)("");(0,t.useEffect)((()=>{s()}),[]);const s=async()=>{try{const e=await Zk.get("/user/api-keys");r(e.data)}catch(e){a("Failed to fetch API keys")}finally{o(!1)}};return n?(0,St.jsx)(Xd,{}):(0,St.jsxs)(dp,{maxWidth:"lg",sx:{mt:4},children:[(0,St.jsx)(Bu,{variant:"h4",gutterBottom:!0,children:"API Key Management"}),i&&(0,St.jsx)(n_,{severity:"error",sx:{mb:2},children:i}),(0,St.jsx)(tg,{children:(0,St.jsx)(ig,{children:(0,St.jsx)(Ow,{children:(0,St.jsxs)(Nw,{children:[(0,St.jsx)(Gw,{children:(0,St.jsxs)(Qw,{children:[(0,St.jsx)(iS,{children:"API Key"}),(0,St.jsx)(iS,{children:"Created"}),(0,St.jsx)(iS,{children:"Status"}),(0,St.jsx)(iS,{children:"Last Used"}),(0,St.jsx)(iS,{children:"Actions"})]})}),(0,St.jsx)(dS,{children:e.map((e=>(0,St.jsxs)(Qw,{children:[(0,St.jsx)(iS,{children:(0,St.jsx)(Bu,{sx:{fontFamily:"monospace",fontSize:"0.875rem"},children:e.api_key})}),(0,St.jsx)(iS,{children:qk(new Date(e.created_at),"PPP")}),(0,St.jsx)(iS,{children:(0,St.jsx)(yg,{label:e.status?"Active":"Inactive",color:e.status?"success":"error",size:"small"})}),(0,St.jsx)(iS,{children:e.last_used_at?qk(new Date(e.last_used_at),"PPP"):"Never"}),(0,St.jsx)(iS,{children:(0,St.jsx)(Ap,{variant:"outlined",color:"error",size:"small",onClick:()=>(async e=>{try{await Zk.delete("/user/api-keys/".concat(e)),s()}catch(t){a("Failed to revoke API key")}})(e.id),children:"Revoke"})})]},e.id)))})]})})})})]})},VT=Fm((0,St.jsx)("path",{d:"M21 10h-8.35C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H13l2 2 2-2 2 2 4-4.04zM7 15c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3"}),"Key"),WT=Fm((0,St.jsx)("path",{d:"M13 2.05v3.03c3.39.49 6 3.39 6 6.92 0 .9-.18 1.75-.48 2.54l2.6 1.53c.56-1.24.88-2.62.88-4.07 0-5.18-3.95-9.45-9-9.95M12 19c-3.87 0-7-3.13-7-7 0-3.53 2.61-6.43 6-6.92V2.05c-5.06.5-9 4.76-9 9.95 0 5.52 4.47 10 9.99 10 3.31 0 6.24-1.61 8.06-4.09l-2.6-1.53C16.17 17.98 14.21 19 12 19"}),"DataUsage"),qT=e=>{let{open:r,onClose:n,onSuccess:o}=e;const{user:i}=wc(),[a,s]=(0,t.useState)({purpose:"",organization_name:""}),[l,c]=(0,t.useState)(""),[u,h]=(0,t.useState)(!1);(0,t.useEffect)((()=>{r&&i&&s((e=>d(d({},e),{},{organization_name:i.organization||""})))}),[r,i]);const p=()=>{s({purpose:"",organization_name:""}),c(""),n()};return(0,St.jsxs)(Ng,{open:r,onClose:p,maxWidth:"sm",fullWidth:!0,children:[(0,St.jsx)(qg,{children:"Request API Key"}),(0,St.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h(!0),c("");try{await Zk.post("/user/api-key-request",{purpose:a.purpose,organization_name:a.organization_name||(null===i||void 0===i?void 0:i.organization)}),null===o||void 0===o||o(),n(),s({purpose:"",organization_name:""})}catch(l){var t,r;c((null===(t=l.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.error)||"Failed to submit API key request")}finally{h(!1)}},children:[(0,St.jsxs)($v,{children:[l&&(0,St.jsx)(n_,{severity:"error",sx:{mb:2},children:l}),(0,St.jsx)(Uv,{fullWidth:!0,label:"Purpose",multiline:!0,rows:4,value:a.purpose,onChange:e=>s(d(d({},a),{},{purpose:e.target.value})),margin:"normal",required:!0,helperText:"Please describe how you plan to use the API"}),(0,St.jsx)(Uv,{fullWidth:!0,label:"Organization Name",value:a.organization_name||(null===i||void 0===i?void 0:i.organization)||"",onChange:e=>s(d(d({},a),{},{organization_name:e.target.value})),margin:"normal",required:!0,disabled:!(null===i||void 0===i||!i.organization),helperText:null!==i&&void 0!==i&&i.organization?"Organization name from your profile":""})]}),(0,St.jsxs)(HS,{children:[(0,St.jsx)(Ap,{onClick:p,children:"Cancel"}),(0,St.jsx)(Ap,{type:"submit",variant:"contained",color:"primary",disabled:u||!a.purpose,children:"Submit Request"})]})]})]})},HT=()=>{var e,r,n,o;const[i,a]=(0,t.useState)(null),[s,l]=(0,t.useState)(null),[,c]=(0,t.useState)([]),[u,d]=(0,t.useState)(null),[h,p]=(0,t.useState)([]),[f,m]=(0,t.useState)([]),[g,y]=(0,t.useState)(!0),[v,b]=(0,t.useState)(""),[x,_]=(0,t.useState)(""),[w,S]=(0,t.useState)(!1),[k,T]=(0,t.useState)(null),[E,C]=(0,t.useState)(!1),[A,j]=(0,t.useState)(null),[P,I]=(0,t.useState)(null),[O,M]=(0,t.useState)(!1);(0,t.useEffect)((()=>{R()}),[]);const R=async()=>{try{y(!0),b("");const[t,r,n,o,i]=await Promise.all([Zk.get("/user/api-keys"),Zk.get("/user/api-usage"),Zk.get("/user/api-key-requests"),Zk.get("/location/dashboard/wallet-locations"),Zk.get("/nft/public")]);a(t.data[0]||null),l(r.data),c(n.data),p(o.data),m(i.data.nfts||[]);try{const e=await Zk.get("/data-consumer/market-analysis");d(e.data)}catch(e){console.warn("Market analysis not available:",e),d(null)}}catch(t){console.error("Failed to load dashboard data:",t),b("Failed to load dashboard data")}finally{y(!1)}},L=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;I({data:e,title:t,loading:!0}),M(!0);try{let n="";if(t.includes("Total Wallets")||t.includes("Unique Wallets")?n="/data-consumer/wallet-locations-details":t.includes("Active Providers")?n="/data-consumer/wallet-providers-details":t.includes("Total Locations")&&(n="/data-consumer/locations-details"),n){const e=await Zk.get("".concat(n,"?page=").concat(r,"&limit=10"));I({data:e.data.data,pagination:e.data.pagination,title:t,loading:!1})}else I({data:e,title:t,loading:!1})}catch(v){console.error("Error fetching detailed data:",v),I({data:e,title:t,loading:!1,error:"Failed to load detailed data"})}};return g?(0,St.jsx)(uu,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:(0,St.jsx)(Xd,{})}):(0,St.jsxs)(dp,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,St.jsxs)(uu,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,St.jsx)(Bu,{variant:"h4",children:"Data Consumer Dashboard"}),(0,St.jsxs)(uu,{children:[!i&&(0,St.jsx)(Ap,{variant:"contained",color:"primary",onClick:()=>S(!0),startIcon:(0,St.jsx)(VT,{}),children:"Request API Key"}),i&&(0,St.jsxs)(St.Fragment,{children:[(0,St.jsx)(Ap,{variant:"contained",color:"primary",onClick:()=>S(!0),startIcon:(0,St.jsx)(VT,{}),sx:{mr:2},children:"Request Additional Key"}),(0,St.jsx)(Ap,{variant:"outlined",component:ht,to:"/api-keys/manage",startIcon:(0,St.jsx)(WT,{}),children:"Manage API Keys"})]})]})]}),v&&(0,St.jsx)(n_,{severity:"error",sx:{mb:2},children:v}),x&&(0,St.jsx)(n_,{severity:"success",sx:{mb:2},children:x}),(0,St.jsxs)(Jm,{container:!0,spacing:3,children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsx)(tg,{children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"API Key Status"}),i?(0,St.jsxs)(uu,{children:[(0,St.jsx)(Bu,{variant:"body1",gutterBottom:!0,children:"Active API Key:"}),(0,St.jsxs)(uu,{display:"flex",alignItems:"center",gap:1,children:[(0,St.jsx)(Bu,{variant:"body2",sx:{fontFamily:"monospace",bgcolor:"grey.100",p:1,borderRadius:1},children:i.api_key}),(0,St.jsx)(Vx,{title:"Copy API Key",children:(0,St.jsx)(th,{onClick:async()=>{try{await navigator.clipboard.writeText(i.api_key),_("API key copied to clipboard"),setTimeout((()=>_("")),3e3)}catch(e){b("Failed to copy API key")}},size:"small",children:(0,St.jsx)(z_,{})})})]})]}):(0,St.jsx)(Bu,{color:"textSecondary",children:"No active API key. Request one to get started."})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsx)(tg,{children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"API Usage Statistics"}),s?(0,St.jsxs)(uu,{children:[(0,St.jsxs)(Bu,{children:["Requests this month: ",s.monthly_requests]}),(0,St.jsxs)(Bu,{children:["Daily average: ",s.daily_average]})]}):(0,St.jsx)(Bu,{color:"textSecondary",children:"No usage data available"})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,sx:{mt:3,mb:2},children:"\ud83d\udcca Market Analysis"})}),u?(0,St.jsxs)(St.Fragment,{children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>L(u.global_statistics,"Total Wallets Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",color:"primary",children:"Total Wallets"}),(0,St.jsx)(Bu,{variant:"h4",children:(null===(e=u.global_statistics)||void 0===e?void 0:e.unique_wallets)||0})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>L(u.global_statistics,"Active Providers Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",color:"secondary",children:"Active Providers"}),(0,St.jsx)(Bu,{variant:"h4",children:(null===(r=u.global_statistics)||void 0===r?void 0:r.active_providers)||0})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>L(u.global_statistics,"Total Locations Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",color:"success.main",children:"Total Locations"}),(0,St.jsx)(Bu,{variant:"h4",children:(null===(n=u.global_statistics)||void 0===n?void 0:n.total_locations)||0})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>L(u,"Analysis Period Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",color:"info.main",children:"Analysis Period"}),(0,St.jsxs)(Bu,{variant:"h4",children:[u.analysis_period_days||30," days"]})]})})}),u.nft_market_data&&(0,St.jsxs)(St.Fragment,{children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{bgcolor:"primary.light",color:"primary.contrastText",cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>L(u.nft_market_data,"Total NFTs Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",children:"Total NFTs"}),(0,St.jsx)(Bu,{variant:"h4",children:u.nft_market_data.total_nfts||0})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{bgcolor:"primary.light",color:"primary.contrastText",cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>L(u.nft_market_data,"Collections Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",children:"Collections"}),(0,St.jsx)(Bu,{variant:"h4",children:u.nft_market_data.total_collections||0})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{bgcolor:"primary.light",color:"primary.contrastText",cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>L(u.nft_market_data,"NFT Managers Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",children:"NFT Managers"}),(0,St.jsx)(Bu,{variant:"h4",children:u.nft_market_data.unique_nft_managers||0})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{bgcolor:"primary.light",color:"primary.contrastText",cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>L(u.nft_market_data,"Active NFTs Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",children:"Active NFTs"}),(0,St.jsx)(Bu,{variant:"h4",children:u.nft_market_data.active_nfts||0})]})})})]})]}):(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(tg,{children:(0,St.jsx)(ig,{children:(0,St.jsx)(Bu,{variant:"body1",color:"textSecondary",align:"center",children:"Market analysis data is not available at the moment. This feature requires location data to be available in the system."})})})}),(0,St.jsxs)(Jm,{item:!0,xs:12,children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,sx:{mt:3},children:"\ud83d\udccd Market Overview Map"}),(0,St.jsx)(DT,{locations:[...h.filter((e=>e.latitude&&e.longitude&&!isNaN(parseFloat(e.latitude))&&!isNaN(parseFloat(e.longitude)))).map((e=>({latitude:parseFloat(e.latitude),longitude:parseFloat(e.longitude),public_key:e.public_key,description:"Provider: ".concat(e.provider_name," | Type: ").concat(e.wallet_type," | Status: ").concat(e.tracking_status),type:"wallet"}))),...f.filter((e=>e.latitude&&e.longitude&&!isNaN(parseFloat(e.latitude))&&!isNaN(parseFloat(e.longitude)))).map((e=>{var t;return{latitude:parseFloat(e.latitude),longitude:parseFloat(e.longitude),id:e.id,name:e.name||"NFT",description:"NFT: ".concat(e.name||"Unnamed"," | Collection: ").concat((null===(t=e.collection)||void 0===t?void 0:t.name)||"Unknown"),type:"nft",image_url:e.image_url,ipfs_hash:e.ipfs_hash,server_url:e.server_url,full_ipfs_url:e.ipfs_hash?"https://bronze-adjacent-barnacle-907.mypinata.cloud/ipfs/".concat(e.ipfs_hash):null,collection:e.collection}}))],title:"Market Overview - Wallets & NFTs",height:"600px",showControls:!0,onNFTDetails:e=>{T(e),C(!0)},zoomTarget:A})]})]}),(0,St.jsx)(qT,{open:w,onClose:()=>S(!1),onSuccess:R}),(0,St.jsxs)(Ng,{open:E,onClose:()=>C(!1),maxWidth:"md",fullWidth:!0,children:[(0,St.jsxs)(qg,{children:["NFT Details",(0,St.jsx)(th,{"aria-label":"close",onClick:()=>C(!1),sx:{position:"absolute",right:8,top:8},children:(0,St.jsx)(Nm,{})})]}),(0,St.jsx)($v,{children:k&&(0,St.jsx)(uu,{children:(0,St.jsxs)(Jm,{container:!0,spacing:3,children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:k.full_ipfs_url&&(0,St.jsx)("img",{src:k.full_ipfs_url,alt:k.name||"NFT",style:{width:"100%",height:"auto",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"}})}),(0,St.jsxs)(Jm,{item:!0,xs:12,md:6,children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:k.name||"Unnamed NFT"}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Collection: ",(null===(o=k.collection)||void 0===o?void 0:o.name)||"Unknown"]}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Location: ",k.latitude,", ",k.longitude]}),(0,St.jsx)(Ap,{variant:"outlined",size:"small",sx:{mt:1},onClick:()=>{j({latitude:parseFloat(k.latitude),longitude:parseFloat(k.longitude)}),C(!1)},children:"\ud83d\udd0d Zoom to Location"}),k.description&&(0,St.jsx)(Bu,{variant:"body2",sx:{mt:2},children:k.description})]})]})})})]}),(0,St.jsxs)(Ng,{open:O,onClose:()=>M(!1),maxWidth:"lg",fullWidth:!0,fullScreen:window.innerWidth<900,sx:{"& .MuiDialog-paper":{margin:window.innerWidth<900?0:"32px",maxHeight:window.innerWidth<900?"100vh":"90vh",width:window.innerWidth<900?"100vw":"auto"}},children:[(0,St.jsxs)(qg,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(null===P||void 0===P?void 0:P.title)||"Analytics Details",(0,St.jsx)(th,{onClick:()=>M(!1),children:(0,St.jsx)(Nm,{})})]}),(0,St.jsx)($v,{children:P&&(0,St.jsx)(uu,{children:P.loading?(0,St.jsx)(uu,{sx:{display:"flex",justifyContent:"center",p:3},children:(0,St.jsx)(Xd,{})}):P.error?(0,St.jsx)(n_,{severity:"error",sx:{mt:2},children:P.error}):P.pagination?(0,St.jsxs)(uu,{sx:{mt:2},children:[(0,St.jsx)(uu,{sx:{display:{xs:"block",md:"none"}},children:P.data.map(((e,t)=>(0,St.jsx)(tg,{sx:{mb:2,p:2},children:Object.entries(e).map((e=>{let[t,r]=e;return(0,St.jsxs)(uu,{sx:{mb:1,display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",sx:{fontWeight:"bold",minWidth:"40%"},children:[t.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase())),":"]}),(0,St.jsx)(Bu,{variant:"body2",sx:{textAlign:"right",wordBreak:"break-word",maxWidth:"60%"},children:"boolean"===typeof r?r?"Yes":"No":"number"===typeof r?r.toLocaleString():r?String(r):"-"})]},t)}))},t)))}),(0,St.jsx)(uu,{sx:{display:{xs:"none",md:"block"}},children:(0,St.jsx)(Ow,{component:$h,sx:{maxHeight:500,overflow:"auto","& .MuiTable-root":{minWidth:800}},children:(0,St.jsxs)(Nw,{stickyHeader:!0,size:"small",children:[(0,St.jsx)(Gw,{children:(0,St.jsx)(Qw,{children:P.data.length>0&&Object.keys(P.data[0]).map((e=>(0,St.jsx)(iS,{sx:{fontWeight:"bold",backgroundColor:"primary.main",color:"primary.contrastText",minWidth:100,fontSize:"0.875rem",padding:"8px 12px"},children:e.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))},e)))})}),(0,St.jsx)(dS,{children:P.data.map(((e,t)=>(0,St.jsx)(Qw,{hover:!0,children:Object.values(e).map(((e,t)=>(0,St.jsx)(iS,{sx:{wordBreak:"break-word",maxWidth:150,overflow:"hidden",textOverflow:"ellipsis",fontSize:"0.875rem",padding:"8px 12px"},title:"string"===typeof e&&e.length>20?String(e):void 0,children:"boolean"===typeof e?e?"Yes":"No":"number"===typeof e?e.toLocaleString():e?String(e):"-"},t)))},t)))})]})})}),P.pagination&&(0,St.jsxs)(uu,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"center",mt:2,gap:2,p:{xs:1,sm:0}},children:[(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",sx:{textAlign:{xs:"center",sm:"left"},fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:["Page ",P.pagination.page," of ",P.pagination.pages,"(",P.pagination.total," total items)"]}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:1,width:{xs:"100%",sm:"auto"},justifyContent:{xs:"center",sm:"flex-end"}},children:[(0,St.jsx)(Ap,{disabled:P.pagination.page<=1,onClick:()=>L(P.data,P.title,P.pagination.page-1),size:"small",variant:"outlined",sx:{minWidth:{xs:"80px",sm:"auto"},fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:"Previous"}),(0,St.jsx)(Ap,{disabled:P.pagination.page>=P.pagination.pages,onClick:()=>L(P.data,P.title,P.pagination.page+1),size:"small",variant:"outlined",sx:{minWidth:{xs:"80px",sm:"auto"},fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:"Next"})]})]})]}):(0,St.jsx)(uu,{sx:{mt:2},children:(0,St.jsx)(Jm,{container:!0,spacing:2,children:Object.entries(P.data).map((e=>{let[t,r]=e;return(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,md:4,children:(0,St.jsxs)(tg,{sx:{p:2,height:"100%"},children:[(0,St.jsx)(Bu,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:t.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))}),(0,St.jsx)(Bu,{variant:"h6",color:"primary",children:"number"===typeof r?r.toLocaleString():"object"===typeof r&&null!==r?Array.isArray(r)?"".concat(r.length," items"):"Object":String(r||"-")})]})},t)}))})})})})]})]})},GT=Fm((0,St.jsx)("path",{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2m-11-4 2.03 2.71L16 11l4 5H8zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6z"}),"Collections"),KT=Fm((0,St.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 16H8v-2h8zm0-4H8v-2h8zm-3-5V3.5L18.5 9z"}),"Description"),XT=Fm((0,St.jsx)("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6z"}),"Code"),ZT=()=>{var e,r,n,o,i;const[a,s]=(0,t.useState)([]),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)([]),[h,p]=(0,t.useState)([]),[f,m]=(0,t.useState)([]),[,g]=(0,t.useState)([]),[,y]=(0,t.useState)(!0),[v,b]=(0,t.useState)(""),[x,_]=(0,t.useState)(""),[w,S]=(0,t.useState)(!1),[k,T]=(0,t.useState)(null),[E,C]=(0,t.useState)(null),[A,j]=(0,t.useState)(!1),[P,I]=(0,t.useState)(null),[O,M]=(0,t.useState)(null),[R,L]=(0,t.useState)(!1),[F,z]=(0,t.useState)({public_key:"",blockchain:"Stellar",wallet_type_id:"",description:"",latitude:"",longitude:"",location_enabled:!0});(0,t.useEffect)((()=>{D()}),[]);const D=async()=>{try{const[t,r,n,o,i,a]=await Promise.all([Zk.get("/user/wallets"),Zk.get("/user/api-keys"),Zk.get("/user/api-usage"),Zk.get("/user/api-key-requests"),Zk.get("/location/dashboard/wallet-locations"),Zk.get("/nft/public")]);s(t.data),c(r.data[0]||null),d(n.data),g(o.data),p(i.data),m(a.data.nfts||[]);try{const e=await Zk.get("/wallet-provider/market-analysis");T(e.data)}catch(e){console.warn("Market analysis not available:",e),T(null)}}catch(t){b("Failed to load dashboard data")}finally{y(!1)}},N=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;M({data:e,title:t,loading:!0}),L(!0);try{let n,o="";t.includes("Your Locations")?o="/wallet-provider/locations-details":t.includes("Unique Wallets")?o="/wallet-provider/wallet-locations-details":t.includes("Recent Activity")?o="/wallet-provider/api-calls-details":t.includes("Analysis Period")?o="/wallet-provider/locations-details":t.includes("Total NFTs")?o="/wallet-provider/nft-details":t.includes("Collections")?o="/wallet-provider/collections-details":t.includes("NFT Managers")?o="/wallet-provider/nft-managers-details":t.includes("Active NFTs")&&(o="/wallet-provider/active-nfts-details"),o?(n=await Zk.get(o,{params:{page:r,limit:10}}),console.log("\ud83d\udd0d Analytics API Response:",{endpoint:o,response:n.data,hasData:n.data.data,hasPagination:n.data.pagination}),M({title:t,data:n.data.data||n.data,pagination:n.data.pagination,page:r,loading:!1})):M({title:t,data:e,page:r,loading:!1})}catch(v){console.error("Error fetching detailed data:",v),M({data:e,title:t,loading:!1,error:"Failed to load detailed data"})}};return(0,St.jsxs)(dp,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,St.jsxs)(uu,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,St.jsx)(Bu,{variant:"h4",children:"Wallet Provider Dashboard"}),(0,St.jsxs)(uu,{children:[!l&&(0,St.jsx)(Ap,{variant:"contained",color:"primary",onClick:()=>S(!0),startIcon:(0,St.jsx)(VT,{}),children:"Request API Key"}),l&&(0,St.jsxs)(St.Fragment,{children:[(0,St.jsx)(Ap,{variant:"contained",color:"primary",onClick:()=>S(!0),startIcon:(0,St.jsx)(VT,{}),sx:{mr:2},children:"Request Additional Key"}),(0,St.jsx)(Ap,{variant:"outlined",component:ht,to:"/api-keys/manage",startIcon:(0,St.jsx)(WT,{}),children:"Manage API Keys"})]})]})]}),v&&(0,St.jsx)(n_,{severity:"error",sx:{mb:2},children:v}),x&&(0,St.jsx)(n_,{severity:"success",sx:{mb:2},children:x}),(0,St.jsxs)(Jm,{container:!0,spacing:3,children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsx)(tg,{children:(0,St.jsxs)(ig,{children:[(0,St.jsxs)(uu,{display:"flex",alignItems:"center",mb:2,children:[(0,St.jsx)(VT,{sx:{mr:1}}),(0,St.jsx)(Bu,{variant:"h6",children:"API Key Management"})]}),l?(0,St.jsxs)(St.Fragment,{children:[(0,St.jsx)(Bu,{variant:"subtitle2",color:"textSecondary",gutterBottom:!0,children:"Your API Key:"}),(0,St.jsxs)(uu,{sx:{bgcolor:"grey.100",p:2,borderRadius:1,display:"flex",alignItems:"center",mb:2},children:[(0,St.jsx)(Bu,{sx:{fontFamily:"monospace",flexGrow:1,overflow:"hidden",textOverflow:"ellipsis"},children:l.api_key}),(0,St.jsx)(Vx,{title:"Copy to clipboard",children:(0,St.jsx)(th,{onClick:async()=>{try{await navigator.clipboard.writeText(l.api_key),_("API key copied to clipboard"),setTimeout((()=>_("")),3e3)}catch(e){b("Failed to copy API key")}},size:"small",children:(0,St.jsx)(z_,{})})})]}),(0,St.jsx)(yg,{label:l.status?"Active":"Inactive",color:l.status?"success":"error",size:"small"})]}):(0,St.jsxs)(uu,{children:[(0,St.jsx)(Bu,{color:"textSecondary",paragraph:!0,children:"You don't have an active API key."}),(0,St.jsx)(Ap,{variant:"contained",onClick:()=>S(!0),children:"Request API Key"})]})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsx)(tg,{children:(0,St.jsxs)(ig,{children:[(0,St.jsxs)(uu,{display:"flex",alignItems:"center",mb:2,children:[(0,St.jsx)(WT,{sx:{mr:1}}),(0,St.jsx)(Bu,{variant:"h6",children:l?"API Usage Statistics":"Getting Started"})]}),l?u&&(0,St.jsxs)(uu,{children:[(0,St.jsxs)(Bu,{variant:"body1",gutterBottom:!0,children:[(0,St.jsx)("strong",{children:"Monthly Requests:"})," ",u.monthly_requests||0]}),(0,St.jsxs)(Bu,{variant:"body1",gutterBottom:!0,children:[(0,St.jsx)("strong",{children:"Daily Average:"})," ",u.daily_average||0]}),(0,St.jsxs)(Bu,{variant:"body1",gutterBottom:!0,children:[(0,St.jsx)("strong",{children:"Last Request:"})," ",u.last_request_at?qk(new Date(u.last_request_at),"MMM d, h:mm a"):"Never"]})]}):(0,St.jsxs)(uu,{children:[(0,St.jsx)(Bu,{variant:"body1",gutterBottom:!0,children:"Welcome to GeoLink! As a wallet provider, you can:"}),(0,St.jsxs)(uu,{component:"ul",sx:{pl:2,mt:1},children:[(0,St.jsx)(Bu,{component:"li",variant:"body2",gutterBottom:!0,children:"Submit wallet locations to our network"}),(0,St.jsx)(Bu,{component:"li",variant:"body2",gutterBottom:!0,children:"Track user privacy and visibility settings"}),(0,St.jsx)(Bu,{component:"li",variant:"body2",gutterBottom:!0,children:"Access real-time geolocation data"})]}),(0,St.jsx)(Ap,{variant:"contained",color:"primary",onClick:()=>S(!0),sx:{mt:2},children:"Get Started - Request API Key"})]})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,sx:{mt:3,mb:2},children:"\ud83d\udcca Market Analysis"})}),k?(0,St.jsxs)(St.Fragment,{children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>N(k.provider_statistics,"Your Locations Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",color:"primary",children:"Your Locations"}),(0,St.jsx)(Bu,{variant:"h4",children:(null===(e=k.provider_statistics)||void 0===e?void 0:e.total_locations)||0})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>N(k.provider_statistics,"Unique Wallets Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",color:"secondary",children:"Unique Wallets"}),(0,St.jsx)(Bu,{variant:"h4",children:(null===(r=k.provider_statistics)||void 0===r?void 0:r.unique_wallets)||0})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>N(k.provider_statistics,"Recent Activity Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",color:"success.main",children:"Recent Activity"}),(0,St.jsx)(Bu,{variant:"h4",children:(null===(n=k.provider_statistics)||void 0===n?void 0:n.recent_activity)||0})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>N(k,"Analysis Period Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",color:"info.main",children:"Analysis Period"}),(0,St.jsxs)(Bu,{variant:"h4",children:[k.analysis_period_days||30," days"]})]})})}),k.nft_market_data&&(0,St.jsxs)(St.Fragment,{children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{bgcolor:"primary.light",color:"primary.contrastText",cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>N(k.nft_market_data,"Total NFTs Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",children:"Total NFTs"}),(0,St.jsx)(Bu,{variant:"h4",children:k.nft_market_data.total_nfts||0})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{bgcolor:"primary.light",color:"primary.contrastText",cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>N(k.nft_market_data,"Collections Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",children:"Collections"}),(0,St.jsx)(Bu,{variant:"h4",children:k.nft_market_data.total_collections||0})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{bgcolor:"primary.light",color:"primary.contrastText",cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>N(k.nft_market_data,"NFT Managers Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",children:"NFT Managers"}),(0,St.jsx)(Bu,{variant:"h4",children:k.nft_market_data.unique_nft_managers||0})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{bgcolor:"primary.light",color:"primary.contrastText",cursor:"pointer","&:hover":{boxShadow:3}},onClick:()=>N(k.nft_market_data,"Active NFTs Details"),children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",children:"Active NFTs"}),(0,St.jsx)(Bu,{variant:"h4",children:k.nft_market_data.active_nfts||0})]})})})]})]}):(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(tg,{children:(0,St.jsx)(ig,{children:(0,St.jsx)(Bu,{variant:"body1",color:"textSecondary",align:"center",children:"Market analysis data is not available at the moment. This feature requires location data to be available in the system."})})})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(tg,{children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"\ud83d\uddfa\ufe0f Wallet Locations & NFTs Map"}),(0,St.jsx)(DT,{locations:[...h.filter((e=>e.latitude&&e.longitude&&!isNaN(parseFloat(e.latitude))&&!isNaN(parseFloat(e.longitude)))).map((e=>({latitude:parseFloat(e.latitude),longitude:parseFloat(e.longitude),public_key:e.public_key,description:"Provider: ".concat(e.provider_name," | Type: ").concat(e.wallet_type," | Status: ").concat(e.tracking_status),type:"wallet"}))),...f.filter((e=>e.latitude&&e.longitude&&!isNaN(parseFloat(e.latitude))&&!isNaN(parseFloat(e.longitude)))).map((e=>{var t;return{latitude:parseFloat(e.latitude),longitude:parseFloat(e.longitude),id:e.id,name:e.name||"NFT",description:"NFT: ".concat(e.name||"Unnamed"," | Collection: ").concat((null===(t=e.collection)||void 0===t?void 0:t.name)||"Unknown"),type:"nft",image_url:e.image_url,ipfs_hash:e.ipfs_hash,server_url:e.server_url,full_ipfs_url:e.ipfs_hash?"https://bronze-adjacent-barnacle-907.mypinata.cloud/ipfs/".concat(e.ipfs_hash):null,collection:e.collection}}))],title:"Your Wallet Locations & NFTs",height:"700px",showControls:!0,onNFTDetails:e=>{C(e),j(!0)},zoomTarget:P})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(tg,{children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"Manage Wallets"}),(0,St.jsx)("form",{onSubmit:async e=>{e.preventDefault();try{await Zk.post("/location/update",F),D(),z({public_key:"",blockchain:"Stellar",wallet_type_id:"",description:"",latitude:"",longitude:"",location_enabled:!0})}catch(v){console.error("Error adding wallet:",v)}}}),(0,St.jsx)(Ow,{children:(0,St.jsxs)(Nw,{children:[(0,St.jsx)(Gw,{children:(0,St.jsxs)(Qw,{children:[(0,St.jsx)(iS,{children:"Public Key"}),(0,St.jsx)(iS,{children:"Blockchain"}),(0,St.jsx)(iS,{children:"Type"}),(0,St.jsx)(iS,{children:"Description"}),(0,St.jsx)(iS,{children:"Location"}),(0,St.jsx)(iS,{children:"Status"}),(0,St.jsx)(iS,{children:"Actions"})]})}),(0,St.jsxs)(dS,{children:[a.map((e=>(0,St.jsxs)(Qw,{children:[(0,St.jsx)(iS,{children:e.public_key}),(0,St.jsx)(iS,{children:e.blockchain}),(0,St.jsx)(iS,{children:(0,St.jsx)(yg,{label:"Wallet",color:"primary",size:"small",icon:(0,St.jsx)(L_,{})})}),(0,St.jsx)(iS,{children:e.description}),(0,St.jsx)(iS,{children:"".concat(e.latitude,", ").concat(e.longitude)}),(0,St.jsx)(iS,{children:e.location_enabled?"Active":"Disabled"}),(0,St.jsxs)(iS,{children:[(0,St.jsx)(Ap,{size:"small",variant:"outlined",sx:{mr:1},children:"Edit"}),(0,St.jsx)(Ap,{size:"small",variant:"outlined",children:e.location_enabled?"Disable":"Enable"})]})]},"wallet-".concat(e.id)))),f.map((e=>(0,St.jsxs)(Qw,{children:[(0,St.jsx)(iS,{children:e.pinned_by_user}),(0,St.jsx)(iS,{children:"Stellar"}),(0,St.jsx)(iS,{children:(0,St.jsx)(yg,{label:"NFT",color:"secondary",size:"small",icon:(0,St.jsx)(GT,{})})}),(0,St.jsx)(iS,{children:e.name||"Unnamed NFT"}),(0,St.jsx)(iS,{children:"".concat(e.latitude,", ").concat(e.longitude)}),(0,St.jsx)(iS,{children:e.is_active?"Active":"Inactive"}),(0,St.jsxs)(iS,{children:[(0,St.jsx)(Ap,{size:"small",variant:"outlined",sx:{mr:1},children:"View"}),(0,St.jsx)(Ap,{size:"small",variant:"outlined",children:"Details"})]})]},"nft-".concat(e.id))))]})]})})]})})})]}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(tg,{children:(0,St.jsxs)(ig,{children:[(0,St.jsxs)(uu,{display:"flex",alignItems:"center",mb:2,children:[(0,St.jsx)(KT,{sx:{mr:1}}),(0,St.jsx)(Bu,{variant:"h6",children:"Wallet Provider API Documentation"})]}),(0,St.jsxs)(w_,{children:[(0,St.jsx)(j_,{expandIcon:(0,St.jsx)(D_,{}),children:(0,St.jsx)(Bu,{variant:"h6",children:"Submit Wallet Location"})}),(0,St.jsxs)(M_,{children:[(0,St.jsxs)(Bu,{variant:"body2",gutterBottom:!0,children:[(0,St.jsx)("strong",{children:"Endpoint:"})," POST /api/location/update"]}),(0,St.jsxs)(Bu,{variant:"body2",gutterBottom:!0,children:[(0,St.jsx)("strong",{children:"Headers:"})," Authorization: Bearer YOUR_API_KEY"]}),(0,St.jsx)(uu,{sx:{mt:2,p:2,bgcolor:"grey.100",borderRadius:1},children:(0,St.jsx)(Bu,{variant:"body2",component:"pre",sx:{fontFamily:"monospace"},children:'{\n  "public_key": "GABC123...",\n  "blockchain": "Stellar",\n  "latitude": 40.7128,\n  "longitude": -74.0060,\n  "wallet_type_id": 1,\n  "description": "User wallet location"\n}'})})]})]}),(0,St.jsxs)(w_,{children:[(0,St.jsx)(j_,{expandIcon:(0,St.jsx)(D_,{}),children:(0,St.jsx)(Bu,{variant:"h6",children:"Update User Privacy Settings"})}),(0,St.jsxs)(M_,{children:[(0,St.jsxs)(Bu,{variant:"body2",gutterBottom:!0,children:[(0,St.jsx)("strong",{children:"Endpoint:"})," POST /api/wallet-provider/privacy-settings"]}),(0,St.jsxs)(Bu,{variant:"body2",gutterBottom:!0,children:[(0,St.jsx)("strong",{children:"Headers:"})," Authorization: Bearer YOUR_API_KEY"]}),(0,St.jsx)(uu,{sx:{mt:2,p:2,bgcolor:"grey.100",borderRadius:1},children:(0,St.jsx)(Bu,{variant:"body2",component:"pre",sx:{fontFamily:"monospace"},children:'{\n  "public_key": "GABC123...",\n  "privacy_enabled": true,\n  "visibility_enabled": false\n}'})})]})]}),(0,St.jsxs)(w_,{children:[(0,St.jsx)(j_,{expandIcon:(0,St.jsx)(D_,{}),children:(0,St.jsx)(Bu,{variant:"h6",children:"Update User Visibility Settings"})}),(0,St.jsxs)(M_,{children:[(0,St.jsxs)(Bu,{variant:"body2",gutterBottom:!0,children:[(0,St.jsx)("strong",{children:"Endpoint:"})," POST /api/wallet-provider/visibility-settings"]}),(0,St.jsxs)(Bu,{variant:"body2",gutterBottom:!0,children:[(0,St.jsx)("strong",{children:"Headers:"})," Authorization: Bearer YOUR_API_KEY"]}),(0,St.jsx)(uu,{sx:{mt:2,p:2,bgcolor:"grey.100",borderRadius:1},children:(0,St.jsx)(Bu,{variant:"body2",component:"pre",sx:{fontFamily:"monospace"},children:'{\n  "public_key": "GABC123...",\n  "is_visible": true\n}'})})]})]}),(0,St.jsxs)(w_,{children:[(0,St.jsx)(j_,{expandIcon:(0,St.jsx)(D_,{}),children:(0,St.jsx)(Bu,{variant:"h6",children:"Get User Locations"})}),(0,St.jsxs)(M_,{children:[(0,St.jsxs)(Bu,{variant:"body2",gutterBottom:!0,children:[(0,St.jsx)("strong",{children:"Endpoint:"})," GET /api/wallet-provider/user-locations?public_key=GABC123..."]}),(0,St.jsxs)(Bu,{variant:"body2",gutterBottom:!0,children:[(0,St.jsx)("strong",{children:"Headers:"})," Authorization: Bearer YOUR_API_KEY"]}),(0,St.jsx)(uu,{sx:{mt:2,p:2,bgcolor:"grey.100",borderRadius:1},children:(0,St.jsx)(Bu,{variant:"body2",component:"pre",sx:{fontFamily:"monospace"},children:'{\n  "locations": [\n    {\n      "id": 1,\n      "public_key": "GABC123...",\n      "latitude": 40.7128,\n      "longitude": -74.0060,\n      "timestamp": "2025-10-03T19:00:00Z"\n    }\n  ]\n}'})})]})]}),(0,St.jsx)(lh,{sx:{my:2}}),(0,St.jsxs)(uu,{display:"flex",gap:2,flexWrap:"wrap",children:[(0,St.jsx)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(XT,{}),href:"https://geolink-buavavc6gse5c9fw.westus-01.azurewebsites.net/docs",target:"_blank",children:"Full API Documentation"}),(0,St.jsx)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(KT,{}),onClick:()=>{const e=new Blob([JSON.stringify({info:{name:"GeoLink Wallet Provider API",schema:"https://schema.getpostman.com/json/collection/v2.1.0/collection.json"},item:[{name:"Submit Wallet Location",request:{method:"POST",header:[{key:"Authorization",value:"Bearer {{api_key}}"}],body:{mode:"raw",raw:'{\n  "public_key": "GABC123...",\n  "blockchain": "Stellar",\n  "latitude": 40.7128,\n  "longitude": -74.0060,\n  "wallet_type_id": 1,\n  "description": "User wallet location"\n}'},url:{raw:"{{base_url}}/api/location/update",host:["{{base_url}}"],path:["api","location","update"]}}}]},null,2)],{type:"application/json"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="GeoLink-Wallet-Provider-API.postman_collection.json",r.click(),URL.revokeObjectURL(t)},children:"Download Postman Collection"})]})]})})}),(0,St.jsx)(qT,{open:w,onClose:()=>S(!1),userType:"wallet_provider",onRequestSubmitted:D}),(0,St.jsxs)(Ng,{open:A,onClose:()=>j(!1),maxWidth:"md",fullWidth:!0,children:[(0,St.jsxs)(qg,{children:["NFT Details",(0,St.jsx)(th,{"aria-label":"close",onClick:()=>j(!1),sx:{position:"absolute",right:8,top:8},children:(0,St.jsx)(Nm,{})})]}),(0,St.jsx)($v,{children:E&&(0,St.jsx)(uu,{children:(0,St.jsxs)(Jm,{container:!0,spacing:3,children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:E.full_ipfs_url&&(0,St.jsx)("img",{src:E.full_ipfs_url,alt:E.name||"NFT",style:{width:"100%",height:"auto",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"}})}),(0,St.jsxs)(Jm,{item:!0,xs:12,md:6,children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:E.name||"Unnamed NFT"}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Collection: ",(null===(o=E.collection)||void 0===o?void 0:o.name)||"Unknown"]}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Location: ",E.latitude,", ",E.longitude]}),(0,St.jsx)(Ap,{variant:"outlined",size:"small",sx:{mt:1},onClick:()=>{I({latitude:parseFloat(E.latitude),longitude:parseFloat(E.longitude)}),j(!1)},children:"\ud83d\udd0d Zoom to Location"}),E.description&&(0,St.jsx)(Bu,{variant:"body2",sx:{mt:2},children:E.description})]})]})})})]}),(0,St.jsxs)(Ng,{open:R,onClose:()=>L(!1),maxWidth:"lg",fullWidth:!0,fullScreen:window.innerWidth<900,sx:{"& .MuiDialog-paper":{margin:window.innerWidth<900?0:"32px",maxHeight:window.innerWidth<900?"100vh":"90vh",width:window.innerWidth<900?"100vw":"auto"}},children:[(0,St.jsxs)(qg,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(null===O||void 0===O?void 0:O.title)||"Analytics Details",(0,St.jsx)(th,{onClick:()=>L(!1),children:(0,St.jsx)(Nm,{})})]}),(0,St.jsx)($v,{children:O&&(0,St.jsxs)(uu,{children:[console.log("\ud83d\udd0d Analytics Dialog Data:",{selectedAnalytics:O,hasData:O.data,hasPagination:O.pagination,dataLength:null===(i=O.data)||void 0===i?void 0:i.length}),O.loading?(0,St.jsx)(uu,{sx:{display:"flex",justifyContent:"center",p:4},children:(0,St.jsx)(Xd,{})}):O.error?(0,St.jsx)(n_,{severity:"error",sx:{mt:2},children:O.error}):O.pagination?(0,St.jsxs)(uu,{sx:{mt:2},children:[(0,St.jsx)(uu,{sx:{display:{xs:"block",md:"none"}},children:O.data.map(((e,t)=>(0,St.jsx)(tg,{sx:{mb:2,p:2},children:Object.entries(e).map((e=>{let[t,r]=e;return(0,St.jsxs)(uu,{sx:{mb:1,display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",sx:{fontWeight:"bold",minWidth:"40%"},children:[t.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase())),":"]}),(0,St.jsx)(Bu,{variant:"body2",sx:{textAlign:"right",wordBreak:"break-word",maxWidth:"60%"},children:"boolean"===typeof r?r?"Yes":"No":"number"===typeof r?r.toLocaleString():r?String(r):"-"})]},t)}))},t)))}),(0,St.jsx)(uu,{sx:{display:{xs:"none",md:"block"}},children:(0,St.jsx)(Ow,{component:$h,sx:{maxHeight:500,overflow:"auto","& .MuiTable-root":{minWidth:800}},children:(0,St.jsxs)(Nw,{stickyHeader:!0,size:"small",children:[(0,St.jsx)(Gw,{children:(0,St.jsx)(Qw,{children:O.data.length>0&&Object.keys(O.data[0]).map((e=>(0,St.jsx)(iS,{sx:{fontWeight:"bold",backgroundColor:"primary.main",color:"primary.contrastText",minWidth:100,fontSize:"0.875rem",padding:"8px 12px"},children:e.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))},e)))})}),(0,St.jsx)(dS,{children:O.data.map(((e,t)=>(0,St.jsx)(Qw,{hover:!0,children:Object.values(e).map(((e,t)=>(0,St.jsx)(iS,{sx:{wordBreak:"break-word",maxWidth:150,overflow:"hidden",textOverflow:"ellipsis",fontSize:"0.875rem",padding:"8px 12px"},title:"string"===typeof e&&e.length>20?String(e):void 0,children:"boolean"===typeof e?e?"Yes":"No":"number"===typeof e?e.toLocaleString():e?String(e):"-"},t)))},t)))})]})})}),O.pagination&&(0,St.jsxs)(uu,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"center",mt:2,gap:2,p:{xs:1,sm:0}},children:[(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",sx:{textAlign:{xs:"center",sm:"left"},fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:["Page ",O.pagination.page," of ",O.pagination.pages,"(",O.pagination.total," total items)"]}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:1,width:{xs:"100%",sm:"auto"},justifyContent:{xs:"center",sm:"flex-end"}},children:[(0,St.jsx)(Ap,{disabled:O.pagination.page<=1,onClick:()=>N(O.data,O.title,O.pagination.page-1),size:"small",variant:"outlined",sx:{minWidth:{xs:"80px",sm:"auto"},fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:"Previous"}),(0,St.jsx)(Ap,{disabled:O.pagination.page>=O.pagination.pages,onClick:()=>N(O.data,O.title,O.pagination.page+1),size:"small",variant:"outlined",sx:{minWidth:{xs:"80px",sm:"auto"},fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:"Next"})]})]})]}):(0,St.jsx)(uu,{sx:{mt:2},children:(0,St.jsx)(Jm,{container:!0,spacing:2,children:Object.entries(O.data).map((e=>{let[t,r]=e;return(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,md:4,children:(0,St.jsxs)(tg,{sx:{p:2,height:"100%","&:hover":{boxShadow:3}},children:[(0,St.jsx)(Bu,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},fontWeight:"bold"},children:t.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))}),(0,St.jsx)(Bu,{variant:"h6",color:"primary",sx:{fontSize:{xs:"1rem",sm:"1.25rem"},wordBreak:"break-word"},children:"number"===typeof r?r.toLocaleString():"object"===typeof r&&null!==r?Array.isArray(r)?"".concat(r.length," items"):"Object":String(r||"-")})]})},t)}))})})]})})]})]})};function YT(e){return iu("MuiCardMedia",e)}au("MuiCardMedia",["root","media","img"]);const JT=["children","className","component","image","src","style"],$T=Eu("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e,{isMediaComponent:n,isImageComponent:o}=r;return[t.root,n&&t.media,o&&t.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),QT=["video","audio","picture","iframe","img"],eE=["picture","img"],tE=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiCardMedia"}),{children:n,className:o,component:i="div",image:s,src:l,style:c}=r,u=a(r,JT),h=QT.includes(i),p=!h&&s?d({backgroundImage:'url("'.concat(s,'")')},c):c,f=d(d({},r),{},{component:i,isMediaComponent:h,isImageComponent:eE.includes(i)}),m=(e=>{const{classes:t,isMediaComponent:r,isImageComponent:n}=e;return du({root:["root",r&&"media",n&&"img"]},YT,t)})(f);return(0,St.jsx)($T,d(d({className:Wc(m.root,o),as:i,role:!h&&s?"img":void 0,ref:t,style:p,ownerState:f,src:h?s||l:void 0},u),{},{children:n}))})),rE=tE,nE=Fm((0,St.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info"),oE=Fm((0,St.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"GetApp"),iE=Fm((0,St.jsx)("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList"),aE=Fm((0,St.jsx)("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7"}),"MyLocation"),sE=Fm([(0,St.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"},"0"),(0,St.jsx)("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"},"1")],"ZoomIn"),lE=Fm((0,St.jsx)("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos"),cE=Fm((0,St.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos"),uE=e=>{let{open:r,onClose:n,onLocationUpdate:o}=e;const[i,a]=(0,t.useState)(null),[s,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(""),[d,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(!0);(0,t.useEffect)((()=>{r&&m()}),[r]);const m=async()=>{if("geolocation"in navigator)try{const e=await navigator.permissions.query({name:"geolocation"});h("granted"===e.state)}catch(e){console.log("Permission API not supported"),h(!0)}},g=()=>{a(null),u(""),l(!1),n()};return(0,St.jsxs)(Ng,{open:r,onClose:g,maxWidth:"sm",fullWidth:!0,children:[(0,St.jsx)(qg,{children:(0,St.jsxs)(uu,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,St.jsxs)(uu,{display:"flex",alignItems:"center",children:[(0,St.jsx)(vg,{sx:{mr:1}}),(0,St.jsx)(Bu,{variant:"h6",children:"Location Services"})]}),(0,St.jsx)(th,{onClick:g,children:(0,St.jsx)(Nm,{})})]})}),(0,St.jsxs)($v,{children:[(0,St.jsx)(Bu,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Location services are required to discover nearby NFTs and verify your position for collection."}),!d&&(0,St.jsx)(n_,{severity:"warning",sx:{mb:3},children:(0,St.jsxs)(Bu,{variant:"body2",children:[(0,St.jsx)("strong",{children:"Location Permission Required:"})," Please enable location services in your browser settings to use NFT collection features."]})}),(0,St.jsx)(tg,{sx:{mb:3},children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"Location Settings"}),(0,St.jsx)(ew,{control:(0,St.jsx)(iT,{checked:p,onChange:e=>f(e.target.checked)}),label:"High Accuracy Mode (Recommended for NFT collection)"}),(0,St.jsx)(Bu,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"High accuracy mode provides more precise location data but may use more battery."})]})}),i&&(0,St.jsx)(tg,{sx:{mb:3},children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"Current Location"}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:[(0,St.jsx)("strong",{children:"Latitude:"})," ",i.latitude.toFixed(6)]}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:[(0,St.jsx)("strong",{children:"Longitude:"})," ",i.longitude.toFixed(6)]}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:[(0,St.jsx)("strong",{children:"Accuracy:"})," \xb1",Math.round(i.accuracy),"m"]}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:[(0,St.jsx)("strong",{children:"Last Updated:"})," ",new Date(i.timestamp).toLocaleString()]})]})}),c&&(0,St.jsx)(n_,{severity:"error",sx:{mb:3},children:c}),(0,St.jsx)(uu,{display:"flex",justifyContent:"center",sx:{mt:2},children:(0,St.jsx)(Ap,{variant:"contained",startIcon:s?(0,St.jsx)(Xd,{size:20}):(0,St.jsx)(ET,{}),onClick:()=>{if(!navigator.geolocation)return void u("Geolocation is not supported by this browser.");l(!0),u("");const e={enableHighAccuracy:p,timeout:1e4,maximumAge:3e5};navigator.geolocation.getCurrentPosition((e=>{const t={latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy,timestamp:e.timestamp};a(t),u(""),l(!1),o&&o(t)}),(e=>{let t="";switch(e.code){case e.PERMISSION_DENIED:t="Location access denied. Please enable location services and refresh the page.";break;case e.POSITION_UNAVAILABLE:t="Location information is unavailable.";break;case e.TIMEOUT:t="Location request timed out.";break;default:t="An unknown error occurred while retrieving location."}u(t),l(!1)}),e)},disabled:s,fullWidth:!0,children:s?"Getting Location...":"Get Current Location"})}),(0,St.jsx)(n_,{severity:"info",sx:{mt:2},children:(0,St.jsxs)(Bu,{variant:"body2",children:[(0,St.jsx)("strong",{children:"Privacy Note:"})," Your location data is only used locally to find nearby NFTs and is never stored on our servers."]})})]}),(0,St.jsxs)(HS,{children:[(0,St.jsx)(Ap,{onClick:g,children:"Cancel"}),i&&(0,St.jsx)(Ap,{variant:"contained",onClick:()=>{o&&i&&o(i),g()},startIcon:(0,St.jsx)(vg,{}),children:"Use This Location"})]})]})},dE=Fm((0,St.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Create"),hE=Fm((0,St.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send"),pE=()=>{const{isConnected:e,loading:r,error:n,createNFTCollection:o,mintNFT:i,transferNFT:a,executeOnNFTTransfer:s,createLocationNFT:l,getNFTCollections:c}=Mc(),[u,h]=(0,t.useState)([]),[p,f]=(0,t.useState)(null);console.log("Selected collection:",p);const[m,g]=(0,t.useState)({name:"",symbol:"",description:"",metadata:{}}),[y,v]=(0,t.useState)({contractId:"",recipient:"",metadata:{}}),[b,x]=(0,t.useState)({contractId:"",tokenId:"",from:"",to:""}),[_,w]=(0,t.useState)({contractId:"",recipient:"",latitude:"",longitude:"",address:"",metadata:{}}),[S,k]=(0,t.useState)({contractId:"",tokenId:"",from:"",to:"",actionContractId:"",actionFunction:"",actionArgs:[]}),[T,E]=(0,t.useState)(!1),[C,A]=(0,t.useState)(!1),[j,P]=(0,t.useState)(!1),[I,O]=(0,t.useState)(!1),[M,R]=(0,t.useState)(!1),L=(0,t.useCallback)((()=>{try{const e=c();h(e)}catch(n){console.error("Failed to load collections:",n)}}),[c]);(0,t.useEffect)((()=>{e&&L()}),[e,L]);return e?(0,St.jsxs)(uu,{sx:{p:3},children:[(0,St.jsx)(Bu,{variant:"h4",gutterBottom:!0,children:"Enhanced NFT Manager"}),(0,St.jsx)(Bu,{variant:"subtitle1",color:"text.secondary",gutterBottom:!0,children:"Following Stellar Playbook recommendations for NFT management"}),n&&(0,St.jsx)(n_,{severity:"error",sx:{mb:2},children:n}),(0,St.jsxs)(Jm,{container:!0,spacing:2,sx:{mb:3},children:[(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,md:3,children:(0,St.jsx)(Ap,{variant:"contained",startIcon:(0,St.jsx)(aT,{}),onClick:()=>E(!0),fullWidth:!0,children:"Create Collection"})}),(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,md:3,children:(0,St.jsx)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(dE,{}),onClick:()=>A(!0),fullWidth:!0,children:"Mint NFT"})}),(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,md:3,children:(0,St.jsx)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(hE,{}),onClick:()=>P(!0),fullWidth:!0,children:"Transfer NFT"})}),(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,md:3,children:(0,St.jsx)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(vg,{}),onClick:()=>O(!0),fullWidth:!0,children:"Location NFT"})})]}),(0,St.jsx)(tg,{sx:{mb:3},children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"NFT Collections"}),0===u.length?(0,St.jsx)(Bu,{color:"text.secondary",children:"No collections found. Create your first collection to get started."}):(0,St.jsx)(ph,{children:u.map(((e,t)=>(0,St.jsxs)(Kh,{children:[(0,St.jsx)(Rh,{primary:e.name,secondary:"".concat(e.symbol," - ").concat(e.description)}),(0,St.jsx)(Vh,{children:(0,St.jsx)(th,{edge:"end",onClick:()=>f(e),children:(0,St.jsx)(Qv,{})})})]},t)))})]})}),(0,St.jsx)(tg,{children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"Smart Contract Actions"}),(0,St.jsx)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(V_,{}),onClick:()=>R(!0),sx:{mb:2},children:"Execute on NFT Transfer"}),(0,St.jsx)(Bu,{variant:"body2",color:"text.secondary",children:"Execute smart contracts automatically when NFTs are transferred"})]})}),(0,St.jsxs)(Ng,{open:T,onClose:()=>E(!1),maxWidth:"sm",fullWidth:!0,children:[(0,St.jsx)(qg,{children:"Create NFT Collection"}),(0,St.jsx)($v,{children:(0,St.jsxs)(Jm,{container:!0,spacing:2,sx:{mt:1},children:[(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"Collection Name",value:m.name,onChange:e=>g(d(d({},m),{},{name:e.target.value})),fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"Symbol",value:m.symbol,onChange:e=>g(d(d({},m),{},{symbol:e.target.value})),fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"Description",value:m.description,onChange:e=>g(d(d({},m),{},{description:e.target.value})),multiline:!0,rows:3,fullWidth:!0})})]})}),(0,St.jsxs)(HS,{children:[(0,St.jsx)(Ap,{onClick:()=>E(!1),children:"Cancel"}),(0,St.jsx)(Ap,{onClick:async()=>{try{const e=await o(m.name,m.symbol,m.description,m.metadata);console.log("Collection created:",e),E(!1),g({name:"",symbol:"",description:"",metadata:{}}),L()}catch(n){console.error("Failed to create collection:",n)}},variant:"contained",disabled:r,children:r?(0,St.jsx)(Xd,{size:20}):"Create Collection"})]})]}),(0,St.jsxs)(Ng,{open:C,onClose:()=>A(!1),maxWidth:"sm",fullWidth:!0,children:[(0,St.jsx)(qg,{children:"Mint NFT"}),(0,St.jsx)($v,{children:(0,St.jsxs)(Jm,{container:!0,spacing:2,sx:{mt:1},children:[(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"Contract ID",value:y.contractId,onChange:e=>v(d(d({},y),{},{contractId:e.target.value})),fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"Recipient Address",value:y.recipient,onChange:e=>v(d(d({},y),{},{recipient:e.target.value})),fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"Metadata (JSON)",value:JSON.stringify(y.metadata),onChange:e=>{try{const t=JSON.parse(e.target.value);v(d(d({},y),{},{metadata:t}))}catch(n){}},multiline:!0,rows:3,fullWidth:!0})})]})}),(0,St.jsxs)(HS,{children:[(0,St.jsx)(Ap,{onClick:()=>A(!1),children:"Cancel"}),(0,St.jsx)(Ap,{onClick:async()=>{try{const e=await i(y.contractId,y.recipient,y.metadata);console.log("NFT minted:",e),A(!1),v({contractId:"",recipient:"",metadata:{}})}catch(n){console.error("Failed to mint NFT:",n)}},variant:"contained",disabled:r,children:r?(0,St.jsx)(Xd,{size:20}):"Mint NFT"})]})]}),(0,St.jsxs)(Ng,{open:j,onClose:()=>P(!1),maxWidth:"sm",fullWidth:!0,children:[(0,St.jsx)(qg,{children:"Transfer NFT"}),(0,St.jsx)($v,{children:(0,St.jsxs)(Jm,{container:!0,spacing:2,sx:{mt:1},children:[(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"Contract ID",value:b.contractId,onChange:e=>x(d(d({},b),{},{contractId:e.target.value})),fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"Token ID",value:b.tokenId,onChange:e=>x(d(d({},b),{},{tokenId:e.target.value})),fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"From Address",value:b.from,onChange:e=>x(d(d({},b),{},{from:e.target.value})),fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"To Address",value:b.to,onChange:e=>x(d(d({},b),{},{to:e.target.value})),fullWidth:!0})})]})}),(0,St.jsxs)(HS,{children:[(0,St.jsx)(Ap,{onClick:()=>P(!1),children:"Cancel"}),(0,St.jsx)(Ap,{onClick:async()=>{try{const e=await a(b.contractId,b.tokenId,b.from,b.to);console.log("NFT transferred:",e),P(!1),x({contractId:"",tokenId:"",from:"",to:""})}catch(n){console.error("Failed to transfer NFT:",n)}},variant:"contained",disabled:r,children:r?(0,St.jsx)(Xd,{size:20}):"Transfer NFT"})]})]}),(0,St.jsxs)(Ng,{open:I,onClose:()=>O(!1),maxWidth:"sm",fullWidth:!0,children:[(0,St.jsx)(qg,{children:"Create Location NFT"}),(0,St.jsx)($v,{children:(0,St.jsxs)(Jm,{container:!0,spacing:2,sx:{mt:1},children:[(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"Contract ID",value:_.contractId,onChange:e=>w(d(d({},_),{},{contractId:e.target.value})),fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"Recipient Address",value:_.recipient,onChange:e=>w(d(d({},_),{},{recipient:e.target.value})),fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:6,children:(0,St.jsx)(Uv,{label:"Latitude",type:"number",value:_.latitude,onChange:e=>w(d(d({},_),{},{latitude:e.target.value})),fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:6,children:(0,St.jsx)(Uv,{label:"Longitude",type:"number",value:_.longitude,onChange:e=>w(d(d({},_),{},{longitude:e.target.value})),fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"Address",value:_.address,onChange:e=>w(d(d({},_),{},{address:e.target.value})),fullWidth:!0})})]})}),(0,St.jsxs)(HS,{children:[(0,St.jsx)(Ap,{onClick:()=>O(!1),children:"Cancel"}),(0,St.jsx)(Ap,{onClick:async()=>{try{const e={latitude:parseFloat(_.latitude),longitude:parseFloat(_.longitude),address:_.address},t=await l(_.contractId,_.recipient,e,_.metadata);console.log("Location NFT created:",t),O(!1),w({contractId:"",recipient:"",latitude:"",longitude:"",address:"",metadata:{}})}catch(n){console.error("Failed to create location NFT:",n)}},variant:"contained",disabled:r,children:r?(0,St.jsx)(Xd,{size:20}):"Create Location NFT"})]})]}),(0,St.jsxs)(Ng,{open:M,onClose:()=>R(!1),maxWidth:"md",fullWidth:!0,children:[(0,St.jsx)(qg,{children:"Execute Smart Contract on NFT Transfer"}),(0,St.jsx)($v,{children:(0,St.jsxs)(Jm,{container:!0,spacing:2,sx:{mt:1},children:[(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"NFT Contract ID",value:S.contractId,onChange:e=>k(d(d({},S),{},{contractId:e.target.value})),fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"Token ID",value:S.tokenId,onChange:e=>k(d(d({},S),{},{tokenId:e.target.value})),fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:6,children:(0,St.jsx)(Uv,{label:"From Address",value:S.from,onChange:e=>k(d(d({},S),{},{from:e.target.value})),fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:6,children:(0,St.jsx)(Uv,{label:"To Address",value:S.to,onChange:e=>k(d(d({},S),{},{to:e.target.value})),fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"Action Contract ID",value:S.actionContractId,onChange:e=>k(d(d({},S),{},{actionContractId:e.target.value})),fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"Action Function",value:S.actionFunction,onChange:e=>k(d(d({},S),{},{actionFunction:e.target.value})),fullWidth:!0})})]})}),(0,St.jsxs)(HS,{children:[(0,St.jsx)(Ap,{onClick:()=>R(!1),children:"Cancel"}),(0,St.jsx)(Ap,{onClick:async()=>{try{const e=await s(S.contractId,S.tokenId,S.from,S.to,S.actionContractId,S.actionFunction,S.actionArgs);console.log("Smart contract executed:",e),R(!1),k({contractId:"",tokenId:"",from:"",to:"",actionContractId:"",actionFunction:"",actionArgs:[]})}catch(n){console.error("Failed to execute smart contract:",n)}},variant:"contained",disabled:r,children:r?(0,St.jsx)(Xd,{size:20}):"Execute Smart Contract"})]})]})]}):(0,St.jsx)(uu,{sx:{p:3},children:(0,St.jsx)(n_,{severity:"warning",children:"Please connect your wallet to access NFT management features."})})};function fE(e){return iu("MuiFormGroup",e)}au("MuiFormGroup",["root","row","error"]);const mE=["className","row"],gE=Eu("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.row&&t.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),yE=t.forwardRef((function(e,t){const r=Ta({props:e,name:"MuiFormGroup"}),{className:n,row:o=!1}=r,i=a(r,mE),s=Jg({props:r,muiFormControl:Qg(),states:["error"]}),l=d(d({},r),{},{row:o,error:s.error}),c=(e=>{const{classes:t,row:r,error:n}=e;return du({root:["root",r&&"row",n&&"error"]},fE,t)})(l);return(0,St.jsx)(gE,d({className:Wc(c.root,n),ownerState:l,ref:t},i))}));function vE(e){return iu("MuiRadioGroup",e)}au("MuiRadioGroup",["root","row","error"]);const bE=t.createContext(void 0),xE=["actions","children","className","defaultValue","name","onChange","value"],_E=t.forwardRef((function(e,r){const{actions:n,children:o,className:i,defaultValue:s,name:l,onChange:c,value:u}=e,h=a(e,xE),p=t.useRef(null),f=(e=>{const{classes:t,row:r,error:n}=e;return du({root:["root",r&&"row",n&&"error"]},vE,t)})(e),[m,g]=mv({controlled:u,default:s,name:"RadioGroup"});t.useImperativeHandle(n,(()=>({focus:()=>{let e=p.current.querySelector("input:not(:disabled):checked");e||(e=p.current.querySelector("input:not(:disabled)")),e&&e.focus()}})),[]);const y=Xu(r,p),v=qu(l),b=t.useMemo((()=>({name:v,onChange(e){g(e.target.value),c&&c(e,e.target.value)},value:m})),[v,c,g,m]);return(0,St.jsx)(bE.Provider,{value:b,children:(0,St.jsx)(yE,d(d({role:"radiogroup",ref:y,className:Wc(f.root,i)},h),{},{children:o}))})})),wE=Fm((0,St.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),SE=Fm((0,St.jsx)("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),kE=Eu("span",{shouldForwardProp:Tu})({position:"relative",display:"flex"}),TE=Eu(wE)({transform:"scale(1)"}),EE=Eu(SE)(Au((e=>{let{theme:t}=e;return{left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})}}]}})));const CE=function(e){const{checked:t=!1,classes:r={},fontSize:n}=e,o=d(d({},e),{},{checked:t});return(0,St.jsxs)(kE,{className:r.root,ownerState:o,children:[(0,St.jsx)(TE,{fontSize:n,className:r.background,ownerState:o}),(0,St.jsx)(EE,{fontSize:n,className:r.dot,ownerState:o})]})},AE=Ef;function jE(e){return iu("MuiRadio",e)}const PE=au("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),IE=["checked","checkedIcon","color","icon","name","onChange","size","className","disabled","disableRipple","slots","slotProps","inputProps"],OE=Eu(iw,{shouldForwardProp:e=>Tu(e)||"classes"===e,name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,"medium"!==r.size&&t["size".concat(ju(r.size))],t["color".concat(ju(r.color))]]}})(Au((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,["&.".concat(PE.disabled)]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Go(t.palette.action.active,t.palette.action.hoverOpacity)}}},...Object.entries(t.palette).filter(Pu()).map((e=>{let[r]=e;return{props:{color:r,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[r].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Go(t.palette[r].main,t.palette.action.hoverOpacity)}}}})),...Object.entries(t.palette).filter(Pu()).map((e=>{let[r]=e;return{props:{color:r,disabled:!1},style:{["&.".concat(PE.checked)]:{color:(t.vars||t).palette[r].main}}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}})));const ME=(0,St.jsx)(CE,{checked:!0}),RE=(0,St.jsx)(CE,{}),LE=t.forwardRef((function(e,r){var n,o,i;const s=Ta({props:e,name:"MuiRadio"}),{checked:l,checkedIcon:c=ME,color:u="primary",icon:h=RE,name:p,onChange:f,size:m="medium",className:g,disabled:y,disableRipple:v=!1,slots:b={},slotProps:x={},inputProps:_}=s,w=a(s,IE),S=Qg();let k=y;S&&"undefined"===typeof k&&(k=S.disabled),null!==k&&void 0!==k||(k=!1);const T=d(d({},s),{},{disabled:k,disableRipple:v,color:u,size:m}),E=(e=>{const{classes:t,color:r,size:n}=e,o={root:["root","color".concat(ju(r)),"medium"!==n&&"size".concat(ju(n))]};return d(d({},t),du(o,jE,t))})(T),C=t.useContext(bE);let A=l;const j=AE(f,C&&C.onChange);let P=p;var I,O;C&&("undefined"===typeof A&&(I=C.value,A="object"===typeof(O=s.value)&&null!==O?I===O:String(I)===String(O)),"undefined"===typeof P&&(P=C.name));const M=null!==(n=x.input)&&void 0!==n?n:_,[R,L]=Ih("root",{ref:r,elementType:OE,className:Wc(E.root,g),shouldForwardComponentProp:!0,externalForwardedProps:d({slots:b,slotProps:x},w),getSlotProps:e=>d(d({},e),{},{onChange:function(t){for(var r,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];null===(r=e.onChange)||void 0===r||r.call(e,t,...o),j(t,...o)}}),ownerState:T,additionalProps:{type:"radio",icon:t.cloneElement(h,{fontSize:null!==(o=h.props.fontSize)&&void 0!==o?o:m}),checkedIcon:t.cloneElement(c,{fontSize:null!==(i=c.props.fontSize)&&void 0!==i?i:m}),disabled:k,name:P,checked:A,slots:b,slotProps:{input:"function"===typeof M?M(T):M}}});return(0,St.jsx)(R,d(d({},L),{},{classes:E}))})),FE=LE,zE=Fm((0,St.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload");nb().accessToken="pk.eyJ1Ijoic2VyZ2UzNjl4MzMiLCJhIjoiY20zZHh6M2h2MDVoZzJqcTdudXhidm5kdyJ9.31fpP6C_HjNaTEN3C0fDTg";const DE=e=>{var n,o;let{onClose:i,onSuccess:a}=e;const{isConnected:s,publicKey:l,secretKey:c,loading:u,fundAccount:h,upgradeToFullAccess:p}=Mc(),[f,m]=(0,t.useState)([]),[g,y]=(0,t.useState)(""),[v,b]=(0,t.useState)("mint"),[x,_]=(0,t.useState)([]),[w,S]=(0,t.useState)(null),[k,T]=(0,t.useState)({name:"",description:"",ipfsHash:"",filename:"",serverUrl:"https://bronze-adjacent-barnacle-907.mypinata.cloud/ipfs/",attributes:{}}),[E,C]=(0,t.useState)({recipient:"",fromLocation:{latitude:0,longitude:0,radius:100},toLocation:{latitude:0,longitude:0,radius:100}}),[A,j]=(0,t.useState)({latitude:0,longitude:0,radius:100}),[P,I]=(0,t.useState)(100),[O,M]=(0,t.useState)(""),[R,L]=(0,t.useState)(""),[F,z]=(0,t.useState)(null),[D,N]=(0,t.useState)(!1),[B,U]=(0,t.useState)(null),[V,W]=(0,t.useState)(null),[q,H]=(0,t.useState)(""),[G,K]=(0,t.useState)([]),[X,Z]=(0,t.useState)(!1),[Y,J]=(0,t.useState)(null),[$,Q]=(0,t.useState)([]),[ee,te]=(0,t.useState)(""),[re,ne]=(0,t.useState)(!1),[oe,ie]=(0,t.useState)(!1),[ae,se]=(0,t.useState)({name:"",description:"",image_url:"",rarity_level:"common"}),[le,ce]=(0,t.useState)(!1),[ue,de]=(0,t.useState)(!1),[he,pe]=(0,t.useState)({secretKey:""}),[fe,me]=(0,t.useState)({name:"StellarGeoLinkNFT",symbol:"SGL"}),ge=async()=>{try{const e=Ic.getAllContracts();console.log("Loading contracts:",e),m(e)}catch(e){console.error("Failed to load contracts:",e)}},ye=(0,t.useCallback)((async()=>{try{if(g){const e=await Ic.getUserNFTs(g,l);_(e.nfts)}}catch(e){console.error("Failed to load user NFTs:",e)}}),[g,l]);(0,t.useEffect)((()=>{s&&(ge(),ye(),(async()=>{try{ie(!0),console.log("\ud83d\udd0d Fetching collections using centralized API service");const e=await bc.get("/nft/collections");console.log("\ud83d\udce1 Collections response status:",e.status),console.log("\ud83d\udce6 Collections data:",e.data),console.log("\ud83d\udce6 Collections array:",e.data.collections);const t=e.data.collections||e.data;if(console.log("\ud83d\udce6 Final collections array:",t),Q(t||[]),console.log("\ud83d\udce6 Collections state set to:",t),t&&t.length>0){const e=t[0].id.toString();console.log("\u2705 Auto-selecting collection:",e,"type:",typeof e),te(e),console.log("\u2705 Collection ID set to:",e)}}catch(e){console.error("\u274c Failed to fetch collections:",e)}finally{ie(!1)}})())}),[s,ye]),(0,t.useEffect)((()=>{console.log("\ud83d\udd04 Collections state changed:",$)}),[$]),(0,t.useEffect)((()=>{console.log("\ud83c\udfaf SelectedCollectionId changed:",ee,"type:",typeof ee)}),[ee]);const ve=(0,t.useCallback)((()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{j({latitude:e.coords.latitude,longitude:e.coords.longitude,radius:P}),M("Location automatically detected!")}),(e=>{console.log("Automatic location detection failed:",e.message),L("Please enable location services or manually set your location")})):L("Geolocation is not supported by this browser")}),[P]);(0,t.useEffect)((()=>{ve()}),[ve]);const be=(0,t.useCallback)((()=>{if(B&&!V)try{if(!nb())return console.error("Mapbox GL JS not loaded"),void L("Mapbox GL JS is not loaded. Please refresh the page.");const e=new(nb().Map)({container:B,style:"mapbox://styles/mapbox/satellite-streets-v12",center:A?[A.longitude,A.latitude]:[-74.5,40],zoom:A?15:2});e.on("load",(()=>{const t=new(nb().Marker)({color:"#ff9800",draggable:!0});A&&A.latitude&&A.longitude?t.setLngLat([A.longitude,A.latitude]):t.setLngLat([-74.5,40]),t.addTo(e),e._draggableMarker=t,e.on("click",(e=>{t.setLngLat([e.lngLat.lng,e.lngLat.lat]),J({latitude:e.lngLat.lat,longitude:e.lngLat.lng})})),t.on("dragend",(()=>{const e=t.getLngLat();J({latitude:e.lat,longitude:e.lng}),console.log("Marker moved to:",e.lng,e.lat)}));const r=t.getLngLat();J({latitude:r.lat,longitude:r.lng})})),e.on("error",(e=>{console.error("Map error:",e),L("Failed to load map. Please check your Mapbox token.")})),W(e)}catch(e){console.error("Error initializing map:",e),L("Failed to initialize map. Please refresh the page.")}}),[B,A,V]);(0,t.useEffect)((()=>{if(D&&B){const e=setTimeout((()=>{be()}),100);return()=>clearTimeout(e)}}),[D,B,be]),(0,t.useEffect)((()=>{if(!D&&V)try{V.remove(),W(null)}catch(e){console.error("Error cleaning up map:",e)}}),[D,V]);const xe=async()=>{if(q.trim())try{const e="pk.eyJ1Ijoic2VyZ2UzNjl4MzMiLCJhIjoiY20zZHh6M2h2MDVoZzJqcTdudXhidm5kdyJ9.31fpP6C_HjNaTEN3C0fDTg";if(!e)return void L("Mapbox token not configured. Please contact administrator.");const t=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(q),".json?access_token=").concat(e,"&limit=5"));if(!t.ok)throw new Error("Geocoding API error: ".concat(t.status));const r=await t.json();r.features&&r.features.length>0?(K(r.features),Z(!0)):L("No locations found for your search.")}catch(e){console.error("Address search failed:",e),L("Address search failed. Please try again.")}},_e=()=>{const e=[];return k.name&&""!==k.name.trim()||e.push("NFT name is required"),k.ipfsHash&&""!==k.ipfsHash.trim()||e.push("IPFS hash is required"),A&&A.latitude&&A.longitude||e.push("Location is required. Please get your current location first."),(!P||P<=0)&&e.push("Radius must be greater than 0"),c||e.push("Secret key is required"),e},we=async()=>{try{const t=_e();if(t.length>0)return void L(t.join(". "));if(!c)throw new Error("Secret key required for minting");let n=g;if(!n){console.log("No contract selected, auto-initializing...");const e=(await Promise.resolve().then(r.t.bind(r,121,23))).Keypair.fromSecret(c);n=(await Ic.deployLocationNFTContract(e,"StellarGeoLinkNFT")).contractId,y(n),console.log("\u2705 Auto-initialized contract:",n)}const o=(await Promise.resolve().then(r.t.bind(r,121,23))).Keypair.fromSecret(c),s=await Ic.mintLocationNFT(n,l,{name:k.name,description:k.description,ipfs_hash:k.ipfsHash,filename:k.filename,attributes:k.attributes},A,o);console.log("NFT minted successfully:",s);const u={tokenId:s.tokenId,name:k.name,contractId:n,transactionHash:s.hash,status:s.status,ledger:s.latestLedger,location:A,imageUrl:Ic.buildIPFSUrl(k.ipfsHash,k.filename),stellarExpertUrl:"https://stellar.expert/explorer/testnet/tx/".concat(s.hash),contractUrl:"https://stellar.expert/explorer/testnet/contract/".concat(n)};console.log("Passing success data to parent:",u),a(u),localStorage.setItem("nftMintSuccess",JSON.stringify(u));try{await ke(u)}catch(e){console.warn("Failed to add NFT to database:",e)}T({name:"",description:"",ipfsHash:"",filename:"",attributes:[]}),await ye(),i&&i()}catch(t){console.error("Failed to mint NFT:",t),console.error("\u274c NFT minting failed: ".concat(t.message)),z({title:"NFT Minting Failed",message:Te(t),details:t.message,suggestions:Ee(t),onRetry:()=>{z(null),we()}})}},Se=async()=>{try{if(!he.secretKey.trim())throw new Error("Please enter your secret key");await p(he.secretKey),console.log("Upgraded to full access successfully"),de(!1),pe({secretKey:""})}catch(e){console.error("Failed to upgrade to full access:",e)}},ke=async e=>{try{console.log("\ud83d\udce1 Using centralized API service for NFT pinning");const t=await bc.post("/nft/pin",{collection_id:ee?parseInt(ee):null,latitude:e.location.latitude,longitude:e.location.longitude,radius_meters:e.location.radius,ipfs_hash:k.ipfsHash,filename:k.filename,server_url:k.serverUrl,smart_contract_address:e.contractId,rarity_requirements:{token_id:e.tokenId,transaction_hash:e.transactionHash,blockchain:"stellar_testnet"},is_active:!0});return console.log("\ud83d\udce4 Sending to database:",{ipfs_hash:k.ipfsHash,filename:k.filename,server_url:k.serverUrl}),console.log("\u2705 NFT added to database:",t.data),t.data}catch(t){throw console.error("\u274c Failed to add NFT to database:",t),t}},Te=e=>e.message.includes("Error(Contract, #2)")?"Token ID already exists. The system will automatically retry with a new ID.":e.message.includes("insufficient")?"Insufficient XLM balance. Please fund your account with testnet XLM.":e.message.includes("network")?"Network connection failed. Please check your internet connection.":e.message.includes("contract")?"Contract error. The contract may not be properly initialized.":"An unexpected error occurred during NFT minting.",Ee=e=>e.message.includes("insufficient")?['Fund your account with testnet XLM using the "Fund Account" button',"Visit Stellar Laboratory to get testnet XLM","Check your wallet balance"]:e.message.includes("contract")?['Try clicking "Verify Contract Ready" first',"Ensure the contract is properly deployed","Check the contract on StellarExpert"]:["Check your internet connection","Try again in a few moments","Contact support if the issue persists"];return s?c?(0,St.jsxs)(uu,{sx:{p:3,position:"relative",zIndex:10},children:[(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,children:"Real PIN NFT - Stellar Testnet"}),(0,St.jsx)(Bu,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Deploy, mint, and transfer NFTs on the Stellar blockchain testnet. Attempts real deployment first, falls back to realistic simulation if needed."}),(0,St.jsx)(n_,{severity:"info",sx:{mb:2},children:(0,St.jsxs)(Bu,{variant:"body2",children:[(0,St.jsx)("strong",{children:"Wallet Status:"})," Connected=",s?"Yes":"No",", PublicKey=",l||"None",", SecretKey=",c?"Available":"Not Available"]})}),R&&(0,St.jsx)(n_,{severity:"error",sx:{mb:2},children:R}),O&&(0,St.jsx)(n_,{severity:"success",sx:{mb:2},children:O}),g&&(0,St.jsxs)(n_,{severity:"success",sx:{mb:3},children:[(0,St.jsxs)(Bu,{variant:"body2",children:[(0,St.jsx)("strong",{children:"\u2705 Contract Ready:"})," ",(null===(n=f.find((e=>e.contractId===g)))||void 0===n?void 0:n.name)||"StellarGeoLinkNFT"]}),(0,St.jsx)(Bu,{variant:"body2",sx:{mt:1},children:(0,St.jsx)("a",{href:"https://stellar.expert/explorer/testnet/contract/".concat(g),target:"_blank",rel:"noopener noreferrer",style:{color:"#FFD700",textDecoration:"underline"},children:"\ud83d\udd17 View on StellarExpert"})})]}),(0,St.jsx)(tg,{sx:{mb:3},children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"NFT Action"}),(0,St.jsxs)(ev,{component:"fieldset",children:[(0,St.jsx)(Hy,{component:"legend",children:"Choose Action"}),(0,St.jsxs)(_E,{value:v,onChange:e=>b(e.target.value),children:[(0,St.jsx)(ew,{value:"mint",control:(0,St.jsx)(FE,{}),label:"Mint New NFT"}),(0,St.jsx)(ew,{value:"transfer",control:(0,St.jsx)(FE,{}),label:"Transfer Existing NFT"})]})]})]})}),"mint"===v&&(0,St.jsx)(tg,{sx:{mb:3},children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"Mint New NFT"}),(0,St.jsx)(n_,{severity:"info",sx:{mb:2},children:(0,St.jsxs)(Bu,{variant:"body2",children:[(0,St.jsx)("strong",{children:"\ud83d\ude80 One-Click Minting:"}),' Just fill in the details below and click "Mint NFT". The system will automatically handle contract setup and initialization.']})}),(0,St.jsxs)(Jm,{container:!0,spacing:2,children:[(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"NFT Name",value:k.name,onChange:e=>T(d(d({},k),{},{name:e.target.value})),fullWidth:!0,required:!0,error:!k.name||""===k.name.trim(),helperText:k.name&&""!==k.name.trim()?"Enter a unique name for your NFT":"NFT name is required"})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"Description",value:k.description,onChange:e=>T(d(d({},k),{},{description:e.target.value})),multiline:!0,rows:3,fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,children:(0,St.jsx)(Uv,{label:"IPFS Hash",value:k.ipfsHash,onChange:e=>T(d(d({},k),{},{ipfsHash:e.target.value})),fullWidth:!0,required:!0,error:!k.ipfsHash||""===k.ipfsHash.trim(),helperText:k.ipfsHash&&""!==k.ipfsHash.trim()?"Enter the IPFS hash for your NFT image":"IPFS hash is required"})}),(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,children:(0,St.jsx)(Uv,{label:"Filename",value:k.filename,onChange:e=>T(d(d({},k),{},{filename:e.target.value})),fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"Server URL",value:k.serverUrl,onChange:e=>T(d(d({},k),{},{serverUrl:e.target.value})),fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsxs)(ev,{fullWidth:!0,children:[(0,St.jsx)(Zy,{children:"Collection"}),(0,St.jsxs)(Lv,{value:ee||"",onChange:e=>{console.log("\ud83d\udd04 Collection selection changed:",e.target.value,"type:",typeof e.target.value),"new"===e.target.value?(console.log("\u2795 Opening new collection dialog"),ne(!0)):(console.log("\u2705 Setting selected collection to:",e.target.value),te(e.target.value))},label:"Collection",disabled:oe||0===$.length,MenuProps:{style:{zIndex:9999}},children:[console.log("\ud83c\udfa8 Rendering dropdown with collections:",$),console.log("\ud83c\udfaf Current selectedCollectionId:",ee,"type:",typeof ee),0===$.length&&(0,St.jsx)(mm,{value:"",disabled:!0,children:"Loading collections..."}),$.map((e=>(0,St.jsxs)(mm,{value:e.id.toString(),children:[e.name," (",e.rarity_level,")"]},e.id))),(0,St.jsx)(mm,{value:"new",children:(0,St.jsx)("em",{children:"+ Create New Collection"})})]})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,children:(0,St.jsx)(Uv,{label:"Radius (meters)",type:"number",value:P,onChange:e=>I(parseInt(e.target.value)||100),fullWidth:!0,required:!0,error:!P||P<=0,inputProps:{min:1,max:1e4},helperText:!P||P<=0?"Radius must be greater than 0":"Collection radius in meters (1-10000)"})}),(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,children:(0,St.jsx)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(vg,{}),onClick:()=>N(!0),fullWidth:!0,children:A.latitude?"Update Location":"Set Location"})}),(0,St.jsxs)(Jm,{item:!0,xs:12,children:[(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["Location: ",A.latitude?"".concat(A.latitude.toFixed(6),", ").concat(A.longitude.toFixed(6)):"Not set",A.latitude&&(0,St.jsxs)("span",{children:[" | Radius: ",A.radius,"m"]})]}),(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:'Location is automatically detected. Click "Update Location" to change it using the interactive map.'})]}),(0,St.jsxs)(Jm,{item:!0,xs:12,children:[(0,St.jsx)(Ap,{variant:"contained",startIcon:(0,St.jsx)(dE,{}),onClick:we,disabled:u||_e().length>0,fullWidth:!0,size:"large",children:u?(0,St.jsx)(Xd,{size:20}):"Mint NFT"}),_e().length>0&&(0,St.jsxs)(Bu,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:["Missing: ",_e().join(", ")]})]})]})]})}),"transfer"===v&&(0,St.jsx)(tg,{sx:{mb:3},children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"Transfer NFT"}),(0,St.jsxs)(Jm,{container:!0,spacing:2,children:[(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsxs)(ev,{fullWidth:!0,children:[(0,St.jsx)(Zy,{children:"Select NFT to Transfer"}),(0,St.jsx)(Lv,{value:(null===w||void 0===w?void 0:w.tokenId)||"",onChange:e=>{const t=x.find((t=>t.tokenId===e.target.value));S(t)},children:x.map((e=>(0,St.jsxs)(mm,{value:e.tokenId,children:[e.name," (#",e.tokenId,")"]},e.tokenId)))})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"Recipient Address",value:E.recipient,onChange:e=>C(d(d({},E),{},{recipient:e.target.value})),fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Ap,{variant:"contained",startIcon:(0,St.jsx)(hE,{}),onClick:async()=>{try{if(!c)throw new Error("Secret key required for transferring");if(!g||!w)throw new Error("Please select a contract and NFT");const e=(await Promise.resolve().then(r.t.bind(r,121,23))).Keypair.fromSecret(c),t=await Ic.transferLocationNFT(g,w.tokenId,l,E.recipient,E.fromLocation,E.toLocation,e);console.log("NFT transferred successfully:",t),M("\u2705 NFT transferred successfully on Stellar testnet! Token ID: ".concat(w.tokenId,", From: ").concat(l,", To: ").concat(E.recipient,", Transaction: ").concat(t.transactionHash,". View on StellarExpert: https://stellar.expert/explorer/testnet/tx/").concat(t.transactionHash)),setTimeout((()=>M("")),8e3),C({recipient:"",fromLocation:{latitude:0,longitude:0},toLocation:{latitude:0,longitude:0}}),await ye(),a&&a(t),i&&i()}catch(e){console.error("Failed to transfer NFT:",e),console.error("\u274c NFT transfer failed: ".concat(e.message))}},disabled:u||!g||!w,fullWidth:!0,children:u?(0,St.jsx)(Xd,{size:20}):"Transfer NFT"})})]})]})}),(0,St.jsx)(tg,{children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"Testnet Funding"}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["Your wallet address: ",(0,St.jsx)("strong",{children:l})]}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["To fund your account with testnet XLM, visit: ",(0,St.jsx)("br",{}),(0,St.jsx)("a",{href:"https://laboratory.stellar.org/#account-creator?network=testnet&address=".concat(l),target:"_blank",rel:"noopener noreferrer",children:"Stellar Laboratory - Account Creator"})]}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["View your account on StellarExpert: ",(0,St.jsx)("br",{}),(0,St.jsx)("a",{href:"https://stellar.expert/explorer/testnet/account/".concat(l),target:"_blank",rel:"noopener noreferrer",children:"\ud83d\udd17 View Account on StellarExpert"})]}),(0,St.jsx)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(zE,{}),onClick:async()=>{try{await h(l),console.log("Account funded successfully")}catch(e){console.error("Failed to fund account:",e)}},disabled:u,children:"Fund Account with Testnet XLM"})]})}),(0,St.jsxs)(Ng,{open:le,onClose:()=>ce(!1),maxWidth:"sm",fullWidth:!0,sx:{zIndex:9999},PaperProps:{sx:{zIndex:9999}},BackdropProps:{sx:{zIndex:9998}},children:[(0,St.jsx)(qg,{children:"Initialize Contract"}),(0,St.jsxs)($v,{children:[(0,St.jsx)(Bu,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Set up the deployed LocationNFT contract for use. The contract is already deployed on Stellar testnet and ready for minting NFTs."}),(0,St.jsxs)(Jm,{container:!0,spacing:2,sx:{mt:1},children:[(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"Contract Name",value:fe.name,onChange:e=>me(d(d({},fe),{},{name:e.target.value})),fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"Symbol",value:fe.symbol,onChange:e=>me(d(d({},fe),{},{symbol:e.target.value})),fullWidth:!0})})]})]}),(0,St.jsxs)(HS,{children:[(0,St.jsx)(Ap,{onClick:()=>ce(!1),children:"Cancel"}),(0,St.jsx)(Ap,{onClick:async()=>{try{if(console.log("Deploy contract - Wallet state:",{isConnected:s,publicKey:l,secretKey:c?"Available":"Not available"}),!s)throw new Error("Wallet not connected. Please connect your wallet first.");if(!c)throw new Error("Secret key not available. Please ensure your wallet is properly connected with full access.");const e=(await Promise.resolve().then(r.t.bind(r,121,23))).Keypair.fromSecret(c);console.log("Deploying contract with keypair:",e.publicKey());const t=await Ic.deployLocationNFTContract(e,fe.name);console.log("Contract deployed:",t),M("\u2705 Contract ready! Contract ID: ".concat(t.contractId,", Name: ").concat(t.name,", Symbol: ").concat(t.symbol,". The contract is deployed and ready for minting NFTs! View on StellarExpert: https://stellar.expert/explorer/testnet/contract/").concat(t.contractId)),setTimeout((()=>M("")),8e3),ce(!1),me({name:"StellarGeoLinkNFT",symbol:"SGL"}),await ge(),y(t.contractId),console.log("\u2705 Contract deployment complete. Contract is now available for use.")}catch(e){console.error("Failed to deploy contract:",e),console.error("\u274c Contract deployment failed: ".concat(e.message))}},variant:"contained",disabled:u,children:u?(0,St.jsx)(Xd,{size:20}):"Initialize Contract"})]})]}),(0,St.jsxs)(Ng,{open:!!F,onClose:()=>z(null),maxWidth:"sm",fullWidth:!0,sx:{zIndex:1e4},children:[(0,St.jsxs)(qg,{sx:{color:"error.main"},children:["\u274c ",null===F||void 0===F?void 0:F.title]}),(0,St.jsx)($v,{children:F&&(0,St.jsxs)(uu,{children:[(0,St.jsx)(Bu,{variant:"body1",sx:{mb:2},children:F.message}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",sx:{mb:2},children:[(0,St.jsx)("strong",{children:"Technical Details:"}),(0,St.jsx)("br",{}),(0,St.jsx)("code",{style:{fontSize:"0.8em",wordBreak:"break-all"},children:F.details})]}),(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"\ud83d\udca1 Suggestions:"}),(0,St.jsx)("ul",{children:null===(o=F.suggestions)||void 0===o?void 0:o.map(((e,t)=>(0,St.jsx)("li",{children:(0,St.jsx)(Bu,{variant:"body2",children:e})},t)))})]})}),(0,St.jsxs)(HS,{children:[(0,St.jsx)(Ap,{onClick:()=>z(null),children:"Close"}),(0,St.jsx)(Ap,{onClick:null===F||void 0===F?void 0:F.onRetry,variant:"contained",color:"primary",children:"Retry"})]})]}),(0,St.jsxs)(Ng,{open:D,onClose:()=>N(!1),maxWidth:"lg",fullWidth:!0,sx:{zIndex:1e4},children:[(0,St.jsx)(qg,{sx:{textAlign:"center",pb:2},children:"\ud83d\udccd Update NFT Location"}),(0,St.jsx)($v,{children:(0,St.jsxs)(uu,{sx:{mb:2},children:[(0,St.jsx)(Bu,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Search for an address or click on the map to set your NFT location"}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:1,mb:2},children:[(0,St.jsx)(Uv,{size:"small",placeholder:"Search for an address...",value:q,onChange:e=>H(e.target.value),onKeyPress:e=>"Enter"===e.key&&xe(),fullWidth:!0,InputProps:{startAdornment:(0,St.jsx)(Xv,{position:"start",children:(0,St.jsx)(tb,{})})}}),(0,St.jsx)(Ap,{variant:"outlined",onClick:xe,disabled:!q.trim(),children:"Search"})]}),X&&G.length>0&&(0,St.jsx)($h,{sx:{mb:2,maxHeight:200,overflow:"auto"},children:G.map(((e,t)=>(0,St.jsx)(uu,{sx:{p:1.5,cursor:"pointer",borderBottom:"1px solid #eee","&:hover":{backgroundColor:"#f5f5f5"},"&:last-child":{borderBottom:"none"}},onClick:()=>(e=>{try{const[t,r]=e.center;V&&(V.flyTo({center:[t,r],zoom:15,duration:1e3}),V._draggableMarker&&(V._draggableMarker.setLngLat([t,r]),J({latitude:r,longitude:t}))),Z(!1),H("")}catch(t){console.error("Error handling search result:",t),L("Failed to update map location. Please try again.")}})(e),children:(0,St.jsx)(Bu,{variant:"body2",fontWeight:"bold",children:e.place_name})},t)))}),(0,St.jsx)(uu,{ref:U,sx:{height:"400px",width:"100%",borderRadius:1,overflow:"hidden",border:"1px solid #ddd"}}),(0,St.jsxs)(uu,{sx:{mt:2,p:2,backgroundColor:"#f5f5f5",borderRadius:1},children:[(0,St.jsx)(Bu,{variant:"body2",fontWeight:"bold",children:"Selected Location:"}),Y?(0,St.jsxs)(Bu,{variant:"body2",sx:{fontFamily:"monospace"},children:[Y.latitude.toFixed(6),", ",Y.longitude.toFixed(6)]}):(0,St.jsxs)(Bu,{variant:"body2",sx:{fontFamily:"monospace"},children:[A.latitude.toFixed(6),", ",A.longitude.toFixed(6)]}),(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",children:"Drag the orange marker or click on the map to select a new location"})]})]})}),(0,St.jsxs)(HS,{children:[(0,St.jsx)(Ap,{onClick:()=>N(!1),children:"Cancel"}),(0,St.jsx)(Ap,{variant:"contained",onClick:()=>{try{if(V&&V._draggableMarker){const e=V._draggableMarker.getLngLat();j({latitude:e.lat,longitude:e.lng,radius:P}),N(!1),M("Location updated successfully!")}else L("Map not loaded. Please try again.")}catch(e){console.error("Error updating location:",e),L("Failed to update location. Please try again.")}},disabled:!V,children:"Update Location"})]})]}),(0,St.jsxs)(Ng,{open:re,onClose:()=>ne(!1),maxWidth:"sm",fullWidth:!0,children:[(0,St.jsx)(qg,{children:"Create New Collection"}),(0,St.jsx)($v,{children:(0,St.jsxs)(Jm,{container:!0,spacing:2,sx:{mt:1},children:[(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"Collection Name",value:ae.name,onChange:e=>se(d(d({},ae),{},{name:e.target.value})),fullWidth:!0,required:!0})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"Description",value:ae.description,onChange:e=>se(d(d({},ae),{},{description:e.target.value})),multiline:!0,rows:3,fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(Uv,{label:"Image URL",value:ae.image_url,onChange:e=>se(d(d({},ae),{},{image_url:e.target.value})),fullWidth:!0})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsxs)(ev,{fullWidth:!0,children:[(0,St.jsx)(Zy,{children:"Rarity Level"}),(0,St.jsxs)(Lv,{value:ae.rarity_level,onChange:e=>se(d(d({},ae),{},{rarity_level:e.target.value})),label:"Rarity Level",children:[(0,St.jsx)(mm,{value:"common",children:"Common"}),(0,St.jsx)(mm,{value:"rare",children:"Rare"}),(0,St.jsx)(mm,{value:"legendary",children:"Legendary"})]})]})})]})}),(0,St.jsxs)(HS,{children:[(0,St.jsx)(Ap,{onClick:()=>ne(!1),children:"Cancel"}),(0,St.jsx)(Ap,{variant:"contained",onClick:async()=>{try{console.log("\ud83d\udd0d Creating collection:",ae),console.log("\ud83d\udce1 Using centralized API service");const e=await bc.post("/nft/collections",ae);console.log("\ud83d\udce1 Create collection response status:",e.status),console.log("\u2705 Collection created:",e.data),Q((t=>[e.data.collection,...t])),te(e.data.collection.id.toString()),ne(!1),se({name:"",description:"",image_url:"",rarity_level:"common"})}catch(e){console.error("\u274c Failed to create collection:",e)}},disabled:!ae.name.trim(),children:"Create Collection"})]})]})]}):(console.log("Rendering secret key error, upgradeDialog state:",ue),(0,St.jsxs)(St.Fragment,{children:[(0,St.jsxs)(uu,{sx:{p:3},children:[(0,St.jsxs)(n_,{severity:"error",children:["Secret key not available. Your wallet is connected in view-only mode.",(0,St.jsx)("br",{}),(0,St.jsxs)("small",{children:["Current wallet state: Connected=",s?"Yes":"No",", PublicKey=",l||"None"]}),(0,St.jsx)("br",{}),(0,St.jsx)(Ap,{variant:"contained",color:"primary",onClick:()=>{console.log("Upgrade button clicked, setting upgradeDialog to true"),de(!0)},sx:{mt:2},children:"Upgrade to Full Access"})]}),(0,St.jsxs)(Bu,{variant:"caption",color:"text.secondary",children:["Debug: upgradeDialog = ",ue?"true":"false"]})]}),(0,St.jsxs)(Ng,{open:ue,onClose:()=>{console.log("Upgrade dialog closing"),de(!1)},maxWidth:"sm",fullWidth:!0,sx:{zIndex:1700},children:[(0,St.jsx)(qg,{children:"Upgrade to Full Access"}),(0,St.jsxs)($v,{children:[(0,St.jsx)(Bu,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Your wallet is currently in view-only mode. To deploy contracts and perform transactions, you need to provide your secret key to upgrade to full access."}),(0,St.jsx)(Uv,{label:"Secret Key",type:"password",value:he.secretKey,onChange:e=>pe(d(d({},he),{},{secretKey:e.target.value})),fullWidth:!0,placeholder:"Enter your secret key (starts with S...)",helperText:"Your secret key will be stored locally and used for transactions",sx:{mb:2}}),(0,St.jsx)(n_,{severity:"warning",sx:{mb:2},children:(0,St.jsxs)(Bu,{variant:"body2",children:[(0,St.jsx)("strong",{children:"Security Note:"})," Your secret key is stored locally in your browser. Make sure you're on a secure device and network."]})})]}),(0,St.jsxs)(HS,{children:[(0,St.jsx)(Ap,{onClick:()=>de(!1),children:"Cancel"}),(0,St.jsx)(Ap,{onClick:Se,variant:"contained",disabled:u||!he.secretKey.trim(),children:u?(0,St.jsx)(Xd,{size:20}):"Upgrade to Full Access"})]})]})]})):(0,St.jsx)(uu,{sx:{p:3},children:(0,St.jsx)(n_,{severity:"warning",children:"Please connect your wallet to use PIN NFT features."})})},NE=["children","value","index"],BE="pk.eyJ1Ijoic2VyZ2UzNjl4MzMiLCJhIjoiY20zZHh6M2h2MDVoZzJqcTdudXhidm5kdyJ9.31fpP6C_HjNaTEN3C0fDTg";nb().accessToken=BE;if("undefined"!==typeof document){const e=document.createElement("style");e.textContent="\n  .nft-image-marker {\n    width: 60px !important;\n    height: 60px !important;\n    cursor: pointer !important;\n    position: relative !important;\n    z-index: 1000 !important;\n    pointer-events: auto !important;\n    border-radius: 12px !important;\n    border: 3px solid #ffffff !important;\n    box-shadow: 0 4px 12px rgba(0,0,0,0.3) !important;\n    overflow: hidden !important;\n    transform: none !important;\n    transition: none !important;\n    will-change: auto !important;\n  }\n  \n  .nft-image-marker img,\n  .nft-image-marker div {\n    pointer-events: none !important;\n  }\n  \n  /* Ensure popups appear above everything */\n  .mapboxgl-popup {\n    z-index: 2000 !important;\n  }\n  \n  .mapboxgl-popup-content {\n    z-index: 2001 !important;\n  }\n  \n  .mapboxgl-popup-tip {\n    z-index: 2002 !important;\n  }\n  \n  /* Specific styling for NFT popups */\n  .nft-popup {\n    z-index: 3000 !important;\n  }\n  \n  .nft-popup .mapboxgl-popup-content {\n    z-index: 3001 !important;\n    border-radius: 12px !important;\n    box-shadow: 0 8px 24px rgba(0,0,0,0.3) !important;\n  }\n  \n  .nft-popup .mapboxgl-popup-tip {\n    z-index: 3002 !important;\n  }\n",document.head.appendChild(e)}const UE=e=>{switch(e){case"common":return"success";case"rare":return"info";case"legendary":return"warning";default:return"default"}};function VE(e){const{children:t,value:r,index:n}=e,o=a(e,NE);return(0,St.jsx)("div",d(d({role:"tabpanel",hidden:r!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},o),{},{children:r===n&&(0,St.jsx)(uu,{sx:{p:3},children:t})}))}function WE(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}const qE=()=>{var e,r,n,o,i,a,s,l,c,u,h,p,f,m,g,y,v;const{user:b}=wc(),{wallet:x,disconnectWallet:_,isConnected:w,balance:S,connectWalletViewOnly:k,clearWalletCompletely:T,publicKey:E,setUser:C}=Mc(),[A,j]=(0,t.useState)(!1),[P,I]=(0,t.useState)(0),[O,M]=(0,t.useState)([]),[R,L]=(0,t.useState)([]),[F,z]=(0,t.useState)([]),[D,N]=(0,t.useState)(!1),[B,U]=(0,t.useState)(""),[V,W]=(0,t.useState)(""),[q,H]=(0,t.useState)(null),[G,K]=(0,t.useState)(null),[X,Z]=(0,t.useState)(!1),[Y,J]=(0,t.useState)(!1),[$,Q]=(0,t.useState)(0),[ee,te]=(0,t.useState)(!1),[re,ne]=(0,t.useState)(!1),[oe,ie]=(0,t.useState)(!1),[ae,se]=(0,t.useState)(!1),[le,ce]=(0,t.useState)(!1),[ue,de]=(0,t.useState)(null),[he,pe]=(0,t.useState)(null),[fe,me]=(0,t.useState)(!1),[ge,ye]=(0,t.useState)({name:"",description:"",ipfs_hash:"",radius_meters:10,collection_id:"",address:"",latitude:null,longitude:null,smart_contract_address:""}),[ve,be]=(0,t.useState)(null),[xe,_e]=(0,t.useState)(!1),[we,Se]=(0,t.useState)(!1),[ke,Te]=(0,t.useState)(!1),[Ee,Ce]=(0,t.useState)(!1),[Ae,je]=(0,t.useState)(!1),[Pe,Ie]=(0,t.useState)(!1),[Oe,Me]=(0,t.useState)(0),[Re,Le]=(0,t.useState)(!1),[Fe,ze]=(0,t.useState)([]),[De,Ne]=(0,t.useState)(!1),[Be,Ue]=(0,t.useState)(null),[Ve,We]=(0,t.useState)(""),[qe,He]=(0,t.useState)("3d"),[Ge,Ke]=(0,t.useState)(""),[Xe,Ze]=(0,t.useState)(""),[Ye]=(0,t.useState)(1e3),[Je,$e]=(0,t.useState)(!1),[Qe,et]=(0,t.useState)(!1),[tt,rt]=(0,t.useState)(!1),[nt,ot]=(0,t.useState)(!1),[it,at]=(0,t.useState)(!1),[st,lt]=(0,t.useState)(!1),[ct,ut]=(0,t.useState)(null),dt=3e3,ht=(0,t.useRef)(null),pt=(0,t.useRef)(null),ft=(0,t.useRef)(null),mt=(0,t.useRef)(null),gt=(0,t.useRef)({}),yt=(0,t.useRef)({}),vt=(0,t.useRef)({}),bt=(0,t.useCallback)((async()=>{if(w&&!Re){console.log("Fetching user collection..."),Le(!0),N(!0);try{const e=await bc.get("/nft/user-collection");console.log("User collection response:",e.data);const t=(e.data.collection||e.data||[]).map((e=>{const t=e.nft||e,r=t.collection||{};return d(d({},t),{},{full_ipfs_url:t.ipfs_hash?"https://bronze-adjacent-barnacle-907.mypinata.cloud/ipfs/".concat(t.ipfs_hash):null,collection:d(d({},r),{},{full_image_url:r.image_url?"https://bronze-adjacent-barnacle-907.mypinata.cloud/ipfs/".concat(r.image_url):null})})}));L(t),console.log("User collection updated:",t.length,"NFTs")}catch(e){console.error("Error fetching user collection:",e),U("Failed to fetch your NFT collection."),L([])}finally{N(!1)}}}),[w,Re]),xt=(0,t.useCallback)((async()=>{if(!q||Pe)return void(q||U("Location not available. Please enable location services."));const e=Date.now();if(e-Oe<dt)console.log("Request too soon, skipping...");else{Ie(!0),Me(e),U(""),N(!0),je(!0);try{console.log("Fetching ALL NFTs globally with location:",q);const e=await bc.get("/nft/dashboard/nearby",{params:{latitude:q.latitude,longitude:q.longitude,radius:999999999}});console.log("Nearby NFTs API response:",e.data);const t=e.data.nfts.map((e=>{var t;return d(d({},e),{},{full_ipfs_url:e.ipfs_hash?"https://bronze-adjacent-barnacle-907.mypinata.cloud/ipfs/".concat(e.ipfs_hash):null,collection:d(d({},e.collection),{},{full_image_url:null!==(t=e.collection)&&void 0!==t&&t.image_url?"https://bronze-adjacent-barnacle-907.mypinata.cloud/ipfs/".concat(e.collection.image_url):null})})}));console.log("Processed NFTs:",t),M(t)}catch(t){console.error("Error fetching nearby NFTs:",t),U("Failed to fetch nearby NFTs.")}finally{Ie(!1),N(!1),je(!1)}}}),[q,Pe,Oe,dt]),_t=(0,t.useCallback)((async e=>{if(!e||Pe)return void(e||U("Location not available. Please enable location services."));const t=Date.now();if(t-Oe<dt)console.log("Request too soon, skipping...");else{Ie(!0),Me(t),U("");try{console.log("Fetching ALL NFTs globally with provided location:",e);const t=await bc.get("/nft/dashboard/nearby",{params:{latitude:e.latitude,longitude:e.longitude,radius:999999999}});console.log("Nearby NFTs API response (with location):",t.data);const r=t.data.nfts.map((e=>{var t;return d(d({},e),{},{full_ipfs_url:e.ipfs_hash?"https://bronze-adjacent-barnacle-907.mypinata.cloud/ipfs/".concat(e.ipfs_hash):null,collection:d(d({},e.collection),{},{full_image_url:null!==(t=e.collection)&&void 0!==t&&t.image_url?"https://bronze-adjacent-barnacle-907.mypinata.cloud/ipfs/".concat(e.collection.image_url):null})})}));console.log("Processed NFTs (with location):",r),M(r)}catch(r){console.error("Error fetching nearby NFTs:",r),U("Failed to fetch nearby NFTs.")}finally{Ie(!1)}}}),[Pe,Oe,dt]),wt=(0,t.useCallback)((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{var o,i;console.log("\ud83c\udfaf Creating single marker for NFT ".concat(e.id," at index ").concat(r));const a=n||vt;if(a.current[e.id])return void console.log("Marker for NFT ".concat(e.id," already exists, skipping creation"));if(!e.longitude||!e.latitude||isNaN(e.longitude)||isNaN(e.latitude)||!isFinite(e.longitude)||!isFinite(e.latitude))return void console.warn("Invalid base coordinates for NFT:",e.id,"Skipping marker creation.");let s=parseFloat(e.longitude),l=parseFloat(e.latitude);if("globe"===(null===(o=t.getProjection())||void 0===o?void 0:o.name)&&(s<-180&&(s+=360),s>180&&(s-=360),l<-90&&(l=-90),l>90&&(l=90),console.log("\ud83c\udf0d Globe projection: Normalized coordinates for NFT ".concat(e.id,":"),{lng:s,lat:l})),Math.abs(s)<=90&&Math.abs(l)>90){console.log("\ud83d\udd04 COORDINATE SWAP DETECTED for NFT ".concat(e.id,": Swapping lat/lng"));const t=s;s=l,l=t}if(Math.abs(s)>180||Math.abs(l)>90){console.log("\ud83d\udd04 INVALID COORDINATES for NFT ".concat(e.id,": Trying coordinate swap"));const t=s;s=l,l=t}if((Math.abs(s)>1e3||Math.abs(l)>1e3)&&(console.log("\ud83d\udea8 LARGE COORDINATES for NFT ".concat(e.id,": Possible UTM or other coordinate system"),{lng:s,lat:l}),console.log("\ud83d\udea8 These coordinates are likely in UTM or another system, not WGS84 GPS coordinates")),console.log("\ud83d\udd0d Raw coordinates for NFT ".concat(e.id,":"),{rawLongitude:e.longitude,rawLatitude:e.latitude,parsedLng:s,parsedLat:l,coordinateType:typeof e.longitude,isString:"string"===typeof e.longitude,stringLength:"string"===typeof e.longitude?e.longitude.length:"N/A"}),console.log("NFT ".concat(e.id," coordinates:"),{lat:l,lng:s,name:e.name,nftIndex:r,originalCoords:{lat:e.latitude,lng:e.longitude}}),(Math.abs(s)>180||Math.abs(l)>90)&&console.error("\ud83d\udea8 INVALID COORDINATES for NFT ".concat(e.id,":"),{lat:l,lng:s}),s>=-124&&s<=-114&&l>=32&&l<=42)console.log("\u2705 NFT ".concat(e.id," appears to be in California region"));else if(s>=-43&&s<=-42&&l>=-23&&l<=-22)console.log("\u2705 NFT ".concat(e.id," appears to be in Rio de Janeiro region"));else{console.log("\u2753 NFT ".concat(e.id," coordinates don't match expected regions:"),{lat:l,lng:s});const t=l,r=s;console.log("\ud83d\udd04 Testing swapped coordinates for NFT ".concat(e.id,":"),{lat:r,lng:t}),t>=-124&&t<=-114&&r>=32&&r<=42?console.log("\ud83d\udd04 SWAPPED: NFT ".concat(e.id," would be in California region if coordinates were swapped")):t>=-43&&t<=-42&&r>=-23&&r<=-22&&console.log("\ud83d\udd04 SWAPPED: NFT ".concat(e.id," would be in Rio de Janeiro region if coordinates were swapped"))}if(isNaN(l)||isNaN(s)||!isFinite(l)||!isFinite(s))return void console.warn("Invalid coordinates for NFT:",e.id,"Skipping marker creation.");if(l<-90||l>90||s<-180||s>180)return void console.warn("Invalid coordinate range for NFT ".concat(e.id,":"),{lat:l,lng:s});const c=document.createElement("div");if(c.className="nft-marker",c.style.width="40px",c.style.height="40px",c.style.borderRadius="8px",c.style.border="3px solid #fff",c.style.boxShadow="0 2px 8px rgba(0,0,0,0.3)",c.style.cursor="pointer",c.style.display="flex",c.style.alignItems="center",c.style.justifyContent="center",c.style.fontSize="12px",c.style.fontWeight="bold",c.style.color="#fff",c.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)",c.style.position="relative",c.style.zIndex="1000",e.ipfs_hash){const t=document.createElement("img");t.src="https://ipfs.io/ipfs/".concat(e.ipfs_hash),t.style.width="100%",t.style.height="100%",t.style.borderRadius="8px",t.style.objectFit="cover",t.onerror=()=>{console.log("Image failed to load:",t.src),c.style.background="linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 100%)",c.innerHTML=e.name?e.name.charAt(0).toUpperCase():"N"},c.appendChild(t)}else c.innerHTML=e.name?e.name.charAt(0).toUpperCase():"N";let u;c.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),u&&clearTimeout(u),u=setTimeout((()=>{console.log("NFT marker clicked:",e),Bt(e)}),200)})),c.addEventListener("dblclick",(r=>{r.preventDefault(),r.stopPropagation(),u&&(clearTimeout(u),u=null),console.log("NFT marker double-clicked, zooming in:",e),console.log("Map reference for double-click:",t),console.log("Map type:",t===mt.current?"overlay":"main"),t.flyTo({center:[s,l],zoom:18,duration:1e3})}));const d=new(nb().Marker)({element:c,draggable:!0}).setLngLat([s,l]).addTo(t);if("globe"===(null===(i=t.getProjection())||void 0===i?void 0:i.name)){setTimeout((()=>{d.setLngLat([s,l]),console.log("\ud83c\udf0d Globe projection: Repositioned marker for NFT ".concat(e.id," to:"),[s,l])}),100);const r=()=>{d.setLngLat([s,l]),console.log("\ud83c\udf0d Globe projection: Style loaded - repositioned marker for NFT ".concat(e.id))};t.isStyleLoaded()?r():t.once("style.load",r)}d._isStable=!0,d._lastUpdated=Date.now(),d._nftId=e.id,d.on("dragstart",(()=>{d._isDragging=!0,console.log("Started dragging NFT ".concat(e.id))})),d.on("dragend",(async()=>{var r,n;d._isDragging=!1,d._lastUpdated=Date.now(),d._wasRecentlyDragged=!0;const o=d.getLngLat();let i=parseFloat(o.lng.toFixed(8)),a=parseFloat(o.lat.toFixed(8));if("globe"===(null===(r=t.getProjection())||void 0===r?void 0:r.name)&&console.log("\ud83c\udf0d Globe projection detected - coordinates should be in WGS84"),console.log("Final drag coordinates for NFT ".concat(e.id,":"),{lng:i,lat:a,zoomLevel:t.getZoom(),projection:(null===(n=t.getProjection())||void 0===n?void 0:n.name)||"unknown",originalCoords:{lng:e.longitude,lat:e.latitude},coordinateChange:{lngDiff:i-parseFloat(e.longitude),latDiff:a-parseFloat(e.latitude)}}),Math.abs(i)>180||Math.abs(a)>90)return console.error("\ud83d\udea8 INVALID DRAG COORDINATES for NFT ".concat(e.id,":"),{lng:i,lat:a}),void console.error("\ud83d\udea8 Coordinates are outside valid WGS84 bounds");Math.abs(i)<.1&&Math.abs(a)<.1&&console.warn("\u26a0\ufe0f WARNING: NFT ".concat(e.id," coordinates are very close to 0,0 (Gulf of Guinea)"));try{const t=await bc.put("/nft/pinned/".concat(e.id),{longitude:i,latitude:a});console.log("Successfully updated NFT ".concat(e.id," coordinates:"),t.data);const r=O.findIndex((t=>t.id===e.id));-1!==r&&(O[r].longitude=i,O[r].latitude=a),setTimeout((()=>{d._wasRecentlyDragged=!1,console.log("\ud83d\udd04 Cleared recently dragged flag for NFT ".concat(e.id))}),15e3)}catch(B){console.error("Error updating NFT ".concat(e.id," coordinates:"),B)}})),console.log("\ud83c\udfaf Before storing marker ".concat(e.id," - currentMarkers ref:"),a.current),a.current[e.id]=d,console.log("\ud83c\udfaf After storing marker ".concat(e.id," - currentMarkers ref:"),a.current),console.log("NFT image marker created for NFT ".concat(e.id," at:"),[s,l]),console.log("Stored marker in currentMarkers:",Object.keys(a.current))}catch(B){console.error("Error creating marker for NFT ".concat(e.id,":"),B)}}),[vt,O]),kt=(0,t.useCallback)((function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{const o="cluster-".concat(r),i=n||vt;if(i.current[o])return void console.log("Cluster marker ".concat(o," already exists, skipping creation"));const a=document.createElement("div");a.className="cluster-marker",a.style.width="50px",a.style.height="50px",a.style.borderRadius="50%",a.style.border="4px solid #fff",a.style.boxShadow="0 4px 12px rgba(0,0,0,0.4)",a.style.cursor="pointer",a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.fontSize="16px",a.style.fontWeight="bold",a.style.color="#fff",a.style.background="linear-gradient(135deg, #ff6b6b 0%, #ff8e53 100%)",a.style.position="relative",a.style.zIndex="1000",a.innerHTML=e.nfts.length,a.addEventListener("click",(r=>{r.preventDefault(),r.stopPropagation(),t.flyTo({center:[e.centerLng,e.centerLat],zoom:12,duration:1e3})})),a.addEventListener("dblclick",(r=>{r.preventDefault(),r.stopPropagation(),t.flyTo({center:[e.centerLng,e.centerLat],zoom:18,duration:1e3})}));const s=new(nb().Marker)({element:a,draggable:!1}).setLngLat([e.centerLng,e.centerLat]).addTo(t);s._isStable=!0,s._lastUpdated=Date.now(),console.log("\ud83c\udfaf Before storing cluster ".concat(o," - currentMarkers ref:"),i.current),i.current[o]=s,console.log("\ud83c\udfaf After storing cluster ".concat(o," - currentMarkers ref:"),i.current),console.log("Cluster marker created for ".concat(e.nfts.length," NFTs at:"),[e.centerLng,e.centerLat]),console.log("Stored cluster marker in currentMarkers:",Object.keys(i.current))}catch(B){console.error("Error creating cluster ".concat(r,":"),B)}}),[vt]),Tt=(0,t.useCallback)(((e,t,r)=>{const n=t.getZoom();let o;o=n<6?.01:n<8?.005:.002,console.log("Creating clusters for ".concat(e.length," NFTs with zoom: ").concat(n,", distance: ").concat(o));const i=[],a=new Set;for(let s=0;s<e.length;s++){if(a.has(s))continue;const t=e[s];console.log("\ud83d\udd0d Processing NFT ".concat(s,": ").concat(t.id," at [").concat(t.longitude,", ").concat(t.latitude,"]"));const r=parseFloat(t.longitude),n=parseFloat(t.latitude),l={centerLng:r,centerLat:n,nfts:[t]};for(let i=s+1;i<e.length;i++){if(a.has(i))continue;const t=e[i],s=parseFloat(t.longitude),c=parseFloat(t.latitude);Math.sqrt(Math.pow(r-s,2)+Math.pow(n-c,2))<o&&(l.nfts.push(t),a.add(i))}i.push(l),a.add(s),console.log("\u2705 Created cluster for NFT ".concat(s," (").concat(t.id,") with ").concat(l.nfts.length," NFTs"))}console.log("Created ".concat(i.length," clusters:"),i.map((e=>({count:e.nfts.length,center:[e.centerLng,e.centerLat]})))),console.log("Processed ".concat(a.size," NFTs out of ").concat(e.length," total NFTs")),i.forEach(((e,n)=>{const o="cluster-".concat(n);console.log("\ud83c\udfaf Creating cluster marker ".concat(o," for ").concat(e.nfts.length," NFTs")),1===e.nfts.length?(console.log("\ud83c\udfaf Creating individual marker for single NFT: ".concat(e.nfts[0].id)),wt(e.nfts[0],t,0,r)):(console.log("\ud83c\udfaf Creating cluster marker for ".concat(e.nfts.length," NFTs")),kt(e,t,n,r))}))}),[wt,kt]),Et=(0,t.useCallback)(((e,t,r)=>{console.log("\ud83c\udfaf createIndividualMarkers called with ".concat(e.length," NFTs")),e.forEach(((e,n)=>{console.log("\ud83c\udfaf Processing NFT ".concat(n,": ").concat(e.id)),wt(e,t,n,r)}))}),[wt]),Ct=(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r="overlay"===e?mt:ft,n="overlay"===e?yt:gt,o=Math.random().toString(36).substr(2,9);if(console.log("[".concat(o,"] updateMapMarkers called: mapType=").concat(e,", forceUpdate=").concat(t,", markersCreated=").concat(tt,", markersLocked=").concat(nt)),console.log("[".concat(o,"] Pin marker protected: ").concat(ke,", pin marker exists: ").concat(!!ve)),console.log("[".concat(o,"] Current map reference:"),r.current),console.log("[".concat(o,"] Map type check:"),r===mt?"overlay":"main"),Ct._lastCall&&Date.now()-Ct._lastCall<100)return void console.log("[".concat(o,"] \ud83d\udeab Debouncing rapid call, skipping"));if(Ct._lastCall=Date.now(),ke&&ve)return void console.log("\ud83d\udea8 PIN MARKER IS PROTECTED - SKIPPING ALL MARKER UPDATES");if(!r.current)return void console.warn("Map not initialized, cannot add markers");if(!t&&tt)return void console.log("Marker updates disabled - markers are locked to coordinates");if(nt&&!t&&tt)return void console.log("Markers are locked to coordinates - no updates allowed");if(Je&&!t)return void console.log("User is interacting with map - no marker updates allowed");if(tt&&Object.keys(n.current).length>0&&!t)return void console.log("\ud83d\udeab Markers already exist and are positioned - preventing any updates");if(it&&!t)return void console.log("Markers are set to never update - no changes allowed");if(Ae)return void console.log("Map is already loading markers, skipping...");if(r.current._isUpdatingMarkers)return void console.log("Map is already updating markers, skipping...");if(tt&&Qe&&!t)return void console.log("Markers already created and stable, skipping update...");r.current._isUpdatingMarkers=!0;const i=r.current.getBounds(),a=r.current.getCenter(),s=r.current.getZoom();console.log("Map bounds:",i),console.log("Map center:",a),console.log("Current zoom:",s);try{if(!r.current.isStyleLoaded()){console.log("Map style not loaded, waiting..."),je(!0);const t=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;r.current&&r.current.isStyleLoaded()?(console.log("Style loaded on retry, updating markers..."),je(!1),Ct(e)):n<5?(console.log("Style not ready, retrying in ".concat(500*n,"ms...")),setTimeout((()=>t(n+1)),500*n)):(console.warn("Style still not loaded after multiple attempts, proceeding anyway"),je(!1),Ct(e))};return void setTimeout((()=>t()),1e3)}if((t||!tt||0===Object.keys(vt.current).length)&&!nt){const e=Date.now();Object.entries(vt.current).forEach((t=>{let[r,n]=t;n._lastUpdated&&e-n._lastUpdated<5e3?console.log("Preserving recently updated marker: ".concat(r)):n.remove()}));const t={};Object.entries(vt.current).forEach((r=>{let[n,o]=r;o._lastUpdated&&e-o._lastUpdated<5e3&&(t[n]=o)})),vt.current=t}console.log("NFT markers cleared, pin marker preserved"),console.log("Pin marker protected:",ke),console.log("Pin marker exists:",!!ve);const i=r.current.getCenter(),a=r.current.getBounds();console.log("Map center:",i),console.log("Map bounds:",a),console.log("Number of NFTs to place:",O.length),console.log("Nearby NFTs data:",O);const s=r.current.getZoom();console.log("Creating markers for ".concat(O.length," NFTs with zoom-based clustering (zoom: ").concat(s.toFixed(2),")")),console.log("\ud83d\udd0d nearbyNFTs data:",O),console.log("\ud83d\udd0d nearbyNFTs length:",O.length);if(Object.values(n.current).some((e=>e&&e._wasRecentlyDragged)))return void console.log("[".concat(o,"] \ud83d\udeab Recently dragged markers detected, skipping all marker updates"));if(tt&&Object.keys(n.current).length>0&&!t)return void console.log("[".concat(o,"] \ud83d\udeab Markers already exist, preventing recreation. Current markers:"),Object.keys(n.current));const l=Object.keys(n.current).length>0,c=t||!l;if(Object.values(n.current).some((e=>e._lastUpdated&&Date.now()-e._lastUpdated<500))&&!t)return void console.log("[".concat(o,"] \u2705 Markers were just created, skipping clearing"));if(!c)return console.log("[".concat(o,"] \u2705 Markers already exist, skipping clearing")),void console.log("[".concat(o,"] \u2705 Current markers:"),Object.keys(n.current));{console.log("[".concat(o,"] \ud83d\uddd1\ufe0f Clearing existing markers for recreation...")),console.log("[".concat(o,"] \ud83d\uddd1\ufe0f Current markers before clearing:"),Object.keys(n.current)),console.log("[".concat(o,"] \ud83d\uddd1\ufe0f needsRecreation: ").concat(c,", hasExistingMarkers: ").concat(l,", forceUpdate: ").concat(t)),Object.values(n.current).forEach((e=>{if(e&&"function"===typeof e.remove){if(e._wasRecentlyDragged)return void console.log("\ud83d\udeab Preserving recently dragged marker: ".concat(e._nftId||"unknown"));e.remove()}}));const e=r.current.getContainer().querySelectorAll(".cluster-marker, .nft-marker");console.log("[".concat(o,"] \ud83d\uddd1\ufe0f Found ").concat(e.length," orphaned markers to remove")),e.forEach((e=>{e&&e.parentNode&&e.parentNode.removeChild(e)})),console.log("[".concat(o,"] \ud83d\uddd1\ufe0f Before clearing - currentMarkers ref:"),n.current),console.log("[".concat(o,"] \ud83d\uddd1\ufe0f Before clearing - currentMarkers keys:"),Object.keys(n.current)),n.current={},console.log("[".concat(o,"] \ud83d\uddd1\ufe0f After clearing - currentMarkers ref:"),n.current),console.log("[".concat(o,"] \ud83d\uddd1\ufe0f After clearing - currentMarkers keys:"),Object.keys(n.current)),console.log("[".concat(o,"] \ud83d\uddd1\ufe0f Markers cleared, current count:"),Object.keys(n.current).length)}s<10?(console.log("[".concat(o,"] \ud83d\udd0d Zoomed out - creating clusters (zoom:"),s,")"),Tt(O,r.current,n),console.log("[".concat(o,"] \ud83d\udd0d After cluster creation, markers:"),Object.keys(n.current)),console.log("[".concat(o,"] \ud83d\udd0d Total markers stored:"),Object.keys(n.current).length),console.log("[".concat(o,"] \ud83d\udd0d currentMarkers ref after cluster creation:"),n.current)):(console.log("[".concat(o,"] \ud83d\udd0d Zoomed in - creating individual markers (zoom:"),s,")"),console.log("[".concat(o,"] \ud83d\udd0d Number of NFTs to create individual markers for:"),O.length),Et(O,r.current,n),console.log("[".concat(o,"] \ud83d\udd0d After individual marker creation, markers:"),Object.keys(n.current)),console.log("[".concat(o,"] \ud83d\udd0d Total markers stored:"),Object.keys(n.current).length),console.log("[".concat(o,"] \ud83d\udd0d currentMarkers ref after individual creation:"),n.current)),console.log("[".concat(o,"] \u2705 Setting markersCreated to true")),rt(!0),console.log("[".concat(o,"] \ud83d\udd12 LOCKING markers to prevent any future updates")),at(!0)}catch(B){console.error("Error in updateMapMarkers:",B)}finally{r.current&&(r.current._isUpdatingMarkers=!1),N(!1),je(!1)}}),[O,ft,mt,gt,yt,tt,nt,Qe,Je,it,ke,ve,Tt,Et,Ae]),At=(0,t.useCallback)((async()=>{console.log("\ud83d\udd0d applyFilters called"),console.log("\ud83d\udd0d Current filter state:",{selectedCollection:Ge,selectedRarity:Xe,radiusFilter:Ye}),console.log("\ud83d\udd0d Current nearbyNFTs count:",O.length);try{N(!0);const e={latitude:(null===q||void 0===q?void 0:q.latitude)||(null===q||void 0===q?void 0:q.lat),longitude:(null===q||void 0===q?void 0:q.longitude)||(null===q||void 0===q?void 0:q.lng),radius:999999999};if(!e.latitude||!e.longitude)return console.log("\ud83d\udd0d No valid coordinates, using existing nearbyNFTs"),U("Location not available for filtering. Please enable location access."),void N(!1);Ge&&(e.collection_id=Ge,console.log("\ud83d\udd0d Added collection filter:",Ge)),Xe&&(e.rarity_level=Xe,console.log("\ud83d\udd0d Added rarity filter:",Xe)),console.log("\ud83d\udd0d Applying filters with params:",e),console.log("\ud83d\udd0d Filter state:",{selectedCollection:Ge,selectedRarity:Xe,radiusFilter:Ye});const t=await bc.get("/nft/nearby",{params:e});console.log("\ud83d\udd0d Filter API response:",t.data);const r=t.data.nfts||[];console.log("\ud83d\udd0d Filtered NFTs count:",r.length),M(r),console.log("\ud83d\udd0d Resetting marker states for filter update"),et(!1),ot(!1),at(!1),console.log("\ud83d\udd0d Calling updateMapMarkers with filtered NFTs:",r.length),Ct("main",!0),W("Found ".concat(r.length," NFTs matching your filters"))}catch(B){console.error("Error applying filters:",B),U("Failed to apply filters")}finally{N(!1)}}),[Ge,Xe,Ye,O,N,U,M,W,Ct,null===q||void 0===q?void 0:q.lat,null===q||void 0===q?void 0:q.latitude,null===q||void 0===q?void 0:q.lng,null===q||void 0===q?void 0:q.longitude]),jt=(0,t.useCallback)((()=>new class{onAdd(e){this._map=e,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl mapboxgl-ctrl-group",this._container.style.background="white",this._container.style.padding="10px",this._container.style.borderRadius="4px",this._container.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)",this._container.style.minWidth="200px",this._container.innerHTML='\n          <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; cursor: pointer;" id="collections-header">\n            <div style="font-weight: bold; color: #333;">\ud83d\udcda Collections</div>\n            <div style="font-size: 14px; color: #666;" id="collections-toggle">\u25b6</div>\n          </div>\n          <div id="collections-content" style="display: none; flex-direction: column; gap: 10px;">\n            <div style="margin-bottom: 10px;">\n              <label style="display: block; font-size: 12px; font-weight: bold; margin-bottom: 5px;">Collection</label>\n              <select id="nft-collection-filter" style="width: 100%; padding: 5px; border: 1px solid #ccc; border-radius: 3px;">\n                <option value="">All Collections</option>\n              </select>\n            </div>\n            <div style="margin-bottom: 10px;">\n              <label style="display: block; font-size: 12px; font-weight: bold; margin-bottom: 5px;">Rarity</label>\n              <select id="nft-rarity-filter" style="width: 100%; padding: 5px; border: 1px solid #ccc; border-radius: 3px;">\n                <option value="">All Rarities</option>\n                <option value="common">Common</option>\n                <option value="rare">Rare</option>\n                <option value="epic">Epic</option>\n                <option value="legendary">Legendary</option>\n              </select>\n            </div>\n            <button id="apply-nft-filters" style="width: 100%; padding: 8px; background: #007cba; color: white; border: none; border-radius: 3px; cursor: pointer;">\n              Apply Filters\n            </button>\n          </div>\n        ';const t=this._container.querySelector('[id="collections-header"]'),r=this._container.querySelector('[id="collections-content"]'),n=this._container.querySelector('[id="collections-toggle"]');t.addEventListener("click",(()=>{const e="none"!==r.style.display;r.style.display=e?"none":"flex",n.textContent=e?"\u25b6":"\u25bc"}));const o=this._container.querySelector("#nft-collection-filter"),i=this._container.querySelector("#nft-rarity-filter"),a=this._container.querySelector("#apply-nft-filters");return o.addEventListener("change",(()=>{console.log("Collection filter changed to:",o.value),Ke(o.value),At()})),i.addEventListener("change",(()=>{console.log("Rarity filter changed to:",i.value),Ze(i.value),At()})),a.addEventListener("click",(()=>{console.log("Apply filters button clicked"),At()})),this._container}onRemove(){this._container.parentNode.removeChild(this._container),this._map=void 0}}),[Ke,Ze,At]),Pt=()=>{const e={onAdd:function(e){this._map=e,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl mapboxgl-ctrl-group",this._container.style.background="rgba(255, 255, 255, 0.9)",this._container.style.borderRadius="8px",this._container.style.padding="10px",this._container.style.boxShadow="0 2px 10px rgba(0,0,0,0.1)",this._container.innerHTML='\n          <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; cursor: pointer;" id="3d-controls-header">\n            <div style="font-weight: bold; color: #333;">\ud83c\udf0d 3D Globe Controls</div>\n            <div style="font-size: 14px; color: #666;" id="3d-controls-toggle">\u25b6</div>\n          </div>\n          <div id="3d-controls-content" style="display: none; flex-direction: column; gap: 8px;">\n            <button id="reset-view" style="padding: 5px 10px; border: 1px solid #ddd; border-radius: 4px; background: white; cursor: pointer;">\n              \ud83c\udfaf Reset View\n            </button>\n            <button id="orbit-earth" style="padding: 5px 10px; border: 1px solid #ddd; border-radius: 4px; background: white; cursor: pointer;">\n              \ud83c\udf0e Orbit Earth\n            </button>\n            <button id="toggle-terrain" style="padding: 5px 10px; border: 1px solid #ddd; border-radius: 4px; background: white; cursor: pointer;">\n              \ud83c\udfd4\ufe0f Toggle Terrain\n            </button>\n            <button id="toggle-buildings" style="padding: 5px 10px; border: 1px solid #ddd; border-radius: 4px; background: white; cursor: pointer;">\n              \ud83c\udfe2 Toggle Buildings\n            </button>\n            <button id="toggle-fog" style="padding: 5px 10px; border: 1px solid #ddd; border-radius: 4px; background: white; cursor: pointer;">\n              \ud83c\udf2b\ufe0f Toggle Fog\n            </button>\n            <div style="margin-top: 5px;">\n              <label style="font-size: 12px; color: #666;">Pitch: <span id="pitch-value">0\xb0</span></label><br>\n              <input type="range" id="pitch-slider" min="0" max="85" value="0" style="width: 100%; margin-top: 2px;">\n            </div>\n            <div style="margin-top: 5px;">\n              <label style="font-size: 12px; color: #666;">Bearing: <span id="bearing-value">0\xb0</span></label><br>\n              <input type="range" id="bearing-slider" min="0" max="360" value="0" style="width: 100%; margin-top: 2px;">\n            </div>\n          </div>\n        ';const t=this._container.querySelector('[id="3d-controls-header"]'),r=this._container.querySelector('[id="3d-controls-content"]'),n=this._container.querySelector('[id="3d-controls-toggle"]');t.addEventListener("click",(()=>{const e="none"!==r.style.display;r.style.display=e?"none":"flex",n.textContent=e?"\u25b6":"\u25bc"})),this._container.querySelector("#reset-view").addEventListener("click",(()=>{e.flyTo({center:[0,0],zoom:1,pitch:0,bearing:0,duration:2e3})})),this._container.querySelector("#orbit-earth").addEventListener("click",(()=>{let t=0;const r=()=>{t+=1,e.setBearing(t),t<360&&requestAnimationFrame(r)};r()}));let o=!0;this._container.querySelector("#toggle-terrain").addEventListener("click",(()=>{try{o?(e.setTerrain(null),o=!1,this._container.querySelector("#toggle-terrain").textContent="\ud83c\udfd4\ufe0f Enable Terrain"):(e.setTerrain({source:"mapbox-dem",exaggeration:1.5}),o=!0,this._container.querySelector("#toggle-terrain").textContent="\ud83c\udfd4\ufe0f Disable Terrain")}catch(B){console.warn("Terrain toggle failed:",B.message),this._container.querySelector("#toggle-terrain").textContent="\ud83c\udfd4\ufe0f Terrain Unavailable"}}));let i=!0;this._container.querySelector("#toggle-buildings").addEventListener("click",(()=>{i?(e.setLayoutProperty("3d-buildings","visibility","none"),i=!1,this._container.querySelector("#toggle-buildings").textContent="\ud83c\udfe2 Show Buildings"):(e.setLayoutProperty("3d-buildings","visibility","visible"),i=!0,this._container.querySelector("#toggle-buildings").textContent="\ud83c\udfe2 Hide Buildings")}));let a=!0;this._container.querySelector("#toggle-fog").addEventListener("click",(()=>{try{a?(e.setFog(null),a=!1,this._container.querySelector("#toggle-fog").textContent="\ud83c\udf2b\ufe0f Enable Fog"):(e.setFog({color:"rgb(186, 210, 235)","high-color":"rgb(36, 92, 223)","horizon-blend":.02,"space-color":"rgb(11, 11, 25)","star-intensity":.6}),a=!0,this._container.querySelector("#toggle-fog").textContent="\ud83c\udf2b\ufe0f Disable Fog")}catch(B){console.warn("Fog toggle failed:",B.message),this._container.querySelector("#toggle-fog").textContent="\ud83c\udf2b\ufe0f Fog Unavailable"}}));const s=this._container.querySelector("#pitch-slider"),l=this._container.querySelector("#pitch-value");s.addEventListener("input",(t=>{const r=parseInt(t.target.value);e.setPitch(r),l.textContent=r+"\xb0"}));const c=this._container.querySelector("#bearing-slider"),u=this._container.querySelector("#bearing-value");return c.addEventListener("input",(t=>{const r=parseInt(t.target.value);e.setBearing(r),u.textContent=r+"\xb0"})),e.on("pitch",(()=>{const t=Math.round(e.getPitch());s.value=t,l.textContent=t+"\xb0"})),e.on("bearing",(()=>{const t=Math.round(e.getBearing());c.value=t,u.textContent=t+"\xb0"})),this._container},onRemove:function(){this._container.parentNode.removeChild(this._container),this._map=void 0}};return e},It=(0,t.useCallback)(((e,t)=>{const r="overlay"===t?mt:ft;if(r.current)return void console.log("Map already initialized for",t);console.log("Initializing map for",t,"with container:",e),console.log("Mapbox token check:","Token exists"),console.log("Token value:","pk.eyJ1Ijoic2VyZ2UzNjl4MzMiLCJhIjoiY20zZHh6M2h2MDVoZzJqcTdudXhidm5kdyJ9.31fpP6C_HjNaTEN3C0fDTg".substring(0,10)+"..."),console.log("Mapbox token found, initializing map...");const n=q?[q.longitude,q.latitude]:[0,0];try{r.current=new(nb().Map)({container:e,style:"mapbox://styles/mapbox/satellite-streets-v12",center:n,zoom:1,pitch:0,bearing:0,projection:"globe",antialias:!0,optimizeForTerrain:!0,maxPitch:85,maxZoom:22,minZoom:0,maxBounds:[[-180,-85],[180,85]],renderWorldCopies:!1,interactive:!0,globe:{enableAtmosphere:!0,atmosphereColor:"#FFD700",atmosphereIntensity:.3,enableStars:!0,starIntensity:.5}}),console.log("Map created for",t),r.current.on("load",(()=>{console.log("Map loaded for",t);const e=new(nb().NavigationControl)({showCompass:!0,showZoom:!0,visualizePitch:!0,showFullscreen:!0});r.current.addControl(e,"top-right"),setTimeout((()=>{r.current.getContainer().querySelectorAll(".mapboxgl-ctrl-top-right").forEach((e=>{e.style.top="80px"}));r.current.getContainer().querySelectorAll(".mapboxgl-ctrl-top-left").forEach((e=>{e.style.top="80px"}))}),100),r.current.addControl(new(nb().ScaleControl)({maxWidth:100,unit:"metric"}),"bottom-left");const n=Pt();r.current.addControl(n,"top-left"),r.current.addControl(new(nb().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0}),"top-right"),r.current.addControl(new(nb().FullscreenControl),"top-right"),r.current.on("dblclick",(e=>{console.log("Map double-clicked, zooming in to:",e.lngLat),r.current.flyTo({center:[e.lngLat.lng,e.lngLat.lat],zoom:18,duration:1e3})}));const o=jt();r.current.addControl(o,"top-left");try{r.current.getSource("composite")&&(r.current.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:10,paint:{"fill-extrusion-color":["interpolate",["linear"],["get","height"],0,"#87CEEB",50,"#4682B4",100,"#4169E1",200,"#0000CD"],"fill-extrusion-height":["case",["has","height"],["get","height"],0],"fill-extrusion-base":["case",["has","min_height"],["get","min_height"],0],"fill-extrusion-opacity":.8}}),console.log("Enhanced 3D buildings layer added"));try{r.current.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14}),r.current.setTerrain({source:"mapbox-dem",exaggeration:1.5}),console.log("3D terrain added successfully")}catch(i){console.warn("3D terrain not supported:",i.message)}try{r.current.setFog({color:"rgb(186, 210, 235)","high-color":"rgb(36, 92, 223)","horizon-blend":.02,"space-color":"rgb(11, 11, 25)","star-intensity":.6}),console.log("Fog effects added successfully")}catch(a){console.warn("Fog effects not supported:",a.message)}console.log("3D terrain, fog, and enhanced buildings added")}catch(B){console.log("Could not add 3D layers:",B.message)}console.log("Zoom-based marker updates disabled to prevent infinite loops"),r.current.on("movestart",(()=>{$e(!0),console.log("User started moving map - BLOCKING marker updates")})),r.current.on("moveend",(()=>{$e(!1),console.log("User finished moving map - allowing marker updates")})),r.current.on("zoomstart",(()=>{console.log("Zoom started - BLOCKING marker updates"),$e(!0)})),r.current.on("dragstart",(()=>{$e(!0),console.log("Map drag started - BLOCKING marker updates")})),r.current.on("dragend",(()=>{$e(!1),console.log("Map drag ended - allowing marker updates")})),r.current.on("zoomend",(()=>{console.log("Zoom ended"),$e(!1);Object.values(vt.current).some((e=>e&&e._wasRecentlyDragged))?console.log("\ud83d\udeab Recently dragged markers detected - skipping zoom end marker updates"):ke&&ve&&console.log("\ud83d\udea8 PIN MARKER IS PROTECTED - IGNORING ZOOM END")})),r.current.on("error",(e=>{var r;console.error("Map error for",t,":",e),U("Map error: ".concat((null===(r=e.error)||void 0===r?void 0:r.message)||"Unknown error"))})),setTimeout((()=>{console.log("Style loaded via timeout for",t),O.length>0&&(console.log("Updating markers for",O.length,"NFTs"),"main"===t&&(console.log("Updating main map markers..."),Ct(t,!0)),"overlay"===t&&(console.log("Updating overlay map markers..."),Ct(t,!0)))}),1e3)}))}catch(B){console.error("Error initializing map:",B),U("Failed to initialize map: ".concat(B.message))}}),[q,O,Ct,ke,ve,jt]);(0,t.useEffect)((()=>{if(b&&"nft_manager"!==b.role&&"admin"!==b.role)return U("You do not have permission to view this dashboard."),void N(!1);const e=setTimeout((()=>{N(!1)}),5e3);if(w&&null!==x&&void 0!==x&&x.publicKey&&!Pe&&!D){const t=setTimeout((()=>{bt()}),500);return()=>{clearTimeout(e),clearTimeout(t)}}return()=>clearTimeout(e)}),[b,w,null===x||void 0===x?void 0:x.publicKey,bt,D,Pe]),(0,t.useEffect)((()=>{w||Le(!1)}),[w]),(0,t.useEffect)((()=>{w&&null!==x&&void 0!==x&&x.publicKey&&!Re&&(console.log("Wallet connected, fetching user collection..."),bt())}),[w,null===x||void 0===x?void 0:x.publicKey,Re,bt]),(0,t.useEffect)((()=>{b?(console.log("NFTDashboard: Setting user in wallet context:",b),C(b)):(console.log("NFTDashboard: No user, clearing wallet context"),C(null))}),[b,C]),(0,t.useEffect)((()=>{if(X&&G){const e=()=>{if(document.getElementById("nft-details-mini-map")&&!he){if(he&&"function"===typeof he.remove)try{he.remove()}catch(B){console.warn("Error removing existing mini map:",B)}const e=new(nb().Map)({container:"nft-details-mini-map",style:"mapbox://styles/mapbox/streets-v11",center:[parseFloat(G.longitude),parseFloat(G.latitude)],zoom:15,interactive:!0});new(nb().Marker)({color:"red"}).setLngLat([parseFloat(G.longitude),parseFloat(G.latitude)]).addTo(e),e.on("load",(()=>{e.addSource("nft-radius",{type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:[parseFloat(G.longitude),parseFloat(G.latitude)]}}}),e.addLayer({id:"nft-radius-circle",type:"circle",source:"nft-radius",paint:{"circle-radius":{stops:[[0,0],[20,G.radius_meters||50]],base:2},"circle-color":"#ff0000","circle-opacity":.2,"circle-stroke-color":"#ff0000","circle-stroke-width":2}})})),pe(e)}};setTimeout(e,100)}return()=>{if(he&&"function"===typeof he.remove){try{he.remove()}catch(B){console.warn("Error removing mini map:",B)}pe(null)}}}),[X,G,he]),(0,t.useEffect)((()=>{if(console.log("NFTDashboard: Auto-connect effect triggered",{user:b?{id:b.id,email:b.email,public_key:b.public_key,allKeys:Object.keys(b)}:null,isConnected:w,publicKey:E}),b&&b.public_key){console.log("NFTDashboard: User logged in with public key:",b.public_key),console.log("NFTDashboard: Current wallet connection state:",{isConnected:w,publicKey:E}),console.log("NFTDashboard: Has manually disconnected:",A);const e=!w||E&&E!==b.public_key;if(E&&E!==b.public_key&&(console.log("NFTDashboard: Different user detected, clearing wallet completely"),T(),j(!1)),e&&!A){console.log("NFTDashboard: Wallet needs reconnection:",{needsReconnection:e,currentPublicKey:E,userPublicKey:b.public_key});const t=setTimeout((()=>{!w||E&&E!==b.public_key?(console.log("NFTDashboard: Attempting wallet auto-connection..."),k(b.public_key).catch((e=>{console.error("NFTDashboard: Auto-connection failed, will retry:",e),setTimeout((()=>{(!w||E&&E!==b.public_key)&&(console.log("NFTDashboard: Retrying wallet auto-connection..."),k(b.public_key))}),1e3)}))):console.log("NFTDashboard: Wallet already connected during timeout")}),1e3);return()=>clearTimeout(t)}A?console.log("NFTDashboard: User has manually disconnected, skipping auto-connection"):console.log("NFTDashboard: Wallet already connected to correct user")}else if(b&&!b.public_key){console.log("NFTDashboard: User has no public_key in profile, checking for saved wallet data...");const e=localStorage.getItem("stellar_public_key");if(e&&!w){console.log("NFTDashboard: Found saved wallet data, attempting auto-connection with saved public key:",e);const t=setTimeout((()=>{w||(console.log("NFTDashboard: Attempting auto-connection with saved public key..."),k(e).catch((e=>{console.error("NFTDashboard: Auto-connection with saved key failed:",e)})))}),1e3);return()=>clearTimeout(t)}console.log("NFTDashboard: No saved wallet data found or wallet already connected")}}),[b,w,E,k,T,A]),(0,t.useEffect)((()=>{w&&A&&(console.log("NFTDashboard: Wallet connected, resetting manual disconnect flag"),j(!1))}),[w,A,j]),(0,t.useEffect)((()=>{!b||"nft_manager"!==b.role&&"admin"!==b.role||navigator.geolocation&&(me(!0),navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:r}=e.coords;console.log("Auto-detected location:",{latitude:t,longitude:r}),H({latitude:t,longitude:r}),W("Location detected automatically!"),me(!1),setTimeout((()=>{W("")}),3e3),w&&null!==x&&void 0!==x&&x.publicKey&&_t({latitude:t,longitude:r})}),(e=>{console.log("Automatic location detection failed:",e.message),me(!1)}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5}))}),[b,w,x,_t]);(0,t.useEffect)((()=>{Q(0)}),[O]),(0,t.useEffect)((()=>{2===P&&ht.current&&!ft.current&&It(ht.current,"main")}),[P,It]),(0,t.useEffect)((()=>{if(ee){const e=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(console.log("Attempt ".concat(t," to initialize overlay map...")),pt.current&&null!==pt.current.offsetParent&&!mt.current){console.log("Container found and visible, initializing map...");try{It(pt.current,"overlay")}catch(B){console.error("Map initialization failed:",B),U("Failed to initialize map. Please check your Mapbox token.")}}else t<5?(console.log("Container not ready, retrying in ".concat(300*t,"ms...")),setTimeout((()=>e(t+1)),300*t)):(console.warn("Overlay map initialization failed after 5 attempts - container not ready"),U("Map failed to load. Please refresh the page and try again."))};setTimeout((()=>e()),500)}!ee&&mt.current&&(console.log("Cleaning up overlay map..."),mt.current.remove(),mt.current=null,yt.current={})}),[ee,It]),(0,t.useEffect)((()=>{ee&&mt.current&&O.length>0&&(console.log("Overlay map is ready, forcing marker update with",O.length,"NFTs"),setTimeout((()=>{mt.current&&mt.current.isStyleLoaded()&&Ct("overlay")}),1e3))}),[ee,O.length,Ct]),(0,t.useEffect)((()=>{O.length>0&&(console.log("Updating markers for",O.length,"NFTs"),ft.current&&(console.log("Updating main map markers..."),Ct("main",!0)),mt.current&&(console.log("Updating overlay map markers..."),Ct("overlay",!0)))}),[O,Ct]),(0,t.useEffect)((()=>{ft.current&&O.length>0&&!tt&&(console.log("Force creating initial markers..."),Ct("main",!0))}),[O.length,tt,Ct]),(0,t.useEffect)((()=>()=>{lt(!1)}),[]),(0,t.useEffect)((()=>{const e=localStorage.getItem("nftMintSuccess");if(e)try{const t=JSON.parse(e);console.log("Success overlay found in NFTDashboard:",t),ut(t)}catch(B){console.error("Error parsing saved success data:",B),localStorage.removeItem("nftMintSuccess")}}),[]);const Ot=()=>{U(""),W(""),navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:r}=e.coords,n={latitude:t,longitude:r};console.log("Manual location detection:",n),H(n),W("Location obtained successfully!"),setTimeout((()=>{W("")}),3e3),w&&_t(n)}),(e=>{console.error("Error getting user location:",e),U("Could not retrieve your current location. Please enable location services."),setTimeout((()=>{U("")}),5e3),ie(!0)}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5}):(U("Geolocation is not supported by your browser."),setTimeout((()=>{U("")}),5e3),ie(!0))},Mt=async()=>{if(!ge.address.trim())return void U("Please enter an address to search.");const e=await(async e=>{if(!e.trim())return null;Ce(!0);try{const t=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json?access_token=").concat(BE,"&limit=1"));if(!t.ok)throw new Error("Geocoding failed");const r=await t.json();if(r.features&&r.features.length>0){const[e,t]=r.features[0].center;return{latitude:t,longitude:e,address:r.features[0].place_name}}return null}catch(B){return console.error("Geocoding error:",B),U("Failed to find location for the address."),null}finally{Ce(!1)}})(ge.address);e&&(ye((t=>d(d({},t),{},{latitude:e.latitude,longitude:e.longitude}))),de(e),ft.current&&(Dt(e.longitude,e.latitude),ft.current.flyTo({center:[e.longitude,e.latitude],zoom:20,pitch:"3d"===qe?60:0,bearing:0,duration:2e3,essential:!0})),W("Location found: ".concat(e.address)))},Rt=(0,t.useCallback)((async()=>{try{const e=await bc.get("/nft/collections");z(e.data||[])}catch(e){console.error("Error fetching collections:",e)}}),[]);(0,t.useEffect)((()=>{Rt()}),[Rt]),(0,t.useEffect)((()=>{ae&&F.length>0&&!ge.collection_id&&ye((e=>d(d({},e),{},{collection_id:F[0].id})))}),[ae,F,ge.collection_id]);const Lt=e=>{const[t,r]=e.center;ye((n=>d(d({},n),{},{address:e.place_name,latitude:r,longitude:t}))),ze([]),Ne(!1),ft.current&&(Dt(t,r),ft.current.flyTo({center:[t,r],zoom:20,pitch:"3d"===qe?60:0,bearing:0,duration:2e3,essential:!0})),W("Location found: ".concat(e.place_name))},Ft=e=>{e.target.closest(".search-container")||Ne(!1)},zt=e=>{if(He(e),ft.current){switch(e){case"2d":ft.current.setStyle("mapbox://styles/mapbox/streets-v12"),ft.current.easeTo({pitch:0,bearing:0,duration:1e3});break;case"3d":ft.current.setStyle("mapbox://styles/mapbox/satellite-streets-v12"),ft.current.easeTo({pitch:60,bearing:0,duration:1e3});break;case"satellite":ft.current.setStyle("mapbox://styles/mapbox/satellite-v9"),ft.current.easeTo({pitch:0,bearing:0,duration:1e3})}"3d"===e&&setTimeout((()=>{if(ft.current&&!ft.current.getLayer("3d-buildings"))try{const e=ft.current.getStyle().sources;e&&e.composite&&e.composite.tiles&&ft.current.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["case",["has","height"],["get","height"],0],"fill-extrusion-base":["case",["has","min_height"],["get","min_height"],0],"fill-extrusion-opacity":.6}})}catch(B){console.log("3D buildings not available for this style:",B)}}),1e3)}},Dt=(e,t)=>{if(console.log("\ud83d\udea8 addPinMarker called with coordinates:",{lng:e,lat:t}),console.log("\ud83d\udea8 Current pinMarker state:",ve),console.log("\ud83d\udea8 Pin marker locked:",xe),console.log("\ud83d\udea8 Is dragging pin:",we),console.log("\ud83d\udea8 Pin marker protected:",ke),console.log("\ud83d\udea8 Stack trace:",(new Error).stack),ke)return void console.log("\ud83d\udea8 PIN MARKER IS PROTECTED - BLOCKING RECREATION");if(xe&&ve||we)return void console.log("\ud83d\udea8 Pin marker is locked or being dragged, not recreating");if(ve&&ue){const r=ue.longitude,n=ue.latitude,o=1e-6;if(Math.abs(e-r)<o&&Math.abs(t-n)<o)return void console.log("Pin marker coordinates are the same, not recreating")}if(ve&&xe)return void console.log("Pin marker is locked and exists, not recreating");if(ve&&!ke)console.log("Removing existing pin marker"),ve._lockInterval&&clearInterval(ve._lockInterval),ve.remove(),be(null);else if(ve&&ke)return void console.log("\ud83d\udea8 PIN MARKER IS PROTECTED - NOT REMOVING");if(!e||!t||isNaN(e)||isNaN(t))return console.error("Invalid coordinates for pin marker:",{lng:e,lat:t}),void U("Invalid coordinates for pin marker");const r=document.createElement("div");r.innerHTML="\ud83d\udccd",r.style.fontSize="32px",r.style.cursor="move",r.style.zIndex="1000",r.style.filter="drop-shadow(0 2px 4px rgba(0,0,0,0.3))",r.style.transition="all 0.2s ease",console.log("Creating pin marker at coordinates:",[e,t]);const n=new(nb().Marker)({element:r,draggable:!0}).setLngLat([e,t]).addTo(ft.current);n.on("dragstart",(()=>{console.log("\ud83d\udd12 Pin drag started - ULTRA PROTECTION ACTIVATED"),Se(!0),Te(!0),r.style.transform="scale(1.3)",r.style.filter="drop-shadow(0 6px 12px rgba(0,0,0,0.5))",r.style.zIndex="1001"})),n.on("drag",(()=>{const{lng:e,lat:t}=n.getLngLat();W("Dragging to: ".concat(t.toFixed(8),", ").concat(e.toFixed(8)))})),n.on("dragend",(()=>{console.log("\ud83d\udd12 Pin drag ended - MAINTAINING ULTRA PROTECTION");const{lng:e,lat:t}=n.getLngLat();console.log("Final drag coordinates:",{lng:e,lat:t}),r.style.transform="scale(1)",r.style.filter="drop-shadow(0 2px 4px rgba(0,0,0,0.3))",r.style.zIndex="1000",ye((r=>d(d({},r),{},{latitude:t,longitude:e}))),de({latitude:t,longitude:e}),console.log("\ud83d\udd12 Pin drag ended - coordinates updated:",{lat:t,lng:e}),console.log("\ud83d\udd12 Pin location state updated:",{latitude:t,longitude:e}),console.log("\ud83d\udd12 Form state should now have:",{latitude:t,longitude:e}),W("Pin positioned at: ".concat(t.toFixed(8),", ").concat(e.toFixed(8))),setTimeout((()=>{Se(!1),console.log("\ud83d\udd12 Pin dragging flag reset, but PROTECTION REMAINS ACTIVE")}),2e3),Te(!0),n.setLngLat([e,t]),console.log("\ud83d\udd12 Pin marker locked to exact coordinates:",[e,t])})),be(n),_e(!0),Te(!0),console.log("\ud83d\udd12 Pin marker created, stored in state, locked, and PROTECTED");const o=setInterval((()=>{if(n&&ke){const r=n.getLngLat(),o=[e,t];(Math.abs(r.lng-o[0])>1e-6||Math.abs(r.lat-o[1])>1e-6)&&(console.log("\ud83d\udd12 Pin marker position corrected:",r,"->",o),n.setLngLat(o))}}),100);n._lockInterval=o},Nt=async e=>{if(q)if(w&&E){N(!0),U(""),W("");try{if(console.log("Collecting NFT on Stellar blockchain:",e),!e.smart_contract_address)throw new Error("NFT does not have a smart contract address. Cannot collect on blockchain.");const t=await Ic.transferLocationNFT(e.smart_contract_address,e.token_id||e.id,e.current_owner||e.owner,E,q.latitude,q.longitude);console.log("Real blockchain NFT collection successful:",t),await bc.post("/nft/collect",{nft_id:e.id,user_latitude:q.latitude,user_longitude:q.longitude,blockchain_transaction_hash:t.transactionHash,blockchain_ledger:t.ledger,blockchain_network:"testnet"}),W("NFT collected successfully! Transaction: ".concat(t.transactionHash)),xt(),Le(!1),bt()}catch(t){console.error("Error collecting NFT on blockchain:",t),U(t.message||"Failed to collect NFT on Stellar blockchain.")}finally{N(!1)}}else U("Wallet not connected. Please connect your wallet to collect NFTs.");else U("Location not available. Cannot collect NFT.")},Bt=e=>{K(e),Z(!0)},Ut=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let t;if(e)t=e;else{const e=Ve.trim();if(!e)return;console.log("Searching for:",e);const r=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json?access_token=").concat("pk.eyJ1Ijoic2VyZ2UzNjl4MzMiLCJhIjoiY20zZHh6M2h2MDVoZzJqcTdudXhidm5kdyJ9.31fpP6C_HjNaTEN3C0fDTg","&limit=1"));if(!r.ok)throw new Error("Search failed");const n=await r.json();if(!(n.features&&n.features.length>0))throw new Error("No results found");t=n.features[0]}const[r,n]=t.center;console.log("Navigating to:",t.place_name,"at",r,n),mt.current?mt.current.flyTo({center:[r,n],zoom:12,duration:2e3}):console.error("Overlay map not available for navigation"),We(""),ze([]),Ne(!1)}catch(B){console.error("Search error:",B),U("Search failed. Please try again.")}},Vt=()=>{te(!1),mt.current&&(mt.current.remove(),mt.current=null,yt.current={})};(0,t.useEffect)((()=>()=>{ft.current&&(ft.current.remove(),ft.current=null,gt.current={}),mt.current&&(mt.current.remove(),mt.current=null,yt.current={})}),[]),(0,t.useEffect)((()=>(document.addEventListener("mousedown",Ft),()=>{document.removeEventListener("mousedown",Ft)})),[]);const Wt=e=>{const t=document.querySelector(".map-search-container");t&&!t.contains(e.target)&&Ne(!1)};return(0,t.useEffect)((()=>{const e=setTimeout((()=>{document.addEventListener("mousedown",Wt)}),100);return()=>{clearTimeout(e),document.removeEventListener("mousedown",Wt)}}),[]),D&&!O.length&&!R.length&&w?(0,St.jsx)(dp,{maxWidth:"lg",sx:{mt:4,mb:4,display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:(0,St.jsx)(Xd,{})}):B&&!b?(0,St.jsx)(dp,{maxWidth:"lg",sx:{mt:4,mb:4},children:(0,St.jsx)(n_,{severity:"error",children:B})}):(0,St.jsxs)(dp,{maxWidth:"xl",sx:{mt:{xs:2,md:4},mb:{xs:2,md:4}},children:[(0,St.jsxs)(uu,{sx:{background:"linear-gradient(135deg, #000000 0%, #1a1a1a 100%)",borderRadius:2,p:{xs:2,md:3},mb:{xs:3,md:4},color:"white"},children:[(0,St.jsxs)(uu,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mb:{xs:2,md:3},flexDirection:{xs:"column",sm:"row"},gap:{xs:2,sm:0}},children:[(0,St.jsx)(Bu,{variant:"h4",component:"h1",sx:{color:"white",fontSize:{xs:"1.5rem",sm:"2rem",md:"2.125rem"}},children:"\ud83c\udf0d NFT Dashboard"}),(0,St.jsx)(Ap,{variant:"contained",href:"/enhanced-nft-dashboard",sx:{background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",color:"black",border:"1px solid #FFD700","&:hover":{background:"linear-gradient(135deg, #FFA500 0%, #E6C200 100%)",boxShadow:"0 4px 12px rgba(255, 215, 0, 0.4)"},fontSize:{xs:"0.875rem",md:"1rem"},px:{xs:2,md:3},fontWeight:"bold"},startIcon:(0,St.jsx)(L_,{}),children:"\ud83d\ude80 Enhanced Dashboard"})]}),(0,St.jsxs)(Jm,{container:!0,spacing:{xs:1,md:2},sx:{mb:{xs:2,md:3}},children:[(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,md:4,children:(0,St.jsxs)($h,{sx:{p:{xs:1.5,md:2},background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:2},children:[(0,St.jsxs)(uu,{sx:{display:"flex",alignItems:"center",mb:1,flexDirection:{xs:"column",sm:"row"},textAlign:{xs:"center",sm:"left"}},children:[(0,St.jsx)(Ag,{sx:{color:"white",mr:{xs:0,sm:1},mb:{xs:.5,sm:0},fontSize:{xs:18,md:20}}}),(0,St.jsx)(Bu,{variant:"h6",sx:{color:"white",fontWeight:"bold",fontSize:{xs:"0.9rem",md:"1rem"}},children:"Wallet Status"})]}),(0,St.jsx)(Bu,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.8)",mb:2,fontSize:{xs:"0.8rem",md:"0.875rem"},textAlign:{xs:"center",sm:"left"}},children:w?"\u2705 Connected":"\u274c Not Connected"}),w&&null!==x&&void 0!==x&&x.publicKey?(0,St.jsxs)(uu,{children:[(0,St.jsxs)(Bu,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.8)",display:"block",mb:1},children:[null===x||void 0===x||null===(e=x.publicKey)||void 0===e?void 0:e.substring(0,12),"..."]}),null!==S&&(0,St.jsxs)(Bu,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.8)",display:"block",mb:1},children:["Balance: ",S.toFixed(2)," XLM"]}),(0,St.jsx)(Ap,{variant:"outlined",onClick:()=>{console.log("NFTDashboard: Manual disconnect triggered"),j(!0),_()},size:"small",color:"error",sx:{borderColor:"rgba(255, 255, 255, 0.5)",color:"white","&:hover":{borderColor:"white"}},children:"Disconnect"})]}):(0,St.jsx)(Ap,{variant:"contained",startIcon:(0,St.jsx)(L_,{}),onClick:()=>ne(!0),size:"small",disabled:D,sx:{background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",color:"black","&:hover":{background:"linear-gradient(135deg, #FFA500 0%, #E6C200 100%)",boxShadow:"0 4px 12px rgba(255, 215, 0, 0.4)"},fontWeight:"bold"},children:D?"Connecting...":"Connect Wallet"})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,md:4,children:(0,St.jsxs)($h,{sx:{p:2,background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:2},children:[(0,St.jsxs)(uu,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,St.jsx)(GT,{sx:{color:"white",mr:1}}),(0,St.jsx)(Bu,{variant:"h6",sx:{color:"white",fontWeight:"bold"},children:"My Collection"})]}),(0,St.jsxs)(Bu,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.8)",mb:2},children:[R.length," NFTs collected"]}),(0,St.jsx)(Ap,{variant:"contained",startIcon:(0,St.jsx)(GT,{}),onClick:()=>I(1),size:"small",disabled:!w||!(null!==x&&void 0!==x&&x.publicKey),sx:{background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",color:"black","&:hover":{background:"linear-gradient(135deg, #FFA500 0%, #E6C200 100%)",boxShadow:"0 4px 12px rgba(255, 215, 0, 0.4)"},fontWeight:"bold"},children:"View Collection"})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,md:4,children:(0,St.jsxs)($h,{sx:{p:2,background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:2},children:[(0,St.jsxs)(uu,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,St.jsx)(_g,{sx:{color:"white",mr:1}}),(0,St.jsx)(Bu,{variant:"h6",sx:{color:"white",fontWeight:"bold"},children:"NFT Map"})]}),(0,St.jsxs)(Bu,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.8)",mb:2},children:[O.length," NFTs nearby"]}),(0,St.jsx)(Ap,{variant:"contained",startIcon:(0,St.jsx)(_g,{}),onClick:()=>{console.log("Opening fullscreen map dialog..."),te(!0),setTimeout((()=>{pt.current&&!mt.current&&(console.log("Manual map initialization triggered..."),It(pt.current,"overlay"))}),500)},size:"small",disabled:!w||!(null!==x&&void 0!==x&&x.publicKey)||!q,sx:{background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",color:"black","&:hover":{background:"linear-gradient(135deg, #FFA500 0%, #E6C200 100%)",boxShadow:"0 4px 12px rgba(255, 215, 0, 0.4)"},fontWeight:"bold"},children:"Open Map"})]})})]}),w&&(null===x||void 0===x?void 0:x.publicKey)&&(0,St.jsxs)(uu,{sx:{display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[(0,St.jsx)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(vg,{}),onClick:Ot,size:"small",disabled:D,sx:{borderColor:"rgba(255, 255, 255, 0.5)",color:"white","&:hover":{borderColor:"white",background:"rgba(255, 255, 255, 0.1)"}},children:fe?"Detecting...":"Get Location"}),(0,St.jsx)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(vg,{}),onClick:()=>ie(!0),size:"small",sx:{borderColor:"rgba(255, 255, 255, 0.5)",color:"white","&:hover":{borderColor:"white",background:"rgba(255, 255, 255, 0.1)"}},children:"Location Settings"}),(0,St.jsx)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(ET,{}),onClick:xt,size:"small",disabled:!q,sx:{borderColor:"rgba(255, 255, 255, 0.5)",color:"white","&:hover":{borderColor:"white",background:"rgba(255, 255, 255, 0.1)"}},children:"Find Nearby NFTs"}),q&&(0,St.jsxs)(Bu,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.8)"},children:["\ud83d\udccd ",q.latitude.toFixed(4),", ",q.longitude.toFixed(4)]})]})]}),B&&(0,St.jsx)(n_,{severity:"error",sx:{mb:2},children:B}),V&&(0,St.jsx)(n_,{severity:"success",sx:{mb:2},children:V}),(0,St.jsx)(uu,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:(0,St.jsxs)(FS,{value:P,onChange:(e,t)=>{I(t)},"aria-label":"NFT dashboard tabs",children:[(0,St.jsx)(US,d({label:"Nearby NFTs"},WE(0))),(0,St.jsx)(US,d({label:"My Collection"},WE(1))),(0,St.jsx)(US,d({label:"NFT Map"},WE(2))),(0,St.jsx)(US,d({label:"Stellar Wallet"},WE(3)))]})}),(0,St.jsxs)(VE,{value:P,index:0,children:[(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,children:"Nearby NFTs"}),D?(0,St.jsxs)(uu,{display:"flex",flexDirection:"column",alignItems:"center",p:4,children:[(0,St.jsx)(Xd,{size:40,thickness:4,sx:{color:"#007cba",mb:2}}),(0,St.jsx)(Bu,{variant:"h6",sx:{mb:1,color:"#333",fontWeight:"bold"},children:"Loading NFT Map..."}),(0,St.jsx)(Bu,{variant:"body2",sx:{color:"#666"},children:"Fetching nearby NFTs and initializing 3D view"})]}):0===O.length?(0,St.jsx)(n_,{severity:"info",children:"No NFTs found nearby. Make sure you have enabled location services and are within range of pinned NFTs."}):(0,St.jsx)(Jm,{container:!0,spacing:2,children:O.map((e=>{var t,r,n;return(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,md:3,lg:2,children:(0,St.jsxs)(tg,{children:[e.full_ipfs_url&&(0,St.jsx)(rE,{component:"img",height:"120",image:e.full_ipfs_url,alt:(null===(t=e.collection)||void 0===t?void 0:t.name)||"NFT",onError:e=>{e.target.style.display="none"}}),(0,St.jsxs)(ig,{sx:{p:1.5},children:[(0,St.jsx)(Bu,{variant:"subtitle2",component:"div",sx:{fontWeight:"bold",mb:.5},children:(null===(r=e.collection)||void 0===r?void 0:r.name)||"Unknown NFT"}),(0,St.jsxs)(uu,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5,children:[(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",children:(null===(n=e.collection)||void 0===n?void 0:n.rarity_level)||"common"}),(0,St.jsxs)(Bu,{variant:"caption",color:"text.secondary",children:[Math.round(e.distance||0),"m"]})]}),(0,St.jsxs)(Bu,{variant:"caption",color:"text.secondary",children:["Radius: ",e.radius_meters,"m"]})]}),(0,St.jsxs)(PT,{sx:{p:1,pt:0},children:[(0,St.jsx)(Ap,{size:"small",startIcon:(0,St.jsx)(nE,{}),onClick:()=>Bt(e),sx:{fontSize:"0.75rem",minWidth:"auto",px:1},children:"Details"}),(0,St.jsx)(Ap,{size:"small",variant:"contained",startIcon:(0,St.jsx)(oE,{}),onClick:()=>Nt(e),disabled:!q,sx:{fontSize:"0.75rem",minWidth:"auto",px:1},children:"Collect"})]})]})},e.id)}))})]}),(0,St.jsxs)(VE,{value:P,index:1,children:[(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,children:"My NFT Collection"}),0===R.length?(0,St.jsx)(n_,{severity:"info",children:"You haven't collected any NFTs yet. Start exploring nearby NFTs to build your collection!"}):(0,St.jsx)(Jm,{container:!0,spacing:2,children:R.map((e=>{var t,r,n;return(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,md:3,lg:2,children:(0,St.jsxs)(tg,{children:[e.full_ipfs_url&&(0,St.jsx)(rE,{component:"img",height:"120",image:e.full_ipfs_url,alt:(null===(t=e.collection)||void 0===t?void 0:t.name)||"NFT",onError:e=>{e.target.style.display="none"}}),(0,St.jsxs)(ig,{sx:{p:1.5},children:[(0,St.jsx)(Bu,{variant:"subtitle2",component:"div",sx:{fontWeight:"bold",mb:.5},children:(null===(r=e.collection)||void 0===r?void 0:r.name)||"Unknown NFT"}),(0,St.jsxs)(uu,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5,children:[(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",children:(null===(n=e.collection)||void 0===n?void 0:n.rarity_level)||"common"}),(0,St.jsxs)(Bu,{variant:"caption",color:"text.secondary",children:[e.transfer_count," transfers"]})]}),(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",children:new Date(e.collected_at).toLocaleDateString()})]}),(0,St.jsx)(PT,{sx:{p:1,pt:0},children:(0,St.jsx)(Ap,{size:"small",startIcon:(0,St.jsx)(nE,{}),onClick:()=>Bt(e.nft),sx:{fontSize:"0.75rem",minWidth:"auto",px:1},children:"Details"})})]})},e.id)}))})]}),(0,St.jsxs)(VE,{value:P,index:2,children:[(0,St.jsxs)(uu,{sx:{mb:2},children:[(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,children:"NFT Map"}),(0,St.jsx)(Bu,{variant:"body2",color:"text.secondary",sx:{mb:2},children:'View and pin NFTs on the map. Use the "Pin New NFT" button to add new NFTs by address.'}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:2,mb:2,flexWrap:"wrap"},children:[(0,St.jsx)(Ap,{variant:"contained",startIcon:(0,St.jsx)(vg,{}),onClick:Ot,disabled:D,children:"Get My Location"}),(0,St.jsx)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(ET,{}),onClick:()=>{q&&_t(q)},disabled:!q||D,children:"Refresh NFTs"}),(0,St.jsx)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(_g,{}),onClick:()=>{ht.current&&!ft.current?(console.log("Manually initializing main map..."),It(ht.current,"main")):ft.current&&console.log("Main map already initialized")},disabled:D,children:"Initialize Map"}),(0,St.jsx)(Ap,{variant:"outlined",onClick:()=>{console.log("Main map container:",ht.current),console.log("Main map instance:",ft.current),console.log("Main map markers:",gt.current),console.log("Nearby NFTs:",O.length)},size:"small",children:"Debug Map"}),("nft_manager"===(null===b||void 0===b?void 0:b.role)||"admin"===(null===b||void 0===b?void 0:b.role))&&(0,St.jsxs)(uu,{sx:{display:"flex",gap:1},children:[(0,St.jsx)(Ap,{variant:"contained",color:"secondary",startIcon:(0,St.jsx)(vg,{}),onClick:()=>se(!0),disabled:D,children:"Pin NFT (Database)"}),(0,St.jsx)(Ap,{variant:"contained",color:"primary",startIcon:(0,St.jsx)(vg,{}),onClick:()=>ce(!0),disabled:D,children:"Pin NFT (Blockchain)"})]})]})]}),(0,St.jsxs)(uu,{sx:{mb:2,display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[(0,St.jsxs)(uu,{sx:{display:"flex",gap:1},children:[(0,St.jsx)(Ap,{variant:"2d"===qe?"contained":"outlined",size:"small",onClick:()=>zt("2d"),startIcon:(0,St.jsx)(_g,{}),children:"2D"}),(0,St.jsx)(Ap,{variant:"3d"===qe?"contained":"outlined",size:"small",onClick:()=>zt("3d"),startIcon:(0,St.jsx)(_g,{}),children:"3D"}),(0,St.jsx)(Ap,{variant:"satellite"===qe?"contained":"outlined",size:"small",onClick:()=>zt("satellite"),startIcon:(0,St.jsx)(_g,{}),children:"Satellite"})]}),(0,St.jsx)(uu,{sx:{display:"flex",gap:1,alignItems:"center"},children:(0,St.jsx)(yg,{label:"Individual Markers",color:"primary",size:"small",icon:(0,St.jsx)(iE,{})})}),(0,St.jsx)(Ap,{variant:"outlined",size:"small",onClick:()=>{if(0===O.length)return;const e=O.map((e=>e.longitude)),t=O.map((e=>e.latitude)),r=[[Math.min(...e),Math.min(...t)],[Math.max(...e),Math.max(...t)]];ft.current&&(ft.current.fitBounds(r,{padding:50,duration:2e3}),setTimeout((()=>{He("3d"),ft.current&&ft.current.easeTo({pitch:60,bearing:0,duration:2e3})}),1e3))},disabled:0===O.length,startIcon:(0,St.jsx)(aE,{}),children:"Navigate to NFTs"})]}),(0,St.jsxs)($h,{sx:{height:"800px",width:"100%",position:"relative",overflow:"hidden",border:"1px solid #e0e0e0",borderRadius:1},children:[(0,St.jsx)("div",{ref:ht,style:{width:"100%",height:"100%",position:"relative",backgroundColor:"#f5f5f5"}}),!ft.current&&(0,St.jsxs)(uu,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",zIndex:1e3},children:[(0,St.jsx)(Xd,{size:60}),(0,St.jsx)(Bu,{variant:"h6",sx:{mt:2},children:"Loading 3D Map..."})]}),st&&(0,St.jsxs)(uu,{sx:{position:"absolute",top:"20px",left:"50%",transform:"translateX(-50%)",zIndex:1001,textAlign:"center",background:"linear-gradient(135deg, #4CAF50, #45a049)",color:"white",padding:"16px 24px",borderRadius:"12px",boxShadow:"0 8px 24px rgba(76, 175, 80, 0.3)",animation:"pulse 0.6s ease-in-out","@keyframes pulse":{"0%":{transform:"translateX(-50%) scale(0.8)",opacity:0},"50%":{transform:"translateX(-50%) scale(1.05)",opacity:1},"100%":{transform:"translateX(-50%) scale(1)",opacity:1}}},children:[(0,St.jsx)(Bu,{variant:"h6",sx:{fontWeight:"bold",mb:1},children:"\u2705 NFT Pinned Successfully!"}),(0,St.jsx)(Bu,{variant:"body2",sx:{opacity:.9},children:"Your NFT has been added to the map"})]})]})]}),(0,St.jsx)(VE,{value:P,index:3,children:(0,St.jsx)(pE,{})}),(0,St.jsxs)(Ng,{open:X,onClose:()=>Z(!1),maxWidth:"md",fullWidth:!0,sx:{zIndex:1500},children:[(0,St.jsx)(qg,{children:(0,St.jsxs)(uu,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,St.jsx)(Bu,{variant:"h6",children:(null===G||void 0===G||null===(r=G.collection)||void 0===r?void 0:r.name)||"NFT Details"}),(0,St.jsx)(th,{onClick:()=>Z(!1),children:(0,St.jsx)(Nm,{})})]})}),(0,St.jsx)($v,{children:G&&(0,St.jsxs)(Jm,{container:!0,spacing:3,children:[(0,St.jsxs)(Jm,{item:!0,xs:12,md:6,children:[G.full_ipfs_url&&(0,St.jsx)("img",{src:G.full_ipfs_url,alt:(null===(n=G.collection)||void 0===n?void 0:n.name)||"NFT",style:{width:"100%",height:"auto",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},onError:e=>{e.target.style.display="none"}}),(0,St.jsxs)(uu,{sx:{mt:2},children:[(0,St.jsx)(Bu,{variant:"subtitle2",gutterBottom:!0,children:"NFT Location"}),(0,St.jsx)(uu,{id:"nft-details-mini-map",sx:{height:"200px",width:"100%",borderRadius:"8px",border:"1px solid #e0e0e0",overflow:"hidden"}})]})]}),(0,St.jsxs)(Jm,{item:!0,xs:12,md:6,children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"Collection Information"}),(0,St.jsx)(Bu,{variant:"body2",color:"text.secondary",paragraph:!0,children:(null===(o=G.collection)||void 0===o?void 0:o.description)||"No description available"}),(0,St.jsx)(Bu,{variant:"subtitle2",gutterBottom:!0,children:"Rarity Level"}),(0,St.jsx)(yg,{label:(null===(i=G.collection)||void 0===i?void 0:i.rarity_level)||"common",color:UE(null===(a=G.collection)||void 0===a?void 0:a.rarity_level),sx:{mb:2}}),(0,St.jsx)(Bu,{variant:"subtitle2",gutterBottom:!0,children:"Location Details"}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:["Latitude: ","number"===typeof G.latitude?G.latitude.toFixed(6):G.latitude||"N/A"]}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:["Longitude: ","number"===typeof G.longitude?G.longitude.toFixed(6):G.longitude||"N/A"]}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:["Collection Radius: ",G.radius_meters,"m"]}),G.distance&&(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:["Distance from you: ",Math.round(G.distance),"m"]}),(0,St.jsx)(Bu,{variant:"subtitle2",gutterBottom:!0,sx:{mt:2},children:"IPFS Hash"}),(0,St.jsx)(Bu,{variant:"body2",fontFamily:"monospace",sx:{wordBreak:"break-all"},children:G.ipfs_hash}),G.smart_contract_address&&(0,St.jsxs)(St.Fragment,{children:[(0,St.jsx)(Bu,{variant:"subtitle2",gutterBottom:!0,sx:{mt:2},children:"Smart Contract"}),(0,St.jsx)(Bu,{variant:"body2",fontFamily:"monospace",sx:{wordBreak:"break-all"},children:G.smart_contract_address}),(0,St.jsx)(Bu,{variant:"subtitle2",gutterBottom:!0,sx:{mt:2},children:"Blockchain Information"}),G.blockchain_transaction_hash&&(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:[(0,St.jsx)("strong",{children:"Transaction Hash:"})," ",G.blockchain_transaction_hash]}),G.blockchain_ledger&&(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:[(0,St.jsx)("strong",{children:"Ledger:"})," ",G.blockchain_ledger]}),G.blockchain_network&&(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:[(0,St.jsx)("strong",{children:"Network:"})," ",G.blockchain_network]}),(0,St.jsx)(Bu,{variant:"subtitle2",gutterBottom:!0,sx:{mt:2},children:"Ownership"}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:[(0,St.jsx)("strong",{children:"Current Owner:"})," ",G.current_owner||G.owner||"Unknown"]}),G.transfer_count&&(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:[(0,St.jsx)("strong",{children:"Transfer Count:"})," ",G.transfer_count]}),G.collected_at&&(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:[(0,St.jsx)("strong",{children:"Collected:"})," ",new Date(G.collected_at).toLocaleString()]}),(0,St.jsx)(Bu,{variant:"subtitle2",gutterBottom:!0,sx:{mt:2},children:"Available Contract Functions"}),(0,St.jsxs)(uu,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[(0,St.jsx)(yg,{label:"mint",size:"small",color:"primary"}),(0,St.jsx)(yg,{label:"transfer",size:"small",color:"primary"}),(0,St.jsx)(yg,{label:"approve",size:"small",color:"primary"}),(0,St.jsx)(yg,{label:"balanceOf",size:"small",color:"secondary"}),(0,St.jsx)(yg,{label:"ownerOf",size:"small",color:"secondary"}),(0,St.jsx)(yg,{label:"getLocationData",size:"small",color:"secondary"})]})]})]})]})}),(0,St.jsxs)(HS,{children:[(0,St.jsx)(Ap,{onClick:()=>Z(!1),children:"Close"}),G&&(0,St.jsxs)(uu,{sx:{display:"flex",gap:2,mt:2},children:[(0,St.jsx)(Ap,{variant:"contained",startIcon:(0,St.jsx)(oE,{}),onClick:()=>{Nt(G),Z(!1)},disabled:!q,children:"Collect NFT"}),(0,St.jsx)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(sE,{}),onClick:()=>{console.log("Zooming mini map to NFT location:",G),he?(console.log("Zooming mini map to NFT location"),he.flyTo({center:[parseFloat(G.longitude),parseFloat(G.latitude)],zoom:18,duration:1e3}),console.log("Zoomed mini map to:",parseFloat(G.longitude),parseFloat(G.latitude))):console.log("Mini map not available yet")},children:"Zoom In"})]})]})]}),(0,St.jsxs)(Ng,{open:ee,onClose:Vt,maxWidth:!1,fullWidth:!0,fullScreen:!0,sx:{zIndex:1400},PaperProps:{sx:{margin:0,maxHeight:"100vh",height:"100vh",width:"100vw",borderRadius:0}},children:[(0,St.jsx)(qg,{sx:{position:"absolute",top:0,left:0,right:0,zIndex:1e3,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderBottom:"1px solid rgba(0,0,0,0.1)"},children:(0,St.jsxs)(uu,{display:"flex",alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:[(0,St.jsx)(Bu,{variant:"h6",sx:{fontWeight:"bold",mr:2},children:"\ud83d\uddfa\ufe0f NFT Map - 3D View"}),(0,St.jsxs)(uu,{className:"map-search-container",sx:{flexGrow:1,maxWidth:"400px",mx:2,position:"relative"},children:[(0,St.jsx)(Uv,{placeholder:"Search addresses, places, cities...",size:"small",fullWidth:!0,variant:"outlined",value:Ve,onChange:e=>{const t=e.target.value;We(t),Be&&clearTimeout(Be);const r=setTimeout((()=>{(async e=>{if(!e.trim()||e.length<2)return ze([]),void Ne(!1);try{console.log("Autocomplete search for:",e);const t=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json?access_token=").concat("pk.eyJ1Ijoic2VyZ2UzNjl4MzMiLCJhIjoiY20zZHh6M2h2MDVoZzJqcTdudXhidm5kdyJ9.31fpP6C_HjNaTEN3C0fDTg","&limit=5&autocomplete=true"));if(!t.ok)throw new Error("Autocomplete search failed");const r=await t.json();console.log("Autocomplete results:",r.features),r.features&&r.features.length>0?(ze(r.features),Ne(!0)):(ze([]),Ne(!1))}catch(B){console.error("Autocomplete error:",B),ze([]),Ne(!1)}})(t)}),300);Ue(r)},onKeyPress:e=>{"Enter"===e.key&&Ut()},onFocus:()=>{Fe.length>0&&Ne(!0)},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.9)","&:hover":{backgroundColor:"rgba(255, 255, 255, 1)"},"&.Mui-focused":{backgroundColor:"rgba(255, 255, 255, 1)"}}},InputProps:{startAdornment:(0,St.jsx)(uu,{sx:{display:"flex",alignItems:"center",mr:1},children:"\ud83d\udd0d"}),endAdornment:Ve&&(0,St.jsx)(th,{size:"small",onClick:()=>{We(""),ze([]),Ne(!1),Be&&clearTimeout(Be)},sx:{mr:-1},children:(0,St.jsx)(Nm,{fontSize:"small"})})}}),De&&Fe.length>0&&(0,St.jsx)($h,{onMouseDown:e=>{e.preventDefault()},sx:{position:"absolute",top:"100%",left:0,right:0,zIndex:1001,maxHeight:"200px",overflow:"auto",mt:.5,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",borderRadius:1},children:Fe.map(((e,t)=>(0,St.jsxs)(uu,{onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onTouchStart:t=>{t.preventDefault(),t.stopPropagation(),Ut(e)},onClick:t=>{t.preventDefault(),t.stopPropagation(),Ut(e)},sx:{p:1.5,cursor:"pointer",borderBottom:t<Fe.length-1?"1px solid #eee":"none","&:hover":{backgroundColor:"#f5f5f5"}},children:[(0,St.jsx)(Bu,{variant:"body2",sx:{fontWeight:"bold"},children:e.place_name}),e.context&&(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",children:e.context.map((e=>e.text)).join(", ")})]},t)))})]}),(0,St.jsxs)(uu,{children:[(0,St.jsx)(Ap,{variant:"contained",startIcon:(0,St.jsx)(aT,{}),onClick:()=>se(!0),sx:{mr:1},size:"small",children:"Pin New NFT"}),(0,St.jsx)(Ap,{variant:"outlined",onClick:()=>{console.log("Container ref:",pt.current),console.log("Map instance:",mt.current),pt.current&&!mt.current&&(console.log("Manually initializing map..."),It(pt.current,"overlay"))},sx:{mr:1},size:"small",children:"Debug Map"}),(0,St.jsx)(Ap,{variant:"outlined",onClick:()=>{console.log("Manually updating overlay markers..."),console.log("Nearby NFTs:",O.length),console.log("Overlay map exists:",!!mt.current),mt.current&&Ct("overlay")},sx:{mr:1},size:"small",children:"Update Markers"}),(0,St.jsx)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(aE,{}),onClick:()=>{console.log("Zooming to user location in overlay map"),mt.current&&q&&mt.current.flyTo({center:[q.longitude,q.latitude],zoom:15,duration:1e3})},sx:{mr:1},size:"small",disabled:!q,children:"Zoom to Me"}),(0,St.jsx)(th,{onClick:Vt,sx:{ml:1},children:(0,St.jsx)(Nm,{})})]})]})}),(0,St.jsxs)($v,{sx:{padding:0,margin:0,height:"calc(100vh - 64px)",overflow:"hidden",position:"relative",minHeight:"600px"},children:[(0,St.jsx)("div",{ref:pt,style:{width:"100%",height:"100%",minHeight:"600px",position:"relative",backgroundColor:"#f5f5f5"}}),!mt.current&&(0,St.jsxs)(uu,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",zIndex:1e3},children:[(0,St.jsx)(Xd,{size:60}),(0,St.jsx)(Bu,{variant:"h6",sx:{mt:2},children:"Loading 3D Map..."})]})]})]}),(0,St.jsx)(LT,{open:re,onClose:()=>ne(!1)}),(0,St.jsx)(uE,{open:oe,onClose:()=>ie(!1),onLocationUpdate:e=>{console.log("Location updated via handleLocationUpdate:",e),H(e),W("Location updated successfully!"),w&&xt()}}),(0,St.jsxs)(Ng,{open:ae,onClose:()=>se(!1),maxWidth:"sm",fullWidth:!0,sx:{zIndex:1500},children:[(0,St.jsx)(qg,{children:(0,St.jsxs)(uu,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,St.jsx)(Bu,{variant:"h6",children:"Pin New NFT"}),(0,St.jsx)(th,{onClick:()=>se(!1),children:(0,St.jsx)(Nm,{})})]})}),(0,St.jsxs)($v,{children:[(0,St.jsx)(Bu,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Search for an address to pin your NFT, then drag the pin to the exact location."}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:1,mb:2,position:"relative"},children:[(0,St.jsxs)(uu,{sx:{flexGrow:1,position:"relative"},className:"search-container",children:[(0,St.jsx)(Uv,{fullWidth:!0,label:"Search Address",value:ge.address,onChange:e=>{const t=e.target.value;ye((e=>d(d({},e),{},{address:t}))),Be&&clearTimeout(Be);const r=setTimeout((()=>{(async e=>{if(!e.trim())return ze([]),void Ne(!1);try{const t=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json?access_token=").concat("pk.eyJ1Ijoic2VyZ2UzNjl4MzMiLCJhIjoiY20zZHh6M2h2MDVoZzJqcTdudXhidm5kdyJ9.31fpP6C_HjNaTEN3C0fDTg","&limit=5")),r=await t.json();r.features&&r.features.length>0?(ze(r.features),Ne(!0)):(ze([]),Ne(!1))}catch(B){console.error("Search error:",B),ze([]),Ne(!1)}})(t)}),300);Ue(r)},onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),Fe.length>0?Lt(Fe[0]):Mt())},placeholder:"Enter address (e.g., 123 Main St, New York, NY)",InputProps:{startAdornment:(0,St.jsx)(vg,{sx:{mr:1,color:"text.secondary"}})}}),De&&Fe.length>0&&(0,St.jsx)($h,{sx:{position:"absolute",top:"100%",left:0,right:0,zIndex:1e3,maxHeight:200,overflow:"auto",mt:1,boxShadow:3},children:Fe.map(((e,t)=>(0,St.jsxs)(uu,{sx:{p:2,cursor:"pointer",borderBottom:"1px solid",borderColor:"divider","&:hover":{backgroundColor:"action.hover"}},onClick:()=>Lt(e),children:[(0,St.jsx)(Bu,{variant:"body2",fontWeight:"bold",children:e.text}),(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",children:e.place_name})]},t)))})]}),(0,St.jsx)(Ap,{variant:"outlined",onClick:Mt,disabled:Ee||!ge.address.trim(),startIcon:Ee?(0,St.jsx)(Xd,{size:20}):(0,St.jsx)(vg,{}),children:Ee?"Searching...":"Search"})]}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:1,mb:2},children:[(0,St.jsx)(Ap,{variant:"outlined",onClick:()=>{if(!ft.current)return void U("Map not loaded yet. Please wait for the map to initialize.");if(xe&&ve)return void U("Pin marker is already placed. Please remove it first or drag it to a new position.");const e=ft.current.getCenter();console.log("Map center:",e),console.log("Map bounds:",ft.current.getBounds()),console.log("Map zoom:",ft.current.getZoom()),e&&e.lat&&e.lng&&!isNaN(e.lat)&&!isNaN(e.lng)?(ye((t=>d(d({},t),{},{latitude:e.lat,longitude:e.lng}))),de({latitude:e.lat,longitude:e.lng}),Dt(e.lng,e.lat),ft.current.flyTo({center:[e.lng,e.lat],zoom:20,duration:1e3}),W("Pin dropped at map center: ".concat(e.lat.toFixed(6),", ").concat(e.lng.toFixed(6),"! Drag to adjust position."))):U("Unable to get map center. Please try again.")},startIcon:(0,St.jsx)(vg,{}),sx:{flex:1},children:"Drop Pin"}),(0,St.jsx)(Ap,{variant:"outlined",onClick:()=>{q?xe&&ve?U("Pin marker is already placed. Please remove it first or drag it to a new position."):(ye((e=>d(d({},e),{},{latitude:q.latitude,longitude:q.longitude}))),de({latitude:q.latitude,longitude:q.longitude}),Dt(q.longitude,q.latitude),ft.current&&ft.current.flyTo({center:[q.longitude,q.latitude],zoom:20,pitch:"3d"===qe?60:0,bearing:0,duration:2e3,essential:!0}),W("Using your current location! Drag to adjust position.")):U("Your location is not available. Please enable location services.")},startIcon:(0,St.jsx)(aE,{}),sx:{flex:1},disabled:!q,children:"Use My Location"})]}),ge.latitude&&ge.longitude&&(0,St.jsxs)(n_,{severity:"success",sx:{mb:2},children:["Location: ",ge.latitude.toFixed(6),", ",ge.longitude.toFixed(6),(0,St.jsx)("br",{}),(0,St.jsx)("small",{children:"Drag the pin on the map to adjust the exact position"})]}),(0,St.jsx)(Uv,{fullWidth:!0,label:"NFT Name",value:ge.name,onChange:e=>ye(d(d({},ge),{},{name:e.target.value})),required:!0,sx:{mb:2}}),(0,St.jsx)(Uv,{fullWidth:!0,label:"Description",value:ge.description,onChange:e=>ye(d(d({},ge),{},{description:e.target.value})),multiline:!0,rows:3,sx:{mb:2}}),(0,St.jsxs)(ev,{fullWidth:!0,sx:{mb:2},children:[(0,St.jsx)(Zy,{children:"Collection *"}),(0,St.jsx)(Lv,{value:ge.collection_id||"",onChange:e=>ye(d(d({},ge),{},{collection_id:e.target.value})),label:"Collection *",required:!0,children:F.map((e=>(0,St.jsx)(mm,{value:e.id,children:e.name},e.id)))})]}),(0,St.jsx)(Uv,{fullWidth:!0,label:"Smart Contract Address",value:ge.smart_contract_address,onChange:e=>ye(d(d({},ge),{},{smart_contract_address:e.target.value})),placeholder:"0x1234567890abcdef1234567890abcdef12345678",sx:{mb:2}}),(0,St.jsx)(Uv,{fullWidth:!0,label:"IPFS Hash",value:ge.ipfs_hash,onChange:e=>ye(d(d({},ge),{},{ipfs_hash:e.target.value})),placeholder:"bafybeigdv2ccs3bighhgvqj65sgi6bz6qruz4r5bqxpwovem5m5t7xcifi/M25_52.png",sx:{mb:2}}),(0,St.jsx)(Uv,{fullWidth:!0,label:"Collection Radius (meters)",type:"number",value:ge.radius_meters,onChange:e=>ye(d(d({},ge),{},{radius_meters:parseInt(e.target.value)||10})),inputProps:{min:1,max:1e3},sx:{mb:2}})]}),(0,St.jsxs)(HS,{children:[(0,St.jsx)(Ap,{onClick:()=>se(!1),children:"Cancel"}),(0,St.jsx)(Ap,{variant:"contained",onClick:async()=>{if(ge.latitude&&ge.longitude&&ge.name.trim()&&ge.collection_id){N(!0);try{let e=ge.latitude,t=ge.longitude;if(console.log("\ud83d\udd0d DEBUG: Pin marker exists:",!!ve),console.log("\ud83d\udd0d DEBUG: Pin marker locked:",xe),console.log("\ud83d\udd0d DEBUG: Pin marker protected:",ke),console.log("\ud83d\udd0d DEBUG: Pin location state:",ue),console.log("\ud83d\udd0d DEBUG: Form coordinates:",{lat:ge.latitude,lng:ge.longitude}),ve){const r=ve.getLngLat();console.log("\ud83d\udd0d DEBUG: Force updating form with pin marker coordinates:",r),ye((e=>d(d({},e),{},{latitude:r.lat,longitude:r.lng}))),e=r.lat,t=r.lng}if(ve)try{const e=ve.getLngLat();console.log("\ud83d\udd0d DEBUG: Pin marker getLngLat() result:",e),console.log("\ud83d\udd0d DEBUG: Pin marker isDraggable:",ve.isDraggable()),console.log("\ud83d\udd0d DEBUG: Pin marker element:",ve.getElement())}catch(B){console.error("\ud83d\udd0d DEBUG: Error getting pin marker coordinates:",B)}if(ve){const r=ve.getLngLat();e=r.lat,t=r.lng,console.log("\ud83c\udfaf Pin marker getLngLat():",r),console.log("\ud83c\udfaf Using exact pin marker coordinates:",{lat:e,lng:t}),console.log("\ud83c\udfaf Original form coordinates:",{lat:ge.latitude,lng:ge.longitude});const n=Math.abs(e-ge.latitude),o=Math.abs(t-ge.longitude);console.log("\ud83c\udfaf Coordinate differences:",{latDiff:n,lngDiff:o}),n>1e-6||o>1e-6?console.log("\u2705 Pin marker coordinates are different from form - using pin marker coordinates"):console.log("\u26a0\ufe0f Pin marker coordinates are the same as form coordinates")}else ue?(e=ue.latitude,t=ue.longitude,console.log("\ud83c\udfaf Using pinLocation state coordinates:",{lat:e,lng:t})):console.log("\u26a0\ufe0f No pin marker or pinLocation found - using form coordinates");const r={name:ge.name,description:ge.description,ipfs_hash:ge.ipfs_hash,radius_meters:ge.radius_meters,collection_id:ge.collection_id,latitude:e,longitude:t,smart_contract_address:ge.smart_contract_address};console.log("Pinning NFT with data:",r),await bc.post("/nft/pin",r),W('\ud83c\udf89 NFT "'.concat(ge.name,'" pinned successfully at ').concat(e.toFixed(8),", ").concat(t.toFixed(8),"!")),lt(!0),se(!1),setTimeout((()=>{lt(!1)}),3e3),ve&&(ve._lockInterval&&clearInterval(ve._lockInterval),ve.remove(),be(null),_e(!1),Te(!1)),ye({name:"",description:"",ipfs_hash:"",radius_meters:10,collection_id:null,address:"",latitude:null,longitude:null}),de(null),q&&await _t(q)}catch(r){var e,t;console.error("Error pinning NFT:",r),U((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Failed to pin NFT.")}finally{N(!1)}}else U("Please search for an address, select a collection, and fill in all required fields.")},disabled:D||!ge.name.trim(),startIcon:D?(0,St.jsx)(Xd,{size:20}):(0,St.jsx)(vg,{}),children:D?"Pinning...":"Pin NFT"})]})]}),(0,St.jsxs)(Ng,{open:Y,onClose:()=>J(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{maxHeight:"90vh"}},sx:{zIndex:1500},children:[(0,St.jsx)(qg,{sx:{pb:1},children:(0,St.jsxs)(uu,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,St.jsxs)(uu,{display:"flex",alignItems:"center",sx:{flexGrow:1},children:[(0,St.jsx)("div",{style:{width:8,height:8,borderRadius:"50%",backgroundColor:"legendary"===(null===G||void 0===G||null===(s=G.collection)||void 0===s?void 0:s.rarity_level)?"#ff9800":"rare"===(null===G||void 0===G||null===(l=G.collection)||void 0===l?void 0:l.rarity_level)?"#2196f3":"#4caf50",marginRight:6}}),(0,St.jsx)(Bu,{variant:"subtitle1",sx:{fontWeight:"bold"},children:(null===G||void 0===G?void 0:G.name)||(null===G||void 0===G||null===(c=G.collection)||void 0===c?void 0:c.name)||"Unknown NFT"})]}),O.length>1&&(0,St.jsxs)(uu,{display:"flex",alignItems:"center",sx:{mx:2},children:[(0,St.jsx)(th,{size:"small",onClick:()=>{const e=$>0?$-1:O.length-1;Q(e),K(O[e])},disabled:O.length<=1,children:(0,St.jsx)(lE,{fontSize:"small"})}),(0,St.jsxs)(Bu,{variant:"caption",sx:{mx:1,minWidth:"60px",textAlign:"center"},children:[$+1," of ",O.length]}),(0,St.jsx)(th,{size:"small",onClick:()=>{const e=$<O.length-1?$+1:0;Q(e),K(O[e])},disabled:O.length<=1,children:(0,St.jsx)(cE,{fontSize:"small"})})]}),(0,St.jsx)(th,{size:"small",onClick:()=>J(!1),children:(0,St.jsx)(Nm,{})})]})}),(0,St.jsx)($v,{sx:{pt:1,pb:1},children:G&&(0,St.jsxs)(uu,{children:[G.full_ipfs_url&&(0,St.jsxs)(uu,{textAlign:"center",mb:2,children:[(0,St.jsx)("img",{src:G.full_ipfs_url,alt:G.name||"NFT",style:{maxWidth:"100%",maxHeight:"200px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",objectFit:"cover"},onError:e=>{e.target.style.display="none",e.target.nextElementSibling.style.display="block"}}),(0,St.jsx)("div",{style:{display:"none",padding:"20px",background:"#f5f5f5",borderRadius:"8px",color:"#666",textAlign:"center"},children:(0,St.jsx)("p",{style:{margin:0,fontSize:"14px"},children:"Image not available"})})]}),(0,St.jsxs)(Jm,{container:!0,spacing:1.5,children:[(0,St.jsx)(Jm,{item:!0,xs:6,children:(0,St.jsxs)(uu,{sx:{p:1.5,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",display:"block",children:"RARITY"}),(0,St.jsx)(yg,{label:(null===(u=G.collection)||void 0===u?void 0:u.rarity_level)||"common",color:UE(null===(h=G.collection)||void 0===h?void 0:h.rarity_level),size:"small",sx:{mt:.5}})]})}),(0,St.jsx)(Jm,{item:!0,xs:6,children:(0,St.jsxs)(uu,{sx:{p:1.5,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",display:"block",children:"RADIUS"}),(0,St.jsxs)(Bu,{variant:"body2",sx:{fontWeight:"bold",mt:.5},children:[G.radius_meters,"m"]})]})}),G.distance&&(0,St.jsx)(Jm,{item:!0,xs:6,children:(0,St.jsxs)(uu,{sx:{p:1.5,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",display:"block",children:"DISTANCE"}),(0,St.jsxs)(Bu,{variant:"body2",color:"primary",sx:{fontWeight:"bold",mt:.5},children:[Math.round(G.distance),"m"]})]})}),(0,St.jsx)(Jm,{item:!0,xs:6,children:(0,St.jsxs)(uu,{sx:{p:1.5,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",display:"block",children:"STATUS"}),(0,St.jsxs)(uu,{display:"flex",alignItems:"center",sx:{mt:.5},children:[(0,St.jsx)("div",{style:{width:6,height:6,borderRadius:"50%",backgroundColor:G.is_active?"#4caf50":"#f44336",marginRight:4}}),(0,St.jsx)(Bu,{variant:"caption",sx:{textTransform:"uppercase",fontSize:"11px"},children:G.is_active?"Active":"Inactive"})]})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsxs)(uu,{sx:{p:1.5,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",display:"block",children:"COLLECTION"}),(0,St.jsx)(Bu,{variant:"body2",sx:{mt:.5},children:(null===(p=G.collection)||void 0===p?void 0:p.name)||"Unknown Collection"})]})}),G.description&&(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsxs)(uu,{sx:{p:1.5,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",display:"block",children:"DESCRIPTION"}),(0,St.jsx)(Bu,{variant:"body2",sx:{mt:.5,fontSize:"13px"},children:G.description})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsxs)(uu,{sx:{p:1.5,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",display:"block",children:"LOCATION"}),(0,St.jsxs)(Bu,{variant:"caption",sx:{mt:.5,display:"block",fontSize:"11px"},children:["Lat: ","number"===typeof G.latitude?G.latitude.toFixed(4):G.latitude||"N/A"]}),(0,St.jsxs)(Bu,{variant:"caption",sx:{fontSize:"11px"},children:["Lng: ","number"===typeof G.longitude?G.longitude.toFixed(4):G.longitude||"N/A"]})]})})]})]})}),(0,St.jsxs)(HS,{children:[(0,St.jsx)(Ap,{onClick:()=>J(!1),children:"Close"}),G&&(0,St.jsx)(Ap,{variant:"contained",color:"primary",onClick:()=>{console.log("Collect NFT:",G)},children:"Collect NFT"})]})]}),(0,St.jsxs)(Ng,{open:le,onClose:()=>ce(!1),maxWidth:"lg",fullWidth:!0,sx:{zIndex:1500},children:[(0,St.jsx)(qg,{children:(0,St.jsxs)(uu,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,St.jsx)(Bu,{variant:"h6",children:"Real PIN NFT - Stellar Blockchain"}),(0,St.jsx)(th,{onClick:()=>ce(!1),children:(0,St.jsx)(Nm,{})})]})}),(0,St.jsx)($v,{sx:{p:0},children:(0,St.jsx)(DE,{onClose:()=>ce(!1),onSuccess:e=>{console.log("Real NFT operation successful:",e),ce(!1),ut(e)}})})]}),(0,St.jsxs)(Ng,{open:!!ct,onClose:()=>{ut(null),localStorage.removeItem("nftMintSuccess")},maxWidth:"md",fullWidth:!0,sx:{zIndex:1e4},children:[(0,St.jsx)(qg,{sx:{textAlign:"center",pb:2},children:"\ud83c\udf89 NFT Successfully Minted!"}),(0,St.jsx)($v,{children:ct&&(0,St.jsxs)(uu,{sx:{textAlign:"center"},children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,color:"primary",children:ct.name}),(0,St.jsxs)(Jm,{container:!0,spacing:3,sx:{mt:2},children:[(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,children:(0,St.jsx)(tg,{variant:"outlined",children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"\ud83d\udcca Transaction Details"}),(0,St.jsxs)(Bu,{variant:"body2",sx:{mb:1},children:[(0,St.jsx)("strong",{children:"Token ID:"})," ",ct.tokenId]}),(0,St.jsxs)(Bu,{variant:"body2",sx:{mb:1},children:[(0,St.jsx)("strong",{children:"Status:"})," ",ct.status]}),(0,St.jsxs)(Bu,{variant:"body2",sx:{mb:1},children:[(0,St.jsx)("strong",{children:"Ledger:"})," ",ct.ledger||"N/A"]}),(0,St.jsxs)(Bu,{variant:"body2",sx:{mb:1},children:[(0,St.jsx)("strong",{children:"Hash:"}),(0,St.jsx)("br",{}),(0,St.jsx)("code",{style:{fontSize:"0.8em",wordBreak:"break-all"},children:ct.transactionHash||"N/A"})]})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,children:(0,St.jsx)(tg,{variant:"outlined",children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"\ud83d\udccd Location Details"}),(0,St.jsxs)(Bu,{variant:"body2",sx:{mb:1},children:[(0,St.jsx)("strong",{children:"Latitude:"})," ",(null===(f=ct.location)||void 0===f||null===(m=f.latitude)||void 0===m?void 0:m.toFixed(6))||"N/A"]}),(0,St.jsxs)(Bu,{variant:"body2",sx:{mb:1},children:[(0,St.jsx)("strong",{children:"Longitude:"})," ",(null===(g=ct.location)||void 0===g||null===(y=g.longitude)||void 0===y?void 0:y.toFixed(6))||"N/A"]}),(0,St.jsxs)(Bu,{variant:"body2",sx:{mb:1},children:[(0,St.jsx)("strong",{children:"Radius:"})," ",(null===(v=ct.location)||void 0===v?void 0:v.radius)||"N/A","m"]}),(0,St.jsxs)(Bu,{variant:"body2",sx:{mb:1},children:[(0,St.jsx)("strong",{children:"Contract:"}),(0,St.jsx)("br",{}),(0,St.jsx)("code",{style:{fontSize:"0.8em",wordBreak:"break-all"},children:ct.contractId||"N/A"})]})]})})})]}),(0,St.jsxs)(uu,{sx:{mt:3,display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap"},children:[(0,St.jsx)(Ap,{variant:"contained",color:"primary",href:ct.stellarExpertUrl||"#",target:"_blank",rel:"noopener noreferrer",disabled:!ct.stellarExpertUrl,sx:{minWidth:200},children:"\ud83d\udd17 View on StellarExpert"}),(0,St.jsx)(Ap,{variant:"outlined",href:ct.contractUrl||"#",target:"_blank",rel:"noopener noreferrer",disabled:!ct.contractUrl,sx:{minWidth:200},children:"\ud83d\udcc4 View Contract"})]}),(0,St.jsx)(n_,{severity:"success",sx:{mt:3},children:(0,St.jsxs)(Bu,{variant:"body2",children:[(0,St.jsx)("strong",{children:"\u2705 Success!"})," Your NFT has been minted on the Stellar testnet and added to the database. It will now appear in nearby NFT searches within the specified radius."]})})]})}),(0,St.jsx)(HS,{children:(0,St.jsx)(Ap,{onClick:()=>{ut(null),localStorage.removeItem("nftMintSuccess")},variant:"contained",children:"Close"})})]})]})},HE=["children","value","index"],GE="pk.eyJ1Ijoic2VyZ2UzNjl4MzMiLCJhIjoiY20zZHh6M2h2MDVoZzJqcTdudXhidm5kdyJ9.31fpP6C_HjNaTEN3C0fDTg";nb().accessToken=GE;if("undefined"!==typeof document){const e=document.createElement("style");e.textContent="\n  .nft-image-marker {\n    width: 60px !important;\n    height: 60px !important;\n    cursor: pointer !important;\n    position: relative !important;\n    z-index: 1000 !important;\n    pointer-events: auto !important;\n    border-radius: 12px !important;\n    border: 3px solid #ffffff !important;\n    box-shadow: 0 4px 12px rgba(0,0,0,0.3) !important;\n    overflow: hidden !important;\n    transform: none !important;\n    transition: none !important;\n    will-change: auto !important;\n  }\n  \n  .nft-image-marker img,\n  .nft-image-marker div {\n    pointer-events: none !important;\n  }\n  \n  /* Ensure popups appear above everything */\n  .mapboxgl-popup {\n    z-index: 2000 !important;\n  }\n  \n  .mapboxgl-popup-content {\n    z-index: 2001 !important;\n  }\n  \n  .mapboxgl-popup-tip {\n    z-index: 2002 !important;\n  }\n  \n  /* Specific styling for NFT popups */\n  .nft-popup {\n    z-index: 3000 !important;\n  }\n  \n  .nft-popup .mapboxgl-popup-content {\n    z-index: 3001 !important;\n    border-radius: 12px !important;\n    box-shadow: 0 8px 24px rgba(0,0,0,0.3) !important;\n  }\n  \n  .nft-popup .mapboxgl-popup-tip {\n    z-index: 3002 !important;\n  }\n",document.head.appendChild(e)}const KE=e=>{switch(e){case"common":return"success";case"rare":return"info";case"legendary":return"warning";default:return"default"}};function XE(e){const{children:t,value:r,index:n}=e,o=a(e,HE);return(0,St.jsx)("div",d(d({role:"tabpanel",hidden:r!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},o),{},{children:r===n&&(0,St.jsx)(uu,{sx:{p:3},children:t})}))}function ZE(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}const YE=()=>{var e,r,n,o,i,a,s,l,c,u,h,p,f,m,g,y,v;const b=he(),{user:x}=wc(),{wallet:_,disconnectWallet:w,isConnected:S,balance:k,connectWalletViewOnly:T,clearWalletCompletely:E,publicKey:C,setUser:A}=Mc(),[j,P]=(0,t.useState)(!1),[I,O]=(0,t.useState)(0),[M,R]=(0,t.useState)([]),[L,F]=(0,t.useState)([]),[z,D]=(0,t.useState)([]),[N,B]=(0,t.useState)(!1),[U,V]=(0,t.useState)(""),[W,q]=(0,t.useState)(""),[H,G]=(0,t.useState)("streets"),[K,X]=(0,t.useState)("2d"),[Z,Y]=(0,t.useState)(!1),[J,$]=(0,t.useState)({traffic:!1,buildings:!0,terrain:!1,satellite:!1}),[Q,ee]=(0,t.useState)({distance:5e3,rarity:"all",collection:"all"}),te=e=>{X(e),Et&&("3d"===e?Et.easeTo({pitch:60,bearing:-17.6,duration:1e3}):Et.easeTo({pitch:0,bearing:0,duration:1e3}))},[re,ne]=(0,t.useState)(null),[oe,ie]=(0,t.useState)(null),[ae,se]=(0,t.useState)(!1),[le,ce]=(0,t.useState)(!1),[ue,de]=(0,t.useState)(0),[pe,fe]=(0,t.useState)(!1),[me,ge]=(0,t.useState)(!1),[ye,ve]=(0,t.useState)(!1),[be,xe]=(0,t.useState)(!1),[_e,we]=(0,t.useState)(!1),[Se,ke]=(0,t.useState)(null),[Te,Ee]=(0,t.useState)(null),[Ce,Ae]=(0,t.useState)(!1),[je,Pe]=(0,t.useState)({name:"",description:"",ipfs_hash:"",radius_meters:10,collection_id:"",address:"",latitude:null,longitude:null,smart_contract_address:""}),[Ie,Oe]=(0,t.useState)(null),[Me,Re]=(0,t.useState)(!1),[Le,Fe]=(0,t.useState)(!1),[ze,De]=(0,t.useState)(!1),[Ne,Be]=(0,t.useState)(!1),[Ue,Ve]=(0,t.useState)(!1),[We,qe]=(0,t.useState)(!1),[He,Ge]=(0,t.useState)(0),[Ke,Xe]=(0,t.useState)(!1),[Ze,Ye]=(0,t.useState)([]),[Je,$e]=(0,t.useState)(!1),[Qe,et]=(0,t.useState)(null),[tt,rt]=(0,t.useState)(""),[nt,ot]=(0,t.useState)(""),[it,at]=(0,t.useState)(""),[st]=(0,t.useState)(1e3),[lt,ct]=(0,t.useState)(!1),[ut,dt]=(0,t.useState)(!1),[ht,pt]=(0,t.useState)(!1),[ft,mt]=(0,t.useState)(!1),[gt,yt]=(0,t.useState)(!1),[vt,bt]=(0,t.useState)(!1),[xt,_t]=(0,t.useState)(null),wt=3e3,kt=(0,t.useRef)(null),Tt=(0,t.useRef)(null),Et=(0,t.useRef)(null),Ct=(0,t.useRef)(null),At=(0,t.useRef)({}),jt=(0,t.useRef)({}),Pt=(0,t.useRef)({}),It=(0,t.useCallback)((async()=>{if(S&&!Ke){console.log("Fetching user collection..."),Xe(!0),B(!0);try{const e=await bc.get("/nft/user-collection");console.log("User collection response:",e.data);const t=(e.data.collection||e.data||[]).map((e=>{const t=e.nft||e,r=t.collection||{};return d(d({},t),{},{full_ipfs_url:t.ipfs_hash?"https://bronze-adjacent-barnacle-907.mypinata.cloud/ipfs/".concat(t.ipfs_hash):null,collection:d(d({},r),{},{full_image_url:r.image_url?"https://bronze-adjacent-barnacle-907.mypinata.cloud/ipfs/".concat(r.image_url):null})})}));F(t),console.log("User collection updated:",t.length,"NFTs")}catch(e){console.error("Error fetching user collection:",e),V("Failed to fetch your NFT collection."),F([])}finally{B(!1)}}}),[S,Ke]),Ot=(0,t.useCallback)((async()=>{if(!re||We)return void(re||V("Location not available. Please enable location services."));const e=Date.now();if(e-He<wt)console.log("Request too soon, skipping...");else{qe(!0),Ge(e),V(""),B(!0),Ve(!0);try{console.log("Fetching ALL NFTs globally with location:",re);const e=await bc.get("/nft/dashboard/nearby",{params:{latitude:re.latitude,longitude:re.longitude,radius:999999999}});console.log("Nearby NFTs API response:",e.data);const t=e.data.nfts.map((e=>{var t;return d(d({},e),{},{full_ipfs_url:e.ipfs_hash?"https://bronze-adjacent-barnacle-907.mypinata.cloud/ipfs/".concat(e.ipfs_hash):null,collection:d(d({},e.collection),{},{full_image_url:null!==(t=e.collection)&&void 0!==t&&t.image_url?"https://bronze-adjacent-barnacle-907.mypinata.cloud/ipfs/".concat(e.collection.image_url):null})})}));console.log("Processed NFTs:",t),R(t)}catch(t){console.error("Error fetching nearby NFTs:",t),V("Failed to fetch nearby NFTs.")}finally{qe(!1),B(!1),Ve(!1)}}}),[re,We,He,wt]),Mt=(0,t.useCallback)((async e=>{if(!e||We)return void(e||V("Location not available. Please enable location services."));const t=Date.now();if(t-He<wt)console.log("Request too soon, skipping...");else{qe(!0),Ge(t),V("");try{console.log("Fetching ALL NFTs globally with provided location:",e);const t=await bc.get("/nft/dashboard/nearby",{params:{latitude:e.latitude,longitude:e.longitude,radius:999999999}});console.log("Nearby NFTs API response (with location):",t.data);const r=t.data.nfts.map((e=>{var t;return d(d({},e),{},{full_ipfs_url:e.ipfs_hash?"https://bronze-adjacent-barnacle-907.mypinata.cloud/ipfs/".concat(e.ipfs_hash):null,collection:d(d({},e.collection),{},{full_image_url:null!==(t=e.collection)&&void 0!==t&&t.image_url?"https://bronze-adjacent-barnacle-907.mypinata.cloud/ipfs/".concat(e.collection.image_url):null})})}));console.log("Processed NFTs (with location):",r),R(r)}catch(r){console.error("Error fetching nearby NFTs:",r),V("Failed to fetch nearby NFTs.")}finally{qe(!1)}}}),[We,He,wt]),Rt=(0,t.useCallback)((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{var o,i;console.log("\ud83c\udfaf Creating single marker for NFT ".concat(e.id," at index ").concat(r));const a=n||Pt;if(a.current[e.id])return void console.log("Marker for NFT ".concat(e.id," already exists, skipping creation"));if(!e.longitude||!e.latitude||isNaN(e.longitude)||isNaN(e.latitude)||!isFinite(e.longitude)||!isFinite(e.latitude))return void console.warn("Invalid base coordinates for NFT:",e.id,"Skipping marker creation.");let s=parseFloat(e.longitude),l=parseFloat(e.latitude);if("globe"===(null===(o=t.getProjection())||void 0===o?void 0:o.name)&&(s<-180&&(s+=360),s>180&&(s-=360),l<-90&&(l=-90),l>90&&(l=90),console.log("\ud83c\udf0d Globe projection: Normalized coordinates for NFT ".concat(e.id,":"),{lng:s,lat:l})),Math.abs(s)<=90&&Math.abs(l)>90){console.log("\ud83d\udd04 COORDINATE SWAP DETECTED for NFT ".concat(e.id,": Swapping lat/lng"));const t=s;s=l,l=t}if(Math.abs(s)>180||Math.abs(l)>90){console.log("\ud83d\udd04 INVALID COORDINATES for NFT ".concat(e.id,": Trying coordinate swap"));const t=s;s=l,l=t}if((Math.abs(s)>1e3||Math.abs(l)>1e3)&&(console.log("\ud83d\udea8 LARGE COORDINATES for NFT ".concat(e.id,": Possible UTM or other coordinate system"),{lng:s,lat:l}),console.log("\ud83d\udea8 These coordinates are likely in UTM or another system, not WGS84 GPS coordinates")),console.log("\ud83d\udd0d Raw coordinates for NFT ".concat(e.id,":"),{rawLongitude:e.longitude,rawLatitude:e.latitude,parsedLng:s,parsedLat:l,coordinateType:typeof e.longitude,isString:"string"===typeof e.longitude,stringLength:"string"===typeof e.longitude?e.longitude.length:"N/A"}),console.log("NFT ".concat(e.id," coordinates:"),{lat:l,lng:s,name:e.name,nftIndex:r,originalCoords:{lat:e.latitude,lng:e.longitude}}),(Math.abs(s)>180||Math.abs(l)>90)&&console.error("\ud83d\udea8 INVALID COORDINATES for NFT ".concat(e.id,":"),{lat:l,lng:s}),s>=-124&&s<=-114&&l>=32&&l<=42)console.log("\u2705 NFT ".concat(e.id," appears to be in California region"));else if(s>=-43&&s<=-42&&l>=-23&&l<=-22)console.log("\u2705 NFT ".concat(e.id," appears to be in Rio de Janeiro region"));else{console.log("\u2753 NFT ".concat(e.id," coordinates don't match expected regions:"),{lat:l,lng:s});const t=l,r=s;console.log("\ud83d\udd04 Testing swapped coordinates for NFT ".concat(e.id,":"),{lat:r,lng:t}),t>=-124&&t<=-114&&r>=32&&r<=42?console.log("\ud83d\udd04 SWAPPED: NFT ".concat(e.id," would be in California region if coordinates were swapped")):t>=-43&&t<=-42&&r>=-23&&r<=-22&&console.log("\ud83d\udd04 SWAPPED: NFT ".concat(e.id," would be in Rio de Janeiro region if coordinates were swapped"))}if(isNaN(l)||isNaN(s)||!isFinite(l)||!isFinite(s))return void console.warn("Invalid coordinates for NFT:",e.id,"Skipping marker creation.");if(l<-90||l>90||s<-180||s>180)return void console.warn("Invalid coordinate range for NFT ".concat(e.id,":"),{lat:l,lng:s});const c=document.createElement("div");if(c.className="nft-marker",c.style.width="40px",c.style.height="40px",c.style.borderRadius="8px",c.style.border="3px solid #fff",c.style.boxShadow="0 2px 8px rgba(0,0,0,0.3)",c.style.cursor="pointer",c.style.display="flex",c.style.alignItems="center",c.style.justifyContent="center",c.style.fontSize="12px",c.style.fontWeight="bold",c.style.color="#fff",c.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)",c.style.position="relative",c.style.zIndex="1000",e.ipfs_hash){const t=document.createElement("img");t.src="https://ipfs.io/ipfs/".concat(e.ipfs_hash),t.style.width="100%",t.style.height="100%",t.style.borderRadius="8px",t.style.objectFit="cover",t.onerror=()=>{console.log("Image failed to load:",t.src),c.style.background="linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 100%)",c.innerHTML=e.name?e.name.charAt(0).toUpperCase():"N"},c.appendChild(t)}else c.innerHTML=e.name?e.name.charAt(0).toUpperCase():"N";let u;c.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),u&&clearTimeout(u),u=setTimeout((()=>{console.log("NFT marker clicked:",e),Jt(e)}),200)})),c.addEventListener("dblclick",(r=>{r.preventDefault(),r.stopPropagation(),u&&(clearTimeout(u),u=null),console.log("NFT marker double-clicked, zooming in:",e),console.log("Map reference for double-click:",t),console.log("Map type:",t===Ct.current?"overlay":"main"),t.flyTo({center:[s,l],zoom:18,duration:1e3})}));const d=new(nb().Marker)({element:c,draggable:!0}).setLngLat([s,l]).addTo(t);if("globe"===(null===(i=t.getProjection())||void 0===i?void 0:i.name)){setTimeout((()=>{d.setLngLat([s,l]),console.log("\ud83c\udf0d Globe projection: Repositioned marker for NFT ".concat(e.id," to:"),[s,l])}),100);const r=()=>{d.setLngLat([s,l]),console.log("\ud83c\udf0d Globe projection: Style loaded - repositioned marker for NFT ".concat(e.id))};t.isStyleLoaded()?r():t.once("style.load",r)}d._isStable=!0,d._lastUpdated=Date.now(),d._nftId=e.id,d.on("dragstart",(()=>{d._isDragging=!0,console.log("Started dragging NFT ".concat(e.id))})),d.on("dragend",(async()=>{var r,n;d._isDragging=!1,d._lastUpdated=Date.now(),d._wasRecentlyDragged=!0;const o=d.getLngLat();let i=parseFloat(o.lng.toFixed(8)),a=parseFloat(o.lat.toFixed(8));if("globe"===(null===(r=t.getProjection())||void 0===r?void 0:r.name)&&console.log("\ud83c\udf0d Globe projection detected - coordinates should be in WGS84"),console.log("Final drag coordinates for NFT ".concat(e.id,":"),{lng:i,lat:a,zoomLevel:t.getZoom(),projection:(null===(n=t.getProjection())||void 0===n?void 0:n.name)||"unknown",originalCoords:{lng:e.longitude,lat:e.latitude},coordinateChange:{lngDiff:i-parseFloat(e.longitude),latDiff:a-parseFloat(e.latitude)}}),Math.abs(i)>180||Math.abs(a)>90)return console.error("\ud83d\udea8 INVALID DRAG COORDINATES for NFT ".concat(e.id,":"),{lng:i,lat:a}),void console.error("\ud83d\udea8 Coordinates are outside valid WGS84 bounds");Math.abs(i)<.1&&Math.abs(a)<.1&&console.warn("\u26a0\ufe0f WARNING: NFT ".concat(e.id," coordinates are very close to 0,0 (Gulf of Guinea)"));try{const t=await bc.put("/nft/pinned/".concat(e.id),{longitude:i,latitude:a});console.log("Successfully updated NFT ".concat(e.id," coordinates:"),t.data);const r=M.findIndex((t=>t.id===e.id));-1!==r&&(M[r].longitude=i,M[r].latitude=a),setTimeout((()=>{d._wasRecentlyDragged=!1,console.log("\ud83d\udd04 Cleared recently dragged flag for NFT ".concat(e.id))}),15e3)}catch(U){console.error("Error updating NFT ".concat(e.id," coordinates:"),U)}})),console.log("\ud83c\udfaf Before storing marker ".concat(e.id," - currentMarkers ref:"),a.current),a.current[e.id]=d,console.log("\ud83c\udfaf After storing marker ".concat(e.id," - currentMarkers ref:"),a.current),console.log("NFT image marker created for NFT ".concat(e.id," at:"),[s,l]),console.log("Stored marker in currentMarkers:",Object.keys(a.current))}catch(U){console.error("Error creating marker for NFT ".concat(e.id,":"),U)}}),[Pt,M]),Lt=(0,t.useCallback)((function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{const o="cluster-".concat(r),i=n||Pt;if(i.current[o])return void console.log("Cluster marker ".concat(o," already exists, skipping creation"));const a=document.createElement("div");a.className="cluster-marker",a.style.width="50px",a.style.height="50px",a.style.borderRadius="50%",a.style.border="4px solid #fff",a.style.boxShadow="0 4px 12px rgba(0,0,0,0.4)",a.style.cursor="pointer",a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.fontSize="16px",a.style.fontWeight="bold",a.style.color="#fff",a.style.background="linear-gradient(135deg, #ff6b6b 0%, #ff8e53 100%)",a.style.position="relative",a.style.zIndex="1000",a.innerHTML=e.nfts.length,a.addEventListener("click",(r=>{r.preventDefault(),r.stopPropagation(),t.flyTo({center:[e.centerLng,e.centerLat],zoom:12,duration:1e3})})),a.addEventListener("dblclick",(r=>{r.preventDefault(),r.stopPropagation(),t.flyTo({center:[e.centerLng,e.centerLat],zoom:18,duration:1e3})}));const s=new(nb().Marker)({element:a,draggable:!1}).setLngLat([e.centerLng,e.centerLat]).addTo(t);s._isStable=!0,s._lastUpdated=Date.now(),console.log("\ud83c\udfaf Before storing cluster ".concat(o," - currentMarkers ref:"),i.current),i.current[o]=s,console.log("\ud83c\udfaf After storing cluster ".concat(o," - currentMarkers ref:"),i.current),console.log("Cluster marker created for ".concat(e.nfts.length," NFTs at:"),[e.centerLng,e.centerLat]),console.log("Stored cluster marker in currentMarkers:",Object.keys(i.current))}catch(U){console.error("Error creating cluster ".concat(r,":"),U)}}),[Pt]),Ft=(0,t.useCallback)(((e,t,r)=>{const n=t.getZoom();let o;o=n<6?.01:n<8?.005:.002,console.log("Creating clusters for ".concat(e.length," NFTs with zoom: ").concat(n,", distance: ").concat(o));const i=[],a=new Set;for(let s=0;s<e.length;s++){if(a.has(s))continue;const t=e[s];console.log("\ud83d\udd0d Processing NFT ".concat(s,": ").concat(t.id," at [").concat(t.longitude,", ").concat(t.latitude,"]"));const r=parseFloat(t.longitude),n=parseFloat(t.latitude),l={centerLng:r,centerLat:n,nfts:[t]};for(let i=s+1;i<e.length;i++){if(a.has(i))continue;const t=e[i],s=parseFloat(t.longitude),c=parseFloat(t.latitude);Math.sqrt(Math.pow(r-s,2)+Math.pow(n-c,2))<o&&(l.nfts.push(t),a.add(i))}i.push(l),a.add(s),console.log("\u2705 Created cluster for NFT ".concat(s," (").concat(t.id,") with ").concat(l.nfts.length," NFTs"))}console.log("Created ".concat(i.length," clusters:"),i.map((e=>({count:e.nfts.length,center:[e.centerLng,e.centerLat]})))),console.log("Processed ".concat(a.size," NFTs out of ").concat(e.length," total NFTs")),i.forEach(((e,n)=>{const o="cluster-".concat(n);console.log("\ud83c\udfaf Creating cluster marker ".concat(o," for ").concat(e.nfts.length," NFTs")),1===e.nfts.length?(console.log("\ud83c\udfaf Creating individual marker for single NFT: ".concat(e.nfts[0].id)),Rt(e.nfts[0],t,0,r)):(console.log("\ud83c\udfaf Creating cluster marker for ".concat(e.nfts.length," NFTs")),Lt(e,t,n,r))}))}),[Rt,Lt]),zt=(0,t.useCallback)(((e,t,r)=>{console.log("\ud83c\udfaf createIndividualMarkers called with ".concat(e.length," NFTs")),e.forEach(((e,n)=>{console.log("\ud83c\udfaf Processing NFT ".concat(n,": ").concat(e.id)),Rt(e,t,n,r)}))}),[Rt]),Dt=(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r="overlay"===e?Ct:Et,n="overlay"===e?jt:At,o=Math.random().toString(36).substr(2,9);if(console.log("[".concat(o,"] updateMapMarkers called: mapType=").concat(e,", forceUpdate=").concat(t,", markersCreated=").concat(ht,", markersLocked=").concat(ft)),console.log("[".concat(o,"] Pin marker protected: ").concat(ze,", pin marker exists: ").concat(!!Ie)),console.log("[".concat(o,"] Current map reference:"),r.current),console.log("[".concat(o,"] Map type check:"),r===Ct?"overlay":"main"),Dt._lastCall&&Date.now()-Dt._lastCall<100)return void console.log("[".concat(o,"] \ud83d\udeab Debouncing rapid call, skipping"));if(Dt._lastCall=Date.now(),ze&&Ie)return void console.log("\ud83d\udea8 PIN MARKER IS PROTECTED - SKIPPING ALL MARKER UPDATES");if(!r.current)return void console.warn("Map not initialized, cannot add markers");if(!t&&ht)return void console.log("Marker updates disabled - markers are locked to coordinates");if(ft&&!t&&ht)return void console.log("Markers are locked to coordinates - no updates allowed");if(lt&&!t)return void console.log("User is interacting with map - no marker updates allowed");if(ht&&Object.keys(n.current).length>0&&!t)return void console.log("\ud83d\udeab Markers already exist and are positioned - preventing any updates");if(gt&&!t)return void console.log("Markers are set to never update - no changes allowed");if(Ue)return void console.log("Map is already loading markers, skipping...");if(r.current._isUpdatingMarkers)return void console.log("Map is already updating markers, skipping...");if(ht&&ut&&!t)return void console.log("Markers already created and stable, skipping update...");r.current._isUpdatingMarkers=!0;const i=r.current.getBounds(),a=r.current.getCenter(),s=r.current.getZoom();console.log("Map bounds:",i),console.log("Map center:",a),console.log("Current zoom:",s);try{if(!r.current.isStyleLoaded()){console.log("Map style not loaded, waiting..."),Ve(!0);const t=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;r.current&&r.current.isStyleLoaded()?(console.log("Style loaded on retry, updating markers..."),Ve(!1),Dt(e)):n<5?(console.log("Style not ready, retrying in ".concat(500*n,"ms...")),setTimeout((()=>t(n+1)),500*n)):(console.warn("Style still not loaded after multiple attempts, proceeding anyway"),Ve(!1),Dt(e))};return void setTimeout((()=>t()),1e3)}if((t||!ht||0===Object.keys(Pt.current).length)&&!ft){const e=Date.now();Object.entries(Pt.current).forEach((t=>{let[r,n]=t;n._lastUpdated&&e-n._lastUpdated<5e3?console.log("Preserving recently updated marker: ".concat(r)):n.remove()}));const t={};Object.entries(Pt.current).forEach((r=>{let[n,o]=r;o._lastUpdated&&e-o._lastUpdated<5e3&&(t[n]=o)})),Pt.current=t}console.log("NFT markers cleared, pin marker preserved"),console.log("Pin marker protected:",ze),console.log("Pin marker exists:",!!Ie);const i=r.current.getCenter(),a=r.current.getBounds();console.log("Map center:",i),console.log("Map bounds:",a),console.log("Number of NFTs to place:",M.length),console.log("Nearby NFTs data:",M);const s=r.current.getZoom();console.log("Creating markers for ".concat(M.length," NFTs with zoom-based clustering (zoom: ").concat(s.toFixed(2),")")),console.log("\ud83d\udd0d nearbyNFTs data:",M),console.log("\ud83d\udd0d nearbyNFTs length:",M.length);if(Object.values(n.current).some((e=>e&&e._wasRecentlyDragged)))return void console.log("[".concat(o,"] \ud83d\udeab Recently dragged markers detected, skipping all marker updates"));if(ht&&Object.keys(n.current).length>0&&!t)return void console.log("[".concat(o,"] \ud83d\udeab Markers already exist, preventing recreation. Current markers:"),Object.keys(n.current));const l=Object.keys(n.current).length>0,c=t||!l;if(Object.values(n.current).some((e=>e._lastUpdated&&Date.now()-e._lastUpdated<500))&&!t)return void console.log("[".concat(o,"] \u2705 Markers were just created, skipping clearing"));if(!c)return console.log("[".concat(o,"] \u2705 Markers already exist, skipping clearing")),void console.log("[".concat(o,"] \u2705 Current markers:"),Object.keys(n.current));{console.log("[".concat(o,"] \ud83d\uddd1\ufe0f Clearing existing markers for recreation...")),console.log("[".concat(o,"] \ud83d\uddd1\ufe0f Current markers before clearing:"),Object.keys(n.current)),console.log("[".concat(o,"] \ud83d\uddd1\ufe0f needsRecreation: ").concat(c,", hasExistingMarkers: ").concat(l,", forceUpdate: ").concat(t)),Object.values(n.current).forEach((e=>{if(e&&"function"===typeof e.remove){if(e._wasRecentlyDragged)return void console.log("\ud83d\udeab Preserving recently dragged marker: ".concat(e._nftId||"unknown"));e.remove()}}));const e=r.current.getContainer().querySelectorAll(".cluster-marker, .nft-marker");console.log("[".concat(o,"] \ud83d\uddd1\ufe0f Found ").concat(e.length," orphaned markers to remove")),e.forEach((e=>{e&&e.parentNode&&e.parentNode.removeChild(e)})),console.log("[".concat(o,"] \ud83d\uddd1\ufe0f Before clearing - currentMarkers ref:"),n.current),console.log("[".concat(o,"] \ud83d\uddd1\ufe0f Before clearing - currentMarkers keys:"),Object.keys(n.current)),n.current={},console.log("[".concat(o,"] \ud83d\uddd1\ufe0f After clearing - currentMarkers ref:"),n.current),console.log("[".concat(o,"] \ud83d\uddd1\ufe0f After clearing - currentMarkers keys:"),Object.keys(n.current)),console.log("[".concat(o,"] \ud83d\uddd1\ufe0f Markers cleared, current count:"),Object.keys(n.current).length)}s<10?(console.log("[".concat(o,"] \ud83d\udd0d Zoomed out - creating clusters (zoom:"),s,")"),Ft(M,r.current,n),console.log("[".concat(o,"] \ud83d\udd0d After cluster creation, markers:"),Object.keys(n.current)),console.log("[".concat(o,"] \ud83d\udd0d Total markers stored:"),Object.keys(n.current).length),console.log("[".concat(o,"] \ud83d\udd0d currentMarkers ref after cluster creation:"),n.current)):(console.log("[".concat(o,"] \ud83d\udd0d Zoomed in - creating individual markers (zoom:"),s,")"),console.log("[".concat(o,"] \ud83d\udd0d Number of NFTs to create individual markers for:"),M.length),zt(M,r.current,n),console.log("[".concat(o,"] \ud83d\udd0d After individual marker creation, markers:"),Object.keys(n.current)),console.log("[".concat(o,"] \ud83d\udd0d Total markers stored:"),Object.keys(n.current).length),console.log("[".concat(o,"] \ud83d\udd0d currentMarkers ref after individual creation:"),n.current)),console.log("[".concat(o,"] \u2705 Setting markersCreated to true")),pt(!0),console.log("[".concat(o,"] \ud83d\udd12 LOCKING markers to prevent any future updates")),yt(!0)}catch(U){console.error("Error in updateMapMarkers:",U)}finally{r.current&&(r.current._isUpdatingMarkers=!1),B(!1),Ve(!1)}}),[M,Et,Ct,At,jt,ht,ft,ut,lt,gt,ze,Ie,Ft,zt,Ue]),Nt=(0,t.useCallback)((async()=>{console.log("\ud83d\udd0d applyFilters called"),console.log("\ud83d\udd0d Current filter state:",{selectedCollection:nt,selectedRarity:it,radiusFilter:st}),console.log("\ud83d\udd0d Current nearbyNFTs count:",M.length);try{B(!0);const e={latitude:(null===re||void 0===re?void 0:re.latitude)||(null===re||void 0===re?void 0:re.lat),longitude:(null===re||void 0===re?void 0:re.longitude)||(null===re||void 0===re?void 0:re.lng),radius:999999999};if(!e.latitude||!e.longitude)return console.log("\ud83d\udd0d No valid coordinates, using existing nearbyNFTs"),V("Location not available for filtering. Please enable location access."),void B(!1);nt&&(e.collection_id=nt,console.log("\ud83d\udd0d Added collection filter:",nt)),it&&(e.rarity_level=it,console.log("\ud83d\udd0d Added rarity filter:",it)),console.log("\ud83d\udd0d Applying filters with params:",e),console.log("\ud83d\udd0d Filter state:",{selectedCollection:nt,selectedRarity:it,radiusFilter:st});const t=await bc.get("/nft/dashboard/nearby",{params:e});console.log("\ud83d\udd0d Filter API response:",t.data);const r=t.data.nfts||[];console.log("\ud83d\udd0d Filtered NFTs count:",r.length),R(r),console.log("\ud83d\udd0d Resetting marker states for filter update"),dt(!1),mt(!1),yt(!1),console.log("\ud83d\udd0d Calling updateMapMarkers with filtered NFTs:",r.length),Dt("main",!0),q("Found ".concat(r.length," NFTs matching your filters"))}catch(U){console.error("Error applying filters:",U),V("Failed to apply filters")}finally{B(!1)}}),[nt,it,st,M,B,V,R,q,Dt,null===re||void 0===re?void 0:re.lat,null===re||void 0===re?void 0:re.latitude,null===re||void 0===re?void 0:re.lng,null===re||void 0===re?void 0:re.longitude]),Bt=(0,t.useCallback)((()=>new class{onAdd(e){this._map=e,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl mapboxgl-ctrl-group",this._container.style.background="white",this._container.style.padding="10px",this._container.style.borderRadius="4px",this._container.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)",this._container.style.minWidth="200px",this._container.innerHTML='\n          <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; cursor: pointer;" id="collections-header">\n            <div style="font-weight: bold; color: #333;">\ud83d\udcda Collections</div>\n            <div style="font-size: 14px; color: #666;" id="collections-toggle">\u25b6</div>\n          </div>\n          <div id="collections-content" style="display: none; flex-direction: column; gap: 10px;">\n            <div style="margin-bottom: 10px;">\n              <label style="display: block; font-size: 12px; font-weight: bold; margin-bottom: 5px;">Collection</label>\n              <select id="nft-collection-filter" style="width: 100%; padding: 5px; border: 1px solid #ccc; border-radius: 3px;">\n                <option value="">All Collections</option>\n              </select>\n            </div>\n            <div style="margin-bottom: 10px;">\n              <label style="display: block; font-size: 12px; font-weight: bold; margin-bottom: 5px;">Rarity</label>\n              <select id="nft-rarity-filter" style="width: 100%; padding: 5px; border: 1px solid #ccc; border-radius: 3px;">\n                <option value="">All Rarities</option>\n                <option value="common">Common</option>\n                <option value="rare">Rare</option>\n                <option value="epic">Epic</option>\n                <option value="legendary">Legendary</option>\n              </select>\n            </div>\n            <button id="apply-nft-filters" style="width: 100%; padding: 8px; background: #007cba; color: white; border: none; border-radius: 3px; cursor: pointer;">\n              Apply Filters\n            </button>\n          </div>\n        ';const t=this._container.querySelector('[id="collections-header"]'),r=this._container.querySelector('[id="collections-content"]'),n=this._container.querySelector('[id="collections-toggle"]');t.addEventListener("click",(()=>{const e="none"!==r.style.display;r.style.display=e?"none":"flex",n.textContent=e?"\u25b6":"\u25bc"}));const o=this._container.querySelector("#nft-collection-filter"),i=this._container.querySelector("#nft-rarity-filter"),a=this._container.querySelector("#apply-nft-filters");return o.addEventListener("change",(()=>{console.log("Collection filter changed to:",o.value),ot(o.value),Nt()})),i.addEventListener("change",(()=>{console.log("Rarity filter changed to:",i.value),at(i.value),Nt()})),a.addEventListener("click",(()=>{console.log("Apply filters button clicked"),Nt()})),this._container}onRemove(){this._container.parentNode.removeChild(this._container),this._map=void 0}}),[ot,at,Nt]),Ut=()=>{const e={onAdd:function(e){this._map=e,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl mapboxgl-ctrl-group",this._container.style.background="rgba(255, 255, 255, 0.9)",this._container.style.borderRadius="8px",this._container.style.padding="10px",this._container.style.boxShadow="0 2px 10px rgba(0,0,0,0.1)",this._container.innerHTML='\n          <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; cursor: pointer;" id="3d-controls-header">\n            <div style="font-weight: bold; color: #333;">\ud83c\udf0d 3D Globe Controls</div>\n            <div style="font-size: 14px; color: #666;" id="3d-controls-toggle">\u25b6</div>\n          </div>\n          <div id="3d-controls-content" style="display: none; flex-direction: column; gap: 8px;">\n            <button id="reset-view" style="padding: 5px 10px; border: 1px solid #ddd; border-radius: 4px; background: white; cursor: pointer;">\n              \ud83c\udfaf Reset View\n            </button>\n            <button id="orbit-earth" style="padding: 5px 10px; border: 1px solid #ddd; border-radius: 4px; background: white; cursor: pointer;">\n              \ud83c\udf0e Orbit Earth\n            </button>\n            <button id="toggle-terrain" style="padding: 5px 10px; border: 1px solid #ddd; border-radius: 4px; background: white; cursor: pointer;">\n              \ud83c\udfd4\ufe0f Toggle Terrain\n            </button>\n            <button id="toggle-buildings" style="padding: 5px 10px; border: 1px solid #ddd; border-radius: 4px; background: white; cursor: pointer;">\n              \ud83c\udfe2 Toggle Buildings\n            </button>\n            <button id="toggle-fog" style="padding: 5px 10px; border: 1px solid #ddd; border-radius: 4px; background: white; cursor: pointer;">\n              \ud83c\udf2b\ufe0f Toggle Fog\n            </button>\n            <div style="margin-top: 5px;">\n              <label style="font-size: 12px; color: #666;">Pitch: <span id="pitch-value">0\xb0</span></label><br>\n              <input type="range" id="pitch-slider" min="0" max="85" value="0" style="width: 100%; margin-top: 2px;">\n            </div>\n            <div style="margin-top: 5px;">\n              <label style="font-size: 12px; color: #666;">Bearing: <span id="bearing-value">0\xb0</span></label><br>\n              <input type="range" id="bearing-slider" min="0" max="360" value="0" style="width: 100%; margin-top: 2px;">\n            </div>\n          </div>\n        ';const t=this._container.querySelector('[id="3d-controls-header"]'),r=this._container.querySelector('[id="3d-controls-content"]'),n=this._container.querySelector('[id="3d-controls-toggle"]');t.addEventListener("click",(()=>{const e="none"!==r.style.display;r.style.display=e?"none":"flex",n.textContent=e?"\u25b6":"\u25bc"})),this._container.querySelector("#reset-view").addEventListener("click",(()=>{e.flyTo({center:[0,0],zoom:1,pitch:0,bearing:0,duration:2e3})})),this._container.querySelector("#orbit-earth").addEventListener("click",(()=>{let t=0;const r=()=>{t+=1,e.setBearing(t),t<360&&requestAnimationFrame(r)};r()}));let o=!0;this._container.querySelector("#toggle-terrain").addEventListener("click",(()=>{try{o?(e.setTerrain(null),o=!1,this._container.querySelector("#toggle-terrain").textContent="\ud83c\udfd4\ufe0f Enable Terrain"):(e.setTerrain({source:"mapbox-dem",exaggeration:1.5}),o=!0,this._container.querySelector("#toggle-terrain").textContent="\ud83c\udfd4\ufe0f Disable Terrain")}catch(U){console.warn("Terrain toggle failed:",U.message),this._container.querySelector("#toggle-terrain").textContent="\ud83c\udfd4\ufe0f Terrain Unavailable"}}));let i=!0;this._container.querySelector("#toggle-buildings").addEventListener("click",(()=>{i?(e.setLayoutProperty("3d-buildings","visibility","none"),i=!1,this._container.querySelector("#toggle-buildings").textContent="\ud83c\udfe2 Show Buildings"):(e.setLayoutProperty("3d-buildings","visibility","visible"),i=!0,this._container.querySelector("#toggle-buildings").textContent="\ud83c\udfe2 Hide Buildings")}));let a=!0;this._container.querySelector("#toggle-fog").addEventListener("click",(()=>{try{a?(e.setFog(null),a=!1,this._container.querySelector("#toggle-fog").textContent="\ud83c\udf2b\ufe0f Enable Fog"):(e.setFog({color:"rgb(186, 210, 235)","high-color":"rgb(36, 92, 223)","horizon-blend":.02,"space-color":"rgb(11, 11, 25)","star-intensity":.6}),a=!0,this._container.querySelector("#toggle-fog").textContent="\ud83c\udf2b\ufe0f Disable Fog")}catch(U){console.warn("Fog toggle failed:",U.message),this._container.querySelector("#toggle-fog").textContent="\ud83c\udf2b\ufe0f Fog Unavailable"}}));const s=this._container.querySelector("#pitch-slider"),l=this._container.querySelector("#pitch-value");s.addEventListener("input",(t=>{const r=parseInt(t.target.value);e.setPitch(r),l.textContent=r+"\xb0"}));const c=this._container.querySelector("#bearing-slider"),u=this._container.querySelector("#bearing-value");return c.addEventListener("input",(t=>{const r=parseInt(t.target.value);e.setBearing(r),u.textContent=r+"\xb0"})),e.on("pitch",(()=>{const t=Math.round(e.getPitch());s.value=t,l.textContent=t+"\xb0"})),e.on("bearing",(()=>{const t=Math.round(e.getBearing());c.value=t,u.textContent=t+"\xb0"})),this._container},onRemove:function(){this._container.parentNode.removeChild(this._container),this._map=void 0}};return e},Vt=(0,t.useCallback)(((e,t)=>{const r="overlay"===t?Ct:Et;if(r.current)return void console.log("Map already initialized for",t);console.log("Initializing map for",t,"with container:",e),console.log("Mapbox token check:","Token exists"),console.log("Token value:","pk.eyJ1Ijoic2VyZ2UzNjl4MzMiLCJhIjoiY20zZHh6M2h2MDVoZzJqcTdudXhidm5kdyJ9.31fpP6C_HjNaTEN3C0fDTg".substring(0,10)+"..."),console.log("Mapbox token found, initializing map...");const n=re?[re.longitude,re.latitude]:[0,0];try{r.current=new(nb().Map)({container:e,style:"mapbox://styles/mapbox/satellite-streets-v12",center:n,zoom:1,pitch:0,bearing:0,projection:"globe",antialias:!0,optimizeForTerrain:!0,maxPitch:85,maxZoom:22,minZoom:0,maxBounds:[[-180,-85],[180,85]],renderWorldCopies:!1,interactive:!0,globe:{enableAtmosphere:!0,atmosphereColor:"#FFD700",atmosphereIntensity:.3,enableStars:!0,starIntensity:.5}}),console.log("Map created for",t),r.current.on("load",(()=>{console.log("Map loaded for",t);const e=new(nb().NavigationControl)({showCompass:!0,showZoom:!0,visualizePitch:!0,showFullscreen:!0});r.current.addControl(e,"top-right"),setTimeout((()=>{r.current.getContainer().querySelectorAll(".mapboxgl-ctrl-top-right").forEach((e=>{e.style.top="80px"}));r.current.getContainer().querySelectorAll(".mapboxgl-ctrl-top-left").forEach((e=>{e.style.top="80px"}))}),100),r.current.addControl(new(nb().ScaleControl)({maxWidth:100,unit:"metric"}),"bottom-left");const n=Ut();r.current.addControl(n,"top-left"),r.current.addControl(new(nb().GeolocateControl)({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0}),"top-right"),r.current.addControl(new(nb().FullscreenControl),"top-right"),r.current.on("dblclick",(e=>{console.log("Map double-clicked, zooming in to:",e.lngLat),r.current.flyTo({center:[e.lngLat.lng,e.lngLat.lat],zoom:18,duration:1e3})}));const o=Bt();r.current.addControl(o,"top-left");try{r.current.getSource("composite")&&(r.current.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:10,paint:{"fill-extrusion-color":["interpolate",["linear"],["get","height"],0,"#87CEEB",50,"#4682B4",100,"#4169E1",200,"#0000CD"],"fill-extrusion-height":["case",["has","height"],["get","height"],0],"fill-extrusion-base":["case",["has","min_height"],["get","min_height"],0],"fill-extrusion-opacity":.8}}),console.log("Enhanced 3D buildings layer added"));try{r.current.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14}),r.current.setTerrain({source:"mapbox-dem",exaggeration:1.5}),console.log("3D terrain added successfully")}catch(i){console.warn("3D terrain not supported:",i.message)}try{r.current.setFog({color:"rgb(186, 210, 235)","high-color":"rgb(36, 92, 223)","horizon-blend":.02,"space-color":"rgb(11, 11, 25)","star-intensity":.6}),console.log("Fog effects added successfully")}catch(a){console.warn("Fog effects not supported:",a.message)}console.log("3D terrain, fog, and enhanced buildings added")}catch(U){console.log("Could not add 3D layers:",U.message)}console.log("Zoom-based marker updates disabled to prevent infinite loops"),r.current.on("movestart",(()=>{ct(!0),console.log("User started moving map - BLOCKING marker updates")})),r.current.on("moveend",(()=>{ct(!1),console.log("User finished moving map - allowing marker updates")})),r.current.on("zoomstart",(()=>{console.log("Zoom started - BLOCKING marker updates"),ct(!0)})),r.current.on("dragstart",(()=>{ct(!0),console.log("Map drag started - BLOCKING marker updates")})),r.current.on("dragend",(()=>{ct(!1),console.log("Map drag ended - allowing marker updates")})),r.current.on("zoomend",(()=>{console.log("Zoom ended"),ct(!1);Object.values(Pt.current).some((e=>e&&e._wasRecentlyDragged))?console.log("\ud83d\udeab Recently dragged markers detected - skipping zoom end marker updates"):ze&&Ie&&console.log("\ud83d\udea8 PIN MARKER IS PROTECTED - IGNORING ZOOM END")})),r.current.on("error",(e=>{var r;console.error("Map error for",t,":",e),V("Map error: ".concat((null===(r=e.error)||void 0===r?void 0:r.message)||"Unknown error"))})),setTimeout((()=>{console.log("Style loaded via timeout for",t),M.length>0&&(console.log("Updating markers for",M.length,"NFTs"),"main"===t&&(console.log("Updating main map markers..."),Dt(t,!0)),"overlay"===t&&(console.log("Updating overlay map markers..."),Dt(t,!0)))}),1e3)}))}catch(U){console.error("Error initializing map:",U),V("Failed to initialize map: ".concat(U.message))}}),[re,M,Dt,ze,Ie,Bt]);(0,t.useEffect)((()=>{if(x&&"nft_manager"!==x.role&&"admin"!==x.role)return V("You do not have permission to view this dashboard."),void B(!1);const e=setTimeout((()=>{B(!1)}),5e3);if(S&&null!==_&&void 0!==_&&_.publicKey&&!We&&!N){const t=setTimeout((()=>{It()}),500);return()=>{clearTimeout(e),clearTimeout(t)}}return()=>clearTimeout(e)}),[x,S,null===_||void 0===_?void 0:_.publicKey,It,N,We]),(0,t.useEffect)((()=>{S||Xe(!1)}),[S]),(0,t.useEffect)((()=>{S&&null!==_&&void 0!==_&&_.publicKey&&!Ke&&(console.log("Wallet connected, fetching user collection..."),It())}),[S,null===_||void 0===_?void 0:_.publicKey,Ke,It]),(0,t.useEffect)((()=>{x?(console.log("NFTDashboard: Setting user in wallet context:",x),A(x)):(console.log("NFTDashboard: No user, clearing wallet context"),A(null))}),[x,A]),(0,t.useEffect)((()=>{if(ae&&oe){const e=()=>{if(document.getElementById("nft-details-mini-map")&&!Te){if(Te&&"function"===typeof Te.remove)try{Te.remove()}catch(U){console.warn("Error removing existing mini map:",U)}const e=new(nb().Map)({container:"nft-details-mini-map",style:"mapbox://styles/mapbox/streets-v11",center:[parseFloat(oe.longitude),parseFloat(oe.latitude)],zoom:15,interactive:!0});new(nb().Marker)({color:"red"}).setLngLat([parseFloat(oe.longitude),parseFloat(oe.latitude)]).addTo(e),e.on("load",(()=>{e.addSource("nft-radius",{type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:[parseFloat(oe.longitude),parseFloat(oe.latitude)]}}}),e.addLayer({id:"nft-radius-circle",type:"circle",source:"nft-radius",paint:{"circle-radius":{stops:[[0,0],[20,oe.radius_meters||50]],base:2},"circle-color":"#ff0000","circle-opacity":.2,"circle-stroke-color":"#ff0000","circle-stroke-width":2}})})),Ee(e)}};setTimeout(e,100)}return()=>{if(Te&&"function"===typeof Te.remove){try{Te.remove()}catch(U){console.warn("Error removing mini map:",U)}Ee(null)}}}),[ae,oe,Te]),(0,t.useEffect)((()=>{if(console.log("NFTDashboard: Auto-connect effect triggered",{user:x?{id:x.id,email:x.email,public_key:x.public_key,allKeys:Object.keys(x)}:null,isConnected:S,publicKey:C}),x&&x.public_key){console.log("NFTDashboard: User logged in with public key:",x.public_key),console.log("NFTDashboard: Current wallet connection state:",{isConnected:S,publicKey:C}),console.log("NFTDashboard: Has manually disconnected:",j);const e=!S||C&&C!==x.public_key;if(C&&C!==x.public_key&&(console.log("NFTDashboard: Different user detected, clearing wallet completely"),E(),P(!1)),e&&!j){console.log("NFTDashboard: Wallet needs reconnection:",{needsReconnection:e,currentPublicKey:C,userPublicKey:x.public_key});const t=setTimeout((()=>{!S||C&&C!==x.public_key?(console.log("NFTDashboard: Attempting wallet auto-connection..."),T(x.public_key).catch((e=>{console.error("NFTDashboard: Auto-connection failed, will retry:",e),setTimeout((()=>{(!S||C&&C!==x.public_key)&&(console.log("NFTDashboard: Retrying wallet auto-connection..."),T(x.public_key))}),1e3)}))):console.log("NFTDashboard: Wallet already connected during timeout")}),1e3);return()=>clearTimeout(t)}j?console.log("NFTDashboard: User has manually disconnected, skipping auto-connection"):console.log("NFTDashboard: Wallet already connected to correct user")}else if(x&&!x.public_key){console.log("NFTDashboard: User has no public_key in profile, checking for saved wallet data...");const e=localStorage.getItem("stellar_public_key");if(e&&!S){console.log("NFTDashboard: Found saved wallet data, attempting auto-connection with saved public key:",e);const t=setTimeout((()=>{S||(console.log("NFTDashboard: Attempting auto-connection with saved public key..."),T(e).catch((e=>{console.error("NFTDashboard: Auto-connection with saved key failed:",e)})))}),1e3);return()=>clearTimeout(t)}console.log("NFTDashboard: No saved wallet data found or wallet already connected")}}),[x,S,C,T,E,j]),(0,t.useEffect)((()=>{S&&j&&(console.log("NFTDashboard: Wallet connected, resetting manual disconnect flag"),P(!1))}),[S,j,P]),(0,t.useEffect)((()=>{!x||"nft_manager"!==x.role&&"admin"!==x.role||navigator.geolocation&&(Ae(!0),navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:r}=e.coords;console.log("Auto-detected location:",{latitude:t,longitude:r}),ne({latitude:t,longitude:r}),q("Location detected automatically!"),Ae(!1),setTimeout((()=>{q("")}),3e3),S&&null!==_&&void 0!==_&&_.publicKey&&Mt({latitude:t,longitude:r})}),(e=>{console.log("Automatic location detection failed:",e.message),Ae(!1)}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5}))}),[x,S,_,Mt]);(0,t.useEffect)((()=>{de(0)}),[M]),(0,t.useEffect)((()=>{2===I&&kt.current&&!Et.current&&Vt(kt.current,"main")}),[I,Vt]),(0,t.useEffect)((()=>{if(pe){const e=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(console.log("Attempt ".concat(t," to initialize overlay map...")),Tt.current&&null!==Tt.current.offsetParent&&!Ct.current){console.log("Container found and visible, initializing map...");try{Vt(Tt.current,"overlay")}catch(U){console.error("Map initialization failed:",U),V("Failed to initialize map. Please check your Mapbox token.")}}else t<5?(console.log("Container not ready, retrying in ".concat(300*t,"ms...")),setTimeout((()=>e(t+1)),300*t)):(console.warn("Overlay map initialization failed after 5 attempts - container not ready"),V("Map failed to load. Please refresh the page and try again."))};setTimeout((()=>e()),500)}!pe&&Ct.current&&(console.log("Cleaning up overlay map..."),Ct.current.remove(),Ct.current=null,jt.current={})}),[pe,Vt]),(0,t.useEffect)((()=>{pe&&Ct.current&&M.length>0&&(console.log("Overlay map is ready, forcing marker update with",M.length,"NFTs"),setTimeout((()=>{Ct.current&&Ct.current.isStyleLoaded()&&Dt("overlay")}),1e3))}),[pe,M.length,Dt]),(0,t.useEffect)((()=>{M.length>0&&(console.log("Updating markers for",M.length,"NFTs"),Et.current&&(console.log("Updating main map markers..."),Dt("main",!0)),Ct.current&&(console.log("Updating overlay map markers..."),Dt("overlay",!0)))}),[M,Dt]),(0,t.useEffect)((()=>{Et.current&&M.length>0&&!ht&&(console.log("Force creating initial markers..."),Dt("main",!0))}),[M.length,ht,Dt]),(0,t.useEffect)((()=>()=>{bt(!1)}),[]),(0,t.useEffect)((()=>{const e=localStorage.getItem("nftMintSuccess");if(e)try{const t=JSON.parse(e);console.log("Success overlay found in NFTDashboard:",t),_t(t)}catch(U){console.error("Error parsing saved success data:",U),localStorage.removeItem("nftMintSuccess")}}),[]);const Wt=()=>{V(""),q(""),navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:r}=e.coords,n={latitude:t,longitude:r};console.log("Manual location detection:",n),ne(n),q("Location obtained successfully!"),setTimeout((()=>{q("")}),3e3),S&&Mt(n)}),(e=>{console.error("Error getting user location:",e),V("Could not retrieve your current location. Please enable location services."),setTimeout((()=>{V("")}),5e3),ve(!0)}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5}):(V("Geolocation is not supported by your browser."),setTimeout((()=>{V("")}),5e3),ve(!0))},qt=async()=>{if(!je.address.trim())return void V("Please enter an address to search.");const e=await(async e=>{if(!e.trim())return null;Be(!0);try{const t=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json?access_token=").concat(GE,"&limit=1"));if(!t.ok)throw new Error("Geocoding failed");const r=await t.json();if(r.features&&r.features.length>0){const[e,t]=r.features[0].center;return{latitude:t,longitude:e,address:r.features[0].place_name}}return null}catch(U){return console.error("Geocoding error:",U),V("Failed to find location for the address."),null}finally{Be(!1)}})(je.address);e&&(Pe((t=>d(d({},t),{},{latitude:e.latitude,longitude:e.longitude}))),ke(e),Et.current&&(Zt(e.longitude,e.latitude),Et.current.flyTo({center:[e.longitude,e.latitude],zoom:20,pitch:"3d"===K?60:0,bearing:0,duration:2e3,essential:!0})),q("Location found: ".concat(e.address)))},Ht=(0,t.useCallback)((async()=>{try{const e=await bc.get("/nft/collections");D(e.data||[])}catch(e){console.error("Error fetching collections:",e)}}),[]);(0,t.useEffect)((()=>{Ht()}),[Ht]),(0,t.useEffect)((()=>{be&&z.length>0&&!je.collection_id&&Pe((e=>d(d({},e),{},{collection_id:z[0].id})))}),[be,z,je.collection_id]);const Gt=e=>{const[t,r]=e.center;Pe((n=>d(d({},n),{},{address:e.place_name,latitude:r,longitude:t}))),Ye([]),$e(!1),Et.current&&(Zt(t,r),Et.current.flyTo({center:[t,r],zoom:20,pitch:"3d"===K?60:0,bearing:0,duration:2e3,essential:!0})),q("Location found: ".concat(e.place_name))},Kt=e=>{e.target.closest(".search-container")||$e(!1)},Xt=e=>{if(X(e),Et.current){switch(e){case"2d":Et.current.setStyle("mapbox://styles/mapbox/streets-v12"),Et.current.easeTo({pitch:0,bearing:0,duration:1e3});break;case"3d":Et.current.setStyle("mapbox://styles/mapbox/satellite-streets-v12"),Et.current.easeTo({pitch:60,bearing:0,duration:1e3});break;case"satellite":Et.current.setStyle("mapbox://styles/mapbox/satellite-v9"),Et.current.easeTo({pitch:0,bearing:0,duration:1e3})}"3d"===e&&setTimeout((()=>{if(Et.current&&!Et.current.getLayer("3d-buildings"))try{const e=Et.current.getStyle().sources;e&&e.composite&&e.composite.tiles&&Et.current.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["case",["has","height"],["get","height"],0],"fill-extrusion-base":["case",["has","min_height"],["get","min_height"],0],"fill-extrusion-opacity":.6}})}catch(U){console.log("3D buildings not available for this style:",U)}}),1e3)}},Zt=(e,t)=>{if(console.log("\ud83d\udea8 addPinMarker called with coordinates:",{lng:e,lat:t}),console.log("\ud83d\udea8 Current pinMarker state:",Ie),console.log("\ud83d\udea8 Pin marker locked:",Me),console.log("\ud83d\udea8 Is dragging pin:",Le),console.log("\ud83d\udea8 Pin marker protected:",ze),console.log("\ud83d\udea8 Stack trace:",(new Error).stack),ze)return void console.log("\ud83d\udea8 PIN MARKER IS PROTECTED - BLOCKING RECREATION");if(Me&&Ie||Le)return void console.log("\ud83d\udea8 Pin marker is locked or being dragged, not recreating");if(Ie&&Se){const r=Se.longitude,n=Se.latitude,o=1e-6;if(Math.abs(e-r)<o&&Math.abs(t-n)<o)return void console.log("Pin marker coordinates are the same, not recreating")}if(Ie&&Me)return void console.log("Pin marker is locked and exists, not recreating");if(Ie&&!ze)console.log("Removing existing pin marker"),Ie._lockInterval&&clearInterval(Ie._lockInterval),Ie.remove(),Oe(null);else if(Ie&&ze)return void console.log("\ud83d\udea8 PIN MARKER IS PROTECTED - NOT REMOVING");if(!e||!t||isNaN(e)||isNaN(t))return console.error("Invalid coordinates for pin marker:",{lng:e,lat:t}),void V("Invalid coordinates for pin marker");const r=document.createElement("div");r.innerHTML="\ud83d\udccd",r.style.fontSize="32px",r.style.cursor="move",r.style.zIndex="1000",r.style.filter="drop-shadow(0 2px 4px rgba(0,0,0,0.3))",r.style.transition="all 0.2s ease",console.log("Creating pin marker at coordinates:",[e,t]);const n=new(nb().Marker)({element:r,draggable:!0}).setLngLat([e,t]).addTo(Et.current);n.on("dragstart",(()=>{console.log("\ud83d\udd12 Pin drag started - ULTRA PROTECTION ACTIVATED"),Fe(!0),De(!0),r.style.transform="scale(1.3)",r.style.filter="drop-shadow(0 6px 12px rgba(0,0,0,0.5))",r.style.zIndex="1001"})),n.on("drag",(()=>{const{lng:e,lat:t}=n.getLngLat();q("Dragging to: ".concat(t.toFixed(8),", ").concat(e.toFixed(8)))})),n.on("dragend",(()=>{console.log("\ud83d\udd12 Pin drag ended - MAINTAINING ULTRA PROTECTION");const{lng:e,lat:t}=n.getLngLat();console.log("Final drag coordinates:",{lng:e,lat:t}),r.style.transform="scale(1)",r.style.filter="drop-shadow(0 2px 4px rgba(0,0,0,0.3))",r.style.zIndex="1000",Pe((r=>d(d({},r),{},{latitude:t,longitude:e}))),ke({latitude:t,longitude:e}),console.log("\ud83d\udd12 Pin drag ended - coordinates updated:",{lat:t,lng:e}),console.log("\ud83d\udd12 Pin location state updated:",{latitude:t,longitude:e}),console.log("\ud83d\udd12 Form state should now have:",{latitude:t,longitude:e}),q("Pin positioned at: ".concat(t.toFixed(8),", ").concat(e.toFixed(8))),setTimeout((()=>{Fe(!1),console.log("\ud83d\udd12 Pin dragging flag reset, but PROTECTION REMAINS ACTIVE")}),2e3),De(!0),n.setLngLat([e,t]),console.log("\ud83d\udd12 Pin marker locked to exact coordinates:",[e,t])})),Oe(n),Re(!0),De(!0),console.log("\ud83d\udd12 Pin marker created, stored in state, locked, and PROTECTED");const o=setInterval((()=>{if(n&&ze){const r=n.getLngLat(),o=[e,t];(Math.abs(r.lng-o[0])>1e-6||Math.abs(r.lat-o[1])>1e-6)&&(console.log("\ud83d\udd12 Pin marker position corrected:",r,"->",o),n.setLngLat(o))}}),100);n._lockInterval=o},Yt=async e=>{if(re)if(S&&C){B(!0),V(""),q("");try{if(console.log("Collecting NFT on Stellar blockchain:",e),!e.smart_contract_address)throw new Error("NFT does not have a smart contract address. Cannot collect on blockchain.");const t=await Ic.transferLocationNFT(e.smart_contract_address,e.token_id||e.id,e.current_owner||e.owner,C,re.latitude,re.longitude);console.log("Real blockchain NFT collection successful:",t),await bc.post("/nft/collect",{nft_id:e.id,user_latitude:re.latitude,user_longitude:re.longitude,blockchain_transaction_hash:t.transactionHash,blockchain_ledger:t.ledger,blockchain_network:"testnet"}),q("NFT collected successfully! Transaction: ".concat(t.transactionHash)),Ot(),Xe(!1),It()}catch(t){console.error("Error collecting NFT on blockchain:",t),V(t.message||"Failed to collect NFT on Stellar blockchain.")}finally{B(!1)}}else V("Wallet not connected. Please connect your wallet to collect NFTs.");else V("Location not available. Cannot collect NFT.")},Jt=e=>{ie(e),se(!0)},$t=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let t;if(e)t=e;else{const e=tt.trim();if(!e)return;console.log("Searching for:",e);const r=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json?access_token=").concat("pk.eyJ1Ijoic2VyZ2UzNjl4MzMiLCJhIjoiY20zZHh6M2h2MDVoZzJqcTdudXhidm5kdyJ9.31fpP6C_HjNaTEN3C0fDTg","&limit=1"));if(!r.ok)throw new Error("Search failed");const n=await r.json();if(!(n.features&&n.features.length>0))throw new Error("No results found");t=n.features[0]}const[r,n]=t.center;console.log("Navigating to:",t.place_name,"at",r,n),Ct.current?Ct.current.flyTo({center:[r,n],zoom:12,duration:2e3}):console.error("Overlay map not available for navigation"),rt(""),Ye([]),$e(!1)}catch(U){console.error("Search error:",U),V("Search failed. Please try again.")}},Qt=()=>{fe(!1),Ct.current&&(Ct.current.remove(),Ct.current=null,jt.current={})};(0,t.useEffect)((()=>()=>{Et.current&&(Et.current.remove(),Et.current=null,At.current={}),Ct.current&&(Ct.current.remove(),Ct.current=null,jt.current={})}),[]),(0,t.useEffect)((()=>(document.addEventListener("mousedown",Kt),()=>{document.removeEventListener("mousedown",Kt)})),[]);const er=e=>{const t=document.querySelector(".map-search-container");t&&!t.contains(e.target)&&$e(!1)};return(0,t.useEffect)((()=>{const e=setTimeout((()=>{document.addEventListener("mousedown",er)}),100);return()=>{clearTimeout(e),document.removeEventListener("mousedown",er)}}),[]),N&&!M.length&&!L.length&&S?(0,St.jsx)(dp,{maxWidth:"lg",sx:{mt:4,mb:4,display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:(0,St.jsx)(Xd,{})}):U&&!x?(0,St.jsx)(dp,{maxWidth:"lg",sx:{mt:4,mb:4},children:(0,St.jsx)(n_,{severity:"error",children:U})}):(0,St.jsxs)(dp,{maxWidth:"xl",sx:{mt:{xs:2,md:4},mb:{xs:2,md:4}},children:[(0,St.jsxs)(uu,{sx:{background:"linear-gradient(135deg, #000000 0%, #1a1a1a 100%)",borderRadius:2,p:{xs:2,md:3},mb:{xs:3,md:4},color:"white"},children:[(0,St.jsxs)(uu,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mb:{xs:2,md:3},flexDirection:{xs:"column",sm:"row"},gap:{xs:2,sm:0}},children:[(0,St.jsx)(Bu,{variant:"h4",component:"h1",sx:{color:"white",fontSize:{xs:"1.5rem",sm:"2rem",md:"2.125rem"}},children:"\ud83d\ude80 Enhanced NFT Dashboard"}),(0,St.jsxs)(uu,{display:"flex",gap:2,alignItems:"center",sx:{flexDirection:{xs:"column",sm:"row"},width:{xs:"100%",sm:"auto"}},children:[(0,St.jsxs)(Ap,{variant:"outlined",onClick:()=>Y(!Z),sx:{backgroundColor:"rgba(255, 215, 0, 0.1)",color:"#FFD700",border:"1px solid #FFD700","&:hover":{backgroundColor:"rgba(255, 215, 0, 0.2)",border:"1px solid #FFA500",color:"#FFA500"}},startIcon:(0,St.jsx)(_g,{}),children:[Z?"Hide":"Show"," Advanced Tools"]}),(0,St.jsx)(Ap,{variant:"contained",onClick:()=>b("/dashboard/nft"),sx:{background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",color:"black",border:"1px solid #FFD700","&:hover":{background:"linear-gradient(135deg, #FFA500 0%, #E6C200 100%)",boxShadow:"0 4px 12px rgba(255, 215, 0, 0.4)"},fontWeight:"bold"},startIcon:(0,St.jsx)(lE,{}),children:"\ud83c\udfe0 Back to Main Dashboard"})]})]}),Z&&(0,St.jsxs)($h,{sx:{p:3,mb:3,background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:2},children:[(0,St.jsx)(Bu,{variant:"h6",sx:{color:"white",mb:2},children:"\ud83d\udee0\ufe0f Advanced Map Tools"}),(0,St.jsxs)(Jm,{container:!0,spacing:3,children:[(0,St.jsxs)(Jm,{item:!0,xs:12,md:6,children:[(0,St.jsx)(Bu,{variant:"subtitle1",sx:{color:"white",mb:1},children:"Map Style"}),(0,St.jsx)(uu,{display:"flex",gap:1,flexWrap:"wrap",children:["streets","satellite","dark","light","outdoors"].map((e=>(0,St.jsx)(Ap,{variant:H===e?"contained":"outlined",size:"small",onClick:()=>(e=>{if(G(e),Et){const t={streets:"mapbox://styles/mapbox/streets-v12",satellite:"mapbox://styles/mapbox/satellite-v9",dark:"mapbox://styles/mapbox/dark-v11",light:"mapbox://styles/mapbox/light-v11",outdoors:"mapbox://styles/mapbox/outdoors-v12"};Et.setStyle(t[e])}})(e),sx:{color:"white",borderColor:"rgba(255, 255, 255, 0.3)","&.MuiButton-contained":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:e.charAt(0).toUpperCase()+e.slice(1)},e)))})]}),(0,St.jsxs)(Jm,{item:!0,xs:12,md:6,children:[(0,St.jsx)(Bu,{variant:"subtitle1",sx:{color:"white",mb:1},children:"Map View"}),(0,St.jsxs)(uu,{display:"flex",gap:1,children:[(0,St.jsx)(Ap,{variant:"2d"===K?"contained":"outlined",size:"small",onClick:()=>te("2d"),sx:{color:"white",borderColor:"rgba(255, 255, 255, 0.3)","&.MuiButton-contained":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"2D View"}),(0,St.jsx)(Ap,{variant:"3d"===K?"contained":"outlined",size:"small",onClick:()=>te("3d"),sx:{color:"white",borderColor:"rgba(255, 255, 255, 0.3)","&.MuiButton-contained":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"3D View"})]})]}),(0,St.jsxs)(Jm,{item:!0,xs:12,md:6,children:[(0,St.jsx)(Bu,{variant:"subtitle1",sx:{color:"white",mb:1},children:"Map Layers"}),(0,St.jsx)(uu,{display:"flex",gap:1,flexWrap:"wrap",children:Object.entries(J).map((e=>{let[t,r]=e;return(0,St.jsx)(Ap,{variant:r?"contained":"outlined",size:"small",onClick:()=>(e=>{if($((t=>d(d({},t),{},{[e]:!t[e]}))),Et){const t="layer-".concat(e);if(Et.getLayer(t)){const r=J[e]?"none":"visible";Et.setLayoutProperty(t,"visibility",r)}}})(t),sx:{color:"white",borderColor:"rgba(255, 255, 255, 0.3)","&.MuiButton-contained":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:t.charAt(0).toUpperCase()+t.slice(1)},t)}))})]}),(0,St.jsxs)(Jm,{item:!0,xs:12,md:6,children:[(0,St.jsx)(Bu,{variant:"subtitle1",sx:{color:"white",mb:1},children:"Search Filters"}),(0,St.jsxs)(uu,{display:"flex",gap:2,alignItems:"center",children:[(0,St.jsxs)(Bu,{variant:"body2",sx:{color:"white"},children:["Distance: ",Q.distance/1e3,"km"]}),(0,St.jsx)("input",{type:"range",min:"1000",max:"50000",step:"1000",value:Q.distance,onChange:e=>{return t="distance",r=parseInt(e.target.value),ee((e=>d(d({},e),{},{[t]:r}))),void("distance"===t&&Ot());var t,r},style:{flex:1,margin:"0 10px"}})]})]})]})]}),(0,St.jsxs)(Jm,{container:!0,spacing:2,sx:{mb:3},children:[(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,md:4,children:(0,St.jsxs)($h,{sx:{p:2,background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:2},children:[(0,St.jsxs)(uu,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,St.jsx)(Ag,{sx:{color:"white",mr:1}}),(0,St.jsx)(Bu,{variant:"h6",sx:{color:"white",fontWeight:"bold"},children:"Wallet Status"})]}),(0,St.jsx)(Bu,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.8)",mb:2},children:S?"\u2705 Connected":"\u274c Not Connected"}),S&&null!==_&&void 0!==_&&_.publicKey?(0,St.jsxs)(uu,{children:[(0,St.jsxs)(Bu,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.8)",display:"block",mb:1},children:[null===_||void 0===_||null===(e=_.publicKey)||void 0===e?void 0:e.substring(0,12),"..."]}),null!==k&&(0,St.jsxs)(Bu,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.8)",display:"block",mb:1},children:["Balance: ",k.toFixed(2)," XLM"]}),(0,St.jsx)(Ap,{variant:"outlined",onClick:()=>{console.log("NFTDashboard: Manual disconnect triggered"),P(!0),w()},size:"small",color:"error",sx:{borderColor:"rgba(255, 255, 255, 0.5)",color:"white","&:hover":{borderColor:"white"}},children:"Disconnect"})]}):(0,St.jsx)(Ap,{variant:"contained",startIcon:(0,St.jsx)(L_,{}),onClick:()=>ge(!0),size:"small",disabled:N,sx:{background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",color:"black","&:hover":{background:"linear-gradient(135deg, #FFA500 0%, #E6C200 100%)",boxShadow:"0 4px 12px rgba(255, 215, 0, 0.4)"},fontWeight:"bold"},children:N?"Connecting...":"Connect Wallet"})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,md:4,children:(0,St.jsxs)($h,{sx:{p:2,background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:2},children:[(0,St.jsxs)(uu,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,St.jsx)(GT,{sx:{color:"white",mr:1}}),(0,St.jsx)(Bu,{variant:"h6",sx:{color:"white",fontWeight:"bold"},children:"My Collection"})]}),(0,St.jsxs)(Bu,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.8)",mb:2},children:[L.length," NFTs collected"]}),(0,St.jsx)(Ap,{variant:"contained",startIcon:(0,St.jsx)(GT,{}),onClick:()=>O(1),size:"small",disabled:!S||!(null!==_&&void 0!==_&&_.publicKey),sx:{background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",color:"black","&:hover":{background:"linear-gradient(135deg, #FFA500 0%, #E6C200 100%)",boxShadow:"0 4px 12px rgba(255, 215, 0, 0.4)"},fontWeight:"bold"},children:"View Collection"})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,md:4,children:(0,St.jsxs)($h,{sx:{p:2,background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:2},children:[(0,St.jsxs)(uu,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,St.jsx)(_g,{sx:{color:"white",mr:1}}),(0,St.jsx)(Bu,{variant:"h6",sx:{color:"white",fontWeight:"bold"},children:"NFT Map"})]}),(0,St.jsxs)(Bu,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.8)",mb:2},children:[M.length," NFTs nearby"]}),(0,St.jsx)(Ap,{variant:"contained",startIcon:(0,St.jsx)(_g,{}),onClick:()=>{console.log("Opening fullscreen map dialog..."),fe(!0),setTimeout((()=>{Tt.current&&!Ct.current&&(console.log("Manual map initialization triggered..."),Vt(Tt.current,"overlay"))}),500)},size:"small",disabled:!S||!(null!==_&&void 0!==_&&_.publicKey)||!re,sx:{background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",color:"black","&:hover":{background:"linear-gradient(135deg, #FFA500 0%, #E6C200 100%)",boxShadow:"0 4px 12px rgba(255, 215, 0, 0.4)"},fontWeight:"bold"},children:"Open Map"})]})})]}),S&&(null===_||void 0===_?void 0:_.publicKey)&&(0,St.jsxs)(uu,{sx:{display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[(0,St.jsx)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(vg,{}),onClick:Wt,size:"small",disabled:N,sx:{borderColor:"rgba(255, 255, 255, 0.5)",color:"white","&:hover":{borderColor:"white",background:"rgba(255, 255, 255, 0.1)"}},children:Ce?"Detecting...":"Get Location"}),(0,St.jsx)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(vg,{}),onClick:()=>ve(!0),size:"small",sx:{borderColor:"rgba(255, 255, 255, 0.5)",color:"white","&:hover":{borderColor:"white",background:"rgba(255, 255, 255, 0.1)"}},children:"Location Settings"}),(0,St.jsx)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(ET,{}),onClick:Ot,size:"small",disabled:!re,sx:{borderColor:"rgba(255, 255, 255, 0.5)",color:"white","&:hover":{borderColor:"white",background:"rgba(255, 255, 255, 0.1)"}},children:"Find Nearby NFTs"}),re&&(0,St.jsxs)(Bu,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.8)"},children:["\ud83d\udccd ",re.latitude.toFixed(4),", ",re.longitude.toFixed(4)]})]})]}),U&&(0,St.jsx)(n_,{severity:"error",sx:{mb:2},children:U}),W&&(0,St.jsx)(n_,{severity:"success",sx:{mb:2},children:W}),(0,St.jsx)(uu,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:(0,St.jsxs)(FS,{value:I,onChange:(e,t)=>{O(t)},"aria-label":"NFT dashboard tabs",children:[(0,St.jsx)(US,d({label:"Nearby NFTs"},ZE(0))),(0,St.jsx)(US,d({label:"My Collection"},ZE(1))),(0,St.jsx)(US,d({label:"NFT Map"},ZE(2))),(0,St.jsx)(US,d({label:"Stellar Wallet"},ZE(3)))]})}),(0,St.jsxs)(XE,{value:I,index:0,children:[(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,children:"Nearby NFTs"}),N?(0,St.jsxs)(uu,{display:"flex",flexDirection:"column",alignItems:"center",p:4,children:[(0,St.jsx)(Xd,{size:40,thickness:4,sx:{color:"#007cba",mb:2}}),(0,St.jsx)(Bu,{variant:"h6",sx:{mb:1,color:"#333",fontWeight:"bold"},children:"Loading NFT Map..."}),(0,St.jsx)(Bu,{variant:"body2",sx:{color:"#666"},children:"Fetching nearby NFTs and initializing 3D view"})]}):0===M.length?(0,St.jsx)(n_,{severity:"info",children:"No NFTs found nearby. Make sure you have enabled location services and are within range of pinned NFTs."}):(0,St.jsx)(Jm,{container:!0,spacing:2,children:M.map((e=>{var t,r,n;return(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,md:3,lg:2,children:(0,St.jsxs)(tg,{children:[e.full_ipfs_url&&(0,St.jsx)(rE,{component:"img",height:"120",image:e.full_ipfs_url,alt:(null===(t=e.collection)||void 0===t?void 0:t.name)||"NFT",onError:e=>{e.target.style.display="none"}}),(0,St.jsxs)(ig,{sx:{p:1.5},children:[(0,St.jsx)(Bu,{variant:"subtitle2",component:"div",sx:{fontWeight:"bold",mb:.5},children:(null===(r=e.collection)||void 0===r?void 0:r.name)||"Unknown NFT"}),(0,St.jsxs)(uu,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5,children:[(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",children:(null===(n=e.collection)||void 0===n?void 0:n.rarity_level)||"common"}),(0,St.jsxs)(Bu,{variant:"caption",color:"text.secondary",children:[Math.round(e.distance||0),"m"]})]}),(0,St.jsxs)(Bu,{variant:"caption",color:"text.secondary",children:["Radius: ",e.radius_meters,"m"]})]}),(0,St.jsxs)(PT,{sx:{p:1,pt:0},children:[(0,St.jsx)(Ap,{size:"small",startIcon:(0,St.jsx)(nE,{}),onClick:()=>Jt(e),sx:{fontSize:"0.75rem",minWidth:"auto",px:1},children:"Details"}),(0,St.jsx)(Ap,{size:"small",variant:"contained",startIcon:(0,St.jsx)(oE,{}),onClick:()=>Yt(e),disabled:!re,sx:{fontSize:"0.75rem",minWidth:"auto",px:1},children:"Collect"})]})]})},e.id)}))})]}),(0,St.jsxs)(XE,{value:I,index:1,children:[(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,children:"My NFT Collection"}),0===L.length?(0,St.jsx)(n_,{severity:"info",children:"You haven't collected any NFTs yet. Start exploring nearby NFTs to build your collection!"}):(0,St.jsx)(Jm,{container:!0,spacing:2,children:L.map((e=>{var t,r,n;return(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,md:3,lg:2,children:(0,St.jsxs)(tg,{children:[e.full_ipfs_url&&(0,St.jsx)(rE,{component:"img",height:"120",image:e.full_ipfs_url,alt:(null===(t=e.collection)||void 0===t?void 0:t.name)||"NFT",onError:e=>{e.target.style.display="none"}}),(0,St.jsxs)(ig,{sx:{p:1.5},children:[(0,St.jsx)(Bu,{variant:"subtitle2",component:"div",sx:{fontWeight:"bold",mb:.5},children:(null===(r=e.collection)||void 0===r?void 0:r.name)||"Unknown NFT"}),(0,St.jsxs)(uu,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5,children:[(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",children:(null===(n=e.collection)||void 0===n?void 0:n.rarity_level)||"common"}),(0,St.jsxs)(Bu,{variant:"caption",color:"text.secondary",children:[e.transfer_count," transfers"]})]}),(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",children:new Date(e.collected_at).toLocaleDateString()})]}),(0,St.jsx)(PT,{sx:{p:1,pt:0},children:(0,St.jsx)(Ap,{size:"small",startIcon:(0,St.jsx)(nE,{}),onClick:()=>Jt(e.nft),sx:{fontSize:"0.75rem",minWidth:"auto",px:1},children:"Details"})})]})},e.id)}))})]}),(0,St.jsxs)(XE,{value:I,index:2,children:[(0,St.jsxs)(uu,{sx:{mb:2},children:[(0,St.jsx)(Bu,{variant:"h5",gutterBottom:!0,children:"NFT Map"}),(0,St.jsx)(Bu,{variant:"body2",color:"text.secondary",sx:{mb:2},children:'View and pin NFTs on the map. Use the "Pin New NFT" button to add new NFTs by address.'}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:2,mb:2,flexWrap:"wrap"},children:[(0,St.jsx)(Ap,{variant:"contained",startIcon:(0,St.jsx)(vg,{}),onClick:Wt,disabled:N,sx:{background:"linear-gradient(45deg, #4CAF50 30%, #8BC34A 90%)","&:hover":{background:"linear-gradient(45deg, #388E3C 30%, #689F38 90%)"}},children:"\ud83d\udccd Get My Location"}),(0,St.jsx)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(ET,{}),onClick:()=>{re&&Mt(re)},disabled:!re||N,sx:{borderColor:"#2196F3",color:"#2196F3","&:hover":{borderColor:"#1976D2",backgroundColor:"rgba(33, 150, 243, 0.1)"}},children:"\ud83d\udd04 Refresh NFTs"}),(0,St.jsx)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(_g,{}),onClick:()=>{kt.current&&!Et.current?(console.log("Manually initializing main map..."),Vt(kt.current,"main")):Et.current&&console.log("Main map already initialized")},disabled:N,sx:{borderColor:"#FF9800",color:"#FF9800","&:hover":{borderColor:"#F57C00",backgroundColor:"rgba(255, 152, 0, 0.1)"}},children:"\ud83d\uddfa\ufe0f Initialize Map"}),(0,St.jsx)(Ap,{variant:"outlined",onClick:()=>{console.log("Main map container:",kt.current),console.log("Main map instance:",Et.current),console.log("Main map markers:",At.current),console.log("Nearby NFTs:",M.length)},size:"small",sx:{borderColor:"#607D8B",color:"#607D8B","&:hover":{borderColor:"#455A64",backgroundColor:"rgba(96, 125, 139, 0.1)"}},children:"\ud83d\udd27 Debug Map"}),(0,St.jsxs)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(iE,{}),onClick:()=>Y(!Z),sx:{borderColor:"#FFD700",color:"#FFD700","&:hover":{borderColor:"#FFA500",backgroundColor:"rgba(255, 215, 0, 0.1)",color:"#FFA500"}},children:["\ud83d\udee0\ufe0f ",Z?"Hide":"Show"," Advanced Tools"]}),("nft_manager"===(null===x||void 0===x?void 0:x.role)||"admin"===(null===x||void 0===x?void 0:x.role))&&(0,St.jsxs)(uu,{sx:{display:"flex",gap:1},children:[(0,St.jsx)(Ap,{variant:"contained",startIcon:(0,St.jsx)(vg,{}),onClick:()=>xe(!0),disabled:N,sx:{background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",color:"black","&:hover":{background:"linear-gradient(135deg, #FFA500 0%, #E6C200 100%)",boxShadow:"0 4px 12px rgba(255, 215, 0, 0.4)"},fontWeight:"bold"},children:"Pin NFT (Database)"}),(0,St.jsx)(Ap,{variant:"contained",startIcon:(0,St.jsx)(vg,{}),onClick:()=>we(!0),disabled:N,sx:{background:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",color:"black","&:hover":{background:"linear-gradient(135deg, #FFA500 0%, #E6C200 100%)",boxShadow:"0 4px 12px rgba(255, 215, 0, 0.4)"},fontWeight:"bold"},children:"Pin NFT (Blockchain)"})]})]})]}),(0,St.jsxs)(uu,{sx:{mb:2,display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[(0,St.jsxs)(uu,{sx:{display:"flex",gap:1},children:[(0,St.jsx)(Ap,{variant:"2d"===K?"contained":"outlined",size:"small",onClick:()=>Xt("2d"),startIcon:(0,St.jsx)(_g,{}),children:"2D"}),(0,St.jsx)(Ap,{variant:"3d"===K?"contained":"outlined",size:"small",onClick:()=>Xt("3d"),startIcon:(0,St.jsx)(_g,{}),children:"3D"}),(0,St.jsx)(Ap,{variant:"satellite"===K?"contained":"outlined",size:"small",onClick:()=>Xt("satellite"),startIcon:(0,St.jsx)(_g,{}),children:"Satellite"})]}),(0,St.jsx)(uu,{sx:{display:"flex",gap:1,alignItems:"center"},children:(0,St.jsx)(yg,{label:"Individual Markers",color:"primary",size:"small",icon:(0,St.jsx)(iE,{})})}),(0,St.jsx)(Ap,{variant:"outlined",size:"small",onClick:()=>{if(0===M.length)return;const e=M.map((e=>e.longitude)),t=M.map((e=>e.latitude)),r=[[Math.min(...e),Math.min(...t)],[Math.max(...e),Math.max(...t)]];Et.current&&(Et.current.fitBounds(r,{padding:50,duration:2e3}),setTimeout((()=>{X("3d"),Et.current&&Et.current.easeTo({pitch:60,bearing:0,duration:2e3})}),1e3))},disabled:0===M.length,startIcon:(0,St.jsx)(aE,{}),children:"Navigate to NFTs"})]}),(0,St.jsxs)($h,{sx:{height:"800px",width:"100%",position:"relative",overflow:"hidden",border:"1px solid #e0e0e0",borderRadius:1},children:[(0,St.jsx)("div",{ref:kt,style:{width:"100%",height:"100%",position:"relative",backgroundColor:"#f5f5f5"}}),!Et.current&&(0,St.jsxs)(uu,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",zIndex:1e3},children:[(0,St.jsx)(Xd,{size:60}),(0,St.jsx)(Bu,{variant:"h6",sx:{mt:2},children:"Loading 3D Map..."})]}),vt&&(0,St.jsxs)(uu,{sx:{position:"absolute",top:"20px",left:"50%",transform:"translateX(-50%)",zIndex:1001,textAlign:"center",background:"linear-gradient(135deg, #4CAF50, #45a049)",color:"white",padding:"16px 24px",borderRadius:"12px",boxShadow:"0 8px 24px rgba(76, 175, 80, 0.3)",animation:"pulse 0.6s ease-in-out","@keyframes pulse":{"0%":{transform:"translateX(-50%) scale(0.8)",opacity:0},"50%":{transform:"translateX(-50%) scale(1.05)",opacity:1},"100%":{transform:"translateX(-50%) scale(1)",opacity:1}}},children:[(0,St.jsx)(Bu,{variant:"h6",sx:{fontWeight:"bold",mb:1},children:"\u2705 NFT Pinned Successfully!"}),(0,St.jsx)(Bu,{variant:"body2",sx:{opacity:.9},children:"Your NFT has been added to the map"})]})]})]}),(0,St.jsx)(XE,{value:I,index:3,children:(0,St.jsx)(pE,{})}),(0,St.jsxs)(Ng,{open:ae,onClose:()=>se(!1),maxWidth:"md",fullWidth:!0,sx:{zIndex:1500},children:[(0,St.jsx)(qg,{children:(0,St.jsxs)(uu,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,St.jsx)(Bu,{variant:"h6",children:(null===oe||void 0===oe||null===(r=oe.collection)||void 0===r?void 0:r.name)||"NFT Details"}),(0,St.jsx)(th,{onClick:()=>se(!1),children:(0,St.jsx)(Nm,{})})]})}),(0,St.jsx)($v,{children:oe&&(0,St.jsxs)(Jm,{container:!0,spacing:3,children:[(0,St.jsxs)(Jm,{item:!0,xs:12,md:6,children:[oe.full_ipfs_url&&(0,St.jsx)("img",{src:oe.full_ipfs_url,alt:(null===(n=oe.collection)||void 0===n?void 0:n.name)||"NFT",style:{width:"100%",height:"auto",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},onError:e=>{e.target.style.display="none"}}),(0,St.jsxs)(uu,{sx:{mt:2},children:[(0,St.jsx)(Bu,{variant:"subtitle2",gutterBottom:!0,children:"NFT Location"}),(0,St.jsx)(uu,{id:"nft-details-mini-map",sx:{height:"200px",width:"100%",borderRadius:"8px",border:"1px solid #e0e0e0",overflow:"hidden"}})]})]}),(0,St.jsxs)(Jm,{item:!0,xs:12,md:6,children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"Collection Information"}),(0,St.jsx)(Bu,{variant:"body2",color:"text.secondary",paragraph:!0,children:(null===(o=oe.collection)||void 0===o?void 0:o.description)||"No description available"}),(0,St.jsx)(Bu,{variant:"subtitle2",gutterBottom:!0,children:"Rarity Level"}),(0,St.jsx)(yg,{label:(null===(i=oe.collection)||void 0===i?void 0:i.rarity_level)||"common",color:KE(null===(a=oe.collection)||void 0===a?void 0:a.rarity_level),sx:{mb:2}}),(0,St.jsx)(Bu,{variant:"subtitle2",gutterBottom:!0,children:"Location Details"}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:["Latitude: ","number"===typeof oe.latitude?oe.latitude.toFixed(6):oe.latitude||"N/A"]}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:["Longitude: ","number"===typeof oe.longitude?oe.longitude.toFixed(6):oe.longitude||"N/A"]}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:["Collection Radius: ",oe.radius_meters,"m"]}),oe.distance&&(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:["Distance from you: ",Math.round(oe.distance),"m"]}),(0,St.jsx)(Bu,{variant:"subtitle2",gutterBottom:!0,sx:{mt:2},children:"IPFS Hash"}),(0,St.jsx)(Bu,{variant:"body2",fontFamily:"monospace",sx:{wordBreak:"break-all"},children:oe.ipfs_hash}),oe.smart_contract_address&&(0,St.jsxs)(St.Fragment,{children:[(0,St.jsx)(Bu,{variant:"subtitle2",gutterBottom:!0,sx:{mt:2},children:"Smart Contract"}),(0,St.jsx)(Bu,{variant:"body2",fontFamily:"monospace",sx:{wordBreak:"break-all"},children:oe.smart_contract_address}),(0,St.jsx)(Bu,{variant:"subtitle2",gutterBottom:!0,sx:{mt:2},children:"Blockchain Information"}),oe.blockchain_transaction_hash&&(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:[(0,St.jsx)("strong",{children:"Transaction Hash:"})," ",oe.blockchain_transaction_hash]}),oe.blockchain_ledger&&(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:[(0,St.jsx)("strong",{children:"Ledger:"})," ",oe.blockchain_ledger]}),oe.blockchain_network&&(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:[(0,St.jsx)("strong",{children:"Network:"})," ",oe.blockchain_network]}),(0,St.jsx)(Bu,{variant:"subtitle2",gutterBottom:!0,sx:{mt:2},children:"Ownership"}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:[(0,St.jsx)("strong",{children:"Current Owner:"})," ",oe.current_owner||oe.owner||"Unknown"]}),oe.transfer_count&&(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:[(0,St.jsx)("strong",{children:"Transfer Count:"})," ",oe.transfer_count]}),oe.collected_at&&(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:[(0,St.jsx)("strong",{children:"Collected:"})," ",new Date(oe.collected_at).toLocaleString()]}),(0,St.jsx)(Bu,{variant:"subtitle2",gutterBottom:!0,sx:{mt:2},children:"Available Contract Functions"}),(0,St.jsxs)(uu,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[(0,St.jsx)(yg,{label:"mint",size:"small",color:"primary"}),(0,St.jsx)(yg,{label:"transfer",size:"small",color:"primary"}),(0,St.jsx)(yg,{label:"approve",size:"small",color:"primary"}),(0,St.jsx)(yg,{label:"balanceOf",size:"small",color:"secondary"}),(0,St.jsx)(yg,{label:"ownerOf",size:"small",color:"secondary"}),(0,St.jsx)(yg,{label:"getLocationData",size:"small",color:"secondary"})]})]})]})]})}),(0,St.jsxs)(HS,{children:[(0,St.jsx)(Ap,{onClick:()=>se(!1),children:"Close"}),oe&&(0,St.jsxs)(uu,{sx:{display:"flex",gap:2,mt:2},children:[(0,St.jsx)(Ap,{variant:"contained",startIcon:(0,St.jsx)(oE,{}),onClick:()=>{Yt(oe),se(!1)},disabled:!re,children:"Collect NFT"}),(0,St.jsx)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(sE,{}),onClick:()=>{console.log("Zooming mini map to NFT location:",oe),Te?(console.log("Zooming mini map to NFT location"),Te.flyTo({center:[parseFloat(oe.longitude),parseFloat(oe.latitude)],zoom:18,duration:1e3}),console.log("Zoomed mini map to:",parseFloat(oe.longitude),parseFloat(oe.latitude))):console.log("Mini map not available yet")},children:"Zoom In"})]})]})]}),(0,St.jsxs)(Ng,{open:pe,onClose:Qt,maxWidth:!1,fullWidth:!0,fullScreen:!0,sx:{zIndex:1400},PaperProps:{sx:{margin:0,maxHeight:"100vh",height:"100vh",width:"100vw",borderRadius:0}},children:[(0,St.jsx)(qg,{sx:{position:"absolute",top:0,left:0,right:0,zIndex:1e3,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderBottom:"1px solid rgba(0,0,0,0.1)"},children:(0,St.jsxs)(uu,{display:"flex",alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:[(0,St.jsx)(Bu,{variant:"h6",sx:{fontWeight:"bold",mr:2},children:"\ud83d\uddfa\ufe0f NFT Map - 3D View"}),(0,St.jsxs)(uu,{className:"map-search-container",sx:{flexGrow:1,maxWidth:"400px",mx:2,position:"relative"},children:[(0,St.jsx)(Uv,{placeholder:"Search addresses, places, cities...",size:"small",fullWidth:!0,variant:"outlined",value:tt,onChange:e=>{const t=e.target.value;rt(t),Qe&&clearTimeout(Qe);const r=setTimeout((()=>{(async e=>{if(!e.trim()||e.length<2)return Ye([]),void $e(!1);try{console.log("Autocomplete search for:",e);const t=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json?access_token=").concat("pk.eyJ1Ijoic2VyZ2UzNjl4MzMiLCJhIjoiY20zZHh6M2h2MDVoZzJqcTdudXhidm5kdyJ9.31fpP6C_HjNaTEN3C0fDTg","&limit=5&autocomplete=true"));if(!t.ok)throw new Error("Autocomplete search failed");const r=await t.json();console.log("Autocomplete results:",r.features),r.features&&r.features.length>0?(Ye(r.features),$e(!0)):(Ye([]),$e(!1))}catch(U){console.error("Autocomplete error:",U),Ye([]),$e(!1)}})(t)}),300);et(r)},onKeyPress:e=>{"Enter"===e.key&&$t()},onFocus:()=>{Ze.length>0&&$e(!0)},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.9)","&:hover":{backgroundColor:"rgba(255, 255, 255, 1)"},"&.Mui-focused":{backgroundColor:"rgba(255, 255, 255, 1)"}}},InputProps:{startAdornment:(0,St.jsx)(uu,{sx:{display:"flex",alignItems:"center",mr:1},children:"\ud83d\udd0d"}),endAdornment:tt&&(0,St.jsx)(th,{size:"small",onClick:()=>{rt(""),Ye([]),$e(!1),Qe&&clearTimeout(Qe)},sx:{mr:-1},children:(0,St.jsx)(Nm,{fontSize:"small"})})}}),Je&&Ze.length>0&&(0,St.jsx)($h,{onMouseDown:e=>{e.preventDefault()},sx:{position:"absolute",top:"100%",left:0,right:0,zIndex:1001,maxHeight:"200px",overflow:"auto",mt:.5,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",borderRadius:1},children:Ze.map(((e,t)=>(0,St.jsxs)(uu,{onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onTouchStart:t=>{t.preventDefault(),t.stopPropagation(),$t(e)},onClick:t=>{t.preventDefault(),t.stopPropagation(),$t(e)},sx:{p:1.5,cursor:"pointer",borderBottom:t<Ze.length-1?"1px solid #eee":"none","&:hover":{backgroundColor:"#f5f5f5"}},children:[(0,St.jsx)(Bu,{variant:"body2",sx:{fontWeight:"bold"},children:e.place_name}),e.context&&(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",children:e.context.map((e=>e.text)).join(", ")})]},t)))})]}),(0,St.jsxs)(uu,{children:[(0,St.jsx)(Ap,{variant:"contained",startIcon:(0,St.jsx)(aT,{}),onClick:()=>xe(!0),sx:{mr:1},size:"small",children:"Pin New NFT"}),(0,St.jsx)(Ap,{variant:"outlined",onClick:()=>{console.log("Container ref:",Tt.current),console.log("Map instance:",Ct.current),Tt.current&&!Ct.current&&(console.log("Manually initializing map..."),Vt(Tt.current,"overlay"))},sx:{mr:1},size:"small",children:"Debug Map"}),(0,St.jsx)(Ap,{variant:"outlined",onClick:()=>{console.log("Manually updating overlay markers..."),console.log("Nearby NFTs:",M.length),console.log("Overlay map exists:",!!Ct.current),Ct.current&&Dt("overlay")},sx:{mr:1},size:"small",children:"Update Markers"}),(0,St.jsx)(Ap,{variant:"outlined",startIcon:(0,St.jsx)(aE,{}),onClick:()=>{console.log("Zooming to user location in overlay map"),Ct.current&&re&&Ct.current.flyTo({center:[re.longitude,re.latitude],zoom:15,duration:1e3})},sx:{mr:1},size:"small",disabled:!re,children:"Zoom to Me"}),(0,St.jsx)(th,{onClick:Qt,sx:{ml:1},children:(0,St.jsx)(Nm,{})})]})]})}),(0,St.jsxs)($v,{sx:{padding:0,margin:0,height:"calc(100vh - 64px)",overflow:"hidden",position:"relative",minHeight:"600px"},children:[(0,St.jsx)("div",{ref:Tt,style:{width:"100%",height:"100%",minHeight:"600px",position:"relative",backgroundColor:"#f5f5f5"}}),!Ct.current&&(0,St.jsxs)(uu,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",zIndex:1e3},children:[(0,St.jsx)(Xd,{size:60}),(0,St.jsx)(Bu,{variant:"h6",sx:{mt:2},children:"Loading 3D Map..."})]})]})]}),(0,St.jsx)(LT,{open:me,onClose:()=>ge(!1)}),(0,St.jsx)(uE,{open:ye,onClose:()=>ve(!1),onLocationUpdate:e=>{console.log("Location updated via handleLocationUpdate:",e),ne(e),q("Location updated successfully!"),S&&Ot()}}),(0,St.jsxs)(Ng,{open:be,onClose:()=>xe(!1),maxWidth:"sm",fullWidth:!0,sx:{zIndex:1500},children:[(0,St.jsx)(qg,{children:(0,St.jsxs)(uu,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,St.jsx)(Bu,{variant:"h6",children:"Pin New NFT"}),(0,St.jsx)(th,{onClick:()=>xe(!1),children:(0,St.jsx)(Nm,{})})]})}),(0,St.jsxs)($v,{children:[(0,St.jsx)(Bu,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Search for an address to pin your NFT, then drag the pin to the exact location."}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:1,mb:2,position:"relative"},children:[(0,St.jsxs)(uu,{sx:{flexGrow:1,position:"relative"},className:"search-container",children:[(0,St.jsx)(Uv,{fullWidth:!0,label:"Search Address",value:je.address,onChange:e=>{const t=e.target.value;Pe((e=>d(d({},e),{},{address:t}))),Qe&&clearTimeout(Qe);const r=setTimeout((()=>{(async e=>{if(!e.trim())return Ye([]),void $e(!1);try{const t=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json?access_token=").concat("pk.eyJ1Ijoic2VyZ2UzNjl4MzMiLCJhIjoiY20zZHh6M2h2MDVoZzJqcTdudXhidm5kdyJ9.31fpP6C_HjNaTEN3C0fDTg","&limit=5")),r=await t.json();r.features&&r.features.length>0?(Ye(r.features),$e(!0)):(Ye([]),$e(!1))}catch(U){console.error("Search error:",U),Ye([]),$e(!1)}})(t)}),300);et(r)},onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),Ze.length>0?Gt(Ze[0]):qt())},placeholder:"Enter address (e.g., 123 Main St, New York, NY)",InputProps:{startAdornment:(0,St.jsx)(vg,{sx:{mr:1,color:"text.secondary"}})}}),Je&&Ze.length>0&&(0,St.jsx)($h,{sx:{position:"absolute",top:"100%",left:0,right:0,zIndex:1e3,maxHeight:200,overflow:"auto",mt:1,boxShadow:3},children:Ze.map(((e,t)=>(0,St.jsxs)(uu,{sx:{p:2,cursor:"pointer",borderBottom:"1px solid",borderColor:"divider","&:hover":{backgroundColor:"action.hover"}},onClick:()=>Gt(e),children:[(0,St.jsx)(Bu,{variant:"body2",fontWeight:"bold",children:e.text}),(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",children:e.place_name})]},t)))})]}),(0,St.jsx)(Ap,{variant:"outlined",onClick:qt,disabled:Ne||!je.address.trim(),startIcon:Ne?(0,St.jsx)(Xd,{size:20}):(0,St.jsx)(vg,{}),children:Ne?"Searching...":"Search"})]}),(0,St.jsxs)(uu,{sx:{display:"flex",gap:1,mb:2},children:[(0,St.jsx)(Ap,{variant:"outlined",onClick:()=>{if(!Et.current)return void V("Map not loaded yet. Please wait for the map to initialize.");if(Me&&Ie)return void V("Pin marker is already placed. Please remove it first or drag it to a new position.");const e=Et.current.getCenter();console.log("Map center:",e),console.log("Map bounds:",Et.current.getBounds()),console.log("Map zoom:",Et.current.getZoom()),e&&e.lat&&e.lng&&!isNaN(e.lat)&&!isNaN(e.lng)?(Pe((t=>d(d({},t),{},{latitude:e.lat,longitude:e.lng}))),ke({latitude:e.lat,longitude:e.lng}),Zt(e.lng,e.lat),Et.current.flyTo({center:[e.lng,e.lat],zoom:20,duration:1e3}),q("Pin dropped at map center: ".concat(e.lat.toFixed(6),", ").concat(e.lng.toFixed(6),"! Drag to adjust position."))):V("Unable to get map center. Please try again.")},startIcon:(0,St.jsx)(vg,{}),sx:{flex:1},children:"Drop Pin"}),(0,St.jsx)(Ap,{variant:"outlined",onClick:()=>{re?Me&&Ie?V("Pin marker is already placed. Please remove it first or drag it to a new position."):(Pe((e=>d(d({},e),{},{latitude:re.latitude,longitude:re.longitude}))),ke({latitude:re.latitude,longitude:re.longitude}),Zt(re.longitude,re.latitude),Et.current&&Et.current.flyTo({center:[re.longitude,re.latitude],zoom:20,pitch:"3d"===K?60:0,bearing:0,duration:2e3,essential:!0}),q("Using your current location! Drag to adjust position.")):V("Your location is not available. Please enable location services.")},startIcon:(0,St.jsx)(aE,{}),sx:{flex:1},disabled:!re,children:"Use My Location"})]}),je.latitude&&je.longitude&&(0,St.jsxs)(n_,{severity:"success",sx:{mb:2},children:["Location: ",je.latitude.toFixed(6),", ",je.longitude.toFixed(6),(0,St.jsx)("br",{}),(0,St.jsx)("small",{children:"Drag the pin on the map to adjust the exact position"})]}),(0,St.jsx)(Uv,{fullWidth:!0,label:"NFT Name",value:je.name,onChange:e=>Pe(d(d({},je),{},{name:e.target.value})),required:!0,sx:{mb:2}}),(0,St.jsx)(Uv,{fullWidth:!0,label:"Description",value:je.description,onChange:e=>Pe(d(d({},je),{},{description:e.target.value})),multiline:!0,rows:3,sx:{mb:2}}),(0,St.jsxs)(ev,{fullWidth:!0,sx:{mb:2},children:[(0,St.jsx)(Zy,{children:"Collection *"}),(0,St.jsx)(Lv,{value:je.collection_id||"",onChange:e=>Pe(d(d({},je),{},{collection_id:e.target.value})),label:"Collection *",required:!0,children:z.map((e=>(0,St.jsx)(mm,{value:e.id,children:e.name},e.id)))})]}),(0,St.jsx)(Uv,{fullWidth:!0,label:"Smart Contract Address",value:je.smart_contract_address,onChange:e=>Pe(d(d({},je),{},{smart_contract_address:e.target.value})),placeholder:"0x1234567890abcdef1234567890abcdef12345678",sx:{mb:2}}),(0,St.jsx)(Uv,{fullWidth:!0,label:"IPFS Hash",value:je.ipfs_hash,onChange:e=>Pe(d(d({},je),{},{ipfs_hash:e.target.value})),placeholder:"bafybeigdv2ccs3bighhgvqj65sgi6bz6qruz4r5bqxpwovem5m5t7xcifi/M25_52.png",sx:{mb:2}}),(0,St.jsx)(Uv,{fullWidth:!0,label:"Collection Radius (meters)",type:"number",value:je.radius_meters,onChange:e=>Pe(d(d({},je),{},{radius_meters:parseInt(e.target.value)||10})),inputProps:{min:1,max:1e3},sx:{mb:2}})]}),(0,St.jsxs)(HS,{children:[(0,St.jsx)(Ap,{onClick:()=>xe(!1),children:"Cancel"}),(0,St.jsx)(Ap,{variant:"contained",onClick:async()=>{if(je.latitude&&je.longitude&&je.name.trim()&&je.collection_id){B(!0);try{let e=je.latitude,t=je.longitude;if(console.log("\ud83d\udd0d DEBUG: Pin marker exists:",!!Ie),console.log("\ud83d\udd0d DEBUG: Pin marker locked:",Me),console.log("\ud83d\udd0d DEBUG: Pin marker protected:",ze),console.log("\ud83d\udd0d DEBUG: Pin location state:",Se),console.log("\ud83d\udd0d DEBUG: Form coordinates:",{lat:je.latitude,lng:je.longitude}),Ie){const r=Ie.getLngLat();console.log("\ud83d\udd0d DEBUG: Force updating form with pin marker coordinates:",r),Pe((e=>d(d({},e),{},{latitude:r.lat,longitude:r.lng}))),e=r.lat,t=r.lng}if(Ie)try{const e=Ie.getLngLat();console.log("\ud83d\udd0d DEBUG: Pin marker getLngLat() result:",e),console.log("\ud83d\udd0d DEBUG: Pin marker isDraggable:",Ie.isDraggable()),console.log("\ud83d\udd0d DEBUG: Pin marker element:",Ie.getElement())}catch(U){console.error("\ud83d\udd0d DEBUG: Error getting pin marker coordinates:",U)}if(Ie){const r=Ie.getLngLat();e=r.lat,t=r.lng,console.log("\ud83c\udfaf Pin marker getLngLat():",r),console.log("\ud83c\udfaf Using exact pin marker coordinates:",{lat:e,lng:t}),console.log("\ud83c\udfaf Original form coordinates:",{lat:je.latitude,lng:je.longitude});const n=Math.abs(e-je.latitude),o=Math.abs(t-je.longitude);console.log("\ud83c\udfaf Coordinate differences:",{latDiff:n,lngDiff:o}),n>1e-6||o>1e-6?console.log("\u2705 Pin marker coordinates are different from form - using pin marker coordinates"):console.log("\u26a0\ufe0f Pin marker coordinates are the same as form coordinates")}else Se?(e=Se.latitude,t=Se.longitude,console.log("\ud83c\udfaf Using pinLocation state coordinates:",{lat:e,lng:t})):console.log("\u26a0\ufe0f No pin marker or pinLocation found - using form coordinates");const r={name:je.name,description:je.description,ipfs_hash:je.ipfs_hash,radius_meters:je.radius_meters,collection_id:je.collection_id,latitude:e,longitude:t,smart_contract_address:je.smart_contract_address};console.log("Pinning NFT with data:",r),await bc.post("/nft/pin",r),q('\ud83c\udf89 NFT "'.concat(je.name,'" pinned successfully at ').concat(e.toFixed(8),", ").concat(t.toFixed(8),"!")),bt(!0),xe(!1),setTimeout((()=>{bt(!1)}),3e3),Ie&&(Ie._lockInterval&&clearInterval(Ie._lockInterval),Ie.remove(),Oe(null),Re(!1),De(!1)),Pe({name:"",description:"",ipfs_hash:"",radius_meters:10,collection_id:null,address:"",latitude:null,longitude:null}),ke(null),re&&await Mt(re)}catch(r){var e,t;console.error("Error pinning NFT:",r),V((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Failed to pin NFT.")}finally{B(!1)}}else V("Please search for an address, select a collection, and fill in all required fields.")},disabled:N||!je.name.trim(),startIcon:N?(0,St.jsx)(Xd,{size:20}):(0,St.jsx)(vg,{}),children:N?"Pinning...":"Pin NFT"})]})]}),(0,St.jsxs)(Ng,{open:le,onClose:()=>ce(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{maxHeight:"90vh"}},sx:{zIndex:1500},children:[(0,St.jsx)(qg,{sx:{pb:1},children:(0,St.jsxs)(uu,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,St.jsxs)(uu,{display:"flex",alignItems:"center",sx:{flexGrow:1},children:[(0,St.jsx)("div",{style:{width:8,height:8,borderRadius:"50%",backgroundColor:"legendary"===(null===oe||void 0===oe||null===(s=oe.collection)||void 0===s?void 0:s.rarity_level)?"#ff9800":"rare"===(null===oe||void 0===oe||null===(l=oe.collection)||void 0===l?void 0:l.rarity_level)?"#2196f3":"#4caf50",marginRight:6}}),(0,St.jsx)(Bu,{variant:"subtitle1",sx:{fontWeight:"bold"},children:(null===oe||void 0===oe?void 0:oe.name)||(null===oe||void 0===oe||null===(c=oe.collection)||void 0===c?void 0:c.name)||"Unknown NFT"})]}),M.length>1&&(0,St.jsxs)(uu,{display:"flex",alignItems:"center",sx:{mx:2},children:[(0,St.jsx)(th,{size:"small",onClick:()=>{const e=ue>0?ue-1:M.length-1;de(e),ie(M[e])},disabled:M.length<=1,children:(0,St.jsx)(lE,{fontSize:"small"})}),(0,St.jsxs)(Bu,{variant:"caption",sx:{mx:1,minWidth:"60px",textAlign:"center"},children:[ue+1," of ",M.length]}),(0,St.jsx)(th,{size:"small",onClick:()=>{const e=ue<M.length-1?ue+1:0;de(e),ie(M[e])},disabled:M.length<=1,children:(0,St.jsx)(cE,{fontSize:"small"})})]}),(0,St.jsx)(th,{size:"small",onClick:()=>ce(!1),children:(0,St.jsx)(Nm,{})})]})}),(0,St.jsx)($v,{sx:{pt:1,pb:1},children:oe&&(0,St.jsxs)(uu,{children:[oe.full_ipfs_url&&(0,St.jsxs)(uu,{textAlign:"center",mb:2,children:[(0,St.jsx)("img",{src:oe.full_ipfs_url,alt:oe.name||"NFT",style:{maxWidth:"100%",maxHeight:"200px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",objectFit:"cover"},onError:e=>{e.target.style.display="none",e.target.nextElementSibling.style.display="block"}}),(0,St.jsx)("div",{style:{display:"none",padding:"20px",background:"#f5f5f5",borderRadius:"8px",color:"#666",textAlign:"center"},children:(0,St.jsx)("p",{style:{margin:0,fontSize:"14px"},children:"Image not available"})})]}),(0,St.jsxs)(Jm,{container:!0,spacing:1.5,children:[(0,St.jsx)(Jm,{item:!0,xs:6,children:(0,St.jsxs)(uu,{sx:{p:1.5,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",display:"block",children:"RARITY"}),(0,St.jsx)(yg,{label:(null===(u=oe.collection)||void 0===u?void 0:u.rarity_level)||"common",color:KE(null===(h=oe.collection)||void 0===h?void 0:h.rarity_level),size:"small",sx:{mt:.5}})]})}),(0,St.jsx)(Jm,{item:!0,xs:6,children:(0,St.jsxs)(uu,{sx:{p:1.5,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",display:"block",children:"RADIUS"}),(0,St.jsxs)(Bu,{variant:"body2",sx:{fontWeight:"bold",mt:.5},children:[oe.radius_meters,"m"]})]})}),oe.distance&&(0,St.jsx)(Jm,{item:!0,xs:6,children:(0,St.jsxs)(uu,{sx:{p:1.5,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",display:"block",children:"DISTANCE"}),(0,St.jsxs)(Bu,{variant:"body2",color:"primary",sx:{fontWeight:"bold",mt:.5},children:[Math.round(oe.distance),"m"]})]})}),(0,St.jsx)(Jm,{item:!0,xs:6,children:(0,St.jsxs)(uu,{sx:{p:1.5,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",display:"block",children:"STATUS"}),(0,St.jsxs)(uu,{display:"flex",alignItems:"center",sx:{mt:.5},children:[(0,St.jsx)("div",{style:{width:6,height:6,borderRadius:"50%",backgroundColor:oe.is_active?"#4caf50":"#f44336",marginRight:4}}),(0,St.jsx)(Bu,{variant:"caption",sx:{textTransform:"uppercase",fontSize:"11px"},children:oe.is_active?"Active":"Inactive"})]})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsxs)(uu,{sx:{p:1.5,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",display:"block",children:"COLLECTION"}),(0,St.jsx)(Bu,{variant:"body2",sx:{mt:.5},children:(null===(p=oe.collection)||void 0===p?void 0:p.name)||"Unknown Collection"})]})}),oe.description&&(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsxs)(uu,{sx:{p:1.5,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",display:"block",children:"DESCRIPTION"}),(0,St.jsx)(Bu,{variant:"body2",sx:{mt:.5,fontSize:"13px"},children:oe.description})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsxs)(uu,{sx:{p:1.5,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,St.jsx)(Bu,{variant:"caption",color:"text.secondary",display:"block",children:"LOCATION"}),(0,St.jsxs)(Bu,{variant:"caption",sx:{mt:.5,display:"block",fontSize:"11px"},children:["Lat: ","number"===typeof oe.latitude?oe.latitude.toFixed(4):oe.latitude||"N/A"]}),(0,St.jsxs)(Bu,{variant:"caption",sx:{fontSize:"11px"},children:["Lng: ","number"===typeof oe.longitude?oe.longitude.toFixed(4):oe.longitude||"N/A"]})]})})]})]})}),(0,St.jsxs)(HS,{children:[(0,St.jsx)(Ap,{onClick:()=>ce(!1),children:"Close"}),oe&&(0,St.jsx)(Ap,{variant:"contained",color:"primary",onClick:()=>{console.log("Collect NFT:",oe)},children:"Collect NFT"})]})]}),(0,St.jsxs)(Ng,{open:_e,onClose:()=>we(!1),maxWidth:"lg",fullWidth:!0,sx:{zIndex:1500},children:[(0,St.jsx)(qg,{children:(0,St.jsxs)(uu,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,St.jsx)(Bu,{variant:"h6",children:"Real PIN NFT - Stellar Blockchain"}),(0,St.jsx)(th,{onClick:()=>we(!1),children:(0,St.jsx)(Nm,{})})]})}),(0,St.jsx)($v,{sx:{p:0},children:(0,St.jsx)(DE,{onClose:()=>we(!1),onSuccess:e=>{console.log("Real NFT operation successful:",e),we(!1),_t(e)}})})]}),(0,St.jsxs)(Ng,{open:!!xt,onClose:()=>{_t(null),localStorage.removeItem("nftMintSuccess")},maxWidth:"md",fullWidth:!0,sx:{zIndex:1e4},children:[(0,St.jsx)(qg,{sx:{textAlign:"center",pb:2},children:"\ud83c\udf89 NFT Successfully Minted!"}),(0,St.jsx)($v,{children:xt&&(0,St.jsxs)(uu,{sx:{textAlign:"center"},children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,color:"primary",children:xt.name}),(0,St.jsxs)(Jm,{container:!0,spacing:3,sx:{mt:2},children:[(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,children:(0,St.jsx)(tg,{variant:"outlined",children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"\ud83d\udcca Transaction Details"}),(0,St.jsxs)(Bu,{variant:"body2",sx:{mb:1},children:[(0,St.jsx)("strong",{children:"Token ID:"})," ",xt.tokenId]}),(0,St.jsxs)(Bu,{variant:"body2",sx:{mb:1},children:[(0,St.jsx)("strong",{children:"Status:"})," ",xt.status]}),(0,St.jsxs)(Bu,{variant:"body2",sx:{mb:1},children:[(0,St.jsx)("strong",{children:"Ledger:"})," ",xt.ledger||"N/A"]}),(0,St.jsxs)(Bu,{variant:"body2",sx:{mb:1},children:[(0,St.jsx)("strong",{children:"Hash:"}),(0,St.jsx)("br",{}),(0,St.jsx)("code",{style:{fontSize:"0.8em",wordBreak:"break-all"},children:xt.transactionHash||"N/A"})]})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,sm:6,children:(0,St.jsx)(tg,{variant:"outlined",children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,children:"\ud83d\udccd Location Details"}),(0,St.jsxs)(Bu,{variant:"body2",sx:{mb:1},children:[(0,St.jsx)("strong",{children:"Latitude:"})," ",(null===(f=xt.location)||void 0===f||null===(m=f.latitude)||void 0===m?void 0:m.toFixed(6))||"N/A"]}),(0,St.jsxs)(Bu,{variant:"body2",sx:{mb:1},children:[(0,St.jsx)("strong",{children:"Longitude:"})," ",(null===(g=xt.location)||void 0===g||null===(y=g.longitude)||void 0===y?void 0:y.toFixed(6))||"N/A"]}),(0,St.jsxs)(Bu,{variant:"body2",sx:{mb:1},children:[(0,St.jsx)("strong",{children:"Radius:"})," ",(null===(v=xt.location)||void 0===v?void 0:v.radius)||"N/A","m"]}),(0,St.jsxs)(Bu,{variant:"body2",sx:{mb:1},children:[(0,St.jsx)("strong",{children:"Contract:"}),(0,St.jsx)("br",{}),(0,St.jsx)("code",{style:{fontSize:"0.8em",wordBreak:"break-all"},children:xt.contractId||"N/A"})]})]})})})]}),(0,St.jsxs)(uu,{sx:{mt:3,display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap"},children:[(0,St.jsx)(Ap,{variant:"contained",color:"primary",href:xt.stellarExpertUrl||"#",target:"_blank",rel:"noopener noreferrer",disabled:!xt.stellarExpertUrl,sx:{minWidth:200},children:"\ud83d\udd17 View on StellarExpert"}),(0,St.jsx)(Ap,{variant:"outlined",href:xt.contractUrl||"#",target:"_blank",rel:"noopener noreferrer",disabled:!xt.contractUrl,sx:{minWidth:200},children:"\ud83d\udcc4 View Contract"})]}),(0,St.jsx)(n_,{severity:"success",sx:{mt:3},children:(0,St.jsxs)(Bu,{variant:"body2",children:[(0,St.jsx)("strong",{children:"\u2705 Success!"})," Your NFT has been minted on the Stellar testnet and added to the database. It will now appear in nearby NFT searches within the specified radius."]})})]})}),(0,St.jsx)(HS,{children:(0,St.jsx)(Ap,{onClick:()=>{_t(null),localStorage.removeItem("nftMintSuccess")},variant:"contained",children:"Close"})})]})]})},JE=Fm((0,St.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function $E(e){return iu("MuiAvatar",e)}au("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const QE=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],eC=Eu("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})(Au((e=>{let{theme:t}=e;return{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:d({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:d({backgroundColor:t.palette.grey[400]},t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})))}]}}))),tC=Eu("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),rC=Eu(JE,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});const nC=t.forwardRef((function(e,r){const n=Ta({props:e,name:"MuiAvatar"}),{alt:o,children:i,className:s,component:l="div",slots:c={},slotProps:u={},imgProps:h,sizes:p,src:f,srcSet:m,variant:g="circular"}=n,y=a(n,QE);let v=null;const b=d(d({},n),{},{component:l,variant:g}),x=function(e){let{crossOrigin:r,referrerPolicy:n,src:o,srcSet:i}=e;const[a,s]=t.useState(!1);return t.useEffect((()=>{if(!o&&!i)return;s(!1);let e=!0;const t=new Image;return t.onload=()=>{e&&s("loaded")},t.onerror=()=>{e&&s("error")},t.crossOrigin=r,t.referrerPolicy=n,t.src=o,i&&(t.srcset=i),()=>{e=!1}}),[r,n,o,i]),a}(d(d(d({},h),"function"===typeof u.img?u.img(b):u.img),{},{src:f,srcSet:m})),_=f||m,w=_&&"error"!==x;b.colorDefault=!w,delete b.ownerState;const S=(e=>{const{classes:t,variant:r,colorDefault:n}=e;return du({root:["root",r,n&&"colorDefault"],img:["img"],fallback:["fallback"]},$E,t)})(b),[k,T]=Ih("img",{className:S.img,elementType:tC,externalForwardedProps:{slots:c,slotProps:{img:d(d({},h),u.img)}},additionalProps:{alt:o,src:f,srcSet:m,sizes:p},ownerState:b});return v=w?(0,St.jsx)(k,d({},T)):i||0===i?i:_&&o?o[0]:(0,St.jsx)(rC,{ownerState:b,className:S.fallback}),(0,St.jsx)(eC,d(d({as:l,className:Wc(S.root,s),ref:r},y),{},{ownerState:b,children:v}))})),oC=nC,iC=Fm((0,St.jsx)("path",{d:"M18 4H6C3.79 4 2 5.79 2 8v8c0 2.21 1.79 4 4 4h12c2.21 0 4-1.79 4-4V8c0-2.21-1.79-4-4-4m-1.86 9.77c-.24.2-.57.28-.88.2L4.15 11.25C4.45 10.52 5.16 10 6 10h12c.67 0 1.26.34 1.63.84zM6 6h12c1.1 0 2 .9 2 2v.55c-.59-.34-1.27-.55-2-.55H6c-.73 0-1.41.21-2 .55V8c0-1.1.9-2 2-2"}),"Wallet"),aC=Fm((0,St.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person"),sC=Fm((0,St.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email"),lC=Fm((0,St.jsx)("path",{d:"M12 7V3H2v18h20V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8zm-2-8h-2v2h2zm0 4h-2v2h2z"}),"Business"),cC=()=>{var e,r,n;const{user:o}=wc(),[i,a]=(0,t.useState)(null),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(!0),[p,f]=(0,t.useState)(""),m=(0,t.useCallback)((async()=>{try{null!==o&&void 0!==o&&o.public_key&&u({publicKey:o.public_key,isConnected:!0})}catch(e){console.error("Failed to fetch wallet info:",e)}}),[null===o||void 0===o?void 0:o.public_key]);(0,t.useEffect)((()=>{g(),"nft_manager"===(null===o||void 0===o?void 0:o.role)&&(y(),m())}),[o,m]);const g=async()=>{try{const e=await Zk.get("/user/me");a(e.data)}catch(e){f("Failed to load profile")}finally{h(!1)}},y=async()=>{try{const e=await Zk.get("/nft/user-collection");l({totalNFTs:e.data.length,collections:[...new Set(e.data.map((e=>e.collection_name)))].length})}catch(e){console.error("Failed to fetch NFT stats:",e)}};if(d)return(0,St.jsx)(uu,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:(0,St.jsx)(Xd,{})});return(0,St.jsxs)(dp,{maxWidth:"lg",sx:{mt:{xs:2,md:4},mb:{xs:2,md:4}},children:[p&&(0,St.jsx)(n_,{severity:"error",sx:{mb:2},children:p}),(0,St.jsxs)(Jm,{container:!0,spacing:3,children:[(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsx)(tg,{children:(0,St.jsx)(ig,{sx:{p:{xs:2,md:3}},children:(0,St.jsxs)(uu,{sx:{display:"flex",alignItems:"center",mb:3},children:[(0,St.jsxs)(oC,{sx:{width:{xs:60,md:80},height:{xs:60,md:80},mr:2,bgcolor:"primary.main"},children:[null===i||void 0===i||null===(e=i.firstName)||void 0===e?void 0:e.charAt(0),null===i||void 0===i||null===(r=i.lastName)||void 0===r?void 0:r.charAt(0)]}),(0,St.jsxs)(uu,{children:[(0,St.jsxs)(Bu,{variant:"h4",sx:{fontSize:{xs:"1.5rem",md:"2rem"},fontWeight:"bold"},children:[null===i||void 0===i?void 0:i.firstName," ",null===i||void 0===i?void 0:i.lastName]}),(0,St.jsxs)(uu,{sx:{display:"flex",alignItems:"center",mt:1},children:[(0,St.jsx)(yg,{icon:(e=>{switch(e){case"admin":return(0,St.jsx)(wg,{});case"nft_manager":return(0,St.jsx)(GT,{});case"wallet_provider":return(0,St.jsx)(iC,{});case"data_consumer":return(0,St.jsx)(H_,{});default:return(0,St.jsx)(aC,{})}})(null===i||void 0===i?void 0:i.role),label:null===i||void 0===i||null===(n=i.role)||void 0===n?void 0:n.replace("_"," ").toUpperCase(),color:(e=>{switch(e){case"admin":return"error";case"nft_manager":return"primary";case"wallet_provider":return"secondary";case"data_consumer":return"success";default:return"default"}})(null===i||void 0===i?void 0:i.role),size:"small",sx:{mr:1}}),(0,St.jsxs)(Bu,{variant:"body2",color:"text.secondary",children:["Member since ",new Date(null===i||void 0===i?void 0:i.createdAt).toLocaleDateString()]})]})]})]})})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsx)(tg,{children:(0,St.jsxs)(ig,{sx:{p:{xs:2,md:3}},children:[(0,St.jsxs)(Bu,{variant:"h6",gutterBottom:!0,sx:{fontSize:{xs:"1.1rem",md:"1.25rem"},display:"flex",alignItems:"center"},children:[(0,St.jsx)(aC,{sx:{mr:1}}),"Basic Information"]}),(0,St.jsx)(lh,{sx:{mb:2}}),(0,St.jsxs)(ph,{dense:!0,children:[(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(sC,{})}),(0,St.jsx)(Rh,{primary:"Email",secondary:null===i||void 0===i?void 0:i.email,primaryTypographyProps:{fontSize:{xs:"0.9rem",md:"1rem"}},secondaryTypographyProps:{fontSize:{xs:"0.8rem",md:"0.875rem"}}})]}),(0,St.jsxs)(Kh,{children:[(0,St.jsx)(lg,{children:(0,St.jsx)(lC,{})}),(0,St.jsx)(Rh,{primary:"Organization",secondary:(null===i||void 0===i?void 0:i.organization)||"Not specified",primaryTypographyProps:{fontSize:{xs:"0.9rem",md:"1rem"}},secondaryTypographyProps:{fontSize:{xs:"0.8rem",md:"0.875rem"}}})]})]})]})})}),"nft_manager"===(null===o||void 0===o?void 0:o.role)&&(0,St.jsxs)(St.Fragment,{children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsx)(tg,{children:(0,St.jsxs)(ig,{sx:{p:{xs:2,md:3}},children:[(0,St.jsxs)(Bu,{variant:"h6",gutterBottom:!0,sx:{fontSize:{xs:"1.1rem",md:"1.25rem"},display:"flex",alignItems:"center"},children:[(0,St.jsx)(GT,{sx:{mr:1}}),"NFT Statistics"]}),(0,St.jsx)(lh,{sx:{mb:2}}),(0,St.jsxs)(Jm,{container:!0,spacing:2,children:[(0,St.jsx)(Jm,{item:!0,xs:6,children:(0,St.jsxs)(uu,{sx:{textAlign:"center",p:2,bgcolor:"primary.light",borderRadius:1},children:[(0,St.jsx)(Bu,{variant:"h4",sx:{fontSize:{xs:"1.5rem",md:"2rem"},fontWeight:"bold",color:"primary.contrastText"},children:(null===s||void 0===s?void 0:s.totalNFTs)||0}),(0,St.jsx)(Bu,{variant:"body2",sx:{fontSize:{xs:"0.8rem",md:"0.875rem"},color:"primary.contrastText"},children:"Total NFTs"})]})}),(0,St.jsx)(Jm,{item:!0,xs:6,children:(0,St.jsxs)(uu,{sx:{textAlign:"center",p:2,bgcolor:"secondary.light",borderRadius:1},children:[(0,St.jsx)(Bu,{variant:"h4",sx:{fontSize:{xs:"1.5rem",md:"2rem"},fontWeight:"bold",color:"secondary.contrastText"},children:(null===s||void 0===s?void 0:s.collections)||0}),(0,St.jsx)(Bu,{variant:"body2",sx:{fontSize:{xs:"0.8rem",md:"0.875rem"},color:"secondary.contrastText"},children:"Collections"})]})})]})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsx)(tg,{children:(0,St.jsxs)(ig,{sx:{p:{xs:2,md:3}},children:[(0,St.jsxs)(Bu,{variant:"h6",gutterBottom:!0,sx:{fontSize:{xs:"1.1rem",md:"1.25rem"},display:"flex",alignItems:"center"},children:[(0,St.jsx)(iC,{sx:{mr:1}}),"Wallet Information"]}),(0,St.jsx)(lh,{sx:{mb:2}}),null!==c&&void 0!==c&&c.isConnected?(0,St.jsxs)(uu,{children:[(0,St.jsxs)(Bu,{variant:"body2",color:"success.main",sx:{fontSize:{xs:"0.8rem",md:"0.875rem"},display:"flex",alignItems:"center",mb:1},children:[(0,St.jsx)(q_,{sx:{mr:.5,fontSize:"1rem"}}),"Wallet Connected"]}),(0,St.jsx)(Bu,{variant:"body2",sx:{fontSize:{xs:"0.7rem",md:"0.75rem"},fontFamily:"monospace",wordBreak:"break-all"},children:c.publicKey})]}):(0,St.jsx)(Bu,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.8rem",md:"0.875rem"}},children:"No wallet connected"})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsx)(tg,{children:(0,St.jsxs)(ig,{sx:{p:{xs:2,md:3}},children:[(0,St.jsxs)(Bu,{variant:"h6",gutterBottom:!0,sx:{fontSize:{xs:"1.1rem",md:"1.25rem"},display:"flex",alignItems:"center"},children:[(0,St.jsx)(vg,{sx:{mr:1}}),"Quick Actions"]}),(0,St.jsx)(lh,{sx:{mb:2}}),(0,St.jsxs)(uu,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,St.jsx)(Ap,{variant:"contained",color:"primary",href:"/dashboard/nft",sx:{fontSize:{xs:"0.8rem",md:"0.875rem"},py:{xs:1,md:1.5}},children:"\ud83c\udfa8 NFT Dashboard"}),(0,St.jsx)(Ap,{variant:"outlined",color:"secondary",href:"/enhanced-nft-dashboard",sx:{fontSize:{xs:"0.8rem",md:"0.875rem"},py:{xs:1,md:1.5}},children:"\ud83d\ude80 Enhanced Dashboard"})]})]})})})]}),"nft_manager"!==(null===o||void 0===o?void 0:o.role)&&(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsx)(tg,{children:(0,St.jsxs)(ig,{sx:{p:{xs:2,md:3}},children:[(0,St.jsxs)(Bu,{variant:"h6",gutterBottom:!0,sx:{fontSize:{xs:"1.1rem",md:"1.25rem"},display:"flex",alignItems:"center"},children:[(0,St.jsx)(Ag,{sx:{mr:1}}),"Account Overview"]}),(0,St.jsx)(lh,{sx:{mb:2}}),(0,St.jsx)(Bu,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.8rem",md:"0.875rem"}},children:"Welcome to your profile! Your account is set up and ready to use."})]})})})]})]})},uC=()=>{var e,r,n,o,i,a,s;const[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)(null),[h,p]=(0,t.useState)(!0),[f,m]=(0,t.useState)(""),[g,y]=(0,t.useState)(0),[v,b]=(0,t.useState)("summary"),[x]=(0,t.useState)(""),[_]=(0,t.useState)(""),w=(0,t.useCallback)((async()=>{try{const e=new URLSearchParams({report_type:v});x&&e.append("start_date",x),_&&e.append("end_date",_),console.log("\ud83d\udcca Fetching reports with params:",e.toString());const t=await bc.get("/nft/reports?".concat(e));console.log("\ud83d\udcca Reports response:",t.data),console.log("\ud83d\udcca Reports data type:",typeof t.data),console.log("\ud83d\udcca Is reports an array?",Array.isArray(t.data));const r=t.data.data||t.data;console.log("\ud83d\udcca Processed reports data:",r),console.log("\ud83d\udcca Is processed data an array?",Array.isArray(r)),d(r)}catch(e){console.error("Error fetching reports:",e),m("Failed to load reports")}}),[v,x,_]);(0,t.useEffect)((()=>{(async()=>{try{p(!0);const e=await bc.get("/nft/analytics");c(e.data)}catch(e){console.error("Error fetching analytics:",e),m("Failed to load analytics")}finally{p(!1)}})()}),[]),(0,t.useEffect)((()=>{1===g&&w()}),[g,v,x,_,w]);const S={legendary:"#FFD700",rare:"#C0C0C0",common:"#CD7F32",unknown:"#808080"},k=e=>new Date(e).toLocaleDateString(),T=e=>e?"".concat(e.substring(0,8),"...").concat(e.substring(e.length-8)):"N/A";return h?(0,St.jsxs)(uu,{sx:{p:3},children:[(0,St.jsx)(Bu,{variant:"h4",sx:{color:"#FFD700",mb:3},children:"\ud83d\udcca NFT Collection Analytics"}),(0,St.jsx)(Bu,{children:"Loading analytics..."})]}):f?(0,St.jsxs)(uu,{sx:{p:3},children:[(0,St.jsx)(Bu,{variant:"h4",sx:{color:"#FFD700",mb:3},children:"\ud83d\udcca NFT Collection Analytics"}),(0,St.jsx)(Bu,{color:"error",children:f})]}):(0,St.jsxs)(uu,{sx:{p:3,background:"linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%)",minHeight:"100vh"},children:[(0,St.jsx)(Bu,{variant:"h4",sx:{color:"#FFD700",mb:3,textAlign:"center"},children:"\ud83d\udcca NFT Collection Analytics"}),(0,St.jsx)(uu,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:(0,St.jsxs)(FS,{value:g,onChange:(e,t)=>y(t),children:[(0,St.jsx)(US,{label:"\ud83d\udcc8 Analytics Dashboard"}),(0,St.jsx)(US,{label:"\ud83d\udccb Reports"})]})}),0===g&&l&&(0,St.jsxs)(Jm,{container:!0,spacing:3,children:[(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",color:"white"},children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",sx:{color:"#FFD700",mb:1},children:"\ud83c\udfaf Total Collected"}),(0,St.jsx)(Bu,{variant:"h4",sx:{color:"white"},children:(null===(e=l.collection_stats)||void 0===e?void 0:e.total_collected)||0}),(0,St.jsx)(Bu,{variant:"body2",sx:{color:"#ccc"},children:"NFTs in collection"})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",color:"white"},children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",sx:{color:"#FFD700",mb:1},children:"\ud83d\udcda Collections"}),(0,St.jsx)(Bu,{variant:"h4",sx:{color:"white"},children:(null===(r=l.collection_stats)||void 0===r?void 0:r.unique_collections)||0}),(0,St.jsx)(Bu,{variant:"body2",sx:{color:"#ccc"},children:"Unique collections"})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",color:"white"},children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",sx:{color:"#FFD700",mb:1},children:"\u2b50 Legendary"}),(0,St.jsx)(Bu,{variant:"h4",sx:{color:"white"},children:(null===(n=l.collection_stats)||void 0===n?void 0:n.legendary_count)||0}),(0,St.jsx)(Bu,{variant:"body2",sx:{color:"#ccc"},children:"Legendary NFTs"})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:3,children:(0,St.jsx)(tg,{sx:{background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",color:"white"},children:(0,St.jsxs)(ig,{children:[(0,St.jsx)(Bu,{variant:"h6",sx:{color:"#FFD700",mb:1},children:"\ud83d\udd04 Transfers"}),(0,St.jsx)(Bu,{variant:"h4",sx:{color:"white"},children:(null===(o=l.collection_stats)||void 0===o?void 0:o.avg_transfer_count)||0}),(0,St.jsx)(Bu,{variant:"body2",sx:{color:"#ccc"},children:"Avg transfers per NFT"})]})})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsxs)($h,{sx:{p:2,background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",color:"white"},children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,sx:{color:"#FFD700"},children:"\ud83c\udfaf Rarity Distribution"}),(0,St.jsx)(uu,{sx:{mt:2},children:null===(i=l.rarity_distribution)||void 0===i?void 0:i.map(((e,t)=>(0,St.jsxs)(uu,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,St.jsxs)(Bu,{variant:"body2",sx:{color:S[e.rarity_level]||"#808080"},children:[e.rarity_level,": ",e.count," NFTs"]}),(0,St.jsxs)(Bu,{variant:"body2",sx:{color:"#FFD700"},children:[e.percentage,"%"]})]},t)))})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,md:6,children:(0,St.jsxs)($h,{sx:{p:2,background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",color:"white"},children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,sx:{color:"#FFD700"},children:"\ud83d\udcc5 Collection Timeline (Last 30 Days)"}),(0,St.jsx)(uu,{sx:{mt:2},children:null===(a=l.timeline)||void 0===a?void 0:a.slice(0,7).map(((e,t)=>(0,St.jsxs)(uu,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,St.jsx)(Bu,{variant:"body2",sx:{color:"white"},children:k(e.collection_date)}),(0,St.jsxs)(Bu,{variant:"body2",sx:{color:"#FFD700"},children:[e.nfts_collected," NFTs"]})]},t)))})]})}),(0,St.jsx)(Jm,{item:!0,xs:12,children:(0,St.jsxs)($h,{sx:{p:2,background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",color:"white"},children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,sx:{color:"#FFD700"},children:"\ud83d\udd04 Recent Transfer History"}),(0,St.jsx)(uu,{sx:{mt:2},children:null===(s=l.transfer_history)||void 0===s?void 0:s.slice(0,10).map(((e,t)=>(0,St.jsxs)(uu,{sx:{display:"flex",justifyContent:"space-between",mb:1,p:1,background:"rgba(255, 215, 0, 0.1)",borderRadius:1},children:[(0,St.jsxs)(uu,{children:[(0,St.jsxs)(Bu,{variant:"body2",sx:{color:"white"},children:[e.transfer_type," - ",k(e.transferred_at)]}),(0,St.jsxs)(Bu,{variant:"caption",sx:{color:"#ccc"},children:["TX: ",T(e.transaction_hash)]})]}),(0,St.jsx)(Bu,{variant:"body2",sx:{color:"#FFD700"},children:e.nft_name})]},t)))})]})})]}),1===g&&(0,St.jsxs)(uu,{children:[(0,St.jsxs)(uu,{sx:{display:"flex",gap:2,mb:3},children:[(0,St.jsxs)(ev,{size:"small",sx:{minWidth:120},children:[(0,St.jsx)(Zy,{children:"Report Type"}),(0,St.jsxs)(Lv,{value:v,onChange:e=>b(e.target.value),label:"Report Type",children:[(0,St.jsx)(mm,{value:"summary",children:"Summary"}),(0,St.jsx)(mm,{value:"rarity_breakdown",children:"Rarity Breakdown"}),(0,St.jsx)(mm,{value:"transfer_activity",children:"Transfer Activity"})]})]}),(0,St.jsx)(Ap,{variant:"contained",onClick:w,sx:{background:"linear-gradient(45deg, #FFD700, #FFA500)",color:"black","&:hover":{background:"linear-gradient(45deg, #FFA500, #FFD700)"}},children:"Generate Report"})]}),u&&(0,St.jsxs)($h,{sx:{p:2,background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",color:"white"},children:[(0,St.jsx)(Bu,{variant:"h6",gutterBottom:!0,sx:{color:"#FFD700"},children:"\ud83d\udccb Generated Report"}),(0,St.jsx)(uu,{sx:{mt:2},children:Array.isArray(u)&&u.length>0?u.map(((e,t)=>(0,St.jsxs)(uu,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,St.jsx)(Bu,{variant:"body2",sx:{color:"white"},children:e.metric}),(0,St.jsx)(Bu,{variant:"body2",sx:{color:"#FFD700"},children:e.value})]},t))):(0,St.jsx)(Bu,{variant:"body2",sx:{color:"#ccc"},children:'No report data available. Click "Generate Report" to create a report.'})})]})]})]})};const dC=function(){return(0,St.jsxs)(ga,{theme:Ha,children:[(0,St.jsx)(Oa,{}),(0,St.jsx)(_c,{children:(0,St.jsx)(Rc,{children:(0,St.jsxs)(ut,{children:[(0,St.jsx)(Bm,{}),(0,St.jsxs)(Pe,{children:[(0,St.jsx)(Ae,{path:"/",element:(0,St.jsx)(B_,{})}),(0,St.jsx)(Ae,{path:"/features",element:(0,St.jsx)(G_,{})}),(0,St.jsx)(Ae,{path:"/contact",element:(0,St.jsx)(B_,{})}),(0,St.jsx)(Ae,{path:"/login",element:(0,St.jsx)(Ew,{})}),(0,St.jsx)(Ae,{path:"/register",element:(0,St.jsx)(Cw,{})}),(0,St.jsx)(Ae,{path:"/dashboard",element:(0,St.jsx)(Aw,{})}),(0,St.jsx)(Ae,{path:"/dashboard/consumer",element:(0,St.jsx)(X_,{roles:["data_consumer"],children:(0,St.jsx)(HT,{})})}),(0,St.jsx)(Ae,{path:"/dashboard/provider",element:(0,St.jsx)(X_,{roles:["wallet_provider"],children:(0,St.jsx)(ZT,{})})}),(0,St.jsx)(Ae,{path:"/dashboard/nft",element:(0,St.jsx)(X_,{roles:["nft_manager"],children:(0,St.jsx)(qE,{})})}),(0,St.jsx)(Ae,{path:"/enhanced-nft-dashboard",element:(0,St.jsx)(X_,{roles:["nft_manager","admin"],children:(0,St.jsx)(YE,{})})}),(0,St.jsx)(Ae,{path:"/admin",element:(0,St.jsx)(X_,{roles:["admin"],children:(0,St.jsx)(BT,{})})}),(0,St.jsx)(Ae,{path:"/api-keys/manage",element:(0,St.jsx)(X_,{children:(0,St.jsx)(UT,{})})}),(0,St.jsx)(Ae,{path:"/profile",element:(0,St.jsx)(X_,{children:(0,St.jsx)(cC,{})})}),(0,St.jsx)(Ae,{path:"/analytics",element:(0,St.jsx)(X_,{roles:["nft_manager","admin"],children:(0,St.jsx)(uC,{})})})]})]})})})]})},hC=e=>{e&&e instanceof Function&&r.e(488).then(r.bind(r,488)).then((t=>{let{getCLS:r,getFID:n,getFCP:o,getLCP:i,getTTFB:a}=t;r(e),n(e),o(e),i(e),a(e)}))};o.createRoot(document.getElementById("root")).render((0,St.jsx)(dC,{})),hC()})()})();
//# sourceMappingURL=main.c66f56e4.js.map